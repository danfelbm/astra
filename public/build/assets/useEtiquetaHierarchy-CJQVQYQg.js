import{c as H}from"./createLucideIcon-DgLLtpTc.js";import{r as s,c as M}from"./app-CNcf-zdV.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=H("TreePineIcon",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);function R(t=s([])){const E=r=>{const n=new Map,a=[];return r.forEach(e=>{n.set(e.id,{...e,children:[]})}),r.forEach(e=>{const l=n.get(e.id);if(l)if(e.parent_id){const i=n.get(e.parent_id);i&&(i.children||(i.children=[]),i.children.push(l))}else a.push(l)}),a},o=r=>{const n=[],a=e=>{n.push(e),e.children&&e.children.length>0&&e.children.forEach(l=>a(l))};return r.forEach(e=>a(e)),n},h=(r,n=t.value)=>{for(const a of n){if(a.id===r)return a;if(a.children&&a.children.length>0){const e=h(r,a.children);if(e)return e}}return null},f=r=>{const n=[],a=o(t.value);let e=a.find(l=>l.id===r);for(;e;)n.unshift(e),e=e.parent_id?a.find(l=>l.id===e.parent_id):null;return n},p=(r,n)=>f(r).some(e=>e.id===n),g=(r,n)=>r===n?!1:!p(n,r),m=(r=t.value)=>{let n=0;const a=e=>{n++,e.children&&e.children.forEach(l=>a(l))};return r.forEach(e=>a(e)),n},v=(r=t.value)=>{if(!r||r.length===0)return 0;const n=(a,e=0)=>!a.children||a.children.length===0?e:Math.max(...a.children.map(l=>n(l,e+1)));return Math.max(...r.map(a=>n(a,0)))},D=(r,n=t.value)=>{if(!r)return n;const a=r.toLowerCase(),e=l=>{const i=l.nombre.toLowerCase().includes(a)||l.descripcion&&l.descripcion.toLowerCase().includes(a);let d=[];return l.children&&(d=l.children.map(u=>e(u)).filter(u=>u!==null)),i||d.length>0?{...l,children:d}:null};return n.map(l=>e(l)).filter(l=>l!==null)},b={draggedItem:s(null),dragOverItem:s(null),handleDragStart(r){this.draggedItem.value=r},handleDragOver(r,n){r.preventDefault(),this.dragOverItem.value=n},handleDrop(r,n){if(r.preventDefault(),!this.draggedItem.value)return;const a=this.draggedItem.value.id,e=(n==null?void 0:n.id)||null;return e&&!g(a,e)?(console.error("No se puede crear un ciclo en la jerarquÃ­a"),!1):{hijoId:a,padreId:e,valido:!0}},handleDragEnd(){this.draggedItem.value=null,this.dragOverItem.value=null}},c=s(new Set),x=r=>{c.value.has(r)?c.value.delete(r):c.value.add(r)},I=()=>{o(t.value).forEach(n=>{n.children&&n.children.length>0&&c.value.add(n.id)})},L=()=>{c.value.clear()},w=M(()=>({totalNodos:m(),profundidadMaxima:v(),totalRaices:t.value.filter(r=>!r.parent_id).length,totalConHijos:o(t.value).filter(r=>r.children&&r.children.length>0).length}));return{etiquetas:t,expandidos:c,estadisticas:w,construirArbol:E,aplanarArbol:o,buscarEnArbol:h,obtenerCamino:f,filtrarArbol:D,esDescendienteDe:p,validarRelacionPadreHijo:g,contarNodos:m,obtenerProfundidadMaxima:v,toggleExpansion:x,expandirTodos:I,colapsarTodos:L,dragDropHelpers:b}}export{C as T,R as u};
