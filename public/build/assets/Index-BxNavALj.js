import{B as U,_ as G}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BHFgvyjx.js";import{d as R,r as W,m as F,i as c,e as o,f as e,u as t,p as q,w as a,g as r,b as _,j as v,P as T,h as n,t as u,F as g,k as I,n as N,W as x}from"./app-CGDcXcXm.js";import{c as J,_ as b}from"./createLucideIcon-DanALmEC.js";import{_ as h,a as $,b as w,c as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-BudF5sLg.js";import{_ as S}from"./CardDescription.vue_vue_type_script_setup_true_lang-B32gJRul.js";import{_ as K,a as O,b as C,c as p,d as Q,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-zYJ82Mex.js";import{_ as y}from"./index-BsPs8wxd.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-De2JuYAO.js";import{_ as Y,a as Z,b as tt,c as et,d as V}from"./SelectValue.vue_vue_type_script_setup_true_lang-BAaIhJ0J.js";import{_ as at}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-DqnsH6sF.js";import{R as st}from"./refresh-cw-BdpURzdQ.js";import{S as lt}from"./square-pen-BPwE7V_J.js";import{T as it}from"./trash-2-0rqFVT6l.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-_Nm3H6S4.js";import"./index-BBAsWOFq.js";import"./floating-ui.vue-36zNgrSP.js";import"./x-BDmXRx4n.js";import"./index-CcR8_wTx.js";import"./shield-Bejn5muX.js";import"./user-CyfX3Swe.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BBLyUXDE.js";import"./chevron-right-Ch7F_p_y.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Blow8o_p.js";import"./VisuallyHidden-5PoN3-2b.js";import"./index-D4d4TGf0.js";import"./Label.vue_vue_type_script_setup_true_lang-ucIShhqX.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-o2J4dePs.js";import"./index-D3sE_pCs.js";import"./circle-alert-CaBwTfyT.js";import"./map-pin-Cz6bXU5Q.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D0fkBAd-.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DEJpvv4m.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-Cfg27zyf.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C7YVKPpr.js";import"./tag-ArrCqU1L.js";import"./users-CsdoQTZz.js";import"./target-C3-zh7jw.js";import"./vote-C94QGQq8.js";import"./folder-open-ByFFqHS3.js";import"./send-Csfph9VM.js";import"./file-text-ByNZVhOA.js";import"./briefcase-D9ShWyOM.js";import"./calendar-BTZmtWlZ.js";import"./megaphone-BNsuFAyp.js";import"./user-check-DeDdhxRC.js";import"./mail-DK6kjS89.js";import"./message-square-Fj2kQlTc.js";import"./external-link-DOg911z7.js";import"./panel-left-ybRipXPO.js";import"./check-WUsKeayf.js";import"./index-HHRqvbiQ.js";import"./nullish-CHIgUVhi.js";import"./DialogTrigger-WYu7HOaH.js";import"./useKbd-kRIii9yh.js";import"./chevron-left-D0vX9nlA.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DsjejnSm.js";import"./es-BDPlFIsO.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-CmvHk2kU.js";import"./loader-circle-DjSpOu1n.js";import"./plus-DO4I9gRZ.js";import"./search-DKUrL-QT.js";import"./filter-CxuF1EEm.js";import"./history-DYuIm94w.js";import"./save-DQB2bL4w.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=J("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),rt={class:"flex h-full flex-1 flex-col gap-4 p-4"},ot={class:"flex items-center justify-between"},ut={class:"flex items-center justify-between"},dt={class:"flex items-center gap-2"},mt={class:"flex items-center justify-between"},ft={class:"text-lg font-semibold"},pt={class:"text-sm text-muted-foreground"},ct={class:"grid gap-4 md:grid-cols-3"},_t={class:"mt-4"},vt={class:"relative overflow-x-auto"},gt={class:"font-medium"},bt={key:0,class:"text-xs text-muted-foreground"},yt={class:"text-sm"},Tt={class:"text-sm"},xt={class:"text-sm text-muted-foreground"},ht={class:"flex items-center justify-end gap-2"},$t={key:0,class:"mt-4 flex justify-center"},wt={class:"flex gap-1"},kt=["innerHTML"],Ee=R({__name:"Index",props:{tenants:{},filters:{},filterFieldsConfig:{},currentTenant:{}},setup(E){const B=E,M=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tenants",href:"/admin/tenants"}],d=W({search:B.filters.search||"",active:B.filters.active||"all"}),L=()=>{const l={search:d.value.search};d.value.active!=="all"&&(l.active=d.value.active),x.get("/admin/tenants",l,{preserveState:!0,preserveScroll:!0})};let P;F(()=>d.value.search,l=>{clearTimeout(P),P=setTimeout(()=>{L()},500)}),F(()=>d.value.active,()=>{L()});const z=l=>{confirm(`¿Estás seguro de eliminar el tenant "${l.name}"?`)&&x.delete(`/admin/tenants/${l.id}`)},D=l=>{x.post("/admin/tenants/switch",{tenant_id:l})},A=l=>{switch(l){case"basic":return"default";case"professional":return"secondary";case"enterprise":return"destructive";default:return"default"}},j=l=>{switch(l){case"basic":return"Básico";case"professional":return"Profesional";case"enterprise":return"Empresarial";default:return l}};return(l,s)=>(o(),c(g,null,[e(t(q),{title:"Gestión de Tenants"}),e(G,{breadcrumbs:M},{default:a(()=>[r("div",rt,[r("div",ot,[s[3]||(s[3]=r("div",null,[r("h2",{class:"text-3xl font-bold tracking-tight"},"Gestión de Tenants"),r("p",{class:"text-muted-foreground"}," Administra las organizaciones del sistema multi-tenant ")],-1)),e(t(T),{href:l.route("admin.tenants.create")},{default:a(()=>[e(t(b),null,{default:a(()=>[e(t(nt),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=n(" Nuevo Tenant ",-1))]),_:1})]),_:1},8,["href"])]),l.currentTenant?(o(),_(t(h),{key:0},{default:a(()=>[e(t($),{class:"pb-3"},{default:a(()=>[r("div",ut,[r("div",dt,[e(t(U),{class:"h-5 w-5 text-muted-foreground"}),e(t(w),{class:"text-sm font-medium"},{default:a(()=>[...s[4]||(s[4]=[n("Tenant Actual",-1)])]),_:1})]),e(t(y),{variant:l.currentTenant.active?"default":"secondary"},{default:a(()=>[n(u(l.currentTenant.active?"Activo":"Inactivo"),1)]),_:1},8,["variant"])])]),_:1}),e(t(k),null,{default:a(()=>[r("div",mt,[r("div",null,[r("p",ft,u(l.currentTenant.name),1),r("p",pt,u(l.currentTenant.subdomain)+".votaciones.test",1)]),e(t(y),{variant:A(l.currentTenant.subscription_plan)},{default:a(()=>[n(u(j(l.currentTenant.subscription_plan)),1)]),_:1},8,["variant"])])]),_:1})]),_:1})):v("",!0),e(t(h),null,{default:a(()=>[e(t($),null,{default:a(()=>[e(t(w),null,{default:a(()=>[...s[5]||(s[5]=[n("Filtros",-1)])]),_:1}),e(t(S),null,{default:a(()=>[...s[6]||(s[6]=[n("Busca y filtra los tenants del sistema",-1)])]),_:1})]),_:1}),e(t(k),null,{default:a(()=>[r("div",ct,[e(t(X),{modelValue:d.value.search,"onUpdate:modelValue":s[0]||(s[0]=i=>d.value.search=i),placeholder:"Buscar por nombre o subdominio...",class:"max-w-sm"},null,8,["modelValue"]),e(t(Y),{modelValue:d.value.active,"onUpdate:modelValue":s[1]||(s[1]=i=>d.value.active=i)},{default:a(()=>[e(t(Z),null,{default:a(()=>[e(t(tt),{placeholder:"Estado"})]),_:1}),e(t(et),null,{default:a(()=>[e(t(V),{value:"all"},{default:a(()=>[...s[7]||(s[7]=[n("Todos",-1)])]),_:1}),e(t(V),{value:"true"},{default:a(()=>[...s[8]||(s[8]=[n("Activos",-1)])]),_:1}),e(t(V),{value:"false"},{default:a(()=>[...s[9]||(s[9]=[n("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",_t,[e(at,{"filter-fields-config":l.filterFieldsConfig,"base-route":"/admin/tenants"},null,8,["filter-fields-config"])])]),_:1})]),_:1}),e(t(h),null,{default:a(()=>[e(t($),null,{default:a(()=>[e(t(w),null,{default:a(()=>[...s[10]||(s[10]=[n("Lista de Tenants",-1)])]),_:1}),e(t(S),null,{default:a(()=>[n(u(l.tenants.meta.total)+" tenant(s) encontrado(s) ",1)]),_:1})]),_:1}),e(t(k),null,{default:a(()=>[r("div",vt,[e(t(K),null,{default:a(()=>[e(t(O),null,{default:a(()=>[e(t(C),null,{default:a(()=>[e(t(p),null,{default:a(()=>[...s[11]||(s[11]=[n("ID",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[12]||(s[12]=[n("Nombre",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[13]||(s[13]=[n("Subdominio",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[14]||(s[14]=[n("Plan",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[15]||(s[15]=[n("Estado",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[16]||(s[16]=[n("Usuarios",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[17]||(s[17]=[n("Creado",-1)])]),_:1}),e(t(p),{class:"text-right"},{default:a(()=>[...s[18]||(s[18]=[n("Acciones",-1)])]),_:1})]),_:1})]),_:1}),e(t(Q),null,{default:a(()=>[(o(!0),c(g,null,I(l.tenants.data,i=>(o(),_(t(C),{key:i.id},{default:a(()=>[e(t(m),{class:"font-medium"},{default:a(()=>[n(u(i.id),1)]),_:2},1024),e(t(m),null,{default:a(()=>{var f;return[r("div",null,[r("p",gt,u(i.name),1),i.id===((f=l.currentTenant)==null?void 0:f.id)?(o(),c("p",bt," (Actual) ")):v("",!0)])]}),_:2},1024),e(t(m),null,{default:a(()=>[r("code",yt,u(i.subdomain),1)]),_:2},1024),e(t(m),null,{default:a(()=>[e(t(y),{variant:A(i.subscription_plan)},{default:a(()=>[n(u(j(i.subscription_plan)),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(m),null,{default:a(()=>[e(t(y),{variant:i.active?"default":"secondary"},{default:a(()=>[n(u(i.active?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(m),null,{default:a(()=>{var f;return[r("span",Tt,u(((f=i.limits)==null?void 0:f.max_users)||"∞"),1)]}),_:2},1024),e(t(m),null,{default:a(()=>[r("span",xt,u(new Date(i.created_at).toLocaleDateString()),1)]),_:2},1024),e(t(m),{class:"text-right"},{default:a(()=>{var f;return[r("div",ht,[i.id!==((f=l.currentTenant)==null?void 0:f.id)?(o(),_(t(b),{key:0,onClick:H=>D(i.id),size:"sm",variant:"outline",title:"Cambiar a este tenant"},{default:a(()=>[e(t(st),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):v("",!0),e(t(T),{href:`/admin/tenants/${i.id}/edit`},{default:a(()=>[e(t(b),{size:"sm",variant:"outline"},{default:a(()=>[e(t(lt),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),e(t(b),{onClick:H=>z(i),size:"sm",variant:"outline",disabled:i.id===1,title:"Eliminar tenant"},{default:a(()=>[e(t(it),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])])]}),_:2},1024)]),_:2},1024))),128)),l.tenants.data.length===0?(o(),_(t(C),{key:0},{default:a(()=>[e(t(m),{colspan:"8",class:"text-center text-muted-foreground"},{default:a(()=>[...s[19]||(s[19]=[n(" No se encontraron tenants ",-1)])]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),l.tenants.links.length>3?(o(),c("div",$t,[r("nav",wt,[(o(!0),c(g,null,I(l.tenants.links,i=>(o(),c(g,{key:i.label},[i.url?(o(),_(t(T),{key:0,href:i.url,class:N(["px-3 py-1 text-sm rounded-md",i.active?"bg-primary text-primary-foreground":"hover:bg-muted"]),innerHTML:i.label},null,8,["href","class","innerHTML"])):(o(),c("span",{key:1,class:N(["px-3 py-1 text-sm rounded-md text-muted-foreground"]),innerHTML:i.label},null,8,kt))],64))),128))])])):v("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{Ee as default};
