import{_ as $}from"./index-5Kpx2wY0.js";import{_ as k}from"./createLucideIcon-C7u-R01f.js";import{_ as ne,c as ue}from"./CardTitle.vue_vue_type_script_setup_true_lang-BFumUwpC.js";import{_ as ge}from"./Switch.vue_vue_type_script_setup_true_lang-J404ufpq.js";import{_ as xe,a as he,b as te,c as N,d as be,e as j}from"./TableHeader.vue_vue_type_script_setup_true_lang-F-Yz7uii.js";import{_ as ye}from"./UserLayout.vue_vue_type_script_setup_true_lang-DOtomtA0.js";import{d as me,k as x,c as D,p as fe,O as ke,w as we,j as d,o as i,e as r,b as a,u as t,f as o,g as n,l as le,n as C,t as c,a as g,i as m,W as P,y as Ce,A as Ve,m as $e,F as Q,r as se,q as Pe}from"./app-CZw07Q93.js";import{_ as Se}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-DV8X2rqw.js";import{a as ze,b as Ee,c as Fe,e as Ie,_ as Me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C_0q6Kwy.js";import{_ as je}from"./Progress.vue_vue_type_script_setup_true_lang-D1qv7iUT.js";import{C as Y}from"./clock-B7XkIYej.js";import{C as K}from"./circle-alert-uWMA2z83.js";import{C as T}from"./circle-check-big-EP3KWshb.js";import{E as De}from"./eye-C_RyQi4k.js";import{R as Be}from"./refresh-cw-hcMmN_fK.js";import{t as A}from"./index-iaJQ5f3g.js";import{L as ae}from"./loader-circle-DQOYm3pg.js";import{V as de}from"./vote-CjxG5f0n.js";import{C as ce}from"./chart-column-DbFMemnw.js";import{e as oe,C as re}from"./SelectValue.vue_vue_type_script_setup_true_lang-9rRU-lJQ.js";import"./index-DbmmK8pQ.js";import"./VisuallyHidden-C29Bi-F2.js";import"./Input.vue_vue_type_script_setup_true_lang-DCxWTU2m.js";import"./PopperContent-iq8Pmmed.js";import"./floating-ui.vue-DIqzyMHs.js";import"./VisuallyHiddenInput-BlgdTmEt.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BEVl8MTz.js";import"./index-4FPB8ZAX.js";import"./x-yvp4rZIx.js";import"./index-ukOzJdgH.js";import"./shield-CGhRnhVe.js";import"./user-BLiZb0Cx.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-B3e8d-nF.js";import"./Label.vue_vue_type_script_setup_true_lang-BGrzXVeU.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-4RjFW4ce.js";import"./map-pin-BagcXSc4.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-XREYgAdr.js";import"./square-check-big-Dp9aRsxB.js";import"./file-text-DpdPn_qr.js";import"./users-OPdRzPF7.js";import"./index-BdHS3Z4B.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-DV49e1r_.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-cyvAynzO.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-BUgYYsMq.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BRgRtrp_.js";import"./chevron-left-xvOd6cqh.js";import"./es-BRx6Co7f.js";import"./calendar-DaONdD9W.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-BsQIKGkK.js";import"./trash-2-CN1WpPul.js";import"./plus-BoqJaKrg.js";import"./search-CgpcrwQ3.js";import"./check-BARXO5K0.js";import"./history-Ciiz3qmV.js";import"./save-CgAigu3l.js";import"./nullish-CHIgUVhi.js";const Le={class:"space-y-4"},Ne={class:"flex flex-col items-center justify-center py-6"},Ae={key:0,class:"relative"},Te={key:1,class:"text-green-600"},Re={key:2,class:"text-red-600"},Ue={class:"mt-4 text-center text-sm text-muted-foreground"},qe={key:3,class:"mt-4 w-full"},He={class:"mt-2 text-center text-xs text-muted-foreground"},Oe={key:4,class:"mt-4 w-full rounded-lg bg-green-50 dark:bg-green-950 p-4"},We={class:"space-y-2 text-sm"},Xe={class:"flex items-center justify-between"},Ge={class:"rounded bg-black/10 px-2 py-1 text-xs font-mono"},Je={class:"flex items-center justify-between"},Qe={class:"font-medium"},Ye=me({__name:"VoteProcessingModal",props:{votacionId:{},checkStatusUrl:{},modelValue:{type:Boolean}},emits:["update:modelValue","completed","error"],setup(Z,{emit:f}){const B=Z,L=f,w=x(B.modelValue??!0),_=x("pending"),F=x("Preparando firma digital..."),V=x(null),I=x(0),S=x(10),z=x(null),M=D(()=>["pending","processing"].includes(_.value)),R=D(()=>["error","failed","duplicate"].includes(_.value)),h=D(()=>{switch(_.value){case"completed":return T;case"error":case"failed":case"duplicate":return K;default:return Y}}),b=D(()=>_.value==="completed"?"text-green-600":R.value?"text-red-600":"text-primary animate-pulse"),U=D(()=>{switch(_.value){case"pending":return"Preparando tu voto";case"processing":return"Procesando tu voto";case"completed":return"¡Voto registrado!";case"duplicate":return"Voto duplicado";case"error":case"failed":return"Error al procesar";default:return"Verificando estado"}}),q=async()=>{try{I.value++;const y=await fetch(B.checkStatusUrl,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!y.ok)throw new Error("Error al verificar estado");const u=await y.json();_.value=u.status,F.value=u.message,u.status==="processing"&&(S.value=Math.min(90,S.value+10)),u.completed?(S.value=100,V.value={voto_id:u.voto_id,token_preview:u.token_preview,created_at:u.created_at},E(),L("completed",u),setTimeout(()=>{_.value==="completed"&&H()},5e3)):u.error&&(E(),L("error",u))}catch(y){console.error("Error checking vote status:",y),I.value>=10&&(_.value="error",F.value="No se pudo verificar el estado. Por favor, recarga la página.",E())}},ee=()=>{q(),z.value=window.setInterval(()=>{q()},1500)},E=()=>{z.value&&(clearInterval(z.value),z.value=null)},H=()=>{P.visit(`/miembro/votaciones/${B.votacionId}/mi-voto`)},O=()=>{P.visit(`/miembro/votaciones/${B.votacionId}/votar`)},W=()=>{w.value=!1,L("update:modelValue",!1),M.value&&P.visit("/miembro/votaciones")},X=y=>new Date(y).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return fe(()=>{ee()}),ke(()=>{E()}),we(w,y=>{L("update:modelValue",y),y||E()}),(y,u)=>(i(),d(t(Me),{open:w.value,"onUpdate:open":u[0]||(u[0]=G=>w.value=G)},{default:r(()=>[a(t(ze),{class:"sm:max-w-md"},{default:r(()=>[a(t(Ee),null,{default:r(()=>[a(t(Fe),{class:"flex items-center gap-2"},{default:r(()=>[(i(),d(le(h.value),{class:C([b.value,"h-5 w-5"])},null,8,["class"])),n(" "+c(U.value),1)]),_:1})]),_:1}),o("div",Le,[o("div",Ne,[M.value?(i(),g("div",Ae,[u[1]||(u[1]=o("div",{class:"h-16 w-16 animate-spin rounded-full border-4 border-muted border-t-primary"},null,-1)),_.value==="processing"?(i(),d(t(T),{key:0,class:"absolute left-1/2 top-1/2 h-8 w-8 -translate-x-1/2 -translate-y-1/2 text-primary opacity-50"})):m("",!0)])):_.value==="completed"?(i(),g("div",Te,[a(t(T),{class:"h-16 w-16"})])):R.value?(i(),g("div",Re,[a(t(K),{class:"h-16 w-16"})])):m("",!0),o("p",Ue,c(F.value),1),M.value?(i(),g("div",qe,[a(t(je),{value:S.value,class:"h-2"},null,8,["value"]),o("p",He,c(I.value>0?`Intento ${I.value} de verificación...`:"Conectando..."),1)])):m("",!0),_.value==="completed"&&V.value?(i(),g("div",Oe,[o("div",We,[o("div",Xe,[u[2]||(u[2]=o("span",{class:"text-muted-foreground"},"Token:",-1)),o("code",Ge,c(V.value.token_preview),1)]),o("div",Je,[u[3]||(u[3]=o("span",{class:"text-muted-foreground"},"Registrado:",-1)),o("span",Qe,c(X(V.value.created_at)),1)])])])):m("",!0)]),a(t(Ie),null,{default:r(()=>[_.value==="completed"?(i(),d(t(k),{key:0,onClick:H,class:"w-full"},{default:r(()=>[a(t(De),{class:"mr-2 h-4 w-4"}),u[4]||(u[4]=n(" Ver mi voto ",-1))]),_:1})):R.value?(i(),d(t(k),{key:1,onClick:O,variant:"destructive",class:"w-full"},{default:r(()=>[a(t(Be),{class:"mr-2 h-4 w-4"}),u[5]||(u[5]=n(" Intentar nuevamente ",-1))]),_:1})):(i(),d(t(k),{key:2,onClick:W,variant:"outline",class:"w-full",disabled:M.value},{default:r(()=>[n(c(M.value?"Procesando...":"Cerrar"),1)]),_:1},8,["disabled"]))]),_:1})])]),_:1})]),_:1},8,["open"]))}}),Ke={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ze={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-4"},et={class:"flex items-center space-x-2 w-full sm:w-auto justify-end"},tt={class:"relative min-h-[50vh] flex-1"},st={class:"block sm:hidden space-y-4"},at={key:0,class:"text-center py-8 text-muted-foreground"},ot={class:"flex justify-between items-start mb-3"},rt={class:"flex-1"},lt={class:"font-semibold text-base"},it={key:0,class:"text-sm text-muted-foreground mb-3"},nt={class:"grid grid-cols-2 gap-2 text-sm mb-3"},ut={class:"font-medium"},dt={class:"font-medium"},ct={class:"flex items-center justify-between mb-3 pb-3 border-b"},mt={class:"flex items-center gap-2"},ft={class:"flex flex-col gap-2"},pt={key:0,class:"flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 text-sm font-medium"},vt={class:"hidden sm:block overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},_t={class:"rounded-md border"},gt={class:"flex items-center gap-1"},xt={class:"flex flex-col"},ht={class:"flex items-center gap-1"},bt={class:"flex flex-col"},yt={class:"flex items-center gap-1"},kt={class:"flex flex-col"},wt={class:"flex items-center gap-2 mb-1"},Ct={class:"font-medium"},Vt={key:0,class:"text-sm text-muted-foreground"},$t={class:"text-sm"},Pt={class:"text-sm"},St={class:"flex items-center gap-2"},zt={class:"flex justify-end gap-2"},Et={key:0,class:"flex items-center gap-2 px-3 py-1 rounded-md bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 text-sm font-medium"},Ft={key:0,class:"flex flex-col sm:flex-row items-center justify-between mt-4 gap-4"},It={class:"text-sm text-muted-foreground text-center sm:text-left"},Mt={class:"flex gap-2 flex-wrap justify-center"},Bs=me({__name:"Index",props:{votaciones:{},categorias:{},filters:{},mostrar_pasadas:{type:Boolean},filterFieldsConfig:{},hasProcessingVotes:{type:Boolean},canVote:{type:Boolean},canViewResults:{type:Boolean},canViewOwnVote:{type:Boolean}},setup(Z){const f=Z,B=Ce(),L=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Votaciones",href:"/miembro/votaciones"}],w=x(!1),_=x(null),F=x(""),V=x(f.mostrar_pasadas||!1),{route:I}=window,S=x(null),z=x(!1),M=D(()=>({quickSearch:f.filters.search||"",rootGroup:f.filters.advanced_filters?JSON.parse(f.filters.advanced_filters):void 0})),R={fields:f.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por título o descripción...",quickSearchFields:["titulo","descripcion"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},h=x("fecha_inicio"),b=x("asc"),U=l=>{h.value===l?b.value=b.value==="asc"?"desc":"asc":(h.value=l,b.value="asc")},q=D(()=>[...f.votaciones.data].sort((s,e)=>{let v,p;switch(h.value){case"fecha_inicio":v=new Date(s.fecha_inicio),p=new Date(e.fecha_inicio);break;case"fecha_fin":v=new Date(s.fecha_fin),p=new Date(e.fecha_fin);break;case"titulo":v=s.titulo.toLowerCase(),p=e.titulo.toLowerCase();break;default:v=s[h.value],p=e[h.value]}return v<p?b.value==="asc"?-1:1:v>p?b.value==="asc"?1:-1:0})),ee=()=>{P.get("/miembro/votaciones",{...f.filters,mostrar_pasadas:V.value||void 0},{preserveState:!0,replace:!0})},E=l=>{P.get(`/miembro/votaciones/${l}/votar`)},H=l=>{P.get(`/miembro/votaciones/${l}/mi-voto`)},O=l=>{P.get(`/miembro/votaciones/${l}/resultados`)},W=l=>l.vote_processing?ae:l.ya_voto?T:l.ha_finalizado?K:Y,X=l=>l.vote_processing?"outline":l.ya_voto?"default":l.ha_finalizado?"destructive":"secondary",y=l=>l.vote_processing?"Firmando...":l.ya_voto?l.ha_finalizado?"Voté (Finalizada)":"Ya voté":l.ha_finalizado?"Expirada":"Disponible",u=l=>new Date(l).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),G=async()=>{if(!f.hasProcessingVotes&&!z.value)return;const l=f.votaciones.data.filter(s=>s.vote_processing);if(l.length===0){ie();return}try{const s=l.map(p=>Pe.get(I("user.votaciones.check-status",p.id))),e=await Promise.all(s);e.some(p=>p.data.completed)&&P.reload({only:["votaciones","hasProcessingVotes"],preserveScroll:!0,onSuccess:()=>{const p=e.filter(J=>J.data.completed).length;A.success(`${p} voto(s) procesado(s) exitosamente`,{duration:5e3})}})}catch(s){console.error("Error verificando votos en procesamiento:",s)}},pe=()=>{z.value||(z.value=!0,S.value=setInterval(G,2e3),G())},ie=()=>{S.value&&(clearInterval(S.value),S.value=null),z.value=!1};fe(()=>{const l=B.props.flash;l!=null&&l.processing_vote&&(_.value=l.processing_vote.votacion_id,F.value=l.processing_vote.check_status_url,w.value=!0),f.hasProcessingVotes&&pe(),l!=null&&l.info&&A.info(l.info,{description:"Tu voto está siendo firmado digitalmente",duration:5e3}),l!=null&&l.success&&A.success(l.success,{duration:5e3}),l!=null&&l.error&&A.error(l.error,{duration:5e3})}),Ve(()=>{ie()});const ve=l=>{w.value=!1,P.reload({only:["votaciones"],onSuccess:()=>{A.success("¡Voto registrado!",{description:"Tu voto ha sido procesado exitosamente.",duration:5e3})}})},_e=l=>{w.value=!1,A.error("Error al procesar voto",{description:l.message||"Hubo un problema al procesar tu voto. Por favor, intenta nuevamente.",duration:7e3})};return(l,s)=>(i(),g(Q,null,[a(t($e),{title:"Mis Votaciones"}),a(ye,{breadcrumbs:L},{default:r(()=>[o("div",Ke,[s[31]||(s[31]=o("div",{class:"flex items-center justify-between"},[o("div",null,[o("h1",{class:"text-3xl font-bold"},"Mis Votaciones"),o("p",{class:"text-muted-foreground"}," Votaciones disponibles para mi participación ")])],-1)),o("div",Ze,[a(Se,{config:R,route:t(I)("user.votaciones.index"),"initial-filters":M.value,class:"w-full sm:flex-1"},null,8,["route","initial-filters"]),o("div",et,[a(t(ge),{id:"mostrar-pasadas",modelValue:V.value,"onUpdate:modelValue":[s[0]||(s[0]=e=>V.value=e),ee]},null,8,["modelValue"]),s[5]||(s[5]=o("label",{for:"mostrar-pasadas",class:"text-sm font-medium whitespace-nowrap"}," Ver historial ",-1))])]),o("div",tt,[o("div",st,[f.votaciones.data.length===0?(i(),g("div",at,c(V.value?"No tienes historial de votaciones":"No tienes votaciones disponibles en este momento"),1)):m("",!0),(i(!0),g(Q,null,se(q.value,e=>(i(),d(t(ne),{key:e.id,class:C({"opacity-75":e.ha_finalizado,"bg-green-50/50 dark:bg-green-950/10":e.ya_voto&&!e.ha_finalizado,"bg-orange-50/50 dark:bg-orange-950/10":e.vote_processing})},{default:r(()=>[a(t(ue),{class:"p-4"},{default:r(()=>{var v,p;return[o("div",ot,[o("div",rt,[o("h3",lt,c(e.titulo),1),a(t($),{variant:"outline",class:"mt-1"},{default:r(()=>[n(c(e.categoria.nombre),1)]),_:2},1024)]),e.estado_visual==="finalizada"?(i(),d(t($),{key:0,variant:"secondary",class:"text-xs"},{default:r(()=>[...s[6]||(s[6]=[n(" Finalizada ",-1)])]),_:1})):e.estado_visual==="activa"?(i(),d(t($),{key:1,variant:"default",class:"text-xs"},{default:r(()=>[...s[7]||(s[7]=[n(" Activa ",-1)])]),_:1})):e.estado_visual==="pendiente"?(i(),d(t($),{key:2,variant:"outline",class:"text-xs"},{default:r(()=>[...s[8]||(s[8]=[n(" Pendiente ",-1)])]),_:1})):m("",!0)]),e.descripcion?(i(),g("p",it,c((v=e.descripcion)==null?void 0:v.substring(0,100))+c(((p=e.descripcion)==null?void 0:p.length)>100?"...":""),1)):m("",!0),o("div",nt,[o("div",null,[s[9]||(s[9]=o("span",{class:"text-muted-foreground"},"Apertura:",-1)),o("div",ut,c(u(e.fecha_inicio)),1)]),o("div",null,[s[10]||(s[10]=o("span",{class:"text-muted-foreground"},"Cierre:",-1)),o("div",dt,c(u(e.fecha_fin)),1)])]),o("div",ct,[o("div",mt,[(i(),d(le(W(e)),{class:C(["h-4 w-4",{"animate-spin text-orange-600":e.vote_processing,"text-green-600":e.ya_voto&&!e.vote_processing,"text-orange-600":e.puede_votar&&!e.vote_processing,"text-red-600":!e.puede_votar&&!e.ya_voto&&!e.vote_processing}])},null,8,["class"])),a(t($),{variant:X(e)},{default:r(()=>[n(c(y(e)),1)]),_:2},1032,["variant"])])]),o("div",ft,[e.vote_processing?(i(),g("div",pt,[a(t(ae),{class:"h-4 w-4 animate-spin"}),s[11]||(s[11]=o("span",null,"Firmando digitalmente...",-1))])):m("",!0),e.puede_votar&&!e.vote_processing?(i(),d(t(k),{key:1,onClick:J=>E(e.id),class:"w-full"},{default:r(()=>[a(t(de),{class:"mr-2 h-4 w-4"}),s[12]||(s[12]=n(" Votar ",-1))]),_:2},1032,["onClick"])):m("",!0),e.estado_visual==="pendiente"&&!e.vote_processing?(i(),d(t(k),{key:2,variant:"outline",disabled:"",class:"w-full cursor-not-allowed"},{default:r(()=>[a(t(Y),{class:"mr-2 h-4 w-4"}),s[13]||(s[13]=n(" Próximamente ",-1))]),_:1})):m("",!0),e.puede_ver_voto&&!e.vote_processing?(i(),d(t(k),{key:3,onClick:J=>H(e.id),variant:"outline",class:"w-full"},{default:r(()=>[a(t(T),{class:"mr-2 h-4 w-4"}),s[14]||(s[14]=n(" Ver mi voto ",-1))]),_:2},1032,["onClick"])):m("",!0),e.resultados_visibles?(i(),d(t(k),{key:4,onClick:J=>O(e.id),variant:"default",class:"w-full bg-blue-600 hover:bg-blue-700 text-white"},{default:r(()=>[a(t(ce),{class:"mr-2 h-4 w-4"}),s[15]||(s[15]=n(" Ver Resultados ",-1))]),_:2},1032,["onClick"])):m("",!0)])]}),_:2},1024)]),_:2},1032,["class"]))),128))]),o("div",vt,[a(t(ne),{class:"border-0 shadow-none h-full"},{default:r(()=>[a(t(ue),{class:"pt-6"},{default:r(()=>[o("div",_t,[a(t(xe),null,{default:r(()=>[a(t(he),null,{default:r(()=>[a(t(te),null,{default:r(()=>[a(t(N),{class:"cursor-pointer select-none hover:bg-muted/50",onClick:s[1]||(s[1]=e=>U("titulo"))},{default:r(()=>[o("div",gt,[s[16]||(s[16]=n(" Título ",-1)),o("div",xt,[a(t(oe),{class:C(["h-3 w-3",{"text-primary":h.value==="titulo"&&b.value==="asc"}])},null,8,["class"]),a(t(re),{class:C(["h-3 w-3 -mt-1",{"text-primary":h.value==="titulo"&&b.value==="desc"}])},null,8,["class"])])])]),_:1}),a(t(N),null,{default:r(()=>[...s[17]||(s[17]=[n("Categoría",-1)])]),_:1}),a(t(N),{class:"cursor-pointer select-none hover:bg-muted/50",onClick:s[2]||(s[2]=e=>U("fecha_inicio"))},{default:r(()=>[o("div",ht,[s[18]||(s[18]=n(" Fecha de Apertura ",-1)),o("div",bt,[a(t(oe),{class:C(["h-3 w-3",{"text-primary":h.value==="fecha_inicio"&&b.value==="asc"}])},null,8,["class"]),a(t(re),{class:C(["h-3 w-3 -mt-1",{"text-primary":h.value==="fecha_inicio"&&b.value==="desc"}])},null,8,["class"])])])]),_:1}),a(t(N),{class:"cursor-pointer select-none hover:bg-muted/50",onClick:s[3]||(s[3]=e=>U("fecha_fin"))},{default:r(()=>[o("div",yt,[s[19]||(s[19]=n(" Fecha Límite ",-1)),o("div",kt,[a(t(oe),{class:C(["h-3 w-3",{"text-primary":h.value==="fecha_fin"&&b.value==="asc"}])},null,8,["class"]),a(t(re),{class:C(["h-3 w-3 -mt-1",{"text-primary":h.value==="fecha_fin"&&b.value==="desc"}])},null,8,["class"])])])]),_:1}),a(t(N),null,{default:r(()=>[...s[20]||(s[20]=[n("Mi Estado",-1)])]),_:1}),a(t(N),{class:"text-right"},{default:r(()=>[...s[21]||(s[21]=[n("Acción",-1)])]),_:1})]),_:1})]),_:1}),a(t(be),null,{default:r(()=>[f.votaciones.data.length===0?(i(),d(t(te),{key:0},{default:r(()=>[a(t(j),{colspan:6,class:"text-center py-8 text-muted-foreground"},{default:r(()=>[n(c(V.value?"No tienes historial de votaciones":"No tienes votaciones disponibles en este momento"),1)]),_:1})]),_:1})):m("",!0),(i(!0),g(Q,null,se(q.value,e=>(i(),d(t(te),{key:e.id,class:C({"opacity-75":e.ha_finalizado,"bg-green-50/50 dark:bg-green-950/10":e.ya_voto&&!e.ha_finalizado,"bg-blue-50/50 dark:bg-blue-950/10":e.puede_votar})},{default:r(()=>[a(t(j),null,{default:r(()=>{var v,p;return[o("div",null,[o("div",wt,[o("p",Ct,c(e.titulo),1),e.estado_visual==="finalizada"?(i(),d(t($),{key:0,variant:"secondary",class:"text-xs"},{default:r(()=>[...s[22]||(s[22]=[n(" Finalizada ",-1)])]),_:1})):e.estado_visual==="activa"?(i(),d(t($),{key:1,variant:"default",class:"text-xs"},{default:r(()=>[...s[23]||(s[23]=[n(" Activa ",-1)])]),_:1})):e.estado_visual==="pendiente"?(i(),d(t($),{key:2,variant:"outline",class:"text-xs"},{default:r(()=>[...s[24]||(s[24]=[n(" Pendiente ",-1)])]),_:1})):m("",!0)]),e.descripcion?(i(),g("p",Vt,c((v=e.descripcion)==null?void 0:v.substring(0,80))+c(((p=e.descripcion)==null?void 0:p.length)>80?"...":""),1)):m("",!0)])]}),_:2},1024),a(t(j),null,{default:r(()=>[a(t($),{variant:"outline"},{default:r(()=>[n(c(e.categoria.nombre),1)]),_:2},1024)]),_:2},1024),a(t(j),null,{default:r(()=>[o("div",$t,c(u(e.fecha_inicio)),1)]),_:2},1024),a(t(j),null,{default:r(()=>[o("div",Pt,c(u(e.fecha_fin)),1)]),_:2},1024),a(t(j),null,{default:r(()=>[o("div",St,[(i(),d(le(W(e)),{class:C(["h-4 w-4",{"animate-spin text-orange-600":e.vote_processing,"text-green-600":e.ya_voto&&!e.vote_processing,"text-orange-600":e.puede_votar&&!e.vote_processing,"text-red-600":!e.puede_votar&&!e.ya_voto&&!e.vote_processing}])},null,8,["class"])),a(t($),{variant:X(e)},{default:r(()=>[n(c(y(e)),1)]),_:2},1032,["variant"])])]),_:2},1024),a(t(j),{class:"text-right"},{default:r(()=>[o("div",zt,[e.vote_processing?(i(),g("div",Et,[a(t(ae),{class:"h-4 w-4 animate-spin"}),s[25]||(s[25]=o("span",null,"Firmando digitalmente...",-1))])):m("",!0),e.puede_votar&&!e.vote_processing?(i(),d(t(k),{key:1,onClick:v=>E(e.id),size:"sm"},{default:r(()=>[a(t(de),{class:"mr-2 h-4 w-4"}),s[26]||(s[26]=n(" Votar ",-1))]),_:2},1032,["onClick"])):m("",!0),e.estado_visual==="pendiente"&&!e.vote_processing?(i(),d(t(k),{key:2,variant:"outline",size:"sm",disabled:"",class:"cursor-not-allowed"},{default:r(()=>[a(t(Y),{class:"mr-2 h-4 w-4"}),s[27]||(s[27]=n(" Próximamente ",-1))]),_:1})):m("",!0),e.puede_ver_voto&&!e.vote_processing?(i(),d(t(k),{key:3,onClick:v=>H(e.id),variant:"outline",size:"sm"},{default:r(()=>[a(t(T),{class:"mr-2 h-4 w-4"}),s[28]||(s[28]=n(" Ver mi voto ",-1))]),_:2},1032,["onClick"])):m("",!0),e.resultados_visibles?(i(),d(t(k),{key:4,onClick:v=>O(e.id),variant:"default",size:"sm",class:"bg-blue-600 hover:bg-blue-700 text-white"},{default:r(()=>[a(t(ce),{class:"mr-2 h-4 w-4"}),s[29]||(s[29]=n(" Ver Resultados ",-1))]),_:2},1032,["onClick"])):m("",!0),e.ha_finalizado&&!e.ya_voto?(i(),d(t(k),{key:5,variant:"outline",size:"sm",disabled:""},{default:r(()=>[a(t(K),{class:"mr-2 h-4 w-4"}),s[30]||(s[30]=n(" No participé ",-1))]),_:1})):m("",!0)])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})])]),_:1})]),_:1})])]),f.votaciones.last_page>1?(i(),g("div",Ft,[o("p",It," Mostrando "+c((f.votaciones.current_page-1)*f.votaciones.per_page+1)+" a "+c(Math.min(f.votaciones.current_page*f.votaciones.per_page,f.votaciones.total))+" de "+c(f.votaciones.total)+" resultados ",1),o("div",Mt,[(i(!0),g(Q,null,se(f.votaciones.links,e=>(i(),d(t(k),{key:e.label,variant:e.active?"default":"outline",size:"sm",disabled:!e.url,onClick:v=>e.url&&t(P).visit(e.url),innerHTML:e.label,class:"min-w-[40px]"},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):m("",!0)]),w.value&&_.value&&F.value?(i(),d(Ye,{key:0,modelValue:w.value,"onUpdate:modelValue":s[4]||(s[4]=e=>w.value=e),"votacion-id":_.value,"check-status-url":F.value,onCompleted:ve,onError:_e},null,8,["modelValue","votacion-id","check-status-url"])):m("",!0)]),_:1})],64))}});export{Bs as default};
