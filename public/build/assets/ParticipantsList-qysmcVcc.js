import{_ as w}from"./createLucideIcon-D-pKcP9Q.js";import{a as V,b as B,c as E,_ as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bxwe7tUF.js";import{_ as q}from"./CardDescription.vue_vue_type_script_setup_true_lang-BVAAswS5.js";import{_ as H,a as Q,b as h,c as _,d as R,e as c}from"./TableHeader.vue_vue_type_script_setup_true_lang-CIdicxZL.js";import{a as J,_ as K}from"./index-BRaYMiZy.js";import{_ as O}from"./AlertTitle.vue_vue_type_script_setup_true_lang-CFYvDT5y.js";import{_ as W}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-CHA-M2K0.js";import{d as X,r as m,c as Y,o as Z,i as f,e as p,f as e,g as i,u as t,p as aa,t as r,j as g,w as s,h as l,b as y,F as ta,k as ea,a as sa}from"./app-CjO7v5GQ.js";import{u as ia}from"./useGeographicFilters-BqyU6kXD.js";import{C as la}from"./calendar-DDBvtQmm.js";import{M as oa}from"./map-pin-DgRtAv6q.js";import{A as ra}from"./arrow-left-BVrvljyo.js";import{I as na}from"./info-CA4jqrEF.js";import{U as C}from"./users-BKGB3LXs.js";import{S as da}from"./search-Bh9Nvbzy.js";import{C as pa}from"./chevron-left-48vlw3IX.js";import{C as ua}from"./chevron-right-Cu7pv3nH.js";import{f as ma,e as ca}from"./es-BDPlFIsO.js";import"./Input.vue_vue_type_script_setup_true_lang-B_nvdHN5.js";import"./index-Cqupi6zH.js";import"./index-B6TYaX6R.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-BGEkPemt.js";import"./index-DIHigTtG.js";import"./floating-ui.vue-DIPIQFyz.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CeaU-cJS.js";import"./VisuallyHidden-CTbTB84I.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BtUYWEab.js";import"./check-DGuODqTO.js";import"./nullish-CHIgUVhi.js";import"./x-BH92W00E.js";import"./DialogTrigger-RqoFjCa-.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-2xSyQjeV.js";import"./useKbd-kRIii9yh.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DvoN6Qah.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-BEwreD-w.js";import"./loader-circle-fzSEXKwB.js";import"./trash-2-BK1MxCnw.js";import"./plus-D1KzxJf-.js";import"./filter-DIx40dwQ.js";import"./history-BBqkzhox.js";import"./save-CEix0_Ke.js";import"./circle-alert-CCRajIhM.js";const fa={class:"min-h-screen bg-gray-50"},_a={class:"bg-white shadow-sm border-b"},ga={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},va={class:"flex items-start justify-between"},ba={class:"flex flex-col gap-4"},xa={class:"text-2xl font-bold text-gray-900"},wa={class:"flex flex-wrap gap-4 text-sm text-gray-600"},ya={class:"flex items-center gap-1"},Ca={key:0,class:"flex items-center gap-1"},$a={href:"/"},ka={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pa={class:"text-center py-8"},Fa={class:"flex items-center justify-between"},ha={class:"mb-4"},La={key:0,class:"flex justify-center py-8"},Na={key:1},za={class:"flex flex-col items-center gap-2 text-muted-foreground"},Aa={key:0,class:"flex items-center justify-between mt-4"},Sa={class:"text-sm text-muted-foreground"},ja={class:"flex items-center space-x-2"},Ma={class:"text-sm"},$t=X({__name:"ParticipantsList",props:{asamblea:{},filterFieldsConfig:{}},setup(D){const L=D,$=m([]),n=m({current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}),v=m(!1),N=m({}),z=m(L.filterFieldsConfig||[]),A=m(!1),b=m(!1),k=m(!1),P=ia({prefix:"users.",endpoints:{territorios:`${window.location.origin}/api/public/geographic/territorios`,departamentos:`${window.location.origin}/api/public/geographic/departamentos`,municipios:`${window.location.origin}/api/public/geographic/municipios`,localidades:`${window.location.origin}/api/public/geographic/localidades`}}),G=Y(()=>({fields:[...z.value||[],...P.generateFilterFields()],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre o cédula...",quickSearchFields:["users.name","users.documento_identidad"],maxNestingLevel:1,allowSaveFilters:!1})),S=o=>o?ma(new Date(o),"PPP",{locale:ca}):"",F=async(o={},a=1)=>{var d;v.value=!0;try{const x={...o,page:a},u=await sa.get(`/public-api/asambleas/${L.asamblea.id}/participantes`,{params:x});$.value=u.data.participantes.data,n.value={current_page:u.data.participantes.current_page,last_page:u.data.participantes.last_page,per_page:u.data.participantes.per_page,total:u.data.participantes.total,from:u.data.participantes.from,to:u.data.participantes.to},u.data.filterFieldsConfig&&(z.value=u.data.filterFieldsConfig)}catch(x){console.error("Error cargando participantes:",x),((d=x.response)==null?void 0:d.status)===404&&(window.location.href="/")}finally{v.value=!1}},j=o=>{N.value=o,F(o,1)},M=o=>{F(N.value,o)},T=async()=>{A.value||(A.value=!0,k.value=!0,b.value||(b.value=!0,await P.initialize()),await F())},U=async()=>{b.value||(b.value=!0,await P.initialize())};return Z(()=>{}),(o,a)=>(p(),f("div",null,[e(t(aa),{title:`Participantes - ${o.asamblea.nombre}`},null,8,["title"]),i("div",fa,[i("div",_a,[i("div",ga,[i("div",va,[i("div",ba,[i("h1",xa,r(o.asamblea.nombre),1),i("div",wa,[i("div",ya,[e(t(la),{class:"h-4 w-4"}),i("span",null,r(S(o.asamblea.fecha_inicio))+" - "+r(S(o.asamblea.fecha_fin)),1)]),o.asamblea.lugar?(p(),f("div",Ca,[e(t(oa),{class:"h-4 w-4"}),i("span",null,r(o.asamblea.ubicacion_completa),1)])):g("",!0)])]),i("a",$a,[e(t(w),{variant:"outline",size:"sm"},{default:s(()=>[e(t(ra),{class:"h-4 w-4 mr-2"}),a[3]||(a[3]=l(" Volver al inicio ",-1))]),_:1})])])])]),i("div",ka,[e(t(K),{class:"mb-6"},{default:s(()=>[e(t(na),{class:"h-4 w-4"}),e(t(O),null,{default:s(()=>[...a[4]||(a[4]=[l("Consulta Pública de Participantes",-1)])]),_:1}),e(t(J),null,{default:s(()=>[...a[5]||(a[5]=[l(" Esta es una vista pública de los participantes registrados en la asamblea. La información mostrada es limitada para proteger la privacidad de los participantes. ",-1)])]),_:1})]),_:1}),k.value?g("",!0):(p(),y(t(I),{key:0,class:"mb-6"},{default:s(()=>[e(t(V),null,{default:s(()=>[e(t(B),null,{default:s(()=>[e(t(C),{class:"inline-block mr-2 h-5 w-5"}),a[6]||(a[6]=l(" Lista de Participantes ",-1))]),_:1}),e(t(q),null,{default:s(()=>[...a[7]||(a[7]=[l(" Consulta la lista completa de participantes registrados en esta asamblea ",-1)])]),_:1})]),_:1}),e(t(E),null,{default:s(()=>[i("div",Pa,[e(t(C),{class:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a[9]||(a[9]=i("p",{class:"text-gray-600 mb-6"},[l(" Haz clic en el botón para cargar la lista de participantes. "),i("br"),i("span",{class:"text-sm text-gray-500"}," Los resultados se mostrarán paginados (50 participantes por página) ")],-1)),e(t(w),{onClick:T,disabled:v.value},{default:s(()=>[e(t(C),{class:"h-4 w-4 mr-2"}),a[8]||(a[8]=l(" Ver Lista de Participantes ",-1))]),_:1},8,["disabled"])])]),_:1})]),_:1})),k.value?(p(),y(t(I),{key:1},{default:s(()=>[e(t(V),null,{default:s(()=>[i("div",Fa,[i("div",null,[e(t(B),null,{default:s(()=>[e(t(C),{class:"inline-block mr-2 h-5 w-5"}),a[10]||(a[10]=l(" Lista de Participantes ",-1))]),_:1}),e(t(q),null,{default:s(()=>[l(r(n.value.total)+" participantes registrados ",1)]),_:1})])])]),_:1}),e(t(E),null,{default:s(()=>[i("div",ha,[e(W,{config:G.value,onApply:j,onClear:a[0]||(a[0]=d=>j({})),onMounted:U},null,8,["config"])]),v.value?(p(),f("div",La,[...a[11]||(a[11]=[i("div",{class:"text-muted-foreground"},"Cargando participantes...",-1)])])):(p(),f("div",Na,[e(t(H),null,{default:s(()=>[e(t(Q),null,{default:s(()=>[e(t(h),null,{default:s(()=>[e(t(_),null,{default:s(()=>[...a[12]||(a[12]=[l("Nombre",-1)])]),_:1}),e(t(_),null,{default:s(()=>[...a[13]||(a[13]=[l("Territorio",-1)])]),_:1}),e(t(_),null,{default:s(()=>[...a[14]||(a[14]=[l("Departamento",-1)])]),_:1}),e(t(_),null,{default:s(()=>[...a[15]||(a[15]=[l("Municipio",-1)])]),_:1}),e(t(_),null,{default:s(()=>[...a[16]||(a[16]=[l("Localidad",-1)])]),_:1})]),_:1})]),_:1}),e(t(R),null,{default:s(()=>[(p(!0),f(ta,null,ea($.value,d=>(p(),y(t(h),{key:d.id},{default:s(()=>[e(t(c),{class:"font-medium"},{default:s(()=>[l(r(d.name),1)]),_:2},1024),e(t(c),null,{default:s(()=>[l(r(d.territorio_nombre||"N/A"),1)]),_:2},1024),e(t(c),null,{default:s(()=>[l(r(d.departamento_nombre||"N/A"),1)]),_:2},1024),e(t(c),null,{default:s(()=>[l(r(d.municipio_nombre||"N/A"),1)]),_:2},1024),e(t(c),null,{default:s(()=>[l(r(d.localidad_nombre||"N/A"),1)]),_:2},1024)]),_:2},1024))),128)),$.value.length===0?(p(),y(t(h),{key:0},{default:s(()=>[e(t(c),{colspan:5,class:"text-center py-8"},{default:s(()=>[i("div",za,[e(t(da),{class:"h-8 w-8"}),a[17]||(a[17]=i("p",null,"No se encontraron participantes",-1)),a[18]||(a[18]=i("p",{class:"text-sm"},"Intenta ajustar los filtros de búsqueda",-1))])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1}),n.value.last_page>1?(p(),f("div",Aa,[i("div",Sa," Mostrando "+r(n.value.from)+" a "+r(n.value.to)+" de "+r(n.value.total)+" resultados ",1),i("div",ja,[e(t(w),{variant:"outline",size:"sm",disabled:n.value.current_page===1,onClick:a[1]||(a[1]=d=>M(n.value.current_page-1))},{default:s(()=>[e(t(pa),{class:"h-4 w-4"}),a[19]||(a[19]=l(" Anterior ",-1))]),_:1},8,["disabled"]),i("div",Ma," Página "+r(n.value.current_page)+" de "+r(n.value.last_page),1),e(t(w),{variant:"outline",size:"sm",disabled:n.value.current_page===n.value.last_page,onClick:a[2]||(a[2]=d=>M(n.value.current_page+1))},{default:s(()=>[a[20]||(a[20]=l(" Siguiente ",-1)),e(t(ua),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):g("",!0)]))]),_:1})]),_:1})):g("",!0),a[21]||(a[21]=i("div",{class:"mt-6 text-center text-sm text-gray-500"},[i("p",null,"Esta información es de carácter público y está sujeta a las políticas de privacidad."),i("p",{class:"mt-1"}," Para más información sobre la asamblea, contacte a la organización. ")],-1))])])]))}});export{$t as default};
