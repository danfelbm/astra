import{_ as Ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-B7Hu5OsG.js";import{d as ye,r as L,c as De,i as c,j as m,e as t,g as l,h as n,f as e,t as r,F as N,k as I,w as s,b as g,m as i,n as M,q as ze,v as Me,y as Pe,s as F}from"./app-DMuAIQna.js";import{c as h,_ as v,a as k,b as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-BuU4x3mY.js";import{_ as ee}from"./CardDescription.vue_vue_type_script_setup_true_lang-MjlgMBI4.js";import{_ as C}from"./createLucideIcon-DVREvg6J.js";import{_}from"./index-ByRNdMTg.js";import{_ as je}from"./Progress.vue_vue_type_script_setup_true_lang-2K8Fv54y.js";import{_ as Se,a as Ne,b as te,c as se}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DsrarvIS.js";import{_ as he,a as ve,b as _e,c as be,d as $e,e as ke,f as we,g as Ce}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CB4rRPLW.js";import{_ as Te}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-KwFaTs-N.js";import{t as R}from"./index-CpDHrFpE.js";import{_ as ae,a as le,b as oe,c as ie,d as q,e as D}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-IJBj02SI.js";import{C as ce}from"./circle-alert-DLR_15wS.js";import{C as U}from"./clock-YZLdRJhP.js";import{C as K}from"./circle-check-big-Y1a4sD88.js";import{F as de}from"./file-text-CiWb_rUT.js";import{C as fe}from"./chevron-right-B7cHhwdw.js";import{C as ge}from"./SelectValue.vue_vue_type_script_setup_true_lang-B5RgMbmd.js";import{C as re}from"./calendar-D2WQq3Rt.js";import{U as Q}from"./user-B-kt00xt.js";import{U as Ve}from"./users-DC8IvOAs.js";import{E as ne}from"./ellipsis-DHDmqIK-.js";import{S as ue}from"./square-pen-SCHpeBDi.js";import{T as W}from"./trash-2-0Ljoci2r.js";import{f as X,e as Y}from"./es-BDPlFIsO.js";import{A as He}from"./arrow-left-B_TuOwLj.js";import{C as Ae}from"./copy-CieFkOf9.js";import{T as Be}from"./target-C2393p27.js";import{T as Fe}from"./tag-BYDdDIVk.js";import{P as pe}from"./plus-RVQXooLS.js";import{p as xe}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D_47fHXe.js";import"./index-BlEXpuxR.js";import"./floating-ui.vue-B_8ih11B.js";import"./x-BIajvu4a.js";import"./Input.vue_vue_type_script_setup_true_lang-BGVUfrGL.js";import"./index-DhwjMzhI.js";import"./index-iQ0XWSid.js";import"./shield-C0sXgp1j.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Do5CqHgU.js";import"./VisuallyHidden-B9gbRvHT.js";import"./Label.vue_vue_type_script_setup_true_lang-BjkfVnrt.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BrvzYmYh.js";import"./map-pin-D7fd8V0G.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DPlLDIxr.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CmMtfouk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-M6ErZWBp.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-cf_yvTXL.js";import"./vote-DofRXVHO.js";import"./folder-open-sBsr1tf6.js";import"./send-BatKkhGa.js";import"./briefcase-C66ynNrT.js";import"./megaphone-eeMbT5Mk.js";import"./user-check-0Sbjt8bi.js";import"./clipboard-list-DDJydEtH.js";import"./mail-DfeHhtpF.js";import"./message-square-DUNrQCdy.js";import"./external-link-eOT3LCGV.js";import"./panel-left-CFY1Rz9R.js";import"./check-CX6SjPsT.js";import"./index-3tyT_Ccr.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-CrBGaWmS.js";import"./utils-Zm-dOZxC.js";import"./DialogTrigger-CBqMfsKy.js";const Re={class:"space-y-6"},qe={key:0,class:"space-y-6"},Ue={key:0},Ie={class:"font-semibold mb-3 flex items-center gap-2"},Le={class:"space-y-2"},Oe={class:"flex items-start justify-between"},Ge={class:"flex-1"},Je={class:"flex items-center gap-2 mb-2"},Ke={class:"font-medium"},Qe={key:0,class:"ml-8 space-y-3"},We={key:0,class:"text-sm text-muted-foreground"},Xe={class:"flex flex-wrap gap-4 text-sm"},Ye={class:"flex items-center gap-1 text-muted-foreground"},Ze={key:0,class:"flex items-center gap-1 text-muted-foreground"},et={key:1,class:"flex items-center gap-2"},tt={class:"flex gap-1"},st={key:1},at={class:"font-semibold mb-3 flex items-center gap-2"},lt={class:"space-y-2"},ot={class:"flex items-start justify-between"},it={class:"flex-1"},nt={class:"flex items-center gap-2 mb-2"},dt={class:"font-medium"},rt={key:0,class:"ml-8 space-y-3"},ut={key:0,class:"text-sm text-muted-foreground"},mt={class:"flex flex-wrap gap-4 text-sm"},ct={class:"flex items-center gap-1 text-muted-foreground"},ft={key:0,class:"flex items-center gap-1 text-muted-foreground"},gt={key:2},pt={class:"font-semibold mb-3 flex items-center gap-2"},xt={class:"space-y-2"},yt={class:"flex items-start justify-between"},ht={class:"flex-1"},vt={class:"flex items-center gap-2 mb-2"},_t={class:"font-medium line-through text-muted-foreground"},bt={class:"ml-7 space-y-1 text-sm text-muted-foreground"},$t={key:0,class:"flex items-center gap-1"},kt={key:1,class:"flex items-center gap-1"},wt={key:2,class:"italic mt-2"},Ct={key:3,class:"text-center py-8"},Et=ye({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(o,{emit:y}){const T=o,P=y;L([]);const V=L([]),H=L(!1),j=L(null),b=De(()=>({pendientes:T.entregables.filter(f=>f.estado==="pendiente"),en_progreso:T.entregables.filter(f=>f.estado==="en_progreso"),completados:T.entregables.filter(f=>f.estado==="completado"),cancelados:T.entregables.filter(f=>f.estado==="cancelado")})),Z=f=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[f]||"bg-gray-100 text-gray-800",O=f=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[f]||"bg-gray-100 text-gray-600",A=f=>f?X(new Date(f),"dd MMM yyyy",{locale:Y}):"Sin fecha",B=f=>f?X(new Date(f),"dd MMM yyyy 'a las' HH:mm",{locale:Y}):"-",E=f=>{if(!f)return null;const u=Math.ceil((new Date(f).getTime()-new Date().getTime())/(1e3*60*60*24));return u<0?`Vencido hace ${Math.abs(u)} días`:u===0?"Vence hoy":u===1?"Vence mañana":`${u} días`},G=f=>{const u=V.value.indexOf(f);u===-1?V.value.push(f):V.value.splice(u,1)},x=f=>V.value.includes(f),a=f=>{P("edit",f)},p=f=>{j.value=f,H.value=!0},z=()=>{j.value&&P("delete",j.value),H.value=!1,j.value=null},J=f=>{P("complete",f)},me=(f,u)=>{P("update-status",f,u)};return(f,u)=>(i(),c("div",Re,[o.viewMode==="list"?(i(),c("div",qe,[b.value.pendientes.length>0?(i(),c("div",Ue,[l("h3",Ie,[t(e(ce),{class:"h-5 w-5 text-yellow-600"}),n(" Pendientes ("+r(b.value.pendientes.length)+") ",1)]),l("div",Le,[(i(!0),c(N,null,I(b.value.pendientes,d=>(i(),g(e(v),{key:d.id},{default:s(()=>[t(e(h),{class:"p-4"},{default:s(()=>{var S;return[l("div",Oe,[l("div",Ge,[l("div",Je,[t(e(C),{onClick:$=>G(d.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[x(d.id)?(i(),g(e(ge),{key:1,class:"h-4 w-4"})):(i(),g(e(fe),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),l("h4",Ke,r(d.nombre),1),t(e(_),{class:M(O(d.prioridad)),variant:"outline"},{default:s(()=>[n(r(d.prioridad),1)]),_:2},1032,["class"]),t(e(_),{class:M(Z(d.estado))},{default:s(()=>[n(r(d.estado),1)]),_:2},1032,["class"])]),x(d.id)?(i(),c("div",Qe,[d.descripcion?(i(),c("p",We,r(d.descripcion),1)):m("",!0),l("div",Xe,[l("div",Ye,[t(e(re),{class:"h-4 w-4"}),l("span",null,r(A(d.fecha_inicio))+" - "+r(A(d.fecha_fin)),1)]),d.responsable?(i(),c("div",Ze,[t(e(Q),{class:"h-4 w-4"}),l("span",null,r(d.responsable.name),1)])):m("",!0),E(d.fecha_fin)?(i(),c("div",{key:1,class:M(["flex items-center gap-1",{"text-red-600":(S=E(d.fecha_fin))==null?void 0:S.includes("Vencido")}])},[t(e(U),{class:"h-4 w-4"}),l("span",null,r(E(d.fecha_fin)),1)],2)):m("",!0)]),d.usuarios&&d.usuarios.length>0?(i(),c("div",et,[t(e(Ve),{class:"h-4 w-4 text-muted-foreground"}),l("div",tt,[(i(!0),c(N,null,I(d.usuarios,$=>(i(),g(e(_),{key:$.id,variant:"secondary"},{default:s(()=>[n(r($.name),1)]),_:2},1024))),128))])])):m("",!0)])):m("",!0)]),o.canEdit||o.canDelete||o.canComplete?(i(),g(e(ae),{key:0},{default:s(()=>[t(e(le),{asChild:""},{default:s(()=>[t(e(C),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ne),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(oe),{align:"end"},{default:s(()=>[t(e(ie),null,{default:s(()=>[...u[1]||(u[1]=[n("Acciones",-1)])]),_:1}),t(e(q)),o.canComplete?(i(),g(e(D),{key:0,onClick:$=>J(d)},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),u[2]||(u[2]=n(" Marcar como completado ",-1))]),_:1},8,["onClick"])):m("",!0),o.canEdit?(i(),g(e(D),{key:1,onClick:$=>me(d,"en_progreso")},{default:s(()=>[t(e(U),{class:"h-4 w-4 mr-2"}),u[3]||(u[3]=n(" Marcar en progreso ",-1))]),_:1},8,["onClick"])):m("",!0),o.canEdit?(i(),g(e(D),{key:2,onClick:$=>a(d)},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),u[4]||(u[4]=n(" Editar ",-1))]),_:1},8,["onClick"])):m("",!0),o.canDelete?(i(),g(e(q),{key:3})):m("",!0),o.canDelete?(i(),g(e(D),{key:4,onClick:$=>p(d),class:"text-red-600"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),u[5]||(u[5]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)):m("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):m("",!0),b.value.en_progreso.length>0?(i(),c("div",st,[l("h3",at,[t(e(U),{class:"h-5 w-5 text-blue-600"}),n(" En Progreso ("+r(b.value.en_progreso.length)+") ",1)]),l("div",lt,[(i(!0),c(N,null,I(b.value.en_progreso,d=>(i(),g(e(v),{key:d.id,class:"border-l-4 border-l-blue-500"},{default:s(()=>[t(e(h),{class:"p-4"},{default:s(()=>{var S;return[l("div",ot,[l("div",it,[l("div",nt,[t(e(C),{onClick:$=>G(d.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[x(d.id)?(i(),g(e(ge),{key:1,class:"h-4 w-4"})):(i(),g(e(fe),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),l("h4",dt,r(d.nombre),1),t(e(_),{class:M(O(d.prioridad)),variant:"outline"},{default:s(()=>[n(r(d.prioridad),1)]),_:2},1032,["class"]),t(e(_),{class:"bg-blue-100 text-blue-800"},{default:s(()=>[...u[6]||(u[6]=[n(" En Progreso ",-1)])]),_:1})]),x(d.id)?(i(),c("div",rt,[d.descripcion?(i(),c("p",ut,r(d.descripcion),1)):m("",!0),l("div",mt,[l("div",ct,[t(e(re),{class:"h-4 w-4"}),l("span",null,"Fecha límite: "+r(A(d.fecha_fin)),1)]),d.responsable?(i(),c("div",ft,[t(e(Q),{class:"h-4 w-4"}),l("span",null,r(d.responsable.name),1)])):m("",!0),E(d.fecha_fin)?(i(),c("div",{key:1,class:M(["flex items-center gap-1",{"text-red-600":(S=E(d.fecha_fin))==null?void 0:S.includes("Vencido")}])},[t(e(U),{class:"h-4 w-4"}),l("span",null,r(E(d.fecha_fin)),1)],2)):m("",!0)])])):m("",!0)]),o.canEdit||o.canDelete||o.canComplete?(i(),g(e(ae),{key:0},{default:s(()=>[t(e(le),{asChild:""},{default:s(()=>[t(e(C),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ne),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(oe),{align:"end"},{default:s(()=>[t(e(ie),null,{default:s(()=>[...u[7]||(u[7]=[n("Acciones",-1)])]),_:1}),t(e(q)),o.canComplete?(i(),g(e(D),{key:0,onClick:$=>J(d)},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),u[8]||(u[8]=n(" Marcar como completado ",-1))]),_:1},8,["onClick"])):m("",!0),o.canEdit?(i(),g(e(D),{key:1,onClick:$=>a(d)},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),u[9]||(u[9]=n(" Editar ",-1))]),_:1},8,["onClick"])):m("",!0),o.canDelete?(i(),g(e(q),{key:2})):m("",!0),o.canDelete?(i(),g(e(D),{key:3,onClick:$=>p(d),class:"text-red-600"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),u[10]||(u[10]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)):m("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):m("",!0),b.value.completados.length>0?(i(),c("div",gt,[l("h3",pt,[t(e(K),{class:"h-5 w-5 text-green-600"}),n(" Completados ("+r(b.value.completados.length)+") ",1)]),l("div",xt,[(i(!0),c(N,null,I(b.value.completados,d=>(i(),g(e(v),{key:d.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:s(()=>[t(e(h),{class:"p-4"},{default:s(()=>[l("div",yt,[l("div",ht,[l("div",vt,[t(e(K),{class:"h-5 w-5 text-green-600"}),l("h4",_t,r(d.nombre),1),t(e(_),{class:"bg-green-100 text-green-800"},{default:s(()=>[...u[11]||(u[11]=[n(" Completado ",-1)])]),_:1})]),l("div",bt,[d.completado_at?(i(),c("div",$t,[t(e(U),{class:"h-3 w-3"}),l("span",null,"Completado: "+r(B(d.completado_at)),1)])):m("",!0),d.completado_por_usuario?(i(),c("div",kt,[t(e(Q),{class:"h-3 w-3"}),l("span",null,"Por: "+r(d.completado_por_usuario.name),1)])):m("",!0),d.notas_completado?(i(),c("p",wt,' "'+r(d.notas_completado)+'" ',1)):m("",!0)])]),o.canEdit||o.canDelete?(i(),g(e(ae),{key:0},{default:s(()=>[t(e(le),{asChild:""},{default:s(()=>[t(e(C),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ne),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(oe),{align:"end"},{default:s(()=>[t(e(ie),null,{default:s(()=>[...u[12]||(u[12]=[n("Acciones",-1)])]),_:1}),t(e(q)),o.canEdit?(i(),g(e(D),{key:0,onClick:S=>me(d,"pendiente")},{default:s(()=>[t(e(ce),{class:"h-4 w-4 mr-2"}),u[13]||(u[13]=n(" Reabrir ",-1))]),_:1},8,["onClick"])):m("",!0),o.canDelete?(i(),g(e(q),{key:1})):m("",!0),o.canDelete?(i(),g(e(D),{key:2,onClick:S=>p(d),class:"text-red-600"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),u[14]||(u[14]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)):m("",!0)])]),_:2},1024)]),_:2},1024))),128))])])):m("",!0),o.entregables.length===0?(i(),c("div",Ct,[t(e(de),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),u[15]||(u[15]=l("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):m("",!0)])):m("",!0),t(e(he),{open:H.value,"onUpdate:open":u[0]||(u[0]=d=>H.value=d)},{default:s(()=>[t(e(ve),null,{default:s(()=>[t(e(_e),null,{default:s(()=>[t(e(be),null,{default:s(()=>[...u[16]||(u[16]=[n("¿Estás seguro?",-1)])]),_:1}),t(e($e),null,{default:s(()=>{var d;return[n(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+r((d=j.value)==null?void 0:d.nombre)+'". ',1)]}),_:1})]),_:1}),t(e(ke),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...u[17]||(u[17]=[n("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:z},{default:s(()=>[...u[18]||(u[18]=[n(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Dt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},zt={class:"flex items-center justify-between"},Mt={class:"text-2xl font-bold"},Pt={class:"text-muted-foreground"},jt={class:"flex items-center gap-2"},St={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Nt={class:"text-2xl font-bold"},Tt={class:"text-2xl font-bold"},Vt={class:"text-xs text-muted-foreground"},Ht={class:"text-sm font-medium"},At={class:"text-sm font-medium"},Bt={key:0,class:"text-xs text-muted-foreground"},Ft={key:0},Rt={class:"text-sm text-muted-foreground whitespace-pre-wrap"},qt={class:"grid gap-4 md:grid-cols-2"},Ut={class:"text-sm text-muted-foreground"},It={class:"text-sm text-muted-foreground"},Lt={class:"text-sm text-muted-foreground"},Ot={class:"space-y-2"},Gt={class:"flex items-center justify-between text-sm"},Jt={class:"flex items-center justify-between text-sm"},Kt={class:"flex items-center justify-between text-sm"},Qt={class:"flex items-center gap-2"},Wt={class:"flex flex-wrap gap-2"},Xt={class:"space-y-3"},Yt={key:0},Zt={class:"text-sm text-muted-foreground"},es={key:1},ts={class:"grid gap-4 md:grid-cols-2"},ss={class:"font-semibold mb-1"},as={key:0,class:"text-red-500"},ls={class:"text-sm text-muted-foreground"},os={key:0,class:"text-xs text-muted-foreground mt-1"},is={key:0,class:"text-center py-4"},ns={class:"grid gap-4 md:grid-cols-2 text-sm"},ds={class:"font-medium"},rs={class:"font-medium"},us={key:0},ms={class:"font-medium"},cs={key:1},fs={class:"font-medium"},gs={class:"flex justify-between items-center"},Da=ye({__name:"Show",props:{hito:{},proyecto:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageEntregables:{type:Boolean},estadisticas:{},camposPersonalizados:{},valoresCamposPersonalizados:{}},setup(o){const y=o,T=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:y.proyecto.nombre,href:`/admin/proyectos/${y.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${y.proyecto.id}/hitos`},{title:y.hito.nombre,href:"#"}],P=L("detalles"),V=()=>{F.visit(`/admin/proyectos/${y.proyecto.id}/hitos/${y.hito.id}/edit`)},H=()=>{F.delete(`/admin/proyectos/${y.proyecto.id}/hitos/${y.hito.id}`,{onSuccess:()=>{R.success("Hito eliminado exitosamente")},onError:()=>{R.error("Error al eliminar el hito")}})},j=()=>{F.post(`/admin/proyectos/${y.proyecto.id}/hitos/${y.hito.id}/duplicar`,{},{onSuccess:()=>{R.success("Hito duplicado exitosamente")},onError:()=>{R.error("Error al duplicar el hito")}})},b=()=>{F.visit(`/admin/proyectos/${y.proyecto.id}/hitos/${y.hito.id}/entregables/create`)},Z=x=>{F.visit(`/admin/proyectos/${y.proyecto.id}/hitos/${y.hito.id}/entregables/${x.id}/edit`)},O=x=>{F.delete(`/admin/proyectos/${y.proyecto.id}/hitos/${y.hito.id}/entregables/${x.id}`,{onSuccess:()=>{R.success("Entregable eliminado exitosamente")},onError:()=>{R.error("Error al eliminar el entregable")}})},A=x=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[x]||"bg-gray-100 text-gray-800",B=x=>x?X(xe(x),"dd MMM yyyy",{locale:Y}):"No definida",E=x=>x?X(xe(x),"dd MMM yyyy 'a las' HH:mm",{locale:Y}):"No definida",G=(x,a)=>{var p;if(a==null||a==="")return"No especificado";switch(x.tipo){case"date":return B(a);case"checkbox":return a?"Sí":"No";case"select":case"radio":const z=(p=x.opciones)==null?void 0:p.find(J=>J.value===a);return(z==null?void 0:z.label)||a;default:return a}};return(x,a)=>(i(),c(N,null,[t(e(ze),{title:`Hito: ${o.hito.nombre}`},null,8,["title"]),t(Ee,{breadcrumbs:T},{default:s(()=>[l("div",Dt,[l("div",zt,[l("div",null,[l("h1",Mt,r(o.hito.nombre),1),l("p",Pt,"Proyecto: "+r(o.proyecto.nombre),1)]),l("div",jt,[t(e(Me),{href:`/admin/proyectos/${o.proyecto.id}/hitos`},{default:s(()=>[t(e(C),{variant:"outline",size:"sm"},{default:s(()=>[t(e(He),{class:"h-4 w-4 mr-2"}),a[1]||(a[1]=n(" Volver ",-1))]),_:1})]),_:1},8,["href"]),o.canEdit?(i(),g(e(C),{key:0,onClick:V,size:"sm",variant:"outline"},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),a[2]||(a[2]=n(" Editar ",-1))]),_:1})):m("",!0),t(e(C),{onClick:j,size:"sm",variant:"outline"},{default:s(()=>[t(e(Ae),{class:"h-4 w-4 mr-2"}),a[3]||(a[3]=n(" Duplicar ",-1))]),_:1}),o.canDelete?(i(),g(e(he),{key:1},{default:s(()=>[t(e(Te),{asChild:""},{default:s(()=>[t(e(C),{variant:"destructive",size:"sm"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),a[4]||(a[4]=n(" Eliminar ",-1))]),_:1})]),_:1}),t(e(ve),null,{default:s(()=>[t(e(_e),null,{default:s(()=>[t(e(be),null,{default:s(()=>[...a[5]||(a[5]=[n("¿Estás seguro?",-1)])]),_:1}),t(e($e),null,{default:s(()=>[...a[6]||(a[6]=[n(" Esta acción no se puede deshacer. Se eliminará permanentemente el hito y todos sus entregables asociados. ",-1)])]),_:1})]),_:1}),t(e(ke),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...a[7]||(a[7]=[n("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:H},{default:s(()=>[...a[8]||(a[8]=[n(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):m("",!0)])]),l("div",St,[t(e(v),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...a[9]||(a[9]=[n("Estado",-1)])]),_:1}),t(e(Be),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[t(e(_),{class:M([A(o.hito.estado),"mt-1"])},{default:s(()=>[n(r(o.hito.estado),1)]),_:1},8,["class"])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...a[10]||(a[10]=[n("Progreso",-1)])]),_:1}),t(e(U),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Nt,r(o.hito.porcentaje_completado)+"%",1),t(e(je),{value:o.hito.porcentaje_completado,class:"mt-2 h-1"},null,8,["value"])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...a[11]||(a[11]=[n("Entregables",-1)])]),_:1}),t(e(de),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Tt,r(o.estadisticas.total_entregables),1),l("p",Vt,r(o.estadisticas.entregables_completados)+" completados ",1)]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...a[12]||(a[12]=[n("Fecha Fin",-1)])]),_:1}),t(e(re),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Ht,r(B(o.hito.fecha_fin)),1),o.estadisticas.dias_restantes!==null?(i(),c("p",{key:0,class:M(["text-xs",o.estadisticas.esta_vencido?"text-red-600":"text-muted-foreground"])},r(o.estadisticas.esta_vencido?`Vencido hace ${Math.abs(o.estadisticas.dias_restantes)} días`:`${o.estadisticas.dias_restantes} días restantes`),3)):m("",!0)]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...a[13]||(a[13]=[n("Responsable",-1)])]),_:1}),t(e(Q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>{var p;return[l("div",At,r(((p=o.hito.responsable)==null?void 0:p.name)||"Sin asignar"),1),o.hito.responsable?(i(),c("p",Bt,r(o.hito.responsable.email),1)):m("",!0)]}),_:1})]),_:1})]),t(e(Se),{modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=p=>P.value=p),class:"flex-1"},{default:s(()=>[t(e(Ne),null,{default:s(()=>[t(e(te),{value:"detalles"},{default:s(()=>[...a[14]||(a[14]=[n("Detalles",-1)])]),_:1}),t(e(te),{value:"entregables"},{default:s(()=>[a[15]||(a[15]=n(" Entregables ",-1)),t(e(_),{variant:"secondary",class:"ml-2"},{default:s(()=>[n(r(o.estadisticas.total_entregables),1)]),_:1})]),_:1}),t(e(te),{value:"actividad"},{default:s(()=>[...a[16]||(a[16]=[n("Actividad",-1)])]),_:1})]),_:1}),t(e(se),{value:"detalles",class:"space-y-4"},{default:s(()=>[t(e(v),null,{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...a[17]||(a[17]=[n("Información General",-1)])]),_:1})]),_:1}),t(e(h),{class:"space-y-4"},{default:s(()=>[o.hito.descripcion?(i(),c("div",Ft,[a[18]||(a[18]=l("h3",{class:"font-semibold mb-2"},"Descripción",-1)),l("p",Rt,r(o.hito.descripcion),1)])):m("",!0),l("div",qt,[l("div",null,[a[19]||(a[19]=l("h3",{class:"font-semibold mb-2"},"Fecha de Inicio",-1)),l("p",Ut,r(B(o.hito.fecha_inicio)),1)]),l("div",null,[a[20]||(a[20]=l("h3",{class:"font-semibold mb-2"},"Fecha de Fin",-1)),l("p",It,r(B(o.hito.fecha_fin)),1)]),l("div",null,[a[21]||(a[21]=l("h3",{class:"font-semibold mb-2"},"Orden",-1)),l("p",Lt,r(o.hito.orden),1)]),l("div",null,[a[22]||(a[22]=l("h3",{class:"font-semibold mb-2"},"Estado",-1)),t(e(_),{class:M(A(o.hito.estado))},{default:s(()=>[n(r(o.hito.estado),1)]),_:1},8,["class"])])]),l("div",null,[a[26]||(a[26]=l("h3",{class:"font-semibold mb-2"},"Resumen de Entregables",-1)),l("div",Ot,[l("div",Gt,[a[23]||(a[23]=l("span",{class:"text-muted-foreground"},"Pendientes",-1)),t(e(_),{variant:"outline"},{default:s(()=>[n(r(o.estadisticas.entregables_pendientes),1)]),_:1})]),l("div",Jt,[a[24]||(a[24]=l("span",{class:"text-muted-foreground"},"En Progreso",-1)),t(e(_),{variant:"outline",class:"bg-blue-50"},{default:s(()=>[n(r(o.estadisticas.entregables_en_progreso),1)]),_:1})]),l("div",Kt,[a[25]||(a[25]=l("span",{class:"text-muted-foreground"},"Completados",-1)),t(e(_),{variant:"outline",class:"bg-green-50"},{default:s(()=>[n(r(o.estadisticas.entregables_completados),1)]),_:1})])])])]),_:1})]),_:1}),o.hito.etiquetas&&o.hito.etiquetas.length>0?(i(),g(e(v),{key:0},{default:s(()=>[t(e(k),null,{default:s(()=>[l("div",Qt,[t(e(Fe),{class:"h-5 w-5"}),t(e(w),null,{default:s(()=>[...a[27]||(a[27]=[n("Etiquetas",-1)])]),_:1})]),t(e(ee),null,{default:s(()=>[...a[28]||(a[28]=[n(" Etiquetas asignadas a este hito para su organización y categorización ",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Wt,[(i(!0),c(N,null,I(o.hito.etiquetas,p=>(i(),g(e(_),{key:p.id,variant:"outline",class:"px-3 py-1.5",style:Pe({borderColor:p.color||"#94a3b8",color:p.color||"#64748b",backgroundColor:`${p.color}15`||"#f1f5f9"})},{default:s(()=>[n(r(p.nombre),1)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})):m("",!0),o.hito.parent_id||o.hito.ruta_completa?(i(),g(e(v),{key:1},{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...a[29]||(a[29]=[n("Jerarquía",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Xt,[o.hito.ruta_completa?(i(),c("div",Yt,[a[30]||(a[30]=l("h3",{class:"font-semibold mb-2"},"Ruta Completa",-1)),l("p",Zt,r(o.hito.ruta_completa),1)])):m("",!0),o.hito.nivel!==void 0?(i(),c("div",es,[a[31]||(a[31]=l("h3",{class:"font-semibold mb-2"},"Nivel",-1)),t(e(_),{variant:"outline"},{default:s(()=>[n("Nivel "+r(o.hito.nivel),1)]),_:1})])):m("",!0)])]),_:1})]),_:1})):m("",!0),o.camposPersonalizados&&o.camposPersonalizados.length>0?(i(),g(e(v),{key:2},{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...a[32]||(a[32]=[n("Campos Personalizados",-1)])]),_:1}),t(e(ee),null,{default:s(()=>[...a[33]||(a[33]=[n(" Información adicional específica del hito ",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",ts,[(i(!0),c(N,null,I(o.camposPersonalizados,p=>{var z;return i(),c("div",{key:p.id},[l("h3",ss,[n(r(p.nombre)+" ",1),p.es_requerido?(i(),c("span",as,"*")):m("",!0)]),l("p",ls,r(G(p,(z=o.valoresCamposPersonalizados)==null?void 0:z[p.id])),1),p.descripcion?(i(),c("p",os,r(p.descripcion),1)):m("",!0)])}),128))]),!o.camposPersonalizados||o.camposPersonalizados.length===0?(i(),c("div",is,[...a[34]||(a[34]=[l("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):m("",!0)]),_:1})]),_:1})):m("",!0),t(e(v),null,{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...a[35]||(a[35]=[n("Información del Sistema",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",ns,[l("div",null,[a[36]||(a[36]=l("span",{class:"text-muted-foreground"},"Creado el:",-1)),l("p",ds,r(E(o.hito.created_at)),1)]),l("div",null,[a[37]||(a[37]=l("span",{class:"text-muted-foreground"},"Última actualización:",-1)),l("p",rs,r(E(o.hito.updated_at)),1)]),o.hito.created_by_usuario?(i(),c("div",us,[a[38]||(a[38]=l("span",{class:"text-muted-foreground"},"Creado por:",-1)),l("p",ms,r(o.hito.created_by_usuario.name),1)])):m("",!0),o.hito.updated_by_usuario?(i(),c("div",cs,[a[39]||(a[39]=l("span",{class:"text-muted-foreground"},"Actualizado por:",-1)),l("p",fs,r(o.hito.updated_by_usuario.name),1)])):m("",!0)])]),_:1})]),_:1})]),_:1}),t(e(se),{value:"entregables",class:"space-y-4"},{default:s(()=>[l("div",gs,[a[41]||(a[41]=l("h2",{class:"text-lg font-semibold"},"Lista de Entregables",-1)),o.canManageEntregables?(i(),g(e(C),{key:0,onClick:b,size:"sm"},{default:s(()=>[t(e(pe),{class:"h-4 w-4 mr-2"}),a[40]||(a[40]=n(" Nuevo Entregable ",-1))]),_:1})):m("",!0)]),t(Et,{entregables:o.hito.entregables||[],"can-edit":o.canManageEntregables,"can-delete":o.canManageEntregables,onEdit:Z,onDelete:O},null,8,["entregables","can-edit","can-delete"]),!o.hito.entregables||o.hito.entregables.length===0?(i(),g(e(v),{key:0},{default:s(()=>[t(e(h),{class:"text-center py-8"},{default:s(()=>[t(e(de),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a[43]||(a[43]=l("p",{class:"text-muted-foreground mb-4"},"No hay entregables asignados a este hito",-1)),o.canManageEntregables?(i(),g(e(C),{key:0,onClick:b,variant:"outline"},{default:s(()=>[t(e(pe),{class:"h-4 w-4 mr-2"}),a[42]||(a[42]=n(" Crear Primer Entregable ",-1))]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0)]),_:1}),t(e(se),{value:"actividad",class:"space-y-4"},{default:s(()=>[t(e(v),null,{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...a[44]||(a[44]=[n("Historial de Actividad",-1)])]),_:1}),t(e(ee),null,{default:s(()=>[...a[45]||(a[45]=[n(" Registro de cambios y actividades relacionadas con este hito ",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[...a[46]||(a[46]=[l("p",{class:"text-sm text-muted-foreground text-center py-8"}," El historial de actividad estará disponible próximamente ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Da as default};
