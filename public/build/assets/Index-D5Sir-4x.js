import{_ as I}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DTy3l80b.js";import{d as W,r as w,m as V,i as m,e as i,f as t,u as e,p as h,w as l,g as d,j as b,b as f,P as C,h as r,F as x,k as S,t as p,n as E,s as R,W as j}from"./app-CNcf-zdV.js";import{_ as q,c as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-DhL5ChM3.js";import{_ as g}from"./createLucideIcon-DgLLtpTc.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-CXr4ucc6.js";import{_ as F}from"./index-s_YMJFqv.js";import{_ as K,a as O,b as P,c as _,d as Q,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-B2B-X4-8.js";import{_ as z,a as N,b as L,c as M,d as n}from"./SelectValue.vue_vue_type_script_setup_true_lang-Bt0xndJV.js";import{E as X}from"./EtiquetaDisplay-BrbaTZWq.js";import{P as Y}from"./plus-B0xw1qKM.js";import{S as Z}from"./search-DXa90Ror.js";import{U as ee}from"./user-DzTPpMzP.js";import{C as te}from"./calendar-DAAYlVnm.js";import{S as ae}from"./square-pen-Def0jsxb.js";import{T as le}from"./trash-2-BaR4XxZx.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D8koaehi.js";import"./index-C53AKuaZ.js";import"./floating-ui.vue-g3wBdaGy.js";import"./x-arLKReWz.js";import"./index-DoUjDw3v.js";import"./shield-Ds2U7D9u.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BBJrNP3L.js";import"./chevron-right-CoIj8tGl.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CS3Y7RjP.js";import"./VisuallyHidden-BMJ7uEAj.js";import"./index-BfcJxwg-.js";import"./Label.vue_vue_type_script_setup_true_lang-BFduy937.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D-RM_gVc.js";import"./index-UZehIf0x.js";import"./circle-alert-BWYDLxj9.js";import"./map-pin-CODmF8A6.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-CPZLV3U1.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CQwxGvmo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-Co9lmALi.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Bowse19S.js";import"./target-Bzh15SE9.js";import"./users-BCniY5Uo.js";import"./vote-DWrrItDX.js";import"./folder-open-Bl1zn-Xz.js";import"./send-Cs3Svvwv.js";import"./file-text-VjUXoo3d.js";import"./briefcase-BxQurTMk.js";import"./megaphone-DSquqsX_.js";import"./user-check-t0y4Vuir.js";import"./mail-CzyXkW1x.js";import"./message-square-vVP8zyj_.js";import"./external-link-DknYr06I.js";import"./panel-left-C37rxO5h.js";import"./check-N9bkD0I5.js";import"./index-DraxJDKZ.js";import"./nullish-CHIgUVhi.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CxYPgAQ2.js";import"./zap-B3vRugs_.js";import"./trending-up-cr0lmCPe.js";import"./award-Bw1tM6WA.js";import"./hash-PJNBOiW2.js";const se={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},re={class:"flex items-center justify-between"},oe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ie={class:"relative"},de={key:0,class:"flex items-center gap-2"},ne={key:1,class:"text-gray-400"},ue={key:1,class:"text-gray-400 text-xs"},me={class:"flex items-center gap-1"},fe={class:"flex items-center gap-2"},pe={class:"w-20 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"},_e={class:"text-sm text-gray-500"},ge={class:"flex justify-end gap-2"},ce={key:0,class:"flex justify-center gap-2"},ve={class:"text-center text-sm text-gray-500"},kt=W({__name:"Index",props:{proyectos:{},filters:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(U){const $=U,D=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"}],c=w($.filters.search||""),v=w($.filters.estado||""),y=w($.filters.prioridad||""),k=()=>{j.get("/admin/proyectos",{search:c.value,estado:v.value,prioridad:y.value},{preserveState:!0,preserveScroll:!0})};let T;V(c,o=>{clearTimeout(T),T=setTimeout(()=>{k()},500)}),V([v,y],()=>{k()});const H=o=>{confirm(`¿Estás seguro de eliminar el proyecto "${o.nombre}"?`)&&j.delete(`/admin/proyectos/${o.id}`,{preserveScroll:!0})},A=o=>({planificacion:"bg-blue-100 text-blue-800",en_progreso:"bg-yellow-100 text-yellow-800",pausado:"bg-orange-100 text-orange-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",G=o=>({baja:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",critica:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800";return(o,a)=>(i(),m(x,null,[t(e(h),{title:"Gestión de Proyectos"}),t(I,{breadcrumbs:D},{default:l(()=>[d("div",se,[d("div",re,[a[5]||(a[5]=d("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Gestión de Proyectos ",-1)),o.canCreate?(i(),f(e(C),{key:0,href:"/admin/proyectos/create"},{default:l(()=>[t(e(g),null,{default:l(()=>[t(e(Y),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=r(" Nuevo Proyecto ",-1))]),_:1})]),_:1})):b("",!0)]),t(e(q),null,{default:l(()=>[t(e(B),{class:"p-4"},{default:l(()=>[d("div",oe,[d("div",ie,[t(e(Z),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(J),{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),type:"text",placeholder:"Buscar proyectos...",class:"pl-10"},null,8,["modelValue"])]),t(e(z),{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=s=>v.value=s)},{default:l(()=>[t(e(N),null,{default:l(()=>[t(e(L),{placeholder:"Todos los estados"})]),_:1}),t(e(M),null,{default:l(()=>[t(e(n),{value:"all"},{default:l(()=>[...a[6]||(a[6]=[r("Todos los estados",-1)])]),_:1}),t(e(n),{value:"planificacion"},{default:l(()=>[...a[7]||(a[7]=[r("Planificación",-1)])]),_:1}),t(e(n),{value:"en_progreso"},{default:l(()=>[...a[8]||(a[8]=[r("En Progreso",-1)])]),_:1}),t(e(n),{value:"pausado"},{default:l(()=>[...a[9]||(a[9]=[r("Pausado",-1)])]),_:1}),t(e(n),{value:"completado"},{default:l(()=>[...a[10]||(a[10]=[r("Completado",-1)])]),_:1}),t(e(n),{value:"cancelado"},{default:l(()=>[...a[11]||(a[11]=[r("Cancelado",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(z),{modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=s=>y.value=s)},{default:l(()=>[t(e(N),null,{default:l(()=>[t(e(L),{placeholder:"Todas las prioridades"})]),_:1}),t(e(M),null,{default:l(()=>[t(e(n),{value:"all"},{default:l(()=>[...a[12]||(a[12]=[r("Todas las prioridades",-1)])]),_:1}),t(e(n),{value:"baja"},{default:l(()=>[...a[13]||(a[13]=[r("Baja",-1)])]),_:1}),t(e(n),{value:"media"},{default:l(()=>[...a[14]||(a[14]=[r("Media",-1)])]),_:1}),t(e(n),{value:"alta"},{default:l(()=>[...a[15]||(a[15]=[r("Alta",-1)])]),_:1}),t(e(n),{value:"critica"},{default:l(()=>[...a[16]||(a[16]=[r("Crítica",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(g),{variant:"outline",onClick:a[3]||(a[3]=s=>{c.value="",v.value="",y.value="",k()})},{default:l(()=>[...a[17]||(a[17]=[r(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(q),null,{default:l(()=>[t(e(B),{class:"p-0"},{default:l(()=>[t(e(K),null,{default:l(()=>[t(e(O),null,{default:l(()=>[t(e(P),null,{default:l(()=>[t(e(_),null,{default:l(()=>[...a[18]||(a[18]=[r("Nombre",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[19]||(a[19]=[r("Responsable",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[20]||(a[20]=[r("Etiquetas",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[21]||(a[21]=[r("Estado",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[22]||(a[22]=[r("Prioridad",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[23]||(a[23]=[r("Fecha Inicio",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[24]||(a[24]=[r("Progreso",-1)])]),_:1}),t(e(_),{class:"text-right"},{default:l(()=>[...a[25]||(a[25]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[(i(!0),m(x,null,S(o.proyectos.data,s=>(i(),f(e(P),{key:s.id},{default:l(()=>[t(e(u),{class:"font-medium"},{default:l(()=>[r(p(s.nombre),1)]),_:2},1024),t(e(u),null,{default:l(()=>[s.responsable?(i(),m("div",de,[t(e(ee),{class:"h-4 w-4 text-gray-400"}),r(" "+p(s.responsable.name),1)])):(i(),m("span",ne,"Sin asignar"))]),_:2},1024),t(e(u),null,{default:l(()=>[s.etiquetas&&s.etiquetas.length>0?(i(),f(X,{key:0,etiquetas:s.etiquetas,"max-visible":3,size:"sm"},null,8,["etiquetas"])):(i(),m("span",ue,"Sin etiquetas"))]),_:2},1024),t(e(u),null,{default:l(()=>[t(e(F),{class:E(A(s.estado))},{default:l(()=>[r(p(s.estado_label),1)]),_:2},1032,["class"])]),_:2},1024),t(e(u),null,{default:l(()=>[t(e(F),{class:E(G(s.prioridad))},{default:l(()=>[r(p(s.prioridad_label),1)]),_:2},1032,["class"])]),_:2},1024),t(e(u),null,{default:l(()=>[d("div",me,[t(e(te),{class:"h-4 w-4 text-gray-400"}),r(" "+p(s.fecha_inicio),1)])]),_:2},1024),t(e(u),null,{default:l(()=>[d("div",fe,[d("div",pe,[d("div",{class:"bg-blue-600 h-2.5 rounded-full",style:R(`width: ${s.porcentaje_completado}%`)},null,4)]),d("span",_e,p(s.porcentaje_completado)+"%",1)])]),_:2},1024),t(e(u),{class:"text-right"},{default:l(()=>[d("div",ge,[o.canEdit?(i(),f(e(C),{key:0,href:`/admin/proyectos/${s.id}/edit`},{default:l(()=>[t(e(g),{variant:"outline",size:"sm"},{default:l(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"])):b("",!0),o.canDelete?(i(),f(e(g),{key:1,variant:"destructive",size:"sm",onClick:ye=>H(s)},{default:l(()=>[t(e(le),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):b("",!0)])]),_:2},1024)]),_:2},1024))),128)),o.proyectos.data.length===0?(i(),f(e(P),{key:0},{default:l(()=>[t(e(u),{colspan:"7",class:"text-center py-8"},{default:l(()=>[...a[26]||(a[26]=[d("p",{class:"text-gray-500"},"No se encontraron proyectos",-1)])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),o.proyectos.last_page>1?(i(),m("div",ce,[(i(!0),m(x,null,S(o.proyectos.links,s=>(i(),m(x,{key:s.label},[s.url?(i(),f(e(C),{key:0,href:s.url,"preserve-state":"","preserve-scroll":""},{default:l(()=>[t(e(g),{variant:s.active?"default":"outline",size:"sm",innerHTML:s.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(i(),f(e(g),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:s.label},null,8,["innerHTML"]))],64))),128))])):b("",!0),d("div",ve," Mostrando "+p(o.proyectos.data.length)+" de "+p(o.proyectos.total)+" proyectos ",1)])]),_:1})],64))}});export{kt as default};
