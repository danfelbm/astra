import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BeDoGI8L.js";import{d as X,r as T,m as N,i as c,e as n,f as t,u as e,p as Y,w as s,g as i,j as w,P as V,h as r,F as k,k as F,b as g,t as u,n as q,q as Z,W as S}from"./app-CR-2XB3C.js";import{_ as E,c as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXc292e6.js";import{c as ee,_ as p}from"./createLucideIcon-DpqMcHcs.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-87jkhHIN.js";import{_ as j}from"./index-Bv2D6OQs.js";import{_ as se}from"./Switch.vue_vue_type_script_setup_true_lang-BIn1iS3a.js";import{_ as ae,a as oe,b as L,c as _,d as le,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-D40BEwBz.js";import{_ as B,a as H,b as U,c as A,d as $,k as re,C as ie}from"./SelectValue.vue_vue_type_script_setup_true_lang-e9C0UTAB.js";import{t as h}from"./index-DEPFt58J.js";import{P as ne}from"./plus-DafQFHWU.js";import{S as de}from"./search-BvkZDDxZ.js";import{S as me}from"./square-pen-DE73kWOA.js";import{T as ue}from"./trash-2-Ba23kG3g.js";import{F as pe}from"./file-n4G-XFrm.js";import{S as fe}from"./square-check-big-rAAUEp-7.js";import{L as ce}from"./list-_-XPB9OT.js";import{F as _e}from"./file-text-bOjPW4fi.js";import{C as ve}from"./calendar-K2tiWc-j.js";import{H as ge}from"./hash-QSQRCUjq.js";import{T as xe}from"./type-HIupiKGL.js";import{S as ye}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Ert7fISp.js";import"./index-BZs2h2K_.js";import"./floating-ui.vue-BhiDC_BV.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D_zYDN4Z.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D4bt_NVp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang--Zg1QsWs.js";import"./chevrons-up-down-DnobICLq.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DspZ-Okb.js";import"./target-PRmdjiaM.js";import"./users-2q8ym3rK.js";import"./shield-4oMICjJq.js";import"./vote-BGunVfqa.js";import"./folder-open-B73Z5LJI.js";import"./send-DrZ9C7tM.js";import"./briefcase-VNV3HxYQ.js";import"./megaphone-B1ul-h89.js";import"./user-check-DqzH6i1N.js";import"./mail-mHQkAKOp.js";import"./message-square-CKxkeyaY.js";import"./external-link-BksJeFVg.js";import"./panel-left-C66hQ-oC.js";import"./check-COi2Akip.js";import"./index-CuEHpEfT.js";import"./index-B_J_AOJU.js";import"./VisuallyHidden-BWbUvSRY.js";import"./VisuallyHiddenInput-y0SKat9x.js";import"./nullish-CHIgUVhi.js";import"./x-BtC0hBQf.js";import"./index-E07s-QL0.js";import"./user-DHtFWwAY.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Dfpf6sX3.js";import"./Label.vue_vue_type_script_setup_true_lang-CTFOyKy8.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-y6H-OSrV.js";import"./circle-alert-Ce-R__0b.js";import"./map-pin-CH_1kWrL.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=ee("RadioIcon",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),Ce={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ke={class:"flex items-center justify-between"},$e={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},he={class:"relative"},Se={class:"flex items-center gap-1"},ze={class:"text-sm text-gray-500"},Te={class:"font-medium"},we={key:0,class:"text-xs text-gray-500"},Ve={class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},Fe={class:"flex justify-end gap-2"},Le={key:0,class:"flex justify-center gap-2"},Me={class:"text-center text-sm text-gray-500"},Et=X({__name:"Index",props:{campos:{},filters:{},tipos:{}},setup(D){const x=D,R=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Campos Personalizados",href:"/admin/campos-personalizados"}],y=T(x.filters.search||""),b=T(x.filters.tipo||""),v=T(x.filters.activo!==void 0?String(x.filters.activo):""),z=()=>{const l={search:y.value,tipo:b.value};v.value!==""&&(l.activo=v.value==="1"),S.get("/admin/campos-personalizados",l,{preserveState:!0,preserveScroll:!0})};let M;N(y,()=>{clearTimeout(M),M=setTimeout(()=>{z()},500)}),N([b,v],()=>{z()});const O=l=>{confirm(`¿Estás seguro de eliminar el campo "${l.nombre}"?

Esto eliminará también todos los valores asociados en los proyectos.`)&&S.delete(`/admin/campos-personalizados/${l.id}`,{preserveScroll:!0,onSuccess:()=>{h.success("Campo personalizado eliminado exitosamente")},onError:()=>{h.error("No se puede eliminar el campo porque tiene valores asociados")}})},W=(l,a)=>{S.patch(`/admin/campos-personalizados/${l.id}/toggle-activo`,{activo:a},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h.success(`Campo ${a?"activado":"desactivado"} exitosamente`)},onError:()=>{h.error("Error al cambiar el estado del campo")}})},P=(l,a)=>{const o=x.campos.data,d=o.findIndex(m=>m.id===l.id);if(a==="up"&&d>0||a==="down"&&d<o.length-1){const m=a==="up"?d-1:d+1,C=o.map(K=>K.id);[C[d],C[m]]=[C[m],C[d]],S.post("/admin/campos-personalizados/reordenar",{orden:C},{preserveScroll:!0,onSuccess:()=>{h.success("Orden actualizado")}})}},G=l=>({text:xe,number:ge,date:ve,textarea:_e,select:ce,checkbox:fe,radio:be,file:pe})[l]||ye,J=l=>({text:"bg-blue-100 text-blue-800",number:"bg-purple-100 text-purple-800",date:"bg-green-100 text-green-800",textarea:"bg-yellow-100 text-yellow-800",select:"bg-orange-100 text-orange-800",checkbox:"bg-pink-100 text-pink-800",radio:"bg-indigo-100 text-indigo-800",file:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800";return(l,a)=>(n(),c(k,null,[t(e(Y),{title:"Campos Personalizados"}),t(Q,{breadcrumbs:R},{default:s(()=>[i("div",Ce,[i("div",ke,[a[5]||(a[5]=i("div",null,[i("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Campos Personalizados "),i("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Define campos adicionales para los proyectos ")],-1)),t(e(V),{href:"/admin/campos-personalizados/create"},{default:s(()=>[t(e(p),null,{default:s(()=>[t(e(ne),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=r(" Nuevo Campo ",-1))]),_:1})]),_:1})]),t(e(E),null,{default:s(()=>[t(e(I),{class:"p-4"},{default:s(()=>[i("div",$e,[i("div",he,[t(e(de),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(te),{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=o=>y.value=o),type:"text",placeholder:"Buscar campos...",class:"pl-10"},null,8,["modelValue"])]),t(e(B),{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=o=>b.value=o)},{default:s(()=>[t(e(H),null,{default:s(()=>[t(e(U),{placeholder:"Todos los tipos"})]),_:1}),t(e(A),null,{default:s(()=>[t(e($),{value:"all"},{default:s(()=>[...a[6]||(a[6]=[r("Todos los tipos",-1)])]),_:1}),(n(!0),c(k,null,F(l.tipos,(o,d)=>(n(),g(e($),{key:d,value:d},{default:s(()=>[r(u(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(B),{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=o=>v.value=o)},{default:s(()=>[t(e(H),null,{default:s(()=>[t(e(U),{placeholder:"Todos los estados"})]),_:1}),t(e(A),null,{default:s(()=>[t(e($),{value:"all"},{default:s(()=>[...a[7]||(a[7]=[r("Todos los estados",-1)])]),_:1}),t(e($),{value:"1"},{default:s(()=>[...a[8]||(a[8]=[r("Activos",-1)])]),_:1}),t(e($),{value:"0"},{default:s(()=>[...a[9]||(a[9]=[r("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(p),{variant:"outline",onClick:a[3]||(a[3]=o=>{y.value="",b.value="",v.value="",z()})},{default:s(()=>[...a[10]||(a[10]=[r(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(E),null,{default:s(()=>[t(e(I),{class:"p-0"},{default:s(()=>[t(e(ae),null,{default:s(()=>[t(e(oe),null,{default:s(()=>[t(e(L),null,{default:s(()=>[t(e(_),{class:"w-12"},{default:s(()=>[...a[11]||(a[11]=[r("Orden",-1)])]),_:1}),t(e(_),null,{default:s(()=>[...a[12]||(a[12]=[r("Campo",-1)])]),_:1}),t(e(_),null,{default:s(()=>[...a[13]||(a[13]=[r("Slug",-1)])]),_:1}),t(e(_),null,{default:s(()=>[...a[14]||(a[14]=[r("Tipo",-1)])]),_:1}),t(e(_),{class:"text-center"},{default:s(()=>[...a[15]||(a[15]=[r("Requerido",-1)])]),_:1}),t(e(_),{class:"text-center"},{default:s(()=>[...a[16]||(a[16]=[r("Estado",-1)])]),_:1}),t(e(_),{class:"text-right"},{default:s(()=>[...a[17]||(a[17]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(le),null,{default:s(()=>[(n(!0),c(k,null,F(l.campos.data,(o,d)=>(n(),g(e(L),{key:o.id},{default:s(()=>[t(e(f),null,{default:s(()=>[i("div",Se,[t(e(p),{variant:"ghost",size:"sm",disabled:d===0,onClick:m=>P(o,"up")},{default:s(()=>[t(e(re),{class:"h-3 w-3"})]),_:2},1032,["disabled","onClick"]),i("span",ze,u(o.orden),1),t(e(p),{variant:"ghost",size:"sm",disabled:d===l.campos.data.length-1,onClick:m=>P(o,"down")},{default:s(()=>[t(e(ie),{class:"h-3 w-3"})]),_:2},1032,["disabled","onClick"])])]),_:2},1024),t(e(f),null,{default:s(()=>[i("div",null,[i("p",Te,u(o.nombre),1),o.descripcion?(n(),c("p",we,u(o.descripcion),1)):w("",!0)])]),_:2},1024),t(e(f),null,{default:s(()=>[i("code",Ve,u(o.slug),1)]),_:2},1024),t(e(f),null,{default:s(()=>[t(e(j),{class:q([J(o.tipo),"flex items-center gap-1 w-fit"])},{default:s(()=>[(n(),g(Z(G(o.tipo)),{class:"h-3 w-3"})),r(" "+u(l.tipos[o.tipo]||o.tipo),1)]),_:2},1032,["class"])]),_:2},1024),t(e(f),{class:"text-center"},{default:s(()=>[t(e(j),{class:q(o.es_requerido?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")},{default:s(()=>[r(u(o.es_requerido?"Sí":"No"),1)]),_:2},1032,["class"])]),_:2},1024),t(e(f),{class:"text-center"},{default:s(()=>[t(e(se),{"model-value":o.activo,"onUpdate:modelValue":m=>W(o,m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),t(e(f),{class:"text-right"},{default:s(()=>[i("div",Fe,[t(e(V),{href:`/admin/campos-personalizados/${o.id}/edit`},{default:s(()=>[t(e(p),{variant:"outline",size:"sm"},{default:s(()=>[t(e(me),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),t(e(p),{variant:"destructive",size:"sm",onClick:m=>O(o)},{default:s(()=>[t(e(ue),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),l.campos.data.length===0?(n(),g(e(L),{key:0},{default:s(()=>[t(e(f),{colspan:"7",class:"text-center py-8"},{default:s(()=>[...a[18]||(a[18]=[i("p",{class:"text-gray-500"},"No se encontraron campos personalizados",-1)])]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l.campos.last_page>1?(n(),c("div",Le,[(n(!0),c(k,null,F(l.campos.links,o=>(n(),c(k,{key:o.label},[o.url?(n(),g(e(V),{key:0,href:o.url,"preserve-state":"","preserve-scroll":""},{default:s(()=>[t(e(p),{variant:o.active?"default":"outline",size:"sm",innerHTML:o.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(n(),g(e(p),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:o.label},null,8,["innerHTML"]))],64))),128))])):w("",!0),i("div",Me," Mostrando "+u(l.campos.data.length)+" de "+u(l.campos.total)+" campos ",1)])]),_:1})],64))}});export{Et as default};
