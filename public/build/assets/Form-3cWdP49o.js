import{d as S,c as p,u as j,i as d,e as a,f as i,q as U,w as l,g as r,t as n,h as f,l as z,j as m,n as h,m as c,b as A,x as B,F as M}from"./app-CkhVWdHG.js";import{_ as y}from"./createLucideIcon-CHf_Lxma.js";import{_ as L,a as H,b as q,c as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-BXCLwqRH.js";import{_ as O}from"./Checkbox.vue_vue_type_script_setup_true_lang-DpSsFuaE.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-DzvVhVAL.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-j5TDzH1i.js";import{_ as J}from"./Textarea.vue_vue_type_script_setup_true_lang-BwPq2h4-.js";import{_ as k}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-BzeKrSiR.js";import{_ as K}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DfbVIH0o.js";import{C as F}from"./calendar-DY2SJR6W.js";import{C as N}from"./clock-CuwMt59n.js";import{A as Q}from"./arrow-left-BWgHrqDN.js";import"./index-At6q0cj0.js";import"./floating-ui.vue-8TPJYbVN.js";import"./check-D3BooNAk.js";import"./index-DrV5l2Sk.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-DKaD928I.js";import"./x-BCEWOWXy.js";import"./index-DAkIX2xo.js";import"./shield-CF7xWoVR.js";import"./user-CeelOWF7.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-f6YTEwmi.js";import"./chevron-right-DdPTDTrr.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BHk0bXwu.js";import"./VisuallyHidden-C9lEUMbd.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DU0zgQXL.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-H8opoY1u.js";import"./index-B0WfP2AV.js";import"./circle-alert-C7lqUy5m.js";import"./map-pin-DsvTsqaq.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-9dijwKH3.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-hJmYyt6h.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-UscTC1nv.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ByygLhPE.js";import"./tag-B5l-vvj7.js";import"./users-F_LGaRLI.js";import"./target-BmVErwO4.js";import"./vote-CcdJJgdz.js";import"./folder-open-DYXDlTv5.js";import"./send-6mxAGbLJ.js";import"./file-text-D16wxmF-.js";import"./briefcase-BZxp1iFi.js";import"./megaphone-BRrpcecz.js";import"./user-check-Csl4bhL0.js";import"./clipboard-list-C9l00ASA.js";import"./mail-bD5vIarq.js";import"./message-square-V9_XX9nJ.js";import"./external-link-J8JT7u4-.js";import"./panel-left-BoQqoDB3.js";import"./index-DgRiAzms.js";import"./index-DXVwOIj3.js";const W={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},X={class:"flex items-center justify-between"},Y={class:"text-3xl font-bold"},Z={class:"text-muted-foreground"},ee={class:"grid gap-6 md:grid-cols-2"},ie={class:"space-y-4"},oe={key:0,class:"text-sm text-destructive mt-1"},te={key:0,class:"text-sm text-destructive mt-1"},re={class:"space-y-4"},ae={key:0,class:"text-sm text-destructive mt-1"},se={key:1,class:"text-sm text-destructive mt-1"},ne={key:0,class:"text-sm text-destructive mt-1"},le={key:1,class:"text-sm text-destructive mt-1"},ce={class:"flex items-center space-x-2"},de={key:0,class:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},fe={class:"mt-2 space-y-2"},me={class:"flex items-center gap-2 text-blue-700"},ue={class:"font-medium"},pe={class:"font-medium"},_e={key:0,class:"flex items-center gap-2 text-blue-600"},he={key:1,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},ve={class:"text-red-800 text-sm"},be={class:"flex justify-between mt-8"},bi=S({__name:"Form",props:{periodo:{}},setup(P){const v=P,u=p(()=>!!v.periodo),C=[{title:"Admin",href:"/admin/dashboard"},{title:"Periodos Electorales",href:"/admin/periodos-electorales"},{title:u.value?"Editar":"Crear",href:"#"}],e=j((()=>{if(!v.periodo)return{nombre:"",descripcion:"",fecha_inicio:null,fecha_fin:null,activo:!0};const t=v.periodo;return{nombre:t.nombre||"",descripcion:t.descripcion||"",fecha_inicio:t.fecha_inicio?new Date(t.fecha_inicio):null,fecha_fin:t.fecha_fin?new Date(t.fecha_fin):null,activo:t.activo}})()),T=()=>{u.value?e.put(`/admin/periodos-electorales/${v.periodo.id}`,{onError:t=>{console.error("Errores de validación:",t)}}):e.post("/admin/periodos-electorales",{onError:t=>{console.error("Errores de validación:",t)}})},b=p(()=>{if(!e.fecha_inicio)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio);return isNaN(t.getTime())?"Fecha de inicio inválida":""}),x=p(()=>{if(!e.fecha_fin||!e.fecha_inicio)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),o=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);return isNaN(t.getTime())||isNaN(o.getTime())?"Fechas inválidas":o<=t?"La fecha de fin debe ser posterior a la fecha de inicio":""}),w=p(()=>{if(!e.fecha_inicio||!e.fecha_fin)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),o=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);if(isNaN(t.getTime())||isNaN(o.getTime()))return"";const s=Math.ceil((o.getTime()-t.getTime())/(1e3*60*60*24));if(s<0)return"";if(s<30)return`${s} día${s!==1?"s":""}`;const E=Math.floor(s/30),D=s%30;let V=`${E} mes${E!==1?"es":""}`;return D>0&&(V+=` y ${D} día${D!==1?"s":""}`),V}),g=p(()=>{if(!e.fecha_inicio||!e.fecha_fin)return null;const t=new Date,o=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),s=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);return isNaN(o.getTime())||isNaN(s.getTime())?null:s<t?{label:"Finalizado",color:"text-gray-600",icon:F}:o<=t&&s>=t?{label:"Vigente",color:"text-green-600",icon:N}:{label:"Próximo",color:"text-blue-600",icon:N}}),I=p(()=>e.nombre.trim().length>0&&e.fecha_inicio&&e.fecha_fin&&!b.value&&!x.value),$=t=>{if(!t)return"";const o=t instanceof Date?t:new Date(t);return isNaN(o.getTime())?"":o.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(t,o)=>(c(),d(M,null,[a(i(U),{title:u.value?"Editar Periodo Electoral":"Nuevo Periodo Electoral"},null,8,["title"]),a(K,{breadcrumbs:C},{default:l(()=>[r("div",W,[r("div",X,[r("div",null,[r("h1",Y,n(u.value?"Editar Periodo Electoral":"Nuevo Periodo Electoral"),1),r("p",Z,n(u.value?"Modifica los datos del periodo electoral":"Define un nuevo marco temporal para procesos electorales"),1)]),a(i(y),{variant:"outline",onClick:o[0]||(o[0]=s=>t.$inertia.visit("/admin/periodos-electorales"))},{default:l(()=>[a(i(Q),{class:"mr-2 h-4 w-4"}),o[7]||(o[7]=f(" Volver ",-1))]),_:1})]),a(i(L),null,{default:l(()=>[a(i(H),null,{default:l(()=>[a(i(q),null,{default:l(()=>[f(n(u.value?"Datos del Periodo":"Información del Nuevo Periodo"),1)]),_:1})]),_:1}),a(i(G),{class:"space-y-6"},{default:l(()=>[r("form",{onSubmit:z(T,["prevent"])},[r("div",ee,[r("div",ie,[r("div",null,[a(i(_),{for:"nombre"},{default:l(()=>[...o[8]||(o[8]=[f("Nombre del Periodo *",-1)])]),_:1}),a(i(R),{id:"nombre",modelValue:i(e).nombre,"onUpdate:modelValue":o[1]||(o[1]=s=>i(e).nombre=s),placeholder:"Ej: Elecciones 2024-2028, Periodo Presidencial 2026...",class:h({"border-destructive":i(e).errors.nombre})},null,8,["modelValue","class"]),i(e).errors.nombre?(c(),d("p",oe,n(i(e).errors.nombre),1)):m("",!0)]),r("div",null,[a(i(_),{for:"descripcion"},{default:l(()=>[...o[9]||(o[9]=[f("Descripción (opcional)",-1)])]),_:1}),a(i(J),{id:"descripcion",modelValue:i(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=s=>i(e).descripcion=s),placeholder:"Descripción detallada del periodo electoral...",rows:"4",class:h({"border-destructive":i(e).errors.descripcion})},null,8,["modelValue","class"]),i(e).errors.descripcion?(c(),d("p",te,n(i(e).errors.descripcion),1)):m("",!0)])]),r("div",re,[r("div",null,[a(i(_),{for:"fecha_inicio"},{default:l(()=>[...o[10]||(o[10]=[f("Fecha y Hora de Inicio *",-1)])]),_:1}),a(i(k),{id:"fecha_inicio",modelValue:i(e).fecha_inicio,"onUpdate:modelValue":o[3]||(o[3]=s=>i(e).fecha_inicio=s),placeholder:"Seleccionar fecha y hora de inicio",class:h({"border-destructive":i(e).errors.fecha_inicio||b.value})},null,8,["modelValue","class"]),b.value?(c(),d("p",ae,n(b.value),1)):m("",!0),i(e).errors.fecha_inicio?(c(),d("p",se,n(i(e).errors.fecha_inicio),1)):m("",!0)]),r("div",null,[a(i(_),{for:"fecha_fin"},{default:l(()=>[...o[11]||(o[11]=[f("Fecha y Hora de Fin *",-1)])]),_:1}),a(i(k),{id:"fecha_fin",modelValue:i(e).fecha_fin,"onUpdate:modelValue":o[4]||(o[4]=s=>i(e).fecha_fin=s),placeholder:"Seleccionar fecha y hora de fin",class:h({"border-destructive":i(e).errors.fecha_fin||x.value})},null,8,["modelValue","class"]),x.value?(c(),d("p",ne,n(x.value),1)):m("",!0),i(e).errors.fecha_fin?(c(),d("p",le,n(i(e).errors.fecha_fin),1)):m("",!0)]),r("div",ce,[a(i(O),{id:"activo",checked:i(e).activo,"onUpdate:checked":o[5]||(o[5]=s=>i(e).activo=s)},null,8,["checked"]),a(i(_),{for:"activo"},{default:l(()=>[...o[12]||(o[12]=[f(" Periodo activo ",-1)])]),_:1})]),o[13]||(o[13]=r("p",{class:"text-xs text-muted-foreground"}," Solo los periodos activos pueden ser utilizados en convocatorias. ",-1))])]),i(e).fecha_inicio&&i(e).fecha_fin?(c(),d("div",de,[a(i(_),{class:"text-blue-800 font-medium"},{default:l(()=>[...o[14]||(o[14]=[f("Vista previa del periodo:",-1)])]),_:1}),r("div",fe,[r("div",me,[a(i(F),{class:"h-4 w-4"}),r("span",ue,n($(i(e).fecha_inicio)),1),o[15]||(o[15]=r("span",{class:"text-blue-500"},"→",-1)),r("span",pe,n($(i(e).fecha_fin)),1)]),w.value?(c(),d("div",_e,[a(i(N),{class:"h-4 w-4"}),r("span",null,"Duración: "+n(w.value),1)])):m("",!0),g.value?(c(),d("div",{key:1,class:h(["flex items-center gap-2",g.value.color])},[(c(),A(B(g.value.icon),{class:"h-4 w-4"})),r("span",null,"Estado: "+n(g.value.label),1)],2)):m("",!0)])])):m("",!0),i(e).errors.delete?(c(),d("div",he,[r("p",ve,n(i(e).errors.delete),1)])):m("",!0),r("div",be,[a(i(y),{variant:"outline",type:"button",onClick:o[6]||(o[6]=s=>t.$inertia.visit("/admin/periodos-electorales"))},{default:l(()=>[...o[16]||(o[16]=[f(" Cancelar ",-1)])]),_:1}),a(i(y),{type:"submit",disabled:i(e).processing||!I.value},{default:l(()=>[f(n(i(e).processing?"Guardando...":u.value?"Actualizar":"Crear")+" Periodo ",1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{bi as default};
