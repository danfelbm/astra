import{c as F,u as e,d as B,$ as qe,k,w as me,H as N,j as E,o as C,e as x,s as L,i as W,b as j,R as A,h as U,al as Se,p as le,O as ne,U as K,am as Fe,J as Ke,g as Ve,t as $e,a as Pe,f as He}from"./app-B9WdfHz0.js";import{d as ve,u as Ge,c as z,b as he,a as ge}from"./VisuallyHidden-v6W7h8xI.js";import{P as $,a as H}from"./createLucideIcon-Cu4q1RHU.js";import{o as oe,k as Re,r as G}from"./index-BtaghElR.js";import{i as se,u as ie,f as Me,a as Ne,h as J,j as Te}from"./PopperContent-bSXGC2uT.js";import{a as ye,u as Ae,h as ze}from"./Input.vue_vue_type_script_setup_true_lang-BnXmnV_U.js";import{S as Oe}from"./search-D4-lZnJP.js";import{u as De}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CGoGLG7h.js";import{g as je}from"./utils-CxEmwkvF.js";import{V as Ue}from"./VisuallyHiddenInput-DF-hXhzv.js";function We(l,n,t){const s=l.findIndex(o=>se(o,n)),d=l.findIndex(o=>se(o,t));if(s===-1||d===-1)return[];const[i,r]=[s,d].sort((o,f)=>o-f);return l.slice(i,r+1)}function Je(l){const n=F(()=>e(l)),t=F(()=>new Intl.Collator("en",{usage:"search",...n.value}));return{startsWith:(r,o)=>o.length===0?!0:(r=r.normalize("NFC"),o=o.normalize("NFC"),t.value.compare(r.slice(0,o.length),o)===0),endsWith:(r,o)=>o.length===0?!0:(r=r.normalize("NFC"),o=o.normalize("NFC"),t.value.compare(r.slice(-o.length),o)===0),contains:(r,o)=>{if(o.length===0)return!0;r=r.normalize("NFC"),o=o.normalize("NFC");let f=0;const m=o.length;for(;f+m<=r.length;f++){const v=r.slice(f,f+m);if(t.value.compare(o,v)===0)return!0}return!1}}}function Xe(l,n,t){return l===void 0?!1:Array.isArray(l)?l.some(s=>T(s,n,t)):T(l,n,t)}function T(l,n,t){return l===void 0||n===void 0?!1:typeof l=="string"?l===n:typeof t=="function"?t(l,n):typeof t=="string"?(l==null?void 0:l[t])===(n==null?void 0:n[t]):se(l,n)}const[re,Qe]=z("ListboxRoot");var Ye=B({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(l,{expose:n,emit:t}){const s=l,d=t,{multiple:i,highlightOnHover:r,orientation:o,disabled:f,selectionBehavior:m,dir:v}=qe(s),{getItems:h}=ie({isProvider:!0}),{handleTypeaheadSearch:w}=Me(),{primitiveElement:I,currentElement:p}=ve(),b=De(),V=Ge(v),_e=Ne(p),O=k(),R=k(!1),Q=k(!0),y=ye(s,"modelValue",d,{defaultValue:s.defaultValue??(i.value?[]:void 0),passive:s.modelValue===void 0,deep:!0});function be(a){if(R.value=!0,s.multiple){const u=Array.isArray(y.value)?[...y.value]:[],c=u.findIndex(g=>T(g,a,s.by));s.selectionBehavior==="toggle"?(c===-1?u.push(a):u.splice(c,1),y.value=u):(y.value=[a],O.value=a)}else s.selectionBehavior==="toggle"&&T(y.value,a,s.by)?y.value=void 0:y.value=a;setTimeout(()=>{R.value=!1},1)}const _=k(null),Y=k(null),P=k(!1),Z=k(!1),ue=oe(),ee=oe(),de=oe();function te(){return h().map(a=>a.ref).filter(a=>a.dataset.disabled!=="")}function q(a,u=!0){if(!a)return;_.value=a,Q.value&&_.value.focus(),u&&_.value.scrollIntoView({block:"nearest"});const c=h().find(g=>g.ref===a);d("highlight",c)}function Ce(a){if(P.value)de.trigger(a);else{const u=h().find(c=>T(c.value,a,s.by));u&&(_.value=u.ref,q(u.ref))}}function xe(a){_.value&&_.value.isConnected&&(a.preventDefault(),a.stopPropagation(),Z.value||_.value.click())}function we(a){if(Q.value){if(R.value=!0,P.value)ee.trigger(a);else{const u=a.altKey||a.ctrlKey||a.metaKey;if(u&&a.key==="a"&&i.value){const c=h(),g=c.map(S=>S.value);y.value=[...g],a.preventDefault(),q(c[c.length-1].ref)}else if(!u){const c=w(a.key,h());c&&q(c)}}setTimeout(()=>{R.value=!1},1)}}function Ee(){Z.value=!0}function Be(){N(()=>{Z.value=!1})}function ce(){N(()=>{const a=new KeyboardEvent("keydown",{key:"PageUp"});fe(a)})}function ae(a){const u=_.value;u!=null&&u.isConnected&&(Y.value=u),_.value=null,d("leave",a)}function Ie(a){var c,g;const u=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((c=a.currentTarget)==null||c.dispatchEvent(u),d("entryFocus",u),!u.defaultPrevented)if(Y.value)q(Y.value);else{const S=(g=te())==null?void 0:g[0];q(S)}}function fe(a){const u=je(a,o.value,V.value);if(!u)return;let c=te();if(_.value){if(u==="last")c.reverse();else if(u==="prev"||u==="next"){u==="prev"&&c.reverse();const g=c.indexOf(_.value);c=c.slice(g+1)}ke(a,c[0])}if(c.length){const g=!_.value&&u==="prev"?c.length-1:0;q(c[g])}if(P.value)return ee.trigger(a)}function ke(a,u){var g;if(!(P.value||s.selectionBehavior!=="replace"||!i.value||!Array.isArray(y.value)||(a.altKey||a.ctrlKey||a.metaKey)&&!a.shiftKey)&&a.shiftKey){const S=h().filter(M=>M.ref.dataset.disabled!=="");let D=(g=S.find(M=>M.ref===u))==null?void 0:g.value;if(a.key===b.END?D=S[S.length-1].value:a.key===b.HOME&&(D=S[0].value),!D||!O.value)return;const Le=We(S.map(M=>M.value),O.value,D);y.value=Le}}async function pe(a){if(await N(),P.value)ue.trigger(a);else{const u=te(),c=u.find(g=>g.dataset.state==="checked");c?q(c):u.length&&q(u[0])}}return me(y,()=>{R.value||N(()=>{pe()})},{immediate:!0,deep:!0}),n({highlightedElement:_,highlightItem:Ce,highlightFirstItem:ce,highlightSelected:pe,getItems:h}),Qe({modelValue:y,onValueChange:be,multiple:i,orientation:o,dir:V,disabled:f,highlightOnHover:r,highlightedElement:_,isVirtual:P,virtualFocusHook:ue,virtualKeydownHook:ee,virtualHighlightHook:de,by:s.by,firstValue:O,selectionBehavior:m,focusable:Q,onLeave:ae,onEnter:Ie,changeHighlight:q,onKeydownEnter:xe,onKeydownNavigation:fe,onKeydownTypeAhead:we,onCompositionStart:Ee,onCompositionEnd:Be,highlightFirstItem:ce}),(a,u)=>(C(),E(e($),{ref_key:"primitiveElement",ref:I,as:a.as,"as-child":a.asChild,dir:e(V),"data-disabled":e(f)?"":void 0,onPointerleave:ae,onFocusout:u[0]||(u[0]=async c=>{const g=c.relatedTarget||c.target;await N(),_.value&&e(p)&&!e(p).contains(g)&&ae(c)})},{default:x(()=>[L(a.$slots,"default",{modelValue:e(y)}),e(_e)&&a.name?(C(),E(e(Ue),{key:0,name:a.name,value:e(y),disabled:e(f),required:a.required},null,8,["name","value","disabled","required"])):W("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Ze=Ye,et=B({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const{CollectionSlot:n}=ie(),t=re(),s=Re(!1,10);return(d,i)=>(C(),E(e(n),null,{default:x(()=>[j(e($),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:e(t).focusable.value?e(t).highlightedElement.value?"-1":"0":void 0,"aria-orientation":e(t).orientation.value,"aria-multiselectable":!!e(t).multiple.value,"data-orientation":e(t).orientation.value,onMousedown:i[0]||(i[0]=U(r=>s.value=!0,["left"])),onFocus:i[1]||(i[1]=r=>{e(s)||e(t).onEnter(r)}),onKeydown:[i[2]||(i[2]=A(U(r=>{e(t).focusable.value&&e(t).onKeydownNavigation(r)},["prevent"]),["down","up","left","right","home","end"])),A(e(t).onKeydownEnter,["enter"]),e(t).onKeydownTypeAhead]},{default:x(()=>[L(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),tt=et,at=B({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(l,{emit:n}){const t=l,d=ye(t,"modelValue",n,{defaultValue:"",passive:t.modelValue===void 0}),i=re(),{primitiveElement:r,currentElement:o}=ve(),f=F(()=>t.disabled||i.disabled.value||!1),m=k();return Se(()=>{var v;return m.value=(v=i.highlightedElement.value)==null?void 0:v.id}),le(()=>{i.focusable.value=!1,setTimeout(()=>{var v;t.autoFocus&&((v=o.value)==null||v.focus())},1)}),ne(()=>{i.focusable.value=!0}),(v,h)=>(C(),E(e($),{ref_key:"primitiveElement",ref:r,as:v.as,"as-child":v.asChild,value:e(d),disabled:f.value?"":void 0,"data-disabled":f.value?"":void 0,"aria-disabled":f.value??void 0,"aria-activedescendant":m.value,type:"text",onKeydown:[A(U(e(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),A(e(i).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=w=>{d.value=w.target.value,e(i).highlightFirstItem()}),onCompositionstart:e(i).onCompositionStart,onCompositionend:e(i).onCompositionEnd},{default:x(()=>[L(v.$slots,"default",{modelValue:e(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),ot=at;const[st,lt]=z("ListboxGroup");var nt=B({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const n=l,t=J(void 0,"reka-listbox-group");return lt({id:t}),(s,d)=>(C(),E(e($),K({role:"group"},n,{"aria-labelledby":e(t)}),{default:x(()=>[L(s.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),it=nt,rt=B({__name:"ListboxGroupLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(l){const n=l,t=st({id:""});return(s,d)=>(C(),E(e($),K(n,{id:e(t).id}),{default:x(()=>[L(s.$slots,"default")]),_:3},16,["id"]))}}),ut=rt;const dt="listbox.select",[qt,ct]=z("ListboxItem");var ft=B({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(l,{emit:n}){const t=l,s=n,d=J(void 0,"reka-listbox-item"),{CollectionItem:i}=ie(),{forwardRef:r,currentElement:o}=Ae(),f=re(),m=F(()=>o.value===f.highlightedElement.value),v=F(()=>Xe(f.modelValue.value,t.value,f.by)),h=F(()=>f.disabled.value||t.disabled);async function w(p){s("select",p),!(p!=null&&p.defaultPrevented)&&!h.value&&p&&(f.onValueChange(t.value),f.changeHighlight(o.value))}function I(p){const b={originalEvent:p,value:t.value};Te(dt,w,b)}return ct({isSelected:v}),(p,b)=>(C(),E(e(i),{value:p.value},{default:x(()=>[Fe([m.value,v.value],()=>j(e($),K({id:e(d)},p.$attrs,{ref:e(r),role:"option",tabindex:e(f).focusable.value?m.value?"0":"-1":-1,"aria-selected":v.value,as:p.as,"as-child":p.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":m.value?"":void 0,"data-state":v.value?"checked":"unchecked",onClick:I,onKeydown:A(U(I,["prevent"]),["space"]),onPointermove:b[0]||(b[0]=V=>{e(f).highlightedElement.value!==e(o)&&(e(f).highlightOnHover.value?e(f).changeHighlight(e(o),!1):e(f).focusable.value||e(f).changeHighlight(e(o),!1))})}),{default:x(()=>[L(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),b,1)]),_:3},8,["value"]))}}),pt=ft;const St=B({__name:"Command",props:{modelValue:{default:""},defaultValue:{},multiple:{type:Boolean},orientation:{},dir:{},disabled:{type:Boolean},selectionBehavior:{},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(l,{emit:n}){const t=l,s=n,d=G(t,"class"),i=he(d,s),r=k(new Map),o=k(new Map),{contains:f}=Je({sensitivity:"base"}),m=Ke({search:"",filtered:{count:0,items:new Map,groups:new Set}});function v(){if(!m.search){m.filtered.count=r.value.size;return}m.filtered.groups=new Set;let h=0;for(const[w,I]of r.value){const p=f(I,m.search);m.filtered.items.set(w,p?1:0),p&&h++}for(const[w,I]of o.value)for(const p of I)if(m.filtered.items.get(p)>0){m.filtered.groups.add(w);break}m.filtered.count=h}return me(()=>m.search,()=>{v()}),ht({allItems:r,allGroups:o,filterState:m}),(h,w)=>(C(),E(e(Ze),K({"data-slot":"command"},e(i),{class:e(H)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t.class)}),{default:x(()=>[L(h.$slots,"default")]),_:3},16,["class"]))}}),Ft=B({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,t=G(n,"class"),{filterState:s}=X(),d=F(()=>!!s.search&&s.filtered.count===0);return(i,r)=>d.value?(C(),E(e($),K({key:0,"data-slot":"command-empty"},e(t),{class:e(H)("py-6 text-center text-sm",n.class)}),{default:x(()=>[L(i.$slots,"default")]),_:3},16,["class"])):W("",!0)}}),Kt=B({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(l){const n=l,t=G(n,"class"),{allGroups:s,filterState:d}=X(),i=J(),r=F(()=>d.search?d.filtered.groups.has(i):!0);return yt({id:i}),le(()=>{s.value.has(i)||s.value.set(i,new Set)}),ne(()=>{s.value.delete(i)}),(o,f)=>(C(),E(e(it),K(e(t),{id:e(i),"data-slot":"command-group",class:e(H)("text-foreground overflow-hidden p-1",n.class),hidden:r.value?void 0:!0}),{default:x(()=>[o.heading?(C(),E(e(ut),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:x(()=>[Ve($e(o.heading),1)]),_:1})):W("",!0),L(o.$slots,"default")]),_:3},16,["id","class","hidden"]))}}),mt={"data-slot":"command-input-wrapper",class:"flex h-12 items-center gap-2 border-b px-3"},Vt=B({inheritAttrs:!1,__name:"CommandInput",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,t=G(n,"class"),s=ge(t),{filterState:d}=X();return(i,r)=>(C(),Pe("div",mt,[j(e(Oe),{class:"size-4 shrink-0 opacity-50"}),j(e(ot),K({...e(s),...i.$attrs},{modelValue:e(d).search,"onUpdate:modelValue":r[0]||(r[0]=o=>e(d).search=o),"data-slot":"command-input","auto-focus":"",class:e(H)("placeholder:text-muted-foreground flex h-12 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",n.class)}),null,16,["modelValue","class"])]))}}),$t=B({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["select"],setup(l,{emit:n}){const t=l,s=n,d=G(t,"class"),i=he(d,s),r=J(),{filterState:o,allItems:f,allGroups:m}=X(),v=gt(),h=F(()=>{if(o.search){const p=o.filtered.items.get(r);return p===void 0?!0:p>0}else return!0}),w=k(),I=ze(w);return le(()=>{var b,V;if(!(I.value instanceof HTMLElement))return;f.value.set(r,I.value.textContent??((b=t.value)==null?void 0:b.toString())??"");const p=v==null?void 0:v.id;p&&(m.value.has(p)?(V=m.value.get(p))==null||V.add(r):m.value.set(p,new Set([r])))}),ne(()=>{f.value.delete(r)}),(p,b)=>h.value?(C(),E(e(pt),K({key:0},e(i),{id:e(r),ref_key:"itemRef",ref:w,"data-slot":"command-item",class:e(H)("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-3 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t.class),onSelect:b[0]||(b[0]=()=>{e(o).search=""})}),{default:x(()=>[L(p.$slots,"default")]),_:3},16,["id","class"])):W("",!0)}}),vt={role:"presentation"},Pt=B({__name:"CommandList",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,t=G(n,"class"),s=ge(t);return(d,i)=>(C(),E(e(tt),K({"data-slot":"command-list"},e(s),{class:e(H)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",n.class)}),{default:x(()=>[He("div",vt,[L(d.$slots,"default")])]),_:3},16,["class"]))}}),[X,ht]=z("Command"),[gt,yt]=z("CommandGroup");export{St as _,Vt as a,Pt as b,Ft as c,Kt as d,$t as e};
