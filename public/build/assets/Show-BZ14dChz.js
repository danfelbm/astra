import{d as rt,r as nt,c as V,b as c,e as n,w as r,g as a,j as d,f as s,u as o,P as g,h as i,t as l,n as N,q as it,i as m,s as lt,F,k as T,W as A,G as dt}from"./app-CbA_dzrH.js";import{B as ut,_ as mt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DjfisSTq.js";import{_,a as y,b,c as h}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dpl1EP6e.js";import{_ as ct}from"./CardDescription.vue_vue_type_script_setup_true_lang-FdnBhRW4.js";import{_ as f}from"./createLucideIcon-0y3HvBb2.js";import{_ as k}from"./index-MuREUf8q.js";import{_ as ft,a as pt,b as w,c as C}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-nmj-UEmO.js";import{_ as B,a as U}from"./index-CMryySum.js";import{u as gt}from"./useToast-BWn_kELr.js";import{C as vt}from"./circle-x-BAB6M3OH.js";import{C as M}from"./circle-check-big-CTzKScww.js";import{F as R}from"./file-text-DINmkRZl.js";import{A as _t}from"./arrow-left-DWk22nOp.js";import{D as yt}from"./download-B_RhEBu7.js";import{C as bt}from"./copy-CisGHgxy.js";import{S as ht}from"./square-pen-CVrov98_.js";import{T as kt}from"./trash-2-di4yGiJv.js";import{C as G}from"./circle-alert-CfNQ3Vlu.js";import{C as q}from"./calendar-BOFnEXb6.js";import{D as xt}from"./dollar-sign-CHkcv1fe.js";import{U as O}from"./user-BnDczykq.js";import{M as H}from"./mail-I3hCy8Tx.js";import{P as W}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-C4x6rJ8B.js";import{H as X}from"./hash-DhQlwg24.js";import{P as J}from"./plus-D-GKCu6A.js";import{L as wt}from"./list-CvXGo0O-.js";import{T as Ct}from"./tree-pine-CDAlwPDx.js";import{C as zt}from"./clock-Bx6DQ-_s.js";import{C as $t}from"./chevron-right-pq_ChJ0s.js";import{E as Dt}from"./external-link-CKKN5QSr.js";import"./index-D-PGeZ3t.js";import"./floating-ui.vue-D3EH1Xba.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-nF_8TJte.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CPMNIlI6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-H44qAxpr.js";import"./chevrons-up-down-B4CsJOKK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BZUuILpY.js";import"./tag-DBRua3DS.js";import"./users-DLZP89St.js";import"./target-B8OPFMH2.js";import"./shield-yBic2gp-.js";import"./vote-5ymqB6Fb.js";import"./folder-open-B03CPFE8.js";import"./send-BUC0oswk.js";import"./briefcase-BEGziJue.js";import"./megaphone-CDZIxwTF.js";import"./user-check-B3Jm4jmh.js";import"./clipboard-list-wMp9Eq1A.js";import"./message-square-RBI0Tfwc.js";import"./panel-left-ivBXt___.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-C7VbuHoF.js";import"./VisuallyHidden-BOU54Fpc.js";import"./Input.vue_vue_type_script_setup_true_lang-Dw2oMjuZ.js";import"./index-DzUkqZxm.js";import"./check-8t2yOxAa.js";import"./nullish-CHIgUVhi.js";import"./index-DPtKDKxs.js";import"./index-CXCj42Z3.js";import"./RovingFocusItem-CIXcS1m3.js";import"./utils-D2aazO7p.js";import"./x-CxSWfWOJ.js";import"./index-BGfSt6nP.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-H8FdC1v8.js";import"./Label.vue_vue_type_script_setup_true_lang-BHOcaT7W.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-fWHHAQt9.js";import"./map-pin-B0r5dLQM.js";const St={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Pt={class:"flex items-center justify-between"},Et={class:"flex items-center gap-4"},Vt={class:"text-3xl font-bold"},Ft={class:"flex items-center gap-4 mt-2"},Tt={class:"flex gap-2"},At={class:"flex gap-2"},Ot={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Lt={class:"lg:col-span-2 space-y-6"},jt={key:0},It={class:"mt-1"},Nt={class:"grid grid-cols-2 gap-4"},Bt={class:"mt-1 flex items-center gap-2"},Ut={class:"mt-1 flex items-center gap-2"},Mt={key:1},Rt={class:"flex justify-between text-sm text-gray-600 mb-2"},Gt={class:"w-full bg-gray-200 rounded-full h-3"},qt={key:2},Ht={class:"mt-1 text-gray-700"},Wt={key:0},Xt={class:"mt-1 text-2xl font-bold flex items-center gap-2"},Jt={class:"text-sm text-gray-600"},Kt={key:1},Qt={key:0},Yt={class:"rounded-lg border p-4 bg-blue-50 dark:bg-blue-950/20"},Zt={class:"flex items-start gap-4"},te={class:"flex-1"},ee={class:"flex items-center gap-2 mb-2"},oe={class:"font-semibold text-lg"},ae={class:"space-y-2 text-sm"},se={class:"flex items-center gap-2"},re=["href"],ne={key:0,class:"flex items-center gap-2"},ie=["href"],le={class:"flex items-center gap-2"},de={class:"text-gray-600"},ue={key:1},me={class:"space-y-4"},ce={key:0,class:"flex items-center gap-2"},fe={key:1,class:"flex items-center gap-2"},pe={key:2,class:"flex items-center gap-2"},ge=["href"],ve={key:3,class:"flex items-center gap-2"},_e=["href"],ye={key:2},be={class:"space-y-4"},he={class:"flex items-center gap-3"},ke={class:"font-medium"},xe={class:"text-sm text-gray-500"},we={key:0,class:"text-sm text-gray-600 mt-1"},Ce={class:"space-y-4"},ze={class:"text-sm font-medium text-gray-600"},$e={class:"mt-1"},De={class:"flex justify-between items-center"},Se={class:"flex gap-2"},Pe={key:0},Ee={class:"grid grid-cols-4 gap-4 mb-6"},Ve={class:"text-center"},Fe={class:"text-2xl font-bold"},Te={class:"text-center"},Ae={class:"text-2xl font-bold text-yellow-600"},Oe={class:"text-center"},Le={class:"text-2xl font-bold text-green-600"},je={class:"text-center"},Ie={class:"text-2xl font-bold"},Ne={key:0,class:"mt-6 space-y-2"},Be={class:"flex items-center justify-between"},Ue={class:"flex-1"},Me={class:"font-medium"},Re={key:0,class:"text-sm text-gray-600 mt-1"},Ge={class:"flex items-center gap-4 mt-2"},qe={key:0,class:"text-xs text-gray-500"},He={key:1,class:"text-xs text-gray-500"},We={class:"flex gap-2"},Xe={class:"text-center mt-4"},Je={key:1,class:"text-center py-6 text-gray-500"},Ke={class:"space-y-6"},Qe={class:"flex items-center gap-3"},Ye={class:"font-medium"},Ze=["href"],to={class:"ml-2 font-mono"},eo={class:"ml-2"},oo={key:0,class:"block text-xs text-gray-500 ml-2"},ao={class:"ml-2"},so={key:0,class:"block text-xs text-gray-500 ml-2"},ba=rt({__name:"Show",props:{contrato:{},can:{}},setup(K){const p=K,S=gt(),L=nt("general"),Q=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:p.contrato.nombre,href:`/admin/contratos/${p.contrato.id}`}],P=V(()=>{const e={borrador:{color:"bg-gray-100 text-gray-800",icon:R,label:"Borrador"},activo:{color:"bg-green-100 text-green-800",icon:M,label:"Activo"},finalizado:{color:"bg-blue-100 text-blue-800",icon:M,label:"Finalizado"},cancelado:{color:"bg-red-100 text-red-800",icon:vt,label:"Cancelado"}};return e[p.contrato.estado]||e.borrador}),Y=V(()=>({servicio:"Servicio",obra:"Obra",suministro:"Suministro",consultoria:"Consultoría",otro:"Otro"})[p.contrato.tipo]||"Otro"),Z=V(()=>p.contrato.estado==="cancelado"?"bg-red-500":p.contrato.estado==="finalizado"?"bg-blue-500":p.contrato.esta_vencido?"bg-red-500":p.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),$=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",j=e=>e?new Date(e).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",D=e=>{confirm(`¿Está seguro de cambiar el estado a ${e}?`)&&A.post(route("admin.contratos.cambiar-estado",p.contrato.id),{estado:e},{onSuccess:()=>{S.success("Estado actualizado exitosamente")}})},tt=()=>{confirm("¿Está seguro de eliminar este contrato? Esta acción no se puede deshacer.")&&A.delete(route("admin.contratos.destroy",p.contrato.id),{onSuccess:()=>{S.success("Contrato eliminado exitosamente")}})},et=()=>{confirm("¿Desea duplicar este contrato?")&&A.post(route("admin.contratos.duplicar",p.contrato.id),{},{onSuccess:()=>{S.success("Contrato duplicado exitosamente")}})},ot=()=>{p.contrato.archivo_pdf&&window.open(p.contrato.archivo_pdf,"_blank")},x=e=>{var u,z,I;const t=dt(),v=((u=t.props.auth)==null?void 0:u.permissions)||[];return((I=(z=t.props.auth)==null?void 0:z.roles)==null?void 0:I.some(st=>st.name==="super_admin"))?!0:v.includes(e)},at=e=>({pendiente:"secondary",en_progreso:"warning",cumplida:"success",vencida:"destructive",cancelada:"outline"})[e]||"secondary";return(e,t)=>(n(),c(mt,{breadcrumbs:Q},{default:r(()=>[a("div",St,[a("div",Pt,[a("div",Et,[s(o(g),{href:e.route("admin.contratos.index")},{default:r(()=>[s(o(f),{variant:"ghost",size:"sm"},{default:r(()=>[s(o(_t),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=i(" Volver ",-1))]),_:1})]),_:1},8,["href"]),a("div",null,[a("h1",Vt,l(e.contrato.nombre),1),a("div",Ft,[s(o(k),{class:N(P.value.color)},{default:r(()=>[(n(),c(it(P.value.icon),{class:"h-4 w-4 mr-1"})),i(" "+l(P.value.label),1)]),_:1},8,["class"]),s(o(k),{variant:"outline"},{default:r(()=>[i(l(Y.value),1)]),_:1}),e.contrato.esta_vencido?(n(),c(o(k),{key:0,variant:"destructive"},{default:r(()=>[...t[6]||(t[6]=[i(" Vencido ",-1)])]),_:1})):e.contrato.esta_proximo_vencer?(n(),c(o(k),{key:1,class:"bg-yellow-100 text-yellow-800"},{default:r(()=>[i(" Vence en "+l(e.contrato.dias_restantes)+" días ",1)]),_:1})):d("",!0)])])]),a("div",Tt,[e.contrato.archivo_pdf?(n(),c(o(f),{key:0,variant:"outline",onClick:ot},{default:r(()=>[s(o(yt),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=i(" Descargar PDF ",-1))]),_:1})):d("",!0),e.can.edit?(n(),c(o(f),{key:1,variant:"outline",onClick:et},{default:r(()=>[s(o(bt),{class:"h-4 w-4 mr-2"}),t[8]||(t[8]=i(" Duplicar ",-1))]),_:1})):d("",!0),e.can.edit?(n(),c(o(g),{key:2,href:e.route("admin.contratos.edit",e.contrato.id)},{default:r(()=>[s(o(f),null,{default:r(()=>[s(o(ht),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=i(" Editar ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),e.can.delete?(n(),c(o(f),{key:3,variant:"destructive",onClick:tt},{default:r(()=>[s(o(kt),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=i(" Eliminar ",-1))]),_:1})):d("",!0)])]),e.contrato.esta_vencido?(n(),c(o(B),{key:0,variant:"destructive"},{default:r(()=>[s(o(G),{class:"h-4 w-4"}),s(o(U),null,{default:r(()=>[i(" Este contrato venció el "+l($(e.contrato.fecha_fin))+". ",1)]),_:1})]),_:1})):e.contrato.esta_proximo_vencer?(n(),c(o(B),{key:1,variant:"warning"},{default:r(()=>[s(o(G),{class:"h-4 w-4"}),s(o(U),null,{default:r(()=>[i(" Este contrato vencerá en "+l(e.contrato.dias_restantes)+" días ("+l($(e.contrato.fecha_fin))+"). ",1)]),_:1})]),_:1})):d("",!0),e.can.change_status&&e.contrato.estado!=="cancelado"?(n(),c(o(_),{key:2},{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),{class:"text-lg"},{default:r(()=>[...t[11]||(t[11]=[i("Cambio de Estado",-1)])]),_:1})]),_:1}),s(o(h),null,{default:r(()=>[a("div",At,[e.contrato.estado==="borrador"?(n(),c(o(f),{key:0,variant:"outline",size:"sm",onClick:t[0]||(t[0]=v=>D("activo"))},{default:r(()=>[...t[12]||(t[12]=[i(" Activar Contrato ",-1)])]),_:1})):d("",!0),e.contrato.estado==="activo"?(n(),c(o(f),{key:1,variant:"outline",size:"sm",onClick:t[1]||(t[1]=v=>D("finalizado"))},{default:r(()=>[...t[13]||(t[13]=[i(" Finalizar Contrato ",-1)])]),_:1})):d("",!0),e.contrato.estado==="finalizado"?(n(),c(o(f),{key:2,variant:"outline",size:"sm",onClick:t[2]||(t[2]=v=>D("activo"))},{default:r(()=>[...t[14]||(t[14]=[i(" Reactivar ",-1)])]),_:1})):d("",!0),s(o(f),{variant:"outline",size:"sm",class:"text-red-600",onClick:t[3]||(t[3]=v=>D("cancelado"))},{default:r(()=>[...t[15]||(t[15]=[i(" Cancelar Contrato ",-1)])]),_:1})])]),_:1})]),_:1})):d("",!0),a("div",Ot,[a("div",Lt,[s(o(ft),{modelValue:L.value,"onUpdate:modelValue":t[4]||(t[4]=v=>L.value=v)},{default:r(()=>{var v,E;return[s(o(pt),null,{default:r(()=>{var u,z;return[s(o(w),{value:"general"},{default:r(()=>[...t[16]||(t[16]=[i("Información General",-1)])]),_:1}),s(o(w),{value:"financiero"},{default:r(()=>[...t[17]||(t[17]=[i("Financiero",-1)])]),_:1}),s(o(w),{value:"contraparte"},{default:r(()=>[...t[18]||(t[18]=[i("Contraparte",-1)])]),_:1}),(u=e.contrato.participantes)!=null&&u.length?(n(),c(o(w),{key:0,value:"participantes"},{default:r(()=>[i(" Participantes ("+l(e.contrato.participantes.length)+") ",1)]),_:1})):d("",!0),(z=e.contrato.campos_personalizados)!=null&&z.length?(n(),c(o(w),{key:1,value:"campos"},{default:r(()=>[...t[19]||(t[19]=[i(" Campos Adicionales ",-1)])]),_:1})):d("",!0),s(o(w),{value:"obligaciones"},{default:r(()=>[t[20]||(t[20]=i(" Obligaciones ",-1)),e.contrato.total_obligaciones>0?(n(),c(o(k),{key:0,variant:"outline",class:"ml-1"},{default:r(()=>[i(l(e.contrato.total_obligaciones),1)]),_:1})):d("",!0)]),_:1})]}),_:1}),s(o(C),{value:"general"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),null,{default:r(()=>[...t[21]||(t[21]=[i("Información General",-1)])]),_:1})]),_:1}),s(o(h),{class:"space-y-4"},{default:r(()=>[e.contrato.descripcion?(n(),m("div",jt,[t[22]||(t[22]=a("h4",{class:"text-sm font-medium text-gray-600"},"Descripción",-1)),a("p",It,l(e.contrato.descripcion),1)])):d("",!0),a("div",Nt,[a("div",null,[t[23]||(t[23]=a("h4",{class:"text-sm font-medium text-gray-600"},"Fecha de Inicio",-1)),a("p",Bt,[s(o(q),{class:"h-4 w-4"}),i(" "+l($(e.contrato.fecha_inicio)),1)])]),a("div",null,[t[24]||(t[24]=a("h4",{class:"text-sm font-medium text-gray-600"},"Fecha de Fin",-1)),a("p",Ut,[s(o(q),{class:"h-4 w-4"}),i(" "+l($(e.contrato.fecha_fin)),1)])])]),e.contrato.porcentaje_transcurrido!==void 0&&e.contrato.estado==="activo"?(n(),m("div",Mt,[a("div",Rt,[t[25]||(t[25]=a("span",null,"Progreso del contrato",-1)),a("span",null,l(e.contrato.porcentaje_transcurrido)+"%",1)]),a("div",Gt,[a("div",{class:N([Z.value,"h-3 rounded-full transition-all duration-300"]),style:lt({width:`${e.contrato.porcentaje_transcurrido}%`})},null,6)])])):d("",!0),e.contrato.observaciones?(n(),m("div",qt,[t[26]||(t[26]=a("h4",{class:"text-sm font-medium text-gray-600"},"Observaciones",-1)),a("p",Ht,l(e.contrato.observaciones),1)])):d("",!0)]),_:1})]),_:1})]),_:1}),s(o(C),{value:"financiero"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),null,{default:r(()=>[...t[27]||(t[27]=[i("Información Financiera",-1)])]),_:1})]),_:1}),s(o(h),{class:"space-y-4"},{default:r(()=>[e.contrato.monto_total?(n(),m("div",Wt,[t[28]||(t[28]=a("h4",{class:"text-sm font-medium text-gray-600"},"Monto Total",-1)),a("p",Xt,[s(o(xt),{class:"h-6 w-6"}),i(" "+l(e.contrato.monto_formateado||e.contrato.monto_total)+" ",1),a("span",Jt,l(e.contrato.moneda),1)])])):(n(),m("div",Kt,[...t[29]||(t[29]=[a("p",{class:"text-gray-500"},"No se ha especificado información financiera",-1)])]))]),_:1})]),_:1})]),_:1}),s(o(C),{value:"contraparte"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),null,{default:r(()=>[...t[30]||(t[30]=[i("Información de la Contraparte",-1)])]),_:1})]),_:1}),s(o(h),{class:"space-y-4"},{default:r(()=>[e.contrato.contraparte_user?(n(),m("div",Qt,[a("div",Yt,[a("div",Zt,[s(o(O),{class:"h-8 w-8 text-blue-600 mt-1"}),a("div",te,[a("div",ee,[a("h3",oe,l(e.contrato.contraparte_user.name),1),s(o(k),{class:"bg-blue-100 text-blue-800"},{default:r(()=>[...t[31]||(t[31]=[i(" Usuario del Sistema ",-1)])]),_:1})]),a("div",ae,[a("div",se,[s(o(H),{class:"h-4 w-4 text-gray-400"}),a("a",{href:`mailto:${e.contrato.contraparte_user.email}`,class:"text-blue-600 hover:underline"},l(e.contrato.contraparte_user.email),9,re)]),e.contrato.contraparte_user.phone||e.contrato.contraparte_user.telefono?(n(),m("div",ne,[s(o(W),{class:"h-4 w-4 text-gray-400"}),a("a",{href:`tel:${e.contrato.contraparte_user.phone||e.contrato.contraparte_user.telefono}`,class:"text-blue-600 hover:underline"},l(e.contrato.contraparte_user.phone||e.contrato.contraparte_user.telefono),9,ie)])):d("",!0),a("div",le,[s(o(X),{class:"h-4 w-4 text-gray-400"}),a("span",de,"ID: #"+l(e.contrato.contraparte_user.id),1)])])])])])])):e.contrato.contraparte_nombre||e.contrato.contraparte_identificacion||e.contrato.contraparte_email||e.contrato.contraparte_telefono?(n(),m("div",ue,[a("div",me,[e.contrato.contraparte_nombre?(n(),m("div",ce,[s(o(ut),{class:"h-4 w-4 text-gray-400"}),a("div",null,[t[32]||(t[32]=a("h4",{class:"text-sm font-medium text-gray-600"},"Nombre",-1)),a("p",null,l(e.contrato.contraparte_nombre),1)])])):d("",!0),e.contrato.contraparte_identificacion?(n(),m("div",fe,[s(o(X),{class:"h-4 w-4 text-gray-400"}),a("div",null,[t[33]||(t[33]=a("h4",{class:"text-sm font-medium text-gray-600"},"Identificación",-1)),a("p",null,l(e.contrato.contraparte_identificacion),1)])])):d("",!0),e.contrato.contraparte_email?(n(),m("div",pe,[s(o(H),{class:"h-4 w-4 text-gray-400"}),a("div",null,[t[34]||(t[34]=a("h4",{class:"text-sm font-medium text-gray-600"},"Email",-1)),a("a",{href:`mailto:${e.contrato.contraparte_email}`,class:"text-blue-600 hover:underline"},l(e.contrato.contraparte_email),9,ge)])])):d("",!0),e.contrato.contraparte_telefono?(n(),m("div",ve,[s(o(W),{class:"h-4 w-4 text-gray-400"}),a("div",null,[t[35]||(t[35]=a("h4",{class:"text-sm font-medium text-gray-600"},"Teléfono",-1)),a("a",{href:`tel:${e.contrato.contraparte_telefono}`,class:"text-blue-600 hover:underline"},l(e.contrato.contraparte_telefono),9,_e)])])):d("",!0)])])):(n(),m("div",ye,[...t[36]||(t[36]=[a("p",{class:"text-gray-500"},"No se ha especificado información de la contraparte",-1)])]))]),_:1})]),_:1})]),_:1}),(v=e.contrato.participantes)!=null&&v.length?(n(),c(o(C),{key:0,value:"participantes"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),null,{default:r(()=>[...t[37]||(t[37]=[i("Participantes del Contrato",-1)])]),_:1}),s(o(ct),null,{default:r(()=>[...t[38]||(t[38]=[i(" Usuarios del sistema asociados a este contrato ",-1)])]),_:1})]),_:1}),s(o(h),null,{default:r(()=>[a("div",be,[(n(!0),m(F,null,T(e.contrato.participantes,u=>(n(),m("div",{key:u.id,class:"flex items-center justify-between p-4 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},[a("div",he,[s(o(O),{class:"h-8 w-8 text-gray-400"}),a("div",null,[a("p",ke,l(u.name),1),a("p",xe,l(u.email),1),u.pivot.notas?(n(),m("p",we,l(u.pivot.notas),1)):d("",!0)])]),s(o(k),{variant:u.pivot.rol==="aprobador"?"default":u.pivot.rol==="observador"?"secondary":"outline"},{default:r(()=>[i(l(u.pivot.rol==="aprobador"?"Aprobador":u.pivot.rol==="observador"?"Observador":"Participante"),1)]),_:2},1032,["variant"])]))),128))])]),_:1})]),_:1})]),_:1})):d("",!0),(E=e.contrato.campos_personalizados)!=null&&E.length?(n(),c(o(C),{key:1,value:"campos"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),null,{default:r(()=>[...t[39]||(t[39]=[i("Campos Adicionales",-1)])]),_:1})]),_:1}),s(o(h),null,{default:r(()=>[a("div",Ce,[(n(!0),m(F,null,T(e.contrato.campos_personalizados,u=>(n(),m("div",{key:u.campo.id},[a("h4",ze,l(u.campo.nombre),1),a("p",$e,l(u.valor_formateado||u.valor||"-"),1)]))),128))])]),_:1})]),_:1})]),_:1})):d("",!0),s(o(C),{value:"obligaciones",class:"space-y-6 mt-6"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[a("div",De,[s(o(b),null,{default:r(()=>[...t[40]||(t[40]=[i("Obligaciones del Contrato",-1)])]),_:1}),a("div",Se,[x("obligaciones.create")?(n(),c(o(g),{key:0,href:e.route("admin.obligaciones.create",{contrato_id:e.contrato.id})},{default:r(()=>[s(o(f),{size:"sm",variant:"default"},{default:r(()=>[s(o(J),{class:"h-4 w-4 mr-1"}),t[41]||(t[41]=i(" Nueva Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),x("obligaciones.view")?(n(),c(o(g),{key:1,href:e.route("admin.obligaciones.index",{contrato_id:e.contrato.id})},{default:r(()=>[s(o(f),{size:"sm",variant:"outline"},{default:r(()=>[s(o(wt),{class:"h-4 w-4 mr-1"}),t[42]||(t[42]=i(" Ver Lista ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),x("obligaciones.view")?(n(),c(o(g),{key:2,href:e.route("admin.contratos.obligaciones.arbol",e.contrato.id)},{default:r(()=>[s(o(f),{size:"sm",variant:"outline"},{default:r(()=>[s(o(Ct),{class:"h-4 w-4 mr-1"}),t[43]||(t[43]=i(" Vista Árbol ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),x("obligaciones.view")?(n(),c(o(g),{key:3,href:e.route("admin.contratos.obligaciones.timeline",e.contrato.id)},{default:r(()=>[s(o(f),{size:"sm",variant:"outline"},{default:r(()=>[s(o(zt),{class:"h-4 w-4 mr-1"}),t[44]||(t[44]=i(" Timeline ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)])])]),_:1}),s(o(h),null,{default:r(()=>[e.contrato.total_obligaciones&&e.contrato.total_obligaciones>0?(n(),m("div",Pe,[a("div",Ee,[a("div",Ve,[a("div",Fe,l(e.contrato.total_obligaciones),1),t[45]||(t[45]=a("p",{class:"text-xs text-gray-600"},"Total",-1))]),a("div",Te,[a("div",Ae,l(e.contrato.obligaciones_pendientes),1),t[46]||(t[46]=a("p",{class:"text-xs text-gray-600"},"Pendientes",-1))]),a("div",Oe,[a("div",Le,l(e.contrato.obligaciones_cumplidas),1),t[47]||(t[47]=a("p",{class:"text-xs text-gray-600"},"Cumplidas",-1))]),a("div",je,[a("div",Ie,l(e.contrato.total_obligaciones>0?Math.round(e.contrato.obligaciones_cumplidas/e.contrato.total_obligaciones*100):0)+"% ",1),t[48]||(t[48]=a("p",{class:"text-xs text-gray-600"},"Progreso",-1))])]),e.contrato.obligaciones&&e.contrato.obligaciones.length>0?(n(),m("div",Ne,[t[51]||(t[51]=a("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Obligaciones principales:",-1)),(n(!0),m(F,null,T(e.contrato.obligaciones,u=>(n(),m("div",{key:u.id,class:"border rounded-lg p-3 hover:bg-gray-50"},[a("div",Be,[a("div",Ue,[a("h5",Me,l(u.titulo),1),u.descripcion?(n(),m("p",Re,l(u.descripcion),1)):d("",!0),a("div",Ge,[s(o(k),{variant:at(u.estado),size:"sm"},{default:r(()=>[i(l(u.estado),1)]),_:2},1032,["variant"]),u.fecha_vencimiento?(n(),m("span",qe," Vence: "+l(new Date(u.fecha_vencimiento).toLocaleDateString()),1)):d("",!0),u.responsable?(n(),m("span",He," Responsable: "+l(u.responsable.name),1)):d("",!0)])]),a("div",We,[s(o(g),{href:e.route("admin.obligaciones.show",u.id)},{default:r(()=>[s(o(f),{size:"sm",variant:"ghost"},{default:r(()=>[...t[49]||(t[49]=[i("Ver",-1)])]),_:1})]),_:2},1032,["href"]),x("obligaciones.edit")?(n(),c(o(g),{key:0,href:e.route("admin.obligaciones.edit",u.id)},{default:r(()=>[s(o(f),{size:"sm",variant:"ghost"},{default:r(()=>[...t[50]||(t[50]=[i("Editar",-1)])]),_:1})]),_:2},1032,["href"])):d("",!0)])])]))),128))])):d("",!0),a("div",Xe,[s(o(g),{href:e.route("admin.contratos.obligaciones.arbol",e.contrato.id),class:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800"},{default:r(()=>[t[52]||(t[52]=i(" Ver árbol completo de obligaciones ",-1)),s(o($t),{class:"h-4 w-4 ml-1"})]),_:1},8,["href"])])])):(n(),m("div",Je,[s(o(R),{class:"h-12 w-12 mx-auto mb-3 text-gray-300"}),t[54]||(t[54]=a("p",null,"No hay obligaciones registradas para este contrato",-1)),t[55]||(t[55]=a("p",{class:"text-sm text-gray-400 mt-1"},"Las obligaciones te ayudan a hacer seguimiento de tareas y compromisos del contrato",-1)),x("obligaciones.create")?(n(),c(o(g),{key:0,href:e.route("admin.obligaciones.create",{contrato_id:e.contrato.id}),class:"mt-3 inline-block"},{default:r(()=>[s(o(f),{size:"sm",variant:"default"},{default:r(()=>[s(o(J),{class:"h-4 w-4 mr-1"}),t[53]||(t[53]=i(" Crear Primera Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)]))]),_:1})]),_:1})]),_:1})]}),_:1},8,["modelValue"])]),a("div",Ke,[s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),{class:"text-lg"},{default:r(()=>[...t[56]||(t[56]=[i("Proyecto",-1)])]),_:1})]),_:1}),s(o(h),null,{default:r(()=>[s(o(g),{href:e.route("admin.proyectos.show",e.contrato.proyecto.id),class:"text-blue-600 hover:underline flex items-center gap-2"},{default:r(()=>[i(l(e.contrato.proyecto.nombre)+" ",1),s(o(Dt),{class:"h-4 w-4"})]),_:1},8,["href"]),s(o(k),{variant:"outline",class:"mt-2"},{default:r(()=>[i(l(e.contrato.proyecto.estado),1)]),_:1})]),_:1})]),_:1}),e.contrato.responsable?(n(),c(o(_),{key:0},{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),{class:"text-lg"},{default:r(()=>[...t[57]||(t[57]=[i("Responsable",-1)])]),_:1})]),_:1}),s(o(h),null,{default:r(()=>[a("div",Qe,[s(o(O),{class:"h-8 w-8 text-gray-400"}),a("div",null,[a("p",Ye,l(e.contrato.responsable.name),1),a("a",{href:`mailto:${e.contrato.responsable.email}`,class:"text-sm text-blue-600 hover:underline"},l(e.contrato.responsable.email),9,Ze)])])]),_:1})]),_:1})):d("",!0),s(o(_),null,{default:r(()=>[s(o(y),null,{default:r(()=>[s(o(b),{class:"text-lg"},{default:r(()=>[...t[58]||(t[58]=[i("Información del Sistema",-1)])]),_:1})]),_:1}),s(o(h),{class:"space-y-3 text-sm"},{default:r(()=>[a("div",null,[t[59]||(t[59]=a("span",{class:"text-gray-600"},"ID:",-1)),a("span",to,"#"+l(e.contrato.id),1)]),a("div",null,[t[60]||(t[60]=a("span",{class:"text-gray-600"},"Creado:",-1)),a("span",eo,l(j(e.contrato.created_at)),1),e.contrato.created_by?(n(),m("span",oo," por "+l(e.contrato.created_by.name),1)):d("",!0)]),a("div",null,[t[61]||(t[61]=a("span",{class:"text-gray-600"},"Última actualización:",-1)),a("span",ao,l(j(e.contrato.updated_at)),1),e.contrato.updated_by?(n(),m("span",so," por "+l(e.contrato.updated_by.name),1)):d("",!0)])]),_:1})]),_:1})])])])]),_:1}))}});export{ba as default};
