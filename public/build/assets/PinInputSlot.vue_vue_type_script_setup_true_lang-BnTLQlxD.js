import{a as H,c as U,u as G,g as L,d as X,b as O}from"./VisuallyHidden-BdDHiRv9.js";import{P as R,a as $}from"./createLucideIcon-B1k9xl0j.js";import{d as k,a0 as J,c as w,r as Q,m as K,b as B,e as A,w as M,s as C,f as W,u as r,U as N,o as Y,O as Z,R as D,H as ee}from"./app-CP1YmMoZ.js";import{r as F}from"./index-BiWnI7cE.js";import{u as te,a as ae}from"./Input.vue_vue_type_script_setup_true_lang-CV2X9-dW.js";import{V as le}from"./VisuallyHiddenInput-Ds72srhA.js";const ne=["INPUT","TEXTAREA"];function oe(l,n,t,o={}){if(!n||o.enableIgnoredElement&&ne.includes(n.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:d="[data-reka-collection-item]",itemsArray:h=[],loop:p=!0,dir:b="ltr",preventScroll:x=!0,focus:q=!1}=o,[_,m,V,y,I,P]=[l.key==="ArrowRight",l.key==="ArrowLeft",l.key==="ArrowUp",l.key==="ArrowDown",l.key==="Home",l.key==="End"],g=V||y,i=_||m;if(!I&&!P&&(!g&&!i||s==="vertical"&&i||s==="horizontal"&&g))return null;const f=h;if(!f.length)return null;x&&l.preventDefault();let c=null;return i||g?c=T(f,n,{goForward:g?y:b==="ltr"?_:m,loop:p}):I?c=f.at(0)||null:P&&(c=f.at(-1)||null),q&&(c==null||c.focus()),c}function T(l,n,t,o=l.length){if(--o===0)return null;const s=l.indexOf(n),d=t.goForward?s+1:s-1;if(!t.loop&&(d<0||d>=l.length))return null;const h=(d+l.length)%l.length,p=l[h];return p?p.hasAttribute("disabled")&&p.getAttribute("disabled")!=="false"?T(l,p,t,o):p:null}const[re,se]=U("PinInputRoot");var ue=k({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(l,{emit:n}){const t=l,o=n,{mask:s,otp:d,placeholder:h,type:p,disabled:b,dir:x}=J(t),{forwardRef:q}=te(),_=H(x),m=ae(t,"modelValue",o,{defaultValue:t.defaultValue??[],passive:t.modelValue===void 0}),V=w(()=>Array.isArray(m.value)?[...m.value]:[]),y=Q(new Set);function I(i){y.value.add(i)}const P=w(()=>t.type==="number"),g=w(()=>V.value.filter(f=>!!f||P.value&&f===0).length===y.value.size);return K(m,()=>{g.value&&o("complete",m.value)},{deep:!0}),se({modelValue:m,currentModelValue:V,mask:s,otp:d,placeholder:h,type:p,dir:_,disabled:b,isCompleted:g,inputElements:y,onInputElementChange:I,isNumericMode:P}),(i,f)=>(A(),B(r(R),N(i.$attrs,{ref:r(q),dir:r(_),"data-complete":g.value?"":void 0,"data-disabled":r(b)?"":void 0}),{default:M(()=>[C(i.$slots,"default",{modelValue:r(m)}),W(le,{id:i.id,as:"input",feature:"focusable",tabindex:"-1",value:V.value.join(""),name:i.name??"",disabled:r(b),required:i.required,onFocus:f[0]||(f[0]=c=>{var e,a;return(a=(e=Array.from(y.value))==null?void 0:e[0])==null?void 0:a.focus()})},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),ie=ue,de=k({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(l){const n=l,t=re(),o=w(()=>Array.from(t.inputElements.value)),s=w(()=>t.currentModelValue.value[n.index]),d=w(()=>n.disabled||t.disabled.value),h=w(()=>t.otp.value),p=w(()=>t.mask.value),{primitiveElement:b,currentElement:x}=G();function q(e){var v;const a=e.target;if((((v=e.data)==null?void 0:v.length)??0)>1){i(a.value);return}if(t.isNumericMode.value&&!/^\d*$/.test(a.value)){a.value=a.value.replace(/\D/g,"");return}a.value=e.data??"",c(n.index,a.value);const u=o.value[n.index+1];u&&u.focus()}function _(){const e=x.value;ee(()=>{e&&!e.value&&(e.placeholder=t.placeholder.value)})}function m(e){oe(e,L(),void 0,{itemsArray:o.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:t.dir.value})}function V(e){if(e.preventDefault(),e.target.value)c(n.index,"");else{const v=o.value[n.index-1];v&&(v.focus(),c(n.index-1,""))}}function y(e){e.key==="Delete"&&(e.preventDefault(),c(n.index,""))}function I(e){const a=e.target;a.setSelectionRange(1,1),a.value||(a.placeholder="")}function P(e){_()}function g(e){e.preventDefault();const a=e.clipboardData;if(!a)return;const u=a.getData("text");i(u)}function i(e){var S;const a=[...t.currentModelValue.value],u=e.length>=o.value.length?0:n.index,v=Math.min(u+e.length,o.value.length);for(let E=u;E<v;E++){const j=o.value[E],z=e[E-u];t.isNumericMode.value&&!/^\d*$/.test(z)||(a[E]=z,j.focus())}t.modelValue.value=a,(S=o.value[v])==null||S.focus()}function f(e){let a=e.length-1;for(;a>=0&&e[a]==="";)e.pop(),a--;return e}function c(e,a){const u=[...t.currentModelValue.value];if(t.isNumericMode.value){const v=+a;a===""||isNaN(v)?delete u[e]:u[e]=v}else u[e]=a;t.modelValue.value=f(u)}return K(s,()=>{s.value||_()}),Y(()=>{t.onInputElementChange(x.value)}),Z(()=>{var e;(e=t.inputElements)==null||e.value.delete(x.value)}),(e,a)=>(A(),B(r(R),{ref_key:"primitiveElement",ref:b,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:h.value?"one-time-code":"false",type:p.value?"password":"text",inputmode:r(t).isNumericMode.value?"numeric":"text",pattern:r(t).isNumericMode.value?"[0-9]*":void 0,placeholder:r(t).placeholder.value,value:s.value,disabled:d.value,"data-disabled":d.value?"":void 0,"data-complete":r(t).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${o.value.length}`,onInput:a[0]||(a[0]=u=>q(u)),onKeydown:[D(m,["left","right","up","down","home","end"]),D(V,["backspace"]),D(y,["delete"])],onFocus:I,onBlur:P,onPaste:g},{default:M(()=>[C(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ce=de;const ye=k({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(l,{emit:n}){const t=l,o=n,s=F(t,"class"),d=X(s,o);return(h,p)=>(A(),B(r(ie),N({"data-slot":"pin-input"},r(d),{class:r($)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",t.class)}),{default:M(()=>[C(h.$slots,"default")]),_:3},16,["class"]))}}),be=k({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,t=F(n,"class"),o=O(t);return(s,d)=>(A(),B(r(R),N({"data-slot":"pin-input-group"},r(o),{class:r($)("flex items-center",n.class)}),{default:M(()=>[C(s.$slots,"default")]),_:3},16,["class"]))}}),_e=k({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,t=F(n,"class"),o=O(t);return(s,d)=>(A(),B(r(ce),N({"data-slot":"pin-input-slot"},r(o),{inputmode:"numeric",class:r($)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",n.class)}),null,16,["class"]))}});export{ye as _,be as a,_e as b};
