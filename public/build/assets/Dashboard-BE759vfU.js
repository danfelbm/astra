import{s as S,_ as x,c as _,j as z,a as b,b as g,a5 as G,u as R,i as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-DTPQizsx.js";import{_ as h}from"./AppLogo.vue_vue_type_script_setup_true_lang-2ZK4DXgR.js";import{_ as J}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-CPV5R_9N.js";import{d as K,k as Q,c as C,a as w,o as n,b as t,u as a,m as W,e as r,f as s,j as u,i as c,n as N,l as k,t as l,g as d,P as $,F as Y}from"./app-3PnVxn_i.js";import{P}from"./plus-Lqf2uCpv.js";import{S as y}from"./square-pen-BXMBHfwR.js";import{C as I}from"./clock-BmfvVI1x.js";import{C as V}from"./circle-x-DlEyJ8A6.js";import{C as A}from"./circle-check-big-Ds035ivC.js";import{M as Z}from"./message-square-Cz0op8sW.js";import{U as B}from"./user-Cu9gbFnc.js";import{H as aa}from"./history-k1fN646f.js";import"./Label.vue_vue_type_script_setup_true_lang-Cmad3Opx.js";import"./index-B4f8LOCP.js";import"./VisuallyHidden-D5uEwMT5.js";import"./eye-DLD3wUjB.js";const ea={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ta={class:"flex flex-col sm:flex-row sm:items-center gap-4"},sa={class:"flex items-center gap-4 flex-1"},ra={class:"flex-1"},ia={class:"text-xl font-semibold mb-1"},da={class:"text-muted-foreground mb-2"},oa={key:0,class:"flex items-center gap-2 flex-wrap"},na={key:0,class:"w-full sm:w-auto"},la={class:"text-blue-700 dark:text-blue-300"},ua={key:1},ca={class:"grid gap-4 md:grid-cols-3"},fa={class:"flex items-center gap-2"},ma={class:"flex items-center gap-2"},pa={class:"flex items-center gap-2"},xa={class:"flex items-center gap-2"},_a={class:"text-xs text-muted-foreground"},va={class:"text-xs text-muted-foreground"},ba={class:"flex gap-1"},Ba=K({__name:"Dashboard",props:{candidatura:{},configuracion:{}},setup(M){const o=M,F=[{title:"Dashboard",href:"/dashboard"},{title:"Mi Candidatura",href:"#"}],f=Q(!1),m=C(()=>!!o.candidatura),j=C(()=>{if(!o.candidatura)return P;switch(o.candidatura.estado){case"aprobado":return A;case"rechazado":return V;case"pendiente":return I;case"borrador":return y;default:return S}}),H=C(()=>{if(!o.candidatura)return"text-blue-600";switch(o.candidatura.estado){case"aprobado":return"text-green-600";case"rechazado":return"text-red-600";case"pendiente":return"text-blue-600";case"borrador":return"text-yellow-600";default:return"text-gray-600"}}),v=C(()=>{if(!o.candidatura)return{text:"Crear Perfil de Candidatura",href:"/candidaturas/create",icon:P,description:"Completa tu perfil para poder postularte a convocatorias"};if(o.candidatura.puede_editar){let i="Editar Candidatura",e="Completa o actualiza la información de tu candidatura";return o.candidatura.estado==="rechazado"?e="Corrige los aspectos señalados y reenvía tu candidatura":o.candidatura.estado==="aprobado"?(i="Editar Campos Permitidos",e="Solo puedes editar campos marcados como editables. Los cambios requerirán nueva aprobación."):o.candidatura.tiene_datos||(i="Completar Candidatura"),{text:i,href:`/candidaturas/${o.candidatura.id}/edit`,icon:y,description:e}}return null}),L=i=>{if(!i)return"Fecha no disponible";try{const e=new Date(i);if(isNaN(e.getTime())){const p=i.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})/);if(p){const[,D,q,T,U,O]=p,E=new Date(parseInt(T),parseInt(q)-1,parseInt(D),parseInt(U),parseInt(O));if(!isNaN(E.getTime()))return E.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return i}return e.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error al formatear fecha:",e),i||"Fecha no disponible"}};return(i,e)=>(n(),w(Y,null,[t(a(W),{title:"Mi Candidatura"}),t(X,{breadcrumbs:F},{default:r(()=>{var p;return[s("div",ea,[e[14]||(e[14]=s("div",{class:"flex items-center justify-between"},[s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Gestiona tu perfil de candidatura para participar en convocatorias ")])],-1)),t(a(x),{class:"border-2"},{default:r(()=>[t(a(_),{class:"p-6"},{default:r(()=>[s("div",ta,[s("div",sa,[s("div",{class:N([H.value,"p-3 rounded-full bg-opacity-10 flex-shrink-0"])},[(n(),u(k(j.value),{class:"h-8 w-8"}))],2),s("div",ra,[s("h3",ia,l(m.value?i.candidatura.estado_label:"Sin Candidatura"),1),s("p",da,l(m.value?`Versión ${i.candidatura.version} - Actualizada el ${L(i.candidatura.updated_at)}`:"Aún no has creado tu perfil de candidatura"),1),m.value?(n(),w("div",oa,[t(a(z),{class:N(i.candidatura.estado_color)},{default:r(()=>[d(l(i.candidatura.estado_label),1)]),_:1},8,["class"]),i.candidatura.tiene_datos?c("",!0):(n(),u(a(z),{key:0,variant:"outline",class:"bg-yellow-50 text-yellow-700"},{default:r(()=>e[1]||(e[1]=[d(" Incompleto ")])),_:1}))])):c("",!0)])]),v.value?(n(),w("div",na,[t(a($),{href:v.value.href,class:"block"},{default:r(()=>[t(a(h),{class:"w-full sm:w-auto"},{default:r(()=>[(n(),u(k(v.value.icon),{class:"mr-2 h-4 w-4"})),d(" "+l(v.value.text),1)]),_:1})]),_:1},8,["href"])])):c("",!0)])]),_:1})]),_:1}),(p=i.candidatura)!=null&&p.comentarios_admin?(n(),u(a(x),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:r(()=>[t(a(b),null,{default:r(()=>[t(a(g),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:r(()=>[t(a(Z),{class:"h-5 w-5"}),e[2]||(e[2]=d(" Comentarios de la comisión "))]),_:1})]),_:1}),t(a(_),null,{default:r(()=>[s("p",la,l(i.candidatura.comentarios_admin),1)]),_:1})]),_:1})):c("",!0),m.value&&f.value?(n(),w("div",ua,[t(J,{"candidatura-id":i.candidatura.id,"version-actual":i.candidatura.version},null,8,["candidatura-id","version-actual"])])):c("",!0),s("div",ca,[t(a(x),{class:"h-fit"},{default:r(()=>[t(a(b),{class:"pb-3"},{default:r(()=>[t(a(g),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(B),{class:"h-4 w-4"}),e[3]||(e[3]=d(" Estados "))]),_:1})]),_:1}),t(a(_),{class:"space-y-2"},{default:r(()=>[s("div",fa,[t(a(y),{class:"h-3 w-3 text-yellow-600"}),e[4]||(e[4]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Borrador:"),d(" Editable")],-1))]),s("div",ma,[t(a(I),{class:"h-3 w-3 text-blue-600"}),e[5]||(e[5]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Pendiente:"),d(" En revisión")],-1))]),s("div",pa,[t(a(A),{class:"h-3 w-3 text-green-600"}),e[6]||(e[6]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Aprobado:"),d(" Listo")],-1))]),s("div",xa,[t(a(V),{class:"h-3 w-3 text-red-600"}),e[7]||(e[7]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Rechazado:"),d(" Corregir")],-1))])]),_:1})]),_:1}),t(a(x),{class:"h-fit"},{default:r(()=>[t(a(b),{class:"pb-3"},{default:r(()=>[t(a(g),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(S),{class:"h-4 w-4"}),e[8]||(e[8]=d(" Configuración "))]),_:1})]),_:1}),t(a(_),{class:"space-y-2"},{default:r(()=>[s("div",null,[e[9]||(e[9]=s("p",{class:"text-xs font-medium"},"Campos:",-1)),s("p",_a,l(i.configuracion.resumen),1)]),s("div",null,[e[10]||(e[10]=s("p",{class:"text-xs font-medium"},"Versión:",-1)),s("p",va,"v"+l(i.configuracion.version),1)])]),_:1})]),_:1}),m.value?(n(),u(a(x),{key:0,class:"h-fit"},{default:r(()=>[t(a(b),{class:"pb-3"},{default:r(()=>[t(a(g),{class:"text-base"},{default:r(()=>e[11]||(e[11]=[d("Acciones")])),_:1})]),_:1}),t(a(_),{class:"space-y-2"},{default:r(()=>[t(a(h),{onClick:e[0]||(e[0]=D=>f.value=!f.value),variant:"outline",class:"w-full"},{default:r(()=>[t(a(aa),{class:"mr-2 h-4 w-4"}),d(" "+l(f.value?"Ocultar":"Mostrar")+" Historial ",1),(n(),u(k(f.value?a(G):a(R)),{class:"ml-auto h-4 w-4"}))]),_:1}),s("div",ba,[t(a($),{href:`/candidaturas/${i.candidatura.id}`},{default:r(()=>[t(a(h),{variant:"outline",size:"sm"},{default:r(()=>[t(a(B),{class:"mr-1 h-3 w-3"}),e[12]||(e[12]=d(" Ver "))]),_:1})]),_:1},8,["href"]),i.candidatura.puede_editar?(n(),u(a($),{key:0,href:`/candidaturas/${i.candidatura.id}/edit`},{default:r(()=>[t(a(h),{variant:"outline",size:"sm"},{default:r(()=>[t(a(y),{class:"mr-1 h-3 w-3"}),e[13]||(e[13]=d(" Editar "))]),_:1})]),_:1},8,["href"])):c("",!0)])]),_:1})]),_:1})):c("",!0)])])]}),_:1})],64))}});export{Ba as default};
