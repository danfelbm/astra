import{_ as G}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DjfisSTq.js";import{d as I,r as C,m as T,i as m,e as i,f as t,u as e,p as W,w as l,g as d,j as b,b as f,P as x,h as r,F as $,k as E,t as p,n as S,s as R,W as j}from"./app-CbA_dzrH.js";import{_ as q,c as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dpl1EP6e.js";import{_ as g}from"./createLucideIcon-0y3HvBb2.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-Dw2oMjuZ.js";import{_ as z}from"./index-MuREUf8q.js";import{_ as K,a as O,b as P,c as _,d as Q,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-DHecD5Xq.js";import{_ as F,a as N,b as L,c as M,d as n}from"./SelectValue.vue_vue_type_script_setup_true_lang-C7VbuHoF.js";import{E as X}from"./EtiquetaDisplay-BazyqlTO.js";import{P as Y}from"./plus-D-GKCu6A.js";import{S as Z}from"./search-BT-o3QIf.js";import{U as ee}from"./user-BnDczykq.js";import{C as te}from"./calendar-BOFnEXb6.js";import{E as ae}from"./eye-CuQC-PD5.js";import{S as le}from"./square-pen-CVrov98_.js";import{T as se}from"./trash-2-di4yGiJv.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-C4x6rJ8B.js";import"./index-D-PGeZ3t.js";import"./floating-ui.vue-D3EH1Xba.js";import"./x-CxSWfWOJ.js";import"./index-BGfSt6nP.js";import"./shield-yBic2gp-.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-H44qAxpr.js";import"./chevron-right-pq_ChJ0s.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-H8FdC1v8.js";import"./VisuallyHidden-BOU54Fpc.js";import"./index-DzUkqZxm.js";import"./Label.vue_vue_type_script_setup_true_lang-BHOcaT7W.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-fWHHAQt9.js";import"./index-CXCj42Z3.js";import"./circle-alert-CfNQ3Vlu.js";import"./map-pin-B0r5dLQM.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-nF_8TJte.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CPMNIlI6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-B4CsJOKK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BZUuILpY.js";import"./tag-DBRua3DS.js";import"./users-DLZP89St.js";import"./target-B8OPFMH2.js";import"./vote-5ymqB6Fb.js";import"./folder-open-B03CPFE8.js";import"./send-BUC0oswk.js";import"./file-text-DINmkRZl.js";import"./briefcase-BEGziJue.js";import"./megaphone-CDZIxwTF.js";import"./user-check-B3Jm4jmh.js";import"./clipboard-list-wMp9Eq1A.js";import"./mail-I3hCy8Tx.js";import"./message-square-RBI0Tfwc.js";import"./external-link-CKKN5QSr.js";import"./panel-left-ivBXt___.js";import"./check-8t2yOxAa.js";import"./index-DPtKDKxs.js";import"./nullish-CHIgUVhi.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DA3_W9oH.js";import"./layers-c9C109eE.js";import"./zap-CHbl4Myi.js";import"./trending-up-B8IIkS5l.js";import"./award-BVRL_RHg.js";import"./flag-Dx8Rkwge.js";import"./hash-DhQlwg24.js";const re={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},oe={class:"flex items-center justify-between"},ie={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},de={class:"relative"},ne={key:0,class:"flex items-center gap-2"},ue={key:1,class:"text-gray-400"},me={key:1,class:"text-gray-400 text-xs"},fe={class:"flex items-center gap-1"},pe={class:"flex items-center gap-2"},_e={class:"w-20 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"},ge={class:"text-sm text-gray-500"},ce={class:"flex justify-end gap-2"},ve={key:0,class:"flex justify-center gap-2"},ye={class:"text-center text-sm text-gray-500"},Et=I({__name:"Index",props:{proyectos:{},filters:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(U){const k=U,h=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"}],c=C(k.filters.search||""),v=C(k.filters.estado||""),y=C(k.filters.prioridad||""),w=()=>{j.get("/admin/proyectos",{search:c.value,estado:v.value,prioridad:y.value},{preserveState:!0,preserveScroll:!0})};let V;T(c,o=>{clearTimeout(V),V=setTimeout(()=>{w()},500)}),T([v,y],()=>{w()});const D=o=>{confirm(`¿Estás seguro de eliminar el proyecto "${o.nombre}"?`)&&j.delete(`/admin/proyectos/${o.id}`,{preserveScroll:!0})},H=o=>({planificacion:"bg-blue-100 text-blue-800",en_progreso:"bg-yellow-100 text-yellow-800",pausado:"bg-orange-100 text-orange-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",A=o=>({baja:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",critica:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800";return(o,a)=>(i(),m($,null,[t(e(W),{title:"Gestión de Proyectos"}),t(G,{breadcrumbs:h},{default:l(()=>[d("div",re,[d("div",oe,[a[5]||(a[5]=d("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Gestión de Proyectos ",-1)),o.canCreate?(i(),f(e(x),{key:0,href:"/admin/proyectos/create"},{default:l(()=>[t(e(g),null,{default:l(()=>[t(e(Y),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=r(" Nuevo Proyecto ",-1))]),_:1})]),_:1})):b("",!0)]),t(e(q),null,{default:l(()=>[t(e(B),{class:"p-4"},{default:l(()=>[d("div",ie,[d("div",de,[t(e(Z),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(J),{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),type:"text",placeholder:"Buscar proyectos...",class:"pl-10"},null,8,["modelValue"])]),t(e(F),{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=s=>v.value=s)},{default:l(()=>[t(e(N),null,{default:l(()=>[t(e(L),{placeholder:"Todos los estados"})]),_:1}),t(e(M),null,{default:l(()=>[t(e(n),{value:"all"},{default:l(()=>[...a[6]||(a[6]=[r("Todos los estados",-1)])]),_:1}),t(e(n),{value:"planificacion"},{default:l(()=>[...a[7]||(a[7]=[r("Planificación",-1)])]),_:1}),t(e(n),{value:"en_progreso"},{default:l(()=>[...a[8]||(a[8]=[r("En Progreso",-1)])]),_:1}),t(e(n),{value:"pausado"},{default:l(()=>[...a[9]||(a[9]=[r("Pausado",-1)])]),_:1}),t(e(n),{value:"completado"},{default:l(()=>[...a[10]||(a[10]=[r("Completado",-1)])]),_:1}),t(e(n),{value:"cancelado"},{default:l(()=>[...a[11]||(a[11]=[r("Cancelado",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(F),{modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=s=>y.value=s)},{default:l(()=>[t(e(N),null,{default:l(()=>[t(e(L),{placeholder:"Todas las prioridades"})]),_:1}),t(e(M),null,{default:l(()=>[t(e(n),{value:"all"},{default:l(()=>[...a[12]||(a[12]=[r("Todas las prioridades",-1)])]),_:1}),t(e(n),{value:"baja"},{default:l(()=>[...a[13]||(a[13]=[r("Baja",-1)])]),_:1}),t(e(n),{value:"media"},{default:l(()=>[...a[14]||(a[14]=[r("Media",-1)])]),_:1}),t(e(n),{value:"alta"},{default:l(()=>[...a[15]||(a[15]=[r("Alta",-1)])]),_:1}),t(e(n),{value:"critica"},{default:l(()=>[...a[16]||(a[16]=[r("Crítica",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(g),{variant:"outline",onClick:a[3]||(a[3]=s=>{c.value="",v.value="",y.value="",w()})},{default:l(()=>[...a[17]||(a[17]=[r(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(q),null,{default:l(()=>[t(e(B),{class:"p-0"},{default:l(()=>[t(e(K),null,{default:l(()=>[t(e(O),null,{default:l(()=>[t(e(P),null,{default:l(()=>[t(e(_),null,{default:l(()=>[...a[18]||(a[18]=[r("Nombre",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[19]||(a[19]=[r("Responsable",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[20]||(a[20]=[r("Etiquetas",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[21]||(a[21]=[r("Estado",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[22]||(a[22]=[r("Prioridad",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[23]||(a[23]=[r("Fecha Inicio",-1)])]),_:1}),t(e(_),null,{default:l(()=>[...a[24]||(a[24]=[r("Progreso",-1)])]),_:1}),t(e(_),{class:"text-right"},{default:l(()=>[...a[25]||(a[25]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[(i(!0),m($,null,E(o.proyectos.data,s=>(i(),f(e(P),{key:s.id},{default:l(()=>[t(e(u),{class:"font-medium"},{default:l(()=>[r(p(s.nombre),1)]),_:2},1024),t(e(u),null,{default:l(()=>[s.responsable?(i(),m("div",ne,[t(e(ee),{class:"h-4 w-4 text-gray-400"}),r(" "+p(s.responsable.name),1)])):(i(),m("span",ue,"Sin asignar"))]),_:2},1024),t(e(u),null,{default:l(()=>[s.etiquetas&&s.etiquetas.length>0?(i(),f(X,{key:0,etiquetas:s.etiquetas,"max-visible":3,size:"sm"},null,8,["etiquetas"])):(i(),m("span",me,"Sin etiquetas"))]),_:2},1024),t(e(u),null,{default:l(()=>[t(e(z),{class:S(H(s.estado))},{default:l(()=>[r(p(s.estado_label),1)]),_:2},1032,["class"])]),_:2},1024),t(e(u),null,{default:l(()=>[t(e(z),{class:S(A(s.prioridad))},{default:l(()=>[r(p(s.prioridad_label),1)]),_:2},1032,["class"])]),_:2},1024),t(e(u),null,{default:l(()=>[d("div",fe,[t(e(te),{class:"h-4 w-4 text-gray-400"}),r(" "+p(s.fecha_inicio),1)])]),_:2},1024),t(e(u),null,{default:l(()=>[d("div",pe,[d("div",_e,[d("div",{class:"bg-blue-600 h-2.5 rounded-full",style:R(`width: ${s.porcentaje_completado}%`)},null,4)]),d("span",ge,p(s.porcentaje_completado)+"%",1)])]),_:2},1024),t(e(u),{class:"text-right"},{default:l(()=>[d("div",ce,[t(e(x),{href:`/admin/proyectos/${s.id}`},{default:l(()=>[t(e(g),{variant:"outline",size:"sm",title:"Ver detalles"},{default:l(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),o.canEdit?(i(),f(e(x),{key:0,href:`/admin/proyectos/${s.id}/edit`},{default:l(()=>[t(e(g),{variant:"outline",size:"sm",title:"Editar"},{default:l(()=>[t(e(le),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"])):b("",!0),o.canDelete?(i(),f(e(g),{key:1,variant:"destructive",size:"sm",onClick:be=>D(s)},{default:l(()=>[t(e(se),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):b("",!0)])]),_:2},1024)]),_:2},1024))),128)),o.proyectos.data.length===0?(i(),f(e(P),{key:0},{default:l(()=>[t(e(u),{colspan:"7",class:"text-center py-8"},{default:l(()=>[...a[26]||(a[26]=[d("p",{class:"text-gray-500"},"No se encontraron proyectos",-1)])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),o.proyectos.last_page>1?(i(),m("div",ve,[(i(!0),m($,null,E(o.proyectos.links,s=>(i(),m($,{key:s.label},[s.url?(i(),f(e(x),{key:0,href:s.url,"preserve-state":"","preserve-scroll":""},{default:l(()=>[t(e(g),{variant:s.active?"default":"outline",size:"sm",innerHTML:s.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(i(),f(e(g),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:s.label},null,8,["innerHTML"]))],64))),128))])):b("",!0),d("div",ye," Mostrando "+p(o.proyectos.data.length)+" de "+p(o.proyectos.total)+" proyectos ",1)])]),_:1})],64))}});export{Et as default};
