import{d as S,c as p,C as j,a as d,o as c,b as a,u as i,m as U,e as l,f as r,t as n,g as f,h as z,i as m,n as h,j as A,l as B,F as M}from"./app-BBsBP0WF.js";import{_ as y}from"./createLucideIcon-BUazo5IL.js";import{_ as L,a as H,b as G,c as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-BsvdkUg6.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-BS1J5jul.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-CvLYqwww.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-JAWq8qNA.js";import{_ as J}from"./Textarea.vue_vue_type_script_setup_true_lang-jlEUrjpG.js";import{_ as k}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-BmWKXmkH.js";import{_ as K}from"./AdminLayout.vue_vue_type_script_setup_true_lang-COdBukTZ.js";import{C}from"./calendar-BEM1C3Vn.js";import{C as N}from"./clock-DBqNR6Pg.js";import{A as Q}from"./arrow-left-lBNBA1Pf.js";import"./index-XbGKlO5B.js";import"./floating-ui.vue-IowBbn_t.js";import"./check-DGFrFUlU.js";import"./index-pfoiM5p-.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-CH035Uyx.js";import"./x-DLA9IXiI.js";import"./index-Edz3emR3.js";import"./shield-D76ar5W8.js";import"./user-DxpmK3ir.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CoagF61w.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CJ4dA0J6.js";import"./VisuallyHidden-C_rerC9d.js";import"./PopperContent-D_LWRXzJ.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-C5ICEyk0.js";import"./nullish-CHIgUVhi.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-gmlzuz-S.js";import"./index-UGR23xhi.js";import"./circle-alert-BIeof81h.js";import"./map-pin-DuG3P11J.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DVNpsbGE.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CgizHAYY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-Bl4po_Y8.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-XA3q0yAQ.js";import"./users-DdSueI9L.js";import"./vote-CjxxIQ8-.js";import"./file-text-Bw9RRmcq.js";import"./briefcase-Djfm0Z0n.js";import"./megaphone-BbCzooo3.js";import"./user-check-BAtJeI6h.js";import"./external-link-DiLjbUQw.js";import"./panel-left-Bo0gn6Kt.js";import"./index-xOW9fQGR.js";import"./index-CfGCaVPJ.js";const W={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},X={class:"flex items-center justify-between"},Y={class:"text-3xl font-bold"},Z={class:"text-muted-foreground"},ee={class:"grid gap-6 md:grid-cols-2"},ie={class:"space-y-4"},oe={key:0,class:"text-sm text-destructive mt-1"},te={key:0,class:"text-sm text-destructive mt-1"},re={class:"space-y-4"},ae={key:0,class:"text-sm text-destructive mt-1"},se={key:1,class:"text-sm text-destructive mt-1"},ne={key:0,class:"text-sm text-destructive mt-1"},le={key:1,class:"text-sm text-destructive mt-1"},ce={class:"flex items-center space-x-2"},de={key:0,class:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},fe={class:"mt-2 space-y-2"},me={class:"flex items-center gap-2 text-blue-700"},ue={class:"font-medium"},pe={class:"font-medium"},_e={key:0,class:"flex items-center gap-2 text-blue-600"},he={key:1,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},ve={class:"text-red-800 text-sm"},be={class:"flex justify-between mt-8"},mi=S({__name:"Form",props:{periodo:{}},setup(F){const v=F,u=p(()=>!!v.periodo),P=[{title:"Admin",href:"/admin/dashboard"},{title:"Periodos Electorales",href:"/admin/periodos-electorales"},{title:u.value?"Editar":"Crear",href:"#"}],e=j((()=>{if(!v.periodo)return{nombre:"",descripcion:"",fecha_inicio:null,fecha_fin:null,activo:!0};const t=v.periodo;return{nombre:t.nombre||"",descripcion:t.descripcion||"",fecha_inicio:t.fecha_inicio?new Date(t.fecha_inicio):null,fecha_fin:t.fecha_fin?new Date(t.fecha_fin):null,activo:t.activo}})()),T=()=>{u.value?e.put(`/admin/periodos-electorales/${v.periodo.id}`,{onError:t=>{console.error("Errores de validación:",t)}}):e.post("/admin/periodos-electorales",{onError:t=>{console.error("Errores de validación:",t)}})},b=p(()=>{if(!e.fecha_inicio)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio);return isNaN(t.getTime())?"Fecha de inicio inválida":""}),x=p(()=>{if(!e.fecha_fin||!e.fecha_inicio)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),o=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);return isNaN(t.getTime())||isNaN(o.getTime())?"Fechas inválidas":o<=t?"La fecha de fin debe ser posterior a la fecha de inicio":""}),w=p(()=>{if(!e.fecha_inicio||!e.fecha_fin)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),o=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);if(isNaN(t.getTime())||isNaN(o.getTime()))return"";const s=Math.ceil((o.getTime()-t.getTime())/(1e3*60*60*24));if(s<0)return"";if(s<30)return`${s} día${s!==1?"s":""}`;const E=Math.floor(s/30),D=s%30;let V=`${E} mes${E!==1?"es":""}`;return D>0&&(V+=` y ${D} día${D!==1?"s":""}`),V}),g=p(()=>{if(!e.fecha_inicio||!e.fecha_fin)return null;const t=new Date,o=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),s=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);return isNaN(o.getTime())||isNaN(s.getTime())?null:s<t?{label:"Finalizado",color:"text-gray-600",icon:C}:o<=t&&s>=t?{label:"Vigente",color:"text-green-600",icon:N}:{label:"Próximo",color:"text-blue-600",icon:N}}),I=p(()=>e.nombre.trim().length>0&&e.fecha_inicio&&e.fecha_fin&&!b.value&&!x.value),$=t=>{if(!t)return"";const o=t instanceof Date?t:new Date(t);return isNaN(o.getTime())?"":o.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(t,o)=>(c(),d(M,null,[a(i(U),{title:u.value?"Editar Periodo Electoral":"Nuevo Periodo Electoral"},null,8,["title"]),a(K,{breadcrumbs:P},{default:l(()=>[r("div",W,[r("div",X,[r("div",null,[r("h1",Y,n(u.value?"Editar Periodo Electoral":"Nuevo Periodo Electoral"),1),r("p",Z,n(u.value?"Modifica los datos del periodo electoral":"Define un nuevo marco temporal para procesos electorales"),1)]),a(i(y),{variant:"outline",onClick:o[0]||(o[0]=s=>t.$inertia.visit("/admin/periodos-electorales"))},{default:l(()=>[a(i(Q),{class:"mr-2 h-4 w-4"}),o[7]||(o[7]=f(" Volver ",-1))]),_:1})]),a(i(L),null,{default:l(()=>[a(i(H),null,{default:l(()=>[a(i(G),null,{default:l(()=>[f(n(u.value?"Datos del Periodo":"Información del Nuevo Periodo"),1)]),_:1})]),_:1}),a(i(O),{class:"space-y-6"},{default:l(()=>[r("form",{onSubmit:z(T,["prevent"])},[r("div",ee,[r("div",ie,[r("div",null,[a(i(_),{for:"nombre"},{default:l(()=>[...o[8]||(o[8]=[f("Nombre del Periodo *",-1)])]),_:1}),a(i(q),{id:"nombre",modelValue:i(e).nombre,"onUpdate:modelValue":o[1]||(o[1]=s=>i(e).nombre=s),placeholder:"Ej: Elecciones 2024-2028, Periodo Presidencial 2026...",class:h({"border-destructive":i(e).errors.nombre})},null,8,["modelValue","class"]),i(e).errors.nombre?(c(),d("p",oe,n(i(e).errors.nombre),1)):m("",!0)]),r("div",null,[a(i(_),{for:"descripcion"},{default:l(()=>[...o[9]||(o[9]=[f("Descripción (opcional)",-1)])]),_:1}),a(i(J),{id:"descripcion",modelValue:i(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=s=>i(e).descripcion=s),placeholder:"Descripción detallada del periodo electoral...",rows:"4",class:h({"border-destructive":i(e).errors.descripcion})},null,8,["modelValue","class"]),i(e).errors.descripcion?(c(),d("p",te,n(i(e).errors.descripcion),1)):m("",!0)])]),r("div",re,[r("div",null,[a(i(_),{for:"fecha_inicio"},{default:l(()=>[...o[10]||(o[10]=[f("Fecha y Hora de Inicio *",-1)])]),_:1}),a(i(k),{id:"fecha_inicio",modelValue:i(e).fecha_inicio,"onUpdate:modelValue":o[3]||(o[3]=s=>i(e).fecha_inicio=s),placeholder:"Seleccionar fecha y hora de inicio",class:h({"border-destructive":i(e).errors.fecha_inicio||b.value})},null,8,["modelValue","class"]),b.value?(c(),d("p",ae,n(b.value),1)):m("",!0),i(e).errors.fecha_inicio?(c(),d("p",se,n(i(e).errors.fecha_inicio),1)):m("",!0)]),r("div",null,[a(i(_),{for:"fecha_fin"},{default:l(()=>[...o[11]||(o[11]=[f("Fecha y Hora de Fin *",-1)])]),_:1}),a(i(k),{id:"fecha_fin",modelValue:i(e).fecha_fin,"onUpdate:modelValue":o[4]||(o[4]=s=>i(e).fecha_fin=s),placeholder:"Seleccionar fecha y hora de fin",class:h({"border-destructive":i(e).errors.fecha_fin||x.value})},null,8,["modelValue","class"]),x.value?(c(),d("p",ne,n(x.value),1)):m("",!0),i(e).errors.fecha_fin?(c(),d("p",le,n(i(e).errors.fecha_fin),1)):m("",!0)]),r("div",ce,[a(i(R),{id:"activo",checked:i(e).activo,"onUpdate:checked":o[5]||(o[5]=s=>i(e).activo=s)},null,8,["checked"]),a(i(_),{for:"activo"},{default:l(()=>[...o[12]||(o[12]=[f(" Periodo activo ",-1)])]),_:1})]),o[13]||(o[13]=r("p",{class:"text-xs text-muted-foreground"}," Solo los periodos activos pueden ser utilizados en convocatorias. ",-1))])]),i(e).fecha_inicio&&i(e).fecha_fin?(c(),d("div",de,[a(i(_),{class:"text-blue-800 font-medium"},{default:l(()=>[...o[14]||(o[14]=[f("Vista previa del periodo:",-1)])]),_:1}),r("div",fe,[r("div",me,[a(i(C),{class:"h-4 w-4"}),r("span",ue,n($(i(e).fecha_inicio)),1),o[15]||(o[15]=r("span",{class:"text-blue-500"},"→",-1)),r("span",pe,n($(i(e).fecha_fin)),1)]),w.value?(c(),d("div",_e,[a(i(N),{class:"h-4 w-4"}),r("span",null,"Duración: "+n(w.value),1)])):m("",!0),g.value?(c(),d("div",{key:1,class:h(["flex items-center gap-2",g.value.color])},[(c(),A(B(g.value.icon),{class:"h-4 w-4"})),r("span",null,"Estado: "+n(g.value.label),1)],2)):m("",!0)])])):m("",!0),i(e).errors.delete?(c(),d("div",he,[r("p",ve,n(i(e).errors.delete),1)])):m("",!0),r("div",be,[a(i(y),{variant:"outline",type:"button",onClick:o[6]||(o[6]=s=>t.$inertia.visit("/admin/periodos-electorales"))},{default:l(()=>[...o[16]||(o[16]=[f(" Cancelar ",-1)])]),_:1}),a(i(y),{type:"submit",disabled:i(e).processing||!I.value},{default:l(()=>[f(n(i(e).processing?"Guardando...":u.value?"Actualizar":"Crear")+" Periodo ",1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{mi as default};
