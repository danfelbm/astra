import{_ as G}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dzj5c9-q.js";import{d as I,r as V,p as E,i as f,e as t,f as e,q as R,w as l,g as i,j as b,b as p,m as o,v as $,h as r,F as k,k as S,t as _,n as q,y as J,s as j}from"./app-DvrHxm-A.js";import{_ as B,c as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-DMIs0XFP.js";import{_ as c}from"./createLucideIcon-C9SNFSBj.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-Brldm4hc.js";import{_ as F}from"./index-fBOGNOl1.js";import{_ as O,a as Q,b as P,c as g,d as W,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-BWqWMxO6.js";import{_ as N,a as L,b as M,c as h,d}from"./SelectValue.vue_vue_type_script_setup_true_lang-WMyc99vm.js";import{E as X}from"./EtiquetaDisplay-D3os2HEl.js";import{P as Y}from"./plus-ht-a-3Mo.js";import{S as Z}from"./search-BVcAX9Sq.js";import{U as ee}from"./user-CnCAmwg9.js";import{C as te}from"./calendar-LPftFaUR.js";import{E as ae}from"./eye-G5n6j-F0.js";import{S as le}from"./square-pen-CuYWTOhv.js";import{T as se}from"./trash-2-0hXXyiOB.js";import"./useFlashMessages-CHloRx3R.js";import"./index-BLDMSd0k.js";import"./floating-ui.vue-Cf7FBWFK.js";import"./x-NXrdhfCU.js";import"./index-BW7-Zy45.js";import"./shield-BbDYIPbs.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Beu1EXTj.js";import"./chevron-right-m0_abZes.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CZkE-gea.js";import"./VisuallyHidden-DsBEBkn1.js";import"./index-DxNcCC-q.js";import"./Label.vue_vue_type_script_setup_true_lang-DO_0a9LA.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang--qJKglHx.js";import"./index-DgnEweSZ.js";import"./circle-alert-MTeQVoNG.js";import"./map-pin-vSY5kVk7.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-TQq5mQR5.js";import"./chevrons-up-down-DP5H385v.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-y-25SQ4W.js";import"./tag-NFwqbqe3.js";import"./users-RWV-6XWO.js";import"./target-CJ8YoB3s.js";import"./vote-N73-qYuX.js";import"./folder-open-6TjxLcK8.js";import"./send-BgrB1uCa.js";import"./file-text-BaRiPrEZ.js";import"./briefcase-0oCEXVio.js";import"./megaphone-CjEeNjq7.js";import"./user-check-tcc16dFR.js";import"./clipboard-list-CitBJiId.js";import"./mail-B5jeg0pD.js";import"./message-square-C1oG1Soh.js";import"./external-link-IkNiKorY.js";import"./panel-left-6VkgvZCp.js";import"./check-u3RvEb0M.js";import"./index-CkGx2BsQ.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-D6y8VaPk.js";import"./layers-BL9z1NPo.js";import"./zap-B2rPbmn0.js";import"./trending-up-BDJHOQoL.js";import"./award-DK66bRxf.js";import"./flag-B3C9F7M-.js";import"./hash-EnrxDAnh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},oe={class:"flex items-center justify-between"},ie={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},de={class:"relative"},ne={key:0,class:"flex items-center gap-2"},ue={key:1,class:"text-gray-400"},me={key:1,class:"text-gray-400 text-xs"},fe={class:"flex items-center gap-1"},pe={class:"flex items-center gap-2"},_e={class:"w-20 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"},ge={class:"text-sm text-gray-500"},ce={class:"flex justify-end gap-2"},ve={key:0,class:"flex justify-center gap-2"},ye={class:"text-center text-sm text-gray-500"},Pt=I({__name:"Index",props:{proyectos:{},filters:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(n){const w=n,U=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"}],v=V(w.filters.search||""),y=V(w.filters.estado||""),x=V(w.filters.prioridad||""),C=()=>{j.get("/admin/proyectos",{search:v.value,estado:y.value,prioridad:x.value},{preserveState:!0,preserveScroll:!0})};let T;E(v,m=>{clearTimeout(T),T=setTimeout(()=>{C()},500)}),E([y,x],()=>{C()});const D=m=>{confirm(`¿Estás seguro de eliminar el proyecto "${m.nombre}"?`)&&j.delete(`/admin/proyectos/${m.id}`,{preserveScroll:!0})},H=m=>({planificacion:"bg-blue-100 text-blue-800",en_progreso:"bg-yellow-100 text-yellow-800",pausado:"bg-orange-100 text-orange-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-800",A=m=>({baja:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",critica:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-800";return(m,a)=>(o(),f(k,null,[t(e(R),{title:"Gestión de Proyectos"}),t(G,{breadcrumbs:U},{default:l(()=>[i("div",re,[i("div",oe,[a[5]||(a[5]=i("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Gestión de Proyectos ",-1)),n.canCreate?(o(),p(e($),{key:0,href:"/admin/proyectos/create"},{default:l(()=>[t(e(c),null,{default:l(()=>[t(e(Y),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=r(" Nuevo Proyecto ",-1))]),_:1})]),_:1})):b("",!0)]),t(e(B),null,{default:l(()=>[t(e(z),{class:"p-4"},{default:l(()=>[i("div",ie,[i("div",de,[t(e(Z),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(K),{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=s=>v.value=s),type:"text",placeholder:"Buscar proyectos...",class:"pl-10"},null,8,["modelValue"])]),t(e(N),{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=s=>y.value=s)},{default:l(()=>[t(e(L),null,{default:l(()=>[t(e(M),{placeholder:"Todos los estados"})]),_:1}),t(e(h),null,{default:l(()=>[t(e(d),{value:"all"},{default:l(()=>[...a[6]||(a[6]=[r("Todos los estados",-1)])]),_:1}),t(e(d),{value:"planificacion"},{default:l(()=>[...a[7]||(a[7]=[r("Planificación",-1)])]),_:1}),t(e(d),{value:"en_progreso"},{default:l(()=>[...a[8]||(a[8]=[r("En Progreso",-1)])]),_:1}),t(e(d),{value:"pausado"},{default:l(()=>[...a[9]||(a[9]=[r("Pausado",-1)])]),_:1}),t(e(d),{value:"completado"},{default:l(()=>[...a[10]||(a[10]=[r("Completado",-1)])]),_:1}),t(e(d),{value:"cancelado"},{default:l(()=>[...a[11]||(a[11]=[r("Cancelado",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(N),{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=s=>x.value=s)},{default:l(()=>[t(e(L),null,{default:l(()=>[t(e(M),{placeholder:"Todas las prioridades"})]),_:1}),t(e(h),null,{default:l(()=>[t(e(d),{value:"all"},{default:l(()=>[...a[12]||(a[12]=[r("Todas las prioridades",-1)])]),_:1}),t(e(d),{value:"baja"},{default:l(()=>[...a[13]||(a[13]=[r("Baja",-1)])]),_:1}),t(e(d),{value:"media"},{default:l(()=>[...a[14]||(a[14]=[r("Media",-1)])]),_:1}),t(e(d),{value:"alta"},{default:l(()=>[...a[15]||(a[15]=[r("Alta",-1)])]),_:1}),t(e(d),{value:"critica"},{default:l(()=>[...a[16]||(a[16]=[r("Crítica",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(c),{variant:"outline",onClick:a[3]||(a[3]=s=>{v.value="",y.value="",x.value="",C()})},{default:l(()=>[...a[17]||(a[17]=[r(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(B),null,{default:l(()=>[t(e(z),{class:"p-0"},{default:l(()=>[t(e(O),null,{default:l(()=>[t(e(Q),null,{default:l(()=>[t(e(P),null,{default:l(()=>[t(e(g),null,{default:l(()=>[...a[18]||(a[18]=[r("Nombre",-1)])]),_:1}),t(e(g),null,{default:l(()=>[...a[19]||(a[19]=[r("Responsable",-1)])]),_:1}),t(e(g),null,{default:l(()=>[...a[20]||(a[20]=[r("Etiquetas",-1)])]),_:1}),t(e(g),null,{default:l(()=>[...a[21]||(a[21]=[r("Estado",-1)])]),_:1}),t(e(g),null,{default:l(()=>[...a[22]||(a[22]=[r("Prioridad",-1)])]),_:1}),t(e(g),null,{default:l(()=>[...a[23]||(a[23]=[r("Fecha Inicio",-1)])]),_:1}),t(e(g),null,{default:l(()=>[...a[24]||(a[24]=[r("Progreso",-1)])]),_:1}),t(e(g),{class:"text-right"},{default:l(()=>[...a[25]||(a[25]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(W),null,{default:l(()=>[(o(!0),f(k,null,S(n.proyectos.data,s=>(o(),p(e(P),{key:s.id},{default:l(()=>[t(e(u),{class:"font-medium"},{default:l(()=>[r(_(s.nombre),1)]),_:2},1024),t(e(u),null,{default:l(()=>[s.responsable?(o(),f("div",ne,[t(e(ee),{class:"h-4 w-4 text-gray-400"}),r(" "+_(s.responsable.name),1)])):(o(),f("span",ue,"Sin asignar"))]),_:2},1024),t(e(u),null,{default:l(()=>[s.etiquetas&&s.etiquetas.length>0?(o(),p(X,{key:0,etiquetas:s.etiquetas,"max-visible":3,size:"sm"},null,8,["etiquetas"])):(o(),f("span",me,"Sin etiquetas"))]),_:2},1024),t(e(u),null,{default:l(()=>[t(e(F),{class:q(H(s.estado))},{default:l(()=>[r(_(s.estado_label),1)]),_:2},1032,["class"])]),_:2},1024),t(e(u),null,{default:l(()=>[t(e(F),{class:q(A(s.prioridad))},{default:l(()=>[r(_(s.prioridad_label),1)]),_:2},1032,["class"])]),_:2},1024),t(e(u),null,{default:l(()=>[i("div",fe,[t(e(te),{class:"h-4 w-4 text-gray-400"}),r(" "+_(s.fecha_inicio),1)])]),_:2},1024),t(e(u),null,{default:l(()=>[i("div",pe,[i("div",_e,[i("div",{class:"bg-blue-600 h-2.5 rounded-full",style:J(`width: ${s.porcentaje_completado}%`)},null,4)]),i("span",ge,_(s.porcentaje_completado)+"%",1)])]),_:2},1024),t(e(u),{class:"text-right"},{default:l(()=>[i("div",ce,[t(e($),{href:`/admin/proyectos/${s.id}`},{default:l(()=>[t(e(c),{variant:"outline",size:"sm",title:"Ver detalles"},{default:l(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),n.canEdit?(o(),p(e($),{key:0,href:`/admin/proyectos/${s.id}/edit`},{default:l(()=>[t(e(c),{variant:"outline",size:"sm",title:"Editar"},{default:l(()=>[t(e(le),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"])):b("",!0),n.canDelete?(o(),p(e(c),{key:1,variant:"destructive",size:"sm",onClick:xe=>D(s)},{default:l(()=>[t(e(se),{class:"h-4 w-4"})]),_:1},8,["onClick"])):b("",!0)])]),_:2},1024)]),_:2},1024))),128)),n.proyectos.data.length===0?(o(),p(e(P),{key:0},{default:l(()=>[t(e(u),{colspan:"7",class:"text-center py-8"},{default:l(()=>[...a[26]||(a[26]=[i("p",{class:"text-gray-500"},"No se encontraron proyectos",-1)])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),n.proyectos.last_page>1?(o(),f("div",ve,[(o(!0),f(k,null,S(n.proyectos.links,s=>(o(),f(k,{key:s.label},[s.url?(o(),p(e($),{key:0,href:s.url,"preserve-state":"","preserve-scroll":""},{default:l(()=>[t(e(c),{variant:s.active?"default":"outline",size:"sm",innerHTML:s.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(o(),p(e(c),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:s.label},null,8,["innerHTML"]))],64))),128))])):b("",!0),i("div",ye," Mostrando "+_(n.proyectos.data.length)+" de "+_(n.proyectos.total)+" proyectos ",1)])]),_:1})],64))}});export{Pt as default};
