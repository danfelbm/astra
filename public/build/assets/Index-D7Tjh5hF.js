import{d as E,r as T,c as S,b as f,w as o,g as n,j as F,e,i,J as U,f as t,A as j,m as l,F as v,k as p,t as u,ay as q,h as r,v as N,n as H,s as K}from"./app-CUy8bq-4.js";import{_ as G}from"./UserLayout.vue_vue_type_script_setup_true_lang-CMfPTi5J.js";import{_ as g,a as x,b as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-aQWwj-VV.js";import{_ as b}from"./CardDescription.vue_vue_type_script_setup_true_lang-D9Sm1XFf.js";import{_ as I}from"./createLucideIcon-BVeAo22y.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-KDLmivUK.js";import{_ as X,a as O,b as h,c as k}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-s0vkyhrt.js";import{_ as B,a as M}from"./index-giSk6K07.js";import{_ as w}from"./ContratoCard.vue_vue_type_script_setup_true_lang-D4MtIVMd.js";import{S as Q}from"./search-DlM7cAOV.js";import{F as R}from"./filter-OXBrqNgh.js";import{T as W}from"./triangle-alert-VHZ3Jrkz.js";import{C as Y}from"./clock-C6V-0lcU.js";import{F as A}from"./file-text-DLYSBMo_.js";import{C as L}from"./circle-check-big-BoVlpGZu.js";import{C as Z}from"./circle-x-D3aL8uUy.js";import"./useFlashMessages-BSGtS98b.js";import"./index-aYAdEGHe.js";import"./floating-ui.vue-BuhgbMW1.js";import"./x-BIc-vpoP.js";import"./index-Cibtne3p.js";import"./shield-CM4rzlKb.js";import"./user-BblbUKaH.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-FYTrsXKF.js";import"./chevron-right-BN0pcRkC.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BlrYM9n8.js";import"./VisuallyHidden-W3a4-zje.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CDO9BPe3.js";import"./index-Cp4rSUgH.js";import"./check-cYkI6jVy.js";import"./Label.vue_vue_type_script_setup_true_lang-C8Yg27qk.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CLMRNulS.js";import"./index-B1IwCVKl.js";import"./circle-alert-C27dg7Ep.js";import"./map-pin-DnLb6Xc5.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CqolT--g.js";import"./ellipsis-DOX_Jhdl.js";import"./usePermissions-6mfi9WNH.js";import"./square-check-big-Dt7HCeZl.js";import"./users-CtZ6ZZ1s.js";import"./folder-open-Bt9R0Kno.js";import"./milestone-BXaKJacw.js";import"./index-BqMYO_2s.js";import"./RovingFocusItem-Bg0_Sxp8.js";import"./utils-CtJjMwls.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-BMjaOs_i.js";import"./index-nP7KVplh.js";import"./calendar-t9FerTPa.js";import"./dollar-sign-C8bZ2xNb.js";import"./eye-DZg-6F1p.js";import"./square-pen-CsztrSPy.js";import"./arrow-right-BSbmXVW-.js";const tt={class:"space-y-6"},et={class:"flex flex-col gap-4"},st={class:"flex flex-col md:flex-row gap-4"},ot={class:"flex-1 relative"},at=["value"],lt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-6"},rt={key:0,class:"text-center py-12"},it={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},dt={key:0,class:"text-center py-12"},nt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ut={key:0,class:"text-center py-12"},ct={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},mt={key:0,class:"text-center py-12"},ft={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},vt={key:0,class:"text-center py-12"},pt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},gt={key:2,class:"flex justify-center mt-6"},xt={class:"flex gap-2"},ge=E({__name:"Index",props:{contratos:{},filtros:{},estadisticas:{},proyectos:{},authPermissions:{}},setup(d){const m=d,P=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"}],V=T(m.filtros.search||""),C=T(m.filtros.estado||"todos"),z=T(m.filtros.proyecto_id||0);S(()=>m.authPermissions.includes("contratos.view_own"));const c=S(()=>({todos:m.contratos.data,activos:m.contratos.data.filter(s=>s.estado==="activo"),finalizados:m.contratos.data.filter(s=>s.estado==="finalizado"),borradores:m.contratos.data.filter(s=>s.estado==="borrador"),cancelados:m.contratos.data.filter(s=>s.estado==="cancelado")})),$=()=>{K.get(route("user.mis-contratos.index"),{search:V.value,estado:C.value!=="todos"?C.value:void 0,proyecto_id:z.value||void 0},{preserveState:!0,preserveScroll:!0})},D=y=>{C.value=y,$()};return(y,s)=>(l(),f(G,{breadcrumbs:P},{default:o(()=>[n("div",tt,[n("div",et,[s[4]||(s[4]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Mis Contratos"),n("p",{class:"text-muted-foreground mt-2"}," Gestiona y consulta los contratos de tus proyectos ")],-1)),n("div",st,[n("div",ot,[e(t(Q),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e(t(J),{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=a=>V.value=a),placeholder:"Buscar contratos...",class:"pl-10",onKeyup:j($,["enter"])},null,8,["modelValue"])]),U(n("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>z.value=a),onChange:$,class:"px-3 py-2 border border-input rounded-md bg-background"},[s[2]||(s[2]=n("option",{value:0},"Todos los proyectos",-1)),(l(!0),i(v,null,p(d.proyectos,a=>(l(),i("option",{key:a.id,value:a.id},u(a.nombre),9,at))),128))],544),[[q,z.value]]),e(t(I),{onClick:$},{default:o(()=>[e(t(R),{class:"w-4 h-4 mr-2"}),s[3]||(s[3]=r(" Filtrar ",-1))]),_:1})])]),n("div",lt,[e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[5]||(s[5]=[r("Total",-1)])]),_:1}),e(t(_),{class:"text-2xl"},{default:o(()=>[r(u(d.estadisticas.total),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[6]||(s[6]=[r("Activos",-1)])]),_:1}),e(t(_),{class:"text-2xl text-green-600"},{default:o(()=>[r(u(d.estadisticas.activos),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[7]||(s[7]=[r("Finalizados",-1)])]),_:1}),e(t(_),{class:"text-2xl text-blue-600"},{default:o(()=>[r(u(d.estadisticas.finalizados),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[8]||(s[8]=[r("Vencidos",-1)])]),_:1}),e(t(_),{class:"text-2xl text-red-600"},{default:o(()=>[r(u(d.estadisticas.vencidos),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[9]||(s[9]=[r("Por Vencer",-1)])]),_:1}),e(t(_),{class:"text-2xl text-orange-600"},{default:o(()=>[r(u(d.estadisticas.proximos_vencer),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[10]||(s[10]=[r("Monto Total",-1)])]),_:1}),e(t(_),{class:"text-xl"},{default:o(()=>{var a;return[r(" $"+u(((a=d.estadisticas.monto_total)==null?void 0:a.toLocaleString())||0),1)]}),_:1})]),_:1})]),_:1})]),d.estadisticas.vencidos>0?(l(),f(t(B),{key:0,class:"border-red-200 bg-red-50"},{default:o(()=>[e(t(W),{class:"h-4 w-4 text-red-600"}),e(t(M),{class:"text-red-800"},{default:o(()=>[r(" Tienes "+u(d.estadisticas.vencidos)+" contrato(s) vencido(s) que requieren atención. ",1),e(t(N),{href:y.route("user.mis-contratos.vencidos"),class:"font-medium underline ml-2"},{default:o(()=>[...s[11]||(s[11]=[r(" Ver contratos vencidos ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):F("",!0),d.estadisticas.proximos_vencer>0?(l(),f(t(B),{key:1,class:"border-orange-200 bg-orange-50"},{default:o(()=>[e(t(Y),{class:"h-4 w-4 text-orange-600"}),e(t(M),{class:"text-orange-800"},{default:o(()=>[r(u(d.estadisticas.proximos_vencer)+" contrato(s) vencerán en los próximos 30 días. ",1),e(t(N),{href:y.route("user.mis-contratos.proximos-vencer"),class:"font-medium underline ml-2"},{default:o(()=>[...s[12]||(s[12]=[r(" Ver próximos a vencer ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):F("",!0),e(t(X),{"default-value":C.value,"onUpdate:modelValue":D},{default:o(()=>[e(t(O),{class:"grid w-full grid-cols-5"},{default:o(()=>[e(t(h),{value:"todos"},{default:o(()=>[r(" Todos ("+u(c.value.todos.length)+") ",1)]),_:1}),e(t(h),{value:"activos"},{default:o(()=>[r(" Activos ("+u(c.value.activos.length)+") ",1)]),_:1}),e(t(h),{value:"finalizados"},{default:o(()=>[r(" Finalizados ("+u(c.value.finalizados.length)+") ",1)]),_:1}),e(t(h),{value:"borradores"},{default:o(()=>[r(" Borradores ("+u(c.value.borradores.length)+") ",1)]),_:1}),e(t(h),{value:"cancelados"},{default:o(()=>[r(" Cancelados ("+u(c.value.cancelados.length)+") ",1)]),_:1})]),_:1}),e(t(k),{value:"todos",class:"mt-6"},{default:o(()=>[d.contratos.data.length===0?(l(),i("div",rt,[e(t(A),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[13]||(s[13]=n("p",{class:"text-muted-foreground"}," No tienes contratos asignados ",-1))])):(l(),i("div",it,[(l(!0),i(v,null,p(d.contratos.data,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"activos",class:"mt-6"},{default:o(()=>[c.value.activos.length===0?(l(),i("div",dt,[e(t(L),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[14]||(s[14]=n("p",{class:"text-muted-foreground"}," No hay contratos activos ",-1))])):(l(),i("div",nt,[(l(!0),i(v,null,p(c.value.activos,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"finalizados",class:"mt-6"},{default:o(()=>[c.value.finalizados.length===0?(l(),i("div",ut,[e(t(L),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[15]||(s[15]=n("p",{class:"text-muted-foreground"}," No hay contratos finalizados ",-1))])):(l(),i("div",ct,[(l(!0),i(v,null,p(c.value.finalizados,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"borradores",class:"mt-6"},{default:o(()=>[c.value.borradores.length===0?(l(),i("div",mt,[e(t(A),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[16]||(s[16]=n("p",{class:"text-muted-foreground"}," No hay contratos en borrador ",-1))])):(l(),i("div",ft,[(l(!0),i(v,null,p(c.value.borradores,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"cancelados",class:"mt-6"},{default:o(()=>[c.value.cancelados.length===0?(l(),i("div",vt,[e(t(Z),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[17]||(s[17]=n("p",{class:"text-muted-foreground"}," No hay contratos cancelados ",-1))])):(l(),i("div",pt,[(l(!0),i(v,null,p(c.value.cancelados,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1})]),_:1},8,["default-value"]),d.contratos.links&&d.contratos.links.length>3?(l(),i("div",gt,[n("nav",xt,[(l(!0),i(v,null,p(d.contratos.links,a=>(l(),f(t(N),{key:a.label,href:a.url,class:H(["px-3 py-2 rounded-md text-sm",a.active?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"]),innerHTML:a.label,"preserve-state":"","preserve-scroll":""},null,8,["href","class","innerHTML"]))),128))])])):F("",!0)])]),_:1}))}});export{ge as default};
