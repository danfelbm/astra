import{d as K,c as L,r as P,i as f,e as n,f as s,u as o,p as W,w as r,g as i,j as _,b as h,t as d,P as k,h as p,n as b,x as I,F as C,k as V,W as m}from"./app-BxMQdeji.js";import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CiEBtCld.js";import{_ as y,c as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-BnCOEwdG.js";import{_ as u}from"./createLucideIcon-C-UWYrfi.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-BlmtfhYq.js";import{H as q}from"./HitoCard-DVd64XVH.js";import{t as E}from"./index-uuqfgDZR.js";import{A as G}from"./arrow-left-D5jKR-4B.js";import{P as B}from"./plus-Blz5-OLA.js";import{S as J}from"./search-BH_bEnIt.js";import{T as O}from"./target-DGdssVnK.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-HaYR--Vk.js";import"./index-DyBffbvj.js";import"./floating-ui.vue-8MwpQwna.js";import"./x-CtZ-Yk1L.js";import"./index-CniBkxSN.js";import"./shield-BWgGyosQ.js";import"./user-y-oKgZ0r.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CwQxj27i.js";import"./chevron-right-Fu6i2V5H.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-XGwxgqGh.js";import"./VisuallyHidden-BU7kxpuH.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-C_cC4TmA.js";import"./index-gViH2lvq.js";import"./check-Df8aIUSG.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-Cv61jd0z.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Rc0j_Ts0.js";import"./circle-alert----6uGyB.js";import"./map-pin-BSO3mLrr.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-vmsnnBVQ.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D23-rq2T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-3z313Cuu.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CtZNhcn0.js";import"./tag-DPKMgGKR.js";import"./users-CvN1Zex9.js";import"./vote-BLA5af_M.js";import"./folder-open-B7m9IzBm.js";import"./send-oS9jU0xl.js";import"./file-text-BnGFyr0l.js";import"./briefcase-WEKIfwBg.js";import"./calendar-DgdSvpAx.js";import"./megaphone-4hd08Cg7.js";import"./user-check-B_HPyobX.js";import"./mail-DqZLMO2Y.js";import"./message-square-DEtIPXL4.js";import"./external-link-B-I99Qkx.js";import"./panel-left-CpkWwX9C.js";import"./index-BV26-s10.js";import"./index-De6-LhcB.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-B2V4p4ol.js";import"./Progress.vue_vue_type_script_setup_true_lang-BF0Ctj7D.js";import"./ellipsis-CCojG_ET.js";import"./pen-BSjBVchq.js";import"./copy-DFTSkhrr.js";import"./trash-2-CWeupkIm.js";import"./calendar-days-Bentt2xq.js";import"./clock-CKp_PLc5.js";import"./eye-12Pg9Ucu.js";import"./es-BDPlFIsO.js";const R={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},X={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Y={class:"text-sm text-muted-foreground mt-1"},Z={class:"flex items-center gap-2"},tt={key:0,class:"grid grid-cols-2 md:grid-cols-5 gap-4"},et={class:"text-2xl font-bold"},ot={class:"text-2xl font-bold text-gray-500"},st={class:"text-2xl font-bold text-blue-500"},rt={class:"text-2xl font-bold text-green-500"},it={class:"flex flex-col sm:flex-row gap-2"},at={class:"flex-1"},lt={class:"relative"},nt={class:"flex gap-2"},dt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},pt={class:"rounded-full bg-muted p-3 mb-4"},mt={class:"text-muted-foreground text-center mb-4"},ut={key:3,class:"flex justify-center gap-2 mt-4"},$e=K({__name:"Index",props:{proyecto:{},hitos:{},filters:{},estadisticas:{},timeline:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageDeliverables:{type:Boolean}},setup(z){var D,H;const a=z,v=L(()=>Array.isArray(a.hitos)?{data:a.hitos,current_page:1,last_page:1,per_page:a.hitos.length,total:a.hitos.length}:a.hitos),x=P(((D=a.filters)==null?void 0:D.search)||""),c=P(((H=a.filters)==null?void 0:H.estado)||""),T=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:a.proyecto.nombre,href:`/admin/proyectos/${a.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${a.proyecto.id}/hitos`}],A=e=>{m.visit(`/admin/proyectos/${a.proyecto.id}/hitos/${e.id}`)},S=e=>{m.visit(`/admin/proyectos/${a.proyecto.id}/hitos/${e.id}/edit`)},N=e=>{confirm(`¿Estás seguro de eliminar el hito "${e.nombre}"?`)&&m.delete(`/admin/proyectos/${a.proyecto.id}/hitos/${e.id}`,{onSuccess:()=>{E.success("Hito eliminado exitosamente")},onError:()=>{E.error("Error al eliminar el hito")}})},j=e=>{m.post(`/admin/proyectos/${a.proyecto.id}/hitos/${e.id}/duplicar`,{},{onSuccess:()=>{E.success("Hito duplicado exitosamente")},onError:()=>{E.error("Error al duplicar el hito")}})},M=e=>{m.visit(`/admin/proyectos/${a.proyecto.id}/hitos/${e.id}/entregables/create`)},F=e=>{m.visit(`/admin/proyectos/${a.proyecto.id}/hitos/${e.id}/entregables`)},w=()=>{m.get(`/admin/proyectos/${a.proyecto.id}/hitos`,{search:x.value,estado:c.value},{preserveState:!0,preserveScroll:!0})},$=e=>{c.value=e,w()};return(e,t)=>(n(),f(C,null,[s(o(W),{title:`Hitos - ${e.proyecto.nombre}`},null,8,["title"]),s(Q,{breadcrumbs:T},{default:r(()=>[i("div",R,[i("div",X,[i("div",null,[t[5]||(t[5]=i("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Hitos del Proyecto ",-1)),i("p",Y,d(e.proyecto.nombre),1)]),i("div",Z,[s(o(k),{href:`/admin/proyectos/${e.proyecto.id}`},{default:r(()=>[s(o(u),{variant:"outline",size:"sm"},{default:r(()=>[s(o(G),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=p(" Volver al Proyecto ",-1))]),_:1})]),_:1},8,["href"]),e.canCreate?(n(),h(o(k),{key:0,href:`/admin/proyectos/${e.proyecto.id}/hitos/create`},{default:r(()=>[s(o(u),{size:"sm"},{default:r(()=>[s(o(B),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=p(" Nuevo Hito ",-1))]),_:1})]),_:1},8,["href"])):_("",!0)])]),e.estadisticas?(n(),f("div",tt,[s(o(y),null,{default:r(()=>[s(o(g),{class:"p-4"},{default:r(()=>[i("p",et,d(e.estadisticas.total),1),t[8]||(t[8]=i("p",{class:"text-xs text-muted-foreground"},"Total",-1))]),_:1})]),_:1}),s(o(y),null,{default:r(()=>[s(o(g),{class:"p-4"},{default:r(()=>[i("p",ot,d(e.estadisticas.pendientes),1),t[9]||(t[9]=i("p",{class:"text-xs text-muted-foreground"},"Pendientes",-1))]),_:1})]),_:1}),s(o(y),null,{default:r(()=>[s(o(g),{class:"p-4"},{default:r(()=>[i("p",st,d(e.estadisticas.en_progreso),1),t[10]||(t[10]=i("p",{class:"text-xs text-muted-foreground"},"En Progreso",-1))]),_:1})]),_:1}),s(o(y),null,{default:r(()=>[s(o(g),{class:"p-4"},{default:r(()=>[i("p",rt,d(e.estadisticas.completados),1),t[11]||(t[11]=i("p",{class:"text-xs text-muted-foreground"},"Completados",-1))]),_:1})]),_:1}),s(o(y),null,{default:r(()=>[s(o(g),{class:"p-4"},{default:r(()=>[i("p",{class:b(["text-2xl font-bold",{"text-red-500":e.estadisticas.vencidos>0}])},d(e.estadisticas.vencidos),3),t[12]||(t[12]=i("p",{class:"text-xs text-muted-foreground"},"Vencidos",-1))]),_:1})]),_:1})])):_("",!0),i("div",it,[i("div",at,[i("div",lt,[s(o(J),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(o(U),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=l=>x.value=l),placeholder:"Buscar hitos...",class:"pl-9",onKeyup:I(w,["enter"])},null,8,["modelValue"])])]),i("div",nt,[s(o(u),{variant:"outline",size:"sm",class:b({"bg-primary text-primary-foreground":c.value===""}),onClick:t[1]||(t[1]=l=>$(""))},{default:r(()=>[...t[13]||(t[13]=[p(" Todos ",-1)])]),_:1},8,["class"]),s(o(u),{variant:"outline",size:"sm",class:b({"bg-primary text-primary-foreground":c.value==="pendiente"}),onClick:t[2]||(t[2]=l=>$("pendiente"))},{default:r(()=>[...t[14]||(t[14]=[p(" Pendientes ",-1)])]),_:1},8,["class"]),s(o(u),{variant:"outline",size:"sm",class:b({"bg-primary text-primary-foreground":c.value==="en_progreso"}),onClick:t[3]||(t[3]=l=>$("en_progreso"))},{default:r(()=>[...t[15]||(t[15]=[p(" En Progreso ",-1)])]),_:1},8,["class"]),s(o(u),{variant:"outline",size:"sm",class:b({"bg-primary text-primary-foreground":c.value==="completado"}),onClick:t[4]||(t[4]=l=>$("completado"))},{default:r(()=>[...t[16]||(t[16]=[p(" Completados ",-1)])]),_:1},8,["class"])])]),v.value.data.length>0?(n(),f("div",dt,[(n(!0),f(C,null,V(v.value.data,l=>(n(),h(q,{key:l.id,hito:l,"proyecto-id":e.proyecto.id,canEdit:e.canEdit,canDelete:e.canDelete,canManageDeliverables:e.canManageDeliverables,showActions:!0,onView:A,onEdit:S,onDelete:N,onDuplicate:j,onAddEntregable:M,onViewEntregables:F},null,8,["hito","proyecto-id","canEdit","canDelete","canManageDeliverables"]))),128))])):(n(),h(o(y),{key:2},{default:r(()=>[s(o(g),{class:"flex flex-col items-center justify-center py-12"},{default:r(()=>[i("div",pt,[s(o(O),{class:"h-8 w-8 text-muted-foreground"})]),t[18]||(t[18]=i("h3",{class:"text-lg font-semibold mb-2"},"No hay hitos",-1)),i("p",mt,d(x.value?"No se encontraron hitos con los filtros aplicados":"Comienza creando el primer hito del proyecto"),1),e.canCreate&&!x.value?(n(),h(o(k),{key:0,href:`/admin/proyectos/${e.proyecto.id}/hitos/create`},{default:r(()=>[s(o(u),null,{default:r(()=>[s(o(B),{class:"h-4 w-4 mr-2"}),t[17]||(t[17]=p(" Crear Primer Hito ",-1))]),_:1})]),_:1},8,["href"])):_("",!0)]),_:1})]),_:1})),v.value.last_page>1?(n(),f("div",ut,[(n(!0),f(C,null,V(v.value.last_page,l=>(n(),h(o(u),{key:l,variant:l===v.value.current_page?"default":"outline",size:"sm",onClick:ct=>o(m).visit(`/admin/proyectos/${e.proyecto.id}/hitos?page=${l}`)},{default:r(()=>[p(d(l),1)]),_:2},1032,["variant","onClick"]))),128))])):_("",!0)])]),_:1})],64))}});export{$e as default};
