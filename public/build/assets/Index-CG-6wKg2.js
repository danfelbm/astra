import{C as F,_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-Drji1JIa.js";import{d as E,k as C,a as _,o as d,b as s,u as e,m as T,e as a,f as l,j as k,i as v,W as b,g as r,P as S,F as y,r as q,t as n,n as R}from"./app-CQF1VHbi.js";import{c as M,_ as u}from"./createLucideIcon-C_20i9aL.js";import{_ as W,c as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-BTuOSo7w.js";import{_ as J,a as O,b as $,c,d as Q,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-CWjkmzao.js";import{_ as U}from"./index-BTZVXfIL.js";import{_ as H,a as K,b as X,c as Y,d as Z,e as ee,f as te,g as se}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DT5DMON8.js";import{_ as ae,C as ie}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-K4UMhMLl.js";import{U as oe}from"./upload-W4QzA_eI.js";import{P as le}from"./plus-DAW3ItNV.js";import{S as re}from"./square-pen-CsW8SHHB.js";import{T as ne}from"./trash-Bs7modc3.js";import"./Label.vue_vue_type_script_setup_true_lang-DR82899k.js";import"./index-BQdx5-q0.js";import"./check-BYZt5tnB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-MdMCYzpT.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CR4FOspX.js";import"./VisuallyHidden-Bqeh_8NX.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D4K6io9B.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-MoKac0Rw.js";import"./index-_5nIS9iO.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-B-pMyuO_.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-BI5YkyO0.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DeKmaNhs.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-Cv9ZxGZR.js";import"./loader-circle-BvspiptY.js";import"./trash-2-C0YWP2t9.js";import"./search-CHZKjaTx.js";import"./history-DYmtW9oU.js";import"./save-CE4ldN_p.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=M("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),ue={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},me={class:"flex items-center justify-between"},fe={class:"flex gap-2"},pe={class:"rounded-md border"},ce={class:"font-medium"},_e={class:"text-sm text-muted-foreground"},ve={key:0,class:"text-xs text-muted-foreground"},ge=["title"],be={class:"text-sm text-muted-foreground"},ke={class:"flex justify-end gap-1"},$e={key:0,class:"flex items-center justify-between mt-4"},xe={class:"text-sm text-muted-foreground"},he={class:"flex items-center space-x-2"},we={class:"text-sm"},Ce={key:0},at=E({__name:"Index",props:{users:{},filters:{},filterFieldsConfig:{},canImport:{type:Boolean}},setup(P){const x=P,{route:f}=window,D=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"}],g=C(!1),p=C(null),A={fields:x.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["name","email","documento_identidad","telefono"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},B=i=>{b.post(f("admin.usuarios.toggle-active",i.id),{},{preserveScroll:!0})},N=i=>{p.value=i,g.value=!0},I=()=>{p.value&&b.delete(f("admin.usuarios.destroy",p.value.id),{preserveScroll:!0}),g.value=!1,p.value=null},V=i=>i==="admin"?"default":"secondary",j=i=>i?"default":"destructive",h=i=>{const t=[];return i.localidad&&t.push(i.localidad.nombre),i.municipio&&t.push(i.municipio.nombre),i.departamento&&t.push(i.departamento.nombre),i.territorio&&t.push(i.territorio.nombre),t.join(", ")||"Sin ubicación"},w=i=>{b.get(f("admin.usuarios.index"),{...x.filters,page:i},{preserveState:!0,preserveScroll:!0})};return(i,t)=>(d(),_(y,null,[s(e(T),{title:"Usuarios"}),s(L,{breadcrumbs:D},{default:a(()=>[l("div",ue,[l("div",me,[t[6]||(t[6]=l("div",null,[l("h1",{class:"text-3xl font-bold tracking-tight"},"Usuarios"),l("p",{class:"text-muted-foreground"}," Administra los usuarios del sistema ")],-1)),l("div",fe,[i.canImport?(d(),k(e(u),{key:0,variant:"outline",onClick:t[0]||(t[0]=o=>e(b).visit("/admin/imports"))},{default:a(()=>[s(e(oe),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=r(" Importar CSV "))]),_:1})):v("",!0),s(e(S),{href:e(f)("admin.usuarios.create")},{default:a(()=>[s(e(u),null,{default:a(()=>[s(e(le),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=r(" Nuevo Usuario "))]),_:1})]),_:1},8,["href"])])]),s(ae,{config:A,route:e(f)("admin.usuarios.index"),"initial-filters":{quickSearch:i.filters.search,rootGroup:i.filters.advanced_filters?JSON.parse(i.filters.advanced_filters):void 0}},null,8,["route","initial-filters"]),s(e(W),null,{default:a(()=>[s(e(G),{class:"pt-6"},{default:a(()=>[l("div",pe,[s(e(J),null,{default:a(()=>[s(e(O),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(c),null,{default:a(()=>t[7]||(t[7]=[r("Usuario")])),_:1}),s(e(c),null,{default:a(()=>t[8]||(t[8]=[r("Rol")])),_:1}),s(e(c),null,{default:a(()=>t[9]||(t[9]=[r("Ubicación")])),_:1}),s(e(c),null,{default:a(()=>t[10]||(t[10]=[r("Estado")])),_:1}),s(e(c),null,{default:a(()=>t[11]||(t[11]=[r("Registro")])),_:1}),s(e(c),{class:"text-right"},{default:a(()=>t[12]||(t[12]=[r("Acciones")])),_:1})]),_:1})]),_:1}),s(e(Q),null,{default:a(()=>[(d(!0),_(y,null,q(i.users.data,o=>(d(),k(e($),{key:o.id},{default:a(()=>[s(e(m),null,{default:a(()=>[l("div",null,[l("div",ce,n(o.name),1),l("div",_e,n(o.email),1),o.documento_identidad?(d(),_("div",ve," Doc: "+n(o.documento_identidad),1)):v("",!0)])]),_:2},1024),s(e(m),null,{default:a(()=>[s(e(U),{variant:V(o.role)},{default:a(()=>[r(n(o.role==="admin"?"Administrador":"Usuario"),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(m),null,{default:a(()=>[l("div",{class:"max-w-[200px] truncate text-sm",title:h(o)},n(h(o)),9,ge)]),_:2},1024),s(e(m),null,{default:a(()=>[s(e(U),{variant:j(o.activo)},{default:a(()=>[r(n(o.activo?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(m),null,{default:a(()=>[l("div",be,n(new Date(o.created_at).toLocaleDateString()),1)]),_:2},1024),s(e(m),null,{default:a(()=>[l("div",ke,[s(e(S),{href:e(f)("admin.usuarios.edit",o.id)},{default:a(()=>[s(e(u),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:a(()=>[s(e(re),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),s(e(u),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:z=>B(o),title:o.activo?"Desactivar":"Activar"},{default:a(()=>[s(e(de),{class:R(["h-4 w-4",o.activo?"text-green-600":"text-gray-400"])},null,8,["class"])]),_:2},1032,["onClick","title"]),s(e(u),{variant:"ghost",size:"icon",class:"h-8 w-8 hover:text-destructive",onClick:z=>N(o)},{default:a(()=>[s(e(ne),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),i.users.data.length===0?(d(),k(e($),{key:0},{default:a(()=>[s(e(m),{colspan:"6",class:"text-center"},{default:a(()=>t[13]||(t[13]=[l("div",{class:"py-12 text-muted-foreground"}," No se encontraron usuarios ",-1)])),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),i.users.last_page>1?(d(),_("div",$e,[l("div",xe," Mostrando "+n(i.users.from)+" a "+n(i.users.to)+" de "+n(i.users.total)+" resultados ",1),l("div",he,[s(e(u),{variant:"outline",size:"sm",disabled:i.users.current_page===1,onClick:t[1]||(t[1]=o=>w(i.users.current_page-1))},{default:a(()=>[s(e(ie),{class:"h-4 w-4"}),t[14]||(t[14]=r(" Anterior "))]),_:1},8,["disabled"]),l("div",we," Página "+n(i.users.current_page)+" de "+n(i.users.last_page),1),s(e(u),{variant:"outline",size:"sm",disabled:i.users.current_page===i.users.last_page,onClick:t[2]||(t[2]=o=>w(i.users.current_page+1))},{default:a(()=>[t[15]||(t[15]=r(" Siguiente ")),s(e(F),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):v("",!0)]),_:1})]),_:1})]),s(e(H),{open:g.value,"onUpdate:open":t[3]||(t[3]=o=>g.value=o)},{default:a(()=>[s(e(K),null,{default:a(()=>[s(e(X),null,{default:a(()=>[s(e(Y),null,{default:a(()=>t[16]||(t[16]=[r("¿Estás seguro?")])),_:1}),s(e(Z),null,{default:a(()=>[t[17]||(t[17]=r(" Esta acción no se puede deshacer. Se eliminará permanentemente el usuario ")),p.value?(d(),_("strong",Ce,n(p.value.name),1)):v("",!0),t[18]||(t[18]=r(" del sistema. "))]),_:1})]),_:1}),s(e(ee),null,{default:a(()=>[s(e(te),null,{default:a(()=>t[19]||(t[19]=[r("Cancelar")])),_:1}),s(e(se),{onClick:I,class:"bg-destructive text-destructive-foreground"},{default:a(()=>t[20]||(t[20]=[r(" Eliminar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{at as default};
