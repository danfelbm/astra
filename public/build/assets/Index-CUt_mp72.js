import{d as E,r as T,c as S,b as f,w as o,g as n,j as F,e,i,J as U,f as t,A as j,m as l,F as v,k as p,t as u,ay as q,h as r,v as N,n as H,s as K}from"./app-Gt4dtul1.js";import{_ as G}from"./UserLayout.vue_vue_type_script_setup_true_lang-DF3-4cGX.js";import{_ as g,a as x,b as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-BZDUZOVp.js";import{_ as b}from"./CardDescription.vue_vue_type_script_setup_true_lang-CVJWxk38.js";import{_ as I}from"./createLucideIcon-B1-tYSoR.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-uZG4676m.js";import{_ as X,a as O,b as h,c as k}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-CsK7SWVK.js";import{_ as B,a as M}from"./index-jJui_M5F.js";import{_ as w}from"./ContratoCard.vue_vue_type_script_setup_true_lang-6o4Q6WX1.js";import{S as Q}from"./search-B6F3GxyX.js";import{F as R}from"./filter-Cw55zPHD.js";import{T as W}from"./triangle-alert-Cc7nnGIU.js";import{C as Y}from"./clock-CBxmgWea.js";import{F as A}from"./file-text-Blg9EDso.js";import{C as L}from"./circle-check-big-B9HwxCpn.js";import{C as Z}from"./circle-x-P2BmCgPC.js";import"./useFlashMessages-DqJblFBs.js";import"./index-BdJPjDvu.js";import"./floating-ui.vue-rCFcwPea.js";import"./x-79vAokX_.js";import"./index-DJGydE9_.js";import"./shield-DsTg-o9d.js";import"./user-D2cyoabm.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-nLv8uXAx.js";import"./chevron-right-DcoFFIyk.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BOOP2mEn.js";import"./VisuallyHidden-CIdEb1oK.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CmxEXceS.js";import"./index-DSbyGM_L.js";import"./check-VU-rtaY0.js";import"./Label.vue_vue_type_script_setup_true_lang-BNH5n8R4.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Ul_qsbs-.js";import"./index-D7-jqHqV.js";import"./circle-alert-DlKxCUEJ.js";import"./map-pin-H-2PLz-I.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DB5JYnxQ.js";import"./ellipsis-BZlewqKr.js";import"./usePermissions-DrmqbMuV.js";import"./square-check-big-suwZYXID.js";import"./users-BmtVy_yp.js";import"./folder-open-CRJL5QDE.js";import"./milestone-xxsYtAyj.js";import"./index-BIlE3S0S.js";import"./RovingFocusItem-GN-su7ze.js";import"./utils-DrD6Cfu2.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-BfV6SvUK.js";import"./index-BAjrwUXc.js";import"./calendar-B5ZCcyEd.js";import"./dollar-sign-BIGLk8MJ.js";import"./eye-DYUE5Qq1.js";import"./square-pen-CLUqbO3y.js";import"./arrow-right-DEtICPui.js";const tt={class:"space-y-6"},et={class:"flex flex-col gap-4"},st={class:"flex flex-col md:flex-row gap-4"},ot={class:"flex-1 relative"},at=["value"],lt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-6"},rt={key:0,class:"text-center py-12"},it={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},dt={key:0,class:"text-center py-12"},nt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ut={key:0,class:"text-center py-12"},ct={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},mt={key:0,class:"text-center py-12"},ft={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},vt={key:0,class:"text-center py-12"},pt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},gt={key:2,class:"flex justify-center mt-6"},xt={class:"flex gap-2"},ge=E({__name:"Index",props:{contratos:{},filtros:{},estadisticas:{},proyectos:{},authPermissions:{}},setup(d){const m=d,P=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"}],V=T(m.filtros.search||""),C=T(m.filtros.estado||"todos"),z=T(m.filtros.proyecto_id||0);S(()=>m.authPermissions.includes("contratos.view_own"));const c=S(()=>({todos:m.contratos.data,activos:m.contratos.data.filter(s=>s.estado==="activo"),finalizados:m.contratos.data.filter(s=>s.estado==="finalizado"),borradores:m.contratos.data.filter(s=>s.estado==="borrador"),cancelados:m.contratos.data.filter(s=>s.estado==="cancelado")})),$=()=>{K.get(route("user.mis-contratos.index"),{search:V.value,estado:C.value!=="todos"?C.value:void 0,proyecto_id:z.value||void 0},{preserveState:!0,preserveScroll:!0})},D=y=>{C.value=y,$()};return(y,s)=>(l(),f(G,{breadcrumbs:P},{default:o(()=>[n("div",tt,[n("div",et,[s[4]||(s[4]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Mis Contratos"),n("p",{class:"text-muted-foreground mt-2"}," Gestiona y consulta los contratos de tus proyectos ")],-1)),n("div",st,[n("div",ot,[e(t(Q),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e(t(J),{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=a=>V.value=a),placeholder:"Buscar contratos...",class:"pl-10",onKeyup:j($,["enter"])},null,8,["modelValue"])]),U(n("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>z.value=a),onChange:$,class:"px-3 py-2 border border-input rounded-md bg-background"},[s[2]||(s[2]=n("option",{value:0},"Todos los proyectos",-1)),(l(!0),i(v,null,p(d.proyectos,a=>(l(),i("option",{key:a.id,value:a.id},u(a.nombre),9,at))),128))],544),[[q,z.value]]),e(t(I),{onClick:$},{default:o(()=>[e(t(R),{class:"w-4 h-4 mr-2"}),s[3]||(s[3]=r(" Filtrar ",-1))]),_:1})])]),n("div",lt,[e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[5]||(s[5]=[r("Total",-1)])]),_:1}),e(t(_),{class:"text-2xl"},{default:o(()=>[r(u(d.estadisticas.total),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[6]||(s[6]=[r("Activos",-1)])]),_:1}),e(t(_),{class:"text-2xl text-green-600"},{default:o(()=>[r(u(d.estadisticas.activos),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[7]||(s[7]=[r("Finalizados",-1)])]),_:1}),e(t(_),{class:"text-2xl text-blue-600"},{default:o(()=>[r(u(d.estadisticas.finalizados),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[8]||(s[8]=[r("Vencidos",-1)])]),_:1}),e(t(_),{class:"text-2xl text-red-600"},{default:o(()=>[r(u(d.estadisticas.vencidos),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[9]||(s[9]=[r("Por Vencer",-1)])]),_:1}),e(t(_),{class:"text-2xl text-orange-600"},{default:o(()=>[r(u(d.estadisticas.proximos_vencer),1)]),_:1})]),_:1})]),_:1}),e(t(g),null,{default:o(()=>[e(t(x),{class:"pb-3"},{default:o(()=>[e(t(b),null,{default:o(()=>[...s[10]||(s[10]=[r("Monto Total",-1)])]),_:1}),e(t(_),{class:"text-xl"},{default:o(()=>{var a;return[r(" $"+u(((a=d.estadisticas.monto_total)==null?void 0:a.toLocaleString())||0),1)]}),_:1})]),_:1})]),_:1})]),d.estadisticas.vencidos>0?(l(),f(t(B),{key:0,class:"border-red-200 bg-red-50"},{default:o(()=>[e(t(W),{class:"h-4 w-4 text-red-600"}),e(t(M),{class:"text-red-800"},{default:o(()=>[r(" Tienes "+u(d.estadisticas.vencidos)+" contrato(s) vencido(s) que requieren atención. ",1),e(t(N),{href:y.route("user.mis-contratos.vencidos"),class:"font-medium underline ml-2"},{default:o(()=>[...s[11]||(s[11]=[r(" Ver contratos vencidos ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):F("",!0),d.estadisticas.proximos_vencer>0?(l(),f(t(B),{key:1,class:"border-orange-200 bg-orange-50"},{default:o(()=>[e(t(Y),{class:"h-4 w-4 text-orange-600"}),e(t(M),{class:"text-orange-800"},{default:o(()=>[r(u(d.estadisticas.proximos_vencer)+" contrato(s) vencerán en los próximos 30 días. ",1),e(t(N),{href:y.route("user.mis-contratos.proximos-vencer"),class:"font-medium underline ml-2"},{default:o(()=>[...s[12]||(s[12]=[r(" Ver próximos a vencer ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):F("",!0),e(t(X),{"default-value":C.value,"onUpdate:modelValue":D},{default:o(()=>[e(t(O),{class:"grid w-full grid-cols-5"},{default:o(()=>[e(t(h),{value:"todos"},{default:o(()=>[r(" Todos ("+u(c.value.todos.length)+") ",1)]),_:1}),e(t(h),{value:"activos"},{default:o(()=>[r(" Activos ("+u(c.value.activos.length)+") ",1)]),_:1}),e(t(h),{value:"finalizados"},{default:o(()=>[r(" Finalizados ("+u(c.value.finalizados.length)+") ",1)]),_:1}),e(t(h),{value:"borradores"},{default:o(()=>[r(" Borradores ("+u(c.value.borradores.length)+") ",1)]),_:1}),e(t(h),{value:"cancelados"},{default:o(()=>[r(" Cancelados ("+u(c.value.cancelados.length)+") ",1)]),_:1})]),_:1}),e(t(k),{value:"todos",class:"mt-6"},{default:o(()=>[d.contratos.data.length===0?(l(),i("div",rt,[e(t(A),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[13]||(s[13]=n("p",{class:"text-muted-foreground"}," No tienes contratos asignados ",-1))])):(l(),i("div",it,[(l(!0),i(v,null,p(d.contratos.data,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"activos",class:"mt-6"},{default:o(()=>[c.value.activos.length===0?(l(),i("div",dt,[e(t(L),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[14]||(s[14]=n("p",{class:"text-muted-foreground"}," No hay contratos activos ",-1))])):(l(),i("div",nt,[(l(!0),i(v,null,p(c.value.activos,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"finalizados",class:"mt-6"},{default:o(()=>[c.value.finalizados.length===0?(l(),i("div",ut,[e(t(L),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[15]||(s[15]=n("p",{class:"text-muted-foreground"}," No hay contratos finalizados ",-1))])):(l(),i("div",ct,[(l(!0),i(v,null,p(c.value.finalizados,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"borradores",class:"mt-6"},{default:o(()=>[c.value.borradores.length===0?(l(),i("div",mt,[e(t(A),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[16]||(s[16]=n("p",{class:"text-muted-foreground"}," No hay contratos en borrador ",-1))])):(l(),i("div",ft,[(l(!0),i(v,null,p(c.value.borradores,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1}),e(t(k),{value:"cancelados",class:"mt-6"},{default:o(()=>[c.value.cancelados.length===0?(l(),i("div",vt,[e(t(Z),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[17]||(s[17]=n("p",{class:"text-muted-foreground"}," No hay contratos cancelados ",-1))])):(l(),i("div",pt,[(l(!0),i(v,null,p(c.value.cancelados,a=>(l(),f(w,{key:a.id,contrato:a,"view-mode":"user"},null,8,["contrato"]))),128))]))]),_:1})]),_:1},8,["default-value"]),d.contratos.links&&d.contratos.links.length>3?(l(),i("div",gt,[n("nav",xt,[(l(!0),i(v,null,p(d.contratos.links,a=>(l(),f(t(N),{key:a.label,href:a.url,class:H(["px-3 py-2 rounded-md text-sm",a.active?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"]),innerHTML:a.label,"preserve-state":"","preserve-scroll":""},null,8,["href","class","innerHTML"]))),128))])])):F("",!0)])]),_:1}))}});export{ge as default};
