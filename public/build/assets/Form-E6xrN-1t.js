import{d as le,C as ie,r as X,c as k,m as re,b as g,e as n,w as t,g as i,f as s,t as u,u as e,P as Z,h as r,l as de,j as f,i as c,q as G,F as z,k as E,x as ne}from"./app-Dt2sukkq.js";import{_ as J}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BAX2dDyG.js";import{_ as j,a as S,b as A,c as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3D16Ztn.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-CpG721w4.js";import{c as me,_ as b}from"./createLucideIcon-ADYiFz1p.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-B3JXaiF3.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-DCZhrf2e.js";import{_ as pe}from"./Textarea.vue_vue_type_script_setup_true_lang-CU9dUjfW.js";import{_ as Q}from"./Switch.vue_vue_type_script_setup_true_lang-C5vqZ6z2.js";import{_ as ue,a as ce,b as fe,c as ve,d as be}from"./SelectValue.vue_vue_type_script_setup_true_lang-XTf0O-lR.js";import{_ as _e,a as ge}from"./index-Dgfn2Mhg.js";import{_ as W}from"./Separator.vue_vue_type_script_setup_true_lang-w4VkxSGc.js";import{t as h}from"./index-CTkeagVR.js";import{F as ye}from"./file-text-CrhgvIVS.js";import{H as xe}from"./hash-MWEq_BBv.js";import{C as Ce}from"./calendar-CJYt0g6k.js";import{L as ke}from"./list-CoVgyVD2.js";import{S as he}from"./square-check-big-DhrFbnJK.js";import{C as Ve}from"./circle-C6O6G82s.js";import{P as we}from"./paperclip-Bm6KtazX.js";import{X as $e}from"./x-BpcUsJXn.js";import{I as Y}from"./info-U4f4JV21.js";import{P as ze}from"./plus-C-zod1mM.js";import{T as Ee}from"./trash-2-Dt0_aFzc.js";import{S as je}from"./save-CPLxPeAL.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Dk5ovgNn.js";import"./index-DYtBqwXi.js";import"./floating-ui.vue-DhUnkJfc.js";import"./index-C_zthh-d.js";import"./shield-Cyievtug.js";import"./user-Ca0ja34E.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Ch_KWbnG.js";import"./chevron-right-CkT1ue1I.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-V01rVzxA.js";import"./VisuallyHidden-H3fpmsLx.js";import"./index-YHYyGAco.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CwNj20AO.js";import"./circle-alert-Bny28mZr.js";import"./map-pin-D1rtVCPc.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-TmplCPgM.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BlnKZeFr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-CLsbi7q1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BcP5joWp.js";import"./tag-euMStffd.js";import"./users-ARKz5o5z.js";import"./target-BlHWusLl.js";import"./vote-D-ho2Upj.js";import"./folder-open-BwpEZUDw.js";import"./send-D6GePUDU.js";import"./briefcase-CdnBkwVO.js";import"./megaphone-BWKT3hAA.js";import"./user-check-Cjdi1Rn1.js";import"./clipboard-list-DeVxPgd5.js";import"./mail-Cjqn3QRK.js";import"./message-square-CtTij58U.js";import"./external-link-GRGCmSzE.js";import"./panel-left-CvMlf3oX.js";import"./index-DZUQ23bj.js";import"./check-DzU-qwfx.js";import"./index-C5GM-A1h.js";import"./VisuallyHiddenInput-CTh2PJwg.js";import"./nullish-CHIgUVhi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=me("AlignLeftIcon",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]),Ae={class:"space-y-6 max-w-4xl mx-auto"},qe={class:"flex justify-between items-center"},Pe={class:"text-3xl font-bold tracking-tight"},Le={class:"space-y-2"},Ue={key:0,class:"text-sm text-destructive"},Ie={class:"space-y-2"},Ne={key:0,class:"text-sm text-destructive"},Te={class:"space-y-2"},De={class:"flex items-center justify-between"},Fe={key:0,class:"flex items-center gap-2"},Oe={class:"flex items-center gap-2"},Be={class:"text-xs text-muted-foreground"},Me={key:0,class:"text-sm text-destructive"},He={class:"space-y-1 mt-2"},Re={class:"space-y-2"},Ke={key:0,class:"text-sm text-destructive"},Xe={class:"space-y-2"},Ze={key:0,class:"text-sm text-destructive"},Ge={class:"flex gap-2"},Je={key:0,class:"space-y-2"},Qe={class:"flex-1"},We={class:"flex gap-1"},Ye={key:1,class:"text-center py-8 text-muted-foreground"},eo={class:"flex items-center justify-between"},oo={class:"space-y-0.5"},so={class:"flex items-center justify-between"},ao={class:"space-y-0.5"},to={class:"space-y-2"},lo={class:"space-y-2"},io={key:0,class:"text-sm text-destructive"},ro={class:"flex justify-end gap-2"},gs=le({layout:J,__name:"Form",props:{campo:{},isEdit:{type:Boolean},authPermissions:{}},setup(ee){var I,N,T,D,F,O,B,M,H,R;const m=ee,oe=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:"Campos Personalizados",href:"/admin/contratos/campos-personalizados"},{title:m.campo?"Editar Campo":"Crear Campo",href:m.campo?`/admin/contratos/campos-personalizados/${m.campo.id}/edit`:"/admin/contratos/campos-personalizados/create"}],a=ie({nombre:((I=m.campo)==null?void 0:I.nombre)||"",slug:((N=m.campo)==null?void 0:N.slug)||"",tipo:((T=m.campo)==null?void 0:T.tipo)||"text",descripcion:((D=m.campo)==null?void 0:D.descripcion)||"",placeholder:((F=m.campo)==null?void 0:F.placeholder)||"",es_requerido:((O=m.campo)==null?void 0:O.es_requerido)||!1,activo:((B=m.campo)==null?void 0:B.activo)!==void 0?m.campo.activo:!0,orden:((M=m.campo)==null?void 0:M.orden)||0,validacion:((H=m.campo)==null?void 0:H.validacion)||"",opciones:((R=m.campo)==null?void 0:R.opciones)||[]}),x=X(""),V=X(!1),w=k(()=>[{value:"text",label:"Texto",icon:ye,descripcion:"Campo de texto simple"},{value:"number",label:"Número",icon:xe,descripcion:"Campo numérico"},{value:"date",label:"Fecha",icon:Ce,descripcion:"Selector de fecha"},{value:"textarea",label:"Texto largo",icon:Se,descripcion:"Área de texto múltiples líneas"},{value:"select",label:"Selección",icon:ke,descripcion:"Lista desplegable de opciones"},{value:"checkbox",label:"Casillas",icon:he,descripcion:"Múltiple selección"},{value:"radio",label:"Radio",icon:Ve,descripcion:"Selección única"},{value:"file",label:"Archivo",icon:we,descripcion:"Carga de archivos"}]),se=k(()=>["select","checkbox","radio"].includes(a.tipo)),$=k(()=>w.value.find(d=>d.value===a.tipo)),p=k(()=>m.authPermissions.includes("contratos.manage_fields"));re(()=>a.nombre,d=>{!m.isEdit&&d&&(a.slug=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""))});const L=()=>{x.value.trim()&&(a.opciones||(a.opciones=[]),a.opciones.push(x.value.trim()),x.value="")},ae=d=>{a.opciones.splice(d,1)},U=(d,o)=>{const l=o==="arriba"?d-1:d+1;if(l>=0&&l<a.opciones.length){const C=a.opciones[d];a.opciones[d]=a.opciones[l],a.opciones[l]=C}},te=()=>{var d;m.isEdit?a.put(route("admin.campos-personalizados-contrato.update",(d=m.campo)==null?void 0:d.id),{onSuccess:()=>{h.success("Campo actualizado correctamente")},onError:o=>{h.error("Error al actualizar el campo")}}):a.post(route("admin.campos-personalizados-contrato.store"),{onSuccess:()=>{h.success("Campo creado correctamente")},onError:o=>{h.error("Error al crear el campo")}})};return(d,o)=>(n(),g(J,{breadcrumbs:oe},{default:t(()=>[i("div",Ae,[i("div",qe,[i("div",null,[i("h2",Pe,u(d.isEdit?"Editar":"Crear")+" Campo Personalizado ",1),o[11]||(o[11]=i("p",{class:"text-muted-foreground mt-2"}," Configura un campo adicional para los contratos ",-1))]),s(e(Z),{href:d.route("admin.campos-personalizados-contrato.index")},{default:t(()=>[s(e(b),{variant:"outline"},{default:t(()=>[s(e($e),{class:"w-4 h-4 mr-2"}),o[12]||(o[12]=r(" Cancelar ",-1))]),_:1})]),_:1},8,["href"])]),i("form",{onSubmit:de(te,["prevent"]),class:"space-y-6"},[s(e(j),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(A),null,{default:t(()=>[...o[13]||(o[13]=[r("Información Básica",-1)])]),_:1}),s(e(P),null,{default:t(()=>[...o[14]||(o[14]=[r(" Define el nombre y tipo del campo personalizado ",-1)])]),_:1})]),_:1}),s(e(q),{class:"space-y-4"},{default:t(()=>[i("div",Le,[s(e(v),{for:"nombre",required:""},{default:t(()=>[...o[15]||(o[15]=[r("Nombre del Campo",-1)])]),_:1}),s(e(y),{modelValue:e(a).nombre,"onUpdate:modelValue":o[0]||(o[0]=l=>e(a).nombre=l),id:"nombre",placeholder:"Ej: Número de Referencia",disabled:!p.value},null,8,["modelValue","disabled"]),e(a).errors.nombre?(n(),c("p",Ue,u(e(a).errors.nombre),1)):f("",!0)]),i("div",Ie,[s(e(v),{for:"slug",required:""},{default:t(()=>[...o[16]||(o[16]=[r("Identificador (Slug)",-1)])]),_:1}),s(e(y),{modelValue:e(a).slug,"onUpdate:modelValue":o[1]||(o[1]=l=>e(a).slug=l),id:"slug",placeholder:"numero_referencia",pattern:"[a-z0-9_]+",disabled:d.isEdit||!p.value},null,8,["modelValue","disabled"]),o[17]||(o[17]=i("p",{class:"text-xs text-muted-foreground"}," Identificador único del campo. Solo minúsculas, números y guiones bajos. ",-1)),e(a).errors.slug?(n(),c("p",Ne,u(e(a).errors.slug),1)):f("",!0)]),i("div",Te,[i("div",De,[s(e(v),{for:"tipo",required:""},{default:t(()=>[...o[18]||(o[18]=[r("Tipo de Campo",-1)])]),_:1}),s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:o[2]||(o[2]=l=>V.value=!V.value)},{default:t(()=>[s(e(Y),{class:"w-4 h-4"})]),_:1})]),s(e(ue),{modelValue:e(a).tipo,"onUpdate:modelValue":o[3]||(o[3]=l=>e(a).tipo=l),disabled:d.isEdit||!p.value},{default:t(()=>[s(e(ce),null,{default:t(()=>[s(e(fe),null,{default:t(()=>[$.value?(n(),c("div",Fe,[(n(),g(G($.value.icon),{class:"w-4 h-4"})),r(" "+u($.value.label),1)])):f("",!0)]),_:1})]),_:1}),s(e(ve),null,{default:t(()=>[(n(!0),c(z,null,E(w.value,l=>(n(),g(e(be),{key:l.value,value:l.value},{default:t(()=>[i("div",Oe,[(n(),g(G(l.icon),{class:"w-4 h-4"})),i("div",null,[i("div",null,u(l.label),1),i("div",Be,u(l.descripcion),1)])])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(a).errors.tipo?(n(),c("p",Me,u(e(a).errors.tipo),1)):f("",!0)]),V.value?(n(),g(e(_e),{key:0},{default:t(()=>[s(e(Y),{class:"h-4 w-4"}),s(e(ge),null,{default:t(()=>[i("ul",He,[(n(!0),c(z,null,E(w.value,l=>(n(),c("li",{key:l.value},[i("strong",null,u(l.label)+":",1),r(" "+u(l.descripcion),1)]))),128))])]),_:1})]),_:1})):f("",!0),i("div",Re,[s(e(v),{for:"descripcion"},{default:t(()=>[...o[19]||(o[19]=[r("Descripción",-1)])]),_:1}),s(e(pe),{modelValue:e(a).descripcion,"onUpdate:modelValue":o[4]||(o[4]=l=>e(a).descripcion=l),id:"descripcion",placeholder:"Descripción del campo para ayudar a los usuarios",rows:"3",disabled:!p.value},null,8,["modelValue","disabled"]),e(a).errors.descripcion?(n(),c("p",Ke,u(e(a).errors.descripcion),1)):f("",!0)]),i("div",Xe,[s(e(v),{for:"placeholder"},{default:t(()=>[...o[20]||(o[20]=[r("Texto de Ayuda (Placeholder)",-1)])]),_:1}),s(e(y),{modelValue:e(a).placeholder,"onUpdate:modelValue":o[5]||(o[5]=l=>e(a).placeholder=l),id:"placeholder",placeholder:"Ej: Ingrese el número de referencia",disabled:!p.value},null,8,["modelValue","disabled"]),e(a).errors.placeholder?(n(),c("p",Ze,u(e(a).errors.placeholder),1)):f("",!0)])]),_:1})]),_:1}),se.value?(n(),g(e(j),{key:0},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(A),null,{default:t(()=>[...o[21]||(o[21]=[r("Opciones",-1)])]),_:1}),s(e(P),null,{default:t(()=>[...o[22]||(o[22]=[r(" Define las opciones disponibles para este campo ",-1)])]),_:1})]),_:1}),s(e(q),{class:"space-y-4"},{default:t(()=>{var l;return[i("div",Ge,[s(e(y),{modelValue:x.value,"onUpdate:modelValue":o[6]||(o[6]=C=>x.value=C),placeholder:"Nueva opción",onKeyup:ne(L,["enter"]),disabled:!p.value},null,8,["modelValue","disabled"]),s(e(b),{type:"button",onClick:L,disabled:!p.value},{default:t(()=>[s(e(ze),{class:"w-4 h-4 mr-2"}),o[23]||(o[23]=r(" Agregar ",-1))]),_:1},8,["disabled"])]),((l=e(a).opciones)==null?void 0:l.length)>0?(n(),c("div",Je,[(n(!0),c(z,null,E(e(a).opciones,(C,_)=>(n(),c("div",{key:_,class:"flex items-center gap-2 p-2 bg-muted rounded-lg"},[i("span",Qe,u(C),1),i("div",We,[s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:K=>U(_,"arriba"),disabled:_===0||!p.value,class:"h-8 w-8 p-0"},{default:t(()=>[...o[24]||(o[24]=[r(" ↑ ",-1)])]),_:2},1032,["onClick","disabled"]),s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:K=>U(_,"abajo"),disabled:_===e(a).opciones.length-1||!p.value,class:"h-8 w-8 p-0"},{default:t(()=>[...o[25]||(o[25]=[r(" ↓ ",-1)])]),_:2},1032,["onClick","disabled"]),s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:K=>ae(_),disabled:!p.value,class:"text-destructive h-8 w-8 p-0"},{default:t(()=>[s(e(Ee),{class:"w-4 h-4"})]),_:2},1032,["onClick","disabled"])])]))),128))])):(n(),c("div",Ye," No hay opciones configuradas "))]}),_:1})]),_:1})):f("",!0),s(e(j),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(A),null,{default:t(()=>[...o[26]||(o[26]=[r("Configuración Avanzada",-1)])]),_:1}),s(e(P),null,{default:t(()=>[...o[27]||(o[27]=[r(" Opciones adicionales de validación y comportamiento ",-1)])]),_:1})]),_:1}),s(e(q),{class:"space-y-4"},{default:t(()=>[i("div",eo,[i("div",oo,[s(e(v),null,{default:t(()=>[...o[28]||(o[28]=[r("Campo Requerido",-1)])]),_:1}),o[29]||(o[29]=i("p",{class:"text-sm text-muted-foreground"}," El campo debe ser completado obligatoriamente ",-1))]),s(e(Q),{checked:e(a).es_requerido,"onUpdate:checked":o[7]||(o[7]=l=>e(a).es_requerido=l),disabled:!p.value},null,8,["checked","disabled"])]),s(e(W)),i("div",so,[i("div",ao,[s(e(v),null,{default:t(()=>[...o[30]||(o[30]=[r("Campo Activo",-1)])]),_:1}),o[31]||(o[31]=i("p",{class:"text-sm text-muted-foreground"}," El campo será visible en los formularios ",-1))]),s(e(Q),{checked:e(a).activo,"onUpdate:checked":o[8]||(o[8]=l=>e(a).activo=l),disabled:!p.value},null,8,["checked","disabled"])]),s(e(W)),i("div",to,[s(e(v),{for:"orden"},{default:t(()=>[...o[32]||(o[32]=[r("Orden de Aparición",-1)])]),_:1}),s(e(y),{modelValue:e(a).orden,"onUpdate:modelValue":o[9]||(o[9]=l=>e(a).orden=l),modelModifiers:{number:!0},id:"orden",type:"number",min:"0",placeholder:"0",disabled:!p.value},null,8,["modelValue","disabled"]),o[33]||(o[33]=i("p",{class:"text-xs text-muted-foreground"}," Los campos se ordenan de menor a mayor. Campos con el mismo orden se muestran alfabéticamente. ",-1))]),i("div",lo,[s(e(v),{for:"validacion"},{default:t(()=>[...o[34]||(o[34]=[r("Reglas de Validación (Avanzado)",-1)])]),_:1}),s(e(y),{modelValue:e(a).validacion,"onUpdate:modelValue":o[10]||(o[10]=l=>e(a).validacion=l),id:"validacion",placeholder:"min:10|max:100",disabled:!p.value},null,8,["modelValue","disabled"]),o[35]||(o[35]=i("p",{class:"text-xs text-muted-foreground"}," Reglas de validación Laravel. Ej: min:5|max:100|regex:/^[A-Z]/ ",-1)),e(a).errors.validacion?(n(),c("p",io,u(e(a).errors.validacion),1)):f("",!0)])]),_:1})]),_:1}),i("div",ro,[s(e(Z),{href:d.route("admin.campos-personalizados-contrato.index")},{default:t(()=>[s(e(b),{type:"button",variant:"outline"},{default:t(()=>[...o[36]||(o[36]=[r(" Cancelar ",-1)])]),_:1})]),_:1},8,["href"]),s(e(b),{type:"submit",disabled:e(a).processing||!p.value},{default:t(()=>[s(e(je),{class:"w-4 h-4 mr-2"}),r(" "+u(d.isEdit?"Actualizar":"Crear")+" Campo ",1)]),_:1},8,["disabled"])])],32)])]),_:1}))}});export{gs as default};
