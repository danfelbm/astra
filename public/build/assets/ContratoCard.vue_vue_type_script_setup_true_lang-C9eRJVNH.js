import{d as R,c as k,b as h,w as l,e as s,f as e,j as d,n as i,g as a,i as r,h as m,t as c,l as y,v as $,y as S,F as T,m as o,s as C}from"./app-DE5myA8s.js";import{_ as V,a as A,b as D,c as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-B2LYPx5G.js";import{_ as q}from"./CardFooter.vue_vue_type_script_setup_true_lang-DlUaVMU1.js";import{_ as b}from"./index-ND6YvCgc.js";import{_ as g}from"./createLucideIcon-D0F8u7OI.js";import{C as w}from"./calendar-Brt5wRWj.js";import{D as P}from"./dollar-sign-C6hicJSd.js";import{U as j}from"./user-DoH3zMqC.js";import{C as E}from"./circle-alert-DEgW0MIB.js";import{F as N}from"./file-text-C16y7GNx.js";import{E as M}from"./eye-DsyDO1oh.js";import{S as U}from"./square-pen-CbX22wEz.js";import{A as L}from"./arrow-right-C12uHNhb.js";const G={class:"flex items-start justify-between"},H={class:"flex-1"},J=["href"],K={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},O={class:"flex items-center gap-2"},Q={class:"ml-1 font-medium"},W={class:"flex items-center gap-2"},X={class:"ml-1 font-medium"},Y={key:0,class:"flex items-center gap-2"},Z={class:"font-medium"},p={key:1,class:"flex items-center gap-2"},_={class:"truncate"},tt={key:0,class:"flex items-center gap-2"},et={key:0,class:"text-gray-600 dark:text-gray-400"},at={class:"truncate font-medium"},st={key:1,class:"flex items-center gap-3 text-xs text-gray-500"},ot={class:"flex items-center gap-1"},nt={key:0},ct={key:1,class:"flex items-center gap-1"},it={key:3,class:"flex items-center gap-2"},rt={key:4},lt={class:"flex justify-between text-xs text-gray-600 mb-1"},dt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},mt={class:"flex items-center justify-between"},ut={key:0,class:"flex gap-2"},ft={class:"flex items-start justify-between"},yt={class:"flex-1"},xt={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},gt={class:"flex items-center gap-2"},vt={class:"ml-1 font-medium"},ht={class:"flex items-center gap-2"},wt={class:"ml-1 font-medium"},bt={key:0,class:"flex items-center gap-2"},kt={class:"font-medium"},$t={key:1,class:"flex items-center gap-2"},Ct={class:"truncate"},jt={key:2,class:"flex items-center gap-2"},Mt={key:3},zt={class:"flex justify-between text-xs text-gray-600 mb-1"},Bt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},St={class:"flex items-center justify-between"},Vt={key:0,class:"flex gap-2"},Ht=R({__name:"ContratoCard",props:{contrato:{},showProyecto:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},viewMode:{default:"admin"},compact:{type:Boolean,default:!1}},setup(t){const u=t,z=k(()=>({borrador:"bg-gray-100 text-gray-800",activo:"bg-green-100 text-green-800",finalizado:"bg-blue-100 text-blue-800",cancelado:"bg-red-100 text-red-800"})[u.contrato.estado]||"bg-gray-100 text-gray-800"),B=k(()=>u.contrato.estado==="cancelado"?"bg-red-500":u.contrato.estado==="finalizado"?"bg-blue-500":u.contrato.esta_vencido?"bg-red-500":u.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),x=f=>f?new Date(f).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",I=k(()=>u.viewMode==="user"?`/miembro/mis-contratos/${u.contrato.id}`:`/admin/contratos/${u.contrato.id}`);return(f,n)=>t.viewMode==="user"?(o(),h(e($),{key:0,href:I.value,class:"block"},{default:l(()=>[s(e(V),{class:"hover:shadow-lg transition-all duration-300 cursor-pointer hover:border-primary"},{default:l(()=>[s(e(A),{class:i(t.compact?"pb-3":"")},{default:l(()=>[a("div",G,[a("div",H,[s(e(D),{class:i([t.compact?"text-base":"text-lg","font-semibold mb-1"])},{default:l(()=>[m(c(t.contrato.nombre),1)]),_:1},8,["class"]),t.showProyecto&&t.contrato.proyecto?(o(),r("div",{key:0,class:i([t.compact?"text-xs":"text-sm","text-gray-600 dark:text-gray-400"])},[t.viewMode==="user"?(o(),r("a",{key:0,href:`/miembro/mis-proyectos/${t.contrato.proyecto.id}`,class:"hover:text-primary transition-colors",onClick:n[0]||(n[0]=y(v=>e(C).visit(`/miembro/mis-proyectos/${t.contrato.proyecto.id}`),["stop","prevent"]))},c(t.contrato.proyecto.nombre),9,J)):(o(),h(e($),{key:1,href:`/admin/proyectos/${t.contrato.proyecto.id}`,class:"hover:text-primary transition-colors"},{default:l(()=>[m(c(t.contrato.proyecto.nombre),1)]),_:1},8,["href"]))],2)):d("",!0)]),s(e(b),{class:i([z.value,t.compact?"text-xs px-2 py-0.5":""])},{default:l(()=>[m(c(t.contrato.estado),1)]),_:1},8,["class"])])]),_:1},8,["class"]),s(e(F),{class:i(t.compact?"space-y-2 pt-0":"space-y-4")},{default:l(()=>[t.contrato.descripcion&&!t.compact?(o(),r("p",K,c(t.contrato.descripcion),1)):d("",!0),t.viewMode==="admin"?(o(),r("div",{key:1,class:i(["grid grid-cols-2 text-sm",t.compact?"gap-2":"gap-3"])},[a("div",O,[s(e(w),{class:"h-4 w-4 text-gray-400"}),a("div",null,[n[7]||(n[7]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Inicio:",-1)),a("span",Q,c(x(t.contrato.fecha_inicio)),1)])]),a("div",W,[s(e(w),{class:"h-4 w-4 text-gray-400"}),a("div",null,[n[8]||(n[8]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Fin:",-1)),a("span",X,c(x(t.contrato.fecha_fin)),1)])]),t.contrato.monto_formateado?(o(),r("div",Y,[s(e(P),{class:"h-4 w-4 text-gray-400"}),a("span",Z,c(t.contrato.monto_formateado),1)])):d("",!0),t.contrato.responsable?(o(),r("div",p,[s(e(j),{class:"h-4 w-4 text-gray-400"}),a("span",_,c(t.contrato.responsable.name),1)])):d("",!0)],2)):t.viewMode==="user"?(o(),r("div",{key:2,class:i(t.compact?"text-xs space-y-1":"text-sm")},[t.contrato.responsable?(o(),r("div",tt,[s(e(j),{class:i([t.compact?"h-3 w-3":"h-4 w-4","text-gray-400"])},null,8,["class"]),t.compact?d("",!0):(o(),r("span",et,"Responsable:")),a("span",at,c(t.contrato.responsable.name),1)])):d("",!0),t.compact?(o(),r("div",st,[a("div",ot,[s(e(w),{class:"h-3 w-3"}),a("span",null,c(x(t.contrato.fecha_inicio)),1)]),t.contrato.fecha_fin?(o(),r("span",nt,"→")):d("",!0),t.contrato.fecha_fin?(o(),r("div",ct,[a("span",null,c(x(t.contrato.fecha_fin)),1)])):d("",!0)])):d("",!0)],2)):d("",!0),t.contrato.esta_vencido||t.contrato.esta_proximo_vencer?(o(),r("div",it,[s(e(E),{class:i(["h-4 w-4",t.contrato.esta_vencido?"text-red-500":"text-yellow-500"])},null,8,["class"]),a("span",{class:i(["text-sm font-medium",t.contrato.esta_vencido?"text-red-600":"text-yellow-600"])},c(t.contrato.esta_vencido?"Contrato vencido":`Vence en ${t.contrato.dias_restantes} días`),3)])):d("",!0),!t.compact&&t.contrato.estado==="activo"&&t.contrato.porcentaje_transcurrido!==void 0?(o(),r("div",rt,[a("div",lt,[n[9]||(n[9]=a("span",null,"Progreso",-1)),a("span",null,c(t.contrato.porcentaje_transcurrido)+"%",1)]),a("div",dt,[a("div",{class:i([B.value,"h-2 rounded-full transition-all duration-300"]),style:S({width:`${t.contrato.porcentaje_transcurrido}%`})},null,6)])])):d("",!0),a("div",mt,[s(e(b),{variant:"outline",class:i(t.compact?"text-xs py-0.5":"text-xs")},{default:l(()=>[s(e(N),{class:i(t.compact?"h-2.5 w-2.5 mr-1":"h-3 w-3 mr-1")},null,8,["class"]),m(" "+c(t.contrato.tipo),1)]),_:1},8,["class"]),t.showActions&&(t.viewMode==="admin"||!t.compact)?(o(),r("div",ut,[t.viewMode==="user"?(o(),h(e(g),{key:0,size:"sm",variant:"ghost",onClick:n[1]||(n[1]=y(v=>f.$inertia.get(`/miembro/mis-contratos/${t.contrato.id}`),["stop"]))},{default:l(()=>[s(e(M),{class:"h-4 w-4"})]),_:1})):(o(),r(T,{key:1},[s(e(g),{size:"sm",variant:"ghost",onClick:n[2]||(n[2]=y(v=>f.$inertia.get(`/admin/contratos/${t.contrato.id}`),["stop"]))},{default:l(()=>[s(e(M),{class:"h-4 w-4"})]),_:1}),s(e(g),{size:"sm",variant:"ghost",onClick:n[3]||(n[3]=y(v=>f.$inertia.get(`/admin/contratos/${t.contrato.id}/edit`),["stop"]))},{default:l(()=>[s(e(U),{class:"h-4 w-4"})]),_:1})],64))])):d("",!0)])]),_:1},8,["class"]),t.viewMode==="user"?(o(),h(e(q),{key:0,class:"pt-0"},{default:l(()=>[s(e(g),{variant:"outline",class:"w-full group",onClick:n[4]||(n[4]=y(()=>{},["stop"]))},{default:l(()=>[n[10]||(n[10]=m(" Ver detalles ",-1)),s(e(L),{class:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]),_:1})]),_:1})):d("",!0)]),_:1})]),_:1},8,["href"])):(o(),h(e(V),{key:1,class:"hover:shadow-lg transition-all duration-300"},{default:l(()=>[s(e(A),{class:i(t.compact?"pb-3":"")},{default:l(()=>[a("div",ft,[a("div",yt,[s(e(D),{class:i([t.compact?"text-base":"text-lg","font-semibold mb-1"])},{default:l(()=>[m(c(t.contrato.nombre),1)]),_:1},8,["class"]),t.showProyecto&&t.contrato.proyecto?(o(),r("div",{key:0,class:i([t.compact?"text-xs":"text-sm","text-gray-600 dark:text-gray-400"])},[s(e($),{href:`/admin/proyectos/${t.contrato.proyecto.id}`,class:"hover:text-primary transition-colors"},{default:l(()=>[m(c(t.contrato.proyecto.nombre),1)]),_:1},8,["href"])],2)):d("",!0)]),s(e(b),{class:i([z.value,t.compact?"text-xs px-2 py-0.5":""])},{default:l(()=>[m(c(t.contrato.estado),1)]),_:1},8,["class"])])]),_:1},8,["class"]),s(e(F),{class:i(t.compact?"space-y-2 pt-0":"space-y-4")},{default:l(()=>[t.contrato.descripcion&&!t.compact?(o(),r("p",xt,c(t.contrato.descripcion),1)):d("",!0),t.viewMode==="admin"?(o(),r("div",{key:1,class:i(["grid grid-cols-2 text-sm",t.compact?"gap-2":"gap-3"])},[a("div",gt,[s(e(w),{class:"h-4 w-4 text-gray-400"}),a("div",null,[n[11]||(n[11]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Inicio:",-1)),a("span",vt,c(x(t.contrato.fecha_inicio)),1)])]),a("div",ht,[s(e(w),{class:"h-4 w-4 text-gray-400"}),a("div",null,[n[12]||(n[12]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Fin:",-1)),a("span",wt,c(x(t.contrato.fecha_fin)),1)])]),t.contrato.monto_formateado?(o(),r("div",bt,[s(e(P),{class:"h-4 w-4 text-gray-400"}),a("span",kt,c(t.contrato.monto_formateado),1)])):d("",!0),t.contrato.responsable?(o(),r("div",$t,[s(e(j),{class:"h-4 w-4 text-gray-400"}),a("span",Ct,c(t.contrato.responsable.name),1)])):d("",!0)],2)):d("",!0),t.contrato.esta_vencido||t.contrato.esta_proximo_vencer?(o(),r("div",jt,[s(e(E),{class:i(["h-4 w-4",t.contrato.esta_vencido?"text-red-500":"text-yellow-500"])},null,8,["class"]),a("span",{class:i(["text-sm font-medium",t.contrato.esta_vencido?"text-red-600":"text-yellow-600"])},c(t.contrato.esta_vencido?"Contrato vencido":`Vence en ${t.contrato.dias_restantes} días`),3)])):d("",!0),!t.compact&&t.contrato.estado==="activo"&&t.contrato.porcentaje_transcurrido!==void 0?(o(),r("div",Mt,[a("div",zt,[n[13]||(n[13]=a("span",null,"Progreso",-1)),a("span",null,c(t.contrato.porcentaje_transcurrido)+"%",1)]),a("div",Bt,[a("div",{class:i([B.value,"h-2 rounded-full transition-all duration-300"]),style:S({width:`${t.contrato.porcentaje_transcurrido}%`})},null,6)])])):d("",!0),a("div",St,[s(e(b),{variant:"outline",class:i(t.compact?"text-xs py-0.5":"text-xs")},{default:l(()=>[s(e(N),{class:i(t.compact?"h-2.5 w-2.5 mr-1":"h-3 w-3 mr-1")},null,8,["class"]),m(" "+c(t.contrato.tipo),1)]),_:1},8,["class"]),t.showActions?(o(),r("div",Vt,[s(e(g),{size:"sm",variant:"ghost",onClick:n[5]||(n[5]=y(v=>e(C).visit(`/admin/contratos/${t.contrato.id}`),["stop"]))},{default:l(()=>[s(e(M),{class:"h-4 w-4"})]),_:1}),s(e(g),{size:"sm",variant:"ghost",onClick:n[6]||(n[6]=y(v=>e(C).visit(`/admin/contratos/${t.contrato.id}/edit`),["stop"]))},{default:l(()=>[s(e(U),{class:"h-4 w-4"})]),_:1})])):d("",!0)])]),_:1},8,["class"])]),_:1}))}});export{Ht as _};
