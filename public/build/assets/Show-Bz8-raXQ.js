import{c as R,_ as x}from"./createLucideIcon-tZKQ8FV-.js";import{_ as j,a as V,b as z,c as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-By0rrIVN.js";import{_ as f}from"./index-BF1JDgfE.js";import{_ as O,a as B,b as E}from"./index-BgOZXF3v.js";import{_ as F,a as T,b as $,c as C,d as q,e as L}from"./TableHeader.vue_vue_type_script_setup_true_lang-DVyMhRir.js";import{e as H,_ as J,a as W,b as K,c as Q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DWo8uhvu.js";import{_ as X}from"./AdminLayout.vue_vue_type_script_setup_true_lang-a0Yimc9j.js";import{d as Y,r as _,b as m,w as a,e as s,g as o,f as e,q as Z,t as l,h as i,i as p,j as c,m as n,n as tt,F as et,k as st,s as A,a as at}from"./app-BFqKuHja.js";import{t as w}from"./index-D11OkfIY.js";import{A as ot}from"./arrow-left-CIWApkUE.js";import{M as rt}from"./message-square-BfcC0tAy.js";import{L as D}from"./lock-BeS_piUp.js";import{V as it}from"./volume-2-CO7IniLO.js";import{R as nt}from"./refresh-cw-BqbLQJ8a.js";import{U as lt}from"./users-CymRd8l_.js";import{L as dt}from"./loader-circle-C_8YyK-M.js";import{S as ut}from"./shield-97w7M3te.js";import{U as mt}from"./user-BAyKQNNj.js";import"./index-F5rpf4iw.js";import"./index-C8QA5EYi.js";import"./floating-ui.vue-BMPmqikX.js";import"./VisuallyHidden-DP9KERvz.js";import"./Input.vue_vue_type_script_setup_true_lang-BV39iPGt.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Rq0QpW8I.js";import"./check-C0Px08fC.js";import"./x-Bmm2Newm.js";import"./useFlashMessages-Rq45FhUU.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-FLlUFPmJ.js";import"./chevron-right-Cw5c0nod.js";import"./house-ChRKKXPV.js";import"./Label.vue_vue_type_script_setup_true_lang-Dqhxdf2C.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BEi-RCnv.js";import"./circle-alert-B3cw7wFG.js";import"./map-pin-C_udGJei.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-_5gfTs1o.js";import"./chevrons-up-down-BeNxFT55.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CG0Gldao.js";import"./target-BJiaG4BP.js";import"./vote-Xnz8P6lY.js";import"./folder-open-BYgWiTs_.js";import"./send-B8eSg7eS.js";import"./file-text-BGYDQgob.js";import"./briefcase-BxbIIMmV.js";import"./calendar-TQY1ssum.js";import"./megaphone-i8HADNBc.js";import"./user-check-D1WCGWxM.js";import"./clipboard-list-DmGkpb4E.js";import"./mail-DplI3j6U.js";import"./external-link-e9aSyS64.js";import"./panel-left-DIEiSQw2.js";import"./index-BY2HrsFe.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=R("CrownIcon",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),pt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ct={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},gt={class:"flex items-center gap-4"},vt={class:"text-3xl font-bold"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_t={class:"flex items-start gap-4"},wt={class:"space-y-4"},ht={class:"flex gap-4"},yt={class:"font-medium"},bt={class:"flex gap-4"},kt={class:"flex gap-4"},$t={class:"text-xs bg-muted px-2 py-1 rounded"},Ct={key:0,class:"flex gap-4"},Lt={class:"text-sm whitespace-pre-wrap"},At={class:"flex gap-4"},Dt={class:"font-medium"},St={key:1,class:"flex gap-4"},Nt={class:"text-xs bg-muted px-2 py-1 rounded"},Pt={key:2,class:"flex gap-4"},Ut={class:"text-sm"},Gt={class:"flex gap-4"},Mt={class:"flex gap-2"},Rt={class:"flex gap-2 mt-6 pt-6 border-t"},jt={class:"flex-1 overflow-auto"},Vt={key:0,class:"flex items-center justify-center py-8"},zt={class:"text-xs"},It={key:2,class:"text-muted-foreground text-sm"},Ot={key:2,class:"text-center py-8 text-muted-foreground"},ze=Y({__name:"Show",props:{grupo:{}},setup(r){const h=r,S=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/envio-campanas"},{title:"Grupos de WhatsApp",href:"/admin/whatsapp-groups"},{title:h.grupo.nombre,href:"#"}],v=_(!1),y=_(!1),b=_(!1),g=_([]),N=()=>{v.value=!0,A.post(`/admin/whatsapp-groups/${h.grupo.id}/refresh`,{},{preserveScroll:!0,onSuccess:()=>{w.success("Datos del grupo actualizados")},onError:()=>{w.error("Error al actualizar")},onFinish:()=>{v.value=!1}})},P=async()=>{y.value=!0,g.value=[],b.value=!0;try{const d=await at.get(`/admin/whatsapp-groups/${h.grupo.id}/participants`);d.data.success?g.value=d.data.participantes||[]:w.error(d.data.message||"Error al obtener participantes")}catch{w.error("Error al obtener participantes")}finally{y.value=!1}},U=d=>d.replace("@s.whatsapp.net","").replace("@lid",""),G=d=>d?new Date(d*1e3).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",k=()=>{A.visit("/admin/whatsapp-groups")};return(d,t)=>(n(),m(X,{breadcrumbs:S},{default:a(()=>[s(e(Z),{title:r.grupo.nombre},null,8,["title"]),o("div",pt,[o("div",ct,[o("div",gt,[s(e(x),{variant:"outline",size:"icon",onClick:k},{default:a(()=>[s(e(ot),{class:"h-4 w-4"})]),_:1}),o("div",null,[o("h1",vt,l(r.grupo.nombre),1),s(e(f),{variant:r.grupo.tipo==="comunidad"?"default":"secondary",class:"mt-1"},{default:a(()=>[i(l(r.grupo.tipo==="comunidad"?"COMUNIDAD":"GRUPO"),1)]),_:1},8,["variant"])])]),s(e(x),{variant:"outline",onClick:k},{default:a(()=>[...t[1]||(t[1]=[i(" Volver a grupos ",-1)])]),_:1})]),s(e(j),null,{default:a(()=>[s(e(V),null,{default:a(()=>[s(e(z),null,{default:a(()=>[...t[2]||(t[2]=[i("Información del Grupo",-1)])]),_:1})]),_:1}),s(e(I),null,{default:a(()=>{var u;return[o("div",xt,[o("div",_t,[t[3]||(t[3]=o("div",{class:"space-y-1 text-sm text-muted-foreground w-24"},"Avatar",-1)),s(e(O),{class:"h-24 w-24"},{default:a(()=>[s(e(B),{src:r.grupo.avatar_url||void 0},null,8,["src"]),s(e(E),{class:"text-2xl"},{default:a(()=>[s(e(rt),{class:"h-10 w-10"})]),_:1})]),_:1})]),o("div",wt,[o("div",ht,[t[4]||(t[4]=o("div",{class:"text-sm text-muted-foreground w-24"},"Nombre",-1)),o("div",yt,l(r.grupo.nombre),1)]),o("div",bt,[t[5]||(t[5]=o("div",{class:"text-sm text-muted-foreground w-24"},"Tipo",-1)),s(e(f),{variant:r.grupo.tipo==="comunidad"?"default":"secondary"},{default:a(()=>[i(l(r.grupo.tipo==="comunidad"?"COMUNIDAD":"GRUPO"),1)]),_:1},8,["variant"])]),o("div",kt,[t[6]||(t[6]=o("div",{class:"text-sm text-muted-foreground w-24"},"Group ID",-1)),o("code",$t,l(r.grupo.group_jid),1)]),r.grupo.descripcion?(n(),p("div",Ct,[t[7]||(t[7]=o("div",{class:"text-sm text-muted-foreground w-24"},"Descripción",-1)),o("div",Lt,l(r.grupo.descripcion),1)])):c("",!0),o("div",At,[t[8]||(t[8]=o("div",{class:"text-sm text-muted-foreground w-24"},"Participantes",-1)),o("div",Dt,l(r.grupo.participantes_count.toLocaleString()),1)]),r.grupo.owner_jid?(n(),p("div",St,[t[9]||(t[9]=o("div",{class:"text-sm text-muted-foreground w-24"},"Creador",-1)),o("code",Nt,l(r.grupo.owner_jid),1)])):c("",!0),(u=r.grupo.metadata)!=null&&u.creation?(n(),p("div",Pt,[t[10]||(t[10]=o("div",{class:"text-sm text-muted-foreground w-24"},"Fecha de creación",-1)),o("div",Ut,l(G(r.grupo.metadata.creation)),1)])):c("",!0),o("div",Gt,[t[14]||(t[14]=o("div",{class:"text-sm text-muted-foreground w-24"},"Restricciones",-1)),o("div",Mt,[!r.grupo.is_restrict&&!r.grupo.is_announce?(n(),m(e(f),{key:0,variant:"outline",class:"text-green-600"},{default:a(()=>[s(e(D),{class:"h-3 w-3 mr-1"}),t[11]||(t[11]=i(" Abierto ",-1))]),_:1})):c("",!0),r.grupo.is_restrict?(n(),m(e(f),{key:1,variant:"outline",class:"text-yellow-600"},{default:a(()=>[s(e(D),{class:"h-3 w-3 mr-1"}),t[12]||(t[12]=i(" Restringido ",-1))]),_:1})):c("",!0),r.grupo.is_announce?(n(),m(e(f),{key:2,variant:"outline",class:"text-orange-600"},{default:a(()=>[s(e(it),{class:"h-3 w-3 mr-1"}),t[13]||(t[13]=i(" Solo anuncios ",-1))]),_:1})):c("",!0)])])])]),o("div",Rt,[s(e(x),{variant:"outline",onClick:N,disabled:v.value},{default:a(()=>[s(e(nt),{class:tt(["h-4 w-4 mr-2",{"animate-spin":v.value}])},null,8,["class"]),t[15]||(t[15]=i(" Actualizar Datos del Grupo ",-1))]),_:1},8,["disabled"]),s(e(x),{variant:"outline",onClick:P},{default:a(()=>[s(e(lt),{class:"h-4 w-4 mr-2"}),t[16]||(t[16]=i(" Obtener Participantes ",-1))]),_:1})])]}),_:1})]),_:1})]),s(e(H),{open:b.value,"onUpdate:open":t[0]||(t[0]=u=>b.value=u)},{default:a(()=>[s(e(J),{class:"sm:max-w-lg max-h-[80vh] overflow-hidden flex flex-col"},{default:a(()=>[s(e(W),null,{default:a(()=>[s(e(K),null,{default:a(()=>[...t[17]||(t[17]=[i("Participantes del Grupo",-1)])]),_:1}),s(e(Q),null,{default:a(()=>[i(l(r.grupo.nombre)+" - "+l(g.value.length)+" participantes ",1)]),_:1})]),_:1}),o("div",jt,[y.value?(n(),p("div",Vt,[s(e(dt),{class:"h-8 w-8 animate-spin text-muted-foreground"})])):g.value.length>0?(n(),m(e(F),{key:1},{default:a(()=>[s(e(T),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(C),null,{default:a(()=>[...t[18]||(t[18]=[i("Número",-1)])]),_:1}),s(e(C),null,{default:a(()=>[...t[19]||(t[19]=[i("Rol",-1)])]),_:1})]),_:1})]),_:1}),s(e(q),null,{default:a(()=>[(n(!0),p(et,null,st(g.value,(u,M)=>(n(),m(e($),{key:M},{default:a(()=>[s(e(L),null,{default:a(()=>[o("code",zt,l(U(u.id)),1)]),_:2},1024),s(e(L),null,{default:a(()=>[u.admin==="superadmin"?(n(),m(e(f),{key:0,variant:"default"},{default:a(()=>[s(e(ft),{class:"h-3 w-3 mr-1"}),t[20]||(t[20]=i(" Super Admin ",-1))]),_:1})):u.admin==="admin"?(n(),m(e(f),{key:1,variant:"secondary"},{default:a(()=>[s(e(ut),{class:"h-3 w-3 mr-1"}),t[21]||(t[21]=i(" Admin ",-1))]),_:1})):(n(),p("span",It,[s(e(mt),{class:"h-3 w-3 inline mr-1"}),t[22]||(t[22]=i(" Miembro ",-1))]))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(n(),p("div",Ot," No se pudieron obtener los participantes "))])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{ze as default};
