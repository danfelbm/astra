import{d as j,C as A,k as P,a as n,o as a,b as t,u as e,m as z,e as s,f as d,P as $,g as l,h as F,i as u,n as _,t as m,F as x,r as C,j as G}from"./app-DqKZ5Wz7.js";import{_ as L}from"./AdminLayout.vue_vue_type_script_setup_true_lang-fveCc14-.js";import{_ as v}from"./createLucideIcon-KFE7syiO.js";import{_ as g,a as y,b,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-CN0b8aQn.js";import{_ as k}from"./CardDescription.vue_vue_type_script_setup_true_lang-B8lw3_EG.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-U-qwaLrD.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-Cje20kZJ.js";import{_ as T,a as E,b as I,c as J,d as S}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dn9OoszL.js";import{_ as M}from"./Switch.vue_vue_type_script_setup_true_lang-D8w-ftoP.js";import{_ as O}from"./Checkbox.vue_vue_type_script_setup_true_lang-BOuIbXwM.js";import{_ as q}from"./GeographicSelector.vue_vue_type_script_setup_true_lang-DGSFmeWZ.js";import{A as H}from"./arrow-left-BTd8Sayi.js";import{S as K}from"./save-DsVHHTi8.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BKhtAyxl.js";import"./index-BIzVC0TP.js";import"./floating-ui.vue-Cm6YcwoY.js";import"./x-Bs9-R129.js";import"./index-DvhUlPUl.js";import"./shield-DhJbDMcO.js";import"./user-Gsqassl9.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DHIjWrvU.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CiY3PZ_R.js";import"./VisuallyHidden-DhSNSZJA.js";import"./PopperContent-7RK6tFf7.js";import"./index-BFU_riFM.js";import"./index-CaAezHuM.js";import"./circle-alert-CMhwu9EW.js";import"./map-pin-rXiasNGw.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-BtyPsq9D.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DSZ6qqV1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-CnNP4FiN.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D52wRRsH.js";import"./users-P9xvkXAv.js";import"./vote-C-WFsbZV.js";import"./file-text-D5VHUHgS.js";import"./calendar-CMEvw6e_.js";import"./briefcase-CEQDaUQQ.js";import"./megaphone-jCd_R-vA.js";import"./user-check-Bvq2oHxc.js";import"./external-link-Cng4HhYB.js";import"./panel-left-Bx6L8vhc.js";import"./index-ESAugIes.js";import"./check-CnbpPKEV.js";import"./index-E7PfZ8n3.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHiddenInput-Ckjc7qhO.js";const Q={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},W={class:"flex items-center justify-between"},X={class:"grid gap-4 md:grid-cols-2"},Y={key:0,class:"text-sm text-red-600 mt-1"},Z={key:0,class:"text-sm text-red-600 mt-1"},h={key:0,class:"text-sm text-red-600 mt-1"},ee={key:0,class:"text-sm text-red-600 mt-1"},oe={key:0,class:"text-sm text-red-600 mt-1"},re={class:"grid gap-4 md:grid-cols-2"},te={key:0,class:"text-sm text-red-600 mt-1"},se={key:0,class:"text-sm text-red-600 mt-1"},ie={class:"space-y-4"},de={key:0},le={class:"space-y-2 max-h-64 overflow-y-auto border rounded-lg p-4"},ae={class:"flex-1"},ne={key:0,class:"text-sm text-muted-foreground"},me={key:1,class:"text-xs text-blue-600"},ue={key:0,class:"text-sm text-red-600 mt-1"},pe={key:1},fe={key:0,class:"text-sm text-red-600 mt-1"},_e={class:"flex items-center space-x-2"},ce={key:0,class:"text-sm text-red-600 mt-2"},xe={class:"flex items-center justify-end space-x-2"},po=j({__name:"Create",props:{cargos:{},roles:{},canAssignRoles:{type:Boolean}},setup(ve){const B=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"},{title:"Nuevo Usuario",href:"#"}],r=A({name:"",email:"",password:"",password_confirmation:"",role_ids:[],cargo_id:"none",documento_identidad:"",telefono:"",direccion:"",territorio_id:null,departamento_id:null,municipio_id:null,localidad_id:null,activo:!0}),w=P({territorio_id:void 0,departamento_id:void 0,municipio_id:void 0,localidad_id:void 0}),D=f=>{w.value=f,r.territorio_id=f.territorio_id||null,r.departamento_id=f.departamento_id||null,r.municipio_id=f.municipio_id||null,r.localidad_id=f.localidad_id||null},N=()=>{r.post(route("admin.usuarios.store"))};return(f,o)=>(a(),n(x,null,[t(e(z),{title:"Crear Usuario"}),t(L,{breadcrumbs:B},{default:s(()=>[d("div",Q,[d("div",W,[o[10]||(o[10]=d("div",null,[d("h1",{class:"text-3xl font-bold tracking-tight"},"Crear Usuario"),d("p",{class:"text-muted-foreground"}," Registra un nuevo usuario en el sistema ")],-1)),t(e($),{href:f.route("admin.usuarios.index")},{default:s(()=>[t(e(v),{variant:"outline"},{default:s(()=>[t(e(H),{class:"mr-2 h-4 w-4"}),o[9]||(o[9]=l(" Volver ",-1))]),_:1})]),_:1},8,["href"])]),d("form",{onSubmit:F(N,["prevent"]),class:"space-y-6"},[t(e(g),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(b),null,{default:s(()=>[...o[11]||(o[11]=[l("Información Básica",-1)])]),_:1}),t(e(k),null,{default:s(()=>[...o[12]||(o[12]=[l(" Datos principales del usuario ",-1)])]),_:1})]),_:1}),t(e(V),{class:"space-y-4"},{default:s(()=>[d("div",X,[d("div",null,[t(e(p),{for:"name"},{default:s(()=>[...o[13]||(o[13]=[l("Nombre completo *",-1)])]),_:1}),t(e(c),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(r).name=i),type:"text",placeholder:"Juan Pérez",class:_({"border-red-500":e(r).errors.name})},null,8,["modelValue","class"]),e(r).errors.name?(a(),n("p",Y,m(e(r).errors.name),1)):u("",!0)]),d("div",null,[t(e(p),{for:"email"},{default:s(()=>[...o[14]||(o[14]=[l("Correo electrónico *",-1)])]),_:1}),t(e(c),{id:"email",modelValue:e(r).email,"onUpdate:modelValue":o[1]||(o[1]=i=>e(r).email=i),type:"email",placeholder:"juan@ejemplo.com",class:_({"border-red-500":e(r).errors.email})},null,8,["modelValue","class"]),e(r).errors.email?(a(),n("p",Z,m(e(r).errors.email),1)):u("",!0)]),d("div",null,[t(e(p),{for:"documento_identidad"},{default:s(()=>[...o[15]||(o[15]=[l("Documento de identidad",-1)])]),_:1}),t(e(c),{id:"documento_identidad",modelValue:e(r).documento_identidad,"onUpdate:modelValue":o[2]||(o[2]=i=>e(r).documento_identidad=i),type:"text",placeholder:"12345678",class:_({"border-red-500":e(r).errors.documento_identidad})},null,8,["modelValue","class"]),e(r).errors.documento_identidad?(a(),n("p",h,m(e(r).errors.documento_identidad),1)):u("",!0)]),d("div",null,[t(e(p),{for:"telefono"},{default:s(()=>[...o[16]||(o[16]=[l("Teléfono",-1)])]),_:1}),t(e(c),{id:"telefono",modelValue:e(r).telefono,"onUpdate:modelValue":o[3]||(o[3]=i=>e(r).telefono=i),type:"tel",placeholder:"3001234567",class:_({"border-red-500":e(r).errors.telefono})},null,8,["modelValue","class"]),e(r).errors.telefono?(a(),n("p",ee,m(e(r).errors.telefono),1)):u("",!0)])]),d("div",null,[t(e(p),{for:"direccion"},{default:s(()=>[...o[17]||(o[17]=[l("Dirección",-1)])]),_:1}),t(e(c),{id:"direccion",modelValue:e(r).direccion,"onUpdate:modelValue":o[4]||(o[4]=i=>e(r).direccion=i),type:"text",placeholder:"Calle 123 #45-67",class:_({"border-red-500":e(r).errors.direccion})},null,8,["modelValue","class"]),e(r).errors.direccion?(a(),n("p",oe,m(e(r).errors.direccion),1)):u("",!0)])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(b),null,{default:s(()=>[...o[18]||(o[18]=[l("Seguridad",-1)])]),_:1}),t(e(k),null,{default:s(()=>[...o[19]||(o[19]=[l(" Configuración de acceso y contraseña ",-1)])]),_:1})]),_:1}),t(e(V),{class:"space-y-4"},{default:s(()=>[d("div",re,[d("div",null,[t(e(p),{for:"password"},{default:s(()=>[...o[20]||(o[20]=[l("Contraseña *",-1)])]),_:1}),t(e(c),{id:"password",modelValue:e(r).password,"onUpdate:modelValue":o[5]||(o[5]=i=>e(r).password=i),type:"password",placeholder:"••••••••",class:_({"border-red-500":e(r).errors.password})},null,8,["modelValue","class"]),e(r).errors.password?(a(),n("p",te,m(e(r).errors.password),1)):u("",!0)]),d("div",null,[t(e(p),{for:"password_confirmation"},{default:s(()=>[...o[21]||(o[21]=[l("Confirmar contraseña *",-1)])]),_:1}),t(e(c),{id:"password_confirmation",modelValue:e(r).password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=i=>e(r).password_confirmation=i),type:"password",placeholder:"••••••••",class:_({"border-red-500":e(r).errors.password_confirmation})},null,8,["modelValue","class"]),e(r).errors.password_confirmation?(a(),n("p",se,m(e(r).errors.password_confirmation),1)):u("",!0)])]),d("div",ie,[f.canAssignRoles?(a(),n("div",de,[t(e(p),null,{default:s(()=>[...o[22]||(o[22]=[l("Roles del usuario *",-1)])]),_:1}),o[23]||(o[23]=d("p",{class:"text-sm text-muted-foreground mb-3"}," Selecciona uno o más roles para este usuario ",-1)),d("div",le,[(a(!0),n(x,null,C(f.roles,i=>(a(),n("div",{key:i.value,class:"flex items-start space-x-3 py-2"},[t(e(O),{id:`role-${i.value}`,checked:e(r).role_ids.includes(i.value),"onUpdate:checked":R=>{if(R)e(r).role_ids.includes(i.value)||e(r).role_ids.push(i.value);else{const U=e(r).role_ids.indexOf(i.value);U>-1&&e(r).role_ids.splice(U,1)}}},null,8,["id","checked","onUpdate:checked"]),d("div",ae,[t(e(p),{for:`role-${i.value}`,class:"text-base font-medium cursor-pointer"},{default:s(()=>[l(m(i.label),1)]),_:2},1032,["for"]),i.description?(a(),n("p",ne,m(i.description),1)):u("",!0),i.is_system?(a(),n("span",me," (Rol del Sistema) ")):u("",!0)])]))),128))]),e(r).errors.role_ids?(a(),n("p",ue,m(e(r).errors.role_ids),1)):u("",!0)])):(a(),n("div",pe,[t(e(p),null,{default:s(()=>[...o[24]||(o[24]=[l("Rol",-1)])]),_:1}),o[25]||(o[25]=d("div",{class:"p-3 bg-muted rounded-md"},[d("p",{class:"text-sm text-muted-foreground"}," Se asignará el rol por defecto al usuario ")],-1))])),d("div",null,[t(e(p),{for:"cargo_id"},{default:s(()=>[...o[26]||(o[26]=[l("Cargo",-1)])]),_:1}),t(e(T),{modelValue:e(r).cargo_id,"onUpdate:modelValue":o[7]||(o[7]=i=>e(r).cargo_id=i)},{default:s(()=>[t(e(E),{class:_({"border-red-500":e(r).errors.cargo_id})},{default:s(()=>[t(e(I),{placeholder:"Selecciona un cargo"})]),_:1},8,["class"]),t(e(J),null,{default:s(()=>[t(e(S),{value:"none"},{default:s(()=>[...o[27]||(o[27]=[l("Sin cargo",-1)])]),_:1}),(a(!0),n(x,null,C(f.cargos,i=>(a(),G(e(S),{key:i.id,value:i.id.toString()},{default:s(()=>[l(m(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.cargo_id?(a(),n("p",fe,m(e(r).errors.cargo_id),1)):u("",!0)])]),d("div",_e,[t(e(M),{id:"activo",checked:e(r).activo,"onUpdate:checked":o[8]||(o[8]=i=>e(r).activo=i)},null,8,["checked"]),t(e(p),{for:"activo"},{default:s(()=>[...o[28]||(o[28]=[l("Usuario activo",-1)])]),_:1})])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(b),null,{default:s(()=>[...o[29]||(o[29]=[l("Ubicación Geográfica",-1)])]),_:1}),t(e(k),null,{default:s(()=>[...o[30]||(o[30]=[l(" Define la ubicación del usuario (opcional) ",-1)])]),_:1})]),_:1}),t(e(V),null,{default:s(()=>[t(q,{"model-value":w.value,"onUpdate:modelValue":D,mode:"single","show-card":!1,title:"",description:""},null,8,["model-value"]),e(r).errors.territorio_id||e(r).errors.departamento_id||e(r).errors.municipio_id||e(r).errors.localidad_id?(a(),n("div",ce,m(e(r).errors.territorio_id||e(r).errors.departamento_id||e(r).errors.municipio_id||e(r).errors.localidad_id),1)):u("",!0)]),_:1})]),_:1}),d("div",xe,[t(e($),{href:f.route("admin.usuarios.index")},{default:s(()=>[t(e(v),{variant:"outline",type:"button"},{default:s(()=>[...o[31]||(o[31]=[l(" Cancelar ",-1)])]),_:1})]),_:1},8,["href"]),t(e(v),{type:"submit",disabled:e(r).processing},{default:s(()=>[t(e(K),{class:"mr-2 h-4 w-4"}),o[32]||(o[32]=l(" Crear Usuario ",-1))]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{po as default};
