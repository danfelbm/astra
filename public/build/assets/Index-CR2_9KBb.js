import{d as R,k as $,c as q,a as u,o as r,b as s,u as t,m as z,e as a,f as i,j as f,i as _,R as E,g as n,F as g,r as y,t as c,W as b,l as A,n as H}from"./app-B9oe9ImA.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-DLXGtStv.js";import{_ as k,c as w,a as P,b as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-DgM8RJG1.js";import{_ as W}from"./CardDescription.vue_vue_type_script_setup_true_lang-dXO2Wfns.js";import{c as Y,_ as v}from"./createLucideIcon-CLq2BVfu.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-DWzoeGnJ.js";import{_ as J,a as O,b as Q,c as X,d as F}from"./SelectValue.vue_vue_type_script_setup_true_lang-BiY3JUK5.js";import{_ as V}from"./index-DES6noyB.js";import{S}from"./search-BozK0RHG.js";import{C as D}from"./clock-DZHbW8da.js";import{I as Z}from"./info-Cmnd_Snn.js";import{A as ee}from"./arrow-right-DESffC16.js";import{F as B}from"./index-C0iMcfV8.js";import{C as te}from"./circle-check-big-DS47EFPr.js";import"./index-DN9fbs94.js";import"./check-CZfszT4n.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CYBR5bwA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-0SRoMqWy.js";import"./Label.vue_vue_type_script_setup_true_lang-CtLC-sW5.js";import"./index-CfM7hPFq.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bon-09Vn.js";import"./VisuallyHidden-BYD5CROF.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-8-xwWO0D.js";import"./users-kYWDkDNW.js";import"./briefcase-r86ghe6h.js";import"./calendar-DkYzcNSx.js";import"./circle-alert-BjH3iak5.js";import"./map-pin-BrcH0nii.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=Y("FilePenIcon",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),ae={class:"p-6"},oe={class:"flex flex-col md:flex-row gap-4"},le={class:"flex-1"},re={class:"relative"},ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"flex items-start justify-between"},de={class:"flex-1"},ce={class:"space-y-3"},ue={key:0,class:"flex items-center gap-2"},me={class:"flex items-center gap-2"},fe={key:1,class:"text-sm text-muted-foreground"},pe={key:2,class:"text-sm text-muted-foreground"},_e={class:"mt-4 pt-4 border-t"},ve={class:"text-muted-foreground text-center max-w-md"},he={key:2,class:"mt-6 flex justify-center gap-2"},Ye=R({__name:"Index",props:{formularios:{},categorias:{},filters:{}},setup(N){const x=N,T=[{title:"Dashboard",href:"/dashboard"},{title:"Formularios",href:"#"}],p=$(x.filters.search||""),d=$(x.filters.categoria||"all"),I=q(()=>x.formularios.data.length>0),h=()=>{b.get(route("formularios.index"),{search:p.value||void 0,categoria:d.value==="all"?void 0:d.value},{preserveState:!0,preserveScroll:!0})},L=l=>{d.value=l,h()},C=()=>{p.value="",d.value="all",h()},m=l=>{if(l.usuario_ha_respondido)return{texto:"Completado",color:"success",icon:te};if(l.tiene_borrador)return{texto:"Borrador guardado",color:"warning",icon:se};if(l.fecha_fin){const o=Math.ceil((new Date(l.fecha_fin).getTime()-new Date().getTime())/864e5);if(o<=3&&o>0)return{texto:`Cierra en ${o} días`,color:"destructive",icon:D}}return{texto:"Disponible",color:"default",icon:B}},j=l=>new Date(l).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return(l,o)=>(r(),u(g,null,[s(t(z),{title:"Formularios"}),s(K,{breadcrumbs:T},{default:a(()=>[i("div",ae,[o[7]||(o[7]=i("div",{class:"mb-6"},[i("h1",{class:"text-3xl font-bold"},"Formularios Disponibles"),i("p",{class:"text-muted-foreground"}," Completa los formularios que están disponibles para ti ")],-1)),s(t(k),{class:"mb-6"},{default:a(()=>[s(t(w),{class:"pt-6"},{default:a(()=>[i("div",oe,[i("div",le,[i("div",re,[s(t(S),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s(t(G),{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e),placeholder:"Buscar formularios...",class:"pl-10",onKeyup:E(h,["enter"])},null,8,["modelValue"])])]),s(t(J),{modelValue:d.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>d.value=e),L]},{default:a(()=>[s(t(O),{class:"w-full md:w-[200px]"},{default:a(()=>[s(t(Q),{placeholder:"Todas las categorías"})]),_:1}),s(t(X),null,{default:a(()=>[s(t(F),{value:"all"},{default:a(()=>o[2]||(o[2]=[n("Todas las categorías")])),_:1}),(r(!0),u(g,null,y(l.categorias,e=>(r(),f(t(F),{key:e.id,value:e.id.toString()},{default:a(()=>[n(c(e.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(t(v),{onClick:h,variant:"default"},{default:a(()=>[s(t(S),{class:"mr-2 h-4 w-4"}),o[3]||(o[3]=n(" Buscar "))]),_:1}),p.value||d.value&&d.value!=="all"?(r(),f(t(v),{key:0,onClick:C,variant:"outline"},{default:a(()=>o[4]||(o[4]=[n(" Limpiar ")])),_:1})):_("",!0)])]),_:1})]),_:1}),I.value?(r(),u("div",ie,[(r(!0),u(g,null,y(l.formularios.data,e=>(r(),f(t(k),{key:e.id,class:"hover:shadow-lg transition-shadow cursor-pointer",onClick:M=>t(b).visit(l.route("formularios.show",e.slug))},{default:a(()=>[s(t(P),null,{default:a(()=>[i("div",ne,[i("div",de,[s(t(U),{class:"line-clamp-2"},{default:a(()=>[n(c(e.titulo),1)]),_:2},1024),e.descripcion?(r(),f(t(W),{key:0,class:"mt-2 line-clamp-2"},{default:a(()=>[n(c(e.descripcion),1)]),_:2},1024)):_("",!0)]),(r(),f(A(m(e).icon),{class:H(["h-5 w-5 ml-2",m(e).color==="success"?"text-green-600":m(e).color==="warning"?"text-yellow-600":m(e).color==="destructive"?"text-red-600":"text-muted-foreground"])},null,8,["class"]))])]),_:2},1024),s(t(w),null,{default:a(()=>[i("div",ce,[e.categoria?(r(),u("div",ue,[s(t(V),{variant:"secondary"},{default:a(()=>[n(c(e.categoria.nombre),1)]),_:2},1024)])):_("",!0),i("div",me,[s(t(V),{variant:m(e).color==="success"?"default":m(e).color==="warning"?"secondary":m(e).color==="destructive"?"destructive":"outline"},{default:a(()=>[n(c(m(e).texto),1)]),_:2},1032,["variant"])]),e.fecha_fin?(r(),u("div",fe,[s(t(D),{class:"inline h-3 w-3 mr-1"}),n(" Cierra el "+c(j(e.fecha_fin)),1)])):_("",!0),e.limite_respuestas?(r(),u("div",pe,[s(t(Z),{class:"inline h-3 w-3 mr-1"}),n(" "+c(e.respuestas_count||0)+" / "+c(e.limite_respuestas)+" respuestas ",1)])):_("",!0)]),i("div",_e,[s(t(v),{variant:"ghost",class:"w-full",disabled:e.usuario_ha_respondido},{default:a(()=>[n(c(e.usuario_ha_respondido?"Ya respondido":e.tiene_borrador?"Continuar":"Responder")+" ",1),s(t(ee),{class:"ml-2 h-4 w-4"})]),_:2},1032,["disabled"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(r(),f(t(k),{key:1},{default:a(()=>[s(t(w),{class:"flex flex-col items-center justify-center py-12"},{default:a(()=>[s(t(B),{class:"h-12 w-12 text-muted-foreground mb-4"}),o[6]||(o[6]=i("h3",{class:"text-lg font-semibold mb-2"},"No hay formularios disponibles",-1)),i("p",ve,c(p.value||d.value&&d.value!=="all"?"No se encontraron formularios con los filtros aplicados.":"No hay formularios disponibles en este momento. Vuelve más tarde."),1),p.value||d.value&&d.value!=="all"?(r(),f(t(v),{key:0,onClick:C,class:"mt-4",variant:"outline"},{default:a(()=>o[5]||(o[5]=[n(" Limpiar filtros ")])),_:1})):_("",!0)]),_:1})]),_:1})),l.formularios.last_page>1?(r(),u("div",he,[(r(!0),u(g,null,y(l.formularios.last_page,e=>(r(),f(t(v),{key:e,variant:e===l.formularios.current_page?"default":"outline",size:"sm",onClick:M=>t(b).get(l.route("formularios.index"),{...l.filters,page:e},{preserveState:!0})},{default:a(()=>[n(c(e),1)]),_:2},1032,["variant","onClick"]))),128))])):_("",!0)])]),_:1})],64))}});export{Ye as default};
