import{a as f,C as te,U as le,F as ie,_ as ne}from"./AppLayout.vue_vue_type_script_setup_true_lang-B1gxnIse.js";import{c as W,_ as $}from"./AppLogo.vue_vue_type_script_setup_true_lang-W_DjSbgJ.js";import{_ as w,a as A}from"./CardContent.vue_vue_type_script_setup_true_lang-D_rxG1xF.js";import{_ as oe}from"./CardDescription.vue_vue_type_script_setup_true_lang-CDkPCfK3.js";import{_ as C,a as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-CxvaWqnG.js";import{_ as re,a as de,b as F,c as h,d as ue,e as x}from"./TableHeader.vue_vue_type_script_setup_true_lang-5IQb4Qk5.js";import{_ as me,a as pe,b as fe,c as ce}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BySUQk1l.js";import{_ as _e,a as ve}from"./DialogFooter.vue_vue_type_script_setup_true_lang-LEz0sjJW.js";import{_ as D,a as E,b as H,c as I,d as U}from"./SelectValue.vue_vue_type_script_setup_true_lang-CVgg3Khu.js";import{_ as L}from"./Checkbox.vue_vue_type_script_setup_true_lang-RPD2EEbj.js";import{d as be,k as M,c as ge,a as v,o as d,b as a,u as e,m as ye,e as s,f as n,j as c,i as y,t as r,n as z,g as i,F as T,r as Q,W as S}from"./app-Te3PPdHD.js";import{A as ke}from"./arrow-left-CbhKNwFx.js";import{S as xe}from"./square-pen-CRcQ70Rs.js";import{C as $e}from"./clock-D4F_VZgn.js";import{M as we}from"./map-pin-B7-fBNM9.js";import{C as Ae}from"./circle-check-big-G2FUIqlD.js";import{C as Ce}from"./circle-x-B-puIG08.js";import{f as Pe,e as he}from"./es-DfN3vIXC.js";import"./index-ibpswyNf.js";import"./index-DvExiaWh.js";import"./usePrimitiveElement-Wv9UFbsD.js";import"./createContext-DitPrlKu.js";import"./Collection-aNeXlj_z.js";import"./useForwardExpose-DjCGcjBS.js";import"./useNonce-Bdm318tJ.js";import"./chevron-up-Cpk44tdW.js";import"./handleAndDispatchCustomEvent-CYpUamdb.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-Civ3FWWz.js";import"./VisuallyHidden-CHPAlaQV.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=W("UserMinusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=W("UserPlusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ve={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Me={class:"flex items-center justify-between"},Ne={class:"text-3xl font-bold"},je={class:"mt-2 flex items-center gap-2"},qe={class:"flex gap-2"},Be={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},Fe={class:"space-y-2"},ze={class:"flex items-center gap-2 text-sm"},Te={class:"flex items-center gap-2 text-sm"},De={class:"text-sm font-medium"},Ee={class:"space-y-2"},He={class:"flex items-center gap-2 text-sm"},Ie={class:"text-sm text-muted-foreground"},Le={class:"space-y-2"},Qe={class:"flex items-center gap-2"},We={class:"text-2xl font-bold"},Oe={class:"text-sm"},Re={class:"flex items-center justify-between"},Xe={class:"flex gap-2"},Ge={key:0,class:"mb-4"},Je={key:0,class:"flex items-center gap-2"},Ke={key:0,class:"text-green-600"},Ye={key:1,class:"text-gray-400"},Ze={key:1},ea={class:"flex justify-end gap-2"},aa=["href"],sa={class:"space-y-4"},ta={class:"max-h-96 overflow-y-auto border rounded-lg p-4"},la=["for"],ia={key:0,class:"text-center text-muted-foreground"},Fa=be({__name:"Show",props:{asamblea:{},puede_gestionar_participantes:{type:Boolean}},setup(O){const g=O,R=[{title:"Admin",href:"/admin/dashboard"},{title:"Asambleas",href:"/admin/asambleas"},{title:g.asamblea.nombre,href:"#"}],{route:k}=window,V=M(!1),q=M([]),b=M([]),N=M("asistente"),B=M(null),X=l=>l?Pe(new Date(l),"PPPpp",{locale:he}):"",G=l=>{switch(l){case"moderador":return"bg-purple-100 text-purple-800";case"secretario":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},j=ge(()=>{const l=g.asamblea.participantes||[],t=l.filter(_=>{var p;return((p=_.pivot)==null?void 0:p.tipo_participacion)==="moderador"}).length,o=l.filter(_=>{var p;return((p=_.pivot)==null?void 0:p.tipo_participacion)==="secretario"}).length,u=l.filter(_=>{var p;return((p=_.pivot)==null?void 0:p.tipo_participacion)==="asistente"}).length,m=l.filter(_=>{var p;return((p=_.pivot)==null?void 0:p.asistio)===!0}).length;return{moderadores:t,secretarios:o,asistentes:u,presentes:m,total:l.length}}),J=async()=>{try{const t=await(await fetch(k("admin.asambleas.manage-participantes",g.asamblea.id))).json();q.value=t.participantes_disponibles,V.value=!0}catch(l){console.error("Error cargando participantes:",l)}},K=()=>{b.value.length!==0&&S.post(k("admin.asambleas.manage-participantes",g.asamblea.id),{participante_ids:b.value,tipo_participacion:N.value},{preserveScroll:!0,onSuccess:()=>{V.value=!1,b.value=[],N.value="asistente"}})},Y=l=>{confirm("¿Estás seguro de remover este participante?")&&S.delete(k("admin.asambleas.manage-participantes",g.asamblea.id),{data:{participante_id:l},preserveScroll:!0})},Z=(l,t)=>{S.put(k("admin.asambleas.manage-participantes",g.asamblea.id),{participante_id:l,tipo_participacion:t},{preserveScroll:!0})},ee=(l,t)=>{B.value=l,S.put(k("admin.asambleas.manage-participantes",g.asamblea.id),{participante_id:l,asistio:t},{preserveScroll:!0,onFinish:()=>{B.value=null}})},ae=()=>{S.visit(k("admin.asambleas.edit",g.asamblea.id))},se=()=>{S.visit(k("admin.asambleas.index"))};return(l,t)=>(d(),v(T,null,[a(e(ye),{title:`Asamblea: ${l.asamblea.nombre}`},null,8,["title"]),a(ne,{breadcrumbs:R},{default:s(()=>[n("div",Ve,[n("div",Me,[n("div",null,[n("h1",Ne,r(l.asamblea.nombre),1),n("div",je,[a(e(f),{class:z(l.asamblea.estado_color)},{default:s(()=>[i(r(l.asamblea.estado_label),1)]),_:1},8,["class"]),a(e(f),{class:z(l.asamblea.tipo==="ordinaria"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800")},{default:s(()=>[i(r(l.asamblea.tipo_label),1)]),_:1},8,["class"]),l.asamblea.activo?(d(),c(e(f),{key:0,class:"bg-green-100 text-green-800"},{default:s(()=>t[3]||(t[3]=[i(" Activa ")])),_:1})):(d(),c(e(f),{key:1,class:"bg-red-100 text-red-800"},{default:s(()=>t[4]||(t[4]=[i(" Inactiva ")])),_:1}))])]),n("div",qe,[a(e($),{variant:"outline",onClick:se},{default:s(()=>[a(e(ke),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=i(" Volver "))]),_:1}),a(e($),{onClick:ae},{default:s(()=>[a(e(xe),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=i(" Editar "))]),_:1})])]),n("div",Be,[a(e(w),null,{default:s(()=>[a(e(C),{class:"pb-3"},{default:s(()=>[a(e(P),{class:"text-sm font-medium"},{default:s(()=>t[7]||(t[7]=[i("Fechas")])),_:1})]),_:1}),a(e(A),null,{default:s(()=>[n("div",Fe,[n("div",ze,[a(e(te),{class:"h-4 w-4 text-muted-foreground"}),n("span",null,r(l.asamblea.rango_fechas),1)]),n("div",Te,[a(e($e),{class:"h-4 w-4 text-muted-foreground"}),n("span",null,"Duración: "+r(l.asamblea.duracion),1)]),n("p",De,r(l.asamblea.tiempo_restante),1)])]),_:1})]),_:1}),a(e(w),null,{default:s(()=>[a(e(C),{class:"pb-3"},{default:s(()=>[a(e(P),{class:"text-sm font-medium"},{default:s(()=>t[8]||(t[8]=[i("Ubicación")])),_:1})]),_:1}),a(e(A),null,{default:s(()=>[n("div",Ee,[n("div",He,[a(e(we),{class:"h-4 w-4 text-muted-foreground"}),n("span",null,r(l.asamblea.lugar||"No especificado"),1)]),n("p",Ie,r(l.asamblea.ubicacion_completa),1)])]),_:1})]),_:1}),a(e(w),null,{default:s(()=>[a(e(C),{class:"pb-3"},{default:s(()=>[a(e(P),{class:"text-sm font-medium"},{default:s(()=>t[9]||(t[9]=[i("Quórum")])),_:1})]),_:1}),a(e(A),null,{default:s(()=>[n("div",Le,[n("div",Qe,[a(e(le),{class:"h-4 w-4 text-muted-foreground"}),n("span",We,r(l.asamblea.asistentes_count)+" / "+r(l.asamblea.quorum_minimo||"∞"),1)]),l.asamblea.alcanza_quorum?(d(),c(e(f),{key:0,class:"bg-green-100 text-green-800"},{default:s(()=>[a(e(Ae),{class:"mr-1 h-3 w-3"}),t[10]||(t[10]=i(" Quórum alcanzado "))]),_:1})):l.asamblea.quorum_minimo?(d(),c(e(f),{key:1,class:"bg-yellow-100 text-yellow-800"},{default:s(()=>[a(e(Ce),{class:"mr-1 h-3 w-3"}),t[11]||(t[11]=i(" Quórum no alcanzado "))]),_:1})):y("",!0)])]),_:1})]),_:1})]),l.asamblea.descripcion?(d(),c(e(w),{key:0},{default:s(()=>[a(e(C),null,{default:s(()=>[a(e(P),null,{default:s(()=>t[12]||(t[12]=[i("Descripción")])),_:1})]),_:1}),a(e(A),null,{default:s(()=>[n("p",Oe,r(l.asamblea.descripcion),1)]),_:1})]),_:1})):y("",!0),a(e(w),null,{default:s(()=>[a(e(C),null,{default:s(()=>[n("div",Re,[n("div",null,[a(e(P),null,{default:s(()=>t[13]||(t[13]=[i("Participantes")])),_:1}),a(e(oe),null,{default:s(()=>[i(r(l.asamblea.participantes_count)+" participantes registrados ",1)]),_:1})]),n("div",Xe,[a(e(f),{variant:"outline"},{default:s(()=>[i(" Moderadores: "+r(j.value.moderadores),1)]),_:1}),a(e(f),{variant:"outline"},{default:s(()=>[i(" Secretarios: "+r(j.value.secretarios),1)]),_:1}),a(e(f),{variant:"outline"},{default:s(()=>[i(" Asistentes: "+r(j.value.asistentes),1)]),_:1}),a(e(f),{variant:"outline"},{default:s(()=>[i(" Presentes: "+r(j.value.presentes),1)]),_:1})])])]),_:1}),a(e(A),null,{default:s(()=>[l.puede_gestionar_participantes?(d(),v("div",Ge,[a(e($),{onClick:J},{default:s(()=>[a(e(Se),{class:"mr-2 h-4 w-4"}),t[14]||(t[14]=i(" Añadir Participantes "))]),_:1})])):y("",!0),a(e(re),null,{default:s(()=>[a(e(de),null,{default:s(()=>[a(e(F),null,{default:s(()=>[a(e(h),null,{default:s(()=>t[15]||(t[15]=[i("Nombre")])),_:1}),a(e(h),null,{default:s(()=>t[16]||(t[16]=[i("Email")])),_:1}),a(e(h),null,{default:s(()=>t[17]||(t[17]=[i("Tipo de Participación")])),_:1}),a(e(h),null,{default:s(()=>t[18]||(t[18]=[i("Asistencia")])),_:1}),a(e(h),null,{default:s(()=>t[19]||(t[19]=[i("Hora de Registro")])),_:1}),l.puede_gestionar_participantes?(d(),c(e(h),{key:0,class:"text-right"},{default:s(()=>t[20]||(t[20]=[i("Acciones")])),_:1})):y("",!0)]),_:1})]),_:1}),a(e(ue),null,{default:s(()=>[(d(!0),v(T,null,Q(l.asamblea.participantes,o=>(d(),c(e(F),{key:o.id},{default:s(()=>[a(e(x),{class:"font-medium"},{default:s(()=>[i(r(o.name),1)]),_:2},1024),a(e(x),null,{default:s(()=>[i(r(o.email),1)]),_:2},1024),a(e(x),null,{default:s(()=>{var u;return[a(e(f),{class:z(G(((u=o.pivot)==null?void 0:u.tipo_participacion)||"asistente"))},{default:s(()=>{var m;return[i(r(((m=o.pivot)==null?void 0:m.tipo_participacion)||"asistente"),1)]}),_:2},1032,["class"])]}),_:2},1024),a(e(x),null,{default:s(()=>{var u,m,_;return[l.puede_gestionar_participantes&&l.asamblea.estado==="en_curso"?(d(),v("div",Je,[a(e(L),{checked:((u=o.pivot)==null?void 0:u.asistio)||!1,disabled:B.value===o.id,"onUpdate:checked":p=>ee(o.id,p)},null,8,["checked","disabled","onUpdate:checked"]),(m=o.pivot)!=null&&m.asistio?(d(),v("span",Ke,"Presente")):(d(),v("span",Ye,"Ausente"))])):(d(),v("div",Ze,[(_=o.pivot)!=null&&_.asistio?(d(),c(e(f),{key:0,class:"bg-green-100 text-green-800"},{default:s(()=>t[21]||(t[21]=[i(" Presente ")])),_:1})):(d(),c(e(f),{key:1,variant:"outline"},{default:s(()=>t[22]||(t[22]=[i(" Ausente ")])),_:1}))]))]}),_:2},1024),a(e(x),null,{default:s(()=>{var u;return[i(r((u=o.pivot)!=null&&u.hora_registro?X(o.pivot.hora_registro):"-"),1)]}),_:2},1024),l.puede_gestionar_participantes?(d(),c(e(x),{key:0,class:"text-right"},{default:s(()=>{var u;return[n("div",ea,[a(e(D),{"model-value":((u=o.pivot)==null?void 0:u.tipo_participacion)||"asistente","onUpdate:modelValue":m=>Z(o.id,m)},{default:s(()=>[a(e(E),{class:"w-32"},{default:s(()=>[a(e(H))]),_:1}),a(e(I),null,{default:s(()=>[a(e(U),{value:"asistente"},{default:s(()=>t[23]||(t[23]=[i("Asistente")])),_:1}),a(e(U),{value:"moderador"},{default:s(()=>t[24]||(t[24]=[i("Moderador")])),_:1}),a(e(U),{value:"secretario"},{default:s(()=>t[25]||(t[25]=[i("Secretario")])),_:1})]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"]),a(e($),{variant:"ghost",size:"sm",onClick:m=>Y(o.id)},{default:s(()=>[a(e(Ue),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]}),_:2},1024)):y("",!0)]),_:2},1024))),128)),!l.asamblea.participantes||l.asamblea.participantes.length===0?(d(),c(e(F),{key:0},{default:s(()=>[a(e(x),{colspan:"6",class:"text-center py-8"},{default:s(()=>t[26]||(t[26]=[n("p",{class:"text-muted-foreground"},"No hay participantes registrados",-1)])),_:1})]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l.asamblea.acta_url?(d(),c(e(w),{key:1},{default:s(()=>[a(e(C),null,{default:s(()=>[a(e(P),null,{default:s(()=>t[27]||(t[27]=[i("Acta de la Asamblea")])),_:1})]),_:1}),a(e(A),null,{default:s(()=>[n("a",{href:l.asamblea.acta_url,target:"_blank",class:"flex items-center gap-2 text-blue-600 hover:underline"},[a(e(ie),{class:"h-4 w-4"}),t[28]||(t[28]=i(" Ver Acta "))],8,aa)]),_:1})]),_:1})):y("",!0)]),a(e(me),{open:V.value,"onUpdate:open":t[2]||(t[2]=o=>V.value=o)},{default:s(()=>[a(e(pe),{class:"max-w-2xl"},{default:s(()=>[a(e(fe),null,{default:s(()=>[a(e(ce),null,{default:s(()=>t[29]||(t[29]=[i("Añadir Participantes")])),_:1}),a(e(_e),null,{default:s(()=>t[30]||(t[30]=[i(" Selecciona los usuarios que deseas añadir como participantes de la asamblea ")])),_:1})]),_:1}),n("div",sa,[n("div",null,[t[34]||(t[34]=n("label",{class:"text-sm font-medium"},"Tipo de Participación",-1)),a(e(D),{modelValue:N.value,"onUpdate:modelValue":t[0]||(t[0]=o=>N.value=o)},{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(H))]),_:1}),a(e(I),null,{default:s(()=>[a(e(U),{value:"asistente"},{default:s(()=>t[31]||(t[31]=[i("Asistente")])),_:1}),a(e(U),{value:"moderador"},{default:s(()=>t[32]||(t[32]=[i("Moderador")])),_:1}),a(e(U),{value:"secretario"},{default:s(()=>t[33]||(t[33]=[i("Secretario")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),n("div",ta,[(d(!0),v(T,null,Q(q.value,o=>(d(),v("div",{key:o.id,class:"flex items-center space-x-2 py-2"},[a(e(L),{id:`usuario-${o.id}`,checked:b.value.includes(o.id),"onUpdate:checked":u=>{if(u)b.value.push(o.id);else{const m=b.value.indexOf(o.id);m>-1&&b.value.splice(m,1)}}},null,8,["id","checked","onUpdate:checked"]),n("label",{for:`usuario-${o.id}`,class:"flex-1 cursor-pointer text-sm"},r(o.name)+" ("+r(o.email)+") ",9,la)]))),128)),q.value.length===0?(d(),v("p",ia," No hay usuarios disponibles para añadir ")):y("",!0)])]),a(e(ve),null,{default:s(()=>[a(e($),{variant:"outline",onClick:t[1]||(t[1]=o=>V.value=!1)},{default:s(()=>t[35]||(t[35]=[i(" Cancelar ")])),_:1}),a(e($),{onClick:K,disabled:b.value.length===0},{default:s(()=>[i(" Añadir "+r(b.value.length)+" Participante(s) ",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Fa as default};
