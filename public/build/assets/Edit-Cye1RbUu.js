import{d as P,C as z,k as F,a as n,o as l,b as s,u as e,m as I,e as t,f as d,P as D,g as a,h as L,i as f,n as _,t as p,F as x,r as g,j as M}from"./app-Bywfx_ml.js";import{_ as T}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CChZ5x07.js";import{_ as y}from"./createLucideIcon-FkVd53OX.js";import{_ as b,a as k,b as V,c as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-CldQR6g9.js";import{_ as $}from"./CardDescription.vue_vue_type_script_setup_true_lang-BD9n7BPv.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-CxaxIk_k.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-auZCtUj0.js";import{_ as J,a as O,b as q,c as H,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-aNd5mOSC.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-CUAAzkSP.js";import{_ as Q}from"./Checkbox.vue_vue_type_script_setup_true_lang-B7HRxtHu.js";import{_ as W}from"./GeographicSelector.vue_vue_type_script_setup_true_lang-CaYLRMs9.js";import{A as X}from"./arrow-left-B_JfcKnD.js";import{S as Y}from"./save-R8nXl7Ih.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-C-UWQlVl.js";import"./index-ClWSenH1.js";import"./floating-ui.vue-CY6i3Hml.js";import"./x-1ihn3QHR.js";import"./index-B5ONv_w2.js";import"./shield-DUNEBTXe.js";import"./user-DSkF_2iF.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CihCd30d.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Dgmw3vod.js";import"./VisuallyHidden-FcgVIwgs.js";import"./PopperContent-BYQgMTsN.js";import"./index-CftsjdQX.js";import"./index-B4rJ-Toz.js";import"./circle-alert-C_55rC1m.js";import"./map-pin-BuNky5Mk.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D9di7Ckc.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D-ui9aLx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-EznVA92m.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-MCT3fXxF.js";import"./users-Bnw7SyAM.js";import"./vote-BUAa5LxR.js";import"./file-text-CtJXtRnK.js";import"./calendar-BZsIr4Tq.js";import"./briefcase-C7a72yJm.js";import"./megaphone-BU0u90bW.js";import"./user-check-ClkOYHg7.js";import"./external-link-BV9ZAJSz.js";import"./panel-left-LeYr2VnH.js";import"./index-Cno0IQxw.js";import"./check-D3O-V1OF.js";import"./index-aA3b8MlC.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHiddenInput-D38zWEE5.js";const Z={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},h={class:"flex items-center justify-between"},ee={class:"grid gap-4 md:grid-cols-2"},oe={key:0,class:"text-sm text-red-600 mt-1"},re={key:0,class:"text-sm text-red-600 mt-1"},se={key:0,class:"text-sm text-red-600 mt-1"},te={key:0,class:"text-sm text-red-600 mt-1"},ie={key:0,class:"text-sm text-red-600 mt-1"},de={class:"grid gap-4 md:grid-cols-2"},le={key:0,class:"text-sm text-red-600 mt-1"},ae={key:0,class:"text-sm text-red-600 mt-1"},ne={class:"space-y-4"},ue={key:0},me={class:"space-y-2 max-h-64 overflow-y-auto border rounded-lg p-4"},pe={class:"flex-1"},fe={key:0,class:"text-sm text-muted-foreground"},ce={key:1,class:"text-xs text-blue-600"},_e={key:0,class:"text-sm text-red-600 mt-1"},ve={key:1},xe={class:"p-3 bg-muted rounded-md"},ge={key:0,class:"space-y-1"},ye={key:1,class:"text-sm font-medium"},be={key:0,class:"text-sm text-red-600 mt-1"},ke={class:"flex items-center space-x-2"},Ve={key:0,class:"text-sm text-red-600 mt-2"},we={class:"flex items-center justify-end space-x-2"},go=P({__name:"Edit",props:{user:{},cargos:{},roles:{},canAssignRoles:{type:Boolean}},setup(j){var C;const u=j,B=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"},{title:"Editar Usuario",href:"#"}],R=((C=u.user.roles)==null?void 0:C.map(m=>m.id))||[],r=z({name:u.user.name,email:u.user.email,password:"",password_confirmation:"",role_ids:R,cargo_id:u.user.cargo_id?u.user.cargo_id.toString():"none",documento_identidad:u.user.documento_identidad||"",telefono:u.user.telefono||"",direccion:u.user.direccion||"",territorio_id:u.user.territorio_id||null,departamento_id:u.user.departamento_id||null,municipio_id:u.user.municipio_id||null,localidad_id:u.user.localidad_id||null,activo:u.user.activo}),U=F({territorio_id:u.user.territorio_id||void 0,departamento_id:u.user.departamento_id||void 0,municipio_id:u.user.municipio_id||void 0,localidad_id:u.user.localidad_id||void 0}),A=m=>{U.value=m,r.territorio_id=m.territorio_id||null,r.departamento_id=m.departamento_id||null,r.municipio_id=m.municipio_id||null,r.localidad_id=m.localidad_id||null},E=()=>{r.put(route("admin.usuarios.update",u.user.id))};return(m,o)=>(l(),n(x,null,[s(e(I),{title:"Editar Usuario"}),s(T,{breadcrumbs:B},{default:t(()=>[d("div",Z,[d("div",h,[o[10]||(o[10]=d("div",null,[d("h1",{class:"text-3xl font-bold tracking-tight"},"Editar Usuario"),d("p",{class:"text-muted-foreground"}," Modifica la información del usuario ")],-1)),s(e(D),{href:m.route("admin.usuarios.index")},{default:t(()=>[s(e(y),{variant:"outline"},{default:t(()=>[s(e(X),{class:"mr-2 h-4 w-4"}),o[9]||(o[9]=a(" Volver ",-1))]),_:1})]),_:1},8,["href"])]),d("form",{onSubmit:L(E,["prevent"]),class:"space-y-6"},[s(e(b),null,{default:t(()=>[s(e(k),null,{default:t(()=>[s(e(V),null,{default:t(()=>[...o[11]||(o[11]=[a("Información Básica",-1)])]),_:1}),s(e($),null,{default:t(()=>[...o[12]||(o[12]=[a(" Datos principales del usuario ",-1)])]),_:1})]),_:1}),s(e(w),{class:"space-y-4"},{default:t(()=>[d("div",ee,[d("div",null,[s(e(c),{for:"name"},{default:t(()=>[...o[13]||(o[13]=[a("Nombre completo *",-1)])]),_:1}),s(e(v),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(r).name=i),type:"text",placeholder:"Juan Pérez",class:_({"border-red-500":e(r).errors.name})},null,8,["modelValue","class"]),e(r).errors.name?(l(),n("p",oe,p(e(r).errors.name),1)):f("",!0)]),d("div",null,[s(e(c),{for:"email"},{default:t(()=>[...o[14]||(o[14]=[a("Correo electrónico *",-1)])]),_:1}),s(e(v),{id:"email",modelValue:e(r).email,"onUpdate:modelValue":o[1]||(o[1]=i=>e(r).email=i),type:"email",placeholder:"juan@ejemplo.com",class:_({"border-red-500":e(r).errors.email})},null,8,["modelValue","class"]),e(r).errors.email?(l(),n("p",re,p(e(r).errors.email),1)):f("",!0)]),d("div",null,[s(e(c),{for:"documento_identidad"},{default:t(()=>[...o[15]||(o[15]=[a("Documento de identidad",-1)])]),_:1}),s(e(v),{id:"documento_identidad",modelValue:e(r).documento_identidad,"onUpdate:modelValue":o[2]||(o[2]=i=>e(r).documento_identidad=i),type:"text",placeholder:"12345678",class:_({"border-red-500":e(r).errors.documento_identidad})},null,8,["modelValue","class"]),e(r).errors.documento_identidad?(l(),n("p",se,p(e(r).errors.documento_identidad),1)):f("",!0)]),d("div",null,[s(e(c),{for:"telefono"},{default:t(()=>[...o[16]||(o[16]=[a("Teléfono",-1)])]),_:1}),s(e(v),{id:"telefono",modelValue:e(r).telefono,"onUpdate:modelValue":o[3]||(o[3]=i=>e(r).telefono=i),type:"tel",placeholder:"3001234567",class:_({"border-red-500":e(r).errors.telefono})},null,8,["modelValue","class"]),e(r).errors.telefono?(l(),n("p",te,p(e(r).errors.telefono),1)):f("",!0)])]),d("div",null,[s(e(c),{for:"direccion"},{default:t(()=>[...o[17]||(o[17]=[a("Dirección",-1)])]),_:1}),s(e(v),{id:"direccion",modelValue:e(r).direccion,"onUpdate:modelValue":o[4]||(o[4]=i=>e(r).direccion=i),type:"text",placeholder:"Calle 123 #45-67",class:_({"border-red-500":e(r).errors.direccion})},null,8,["modelValue","class"]),e(r).errors.direccion?(l(),n("p",ie,p(e(r).errors.direccion),1)):f("",!0)])]),_:1})]),_:1}),s(e(b),null,{default:t(()=>[s(e(k),null,{default:t(()=>[s(e(V),null,{default:t(()=>[...o[18]||(o[18]=[a("Seguridad",-1)])]),_:1}),s(e($),null,{default:t(()=>[...o[19]||(o[19]=[a(" Configuración de acceso y contraseña ",-1)])]),_:1})]),_:1}),s(e(w),{class:"space-y-4"},{default:t(()=>[o[29]||(o[29]=d("div",{class:"p-4 bg-muted rounded-lg mb-4"},[d("p",{class:"text-sm text-muted-foreground"}," Deja los campos de contraseña vacíos si no deseas cambiarla. ")],-1)),d("div",de,[d("div",null,[s(e(c),{for:"password"},{default:t(()=>[...o[20]||(o[20]=[a("Nueva contraseña",-1)])]),_:1}),s(e(v),{id:"password",modelValue:e(r).password,"onUpdate:modelValue":o[5]||(o[5]=i=>e(r).password=i),type:"password",placeholder:"••••••••",class:_({"border-red-500":e(r).errors.password})},null,8,["modelValue","class"]),e(r).errors.password?(l(),n("p",le,p(e(r).errors.password),1)):f("",!0)]),d("div",null,[s(e(c),{for:"password_confirmation"},{default:t(()=>[...o[21]||(o[21]=[a("Confirmar nueva contraseña",-1)])]),_:1}),s(e(v),{id:"password_confirmation",modelValue:e(r).password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=i=>e(r).password_confirmation=i),type:"password",placeholder:"••••••••",class:_({"border-red-500":e(r).errors.password_confirmation})},null,8,["modelValue","class"]),e(r).errors.password_confirmation?(l(),n("p",ae,p(e(r).errors.password_confirmation),1)):f("",!0)])]),d("div",ne,[m.canAssignRoles?(l(),n("div",ue,[s(e(c),null,{default:t(()=>[...o[22]||(o[22]=[a("Roles del usuario *",-1)])]),_:1}),o[23]||(o[23]=d("p",{class:"text-sm text-muted-foreground mb-3"}," Selecciona uno o más roles para este usuario ",-1)),d("div",me,[(l(!0),n(x,null,g(m.roles,i=>(l(),n("div",{key:i.value,class:"flex items-start space-x-3 py-2"},[s(e(Q),{id:`role-${i.value}`,checked:e(r).role_ids.includes(i.value),"onUpdate:checked":G=>{if(G)e(r).role_ids.includes(i.value)||e(r).role_ids.push(i.value);else{const S=e(r).role_ids.indexOf(i.value);S>-1&&e(r).role_ids.splice(S,1)}}},null,8,["id","checked","onUpdate:checked"]),d("div",pe,[s(e(c),{for:`role-${i.value}`,class:"text-base font-medium cursor-pointer"},{default:t(()=>[a(p(i.label),1)]),_:2},1032,["for"]),i.description?(l(),n("p",fe,p(i.description),1)):f("",!0),i.is_system?(l(),n("span",ce," (Rol del Sistema) ")):f("",!0)])]))),128))]),e(r).errors.role_ids?(l(),n("p",_e,p(e(r).errors.role_ids),1)):f("",!0)])):(l(),n("div",ve,[s(e(c),null,{default:t(()=>[...o[24]||(o[24]=[a("Roles actuales",-1)])]),_:1}),d("div",xe,[m.user.roles&&m.user.roles.length>0?(l(),n("div",ge,[(l(!0),n(x,null,g(m.user.roles,i=>(l(),n("p",{key:i.id,class:"text-sm font-medium"}," • "+p(i.display_name||i.name),1))),128))])):(l(),n("p",ye," Sin roles asignados ")),o[25]||(o[25]=d("p",{class:"text-xs text-muted-foreground mt-2"}," No tienes permisos para cambiar los roles de este usuario ",-1))])])),d("div",null,[s(e(c),{for:"cargo_id"},{default:t(()=>[...o[26]||(o[26]=[a("Cargo",-1)])]),_:1}),s(e(J),{modelValue:e(r).cargo_id,"onUpdate:modelValue":o[7]||(o[7]=i=>e(r).cargo_id=i)},{default:t(()=>[s(e(O),{class:_({"border-red-500":e(r).errors.cargo_id})},{default:t(()=>[s(e(q),{placeholder:"Selecciona un cargo"})]),_:1},8,["class"]),s(e(H),null,{default:t(()=>[s(e(N),{value:"none"},{default:t(()=>[...o[27]||(o[27]=[a("Sin cargo",-1)])]),_:1}),(l(!0),n(x,null,g(m.cargos,i=>(l(),M(e(N),{key:i.id,value:i.id.toString()},{default:t(()=>[a(p(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.cargo_id?(l(),n("p",be,p(e(r).errors.cargo_id),1)):f("",!0)])]),d("div",ke,[s(e(K),{id:"activo",checked:e(r).activo,"onUpdate:checked":o[8]||(o[8]=i=>e(r).activo=i)},null,8,["checked"]),s(e(c),{for:"activo"},{default:t(()=>[...o[28]||(o[28]=[a("Usuario activo",-1)])]),_:1})])]),_:1})]),_:1}),s(e(b),null,{default:t(()=>[s(e(k),null,{default:t(()=>[s(e(V),null,{default:t(()=>[...o[30]||(o[30]=[a("Ubicación Geográfica",-1)])]),_:1}),s(e($),null,{default:t(()=>[...o[31]||(o[31]=[a(" Define la ubicación del usuario (opcional) ",-1)])]),_:1})]),_:1}),s(e(w),null,{default:t(()=>[s(W,{"model-value":U.value,"onUpdate:modelValue":A,mode:"single","show-card":!1,title:"",description:""},null,8,["model-value"]),e(r).errors.territorio_id||e(r).errors.departamento_id||e(r).errors.municipio_id||e(r).errors.localidad_id?(l(),n("div",Ve,p(e(r).errors.territorio_id||e(r).errors.departamento_id||e(r).errors.municipio_id||e(r).errors.localidad_id),1)):f("",!0)]),_:1})]),_:1}),d("div",we,[s(e(D),{href:m.route("admin.usuarios.index")},{default:t(()=>[s(e(y),{variant:"outline",type:"button"},{default:t(()=>[...o[32]||(o[32]=[a(" Cancelar ",-1)])]),_:1})]),_:1},8,["href"]),s(e(y),{type:"submit",disabled:e(r).processing},{default:t(()=>[s(e(Y),{class:"mr-2 h-4 w-4"}),o[33]||(o[33]=a(" Guardar Cambios ",-1))]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{go as default};
