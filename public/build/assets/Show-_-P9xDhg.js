import{d as ue,c as h,r as Q,i as m,e as s,f as e,q as fe,w as a,g as l,t as r,b,j as g,v as S,h as i,m as d,n as U,F as E,k as N,y as ce,l as W}from"./app-7xyR-m9k.js";import{_ as me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-IaeqaR8S.js";import{_ as v,a as $,c as y,b as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-CReuLQBz.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-BiZLbiaz.js";import{c as _e,_ as X}from"./createLucideIcon-BHW7GH2w.js";import{_ as M}from"./index-CJwMPNxY.js";import{_ as ge}from"./Progress.vue_vue_type_script_setup_true_lang-C90zWHsm.js";import{_ as B,a as R,b as O}from"./index-DBV5xG3i.js";import{_ as pe,a as be,b as q,c as L}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BeBPakfV.js";import{_ as ve,a as ye}from"./index-zj9w0Xts.js";import{_ as xe,a as he,b as Z,c as P,d as $e,e as V}from"./TableHeader.vue_vue_type_script_setup_true_lang-D2X0nIwY.js";import{_ as ke,a as we,b as Ce,c as ze}from"./AccordionContent.vue_vue_type_script_setup_true_lang-CpvbhTFP.js";import{_ as Ee}from"./EvidenciaFilters.vue_vue_type_script_setup_true_lang-CmEJhOZf.js";import{n as Me,d as Pe,f as ee,e as te}from"./es-BDPlFIsO.js";import{A as Ve}from"./arrow-left-BB4kAVZL.js";import{S as Ae}from"./square-pen-DP4ph2Ro.js";import{F as Ne}from"./flag-BwDV6YNb.js";import{C as Fe}from"./clock-Bfw0PsKS.js";import{F as se}from"./file-text-Csvi5yWe.js";import{U as je}from"./users-DxO1ioML.js";import{I as Y}from"./image-CjSI0_ka.js";import{C as ae}from"./calendar-B2VoT2GB.js";import{C as Ie}from"./circle-alert-G4LTHznj.js";import{T as De}from"./tag-D9l1Fz0_.js";import{E as Se}from"./external-link-C6eedjZx.js";import{D as qe}from"./download-BvJLF2oS.js";import{p as le}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D7bvWZQx.js";import"./index-CibqRUKD.js";import"./floating-ui.vue-D7a9M-CI.js";import"./x-AUscfGYD.js";import"./Input.vue_vue_type_script_setup_true_lang-C-QPGjnN.js";import"./index-GgSRogrh.js";import"./shield-BFCmtSnc.js";import"./user-Q98JV0Mf.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bvj0qQYh.js";import"./chevron-right-BqA8yZy7.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-C8CCXt4p.js";import"./VisuallyHidden-nlSwqmSO.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CHqw9Jjt.js";import"./check-CZAJcmH0.js";import"./Label.vue_vue_type_script_setup_true_lang-BiVTJ9Rx.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DOGNokK7.js";import"./index-Bx55fh10.js";import"./map-pin-BktuFJSS.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DldqGpY3.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CysVlkbh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-BRk5CKI8.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B_XwzmD4.js";import"./target-CmVi2iGk.js";import"./vote-CiwDyUKE.js";import"./folder-open-B5pwoZSQ.js";import"./send-DYLuHc2q.js";import"./briefcase-BkluXdfI.js";import"./megaphone-sFZz7yIj.js";import"./user-check-yu7TJaIy.js";import"./clipboard-list-D0pu7x4V.js";import"./mail-CYtZwPcz.js";import"./message-square-BNJGeaQu.js";import"./panel-left-Boo9TgCe.js";import"./index-oH2oieyM.js";import"./RovingFocusItem-D5NY_G19.js";import"./utils-1mOUf2wR.js";import"./useArrowNavigation-B5rxJs06.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=_e("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function He(n,c,x){const[k,A]=Me(x==null?void 0:x.in,n,c),_=oe(k,A),j=Math.abs(Pe(k,A));k.setDate(k.getDate()-_*j);const H=+(oe(k,A)===-_),I=_*(j-H);return I===0?0:I}function oe(n,c){const x=n.getFullYear()-c.getFullYear()||n.getMonth()-c.getMonth()||n.getDate()-c.getDate()||n.getHours()-c.getHours()||n.getMinutes()-c.getMinutes()||n.getSeconds()-c.getSeconds()||n.getMilliseconds()-c.getMilliseconds();return x<0?-1:x>0?1:x}const Te={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ue={class:"flex items-center justify-between"},Be={class:"text-3xl font-bold"},Re={class:"text-muted-foreground mt-2"},Oe={class:"flex gap-2"},Ye={class:"grid gap-4 md:grid-cols-4"},Ge={class:"flex items-center gap-2"},Je={class:"font-medium capitalize"},Ke={class:"space-y-2"},Qe={class:"flex justify-between"},We={class:"text-2xl font-bold"},Xe={key:0,class:"flex items-center gap-2"},Ze={class:"font-medium"},et={key:1,class:"text-muted-foreground"},tt={key:0},st={class:"text-sm"},at={class:"grid gap-4 md:grid-cols-2"},lt={class:"flex items-center gap-2"},ot={class:"flex items-center gap-2"},nt={key:1},it={class:"border-t pt-4"},rt={class:"grid gap-2 text-sm"},dt={class:"flex justify-between"},ut={class:"flex justify-between"},ft={class:"flex justify-between"},ct={class:"grid gap-4 md:grid-cols-2"},mt={class:"text-sm font-medium text-muted-foreground mb-1"},_t={key:0,class:"text-red-500"},gt={class:"text-sm"},pt={key:0,class:"text-xs text-muted-foreground mt-1"},bt={key:0,class:"text-center py-4"},vt={class:"flex items-center gap-2"},yt={class:"flex flex-wrap gap-2"},xt={key:0,class:"flex items-center gap-3"},ht={class:"font-medium"},$t={class:"text-sm text-muted-foreground"},kt={key:1,class:"text-muted-foreground"},wt={key:0,class:"space-y-3"},Ct={class:"flex items-center gap-3"},zt={class:"font-medium"},Et={class:"text-sm text-muted-foreground"},Mt={key:1,class:"text-muted-foreground"},Pt={key:1},Vt={class:"flex items-center justify-between w-full pr-4"},At={class:"flex items-center gap-3"},Nt={class:"text-left"},Ft={class:"font-semibold"},jt={class:"text-sm text-gray-500"},It={class:"flex items-center gap-3"},Dt={class:"text-sm text-gray-600"},St={class:"text-sm"},qt=["href"],Lt={class:"text-center"},Ht={class:"text-center"},Tt={key:0,class:"space-y-4"},Ut={class:"flex-1"},Bt={class:"text-sm"},Rt={class:"font-medium"},Ot={class:"text-xs text-muted-foreground mt-1"},Yt={key:1,class:"text-muted-foreground"},la=ue({__name:"Show",props:{proyecto:{},hito:{},entregable:{},usuariosAsignados:{},actividades:{},camposPersonalizados:{},valoresCamposPersonalizados:{},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(n){const c=n,x=h(()=>c.usuariosAsignados||[]),k=h(()=>c.actividades||[]),A=Q("detalles"),_=Q({contrato_id:null,fecha_inicio:null,fecha_fin:null,tipo:null,estado:null,usuario_id:null}),j=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:c.proyecto.nombre,href:`/admin/proyectos/${c.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${c.proyecto.id}/hitos`},{title:c.hito.nombre,href:`/admin/proyectos/${c.proyecto.id}/hitos/${c.hito.id}`},{title:"Entregables",href:`/admin/proyectos/${c.proyecto.id}/hitos/${c.hito.id}/entregables`},{title:c.entregable.nombre}],H=h(()=>({pendiente:"secondary",en_progreso:"default",completado:"outline",cancelado:"destructive"})[c.entregable.estado]||"default"),I=h(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[c.entregable.estado]||c.entregable.estado),ne=h(()=>({baja:"text-blue-500",media:"text-yellow-500",alta:"text-red-500"})[c.entregable.prioridad]||""),p=h(()=>c.entregable.fecha_fin?He(new Date(c.entregable.fecha_fin),new Date):null);h(()=>{if(c.entregable.estado==="completado")return"Completado";if(c.entregable.estado==="cancelado")return"Cancelado";if(p.value!==null){if(p.value<0)return"Vencido";if(p.value===0)return"Vence hoy";if(p.value<=3)return"Por vencer"}return"En curso"});const D=f=>f?ee(le(f),"d 'de' MMMM 'de' yyyy",{locale:te}):"No definida",T=f=>ee(le(f),"d MMM yyyy 'a las' HH:mm",{locale:te}),ie=(f,t)=>{var o;if(t==null||t==="")return"No especificado";switch(f.tipo){case"date":return D(t);case"checkbox":return t?"Sí":"No";case"select":case"radio":const u=(o=f.opciones)==null?void 0:o.find(z=>z.value===t);return(u==null?void 0:u.label)||t;default:return t}},C=h(()=>c.entregable.evidencias||[]),re=h(()=>{const f=new Map;return C.value.forEach(t=>{var o;if((o=t.obligacion)!=null&&o.contrato){const u=t.obligacion.contrato;f.has(u.id)||f.set(u.id,{id:u.id,nombre:u.nombre})}}),Array.from(f.values())}),de=h(()=>{let f=C.value;return _.value.contrato_id&&(f=f.filter(t=>{var o;return((o=t.obligacion)==null?void 0:o.contrato_id)===_.value.contrato_id})),_.value.tipo&&(f=f.filter(t=>t.tipo_evidencia===_.value.tipo)),_.value.estado&&(f=f.filter(t=>t.estado===_.value.estado)),_.value.usuario_id&&(f=f.filter(t=>{var o;return((o=t.usuario)==null?void 0:o.id)===_.value.usuario_id})),(_.value.fecha_inicio||_.value.fecha_fin)&&(f=f.filter(t=>{const o=new Date(t.created_at);if(_.value.fecha_inicio){const u=new Date(_.value.fecha_inicio);if(o<u)return!1}if(_.value.fecha_fin){const u=new Date(_.value.fecha_fin);if(u.setHours(23,59,59,999),o>u)return!1}return!0})),f}),G=h(()=>{const f={};return de.value.forEach(t=>{var o;if((o=t.obligacion)!=null&&o.contrato){const u=t.obligacion.contrato.id;f[u]||(f[u]={contrato:t.obligacion.contrato,evidencias:[]}),f[u].evidencias.push({...t,obligacion_titulo:t.obligacion.titulo})}}),Object.values(f)});return(f,t)=>(d(),m(E,null,[s(e(fe),{title:`Entregable - ${n.entregable.nombre}`},null,8,["title"]),s(me,{breadcrumbs:j},{default:a(()=>[l("div",Te,[l("div",Ue,[l("div",null,[l("h1",Be,r(n.entregable.nombre),1),l("p",Re,' Entregable del hito "'+r(n.hito.nombre)+'" ',1)]),l("div",Oe,[s(e(S),{href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`},{default:a(()=>[s(e(X),{variant:"outline",size:"sm"},{default:a(()=>[s(e(Ve),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=i(" Volver ",-1))]),_:1})]),_:1},8,["href"]),n.canEdit?(d(),b(e(S),{key:0,href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables/${n.entregable.id}/edit`},{default:a(()=>[s(e(X),{variant:"outline",size:"sm"},{default:a(()=>[s(e(Ae),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=i(" Editar ",-1))]),_:1})]),_:1},8,["href"])):g("",!0)])]),l("div",Ye,[s(e(v),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[6]||(t[6]=[i("Estado",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[s(e(M),{variant:H.value,class:"text-sm"},{default:a(()=>[i(r(I.value),1)]),_:1},8,["variant"])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[7]||(t[7]=[i("Prioridad",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[l("div",Ge,[s(e(Ne),{class:U(["h-4 w-4",ne.value])},null,8,["class"]),l("span",Je,r(n.entregable.prioridad),1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[8]||(t[8]=[i("Progreso",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[l("div",Ke,[l("div",Qe,[l("span",We,r(n.entregable.porcentaje_completado)+"%",1)]),s(e(ge),{"model-value":n.entregable.porcentaje_completado},null,8,["model-value"])])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[9]||(t[9]=[i("Tiempo Restante",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[p.value!==null?(d(),m("div",Xe,[s(e(Fe),{class:U(["h-4 w-4",{"text-red-500":p.value<0,"text-yellow-500":p.value>=0&&p.value<=3,"text-green-500":p.value>3}])},null,8,["class"]),l("span",Ze,r(p.value<0?`Vencido hace ${Math.abs(p.value)} días`:p.value===0?"Vence hoy":`${p.value} días`),1)])):(d(),m("span",et,"Sin fecha límite"))]),_:1})]),_:1})]),s(e(pe),{modelValue:A.value,"onUpdate:modelValue":t[3]||(t[3]=o=>A.value=o),class:"flex-1"},{default:a(()=>[s(e(be),null,{default:a(()=>[s(e(q),{value:"detalles"},{default:a(()=>[s(e(se),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=i(" Detalles ",-1))]),_:1}),s(e(q),{value:"equipo"},{default:a(()=>[s(e(je),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=i(" Equipo ",-1))]),_:1}),s(e(q),{value:"evidencias"},{default:a(()=>[s(e(Y),{class:"h-4 w-4 mr-2"}),t[12]||(t[12]=i(" Evidencias ",-1)),C.value.length>0?(d(),b(e(M),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:a(()=>[i(r(C.value.length),1)]),_:1})):g("",!0)]),_:1}),s(e(q),{value:"actividad"},{default:a(()=>[s(e(Le),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=i(" Actividad ",-1))]),_:1})]),_:1}),s(e(L),{value:"detalles",class:"space-y-4"},{default:a(()=>[s(e(v),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[14]||(t[14]=[i("Información General",-1)])]),_:1})]),_:1}),s(e(y),{class:"space-y-4"},{default:a(()=>[n.entregable.descripcion?(d(),m("div",tt,[t[15]||(t[15]=l("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),l("p",st,r(n.entregable.descripcion),1)])):g("",!0),l("div",at,[l("div",null,[t[16]||(t[16]=l("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Inicio",-1)),l("div",lt,[s(e(ae),{class:"h-4 w-4"}),l("span",null,r(D(n.entregable.fecha_inicio)),1)])]),l("div",null,[t[17]||(t[17]=l("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Fin",-1)),l("div",ot,[s(e(ae),{class:"h-4 w-4"}),l("span",null,r(D(n.entregable.fecha_fin)),1)])])]),n.entregable.notas?(d(),m("div",nt,[t[18]||(t[18]=l("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Notas",-1)),s(e(ve),null,{default:a(()=>[s(e(Ie),{class:"h-4 w-4"}),s(e(ye),null,{default:a(()=>[i(r(n.entregable.notas),1)]),_:1})]),_:1})])):g("",!0),l("div",it,[t[22]||(t[22]=l("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Metadatos",-1)),l("div",rt,[l("div",dt,[t[19]||(t[19]=l("span",{class:"text-muted-foreground"},"Creado:",-1)),l("span",null,r(T(n.entregable.created_at)),1)]),l("div",ut,[t[20]||(t[20]=l("span",{class:"text-muted-foreground"},"Última actualización:",-1)),l("span",null,r(T(n.entregable.updated_at)),1)]),l("div",ft,[t[21]||(t[21]=l("span",{class:"text-muted-foreground"},"Orden de visualización:",-1)),l("span",null,r(n.entregable.orden),1)])])])]),_:1})]),_:1}),n.camposPersonalizados&&n.camposPersonalizados.length>0?(d(),b(e(v),{key:0},{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[23]||(t[23]=[i("Campos Personalizados",-1)])]),_:1}),s(e(w),null,{default:a(()=>[...t[24]||(t[24]=[i(" Información adicional específica del entregable ",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[l("div",ct,[(d(!0),m(E,null,N(n.camposPersonalizados,o=>{var u;return d(),m("div",{key:o.id},[l("h4",mt,[i(r(o.nombre)+" ",1),o.es_requerido?(d(),m("span",_t,"*")):g("",!0)]),l("p",gt,r(ie(o,(u=n.valoresCamposPersonalizados)==null?void 0:u[o.id])),1),o.descripcion?(d(),m("p",pt,r(o.descripcion),1)):g("",!0)])}),128))]),!n.camposPersonalizados||n.camposPersonalizados.length===0?(d(),m("div",bt,[...t[25]||(t[25]=[l("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):g("",!0)]),_:1})]),_:1})):g("",!0),n.entregable.etiquetas&&n.entregable.etiquetas.length>0?(d(),b(e(v),{key:1},{default:a(()=>[s(e($),null,{default:a(()=>[l("div",vt,[s(e(De),{class:"h-5 w-5"}),s(e(F),null,{default:a(()=>[...t[26]||(t[26]=[i("Etiquetas",-1)])]),_:1})]),s(e(w),null,{default:a(()=>[...t[27]||(t[27]=[i(" Etiquetas asignadas a este entregable para su organización y categorización ",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[l("div",yt,[(d(!0),m(E,null,N(n.entregable.etiquetas,o=>(d(),b(e(M),{key:o.id,variant:"outline",class:"px-3 py-1.5",style:ce({borderColor:o.color||"#94a3b8",color:o.color||"#64748b",backgroundColor:`${o.color}15`||"#f1f5f9"})},{default:a(()=>[i(r(o.nombre),1)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})):g("",!0)]),_:1}),s(e(L),{value:"equipo",class:"space-y-4"},{default:a(()=>[s(e(v),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[28]||(t[28]=[i("Responsable Principal",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[n.entregable.responsable?(d(),m("div",xt,[s(e(B),{class:"h-10 w-10"},{default:a(()=>[n.entregable.responsable.avatar?(d(),b(e(R),{key:0,src:n.entregable.responsable.avatar},null,8,["src"])):g("",!0),s(e(O),null,{default:a(()=>[i(r(n.entregable.responsable.name.substring(0,2).toUpperCase()),1)]),_:1})]),_:1}),l("div",null,[l("p",ht,r(n.entregable.responsable.name),1),l("p",$t,r(n.entregable.responsable.email),1)])])):(d(),m("p",kt,"No hay responsable asignado"))]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[29]||(t[29]=[i("Colaboradores",-1)])]),_:1}),s(e(w),null,{default:a(()=>[i(r(x.value.length)+" usuarios asignados ",1)]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[x.value.length>0?(d(),m("div",wt,[(d(!0),m(E,null,N(x.value,o=>(d(),m("div",{key:o.user_id,class:"flex items-center justify-between p-3 bg-muted rounded-lg"},[l("div",Ct,[s(e(B),{class:"h-8 w-8"},{default:a(()=>[o.user.avatar?(d(),b(e(R),{key:0,src:o.user.avatar},null,8,["src"])):g("",!0),s(e(O),null,{default:a(()=>[i(r(o.user.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),l("div",null,[l("p",zt,r(o.user.name),1),l("p",Et,r(o.user.email),1)])]),s(e(M),{variant:"outline"},{default:a(()=>[i(r(o.rol),1)]),_:2},1024)]))),128))])):(d(),m("p",Mt,"No hay colaboradores asignados"))]),_:1})]),_:1})]),_:1}),s(e(L),{value:"evidencias",class:"space-y-4 mt-6"},{default:a(()=>[C.value.length>0?(d(),b(Ee,{key:0,modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=o=>_.value=o),contratos:re.value,evidencias:C.value},null,8,["modelValue","contratos","evidencias"])):g("",!0),G.value.length>0?(d(),m("div",Pt,[s(e(ke),{type:"multiple",class:"space-y-4",collapsible:""},{default:a(()=>[(d(!0),m(E,null,N(G.value,o=>(d(),b(e(we),{key:o.contrato.id,value:`contrato-${o.contrato.id}`,class:"border rounded-lg bg-card"},{default:a(()=>[s(e(Ce),{class:"px-4 py-3 hover:no-underline hover:bg-gray-50 dark:hover:bg-gray-800 rounded-t-lg"},{default:a(()=>[l("div",Vt,[l("div",At,[s(e(se),{class:"h-5 w-5 text-gray-500"}),l("div",Nt,[l("div",Ft,r(o.contrato.nombre),1),l("div",jt," Contrato #"+r(o.contrato.id),1)])]),l("div",It,[s(e(M),{variant:"secondary"},{default:a(()=>[i(r(o.evidencias.length)+" evidencia(s) ",1)]),_:2},1024),s(e(S),{href:`/admin/contratos/${o.contrato.id}`,onClick:t[1]||(t[1]=W(()=>{},["stop"])),class:"text-blue-600 hover:text-blue-800 flex items-center gap-1"},{default:a(()=>[t[30]||(t[30]=i(" Ver contrato ",-1)),s(e(Se),{class:"h-3 w-3"})]),_:1},8,["href"])])])]),_:2},1024),s(e(ze),{class:"px-4 pb-4"},{default:a(()=>[s(e(xe),null,{default:a(()=>[s(e(he),null,{default:a(()=>[s(e(Z),null,{default:a(()=>[s(e(P),null,{default:a(()=>[...t[31]||(t[31]=[i("Tipo",-1)])]),_:1}),s(e(P),null,{default:a(()=>[...t[32]||(t[32]=[i("Obligación",-1)])]),_:1}),s(e(P),null,{default:a(()=>[...t[33]||(t[33]=[i("Descripción",-1)])]),_:1}),s(e(P),null,{default:a(()=>[...t[34]||(t[34]=[i("Usuario",-1)])]),_:1}),s(e(P),null,{default:a(()=>[...t[35]||(t[35]=[i("Estado",-1)])]),_:1}),s(e(P),null,{default:a(()=>[...t[36]||(t[36]=[i("Fecha",-1)])]),_:1}),s(e(P),{class:"text-right"},{default:a(()=>[...t[37]||(t[37]=[i("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(e($e),null,{default:a(()=>[(d(!0),m(E,null,N(o.evidencias,u=>(d(),b(e(Z),{key:u.id,class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[s(e(S),{href:`/admin/contratos/${o.contrato.id}/evidencias/${u.id}`,class:"contents"},{default:a(()=>[s(e(V),null,{default:a(()=>[s(e(M),{variant:"outline"},{default:a(()=>[i(r(u.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),s(e(V),null,{default:a(()=>[i(r(u.obligacion_titulo),1)]),_:2},1024),s(e(V),null,{default:a(()=>[l("span",Dt,r(u.descripcion||"-"),1)]),_:2},1024),s(e(V),null,{default:a(()=>{var z;return[l("span",St,r(((z=u.usuario)==null?void 0:z.name)||"-"),1)]}),_:2},1024),s(e(V),null,{default:a(()=>[s(e(M),{class:U({"bg-yellow-100 text-yellow-800":u.estado==="pendiente","bg-green-100 text-green-800":u.estado==="aprobada","bg-red-100 text-red-800":u.estado==="rechazada"})},{default:a(()=>[i(r(u.estado),1)]),_:2},1032,["class"])]),_:2},1024),s(e(V),null,{default:a(()=>[i(r(D(u.created_at)),1)]),_:2},1024),s(e(V),{class:"text-right"},{default:a(()=>[u.archivo_url?(d(),m("a",{key:0,href:u.archivo_url,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800",onClick:t[2]||(t[2]=W(()=>{},["stop"]))},[s(e(qe),{class:"h-4 w-4"})],8,qt)):g("",!0)]),_:2},1024)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])):C.value.length===0?(d(),b(e(v),{key:2},{default:a(()=>[s(e(y),{class:"py-8"},{default:a(()=>[l("div",Lt,[s(e(Y),{class:"mx-auto h-12 w-12 text-gray-400"}),t[38]||(t[38]=l("p",{class:"mt-2 text-sm text-gray-600"},"No hay evidencias asociadas",-1)),t[39]||(t[39]=l("p",{class:"text-xs text-gray-500 mt-1"},"Las evidencias se asocian desde los contratos",-1))])]),_:1})]),_:1})):(d(),b(e(v),{key:3},{default:a(()=>[s(e(y),{class:"py-8"},{default:a(()=>[l("div",Ht,[s(e(Y),{class:"mx-auto h-12 w-12 text-gray-400"}),t[40]||(t[40]=l("p",{class:"mt-2 text-sm text-gray-600"},"No hay evidencias que coincidan con los filtros",-1)),t[41]||(t[41]=l("p",{class:"text-xs text-gray-500 mt-1"},"Intenta ajustar los criterios de búsqueda",-1))])]),_:1})]),_:1}))]),_:1}),s(e(L),{value:"actividad",class:"space-y-4"},{default:a(()=>[s(e(v),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[42]||(t[42]=[i("Historial de Actividad",-1)])]),_:1}),s(e(w),null,{default:a(()=>[...t[43]||(t[43]=[i(" Registro de cambios y eventos del entregable ",-1)])]),_:1})]),_:1}),s(e(y),null,{default:a(()=>[k.value.length>0?(d(),m("div",Tt,[(d(!0),m(E,null,N(k.value,o=>{var u;return d(),m("div",{key:o.id,class:"flex gap-3 pb-4 border-b last:border-0"},[s(e(B),{class:"h-8 w-8"},{default:a(()=>{var z;return[(z=o.causer)!=null&&z.avatar?(d(),b(e(R),{key:0,src:o.causer.avatar},null,8,["src"])):g("",!0),s(e(O),null,{default:a(()=>{var J,K;return[i(r(((K=(J=o.causer)==null?void 0:J.name)==null?void 0:K.substring(0,2).toUpperCase())||"SI"),1)]}),_:2},1024)]}),_:2},1024),l("div",Ut,[l("p",Bt,[l("span",Rt,r(((u=o.causer)==null?void 0:u.name)||"Sistema"),1),i(" "+r(o.description),1)]),l("p",Ot,r(T(o.created_at)),1)])])}),128))])):(d(),m("p",Yt,"No hay actividad registrada"))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{la as default};
