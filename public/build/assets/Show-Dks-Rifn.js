import{_ as Ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BgilFYR4.js";import{d as pe,r as G,c as De,i as c,j as m,e as t,g as l,h as n,f as e,t as r,F as P,k as V,w as s,b as y,m as i,n as M,q as ze,v as Me,y as Pe,s as U}from"./app-DyDecVrT.js";import{c as h,_ as v,a as w,b as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-BuhHtk84.js";import{_ as te}from"./CardDescription.vue_vue_type_script_setup_true_lang-C6L8777e.js";import{_ as E}from"./createLucideIcon-BwdUYYzo.js";import{_}from"./index-m3ghty3H.js";import{_ as je}from"./Progress.vue_vue_type_script_setup_true_lang-DQ38hQVn.js";import{_ as Se,a as Ne,b as se,c as ae}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BSC6hZ_N.js";import{_ as Te,a as Ve,b as He}from"./index-CT8XWwjl.js";import{_ as he,a as ve,b as _e,c as be,d as $e,e as ke,f as we,g as Ce}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CsudpFag.js";import{_ as Ae}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-CSXRfRCW.js";import{t as q}from"./index-d_u7LaGe.js";import{_ as le,a as oe,b as ie,c as ne,d as I,e as z}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DlUAJ3wP.js";import{C as ce}from"./circle-alert-Bvf_HuO8.js";import{C as L}from"./clock-3fn1twzS.js";import{C as Q}from"./circle-check-big-BqYUn3Th.js";import{F as re}from"./file-text-CAPFRzk1.js";import{C as fe}from"./chevron-right-E1uKy6vs.js";import{C as ge}from"./SelectValue.vue_vue_type_script_setup_true_lang-U4o3oQo-.js";import{C as ue}from"./calendar-DfExCvzB.js";import{U as W}from"./user-Cy82gxzM.js";import{U as Be}from"./users-CsrJ7kjm.js";import{E as de}from"./ellipsis-DeI8oXfl.js";import{S as me}from"./square-pen-BlQFaVga.js";import{T as X}from"./trash-2-C-QiAuMz.js";import{f as Y,e as Z}from"./es-BDPlFIsO.js";import{A as Fe}from"./arrow-left-CA26wpVL.js";import{C as Re}from"./copy-DqkZVKYE.js";import{T as Ue}from"./target-p6K750Ym.js";import{T as qe}from"./tag-DLET6lC0.js";import{P as ye}from"./plus-AnKxd2ZI.js";import{p as xe}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-CRAe9h2W.js";import"./index-BBNLqMKn.js";import"./floating-ui.vue-CHDJ2Kr9.js";import"./x-BjprgZQl.js";import"./Input.vue_vue_type_script_setup_true_lang-BmoYhMxG.js";import"./index-BNjYEiC7.js";import"./shield-D3pC1MNI.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DEQiuFCZ.js";import"./VisuallyHidden-3cCb0SUn.js";import"./Label.vue_vue_type_script_setup_true_lang-Bkyt-HEy.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Q88f5Wd9.js";import"./map-pin-Dx4ca6bm.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DIukCrmq.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-Cmu5Q6fw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-BIWf8QzU.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DflCLCME.js";import"./vote-w5kKYk1r.js";import"./folder-open-CxtqkkdK.js";import"./send-Dv7fIvk5.js";import"./briefcase-tw-IGJ4e.js";import"./megaphone-B2qQIwij.js";import"./user-check-Bk-CJry2.js";import"./clipboard-list-DFQ0FIuz.js";import"./mail-90vIR3DR.js";import"./message-square-CX7YOG1_.js";import"./external-link-ClHepNQE.js";import"./panel-left-CTsZEDb1.js";import"./check-Az9et91K.js";import"./index-CNFw1Ir9.js";import"./RovingFocusItem-DMi8O4UB.js";import"./utils-BPCrnLP_.js";import"./DialogTrigger-D63D2muR.js";const Ie={class:"space-y-6"},Le={key:0,class:"space-y-6"},Oe={key:0},Ge={class:"font-semibold mb-3 flex items-center gap-2"},Je={class:"space-y-2"},Ke={class:"flex items-start justify-between"},Qe={class:"flex-1"},We={class:"flex items-center gap-2 mb-2"},Xe={class:"font-medium"},Ye={key:0,class:"ml-8 space-y-3"},Ze={key:0,class:"text-sm text-muted-foreground"},et={class:"flex flex-wrap gap-4 text-sm"},tt={class:"flex items-center gap-1 text-muted-foreground"},st={key:0,class:"flex items-center gap-1 text-muted-foreground"},at={key:1,class:"flex items-center gap-2"},lt={class:"flex gap-1"},ot={key:1},it={class:"font-semibold mb-3 flex items-center gap-2"},nt={class:"space-y-2"},dt={class:"flex items-start justify-between"},rt={class:"flex-1"},ut={class:"flex items-center gap-2 mb-2"},mt={class:"font-medium"},ct={key:0,class:"ml-8 space-y-3"},ft={key:0,class:"text-sm text-muted-foreground"},gt={class:"flex flex-wrap gap-4 text-sm"},yt={class:"flex items-center gap-1 text-muted-foreground"},xt={key:0,class:"flex items-center gap-1 text-muted-foreground"},pt={key:2},ht={class:"font-semibold mb-3 flex items-center gap-2"},vt={class:"space-y-2"},_t={class:"flex items-start justify-between"},bt={class:"flex-1"},$t={class:"flex items-center gap-2 mb-2"},kt={class:"font-medium line-through text-muted-foreground"},wt={class:"ml-7 space-y-1 text-sm text-muted-foreground"},Ct={key:0,class:"flex items-center gap-1"},Et={key:1,class:"flex items-center gap-1"},Dt={key:2,class:"italic mt-2"},zt={key:3,class:"text-center py-8"},Mt=pe({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(o,{emit:p}){const H=o,j=p;G([]);const A=G([]),B=G(!1),S=G(null),b=De(()=>({pendientes:H.entregables.filter(f=>f.estado==="pendiente"),en_progreso:H.entregables.filter(f=>f.estado==="en_progreso"),completados:H.entregables.filter(f=>f.estado==="completado"),cancelados:H.entregables.filter(f=>f.estado==="cancelado")})),ee=f=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[f]||"bg-gray-100 text-gray-800",J=f=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[f]||"bg-gray-100 text-gray-600",F=f=>f?Y(new Date(f),"dd MMM yyyy",{locale:Z}):"Sin fecha",R=f=>f?Y(new Date(f),"dd MMM yyyy 'a las' HH:mm",{locale:Z}):"-",D=f=>{if(!f)return null;const u=Math.ceil((new Date(f).getTime()-new Date().getTime())/(1e3*60*60*24));return u<0?`Vencido hace ${Math.abs(u)} días`:u===0?"Vence hoy":u===1?"Vence mañana":`${u} días`},K=f=>{const u=A.value.indexOf(f);u===-1?A.value.push(f):A.value.splice(u,1)},x=f=>A.value.includes(f),a=f=>{j("edit",f)},g=f=>{S.value=f,B.value=!0},$=()=>{S.value&&j("delete",S.value),B.value=!1,S.value=null},N=f=>{j("complete",f)},O=(f,u)=>{j("update-status",f,u)};return(f,u)=>(i(),c("div",Ie,[o.viewMode==="list"?(i(),c("div",Le,[b.value.pendientes.length>0?(i(),c("div",Oe,[l("h3",Ge,[t(e(ce),{class:"h-5 w-5 text-yellow-600"}),n(" Pendientes ("+r(b.value.pendientes.length)+") ",1)]),l("div",Je,[(i(!0),c(P,null,V(b.value.pendientes,d=>(i(),y(e(v),{key:d.id},{default:s(()=>[t(e(h),{class:"p-4"},{default:s(()=>{var T;return[l("div",Ke,[l("div",Qe,[l("div",We,[t(e(E),{onClick:k=>K(d.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[x(d.id)?(i(),y(e(ge),{key:1,class:"h-4 w-4"})):(i(),y(e(fe),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),l("h4",Xe,r(d.nombre),1),t(e(_),{class:M(J(d.prioridad)),variant:"outline"},{default:s(()=>[n(r(d.prioridad),1)]),_:2},1032,["class"]),t(e(_),{class:M(ee(d.estado))},{default:s(()=>[n(r(d.estado),1)]),_:2},1032,["class"])]),x(d.id)?(i(),c("div",Ye,[d.descripcion?(i(),c("p",Ze,r(d.descripcion),1)):m("",!0),l("div",et,[l("div",tt,[t(e(ue),{class:"h-4 w-4"}),l("span",null,r(F(d.fecha_inicio))+" - "+r(F(d.fecha_fin)),1)]),d.responsable?(i(),c("div",st,[t(e(W),{class:"h-4 w-4"}),l("span",null,r(d.responsable.name),1)])):m("",!0),D(d.fecha_fin)?(i(),c("div",{key:1,class:M(["flex items-center gap-1",{"text-red-600":(T=D(d.fecha_fin))==null?void 0:T.includes("Vencido")}])},[t(e(L),{class:"h-4 w-4"}),l("span",null,r(D(d.fecha_fin)),1)],2)):m("",!0)]),d.usuarios&&d.usuarios.length>0?(i(),c("div",at,[t(e(Be),{class:"h-4 w-4 text-muted-foreground"}),l("div",lt,[(i(!0),c(P,null,V(d.usuarios,k=>(i(),y(e(_),{key:k.id,variant:"secondary"},{default:s(()=>[n(r(k.name),1)]),_:2},1024))),128))])])):m("",!0)])):m("",!0)]),o.canEdit||o.canDelete||o.canComplete?(i(),y(e(le),{key:0},{default:s(()=>[t(e(oe),{asChild:""},{default:s(()=>[t(e(E),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(de),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(ie),{align:"end"},{default:s(()=>[t(e(ne),null,{default:s(()=>[...u[1]||(u[1]=[n("Acciones",-1)])]),_:1}),t(e(I)),o.canComplete?(i(),y(e(z),{key:0,onClick:k=>N(d)},{default:s(()=>[t(e(Q),{class:"h-4 w-4 mr-2"}),u[2]||(u[2]=n(" Marcar como completado ",-1))]),_:1},8,["onClick"])):m("",!0),o.canEdit?(i(),y(e(z),{key:1,onClick:k=>O(d,"en_progreso")},{default:s(()=>[t(e(L),{class:"h-4 w-4 mr-2"}),u[3]||(u[3]=n(" Marcar en progreso ",-1))]),_:1},8,["onClick"])):m("",!0),o.canEdit?(i(),y(e(z),{key:2,onClick:k=>a(d)},{default:s(()=>[t(e(me),{class:"h-4 w-4 mr-2"}),u[4]||(u[4]=n(" Editar ",-1))]),_:1},8,["onClick"])):m("",!0),o.canDelete?(i(),y(e(I),{key:3})):m("",!0),o.canDelete?(i(),y(e(z),{key:4,onClick:k=>g(d),class:"text-red-600"},{default:s(()=>[t(e(X),{class:"h-4 w-4 mr-2"}),u[5]||(u[5]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)):m("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):m("",!0),b.value.en_progreso.length>0?(i(),c("div",ot,[l("h3",it,[t(e(L),{class:"h-5 w-5 text-blue-600"}),n(" En Progreso ("+r(b.value.en_progreso.length)+") ",1)]),l("div",nt,[(i(!0),c(P,null,V(b.value.en_progreso,d=>(i(),y(e(v),{key:d.id,class:"border-l-4 border-l-blue-500"},{default:s(()=>[t(e(h),{class:"p-4"},{default:s(()=>{var T;return[l("div",dt,[l("div",rt,[l("div",ut,[t(e(E),{onClick:k=>K(d.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[x(d.id)?(i(),y(e(ge),{key:1,class:"h-4 w-4"})):(i(),y(e(fe),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),l("h4",mt,r(d.nombre),1),t(e(_),{class:M(J(d.prioridad)),variant:"outline"},{default:s(()=>[n(r(d.prioridad),1)]),_:2},1032,["class"]),t(e(_),{class:"bg-blue-100 text-blue-800"},{default:s(()=>[...u[6]||(u[6]=[n(" En Progreso ",-1)])]),_:1})]),x(d.id)?(i(),c("div",ct,[d.descripcion?(i(),c("p",ft,r(d.descripcion),1)):m("",!0),l("div",gt,[l("div",yt,[t(e(ue),{class:"h-4 w-4"}),l("span",null,"Fecha límite: "+r(F(d.fecha_fin)),1)]),d.responsable?(i(),c("div",xt,[t(e(W),{class:"h-4 w-4"}),l("span",null,r(d.responsable.name),1)])):m("",!0),D(d.fecha_fin)?(i(),c("div",{key:1,class:M(["flex items-center gap-1",{"text-red-600":(T=D(d.fecha_fin))==null?void 0:T.includes("Vencido")}])},[t(e(L),{class:"h-4 w-4"}),l("span",null,r(D(d.fecha_fin)),1)],2)):m("",!0)])])):m("",!0)]),o.canEdit||o.canDelete||o.canComplete?(i(),y(e(le),{key:0},{default:s(()=>[t(e(oe),{asChild:""},{default:s(()=>[t(e(E),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(de),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(ie),{align:"end"},{default:s(()=>[t(e(ne),null,{default:s(()=>[...u[7]||(u[7]=[n("Acciones",-1)])]),_:1}),t(e(I)),o.canComplete?(i(),y(e(z),{key:0,onClick:k=>N(d)},{default:s(()=>[t(e(Q),{class:"h-4 w-4 mr-2"}),u[8]||(u[8]=n(" Marcar como completado ",-1))]),_:1},8,["onClick"])):m("",!0),o.canEdit?(i(),y(e(z),{key:1,onClick:k=>a(d)},{default:s(()=>[t(e(me),{class:"h-4 w-4 mr-2"}),u[9]||(u[9]=n(" Editar ",-1))]),_:1},8,["onClick"])):m("",!0),o.canDelete?(i(),y(e(I),{key:2})):m("",!0),o.canDelete?(i(),y(e(z),{key:3,onClick:k=>g(d),class:"text-red-600"},{default:s(()=>[t(e(X),{class:"h-4 w-4 mr-2"}),u[10]||(u[10]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)):m("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):m("",!0),b.value.completados.length>0?(i(),c("div",pt,[l("h3",ht,[t(e(Q),{class:"h-5 w-5 text-green-600"}),n(" Completados ("+r(b.value.completados.length)+") ",1)]),l("div",vt,[(i(!0),c(P,null,V(b.value.completados,d=>(i(),y(e(v),{key:d.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:s(()=>[t(e(h),{class:"p-4"},{default:s(()=>[l("div",_t,[l("div",bt,[l("div",$t,[t(e(Q),{class:"h-5 w-5 text-green-600"}),l("h4",kt,r(d.nombre),1),t(e(_),{class:"bg-green-100 text-green-800"},{default:s(()=>[...u[11]||(u[11]=[n(" Completado ",-1)])]),_:1})]),l("div",wt,[d.completado_at?(i(),c("div",Ct,[t(e(L),{class:"h-3 w-3"}),l("span",null,"Completado: "+r(R(d.completado_at)),1)])):m("",!0),d.completado_por_usuario?(i(),c("div",Et,[t(e(W),{class:"h-3 w-3"}),l("span",null,"Por: "+r(d.completado_por_usuario.name),1)])):m("",!0),d.notas_completado?(i(),c("p",Dt,' "'+r(d.notas_completado)+'" ',1)):m("",!0)])]),o.canEdit||o.canDelete?(i(),y(e(le),{key:0},{default:s(()=>[t(e(oe),{asChild:""},{default:s(()=>[t(e(E),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(de),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(ie),{align:"end"},{default:s(()=>[t(e(ne),null,{default:s(()=>[...u[12]||(u[12]=[n("Acciones",-1)])]),_:1}),t(e(I)),o.canEdit?(i(),y(e(z),{key:0,onClick:T=>O(d,"pendiente")},{default:s(()=>[t(e(ce),{class:"h-4 w-4 mr-2"}),u[13]||(u[13]=n(" Reabrir ",-1))]),_:1},8,["onClick"])):m("",!0),o.canDelete?(i(),y(e(I),{key:1})):m("",!0),o.canDelete?(i(),y(e(z),{key:2,onClick:T=>g(d),class:"text-red-600"},{default:s(()=>[t(e(X),{class:"h-4 w-4 mr-2"}),u[14]||(u[14]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)):m("",!0)])]),_:2},1024)]),_:2},1024))),128))])])):m("",!0),o.entregables.length===0?(i(),c("div",zt,[t(e(re),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),u[15]||(u[15]=l("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):m("",!0)])):m("",!0),t(e(he),{open:B.value,"onUpdate:open":u[0]||(u[0]=d=>B.value=d)},{default:s(()=>[t(e(ve),null,{default:s(()=>[t(e(_e),null,{default:s(()=>[t(e(be),null,{default:s(()=>[...u[16]||(u[16]=[n("¿Estás seguro?",-1)])]),_:1}),t(e($e),null,{default:s(()=>{var d;return[n(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+r((d=S.value)==null?void 0:d.nombre)+'". ',1)]}),_:1})]),_:1}),t(e(ke),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...u[17]||(u[17]=[n("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:$},{default:s(()=>[...u[18]||(u[18]=[n(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Pt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},jt={class:"flex items-center justify-between"},St={class:"text-2xl font-bold"},Nt={class:"text-muted-foreground"},Tt={class:"flex items-center gap-2"},Vt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Ht={class:"text-2xl font-bold"},At={class:"text-2xl font-bold"},Bt={class:"text-xs text-muted-foreground"},Ft={class:"text-sm font-medium"},Rt={class:"text-sm font-medium"},Ut={key:0,class:"text-xs text-muted-foreground"},qt={key:0},It={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Lt={class:"grid gap-4 md:grid-cols-2"},Ot={class:"text-sm text-muted-foreground"},Gt={class:"text-sm text-muted-foreground"},Jt={class:"text-sm text-muted-foreground"},Kt={class:"space-y-2"},Qt={class:"flex items-center justify-between text-sm"},Wt={class:"flex items-center justify-between text-sm"},Xt={class:"flex items-center justify-between text-sm"},Yt={class:"flex items-center gap-2"},Zt={class:"flex flex-wrap gap-2"},es={class:"space-y-3"},ts={key:0},ss={class:"text-sm text-muted-foreground"},as={key:1},ls={class:"grid gap-4 md:grid-cols-2"},os={class:"font-semibold mb-1"},is={key:0,class:"text-red-500"},ns={class:"text-sm text-muted-foreground"},ds={key:0,class:"text-xs text-muted-foreground mt-1"},rs={key:0,class:"text-center py-4"},us={class:"grid gap-4 md:grid-cols-2 text-sm"},ms={class:"font-medium"},cs={class:"font-medium"},fs={key:0},gs={class:"font-medium"},ys={key:1},xs={class:"font-medium"},ps={class:"flex justify-between items-center"},hs={key:0,class:"space-y-4"},vs={class:"flex-1"},_s={class:"text-sm"},bs={class:"font-medium"},$s={class:"text-xs text-muted-foreground mt-1"},ks={key:1,class:"text-sm text-muted-foreground text-center py-8"},Va=pe({__name:"Show",props:{hito:{},proyecto:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageEntregables:{type:Boolean},estadisticas:{},actividades:{},camposPersonalizados:{},valoresCamposPersonalizados:{}},setup(o){const p=o,H=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:p.proyecto.nombre,href:`/admin/proyectos/${p.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${p.proyecto.id}/hitos`},{title:p.hito.nombre,href:"#"}],j=G("detalles"),A=()=>{U.visit(`/admin/proyectos/${p.proyecto.id}/hitos/${p.hito.id}/edit`)},B=()=>{U.delete(`/admin/proyectos/${p.proyecto.id}/hitos/${p.hito.id}`,{onSuccess:()=>{q.success("Hito eliminado exitosamente")},onError:()=>{q.error("Error al eliminar el hito")}})},S=()=>{U.post(`/admin/proyectos/${p.proyecto.id}/hitos/${p.hito.id}/duplicar`,{},{onSuccess:()=>{q.success("Hito duplicado exitosamente")},onError:()=>{q.error("Error al duplicar el hito")}})},b=()=>{U.visit(`/admin/proyectos/${p.proyecto.id}/hitos/${p.hito.id}/entregables/create`)},ee=x=>{U.visit(`/admin/proyectos/${p.proyecto.id}/hitos/${p.hito.id}/entregables/${x.id}/edit`)},J=x=>{U.delete(`/admin/proyectos/${p.proyecto.id}/hitos/${p.hito.id}/entregables/${x.id}`,{onSuccess:()=>{q.success("Entregable eliminado exitosamente")},onError:()=>{q.error("Error al eliminar el entregable")}})},F=x=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[x]||"bg-gray-100 text-gray-800",R=x=>x?Y(xe(x),"dd MMM yyyy",{locale:Z}):"No definida",D=x=>x?Y(xe(x),"dd MMM yyyy 'a las' HH:mm",{locale:Z}):"No definida",K=(x,a)=>{var g;if(a==null||a==="")return"No especificado";switch(x.tipo){case"date":return R(a);case"checkbox":return a?"Sí":"No";case"select":case"radio":const $=(g=x.opciones)==null?void 0:g.find(N=>N.value===a);return($==null?void 0:$.label)||a;default:return a}};return(x,a)=>(i(),c(P,null,[t(e(ze),{title:`Hito: ${o.hito.nombre}`},null,8,["title"]),t(Ee,{breadcrumbs:H},{default:s(()=>[l("div",Pt,[l("div",jt,[l("div",null,[l("h1",St,r(o.hito.nombre),1),l("p",Nt,"Proyecto: "+r(o.proyecto.nombre),1)]),l("div",Tt,[t(e(Me),{href:`/admin/proyectos/${o.proyecto.id}/hitos`},{default:s(()=>[t(e(E),{variant:"outline",size:"sm"},{default:s(()=>[t(e(Fe),{class:"h-4 w-4 mr-2"}),a[1]||(a[1]=n(" Volver ",-1))]),_:1})]),_:1},8,["href"]),o.canEdit?(i(),y(e(E),{key:0,onClick:A,size:"sm",variant:"outline"},{default:s(()=>[t(e(me),{class:"h-4 w-4 mr-2"}),a[2]||(a[2]=n(" Editar ",-1))]),_:1})):m("",!0),t(e(E),{onClick:S,size:"sm",variant:"outline"},{default:s(()=>[t(e(Re),{class:"h-4 w-4 mr-2"}),a[3]||(a[3]=n(" Duplicar ",-1))]),_:1}),o.canDelete?(i(),y(e(he),{key:1},{default:s(()=>[t(e(Ae),{asChild:""},{default:s(()=>[t(e(E),{variant:"destructive",size:"sm"},{default:s(()=>[t(e(X),{class:"h-4 w-4 mr-2"}),a[4]||(a[4]=n(" Eliminar ",-1))]),_:1})]),_:1}),t(e(ve),null,{default:s(()=>[t(e(_e),null,{default:s(()=>[t(e(be),null,{default:s(()=>[...a[5]||(a[5]=[n("¿Estás seguro?",-1)])]),_:1}),t(e($e),null,{default:s(()=>[...a[6]||(a[6]=[n(" Esta acción no se puede deshacer. Se eliminará permanentemente el hito y todos sus entregables asociados. ",-1)])]),_:1})]),_:1}),t(e(ke),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...a[7]||(a[7]=[n("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:B},{default:s(()=>[...a[8]||(a[8]=[n(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):m("",!0)])]),l("div",Vt,[t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...a[9]||(a[9]=[n("Estado",-1)])]),_:1}),t(e(Ue),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[t(e(_),{class:M([F(o.hito.estado),"mt-1"])},{default:s(()=>[n(r(o.hito.estado),1)]),_:1},8,["class"])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...a[10]||(a[10]=[n("Progreso",-1)])]),_:1}),t(e(L),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Ht,r(o.hito.porcentaje_completado)+"%",1),t(e(je),{value:o.hito.porcentaje_completado,class:"mt-2 h-1"},null,8,["value"])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...a[11]||(a[11]=[n("Entregables",-1)])]),_:1}),t(e(re),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[l("div",At,r(o.estadisticas.total_entregables),1),l("p",Bt,r(o.estadisticas.entregables_completados)+" completados ",1)]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...a[12]||(a[12]=[n("Fecha Fin",-1)])]),_:1}),t(e(ue),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Ft,r(R(o.hito.fecha_fin)),1),o.estadisticas.dias_restantes!==null?(i(),c("p",{key:0,class:M(["text-xs",o.estadisticas.esta_vencido?"text-red-600":"text-muted-foreground"])},r(o.estadisticas.esta_vencido?`Vencido hace ${Math.abs(o.estadisticas.dias_restantes)} días`:`${o.estadisticas.dias_restantes} días restantes`),3)):m("",!0)]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...a[13]||(a[13]=[n("Responsable",-1)])]),_:1}),t(e(W),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(h),null,{default:s(()=>{var g;return[l("div",Rt,r(((g=o.hito.responsable)==null?void 0:g.name)||"Sin asignar"),1),o.hito.responsable?(i(),c("p",Ut,r(o.hito.responsable.email),1)):m("",!0)]}),_:1})]),_:1})]),t(e(Se),{modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=g=>j.value=g),class:"flex-1"},{default:s(()=>[t(e(Ne),null,{default:s(()=>[t(e(se),{value:"detalles"},{default:s(()=>[...a[14]||(a[14]=[n("Detalles",-1)])]),_:1}),t(e(se),{value:"entregables"},{default:s(()=>[a[15]||(a[15]=n(" Entregables ",-1)),t(e(_),{variant:"secondary",class:"ml-2"},{default:s(()=>[n(r(o.estadisticas.total_entregables),1)]),_:1})]),_:1}),t(e(se),{value:"actividad"},{default:s(()=>[...a[16]||(a[16]=[n("Actividad",-1)])]),_:1})]),_:1}),t(e(ae),{value:"detalles",class:"space-y-4"},{default:s(()=>[t(e(v),null,{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...a[17]||(a[17]=[n("Información General",-1)])]),_:1})]),_:1}),t(e(h),{class:"space-y-4"},{default:s(()=>[o.hito.descripcion?(i(),c("div",qt,[a[18]||(a[18]=l("h3",{class:"font-semibold mb-2"},"Descripción",-1)),l("p",It,r(o.hito.descripcion),1)])):m("",!0),l("div",Lt,[l("div",null,[a[19]||(a[19]=l("h3",{class:"font-semibold mb-2"},"Fecha de Inicio",-1)),l("p",Ot,r(R(o.hito.fecha_inicio)),1)]),l("div",null,[a[20]||(a[20]=l("h3",{class:"font-semibold mb-2"},"Fecha de Fin",-1)),l("p",Gt,r(R(o.hito.fecha_fin)),1)]),l("div",null,[a[21]||(a[21]=l("h3",{class:"font-semibold mb-2"},"Orden",-1)),l("p",Jt,r(o.hito.orden),1)]),l("div",null,[a[22]||(a[22]=l("h3",{class:"font-semibold mb-2"},"Estado",-1)),t(e(_),{class:M(F(o.hito.estado))},{default:s(()=>[n(r(o.hito.estado),1)]),_:1},8,["class"])])]),l("div",null,[a[26]||(a[26]=l("h3",{class:"font-semibold mb-2"},"Resumen de Entregables",-1)),l("div",Kt,[l("div",Qt,[a[23]||(a[23]=l("span",{class:"text-muted-foreground"},"Pendientes",-1)),t(e(_),{variant:"outline"},{default:s(()=>[n(r(o.estadisticas.entregables_pendientes),1)]),_:1})]),l("div",Wt,[a[24]||(a[24]=l("span",{class:"text-muted-foreground"},"En Progreso",-1)),t(e(_),{variant:"outline",class:"bg-blue-50"},{default:s(()=>[n(r(o.estadisticas.entregables_en_progreso),1)]),_:1})]),l("div",Xt,[a[25]||(a[25]=l("span",{class:"text-muted-foreground"},"Completados",-1)),t(e(_),{variant:"outline",class:"bg-green-50"},{default:s(()=>[n(r(o.estadisticas.entregables_completados),1)]),_:1})])])])]),_:1})]),_:1}),o.hito.etiquetas&&o.hito.etiquetas.length>0?(i(),y(e(v),{key:0},{default:s(()=>[t(e(w),null,{default:s(()=>[l("div",Yt,[t(e(qe),{class:"h-5 w-5"}),t(e(C),null,{default:s(()=>[...a[27]||(a[27]=[n("Etiquetas",-1)])]),_:1})]),t(e(te),null,{default:s(()=>[...a[28]||(a[28]=[n(" Etiquetas asignadas a este hito para su organización y categorización ",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",Zt,[(i(!0),c(P,null,V(o.hito.etiquetas,g=>(i(),y(e(_),{key:g.id,variant:"outline",class:"px-3 py-1.5",style:Pe({borderColor:g.color||"#94a3b8",color:g.color||"#64748b",backgroundColor:`${g.color}15`||"#f1f5f9"})},{default:s(()=>[n(r(g.nombre),1)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})):m("",!0),o.hito.parent_id||o.hito.ruta_completa?(i(),y(e(v),{key:1},{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...a[29]||(a[29]=[n("Jerarquía",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",es,[o.hito.ruta_completa?(i(),c("div",ts,[a[30]||(a[30]=l("h3",{class:"font-semibold mb-2"},"Ruta Completa",-1)),l("p",ss,r(o.hito.ruta_completa),1)])):m("",!0),o.hito.nivel!==void 0?(i(),c("div",as,[a[31]||(a[31]=l("h3",{class:"font-semibold mb-2"},"Nivel",-1)),t(e(_),{variant:"outline"},{default:s(()=>[n("Nivel "+r(o.hito.nivel),1)]),_:1})])):m("",!0)])]),_:1})]),_:1})):m("",!0),o.camposPersonalizados&&o.camposPersonalizados.length>0?(i(),y(e(v),{key:2},{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...a[32]||(a[32]=[n("Campos Personalizados",-1)])]),_:1}),t(e(te),null,{default:s(()=>[...a[33]||(a[33]=[n(" Información adicional específica del hito ",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",ls,[(i(!0),c(P,null,V(o.camposPersonalizados,g=>{var $;return i(),c("div",{key:g.id},[l("h3",os,[n(r(g.nombre)+" ",1),g.es_requerido?(i(),c("span",is,"*")):m("",!0)]),l("p",ns,r(K(g,($=o.valoresCamposPersonalizados)==null?void 0:$[g.id])),1),g.descripcion?(i(),c("p",ds,r(g.descripcion),1)):m("",!0)])}),128))]),!o.camposPersonalizados||o.camposPersonalizados.length===0?(i(),c("div",rs,[...a[34]||(a[34]=[l("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):m("",!0)]),_:1})]),_:1})):m("",!0),t(e(v),null,{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...a[35]||(a[35]=[n("Información del Sistema",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[l("div",us,[l("div",null,[a[36]||(a[36]=l("span",{class:"text-muted-foreground"},"Creado el:",-1)),l("p",ms,r(D(o.hito.created_at)),1)]),l("div",null,[a[37]||(a[37]=l("span",{class:"text-muted-foreground"},"Última actualización:",-1)),l("p",cs,r(D(o.hito.updated_at)),1)]),o.hito.created_by_usuario?(i(),c("div",fs,[a[38]||(a[38]=l("span",{class:"text-muted-foreground"},"Creado por:",-1)),l("p",gs,r(o.hito.created_by_usuario.name),1)])):m("",!0),o.hito.updated_by_usuario?(i(),c("div",ys,[a[39]||(a[39]=l("span",{class:"text-muted-foreground"},"Actualizado por:",-1)),l("p",xs,r(o.hito.updated_by_usuario.name),1)])):m("",!0)])]),_:1})]),_:1})]),_:1}),t(e(ae),{value:"entregables",class:"space-y-4"},{default:s(()=>[l("div",ps,[a[41]||(a[41]=l("h2",{class:"text-lg font-semibold"},"Lista de Entregables",-1)),o.canManageEntregables?(i(),y(e(E),{key:0,onClick:b,size:"sm"},{default:s(()=>[t(e(ye),{class:"h-4 w-4 mr-2"}),a[40]||(a[40]=n(" Nuevo Entregable ",-1))]),_:1})):m("",!0)]),t(Mt,{entregables:o.hito.entregables||[],"can-edit":o.canManageEntregables,"can-delete":o.canManageEntregables,onEdit:ee,onDelete:J},null,8,["entregables","can-edit","can-delete"]),!o.hito.entregables||o.hito.entregables.length===0?(i(),y(e(v),{key:0},{default:s(()=>[t(e(h),{class:"text-center py-8"},{default:s(()=>[t(e(re),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a[43]||(a[43]=l("p",{class:"text-muted-foreground mb-4"},"No hay entregables asignados a este hito",-1)),o.canManageEntregables?(i(),y(e(E),{key:0,onClick:b,variant:"outline"},{default:s(()=>[t(e(ye),{class:"h-4 w-4 mr-2"}),a[42]||(a[42]=n(" Crear Primer Entregable ",-1))]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0)]),_:1}),t(e(ae),{value:"actividad",class:"space-y-4"},{default:s(()=>[t(e(v),null,{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...a[44]||(a[44]=[n("Historial de Actividad",-1)])]),_:1}),t(e(te),null,{default:s(()=>[...a[45]||(a[45]=[n(" Registro de cambios y actividades relacionadas con este hito ",-1)])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[o.actividades&&o.actividades.length>0?(i(),c("div",hs,[(i(!0),c(P,null,V(o.actividades,g=>{var $;return i(),c("div",{key:g.id,class:"flex gap-3 pb-4 border-b last:border-0"},[t(e(Te),{class:"h-8 w-8"},{default:s(()=>{var N;return[(N=g.causer)!=null&&N.avatar?(i(),y(e(Ve),{key:0,src:g.causer.avatar},null,8,["src"])):m("",!0),t(e(He),null,{default:s(()=>{var O,f;return[n(r(((f=(O=g.causer)==null?void 0:O.name)==null?void 0:f.substring(0,2).toUpperCase())||"SI"),1)]}),_:2},1024)]}),_:2},1024),l("div",vs,[l("p",_s,[l("span",bs,r((($=g.causer)==null?void 0:$.name)||"Sistema"),1),n(" "+r(g.description),1)]),l("p",$s,r(D(g.created_at)),1)])])}),128))])):(i(),c("p",ks," No hay actividad registrada "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Va as default};
