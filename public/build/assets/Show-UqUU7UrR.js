import{d as ue,c as b,r as Q,i as m,e as u,f as s,u as e,p as fe,w as a,g as o,t as i,b as y,j as _,P as S,h as r,n as B,F as V,k as N,l as W}from"./app-Dt2sukkq.js";import{_ as me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BAX2dDyG.js";import{_ as h,a as $,c as x,b as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3D16Ztn.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-CpG721w4.js";import{c as ce,_ as X}from"./createLucideIcon-ADYiFz1p.js";import{_ as A}from"./index-DZUQ23bj.js";import{_ as pe}from"./Progress.vue_vue_type_script_setup_true_lang-DLCooW4I.js";import{_ as T,a as R,b as O}from"./index-C_zthh-d.js";import{_ as _e,a as ge,b as L,c as q}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BouWFRCo.js";import{_ as ve,a as be}from"./index-Dgfn2Mhg.js";import{_ as ye,a as he,b as Z,c as z,d as xe,e as M}from"./TableHeader.vue_vue_type_script_setup_true_lang-VWehj9vh.js";import{_ as $e,a as we,b as ke,c as Ce}from"./AccordionContent.vue_vue_type_script_setup_true_lang-DDgiFNgA.js";import{_ as Pe}from"./EvidenciaFilters.vue_vue_type_script_setup_true_lang-B_oZhf2v.js";import{n as ze,d as Me,f as ee,e as te}from"./es-BDPlFIsO.js";import{A as Ee}from"./arrow-left-CcnTTf_x.js";import{S as Ve}from"./square-pen-CgZnJT5s.js";import{F as Ae}from"./flag-DF2NzOSS.js";import{C as Ne}from"./clock-CqEtmu8F.js";import{F as se}from"./file-text-CrhgvIVS.js";import{U as Fe}from"./users-ARKz5o5z.js";import{I as Y}from"./image-JTgFiJsP.js";import{C as ae}from"./calendar-CJYt0g6k.js";import{C as je}from"./circle-alert-Bny28mZr.js";import{E as Ie}from"./external-link-GRGCmSzE.js";import{D as De}from"./download-DEj7ZS5k.js";import{p as le}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Dk5ovgNn.js";import"./index-DYtBqwXi.js";import"./floating-ui.vue-DhUnkJfc.js";import"./x-BpcUsJXn.js";import"./Input.vue_vue_type_script_setup_true_lang-B3JXaiF3.js";import"./index-YHYyGAco.js";import"./shield-Cyievtug.js";import"./user-Ca0ja34E.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Ch_KWbnG.js";import"./chevron-right-CkT1ue1I.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-V01rVzxA.js";import"./VisuallyHidden-H3fpmsLx.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-XTf0O-lR.js";import"./check-DzU-qwfx.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-DCZhrf2e.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CwNj20AO.js";import"./index-CTkeagVR.js";import"./map-pin-D1rtVCPc.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-TmplCPgM.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BlnKZeFr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-CLsbi7q1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BcP5joWp.js";import"./tag-euMStffd.js";import"./target-BlHWusLl.js";import"./vote-D-ho2Upj.js";import"./folder-open-BwpEZUDw.js";import"./send-D6GePUDU.js";import"./briefcase-CdnBkwVO.js";import"./megaphone-BWKT3hAA.js";import"./user-check-Cjdi1Rn1.js";import"./clipboard-list-DeVxPgd5.js";import"./mail-Cjqn3QRK.js";import"./message-square-CtTij58U.js";import"./panel-left-CvMlf3oX.js";import"./index-C5GM-A1h.js";import"./RovingFocusItem-BUHtT0jY.js";import"./utils-CveDOlSQ.js";import"./useArrowNavigation-B5rxJs06.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=ce("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function Le(g,f,v){const[w,E]=ze(v==null?void 0:v.in,g,f),c=oe(w,E),j=Math.abs(Me(w,E));w.setDate(w.getDate()-c*j);const H=+(oe(w,E)===-c),I=c*(j-H);return I===0?0:I}function oe(g,f){const v=g.getFullYear()-f.getFullYear()||g.getMonth()-f.getMonth()||g.getDate()-f.getDate()||g.getHours()-f.getHours()||g.getMinutes()-f.getMinutes()||g.getSeconds()-f.getSeconds()||g.getMilliseconds()-f.getMilliseconds();return v<0?-1:v>0?1:v}const qe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},He={class:"flex items-center justify-between"},Ue={class:"text-3xl font-bold"},Be={class:"text-muted-foreground mt-2"},Te={class:"flex gap-2"},Re={class:"grid gap-4 md:grid-cols-4"},Oe={class:"flex items-center gap-2"},Ye={class:"font-medium capitalize"},Ge={class:"space-y-2"},Je={class:"flex justify-between"},Ke={class:"text-2xl font-bold"},Qe={key:0,class:"flex items-center gap-2"},We={class:"font-medium"},Xe={key:1,class:"text-muted-foreground"},Ze={key:0},et={class:"text-sm"},tt={class:"grid gap-4 md:grid-cols-2"},st={class:"flex items-center gap-2"},at={class:"flex items-center gap-2"},lt={key:1},ot={class:"border-t pt-4"},nt={class:"grid gap-2 text-sm"},rt={class:"flex justify-between"},it={class:"flex justify-between"},dt={class:"flex justify-between"},ut={class:"grid gap-4 md:grid-cols-2"},ft={class:"text-sm font-medium text-muted-foreground mb-1"},mt={key:0,class:"text-red-500"},ct={class:"text-sm"},pt={key:0,class:"text-xs text-muted-foreground mt-1"},_t={key:0,class:"text-center py-4"},gt={key:0,class:"flex items-center gap-3"},vt={class:"font-medium"},bt={class:"text-sm text-muted-foreground"},yt={key:1,class:"text-muted-foreground"},ht={key:0,class:"space-y-3"},xt={class:"flex items-center gap-3"},$t={class:"font-medium"},wt={class:"text-sm text-muted-foreground"},kt={key:1,class:"text-muted-foreground"},Ct={key:1},Pt={class:"flex items-center justify-between w-full pr-4"},zt={class:"flex items-center gap-3"},Mt={class:"text-left"},Et={class:"font-semibold"},Vt={class:"text-sm text-gray-500"},At={class:"flex items-center gap-3"},Nt={class:"text-sm text-gray-600"},Ft={class:"text-sm"},jt=["href"],It={class:"text-center"},Dt={class:"text-center"},St={key:0,class:"space-y-4"},Lt={class:"flex-1"},qt={class:"text-sm"},Ht={class:"font-medium"},Ut={class:"text-xs text-muted-foreground mt-1"},Bt={key:1,class:"text-muted-foreground"},ta=ue({__name:"Show",props:{proyecto:{},hito:{},entregable:{},usuariosAsignados:{},actividades:{},camposPersonalizados:{},valoresCamposPersonalizados:{},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(g){const f=g,v=b(()=>f.usuariosAsignados||[]),w=b(()=>f.actividades||[]),E=Q("detalles"),c=Q({contrato_id:null,fecha_inicio:null,fecha_fin:null,tipo:null,estado:null,usuario_id:null}),j=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:f.proyecto.nombre,href:`/admin/proyectos/${f.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${f.proyecto.id}/hitos`},{title:f.hito.nombre,href:`/admin/proyectos/${f.proyecto.id}/hitos/${f.hito.id}`},{title:"Entregables",href:`/admin/proyectos/${f.proyecto.id}/hitos/${f.hito.id}/entregables`},{title:f.entregable.nombre}],H=b(()=>({pendiente:"secondary",en_progreso:"default",completado:"outline",cancelado:"destructive"})[f.entregable.estado]||"default"),I=b(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[f.entregable.estado]||f.entregable.estado),ne=b(()=>({baja:"text-blue-500",media:"text-yellow-500",alta:"text-red-500"})[f.entregable.prioridad]||""),p=b(()=>f.entregable.fecha_fin?Le(new Date(f.entregable.fecha_fin),new Date):null);b(()=>{if(f.entregable.estado==="completado")return"Completado";if(f.entregable.estado==="cancelado")return"Cancelado";if(p.value!==null){if(p.value<0)return"Vencido";if(p.value===0)return"Vence hoy";if(p.value<=3)return"Por vencer"}return"En curso"});const D=l=>l?ee(le(l),"d 'de' MMMM 'de' yyyy",{locale:te}):"No definida",U=l=>ee(le(l),"d MMM yyyy 'a las' HH:mm",{locale:te}),re=(l,t)=>{var n;if(t==null||t==="")return"No especificado";switch(l.tipo){case"date":return D(t);case"checkbox":return t?"Sí":"No";case"select":case"radio":const d=(n=l.opciones)==null?void 0:n.find(C=>C.value===t);return(d==null?void 0:d.label)||t;default:return t}},k=b(()=>f.entregable.evidencias||[]),ie=b(()=>{const l=new Map;return k.value.forEach(t=>{var n;if((n=t.obligacion)!=null&&n.contrato){const d=t.obligacion.contrato;l.has(d.id)||l.set(d.id,{id:d.id,nombre:d.nombre})}}),Array.from(l.values())}),de=b(()=>{let l=k.value;return c.value.contrato_id&&(l=l.filter(t=>{var n;return((n=t.obligacion)==null?void 0:n.contrato_id)===c.value.contrato_id})),c.value.tipo&&(l=l.filter(t=>t.tipo_evidencia===c.value.tipo)),c.value.estado&&(l=l.filter(t=>t.estado===c.value.estado)),c.value.usuario_id&&(l=l.filter(t=>{var n;return((n=t.usuario)==null?void 0:n.id)===c.value.usuario_id})),(c.value.fecha_inicio||c.value.fecha_fin)&&(l=l.filter(t=>{const n=new Date(t.created_at);if(c.value.fecha_inicio){const d=new Date(c.value.fecha_inicio);if(n<d)return!1}if(c.value.fecha_fin){const d=new Date(c.value.fecha_fin);if(d.setHours(23,59,59,999),n>d)return!1}return!0})),l}),G=b(()=>{const l={};return de.value.forEach(t=>{var n;if((n=t.obligacion)!=null&&n.contrato){const d=t.obligacion.contrato.id;l[d]||(l[d]={contrato:t.obligacion.contrato,evidencias:[]}),l[d].evidencias.push({...t,obligacion_titulo:t.obligacion.titulo})}}),Object.values(l)});return(l,t)=>(u(),m(V,null,[s(e(fe),{title:`Entregable - ${l.entregable.nombre}`},null,8,["title"]),s(me,{breadcrumbs:j},{default:a(()=>[o("div",qe,[o("div",He,[o("div",null,[o("h1",Ue,i(l.entregable.nombre),1),o("p",Be,' Entregable del hito "'+i(l.hito.nombre)+'" ',1)]),o("div",Te,[s(e(S),{href:`/admin/proyectos/${l.proyecto.id}/hitos/${l.hito.id}/entregables`},{default:a(()=>[s(e(X),{variant:"outline",size:"sm"},{default:a(()=>[s(e(Ee),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=r(" Volver ",-1))]),_:1})]),_:1},8,["href"]),l.canEdit?(u(),y(e(S),{key:0,href:`/admin/proyectos/${l.proyecto.id}/hitos/${l.hito.id}/entregables/${l.entregable.id}/edit`},{default:a(()=>[s(e(X),{variant:"outline",size:"sm"},{default:a(()=>[s(e(Ve),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=r(" Editar ",-1))]),_:1})]),_:1},8,["href"])):_("",!0)])]),o("div",Re,[s(e(h),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(P),null,{default:a(()=>[...t[6]||(t[6]=[r("Estado",-1)])]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[s(e(A),{variant:H.value,class:"text-sm"},{default:a(()=>[r(i(I.value),1)]),_:1},8,["variant"])]),_:1})]),_:1}),s(e(h),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(P),null,{default:a(()=>[...t[7]||(t[7]=[r("Prioridad",-1)])]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[o("div",Oe,[s(e(Ae),{class:B(["h-4 w-4",ne.value])},null,8,["class"]),o("span",Ye,i(l.entregable.prioridad),1)])]),_:1})]),_:1}),s(e(h),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(P),null,{default:a(()=>[...t[8]||(t[8]=[r("Progreso",-1)])]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[o("div",Ge,[o("div",Je,[o("span",Ke,i(l.entregable.porcentaje_completado)+"%",1)]),s(e(pe),{"model-value":l.entregable.porcentaje_completado},null,8,["model-value"])])]),_:1})]),_:1}),s(e(h),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(P),null,{default:a(()=>[...t[9]||(t[9]=[r("Tiempo Restante",-1)])]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[p.value!==null?(u(),m("div",Qe,[s(e(Ne),{class:B(["h-4 w-4",{"text-red-500":p.value<0,"text-yellow-500":p.value>=0&&p.value<=3,"text-green-500":p.value>3}])},null,8,["class"]),o("span",We,i(p.value<0?`Vencido hace ${Math.abs(p.value)} días`:p.value===0?"Vence hoy":`${p.value} días`),1)])):(u(),m("span",Xe,"Sin fecha límite"))]),_:1})]),_:1})]),s(e(_e),{modelValue:E.value,"onUpdate:modelValue":t[3]||(t[3]=n=>E.value=n),class:"flex-1"},{default:a(()=>[s(e(ge),null,{default:a(()=>[s(e(L),{value:"detalles"},{default:a(()=>[s(e(se),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=r(" Detalles ",-1))]),_:1}),s(e(L),{value:"equipo"},{default:a(()=>[s(e(Fe),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=r(" Equipo ",-1))]),_:1}),s(e(L),{value:"evidencias"},{default:a(()=>[s(e(Y),{class:"h-4 w-4 mr-2"}),t[12]||(t[12]=r(" Evidencias ",-1)),k.value.length>0?(u(),y(e(A),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:a(()=>[r(i(k.value.length),1)]),_:1})):_("",!0)]),_:1}),s(e(L),{value:"actividad"},{default:a(()=>[s(e(Se),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=r(" Actividad ",-1))]),_:1})]),_:1}),s(e(q),{value:"detalles",class:"space-y-4"},{default:a(()=>[s(e(h),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[14]||(t[14]=[r("Información General",-1)])]),_:1})]),_:1}),s(e(x),{class:"space-y-4"},{default:a(()=>[l.entregable.descripcion?(u(),m("div",Ze,[t[15]||(t[15]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),o("p",et,i(l.entregable.descripcion),1)])):_("",!0),o("div",tt,[o("div",null,[t[16]||(t[16]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Inicio",-1)),o("div",st,[s(e(ae),{class:"h-4 w-4"}),o("span",null,i(D(l.entregable.fecha_inicio)),1)])]),o("div",null,[t[17]||(t[17]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Fin",-1)),o("div",at,[s(e(ae),{class:"h-4 w-4"}),o("span",null,i(D(l.entregable.fecha_fin)),1)])])]),l.entregable.notas?(u(),m("div",lt,[t[18]||(t[18]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Notas",-1)),s(e(ve),null,{default:a(()=>[s(e(je),{class:"h-4 w-4"}),s(e(be),null,{default:a(()=>[r(i(l.entregable.notas),1)]),_:1})]),_:1})])):_("",!0),o("div",ot,[t[22]||(t[22]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Metadatos",-1)),o("div",nt,[o("div",rt,[t[19]||(t[19]=o("span",{class:"text-muted-foreground"},"Creado:",-1)),o("span",null,i(U(l.entregable.created_at)),1)]),o("div",it,[t[20]||(t[20]=o("span",{class:"text-muted-foreground"},"Última actualización:",-1)),o("span",null,i(U(l.entregable.updated_at)),1)]),o("div",dt,[t[21]||(t[21]=o("span",{class:"text-muted-foreground"},"Orden de visualización:",-1)),o("span",null,i(l.entregable.orden),1)])])])]),_:1})]),_:1}),l.camposPersonalizados&&l.camposPersonalizados.length>0?(u(),y(e(h),{key:0},{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[23]||(t[23]=[r("Campos Personalizados",-1)])]),_:1}),s(e(P),null,{default:a(()=>[...t[24]||(t[24]=[r(" Información adicional específica del entregable ",-1)])]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[o("div",ut,[(u(!0),m(V,null,N(l.camposPersonalizados,n=>{var d;return u(),m("div",{key:n.id},[o("h4",ft,[r(i(n.nombre)+" ",1),n.es_requerido?(u(),m("span",mt,"*")):_("",!0)]),o("p",ct,i(re(n,(d=l.valoresCamposPersonalizados)==null?void 0:d[n.id])),1),n.descripcion?(u(),m("p",pt,i(n.descripcion),1)):_("",!0)])}),128))]),!l.camposPersonalizados||l.camposPersonalizados.length===0?(u(),m("div",_t,[...t[25]||(t[25]=[o("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):_("",!0)]),_:1})]),_:1})):_("",!0)]),_:1}),s(e(q),{value:"equipo",class:"space-y-4"},{default:a(()=>[s(e(h),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[26]||(t[26]=[r("Responsable Principal",-1)])]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[l.entregable.responsable?(u(),m("div",gt,[s(e(T),{class:"h-10 w-10"},{default:a(()=>[l.entregable.responsable.avatar?(u(),y(e(R),{key:0,src:l.entregable.responsable.avatar},null,8,["src"])):_("",!0),s(e(O),null,{default:a(()=>[r(i(l.entregable.responsable.name.substring(0,2).toUpperCase()),1)]),_:1})]),_:1}),o("div",null,[o("p",vt,i(l.entregable.responsable.name),1),o("p",bt,i(l.entregable.responsable.email),1)])])):(u(),m("p",yt,"No hay responsable asignado"))]),_:1})]),_:1}),s(e(h),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[27]||(t[27]=[r("Colaboradores",-1)])]),_:1}),s(e(P),null,{default:a(()=>[r(i(v.value.length)+" usuarios asignados ",1)]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[v.value.length>0?(u(),m("div",ht,[(u(!0),m(V,null,N(v.value,n=>(u(),m("div",{key:n.user_id,class:"flex items-center justify-between p-3 bg-muted rounded-lg"},[o("div",xt,[s(e(T),{class:"h-8 w-8"},{default:a(()=>[n.user.avatar?(u(),y(e(R),{key:0,src:n.user.avatar},null,8,["src"])):_("",!0),s(e(O),null,{default:a(()=>[r(i(n.user.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),o("div",null,[o("p",$t,i(n.user.name),1),o("p",wt,i(n.user.email),1)])]),s(e(A),{variant:"outline"},{default:a(()=>[r(i(n.rol),1)]),_:2},1024)]))),128))])):(u(),m("p",kt,"No hay colaboradores asignados"))]),_:1})]),_:1})]),_:1}),s(e(q),{value:"evidencias",class:"space-y-4 mt-6"},{default:a(()=>[k.value.length>0?(u(),y(Pe,{key:0,modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=n=>c.value=n),contratos:ie.value,evidencias:k.value},null,8,["modelValue","contratos","evidencias"])):_("",!0),G.value.length>0?(u(),m("div",Ct,[s(e($e),{type:"multiple",class:"space-y-4",collapsible:""},{default:a(()=>[(u(!0),m(V,null,N(G.value,n=>(u(),y(e(we),{key:n.contrato.id,value:`contrato-${n.contrato.id}`,class:"border rounded-lg bg-card"},{default:a(()=>[s(e(ke),{class:"px-4 py-3 hover:no-underline hover:bg-gray-50 dark:hover:bg-gray-800 rounded-t-lg"},{default:a(()=>[o("div",Pt,[o("div",zt,[s(e(se),{class:"h-5 w-5 text-gray-500"}),o("div",Mt,[o("div",Et,i(n.contrato.nombre),1),o("div",Vt," Contrato #"+i(n.contrato.id),1)])]),o("div",At,[s(e(A),{variant:"secondary"},{default:a(()=>[r(i(n.evidencias.length)+" evidencia(s) ",1)]),_:2},1024),s(e(S),{href:`/admin/contratos/${n.contrato.id}`,onClick:t[1]||(t[1]=W(()=>{},["stop"])),class:"text-blue-600 hover:text-blue-800 flex items-center gap-1"},{default:a(()=>[t[28]||(t[28]=r(" Ver contrato ",-1)),s(e(Ie),{class:"h-3 w-3"})]),_:2},1032,["href"])])])]),_:2},1024),s(e(Ce),{class:"px-4 pb-4"},{default:a(()=>[s(e(ye),null,{default:a(()=>[s(e(he),null,{default:a(()=>[s(e(Z),null,{default:a(()=>[s(e(z),null,{default:a(()=>[...t[29]||(t[29]=[r("Tipo",-1)])]),_:1}),s(e(z),null,{default:a(()=>[...t[30]||(t[30]=[r("Obligación",-1)])]),_:1}),s(e(z),null,{default:a(()=>[...t[31]||(t[31]=[r("Descripción",-1)])]),_:1}),s(e(z),null,{default:a(()=>[...t[32]||(t[32]=[r("Usuario",-1)])]),_:1}),s(e(z),null,{default:a(()=>[...t[33]||(t[33]=[r("Estado",-1)])]),_:1}),s(e(z),null,{default:a(()=>[...t[34]||(t[34]=[r("Fecha",-1)])]),_:1}),s(e(z),{class:"text-right"},{default:a(()=>[...t[35]||(t[35]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(e(xe),null,{default:a(()=>[(u(!0),m(V,null,N(n.evidencias,d=>(u(),y(e(Z),{key:d.id,class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[s(e(S),{href:`/admin/contratos/${n.contrato.id}/evidencias/${d.id}`,class:"contents"},{default:a(()=>[s(e(M),null,{default:a(()=>[s(e(A),{variant:"outline"},{default:a(()=>[r(i(d.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),s(e(M),null,{default:a(()=>[r(i(d.obligacion_titulo),1)]),_:2},1024),s(e(M),null,{default:a(()=>[o("span",Nt,i(d.descripcion||"-"),1)]),_:2},1024),s(e(M),null,{default:a(()=>{var C;return[o("span",Ft,i(((C=d.usuario)==null?void 0:C.name)||"-"),1)]}),_:2},1024),s(e(M),null,{default:a(()=>[s(e(A),{class:B({"bg-yellow-100 text-yellow-800":d.estado==="pendiente","bg-green-100 text-green-800":d.estado==="aprobada","bg-red-100 text-red-800":d.estado==="rechazada"})},{default:a(()=>[r(i(d.estado),1)]),_:2},1032,["class"])]),_:2},1024),s(e(M),null,{default:a(()=>[r(i(D(d.created_at)),1)]),_:2},1024),s(e(M),{class:"text-right"},{default:a(()=>[d.archivo_url?(u(),m("a",{key:0,href:d.archivo_url,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800",onClick:t[2]||(t[2]=W(()=>{},["stop"]))},[s(e(De),{class:"h-4 w-4"})],8,jt)):_("",!0)]),_:2},1024)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])):k.value.length===0?(u(),y(e(h),{key:2},{default:a(()=>[s(e(x),{class:"py-8"},{default:a(()=>[o("div",It,[s(e(Y),{class:"mx-auto h-12 w-12 text-gray-400"}),t[36]||(t[36]=o("p",{class:"mt-2 text-sm text-gray-600"},"No hay evidencias asociadas",-1)),t[37]||(t[37]=o("p",{class:"text-xs text-gray-500 mt-1"},"Las evidencias se asocian desde los contratos",-1))])]),_:1})]),_:1})):(u(),y(e(h),{key:3},{default:a(()=>[s(e(x),{class:"py-8"},{default:a(()=>[o("div",Dt,[s(e(Y),{class:"mx-auto h-12 w-12 text-gray-400"}),t[38]||(t[38]=o("p",{class:"mt-2 text-sm text-gray-600"},"No hay evidencias que coincidan con los filtros",-1)),t[39]||(t[39]=o("p",{class:"text-xs text-gray-500 mt-1"},"Intenta ajustar los criterios de búsqueda",-1))])]),_:1})]),_:1}))]),_:1}),s(e(q),{value:"actividad",class:"space-y-4"},{default:a(()=>[s(e(h),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[40]||(t[40]=[r("Historial de Actividad",-1)])]),_:1}),s(e(P),null,{default:a(()=>[...t[41]||(t[41]=[r(" Registro de cambios y eventos del entregable ",-1)])]),_:1})]),_:1}),s(e(x),null,{default:a(()=>[w.value.length>0?(u(),m("div",St,[(u(!0),m(V,null,N(w.value,n=>{var d;return u(),m("div",{key:n.id,class:"flex gap-3 pb-4 border-b last:border-0"},[s(e(T),{class:"h-8 w-8"},{default:a(()=>{var C;return[(C=n.causer)!=null&&C.avatar?(u(),y(e(R),{key:0,src:n.causer.avatar},null,8,["src"])):_("",!0),s(e(O),null,{default:a(()=>{var J,K;return[r(i(((K=(J=n.causer)==null?void 0:J.name)==null?void 0:K.substring(0,2).toUpperCase())||"SI"),1)]}),_:2},1024)]}),_:2},1024),o("div",Lt,[o("p",qt,[o("span",Ht,i(((d=n.causer)==null?void 0:d.name)||"Sistema"),1),r(" "+i(n.description),1)]),o("p",Ut,i(U(n.created_at)),1)])])}),128))])):(u(),m("p",Bt,"No hay actividad registrada"))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{ta as default};
