import{d as Oe,r as j,c as x,u as Le,p as Me,o as Pe,B as Re,i as f,e as u,f as a,q as Ge,w as _,g as m,b,j as g,t as v,s as Ye,h,m as l,l as He,T as We,F as V,k as F,n as A,J as Je,at as Ke,a4 as Qe,O as Xe}from"./app-C3mLbtbl.js";import{_ as q}from"./createLucideIcon-Fg4HAD8C.js";import{_ as xe,a as ye,b as he,c as ke}from"./CardTitle.vue_vue_type_script_setup_true_lang-ChdQIG_3.js";import{_ as Ze}from"./Checkbox.vue_vue_type_script_setup_true_lang-DwgHpKzB.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-gOL_tRnO.js";import{_ as L}from"./Label.vue_vue_type_script_setup_true_lang-qck6u1Er.js";import{_ as Ie}from"./Progress.vue_vue_type_script_setup_true_lang-B4a4wGVi.js";import{_ as ea,a as aa,b as ta,c as ra,d as ia}from"./SelectValue.vue_vue_type_script_setup_true_lang-ChlTSLUD.js";import{_ as sa}from"./Textarea.vue_vue_type_script_setup_true_lang-DneN6s98.js";import{_ as oa}from"./FileUploadField.vue_vue_type_script_setup_true_lang-1mlkWCbh.js";import{_ as da,a as la}from"./ConvocatoriaSeleccionada.vue_vue_type_script_setup_true_lang-CpZLcs5L.js";import{u as na,_ as ua,a as ca,b as fa}from"./useConditionalFields-wITfKKYt.js";import{_ as ma}from"./UserLayout.vue_vue_type_script_setup_true_lang-BCHIYyk7.js";import{u as _a}from"./useFileUpload-DnxtkEr6.js";import{u as pa}from"./useAutoSave-BAk7sYYv.js";import{t as y}from"./index-BQZR7OpG.js";import{A as va}from"./arrow-left-CwgHHlmU.js";import{C as M}from"./clock-3iU64J8L.js";import{C as Ce}from"./circle-check-big-8529voGw.js";import{C as P}from"./circle-alert-D64nIqcV.js";import{U as ba}from"./user-DFwa4P4X.js";import{P as ga}from"./panel-left-DogZeznY.js";import{S as xa}from"./save-CuNcfW_S.js";import{_ as ya}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-tdrIkLxE.js";import"./floating-ui.vue-Of5a-2Dr.js";import"./check-DGd4o1wk.js";import"./index-CtbUxWfh.js";import"./VisuallyHidden-Dlk0rI-c.js";import"./upload-BmyYfRK1.js";import"./file-bvfnJMhW.js";import"./eye-CrHxT1Ec.js";import"./download-BBJZlnhg.js";import"./x-CvgOZU9_.js";import"./index-BOkZYM-F.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-DRzH_vnf.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-tICpcQrN.js";import"./RovingFocusItem-D6q4T7DB.js";import"./utils-DbSqIIwO.js";import"./VisuallyHiddenInput-CyQnicEP.js";import"./circle-D3Zg91N2.js";import"./index-C97JEAye.js";import"./AlertTitle.vue_vue_type_script_setup_true_lang-DZBN2oK4.js";import"./map-pin-DjnJzEd5.js";import"./calendar-CW1YarPm.js";import"./users-C9p1-wqA.js";import"./external-link-AvdV4Nu1.js";import"./briefcase-DJl5Grs_.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-S8KaGR0w.js";import"./plus-C5ZFhJHY.js";import"./grip-vertical-R6FOTQZj.js";import"./trash-2-Cwgmxb8m.js";import"./useFlashMessages-T89Xb5yQ.js";import"./index-EnwG2xL-.js";import"./shield-BXO7VxbX.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CXzxU74a.js";import"./chevron-right-DlACQWqE.js";import"./house-iCYf5ahZ.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Dv94PMQ6.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CqBhVR6I.js";import"./usePermissions-DvrkdNtL.js";import"./square-check-big-BtQH6uFi.js";import"./file-text-DaT6SJFG.js";import"./folder-open-D4Qh6OxT.js";import"./milestone-D39JS7ZM.js";import"./index-DtdWmmNh.js";import"./debounce-Db32tAPw.js";const ha={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 pb-24"},ka={class:"flex items-center justify-between"},Ca={class:"text-3xl font-bold"},wa={class:"text-muted-foreground"},Va={key:0,class:"flex items-center justify-end gap-2 text-sm text-muted-foreground"},$a={key:0,class:"flex items-center gap-1.5"},Aa={key:1,class:"flex items-center gap-1.5"},Sa={key:2,class:"flex items-center gap-1.5 text-amber-600"},Ea={key:3,class:"flex items-center gap-1.5"},Ua=["innerHTML"],Fa={key:0,class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},qa={class:"flex items-start gap-3"},Ta={class:"text-sm text-blue-800"},Ba={key:0,class:"mt-1 text-blue-600"},za={key:0,class:"text-red-500"},Da={key:0,class:"text-sm text-muted-foreground"},Na={key:6,class:"space-y-2"},ja=["id","name","value","onUpdate:modelValue"],Oa={key:7,class:"space-y-2"},La={key:8},Ma={key:9},Pa={key:2,class:"text-red-500 text-sm mt-1"},Ra={key:10},Ga={key:11},Ya={key:12},Ha={key:13,class:"text-sm text-destructive"},Wa={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},Ja={class:"text-red-800 text-sm"},Ka={key:0,class:"fixed bottom-0 left-0 right-0 z-50 px-2 sm:px-4 pb-2 sm:pb-4"},Qa={class:"mx-auto max-w-7xl"},Xa={class:"backdrop-blur-lg bg-tertiary-60 dark:bg-gray-900/80 border border-gray-200/50 dark:border-gray-700/50 rounded-xl sm:rounded-2xl shadow-2xl p-3 sm:p-4"},Za={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4"},Ia={class:"hidden sm:flex items-center"},et={class:"flex-1 sm:max-w-xs lg:max-w-sm mx-0 sm:mx-4"},at={class:"flex items-center gap-3"},tt={class:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap font-medium"},rt={class:"flex items-center gap-2 sm:gap-3"},it={class:"ml-2 whitespace-nowrap"},st=Oe({__name:"Form",props:{candidatura:{},configuracion_campos:{},is_editing:{type:Boolean},postulacion_existente:{},canCreateOwn:{type:Boolean},canEditOwn:{type:Boolean}},setup(p){var K,Q;const n=p,we=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mi Candidatura",href:"/miembro/candidaturas"},{title:n.is_editing?"Editar":"Crear",href:"#"}],{uploadFiles:R}=_a(),k=j({});x(()=>{var c;if(!n.is_editing||!((c=n.candidatura)!=null&&c.formulario_data))return!1;const i=Object.keys(n.candidatura.formulario_data),r=n.configuracion_campos.map(e=>e.id),t=i.some(e=>!r.includes(e)),o=n.configuracion_campos.some(e=>e.required&&!n.candidatura.formulario_data[e.id]);return t||o});const s=Le((()=>{var r;const i={};return n.configuracion_campos.forEach(t=>{t.type==="checkbox"?i[t.id]=[]:t.type==="file"?i[t.id]=[]:t.type==="convocatoria"?i[t.id]=void 0:t.type==="disclaimer"?i[t.id]=null:t.type==="repeater"?i[t.id]=[]:t.type==="datepicker"?i[t.id]=null:i[t.id]=""}),(r=n.candidatura)!=null&&r.formulario_data&&(Object.assign(i,n.candidatura.formulario_data),n.configuracion_campos.forEach(t=>{t.type==="file"&&i[t.id]&&(Array.isArray(i[t.id])||(i[t.id]=[i[t.id]]))})),{formulario_data:i}})()),Ve=j(n.configuracion_campos),G=x(()=>s.formulario_data),{visibleFields:Y,clearHiddenFieldValues:$e}=na(Ve,G);Me(Y,()=>{$e()});const{state:Ae,isSaving:S,hasSaved:Se,hasError:T,saveNow:Ee,startWatching:B,stopAutoSave:H,restoreDraft:Ue,clearLocalStorage:z}=pa(G,{url:"/miembro/candidaturas/autosave",resourceId:((K=n.candidatura)==null?void 0:K.id)||null,resourceIdField:"candidatura_id",debounceTime:3e3,showNotifications:!0,useLocalStorage:!0,localStorageKey:`candidatura_draft_${((Q=n.candidatura)==null?void 0:Q.id)||"new"}`});let $=null;Pe(()=>{const i=["borrador","rechazado"];if(!n.candidatura||i.includes(n.candidatura.estado)){if(!n.is_editing){const t=Ue();t&&t.formulario_data&&(y.info("Borrador recuperado",{description:"Se encontró un borrador guardado localmente. Se ha restaurado automáticamente.",action:{label:"Descartar",onClick:()=>{z(),s.reset(),y.success("Borrador descartado")}},duration:5e3}),Object.assign(s.formulario_data,t.formulario_data))}$=B()}}),Re(()=>{$&&$(),H()});const Fe=async()=>{if(S.value){y.warning("Ya se está guardando...");return}await Ee(),T.value||y.success("Borrador guardado manualmente")},qe=x(()=>E.value.map(t=>{var e;if(!t.required)return{campo:t.id,valid:!0};const o=s.formulario_data[t.id];let c=!1;if(t.type==="checkbox")c=Array.isArray(o)&&o.length>0;else if(t.type==="file")(Array.isArray(o)&&o.length>0||k.value[t.id]&&k.value[t.id].length>0)&&(c=!0);else if(t.type==="convocatoria")c=o!=null&&o!=="";else if(t.type==="disclaimer")c=o&&o.accepted===!0;else if(t.type==="repeater"){const U=((e=t.repeaterConfig)==null?void 0:e.minItems)||0;c=Array.isArray(o)&&o.length>=U}else t.type==="datepicker"?c=o!=null&&o!=="":c=o&&o.toString().trim()!=="";return!c&&t.required,{campo:t.id,valid:c}}).every(t=>t.valid)),D=x(()=>{const i=E.value.length;let r=0;return E.value.forEach(t=>{const o=s.formulario_data[t.id];let c=!1;t.type==="checkbox"?c=Array.isArray(o)&&o.length>0:t.type==="file"?c=Array.isArray(o)&&o.length>0||k.value[t.id]&&k.value[t.id].length>0:t.type==="convocatoria"?c=o!=null&&o!=="":t.type==="disclaimer"?c=o&&o.accepted===!0:t.type==="repeater"?c=Array.isArray(o)&&o.length>0:t.type==="datepicker"?c=o!=null&&o!=="":c=o&&o.toString().trim()!=="",c&&r++}),{llenos:r,total:i,porcentaje:i>0?Math.round(r/i*100):0}}),W=x(()=>n.is_editing?"Editar Candidatura":"Crear Candidatura"),Te=x(()=>{var i,r;return s.processing?"Guardando...":n.is_editing?((i=n.candidatura)==null?void 0:i.estado)==="rechazado"?"Reenviar Candidatura":((r=n.candidatura)==null?void 0:r.estado)==="aprobado"?"Solicitar Revisión":"Enviar Candidatura":"Crear Candidatura"}),Be=x(()=>{var i,r;return!n.is_editing||n.postulacion_existente&&["borrador","rechazado"].includes(((i=n.candidatura)==null?void 0:i.estado)||"")?!1:!!["pendiente","aprobado"].includes(((r=n.candidatura)==null?void 0:r.estado)||"")}),E=x(()=>{var r;let i=[...Y.value];return Be.value&&(i=i.filter(t=>t.type!=="convocatoria")),n.is_editing&&((r=n.candidatura)==null?void 0:r.estado)==="aprobado"&&(i=i.filter(t=>t.editable===!0)),i}),ze=x(()=>{var t;if(!n.is_editing||!n.candidatura)return!1;let i=!1;if(["pendiente","aprobado"].includes(n.candidatura.estado)&&(i=n.configuracion_campos.some(o=>o.type==="convocatoria")),((t=n.candidatura)==null?void 0:t.estado)==="aprobado"){const o=n.configuracion_campos.some(c=>!c.editable&&c.type!=="convocatoria");return i||o}return i}),C=j({}),De=async(i,r)=>{if(k.value[i]=r,r&&r.length>0)try{const o=(await R(r,{module:"candidaturas",fieldId:i,onProgress:(c,e)=>{C.value[i]&&C.value[i].uploadProgress.set(c,e)}})).map(c=>c.path);Array.isArray(s.formulario_data[i]),s.formulario_data[i]=o,k.value[i]=[],setTimeout(()=>{C.value[i]&&C.value[i].uploadProgress.clear()},1500),y.success("✅ Archivos subidos correctamente",{duration:2e3})}catch(t){console.error("Error al subir archivos:",t),C.value[i]&&(r.forEach(o=>{C.value[i].uploadErrors.set(o.name,"Error al subir el archivo")}),C.value[i].uploadProgress.clear()),y.error("❌ Error al subir archivos",{description:"Por favor, intente nuevamente",duration:3e3})}else s.formulario_data[i]=[]},J=async()=>{for(const[r,t]of Object.entries(k.value))if(t&&t.length>0)try{y.info("Subiendo archivos pendientes...",{duration:2e3});const o=await R(t,{module:"candidaturas",fieldId:r});s.formulario_data[r]=o.map(c=>c.path),k.value[r]=[]}catch(o){console.error("Error al subir archivos:",o),y.error("Error al subir archivos pendientes",{description:"No se pudo completar el envío",duration:3e3});return}const i={...s.formulario_data};n.configuracion_campos.forEach(r=>{const t=i[r.id];r.required||(t===""||t===void 0||Array.isArray(t)&&t.length===0&&r.type!=="checkbox"&&r.type!=="file")&&(i[r.id]=null)}),s.formulario_data=i,H(),n.is_editing?s.put(`/miembro/candidaturas/${n.candidatura.id}`,{onSuccess:()=>{z(),y.success("Candidatura actualizada exitosamente")},onError:r=>{console.error("Errores de validación:",r),(!n.candidatura||["borrador","rechazado"].includes(n.candidatura.estado))&&($=B())}}):s.post("/miembro/candidaturas",{onSuccess:()=>{z(),y.success("Candidatura creada exitosamente")},onError:r=>{console.error("Errores de validación:",r),$=B()}})},w=i=>!!s.errors[`formulario_data.${i}`],Ne=x(()=>!n.candidatura||["borrador","rechazado"].includes(n.candidatura.estado)),je=()=>{const i=document.querySelector('[data-sidebar="trigger"]');i&&i.click()};return(i,r)=>(l(),f(V,null,[u(a(Ge),{title:W.value},null,8,["title"]),u(ma,{breadcrumbs:we},{default:_(()=>{var t,o;return[m("div",ha,[m("div",ka,[m("div",null,[m("h1",Ca,v(W.value),1),m("p",wa,v(p.is_editing?"Actualiza la información de tu candidatura":"Completa tu perfil de candidatura para participar en convocatorias"),1)]),u(a(q),{variant:"outline",onClick:r[0]||(r[0]=c=>a(Ye).visit("/miembro/candidaturas"))},{default:_(()=>[u(a(va),{class:"mr-2 h-4 w-4"}),r[1]||(r[1]=h(" Volver ",-1))]),_:1})]),!p.candidatura||["borrador","rechazado"].includes(p.candidatura.estado)?(l(),f("div",Va,[a(S)?(l(),f("div",$a,[u(a(M),{class:"h-4 w-4 animate-spin"}),r[2]||(r[2]=m("span",null,"Guardando automáticamente...",-1))])):a(Se)&&!a(T)?(l(),f("div",Aa,[u(a(Ce),{class:"h-4 w-4 text-green-600"}),m("span",null,"Guardado automáticamente a las "+v((t=a(Ae).lastSaved)==null?void 0:t.toLocaleTimeString()),1)])):a(T)?(l(),f("div",Sa,[u(a(P),{class:"h-4 w-4"}),r[3]||(r[3]=m("span",null,"Guardado localmente (sin conexión)",-1))])):(l(),f("div",Ea,[u(a(M),{class:"h-4 w-4"}),r[4]||(r[4]=m("span",null,"Autoguardado activado",-1))]))])):g("",!0),p.is_editing&&((o=p.candidatura)!=null&&o.comentarios_admin)?(l(),b(a(xe),{key:1,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:_(()=>[u(a(ye),null,{default:_(()=>[u(a(he),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:_(()=>[u(a(P),{class:"h-5 w-5"}),r[5]||(r[5]=h(" Comentarios de la comisión ",-1))]),_:1})]),_:1}),u(a(ke),null,{default:_(()=>[m("div",{class:"text-blue-700 dark:text-blue-300 prose prose-sm max-w-none",innerHTML:p.candidatura.comentarios_admin},null,8,Ua)]),_:1})]),_:1})):g("",!0),u(a(xe),null,{default:_(()=>[u(a(ye),null,{default:_(()=>[u(a(he),{class:"flex items-center gap-2"},{default:_(()=>[u(a(ba),{class:"h-5 w-5"}),r[6]||(r[6]=h(" Información de Candidatura ",-1))]),_:1})]),_:1}),u(a(ke),null,{default:_(()=>{var c;return[m("form",{onSubmit:He(J,["prevent"]),class:"space-y-6"},[p.is_editing&&((c=p.candidatura)==null?void 0:c.estado)==="aprobado"?(l(),f("div",Fa,[m("div",qa,[u(a(P),{class:"h-5 w-5 text-blue-600 mt-0.5"}),m("div",Ta,[r[7]||(r[7]=m("p",{class:"font-medium"},"Candidatura Aprobada - Edición Limitada",-1)),r[8]||(r[8]=m("p",{class:"mt-1"},"Solo puedes editar los campos marcados como editables. Al hacer cambios, tu candidatura volverá a revisión administrativa.",-1)),ze.value?(l(),f("p",Ba," Algunos campos están ocultos porque no son editables en candidaturas aprobadas o no pueden modificarse después del envío. ")):g("",!0)])])])):g("",!0),u(We,{name:"fade-field",tag:"div",class:"space-y-6"},{default:_(()=>[(l(!0),f(V,null,F(E.value,e=>{var U,X,Z,I,ee,ae,te,re,ie,se,oe,de,le,ne,ue,ce,fe,me,_e,pe,ve,be;return l(),f("div",{key:e.id,class:"space-y-2"},[u(a(L),{for:e.id,class:"flex items-center gap-1"},{default:_(()=>[h(v(e.title)+" ",1),e.required?(l(),f("span",za,"*")):g("",!0)]),_:2},1032,["for"]),e.description?(l(),f("p",Da,v(e.description),1)):g("",!0),e.type==="text"||e.type==="email"?(l(),b(a(O),{key:1,id:e.id,type:e.type,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,placeholder:e.placeholder||"",class:A({"border-destructive":w(e.id)})},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","class"])):e.type==="textarea"?(l(),b(a(sa),{key:2,id:e.id,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,placeholder:e.placeholder||"",rows:4,class:A({"border-destructive":w(e.id)})},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"])):e.type==="number"?(l(),b(a(O),{key:3,id:e.id,type:"number",modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,placeholder:e.placeholder||"",class:A({"border-destructive":w(e.id)})},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"])):e.type==="date"?(l(),b(a(O),{key:4,id:e.id,type:"date",modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,class:A({"border-destructive":w(e.id)})},null,8,["id","modelValue","onUpdate:modelValue","class"])):e.type==="select"?(l(),b(a(ea),{key:5,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d},{default:_(()=>[u(a(aa),{class:A({"border-destructive":w(e.id)})},{default:_(()=>[u(a(ta),{placeholder:e.placeholder||"Seleccionar..."},null,8,["placeholder"])]),_:2},1032,["class"]),u(a(ra),null,{default:_(()=>[(l(!0),f(V,null,F(e.options,d=>(l(),b(a(ia),{key:d,value:d},{default:_(()=>[h(v(d),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.type==="radio"?(l(),f("div",Na,[(l(!0),f(V,null,F(e.options,d=>(l(),f("div",{key:d,class:"flex items-center space-x-2"},[Je(m("input",{id:`${e.id}_${d}`,name:e.id,type:"radio",value:d,"onUpdate:modelValue":N=>a(s).formulario_data[e.id]=N,class:"h-4 w-4 text-primary focus:ring-primary border-gray-300"},null,8,ja),[[Ke,a(s).formulario_data[e.id]]]),u(a(L),{for:`${e.id}_${d}`,class:"text-sm font-normal"},{default:_(()=>[h(v(d),1)]),_:2},1032,["for"])]))),128))])):e.type==="checkbox"?(l(),f("div",Oa,[(l(!0),f(V,null,F(e.options,d=>(l(),f("div",{key:d,class:"flex items-center space-x-2"},[u(a(Ze),{id:`${e.id}_${d}`,checked:a(s).formulario_data[e.id].includes(d),"onUpdate:checked":N=>{if(N)a(s).formulario_data[e.id].includes(d)||a(s).formulario_data[e.id].push(d);else{const ge=a(s).formulario_data[e.id].indexOf(d);ge>-1&&a(s).formulario_data[e.id].splice(ge,1)}}},null,8,["id","checked","onUpdate:checked"]),u(a(L),{for:`${e.id}_${d}`,class:"text-sm font-normal"},{default:_(()=>[h(v(d),1)]),_:2},1032,["for"])]))),128))])):e.type==="file"?(l(),f("div",La,[u(oa,{ref_for:!0,ref:d=>C.value[e.id]=d,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,onFilesSelected:d=>De(e.id,d),label:"",description:"",required:e.required,multiple:((U=e.fileConfig)==null?void 0:U.multiple)||!1,"max-files":((X=e.fileConfig)==null?void 0:X.maxFiles)||5,"max-file-size":((Z=e.fileConfig)==null?void 0:Z.maxFileSize)||10,accept:((I=e.fileConfig)==null?void 0:I.accept)||".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",error:a(s).errors[`formulario_data.${e.id}`],disabled:a(s).processing,module:"candidaturas","field-id":e.id,"auto-upload":!1},null,8,["modelValue","onUpdate:modelValue","onFilesSelected","required","multiple","max-files","max-file-size","accept","error","disabled","field-id"])])):e.type==="convocatoria"?(l(),f("div",Ma,[p.postulacion_existente&&["borrador","rechazado"].includes(((ee=p.candidatura)==null?void 0:ee.estado)||"")?(l(),b(da,{key:0,postulacion:p.postulacion_existente},null,8,["postulacion"])):(l(),b(la,{key:1,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,required:e.required,disabled:a(s).processing||p.is_editing&&((ae=p.candidatura)==null?void 0:ae.estado)!=="borrador","filtrar-por-ubicacion":((te=e.convocatoriaConfig)==null?void 0:te.filtrarPorUbicacion)??!0,"show-postulacion-warning":!0},null,8,["modelValue","onUpdate:modelValue","required","disabled","filtrar-por-ubicacion"])),w(e.id)&&!p.postulacion_existente?(l(),f("div",Pa,v(a(s).errors[`formulario_data.${e.id}`]),1)):g("",!0)])):e.type==="datepicker"?(l(),f("div",Ra,[u(ua,{"model-value":a(s).formulario_data[e.id]||null,"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,label:"",description:"",required:e.required,disabled:a(s).processing,error:a(s).errors[`formulario_data.${e.id}`],"min-date":(re=e.datepickerConfig)==null?void 0:re.minDate,"max-date":(ie=e.datepickerConfig)==null?void 0:ie.maxDate,format:((se=e.datepickerConfig)==null?void 0:se.format)||"DD/MM/YYYY","allow-past-dates":((oe=e.datepickerConfig)==null?void 0:oe.allowPastDates)??!0,"allow-future-dates":((de=e.datepickerConfig)==null?void 0:de.allowFutureDates)??!0},null,8,["model-value","onUpdate:modelValue","required","disabled","error","min-date","max-date","format","allow-past-dates","allow-future-dates"])])):e.type==="disclaimer"?(l(),f("div",Ga,[u(ca,{"model-value":a(s).formulario_data[e.id]||null,"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,label:"",description:"",required:e.required,disabled:a(s).processing,error:a(s).errors[`formulario_data.${e.id}`],"disclaimer-text":((le=e.disclaimerConfig)==null?void 0:le.disclaimerText)||"","modal-title":((ne=e.disclaimerConfig)==null?void 0:ne.modalTitle)||"Términos y Condiciones","accept-button-text":((ue=e.disclaimerConfig)==null?void 0:ue.acceptButtonText)||"Acepto","decline-button-text":((ce=e.disclaimerConfig)==null?void 0:ce.declineButtonText)||"No acepto"},null,8,["model-value","onUpdate:modelValue","required","disabled","error","disclaimer-text","modal-title","accept-button-text","decline-button-text"])])):e.type==="repeater"?(l(),f("div",Ya,[u(fa,{"model-value":a(s).formulario_data[e.id]||[],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,label:"",description:"",required:e.required,disabled:a(s).processing,error:a(s).errors[`formulario_data.${e.id}`],"min-items":((fe=e.repeaterConfig)==null?void 0:fe.minItems)||0,"max-items":((me=e.repeaterConfig)==null?void 0:me.maxItems)||10,"item-name":((_e=e.repeaterConfig)==null?void 0:_e.itemName)||"Elemento","add-button-text":((pe=e.repeaterConfig)==null?void 0:pe.addButtonText)||"Agregar elemento","remove-button-text":((ve=e.repeaterConfig)==null?void 0:ve.removeButtonText)||"Eliminar",fields:((be=e.repeaterConfig)==null?void 0:be.fields)||[]},null,8,["model-value","onUpdate:modelValue","required","disabled","error","min-items","max-items","item-name","add-button-text","remove-button-text","fields"])])):g("",!0),w(e.id)?(l(),f("p",Ha,v(a(s).errors[`formulario_data.${e.id}`]),1)):g("",!0)])}),128))]),_:1}),a(s).errors.general?(l(),f("div",Wa,[m("p",Ja,v(a(s).errors.general),1)])):g("",!0),r[9]||(r[9]=m("div",{class:"h-4"},null,-1))],32)]}),_:1})]),_:1})]),(l(),b(Qe,{to:"body"},[u(Xe,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"translate-y-4 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-4 opacity-0"},{default:_(()=>[(l(),f("div",Ka,[m("div",Qa,[m("div",Xa,[m("div",Za,[m("div",Ia,[u(a(q),{variant:"outline",type:"button",onClick:je,class:"backdrop-blur-sm flex-shrink-0 text-xs sm:text-sm py-2 px-3"},{default:_(()=>[u(a(ga),{class:"h-4 w-4"}),r[10]||(r[10]=m("span",{class:"ml-2"},"Ocultar sidebar",-1))]),_:1})]),m("div",et,[m("div",at,[u(a(Ie),{modelValue:D.value.porcentaje,class:"flex-1"},null,8,["modelValue"]),m("span",tt,v(D.value.llenos)+" / "+v(D.value.total),1)]),r[11]||(r[11]=m("p",{class:"text-xs text-muted-foreground mt-1 text-center hidden sm:block"}," Campos completados ",-1))]),m("div",rt,[Ne.value?(l(),b(a(q),{key:0,onClick:Fe,disabled:a(S),variant:"outline",class:"backdrop-blur-sm flex-1 sm:flex-none text-xs sm:text-sm py-2 px-3"},{default:_(()=>[a(S)?(l(),f(V,{key:0},[u(a(M),{class:"mr-2 h-4 w-4 animate-spin"}),r[12]||(r[12]=h(" Guardando... ",-1))],64)):(l(),f(V,{key:1},[u(a(xa),{class:"mr-2 h-4 w-4"}),r[13]||(r[13]=h(" Guardar borrador ",-1))],64))]),_:1},8,["disabled"])):g("",!0),u(a(q),{onClick:J,disabled:!qe.value||a(s).processing,class:"bg-green-600 hover:bg-green-700 text-white border-green-600 hover:border-green-700 disabled:bg-gray-400 disabled:border-gray-400 flex-1 sm:flex-none text-xs sm:text-sm py-2 px-3"},{default:_(()=>[u(a(Ce),{class:"h-4 w-4"}),m("span",it,v(Te.value),1)]),_:1},8,["disabled"])])])])])]))]),_:1})]))]}),_:1})],64))}}),yr=ya(st,[["__scopeId","data-v-97e229ea"]]);export{yr as default};
