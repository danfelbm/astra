import{_ as te}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BhtGEj9L.js";import{d as ae,r as z,p as se,s as h,c as S,i as _,e as a,f as t,q as oe,w as s,g as i,t as u,b as g,j as c,v as ie,h as n,m,n as V,F as H,k as le,y as re}from"./app-GR0lRfG3.js";import{_ as p,a as $,b as w,c as v}from"./CardTitle.vue_vue_type_script_setup_true_lang-d36i2cEu.js";import{_ as ne}from"./CardDescription.vue_vue_type_script_setup_true_lang-NigL0S9u.js";import{_ as k}from"./createLucideIcon-BHOwJslc.js";import{_ as E}from"./index-CCcLjm2Z.js";import{_ as de}from"./Progress.vue_vue_type_script_setup_true_lang-8RZrwUNk.js";import{_ as ue,a as me,b as j,c as D}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-CF3UdO6e.js";import{_ as ce,a as fe,b as be,c as ge,d as pe,e as ve,f as he,g as ye}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-B0nAKWTN.js";import{_ as xe}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-LI65hFuw.js";import{t as y}from"./index-3qj3mScA.js";import{_ as _e,a as $e}from"./EntregablesFilters.vue_vue_type_script_setup_true_lang-DS-eZ532.js";import{_ as we,a as Ee}from"./ActivityLog.vue_vue_type_script_setup_true_lang-Xy-2qcXr.js";import{_ as ke}from"./CamposPersonalizadosDisplay.vue_vue_type_script_setup_true_lang-CaE9kwVQ.js";import{A as Ce}from"./arrow-left-BYNY4c4U.js";import{S as Pe}from"./square-pen-CAejkQqC.js";import{C as ze}from"./copy-Dm8fH5LQ.js";import{T as Se}from"./trash-2-BBPGb23q.js";import{T as Ve}from"./target-D28k1qne.js";import{C as je}from"./clock-D6DjsNnz.js";import{F as N}from"./file-text-CqwqP2YI.js";import{C as De}from"./calendar-DB3c2-8x.js";import{U as Me}from"./user-D7gbJgdJ.js";import{T as Fe}from"./tag-fUOzensi.js";import{P as A}from"./plus-fOxeqBd9.js";import{f as I,e as L}from"./es-BDPlFIsO.js";import{p as B}from"./parseISO-DFjB8F03.js";import"./useFlashMessages-D1FurqPx.js";import"./index-D6uoBsJV.js";import"./floating-ui.vue-DR8_Q1jH.js";import"./x-DbT4zcPL.js";import"./Input.vue_vue_type_script_setup_true_lang-BjjFC2UB.js";import"./index-BNlP2lvv.js";import"./index-Drc1VJqQ.js";import"./shield-CLUqTm5-.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C1E-Uoj6.js";import"./chevron-right-Dgo_QuX7.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BfyTXX9a.js";import"./VisuallyHidden-BQMePNBL.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CfKpdVFq.js";import"./check-CXxamFj7.js";import"./Label.vue_vue_type_script_setup_true_lang-CRMaLyBq.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BU_ZmOQK.js";import"./circle-alert-CHl1qw9T.js";import"./map-pin-C8QLZwTy.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CLU5jCG2.js";import"./chevrons-up-down-Bf3cCZIN.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B5gFfyDI.js";import"./users-Okp9AxCW.js";import"./vote-ciYl6J36.js";import"./folder-open-CwumZkZT.js";import"./send-eIXdxX5D.js";import"./briefcase-uiA_fv1r.js";import"./megaphone-DLNPunQJ.js";import"./user-check-CBumIaVu.js";import"./clipboard-list-BTd4PnWW.js";import"./mail-BGpWtBOP.js";import"./message-square-BdByyVBG.js";import"./external-link-nWA75UH4.js";import"./panel-left-BuQ9sSL1.js";import"./index-BBSX9MYw.js";import"./RovingFocusItem-ETK6B6Me.js";import"./utils-ElLk49cj.js";import"./DialogTrigger-UtSlN37b.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-B5uBx6Zb.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BdXJTAua.js";import"./StatusChangeModal.vue_vue_type_script_setup_true_lang-ad2jbkk5.js";import"./Textarea.vue_vue_type_script_setup_true_lang-wS_Qdop_.js";import"./circle-x-BjzRTcGe.js";import"./circle-check-big-DFsR58SN.js";import"./loader-circle-CxssTkjO.js";import"./eye-CM3rkcHT.js";import"./circle-check-C9KJXJeU.js";import"./filter-D70EybLf.js";import"./search-CEFtEu-p.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CfHmTfA5.js";import"./download-CNOCc2Dh.js";const Te={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},He={class:"flex items-center justify-between"},Ne={class:"text-2xl font-bold"},Ae={class:"text-muted-foreground"},Ie={class:"flex items-center gap-2"},Le={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Be={class:"text-2xl font-bold"},Ue={class:"text-2xl font-bold"},qe={class:"text-xs text-muted-foreground"},Re={class:"text-sm font-medium"},Oe={class:"text-sm font-medium"},Ge={key:0,class:"text-xs text-muted-foreground"},Je={key:0},Ke={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Qe={class:"grid gap-4 md:grid-cols-2"},We={class:"text-sm text-muted-foreground"},Xe={class:"text-sm text-muted-foreground"},Ye={class:"text-sm text-muted-foreground"},Ze={class:"space-y-2"},et={class:"flex items-center justify-between text-sm"},tt={class:"flex items-center justify-between text-sm"},at={class:"flex items-center justify-between text-sm"},st={class:"flex items-center gap-2"},ot={class:"flex flex-wrap gap-2"},it={class:"space-y-3"},lt={key:0},rt={class:"text-sm text-muted-foreground"},nt={key:1},dt={class:"grid gap-4 md:grid-cols-2 text-sm"},ut={class:"font-medium"},mt={class:"font-medium"},ct={key:0},ft={class:"font-medium"},bt={key:1},gt={class:"font-medium"},pt={class:"flex justify-between items-center"},Ba=ae({__name:"Show",props:{hito:{},proyecto:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageEntregables:{type:Boolean},estadisticas:{},actividades:{},usuariosActividades:{},camposPersonalizados:{},valoresCamposPersonalizados:{}},setup(o){const d=o,U=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:d.proyecto.nombre,href:`/admin/proyectos/${d.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${d.proyecto.id}/hitos`},{title:d.hito.nombre,href:"#"}],q=["detalles","entregables","actividad"],C=z((()=>{const e=new URLSearchParams(window.location.search).get("tab");return e&&q.includes(e)?e:"detalles"})());se(C,l=>{const e=`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}?tab=${l}`;h.get(e,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const b=z({usuario_id:null,tipo_entidad:null,tipo_accion:null,fecha_inicio:null,fecha_fin:null}),f=z({search:null,estado:null,prioridad:null,responsable_id:null,fecha_inicio:null,fecha_fin:null}),R=()=>{h.visit(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/edit`)},O=()=>{h.delete(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}`,{onSuccess:()=>{y.success("Hito eliminado exitosamente")},onError:()=>{y.error("Error al eliminar el hito")}})},G=()=>{h.post(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/duplicar`,{},{onSuccess:()=>{y.success("Hito duplicado exitosamente")},onError:()=>{y.error("Error al duplicar el hito")}})},M=()=>{h.visit(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/entregables/create`)},J=l=>{h.visit(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/entregables/${l.id}`)},K=l=>{h.visit(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/entregables/${l.id}/edit`)},Q=l=>{h.delete(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/entregables/${l.id}`,{onSuccess:()=>{y.success("Entregable eliminado exitosamente")},onError:()=>{y.error("Error al eliminar el entregable")}})},W=l=>{h.post(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/entregables/${l.id}/completar`,{},{onSuccess:()=>{y.success("Entregable completado exitosamente")},onError:()=>{y.error("Error al completar el entregable")}})},X=l=>{h.post(`/admin/proyectos/${d.proyecto.id}/hitos/${d.hito.id}/entregables/${l.id}/actualizar-estado`,{estado:"en_progreso"},{onSuccess:()=>{y.success("Entregable marcado como en progreso")},onError:()=>{y.error("Error al actualizar el estado")}})},F=l=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",P=l=>l?I(B(l),"dd MMM yyyy",{locale:L}):"No definida",T=l=>l?I(B(l),"dd MMM yyyy 'a las' HH:mm",{locale:L}):"No definida",Y=S(()=>{let l=d.hito.entregables||[];if(f.value.search){const e=f.value.search.toLowerCase();l=l.filter(r=>r.nombre.toLowerCase().includes(e)||r.descripcion&&r.descripcion.toLowerCase().includes(e))}return f.value.estado&&(l=l.filter(e=>e.estado===f.value.estado)),f.value.prioridad&&(l=l.filter(e=>e.prioridad===f.value.prioridad)),f.value.responsable_id&&(l=l.filter(e=>{var r;return((r=e.responsable)==null?void 0:r.id)===f.value.responsable_id})),(f.value.fecha_inicio||f.value.fecha_fin)&&(l=l.filter(e=>{if(!e.fecha_fin)return!1;const r=new Date(e.fecha_fin);if(f.value.fecha_inicio){const x=new Date(f.value.fecha_inicio);if(r<x)return!1}if(f.value.fecha_fin){const x=new Date(f.value.fecha_fin);if(x.setHours(23,59,59,999),r>x)return!1}return!0})),l}),Z=S(()=>{const l=new Map;return(d.hito.entregables||[]).forEach(e=>{var r;(r=e.responsable)!=null&&r.id&&l.set(e.responsable.id,{id:e.responsable.id,name:e.responsable.name,email:e.responsable.email})}),Array.from(l.values())}),ee=S(()=>{let l=d.actividades||[];return b.value.usuario_id&&(l=l.filter(e=>{var r;return((r=e.causer)==null?void 0:r.id)===b.value.usuario_id})),b.value.tipo_entidad&&(l=l.filter(e=>e.subject_type===b.value.tipo_entidad)),b.value.tipo_accion&&(l=l.filter(e=>e.event===b.value.tipo_accion)),(b.value.fecha_inicio||b.value.fecha_fin)&&(l=l.filter(e=>{const r=new Date(e.created_at);if(b.value.fecha_inicio){const x=new Date(b.value.fecha_inicio);if(r<x)return!1}if(b.value.fecha_fin){const x=new Date(b.value.fecha_fin);if(x.setHours(23,59,59,999),r>x)return!1}return!0})),l});return(l,e)=>(m(),_(H,null,[a(t(oe),{title:`Hito: ${o.hito.nombre}`},null,8,["title"]),a(te,{breadcrumbs:U},{default:s(()=>[i("div",Te,[i("div",He,[i("div",null,[i("h1",Ne,u(o.hito.nombre),1),i("p",Ae,"Proyecto: "+u(o.proyecto.nombre),1)]),i("div",Ie,[a(t(ie),{href:`/admin/proyectos/${o.proyecto.id}/hitos`},{default:s(()=>[a(t(k),{variant:"outline",size:"sm"},{default:s(()=>[a(t(Ce),{class:"h-4 w-4 mr-2"}),e[3]||(e[3]=n(" Volver ",-1))]),_:1})]),_:1},8,["href"]),o.canEdit?(m(),g(t(k),{key:0,onClick:R,size:"sm",variant:"outline"},{default:s(()=>[a(t(Pe),{class:"h-4 w-4 mr-2"}),e[4]||(e[4]=n(" Editar ",-1))]),_:1})):c("",!0),a(t(k),{onClick:G,size:"sm",variant:"outline"},{default:s(()=>[a(t(ze),{class:"h-4 w-4 mr-2"}),e[5]||(e[5]=n(" Duplicar ",-1))]),_:1}),o.canDelete?(m(),g(t(ce),{key:1},{default:s(()=>[a(t(xe),{asChild:""},{default:s(()=>[a(t(k),{variant:"destructive",size:"sm"},{default:s(()=>[a(t(Se),{class:"h-4 w-4 mr-2"}),e[6]||(e[6]=n(" Eliminar ",-1))]),_:1})]),_:1}),a(t(fe),null,{default:s(()=>[a(t(be),null,{default:s(()=>[a(t(ge),null,{default:s(()=>[...e[7]||(e[7]=[n("¿Estás seguro?",-1)])]),_:1}),a(t(pe),null,{default:s(()=>[...e[8]||(e[8]=[n(" Esta acción no se puede deshacer. Se eliminará permanentemente el hito y todos sus entregables asociados. ",-1)])]),_:1})]),_:1}),a(t(ve),null,{default:s(()=>[a(t(he),null,{default:s(()=>[...e[9]||(e[9]=[n("Cancelar",-1)])]),_:1}),a(t(ye),{onClick:O},{default:s(()=>[...e[10]||(e[10]=[n(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0)])]),i("div",Le,[a(t(p),null,{default:s(()=>[a(t($),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(w),{class:"text-sm font-medium"},{default:s(()=>[...e[11]||(e[11]=[n("Estado",-1)])]),_:1}),a(t(Ve),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(v),null,{default:s(()=>[a(t(E),{class:V([F(o.hito.estado),"mt-1"])},{default:s(()=>[n(u(o.hito.estado),1)]),_:1},8,["class"])]),_:1})]),_:1}),a(t(p),null,{default:s(()=>[a(t($),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(w),{class:"text-sm font-medium"},{default:s(()=>[...e[12]||(e[12]=[n("Progreso",-1)])]),_:1}),a(t(je),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(v),null,{default:s(()=>[i("div",Be,u(o.hito.porcentaje_completado)+"%",1),a(t(de),{"model-value":o.hito.porcentaje_completado,class:"mt-2 h-1"},null,8,["model-value"])]),_:1})]),_:1}),a(t(p),null,{default:s(()=>[a(t($),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(w),{class:"text-sm font-medium"},{default:s(()=>[...e[13]||(e[13]=[n("Entregables",-1)])]),_:1}),a(t(N),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(v),null,{default:s(()=>[i("div",Ue,u(o.estadisticas.total_entregables),1),i("p",qe,u(o.estadisticas.entregables_completados)+" completados ",1)]),_:1})]),_:1}),a(t(p),null,{default:s(()=>[a(t($),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(w),{class:"text-sm font-medium"},{default:s(()=>[...e[14]||(e[14]=[n("Fecha Fin",-1)])]),_:1}),a(t(De),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(v),null,{default:s(()=>[i("div",Re,u(P(o.hito.fecha_fin)),1),o.estadisticas.dias_restantes!==null?(m(),_("p",{key:0,class:V(["text-xs",o.estadisticas.esta_vencido?"text-red-600":"text-muted-foreground"])},u(o.estadisticas.esta_vencido?`Vencido hace ${Math.abs(o.estadisticas.dias_restantes)} días`:`${o.estadisticas.dias_restantes} días restantes`),3)):c("",!0)]),_:1})]),_:1}),a(t(p),null,{default:s(()=>[a(t($),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(t(w),{class:"text-sm font-medium"},{default:s(()=>[...e[15]||(e[15]=[n("Responsable",-1)])]),_:1}),a(t(Me),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(t(v),null,{default:s(()=>{var r;return[i("div",Oe,u(((r=o.hito.responsable)==null?void 0:r.name)||"Sin asignar"),1),o.hito.responsable?(m(),_("p",Ge,u(o.hito.responsable.email),1)):c("",!0)]}),_:1})]),_:1})]),a(t(ue),{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=r=>C.value=r),class:"flex-1"},{default:s(()=>[a(t(me),null,{default:s(()=>[a(t(j),{value:"detalles"},{default:s(()=>[...e[16]||(e[16]=[n("Detalles",-1)])]),_:1}),a(t(j),{value:"entregables"},{default:s(()=>[e[17]||(e[17]=n(" Entregables ",-1)),a(t(E),{variant:"secondary",class:"ml-2"},{default:s(()=>[n(u(o.estadisticas.total_entregables),1)]),_:1})]),_:1}),a(t(j),{value:"actividad"},{default:s(()=>[...e[18]||(e[18]=[n("Actividad",-1)])]),_:1})]),_:1}),a(t(D),{value:"detalles",class:"space-y-4"},{default:s(()=>[a(t(p),null,{default:s(()=>[a(t($),null,{default:s(()=>[a(t(w),null,{default:s(()=>[...e[19]||(e[19]=[n("Información General",-1)])]),_:1})]),_:1}),a(t(v),{class:"space-y-4"},{default:s(()=>[o.hito.descripcion?(m(),_("div",Je,[e[20]||(e[20]=i("h3",{class:"font-semibold mb-2"},"Descripción",-1)),i("p",Ke,u(o.hito.descripcion),1)])):c("",!0),i("div",Qe,[i("div",null,[e[21]||(e[21]=i("h3",{class:"font-semibold mb-2"},"Fecha de Inicio",-1)),i("p",We,u(P(o.hito.fecha_inicio)),1)]),i("div",null,[e[22]||(e[22]=i("h3",{class:"font-semibold mb-2"},"Fecha de Fin",-1)),i("p",Xe,u(P(o.hito.fecha_fin)),1)]),i("div",null,[e[23]||(e[23]=i("h3",{class:"font-semibold mb-2"},"Orden",-1)),i("p",Ye,u(o.hito.orden),1)]),i("div",null,[e[24]||(e[24]=i("h3",{class:"font-semibold mb-2"},"Estado",-1)),a(t(E),{class:V(F(o.hito.estado))},{default:s(()=>[n(u(o.hito.estado),1)]),_:1},8,["class"])])]),i("div",null,[e[28]||(e[28]=i("h3",{class:"font-semibold mb-2"},"Resumen de Entregables",-1)),i("div",Ze,[i("div",et,[e[25]||(e[25]=i("span",{class:"text-muted-foreground"},"Pendientes",-1)),a(t(E),{variant:"outline"},{default:s(()=>[n(u(o.estadisticas.entregables_pendientes),1)]),_:1})]),i("div",tt,[e[26]||(e[26]=i("span",{class:"text-muted-foreground"},"En Progreso",-1)),a(t(E),{variant:"outline",class:"bg-blue-50"},{default:s(()=>[n(u(o.estadisticas.entregables_en_progreso),1)]),_:1})]),i("div",at,[e[27]||(e[27]=i("span",{class:"text-muted-foreground"},"Completados",-1)),a(t(E),{variant:"outline",class:"bg-green-50"},{default:s(()=>[n(u(o.estadisticas.entregables_completados),1)]),_:1})])])])]),_:1})]),_:1}),o.hito.etiquetas&&o.hito.etiquetas.length>0?(m(),g(t(p),{key:0},{default:s(()=>[a(t($),null,{default:s(()=>[i("div",st,[a(t(Fe),{class:"h-5 w-5"}),a(t(w),null,{default:s(()=>[...e[29]||(e[29]=[n("Etiquetas",-1)])]),_:1})]),a(t(ne),null,{default:s(()=>[...e[30]||(e[30]=[n(" Etiquetas asignadas a este hito para su organización y categorización ",-1)])]),_:1})]),_:1}),a(t(v),null,{default:s(()=>[i("div",ot,[(m(!0),_(H,null,le(o.hito.etiquetas,r=>(m(),g(t(E),{key:r.id,variant:"outline",class:"px-3 py-1.5",style:re({borderColor:r.color||"#94a3b8",color:r.color||"#64748b",backgroundColor:`${r.color}15`||"#f1f5f9"})},{default:s(()=>[n(u(r.nombre),1)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})):c("",!0),o.hito.parent_id||o.hito.ruta_completa?(m(),g(t(p),{key:1},{default:s(()=>[a(t($),null,{default:s(()=>[a(t(w),null,{default:s(()=>[...e[31]||(e[31]=[n("Jerarquía",-1)])]),_:1})]),_:1}),a(t(v),null,{default:s(()=>[i("div",it,[o.hito.ruta_completa?(m(),_("div",lt,[e[32]||(e[32]=i("h3",{class:"font-semibold mb-2"},"Ruta Completa",-1)),i("p",rt,u(o.hito.ruta_completa),1)])):c("",!0),o.hito.nivel!==void 0?(m(),_("div",nt,[e[33]||(e[33]=i("h3",{class:"font-semibold mb-2"},"Nivel",-1)),a(t(E),{variant:"outline"},{default:s(()=>[n("Nivel "+u(o.hito.nivel),1)]),_:1})])):c("",!0)])]),_:1})]),_:1})):c("",!0),o.camposPersonalizados&&o.camposPersonalizados.length>0?(m(),g(ke,{key:2,campos:o.camposPersonalizados,"valores-campos":o.valoresCamposPersonalizados,descripcion:"Información adicional específica del hito",columns:2},null,8,["campos","valores-campos"])):c("",!0),a(t(p),null,{default:s(()=>[a(t($),null,{default:s(()=>[a(t(w),null,{default:s(()=>[...e[34]||(e[34]=[n("Información del Sistema",-1)])]),_:1})]),_:1}),a(t(v),null,{default:s(()=>[i("div",dt,[i("div",null,[e[35]||(e[35]=i("span",{class:"text-muted-foreground"},"Creado el:",-1)),i("p",ut,u(T(o.hito.created_at)),1)]),i("div",null,[e[36]||(e[36]=i("span",{class:"text-muted-foreground"},"Última actualización:",-1)),i("p",mt,u(T(o.hito.updated_at)),1)]),o.hito.created_by_usuario?(m(),_("div",ct,[e[37]||(e[37]=i("span",{class:"text-muted-foreground"},"Creado por:",-1)),i("p",ft,u(o.hito.created_by_usuario.name),1)])):c("",!0),o.hito.updated_by_usuario?(m(),_("div",bt,[e[38]||(e[38]=i("span",{class:"text-muted-foreground"},"Actualizado por:",-1)),i("p",gt,u(o.hito.updated_by_usuario.name),1)])):c("",!0)])]),_:1})]),_:1})]),_:1}),a(t(D),{value:"entregables",class:"space-y-4"},{default:s(()=>[i("div",pt,[e[40]||(e[40]=i("h2",{class:"text-lg font-semibold"},"Lista de Entregables",-1)),o.canManageEntregables?(m(),g(t(k),{key:0,onClick:M,size:"sm"},{default:s(()=>[a(t(A),{class:"h-4 w-4 mr-2"}),e[39]||(e[39]=n(" Nuevo Entregable ",-1))]),_:1})):c("",!0)]),o.hito.entregables&&o.hito.entregables.length>0?(m(),g(_e,{key:0,modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=r=>f.value=r),usuarios:Z.value},null,8,["modelValue","usuarios"])):c("",!0),a(t(p),null,{default:s(()=>[a(t(v),{class:"p-0"},{default:s(()=>[a($e,{entregables:Y.value,"proyecto-id":o.proyecto.id,"hito-id":o.hito.id,"can-edit":o.canManageEntregables,"can-delete":o.canManageEntregables,"can-complete":o.canManageEntregables,"show-checkbox":!1,onView:J,onEdit:K,onDelete:Q,onComplete:W,onMarkInProgress:X},null,8,["entregables","proyecto-id","hito-id","can-edit","can-delete","can-complete"])]),_:1})]),_:1}),!o.hito.entregables||o.hito.entregables.length===0?(m(),g(t(p),{key:1},{default:s(()=>[a(t(v),{class:"text-center py-8"},{default:s(()=>[a(t(N),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e[42]||(e[42]=i("p",{class:"text-muted-foreground mb-4"},"No hay entregables asignados a este hito",-1)),o.canManageEntregables?(m(),g(t(k),{key:0,onClick:M,variant:"outline"},{default:s(()=>[a(t(A),{class:"h-4 w-4 mr-2"}),e[41]||(e[41]=n(" Crear Primer Entregable ",-1))]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0)]),_:1}),a(t(D),{value:"actividad",class:"space-y-4"},{default:s(()=>[o.actividades&&o.actividades.length>0?(m(),g(we,{key:0,modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=r=>b.value=r),usuarios:o.usuariosActividades,"context-level":"hito"},null,8,["modelValue","usuarios"])):c("",!0),a(Ee,{activities:ee.value,title:"Historial de Actividad",description:"Registro de cambios y actividades del hito y sus entregables","empty-message":"No hay actividad registrada"},null,8,["activities"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Ba as default};
