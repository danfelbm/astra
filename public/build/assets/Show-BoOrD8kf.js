import{_ as re}from"./AdminLayout.vue_vue_type_script_setup_true_lang-a0Yimc9j.js";import{r as C,s as p,d as ie,p as se,c as L,i as w,e as o,f as a,q as ne,w as i,g,j as b,t as q,m as u,b as h,v as N,h as m,F as R,k as le}from"./app-BFqKuHja.js";import{_ as V,a as U,b as F,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-By0rrIVN.js";import{_ as ce}from"./CardDescription.vue_vue_type_script_setup_true_lang-BnZB2Om1.js";import{_ as k}from"./createLucideIcon-tZKQ8FV-.js";import{_ as I}from"./index-BF1JDgfE.js";import{_ as ue,a as de,b as H,c as T}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BN4vYSdw.js";import{t as E}from"./index-D11OkfIY.js";import{E as me}from"./EtiquetaDisplay-DQkZt9su.js";import{E as pe}from"./EtiquetaSelector-C3xtCLm0.js";import{_ as fe}from"./ContratosList.vue_vue_type_script_setup_true_lang-w04oHbVc.js";import{_ as ye,a as ve,b as ge}from"./ProyectoInfoCard.vue_vue_type_script_setup_true_lang-CuJFOmRa.js";import{A as he,b as be,c as Ee}from"./ActivityLog.vue_vue_type_script_setup_true_lang-BeeeVv2q.js";import{_ as $e}from"./HitosDashboard.vue_vue_type_script_setup_true_lang-C4Gh_7x0.js";import{_ as we}from"./CamposPersonalizadosDisplay.vue_vue_type_script_setup_true_lang-DpBnxunY.js";import{S as O}from"./square-pen-B3ZyptEi.js";import{T as qe}from"./trash-2-DIQRuMTg.js";import{I as xe}from"./info-BGFuJcL4.js";import{M as Se}from"./milestone-BxypAtcB.js";import{I as ke}from"./image-CvoJxnwv.js";import{F as G}from"./file-text-BGYDQgob.js";import{U as Ce}from"./user-BAyKQNNj.js";import{P as J}from"./plus-HWvCG-pg.js";import"./useFlashMessages-Rq45FhUU.js";import"./index-C8QA5EYi.js";import"./floating-ui.vue-BMPmqikX.js";import"./x-Bmm2Newm.js";import"./Input.vue_vue_type_script_setup_true_lang-BV39iPGt.js";import"./index-F5rpf4iw.js";import"./index-BgOZXF3v.js";import"./shield-97w7M3te.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-FLlUFPmJ.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Rq0QpW8I.js";import"./VisuallyHidden-DP9KERvz.js";import"./check-C0Px08fC.js";import"./chevron-right-Cw5c0nod.js";import"./house-ChRKKXPV.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DWo8uhvu.js";import"./Label.vue_vue_type_script_setup_true_lang-Dqhxdf2C.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BEi-RCnv.js";import"./circle-alert-B3cw7wFG.js";import"./map-pin-C_udGJei.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-_5gfTs1o.js";import"./chevrons-up-down-BeNxFT55.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CG0Gldao.js";import"./target-BJiaG4BP.js";import"./users-CymRd8l_.js";import"./vote-Xnz8P6lY.js";import"./folder-open-BYgWiTs_.js";import"./send-B8eSg7eS.js";import"./briefcase-BxbIIMmV.js";import"./calendar-TQY1ssum.js";import"./megaphone-i8HADNBc.js";import"./user-check-D1WCGWxM.js";import"./clipboard-list-DmGkpb4E.js";import"./mail-DplI3j6U.js";import"./message-square-BfcC0tAy.js";import"./external-link-e9aSyS64.js";import"./panel-left-DIEiSQw2.js";import"./index-BY2HrsFe.js";import"./RovingFocusItem-Dus7TRHC.js";import"./utils-Bif_DOLm.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-yWw5wX9r.js";import"./layers-CMuCF11w.js";import"./zap-BOVwINtF.js";import"./trending-up-BAhvKGZv.js";import"./award-DSV9OTJ9.js";import"./hash--_3fTltj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-CundgcCu.js";import"./search-Bo0C7ovi.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-DVyMhRir.js";import"./contratos-BiUTbrRP.js";import"./useToast-BPc0GgpM.js";import"./dollar-sign-TfWNgI1U.js";import"./ellipsis-BbQ2pDQs.js";import"./eye-pgBp_Zgj.js";import"./list-C2EVHFy9.js";import"./download-DZp9zUYc.js";import"./copy-Dw-SP3FF.js";import"./EvidenciaAccionesEstado.vue_vue_type_script_setup_true_lang-NSPSSHsD.js";import"./Switch.vue_vue_type_script_setup_true_lang-DKZudDg_.js";import"./VisuallyHiddenInput-DELKLyLV.js";import"./ComentarioContextoInput.vue_vue_type_script_setup_true_lang-ntLh95zN.js";import"./RichTextEditor-BGEShtxK.js";import"./italic-lK2tJfFc.js";import"./FileUploadField.vue_vue_type_script_setup_true_lang-Bw4XKUio.js";import"./useFileUpload-Gi3976OP.js";import"./upload-bOs1OWyJ.js";import"./file-Blbzk7J5.js";import"./paperclip-Yon9uhN1.js";import"./clock-CCWUE1Ut.js";import"./circle-x-BXqORzek.js";import"./circle-check-big-8EJmJICF.js";import"./Progress.vue_vue_type_script_setup_true_lang-CazEhGy4.js";import"./circle-play-BrCJHMoh.js";import"./useArrowNavigation-B5rxJs06.js";import"./filter-C9Q57QdD.js";import"./es-SykclP7y.js";import"./arrow-right-CXohZbS-.js";import"./parseISO-D9CBQlQ_.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-D4VxFwix.js";import"./Separator.vue_vue_type_script_setup_true_lang-DA1zl9VF.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-B21BfMIt.js";import"./loader-circle-C_8YyK-M.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-BlETsT7V.js";import"./ComentariosPanel.vue_vue_type_script_setup_true_lang-CAX1qZHE.js";import"./chevron-left-IwZg7ArK.js";import"./pencil-CUxLILiq.js";import"./Textarea.vue_vue_type_script_setup_true_lang-BRsVeO5i.js";import"./AddUsersModal.vue_vue_type_script_setup_true_lang-B-KGNYEQ.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-BXcwnrVT.js";import"./circle-RQlS7lm2.js";import"./refresh-cw-BqbLQJ8a.js";import"./git-branch-Cd85zgzw.js";function Pe(){const t=C(!1),s=C(null);async function B(c,l){return t.value=!0,s.value=null,new Promise((d,y)=>{p.post(`/admin/proyectos/${c}/etiquetas`,{etiqueta_id:l},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.value=!1,d(!0)},onError:v=>{t.value=!1,s.value=Object.values(v).join(", "),y(v)}})})}async function _(c,l){return t.value=!0,s.value=null,new Promise((d,y)=>{p.delete(`/admin/proyectos/${c}/etiquetas/${l}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.value=!1,d(!0)},onError:v=>{t.value=!1,s.value="Error al quitar la etiqueta",y(v)}})})}async function P(c,l){return t.value=!0,s.value=null,new Promise((d,y)=>{p.put(`/admin/proyectos/${c}/etiquetas/sync`,{etiquetas:l},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.value=!1,d(!0)},onError:v=>{t.value=!1,s.value="Error al sincronizar etiquetas",y(v)}})})}async function z(c){t.value=!0,s.value=null;try{const l=await fetch(`/admin/proyectos/${c}/etiquetas/suggest`);if(!l.ok)throw new Error("Error al obtener sugerencias");const d=await l.json();return t.value=!1,d.etiquetas||[]}catch(l){return t.value=!1,s.value="Error al obtener sugerencias de etiquetas",console.error(l),[]}}async function f(c){var l;t.value=!0,s.value=null;try{const d=await fetch("/admin/etiquetas",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify(c)});if(!d.ok){const v=await d.json();throw new Error(v.message||"Error al crear etiqueta")}const y=await d.json();return t.value=!1,y.data}catch(d){return t.value=!1,s.value=d.message||"Error al crear etiqueta",console.error(d),null}}async function x(c){if(c.length<2)return[];try{const l=await fetch(`/admin/etiquetas/search?q=${encodeURIComponent(c)}`);if(!l.ok)throw new Error("Error al buscar etiquetas");return(await l.json()).data||[]}catch(l){return console.error("Error buscando etiquetas:",l),[]}}function S(c){const l=new Map;return c.forEach(d=>{var v;const y=((v=d.categoria)==null?void 0:v.nombre)||"Sin categoría";l.has(y)||l.set(y,[]),l.get(y).push(d)}),l}function A(c){var l;return c.color||((l=c.categoria)==null?void 0:l.color)||"gray"}function D(c,l=10){return c<l}async function M(c,l){return t.value=!0,s.value=null,new Promise((d,y)=>{p.post(`/admin/proyectos/${c}/etiquetas/reorder`,{etiquetas:l},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.value=!1,d(!0)},onError:v=>{t.value=!1,s.value="Error al reordenar etiquetas",y(v)}})})}return{isLoading:t,error:s,addEtiquetaToProyecto:B,removeEtiquetaFromProyecto:_,syncEtiquetasProyecto:P,getSugerenciasEtiquetas:z,reorderEtiquetas:M,createEtiqueta:f,searchEtiquetas:x,groupEtiquetasByCategoria:S,getEtiquetaColor:A,canAddMoreEtiquetas:D}}const He={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-2 md:p-8"},Te={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},De={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ve={key:0,class:"mt-2 text-gray-600 dark:text-gray-400"},je={class:"flex gap-2"},Be={key:0},ze={key:1,class:"text-sm text-muted-foreground"},Ae={key:1,class:"space-y-4"},Me={class:"flex gap-2"},Ne={class:"space-y-3"},Ue={class:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},Fe={class:"flex-1"},Ie={class:"text-sm"},_e={class:"font-medium"},Le={class:"text-xs text-gray-500 mt-1"},Re={key:0,class:"flex justify-end"},Oe={class:"space-y-4"},Ge={class:"text-center"},eo=ie({__name:"Show",props:{proyecto:{},categorias:{},activities:{},usuariosActividades:{},authPermissions:{},totales:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageTags:{type:Boolean},canViewContracts:{type:Boolean},canCreateContracts:{type:Boolean},canViewHitos:{type:Boolean},canCreateHitos:{type:Boolean},canEditHitos:{type:Boolean},canDeleteHitos:{type:Boolean},canManageEntregables:{type:Boolean},estadisticasHitos:{}},setup(t){const s=t,B=["general","contratos","hitos","evidencias","actividad"],P=C((()=>{const e=new URLSearchParams(window.location.search).get("tab");return e&&B.includes(e)?e:"general"})());se(P,r=>{const e=`/admin/proyectos/${s.proyecto.id}?tab=${r}`;p.get(e,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const z=L(()=>{var r,e;return((r=s.authPermissions)==null?void 0:r.includes("evidencias.aprobar"))||((e=s.authPermissions)==null?void 0:e.includes("evidencias.rechazar"))||!1}),f=C({usuario_id:null,tipo_entidad:null,tipo_accion:null,fecha_inicio:null,fecha_fin:null}),x=C(!1),S=C([]),{syncEtiquetasProyecto:A,isLoading:D}=Pe();s.proyecto.etiquetas&&(S.value=s.proyecto.etiquetas.map(r=>r.id));const M=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:s.proyecto.nombre,href:`/admin/proyectos/${s.proyecto.id}`}],c=()=>{confirm(`¿Estás seguro de eliminar el proyecto "${s.proyecto.nombre}"?`)&&p.delete(`/admin/proyectos/${s.proyecto.id}`,{onSuccess:()=>{E.success("Proyecto eliminado exitosamente")},onError:()=>{E.error("Error al eliminar el proyecto")}})},l=r=>new Date(r).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),d=r=>{const e=Math.floor((new Date(r).getTime()-new Date().getTime())/864e5);return e===0?"Hoy":e===1?"Mañana":e===-1?"Ayer":e>0?`En ${e} días`:`Hace ${Math.abs(e)} días`},y=async()=>{try{await A(s.proyecto.id,S.value),x.value=!1,E.success("Etiquetas actualizadas exitosamente"),p.reload({only:["proyecto"]})}catch{E.error("Error al actualizar las etiquetas")}},v=()=>{var r;S.value=((r=s.proyecto.etiquetas)==null?void 0:r.map(e=>e.id))||[],x.value=!1},K=r=>{const e=`/admin/proyectos/${s.proyecto.id}?tab=hitos&hito=${r.id}&modal=hito`;p.visit(e,{preserveState:!0,preserveScroll:!0})},X=r=>{p.visit(`/admin/proyectos/${s.proyecto.id}/hitos/${r.id}/edit`)},Q=r=>{confirm(`¿Estás seguro de eliminar el hito "${r.nombre}"? Se eliminarán también todos sus entregables.`)&&p.delete(`/admin/proyectos/${s.proyecto.id}/hitos/${r.id}`,{onSuccess:()=>{E.success("Hito eliminado exitosamente"),p.reload({only:["proyecto"]})},onError:()=>{E.error("Error al eliminar el hito")}})},W=r=>{p.visit(`/admin/proyectos/${s.proyecto.id}/hitos/${r.id}/entregables/create`)},Y=(r,e,n)=>{p.post(`/admin/proyectos/${s.proyecto.id}/hitos/${r.hito_id}/entregables/${r.id}/completar`,{notas:e,archivos:n,agregar_comentario:!!e},{preserveScroll:!0,onSuccess:()=>{E.success("Entregable marcado como completado")},onError:()=>{E.error("Error al completar el entregable")}})},Z=(r,e,n,$)=>{p.post(`/admin/proyectos/${s.proyecto.id}/hitos/${r.hito_id}/entregables/${r.id}/actualizar-estado`,{estado:e,observaciones:n,archivos:$,agregar_comentario:!!n},{preserveScroll:!0,onSuccess:()=>{E.success("Estado del entregable actualizado")},onError:()=>{E.error("Error al actualizar el estado")}})},ee=(r,e)=>{p.visit(`/admin/proyectos/${s.proyecto.id}/hitos/${e.id}/entregables/${r.id}/edit`)},te=(r,e)=>{confirm(`¿Estás seguro de eliminar el entregable "${r.nombre}"?`)&&p.delete(`/admin/proyectos/${s.proyecto.id}/hitos/${e.id}/entregables/${r.id}`,{onSuccess:()=>{E.success("Entregable eliminado exitosamente")},onError:()=>{E.error("Error al eliminar el entregable")}})},ae=(r,e)=>{const n=`/admin/proyectos/${s.proyecto.id}?tab=hitos&hito=${e.id}&modal=entregable_${r.id}`;p.visit(n,{preserveState:!0,preserveScroll:!0})},oe=L(()=>{let r=s.activities||[];return f.value.usuario_id&&(r=r.filter(e=>{var n;return((n=e.causer)==null?void 0:n.id)===f.value.usuario_id})),f.value.tipo_entidad&&(r=r.filter(e=>e.subject_type===f.value.tipo_entidad)),f.value.tipo_accion&&(r=r.filter(e=>e.event===f.value.tipo_accion)),(f.value.fecha_inicio||f.value.fecha_fin)&&(r=r.filter(e=>{const n=new Date(e.created_at);if(f.value.fecha_inicio){const $=new Date(f.value.fecha_inicio);if(n<$)return!1}if(f.value.fecha_fin){const $=new Date(f.value.fecha_fin);if($.setHours(23,59,59,999),n>$)return!1}return!0})),r});return(r,e)=>(u(),w(R,null,[o(a(ne),{title:`Proyecto: ${t.proyecto.nombre}`},null,8,["title"]),o(re,{breadcrumbs:M},{default:i(()=>[g("div",He,[g("div",Te,[g("div",null,[g("h1",De,q(t.proyecto.nombre),1),t.proyecto.descripcion?(u(),w("p",Ve,q(t.proyecto.descripcion),1)):b("",!0)]),g("div",je,[t.canEdit?(u(),h(a(N),{key:0,href:`/admin/proyectos/${t.proyecto.id}/edit`},{default:i(()=>[o(a(k),null,{default:i(()=>[o(a(O),{class:"mr-2 h-4 w-4"}),e[5]||(e[5]=m(" Editar ",-1))]),_:1})]),_:1},8,["href"])):b("",!0),t.canDelete?(u(),h(a(k),{key:1,variant:"destructive",onClick:c},{default:i(()=>[o(a(qe),{class:"mr-2 h-4 w-4"}),e[6]||(e[6]=m(" Eliminar ",-1))]),_:1})):b("",!0)])]),o(a(ue),{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=n=>P.value=n),class:"w-full"},{default:i(()=>[o(a(de),{class:"grid w-full grid-cols-5"},{default:i(()=>[o(a(H),{value:"general"},{default:i(()=>[o(a(xe),{class:"mr-2 h-4 w-4"}),e[7]||(e[7]=m(" General ",-1))]),_:1}),o(a(H),{value:"hitos"},{default:i(()=>{var n;return[o(a(Se),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=m(" Hitos y Entregables ",-1)),(n=t.totales)!=null&&n.hitos?(u(),h(a(I),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:i(()=>[m(q(t.totales.hitos),1)]),_:1})):b("",!0)]}),_:1}),o(a(H),{value:"evidencias"},{default:i(()=>{var n;return[o(a(ke),{class:"mr-2 h-4 w-4"}),e[9]||(e[9]=m(" Evidencias ",-1)),(n=t.totales)!=null&&n.evidencias?(u(),h(a(I),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:i(()=>[m(q(t.totales.evidencias),1)]),_:1})):b("",!0)]}),_:1}),o(a(H),{value:"contratos"},{default:i(()=>{var n;return[o(a(G),{class:"mr-2 h-4 w-4"}),e[10]||(e[10]=m(" Contratos ",-1)),(n=t.totales)!=null&&n.contratos?(u(),h(a(I),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:i(()=>[m(q(t.totales.contratos),1)]),_:1})):b("",!0)]}),_:1}),o(a(H),{value:"actividad"},{default:i(()=>[o(a(he),{class:"mr-2 h-4 w-4"}),e[11]||(e[11]=m(" Actividad ",-1))]),_:1})]),_:1}),o(a(T),{value:"general",class:"space-y-4 mt-6"},{default:i(()=>[o(ye,{"proyecto-id":t.proyecto.id,activo:t.proyecto.activo,responsable:t.proyecto.responsable,creador:t.proyecto.creador,"created-at":t.proyecto.created_at,"updated-at":t.proyecto.updated_at,"show-id":!0,"show-activo":!0},null,8,["proyecto-id","activo","responsable","creador","created-at","updated-at"]),o(ve,{estado:t.proyecto.estado,"estado-label":t.proyecto.estado_label,prioridad:t.proyecto.prioridad,"prioridad-label":t.proyecto.prioridad_label,"porcentaje-completado":t.proyecto.porcentaje_completado,"fecha-inicio":t.proyecto.fecha_inicio,"fecha-fin":t.proyecto.fecha_fin,"duracion-dias":t.proyecto.duracion_dias},null,8,["estado","estado-label","prioridad","prioridad-label","porcentaje-completado","fecha-inicio","fecha-fin","duracion-dias"]),o(a(V),null,{default:i(()=>[o(a(U),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:i(()=>[o(a(F),null,{default:i(()=>[...e[12]||(e[12]=[m(" Etiquetas ",-1)])]),_:1}),t.canManageTags&&!x.value?(u(),h(a(k),{key:0,variant:"ghost",size:"sm",onClick:e[0]||(e[0]=n=>x.value=!0)},{default:i(()=>[o(a(O),{class:"mr-1 h-4 w-4"}),e[13]||(e[13]=m(" Editar ",-1))]),_:1})):b("",!0)]),_:1}),o(a(j),null,{default:i(()=>[x.value?(u(),w("div",Ae,[t.categorias?(u(),h(pe,{key:0,modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=n=>S.value=n),categorias:t.categorias,"max-etiquetas":10,placeholder:"Seleccionar etiquetas...",description:"Selecciona hasta 10 etiquetas para este proyecto"},null,8,["modelValue","categorias"])):b("",!0),g("div",Me,[o(a(k),{size:"sm",onClick:y,disabled:a(D)},{default:i(()=>[...e[14]||(e[14]=[m(" Guardar ",-1)])]),_:1},8,["disabled"]),o(a(k),{size:"sm",variant:"outline",onClick:v,disabled:a(D)},{default:i(()=>[...e[15]||(e[15]=[m(" Cancelar ",-1)])]),_:1},8,["disabled"])])])):(u(),w("div",Be,[t.proyecto.etiquetas&&t.proyecto.etiquetas.length>0?(u(),h(me,{key:0,etiquetas:t.proyecto.etiquetas,"show-categoria":!0,interactive:!0,size:"md"},null,8,["etiquetas"])):(u(),w("p",ze," No hay etiquetas asignadas "))]))]),_:1})]),_:1}),t.proyecto.campos_personalizados&&t.proyecto.campos_personalizados.length>0?(u(),h(we,{key:0,valores:t.proyecto.campos_personalizados},null,8,["valores"])):b("",!0),t.proyecto.activities&&t.proyecto.activities.length>0?(u(),h(a(V),{key:1},{default:i(()=>[o(a(U),null,{default:i(()=>[o(a(F),null,{default:i(()=>[...e[16]||(e[16]=[m("Actividad Reciente",-1)])]),_:1})]),_:1}),o(a(j),null,{default:i(()=>[g("div",Ne,[(u(!0),w(R,null,le(t.proyecto.activities,n=>{var $;return u(),w("div",{key:n.id,class:"flex items-start gap-3 pb-3 border-b last:border-b-0"},[g("div",Ue,[o(a(Ce),{class:"h-4 w-4 text-gray-500"})]),g("div",Fe,[g("p",Ie,[g("span",_e,q((($=n.causer)==null?void 0:$.name)||"Sistema"),1),m(" "+q(n.description),1)]),g("p",Le,q(d(n.created_at)),1)])])}),128))])]),_:1})]),_:1})):b("",!0)]),_:1}),o(a(T),{value:"contratos",class:"space-y-4 mt-6"},{default:i(()=>[t.canCreateContracts?(u(),w("div",Re,[o(a(N),{href:`/admin/contratos/create?proyecto_id=${t.proyecto.id}`},{default:i(()=>[o(a(k),null,{default:i(()=>[o(a(J),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=m(" Nuevo Contrato ",-1))]),_:1})]),_:1},8,["href"])])):b("",!0),t.proyecto.contratos&&t.proyecto.contratos.length>0?(u(),h(a(V),{key:1},{default:i(()=>[o(a(U),null,{default:i(()=>[o(a(F),null,{default:i(()=>[...e[18]||(e[18]=[m("Contratos del Proyecto",-1)])]),_:1}),o(a(ce),null,{default:i(()=>[...e[19]||(e[19]=[m(" Lista de contratos asociados a este proyecto ",-1)])]),_:1})]),_:1}),o(a(j),null,{default:i(()=>[g("div",Oe,[o(fe,{contratos:t.proyecto.contratos,"show-proyecto":!1,"show-actions":!0,"actions-style":"buttons"},null,8,["contratos"])])]),_:1})]),_:1})):(u(),h(a(V),{key:2},{default:i(()=>[o(a(j),{class:"py-8"},{default:i(()=>[g("div",Ge,[o(a(G),{class:"mx-auto h-12 w-12 text-gray-400"}),e[21]||(e[21]=g("p",{class:"mt-2 text-sm text-gray-600"},"No hay contratos asociados",-1)),t.canCreateContracts?(u(),h(a(N),{key:0,href:`/admin/contratos/create?proyecto_id=${t.proyecto.id}`,class:"mt-4 inline-block"},{default:i(()=>[o(a(k),{variant:"outline"},{default:i(()=>[o(a(J),{class:"mr-2 h-4 w-4"}),e[20]||(e[20]=m(" Crear primer contrato ",-1))]),_:1})]),_:1},8,["href"])):b("",!0)])]),_:1})]),_:1}))]),_:1}),o(a(T),{value:"hitos",class:"space-y-4 mt-0 sm:mt-6"},{default:i(()=>[t.canViewHitos?(u(),h($e,{key:0,hitos:t.proyecto.hitos||[],"proyecto-id":t.proyecto.id,"can-edit":t.canEditHitos,"can-delete":t.canDeleteHitos,"can-create":t.canCreateHitos,"can-manage-deliverables":t.canManageEntregables,"can-complete":t.canManageEntregables,"show-filters":!0,"base-url":"/admin/proyectos",onCreateHito:e[2]||(e[2]=n=>a(p).visit(`/admin/proyectos/${t.proyecto.id}/hitos/create`)),onViewHito:K,onEditHito:X,onDeleteHito:Q,onAddEntregable:W,onViewEntregable:ae,onCompleteEntregable:Y,onUpdateEntregableStatus:Z,onEditEntregable:ee,onDeleteEntregable:te},null,8,["hitos","proyecto-id","can-edit","can-delete","can-create","can-manage-deliverables","can-complete"])):b("",!0)]),_:1}),o(a(T),{value:"evidencias",class:"space-y-4 mt-6"},{default:i(()=>[o(ge,{contratos:t.proyecto.contratos||[],hitos:t.proyecto.hitos||[],"proyecto-id":t.proyecto.id,modo:"admin","puede-gestionar-estado":z.value,"format-date":l},null,8,["contratos","hitos","proyecto-id","puede-gestionar-estado"])]),_:1}),o(a(T),{value:"actividad",class:"space-y-4 mt-6"},{default:i(()=>[t.activities&&t.activities.length>0?(u(),h(be,{key:0,modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=n=>f.value=n),usuarios:t.usuariosActividades,"context-level":"proyecto"},null,8,["modelValue","usuarios"])):b("",!0),o(Ee,{activities:oe.value,title:"Historial de Actividad",description:"Registro completo de cambios y eventos del proyecto, hitos y entregables","empty-message":"No hay actividad registrada"},null,8,["activities"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{eo as default};
