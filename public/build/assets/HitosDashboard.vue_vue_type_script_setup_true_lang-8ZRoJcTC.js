import{r as J,p as ft,c as K,d as Ce,i as D,g as x,j as T,F as Q,k as se,e as p,f as u,w,h as R,b as N,m as f,x as Me,t as P,n as W,ai as bt,o as Nn,B as Mn,W as Kt,a1 as Bn,s as Rn,v as Qt}from"./app-DvrHxm-A.js";import{g as Fn}from"./Input.vue_vue_type_script_setup_true_lang-Brldm4hc.js";import{_ as fn,c as mn,a as Hn,b as Vn}from"./CardTitle.vue_vue_type_script_setup_true_lang-DMIs0XFP.js";import{c as gn,_ as oe}from"./createLucideIcon-C9SNFSBj.js";import{_ as he}from"./index-fBOGNOl1.js";import{_ as Zt}from"./Progress.vue_vue_type_script_setup_true_lang-BfSziViM.js";import{_ as Mt}from"./ScrollArea.vue_vue_type_script_setup_true_lang-eEJzrkA3.js";import{_ as Xn}from"./Separator.vue_vue_type_script_setup_true_lang-1pSfRjiQ.js";import{C as Yn,_ as wt,a as _t,b as Et,c as Dt,d as Fe}from"./SelectValue.vue_vue_type_script_setup_true_lang-WMyc99vm.js";import{_ as jn,a as zn,b as Ln,c as Un,d as Gn,e as Wn,f as qn,g as Kn}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CQqij5Xj.js";import{f as Bt,e as Rt}from"./es-BDPlFIsO.js";import{_ as Qn}from"./StatusChangeModal.vue_vue_type_script_setup_true_lang-znp2MKkB.js";import{_ as Zn}from"./Switch.vue_vue_type_script_setup_true_lang-DGbrmhDP.js";import{_ as Jn}from"./Label.vue_vue_type_script_setup_true_lang-DO_0a9LA.js";import{L as ea}from"./list-BO9-kNlf.js";import{L as ta}from"./useFlashMessages-CHloRx3R.js";import{C as qe}from"./circle-alert-MTeQVoNG.js";import{C as yt}from"./circle-x-CMNW14IR.js";import{C as Ee}from"./clock-CAkFilXS.js";import{C as Ke}from"./circle-check-big-XiYYpZgm.js";import{C as hn}from"./chevron-right-m0_abZes.js";import{F as na}from"./flag-B3C9F7M-.js";import{C as Ft}from"./calendar-LPftFaUR.js";import{U as lt}from"./user-CnCAmwg9.js";import{U as aa}from"./users-RWV-6XWO.js";import{S as pn}from"./square-pen-CuYWTOhv.js";import{T as vn}from"./trash-2-0hXXyiOB.js";import{F as oa}from"./file-text-BaRiPrEZ.js";import{_ as la,a as ra,b as ia,c as sa}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Dnc-YD0L.js";import{T as Jt}from"./target-CJ8YoB3s.js";import{E as en}from"./external-link-IkNiKorY.js";import{F as da}from"./folder-open-6TjxLcK8.js";import{P as tn}from"./plus-ht-a-3Mo.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=gn("Columns3Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=gn("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),He={VIEW_MODE:"entregables-view-mode",CONFIRM_ON_DRAG:"entregables-confirm-drag"},je={pendiente:{label:"Pendiente",color:"text-gray-800",bgColor:"bg-gray-100",dotColor:"bg-gray-400"},en_progreso:{label:"En Progreso",color:"text-blue-800",bgColor:"bg-blue-100",dotColor:"bg-blue-500"},completado:{label:"Completado",color:"text-green-800",bgColor:"bg-green-100",dotColor:"bg-green-500"},cancelado:{label:"Cancelado",color:"text-red-800",bgColor:"bg-red-100",dotColor:"bg-red-500"}},rt={baja:{label:"Baja",color:"text-gray-600",bgColor:"bg-gray-100"},media:{label:"Media",color:"text-yellow-800",bgColor:"bg-yellow-100"},alta:{label:"Alta",color:"text-red-800",bgColor:"bg-red-100"}},Ht=["pendiente","en_progreso","completado","cancelado"];function Qe(e,t={}){const{defaultViewMode:a="list",defaultConfirmOnDrag:n=!0}=t,o=J(localStorage.getItem(He.VIEW_MODE)||a),l=J(localStorage.getItem(He.CONFIRM_ON_DRAG)!==null?localStorage.getItem(He.CONFIRM_ON_DRAG)==="true":n);ft(o,c=>{localStorage.setItem(He.VIEW_MODE,c)}),ft(l,c=>{localStorage.setItem(He.CONFIRM_ON_DRAG,String(c))});const r=K(()=>({pendientes:e.value.filter(c=>c.estado==="pendiente"),en_progreso:e.value.filter(c=>c.estado==="en_progreso"),completados:e.value.filter(c=>c.estado==="completado"),cancelados:e.value.filter(c=>c.estado==="cancelado")}));return{viewMode:o,confirmOnDrag:l,entregablesAgrupados:r,getEstadoConfig:c=>je[c]||je.pendiente,getPrioridadConfig:c=>rt[c]||rt.baja,getEstadoColor:c=>{const b=je[c];return b?`${b.bgColor} ${b.color}`:"bg-gray-100 text-gray-800"},getPrioridadColor:c=>{const b=rt[c];return b?`${b.bgColor} ${b.color}`:"bg-gray-100 text-gray-600"},formatDate:c=>c?Bt(new Date(c),"dd MMM yyyy",{locale:Rt}):"Sin fecha",formatDateTime:c=>c?Bt(new Date(c),"dd MMM yyyy 'a las' HH:mm",{locale:Rt}):"-",getDiasRestantes:c=>{if(!c)return null;const b=Math.ceil((new Date(c).getTime()-new Date().getTime())/(1e3*60*60*24));return b<0?`Vencido hace ${Math.abs(b)} días`:b===0?"Vence hoy":b===1?"Vence mañana":`${b} días`},isVencido:(c,b)=>!c||b==="completado"||b==="cancelado"?!1:new Date(c)<new Date}}const ca={class:"flex items-center justify-between gap-4 flex-wrap"},fa={class:"flex gap-1 bg-muted p-1 rounded-lg"},ma={class:"ml-1.5 hidden sm:inline text-xs"},ga={key:0,class:"flex items-center gap-2"},ha=Ce({__name:"HitosViewModeToggle",props:{modelValue:{},confirmOnDrag:{type:Boolean}},emits:["update:modelValue","update:confirmOnDrag"],setup(e,{emit:t}){const a=t,n=[{value:"list",icon:ea,label:"Lista"},{value:"tabs",icon:ta,label:"Tabs"},{value:"kanban",icon:ua,label:"Kanban"}];return(o,l)=>(f(),D("div",ca,[x("div",fa,[(f(),D(Q,null,se(n,r=>p(u(oe),{key:r.value,variant:e.modelValue===r.value?"default":"ghost",size:"sm",class:"h-8 px-3",title:r.label,onClick:s=>a("update:modelValue",r.value)},{default:w(()=>[(f(),N(Me(r.icon),{class:"h-4 w-4"})),x("span",ma,P(r.label),1)]),_:2},1032,["variant","title","onClick"])),64))]),e.modelValue==="kanban"?(f(),D("div",ga,[p(u(Zn),{id:"confirm-drag",checked:e.confirmOnDrag,"onUpdate:checked":l[0]||(l[0]=r=>a("update:confirmOnDrag",r))},null,8,["checked"]),p(u(Jn),{for:"confirm-drag",class:"text-sm text-muted-foreground cursor-pointer"},{default:w(()=>[...l[1]||(l[1]=[R(" Confirmar al arrastrar ",-1)])]),_:1})])):T("",!0)]))}}),pa={class:"flex items-start gap-2"},va={class:"flex-1 min-w-0"},ba={class:"flex items-center gap-2 flex-wrap"},ya={key:0,class:"mt-1.5 flex items-center gap-2 text-xs text-muted-foreground"},xa={key:1,class:"flex items-center gap-1 truncate"},wa={key:0,class:"ml-8 mt-3 space-y-3"},_a={key:0,class:"text-sm text-muted-foreground"},Ea={class:"flex flex-wrap gap-4 text-sm"},Da={class:"flex items-center gap-1 text-muted-foreground"},Ca={key:0,class:"flex items-center gap-1 text-muted-foreground"},Sa={key:1,class:"flex items-center gap-2"},ka={class:"flex gap-1 flex-wrap"},Ta={key:2,class:"text-sm text-muted-foreground space-y-1"},Ia={key:0,class:"flex items-center gap-1"},Oa={key:1,class:"flex items-center gap-1"},$a={key:2,class:"italic mt-2"},Pa={key:1,class:"flex items-center gap-1 mt-3 pt-3 border-t"},zt=Ce({__name:"HitosEntregableCard",props:{entregable:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},variant:{default:"default"}},emits:["toggle-expand","edit","delete","complete","change-status"],setup(e,{emit:t}){const a=e,n=t,o=J([]),{getEstadoColor:l,getPrioridadColor:r,formatDate:s,formatDateTime:d,getDiasRestantes:i,isVencido:m}=Qe(o),h=K(()=>je[a.entregable.estado]),y=K(()=>rt[a.entregable.prioridad]),_=K(()=>i(a.entregable.fecha_fin)),v=K(()=>m(a.entregable.fecha_fin,a.entregable.estado)),c=K(()=>a.entregable.estado==="completado"),b=K(()=>a.entregable.estado==="cancelado"),F=K(()=>{switch(a.entregable.estado){case"completado":return Ke;case"en_progreso":return Ee;case"cancelado":return yt;default:return qe}}),H=K(()=>{const j="transition-all duration-150",E={en_progreso:"border-l-4 border-l-blue-500",completado:"border-l-4 border-l-green-500 bg-green-50/30",cancelado:"border-l-4 border-l-red-500 bg-red-50/30"},I=[j];return E[a.entregable.estado]&&I.push(E[a.entregable.estado]),a.draggable&&I.push("cursor-grab active:cursor-grabbing hover:shadow-md"),I.join(" ")});return(j,E)=>(f(),N(u(fn),{class:W(H.value),"data-id":e.entregable.id,"data-estado":e.entregable.estado},{default:w(()=>[p(u(mn),{class:W(e.variant==="kanban"?"p-3":"p-4")},{default:w(()=>[x("div",pa,[e.variant!=="kanban"?(f(),N(u(oe),{key:0,variant:"ghost",size:"sm",class:"h-6 w-6 p-0 flex-shrink-0",onClick:E[0]||(E[0]=I=>n("toggle-expand"))},{default:w(()=>[e.expanded?(f(),N(u(Yn),{key:1,class:"h-4 w-4"})):(f(),N(u(hn),{key:0,class:"h-4 w-4"}))]),_:1})):T("",!0),e.variant==="kanban"?(f(),N(Me(F.value),{key:1,class:W(["h-4 w-4 flex-shrink-0 mt-0.5",h.value.color])},null,8,["class"])):T("",!0),x("div",va,[x("div",ba,[x("h4",{class:W(["font-medium truncate",{"line-through text-muted-foreground":c.value,"text-sm":e.variant==="kanban"}])},P(e.entregable.nombre),3),e.variant!=="kanban"?(f(),D(Q,{key:0},[p(u(he),{class:W([u(r)(e.entregable.prioridad),"text-[10px] px-1.5"]),variant:"outline"},{default:w(()=>[R(P(y.value.label),1)]),_:1},8,["class"]),p(u(he),{class:W([u(l)(e.entregable.estado),"text-[10px] px-1.5"])},{default:w(()=>[R(P(h.value.label),1)]),_:1},8,["class"])],64)):T("",!0),e.variant==="kanban"&&e.entregable.prioridad==="alta"?(f(),N(u(he),{key:1,class:"bg-red-100 text-red-800 text-[10px] px-1"},{default:w(()=>[p(u(na),{class:"h-3 w-3"})]),_:1})):T("",!0)]),e.variant==="kanban"?(f(),D("div",ya,[e.entregable.fecha_fin?(f(),D("span",{key:0,class:W(["flex items-center gap-1",{"text-red-600":v.value}])},[p(u(Ft),{class:"h-3 w-3"}),R(" "+P(u(s)(e.entregable.fecha_fin)),1)],2)):T("",!0),e.entregable.responsable?(f(),D("span",xa,[p(u(lt),{class:"h-3 w-3"}),R(" "+P(e.entregable.responsable.name),1)])):T("",!0)])):T("",!0)])]),e.expanded&&e.variant!=="kanban"?(f(),D("div",wa,[e.entregable.descripcion?(f(),D("p",_a,P(e.entregable.descripcion),1)):T("",!0),x("div",Ea,[x("div",Da,[p(u(Ft),{class:"h-4 w-4"}),x("span",null,P(u(s)(e.entregable.fecha_inicio))+" - "+P(u(s)(e.entregable.fecha_fin)),1)]),e.entregable.responsable?(f(),D("div",Ca,[p(u(lt),{class:"h-4 w-4"}),x("span",null,P(e.entregable.responsable.name),1)])):T("",!0),_.value?(f(),D("div",{key:1,class:W(["flex items-center gap-1",{"text-red-600":v.value}])},[p(u(Ee),{class:"h-4 w-4"}),x("span",null,P(_.value),1)],2)):T("",!0)]),e.entregable.usuarios&&e.entregable.usuarios.length>0?(f(),D("div",Sa,[p(u(aa),{class:"h-4 w-4 text-muted-foreground"}),x("div",ka,[(f(!0),D(Q,null,se(e.entregable.usuarios,I=>(f(),N(u(he),{key:I.id,variant:"secondary",class:"text-xs"},{default:w(()=>[R(P(I.name),1)]),_:2},1024))),128))])])):T("",!0),c.value?(f(),D("div",Ta,[e.entregable.completado_at?(f(),D("div",Ia,[p(u(Ee),{class:"h-3 w-3"}),x("span",null,"Completado: "+P(u(d)(e.entregable.completado_at)),1)])):T("",!0),e.entregable.completado_por_usuario?(f(),D("div",Oa,[p(u(lt),{class:"h-3 w-3"}),x("span",null,"Por: "+P(e.entregable.completado_por_usuario.name),1)])):T("",!0),e.entregable.observaciones_estado?(f(),D("p",$a,' "'+P(e.entregable.observaciones_estado)+'" ',1)):T("",!0)])):T("",!0)])):T("",!0),e.variant==="default"&&(e.canEdit||e.canDelete||e.canComplete)?(f(),D("div",Pa,[!c.value&&!b.value?(f(),D(Q,{key:0},[e.canComplete?(f(),N(u(oe),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:E[1]||(E[1]=I=>n("complete"))},{default:w(()=>[p(u(Ke),{class:"h-3 w-3 mr-1"}),E[6]||(E[6]=R(" Completar ",-1))]),_:1})):T("",!0),e.canEdit&&e.entregable.estado==="pendiente"?(f(),N(u(oe),{key:1,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:E[2]||(E[2]=I=>n("change-status","en_progreso"))},{default:w(()=>[p(u(Ee),{class:"h-3 w-3 mr-1"}),E[7]||(E[7]=R(" En progreso ",-1))]),_:1})):T("",!0)],64)):c.value?(f(),D(Q,{key:1},[e.canEdit?(f(),N(u(oe),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:E[3]||(E[3]=I=>n("change-status","pendiente"))},{default:w(()=>[p(u(qe),{class:"h-3 w-3 mr-1"}),E[8]||(E[8]=R(" Reabrir ",-1))]),_:1})):T("",!0)],64)):T("",!0),e.canEdit?(f(),N(u(oe),{key:2,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:E[4]||(E[4]=I=>n("edit"))},{default:w(()=>[p(u(pn),{class:"h-3 w-3 mr-1"}),E[9]||(E[9]=R(" Editar ",-1))]),_:1})):T("",!0),e.canDelete?(f(),N(u(oe),{key:3,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:E[5]||(E[5]=I=>n("delete"))},{default:w(()=>[p(u(vn),{class:"h-3 w-3 mr-1"}),E[10]||(E[10]=R(" Eliminar ",-1))]),_:1})):T("",!0)])):T("",!0)]),_:1},8,["class"])]),_:1},8,["class","data-id","data-estado"]))}}),Aa={class:"space-y-6"},Na={key:0},Ma={class:"font-semibold mb-3 flex items-center gap-2"},Ba={class:"space-y-2"},Ra={key:0,class:"text-center py-8"},Fa=Ce({__name:"HitosEntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1}},emits:["edit","delete","complete","change-status"],setup(e,{emit:t}){const a=e,n=t,o=bt(a,"entregables"),{entregablesAgrupados:l}=Qe(o),r=J(new Set),s=y=>{r.value.has(y)?r.value.delete(y):r.value.add(y)},d=y=>r.value.has(y),i=y=>{n("complete",y)},m=(y,_)=>{n("change-status",y,_)},h=[{key:"pendientes",icon:qe,iconClass:"text-yellow-600",label:"Pendientes"},{key:"en_progreso",icon:Ee,iconClass:"text-blue-600",label:"En Progreso"},{key:"completados",icon:Ke,iconClass:"text-green-600",label:"Completados"},{key:"cancelados",icon:yt,iconClass:"text-red-600",label:"Cancelados"}];return(y,_)=>(f(),D("div",Aa,[(f(),D(Q,null,se(h,v=>(f(),D(Q,{key:v.key},[u(l)[v.key].length>0?(f(),D("div",Na,[x("h3",Ma,[(f(),N(Me(v.icon),{class:W(["h-5 w-5",v.iconClass])},null,8,["class"])),R(" "+P(v.label)+" ("+P(u(l)[v.key].length)+") ",1)]),x("div",Ba,[(f(!0),D(Q,null,se(u(l)[v.key],c=>(f(),N(zt,{key:c.id,entregable:c,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,expanded:d(c.id),variant:"default",onToggleExpand:b=>s(c.id),onEdit:b=>n("edit",c),onDelete:b=>n("delete",c),onComplete:b=>i(c),onChangeStatus:b=>m(c,b)},null,8,["entregable","can-edit","can-delete","can-complete","expanded","onToggleExpand","onEdit","onDelete","onComplete","onChangeStatus"]))),128))])])):T("",!0)],64))),64)),e.entregables.length===0?(f(),D("div",Ra,[p(u(oa),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),_[0]||(_[0]=x("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):T("",!0)]))}}),Ha={class:"hidden sm:inline text-xs"},Va={key:0,class:"space-y-2"},Xa={key:1,class:"text-center py-8 border rounded-lg bg-muted/30"},Ya={class:"text-muted-foreground text-sm"},ja=Ce({__name:"HitosEntregablesTabs",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1}},emits:["edit","delete","complete","change-status"],setup(e,{emit:t}){const a=e,n=t,o=bt(a,"entregables"),{entregablesAgrupados:l}=Qe(o),r=J(new Set),s=J("pendiente"),d=v=>{r.value.has(v)?r.value.delete(v):r.value.add(v)},i=v=>r.value.has(v),m={pendiente:{icon:qe,iconClass:"text-yellow-600",label:"Pendientes",key:"pendientes"},en_progreso:{icon:Ee,iconClass:"text-blue-600",label:"En Progreso",key:"en_progreso"},completado:{icon:Ke,iconClass:"text-green-600",label:"Completados",key:"completados"},cancelado:{icon:yt,iconClass:"text-red-600",label:"Cancelados",key:"cancelados"}},h=v=>{n("complete",v)},y=(v,c)=>{n("change-status",v,c)},_=v=>{const c=m[v];return l.value[c.key]};return(v,c)=>(f(),N(u(la),{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=b=>s.value=b),class:"w-full"},{default:w(()=>[p(u(ra),{class:"w-full grid grid-cols-4 h-auto"},{default:w(()=>[(f(!0),D(Q,null,se(u(Ht),b=>(f(),N(u(ia),{key:b,value:b,class:"gap-1.5 py-2 px-2 data-[state=active]:bg-background"},{default:w(()=>[(f(),N(Me(m[b].icon),{class:W(["h-4 w-4 flex-shrink-0",m[b].iconClass])},null,8,["class"])),x("span",Ha,P(m[b].label),1),p(u(he),{variant:"secondary",class:"ml-1 text-xs px-1.5 py-0"},{default:w(()=>[R(P(_(b).length),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),(f(!0),D(Q,null,se(u(Ht),b=>(f(),N(u(sa),{key:b,value:b,class:"mt-4"},{default:w(()=>[_(b).length>0?(f(),D("div",Va,[(f(!0),D(Q,null,se(_(b),F=>(f(),N(zt,{key:F.id,entregable:F,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,expanded:i(F.id),variant:"default",onToggleExpand:H=>d(F.id),onEdit:H=>n("edit",F),onDelete:H=>n("delete",F),onComplete:H=>h(F),onChangeStatus:H=>y(F,H)},null,8,["entregable","can-edit","can-delete","can-complete","expanded","onToggleExpand","onEdit","onDelete","onComplete","onChangeStatus"]))),128))])):(f(),D("div",Xa,[(f(),N(Me(m[b].icon),{class:W(["h-10 w-10 mx-auto mb-3",m[b].iconClass+"/50"])},null,8,["class"])),x("p",Ya," No hay entregables "+P(m[b].label.toLowerCase()),1)]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]))}});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function nn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nn(Object(a),!0).forEach(function(n){za(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nn(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function it(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?it=function(t){return typeof t}:it=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(e)}function za(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ve(){return ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ve.apply(this,arguments)}function La(e,t){if(e==null)return{};var a={},n=Object.keys(e),o,l;for(l=0;l<n.length;l++)o=n[l],!(t.indexOf(o)>=0)&&(a[o]=e[o]);return a}function Ua(e,t){if(e==null)return{};var a=La(e,t),n,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ga="1.15.6";function pe(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var be=pe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ze=pe(/Edge/i),an=pe(/firefox/i),ze=pe(/safari/i)&&!pe(/chrome/i)&&!pe(/android/i),Lt=pe(/iP(ad|od|hone)/i),bn=pe(/chrome/i)&&pe(/android/i),yn={capture:!1,passive:!1};function B(e,t,a){e.addEventListener(t,a,!be&&yn)}function M(e,t,a){e.removeEventListener(t,a,!be&&yn)}function mt(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function xn(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function fe(e,t,a,n){if(e){a=a||document;do{if(t!=null&&(t[0]===">"?e.parentNode===a&&mt(e,t):mt(e,t))||n&&e===a)return e;if(e===a)break}while(e=xn(e))}return null}var on=/\s+/g;function re(e,t,a){if(e&&t)if(e.classList)e.classList[a?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(on," ").replace(" "+t+" "," ");e.className=(n+(a?" "+t:"")).replace(on," ")}}function S(e,t,a){var n=e&&e.style;if(n){if(a===void 0)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(a=e.currentStyle),t===void 0?a:a[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=a+(typeof a=="string"?"":"px")}}function Ne(e,t){var a="";if(typeof e=="string")a=e;else do{var n=S(e,"transform");n&&n!=="none"&&(a=n+" "+a)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(a)}function wn(e,t,a){if(e){var n=e.getElementsByTagName(t),o=0,l=n.length;if(a)for(;o<l;o++)a(n[o],o);return n}return[]}function me(){var e=document.scrollingElement;return e||document.documentElement}function L(e,t,a,n,o){if(!(!e.getBoundingClientRect&&e!==window)){var l,r,s,d,i,m,h;if(e!==window&&e.parentNode&&e!==me()?(l=e.getBoundingClientRect(),r=l.top,s=l.left,d=l.bottom,i=l.right,m=l.height,h=l.width):(r=0,s=0,d=window.innerHeight,i=window.innerWidth,m=window.innerHeight,h=window.innerWidth),(t||a)&&e!==window&&(o=o||e.parentNode,!be))do if(o&&o.getBoundingClientRect&&(S(o,"transform")!=="none"||a&&S(o,"position")!=="static")){var y=o.getBoundingClientRect();r-=y.top+parseInt(S(o,"border-top-width")),s-=y.left+parseInt(S(o,"border-left-width")),d=r+l.height,i=s+l.width;break}while(o=o.parentNode);if(n&&e!==window){var _=Ne(o||e),v=_&&_.a,c=_&&_.d;_&&(r/=c,s/=v,h/=v,m/=c,d=r+m,i=s+h)}return{top:r,left:s,bottom:d,right:i,width:h,height:m}}}function ln(e,t,a){for(var n=De(e,!0),o=L(e)[t];n;){var l=L(n)[a],r=void 0;if(r=o>=l,!r)return n;if(n===me())break;n=De(n,!1)}return!1}function Be(e,t,a,n){for(var o=0,l=0,r=e.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==k.ghost&&(n||r[l]!==k.dragged)&&fe(r[l],a.draggable,e,!1)){if(o===t)return r[l];o++}l++}return null}function Ut(e,t){for(var a=e.lastElementChild;a&&(a===k.ghost||S(a,"display")==="none"||t&&!mt(a,t));)a=a.previousElementSibling;return a||null}function ue(e,t){var a=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==k.clone&&(!t||mt(e,t))&&a++;return a}function rn(e){var t=0,a=0,n=me();if(e)do{var o=Ne(e),l=o.a,r=o.d;t+=e.scrollLeft*l,a+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[t,a]}function Wa(e,t){for(var a in e)if(e.hasOwnProperty(a)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[a][n])return Number(a)}return-1}function De(e,t){if(!e||!e.getBoundingClientRect)return me();var a=e,n=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var o=S(a);if(a.clientWidth<a.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||a.clientHeight<a.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!a.getBoundingClientRect||a===document.body)return me();if(n||t)return a;n=!0}}while(a=a.parentNode);return me()}function qa(e,t){if(e&&t)for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function St(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Le;function _n(e,t){return function(){if(!Le){var a=arguments,n=this;a.length===1?e.call(n,a[0]):e.apply(n,a),Le=setTimeout(function(){Le=void 0},t)}}}function Ka(){clearTimeout(Le),Le=void 0}function En(e,t,a){e.scrollLeft+=t,e.scrollTop+=a}function Dn(e){var t=window.Polymer,a=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):a?a(e).clone(!0)[0]:e.cloneNode(!0)}function Cn(e,t,a){var n={};return Array.from(e.children).forEach(function(o){var l,r,s,d;if(!(!fe(o,t.draggable,e,!1)||o.animated||o===a)){var i=L(o);n.left=Math.min((l=n.left)!==null&&l!==void 0?l:1/0,i.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,i.top),n.right=Math.max((s=n.right)!==null&&s!==void 0?s:-1/0,i.right),n.bottom=Math.max((d=n.bottom)!==null&&d!==void 0?d:-1/0,i.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var le="Sortable"+new Date().getTime();function Qa(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(S(o,"display")==="none"||o===k.ghost)){e.push({target:o,rect:L(o)});var l=ge({},e[e.length-1].rect);if(o.thisAnimationDuration){var r=Ne(o,!0);r&&(l.top-=r.f,l.left-=r.e)}o.fromRect=l}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(Wa(e,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var l=!1,r=0;e.forEach(function(s){var d=0,i=s.target,m=i.fromRect,h=L(i),y=i.prevFromRect,_=i.prevToRect,v=s.rect,c=Ne(i,!0);c&&(h.top-=c.f,h.left-=c.e),i.toRect=h,i.thisAnimationDuration&&St(y,h)&&!St(m,h)&&(v.top-h.top)/(v.left-h.left)===(m.top-h.top)/(m.left-h.left)&&(d=Ja(v,y,_,o.options)),St(h,m)||(i.prevFromRect=m,i.prevToRect=h,d||(d=o.options.animation),o.animate(i,v,h,d)),d&&(l=!0,r=Math.max(r,d),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},d),i.thisAnimationDuration=d)}),clearTimeout(t),l?t=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),e=[]},animate:function(n,o,l,r){if(r){S(n,"transition",""),S(n,"transform","");var s=Ne(this.el),d=s&&s.a,i=s&&s.d,m=(o.left-l.left)/(d||1),h=(o.top-l.top)/(i||1);n.animatingX=!!m,n.animatingY=!!h,S(n,"transform","translate3d("+m+"px,"+h+"px,0)"),this.forRepaintDummy=Za(n),S(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),S(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){S(n,"transition",""),S(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function Za(e){return e.offsetWidth}function Ja(e,t,a,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-a.top,2)+Math.pow(t.left-a.left,2))*n.animation}var Oe=[],kt={initializeByDefault:!0},Je={mount:function(t){for(var a in kt)kt.hasOwnProperty(a)&&!(a in t)&&(t[a]=kt[a]);Oe.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Oe.push(t)},pluginEvent:function(t,a,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var l=t+"Global";Oe.forEach(function(r){a[r.pluginName]&&(a[r.pluginName][l]&&a[r.pluginName][l](ge({sortable:a},n)),a.options[r.pluginName]&&a[r.pluginName][t]&&a[r.pluginName][t](ge({sortable:a},n)))})},initializePlugins:function(t,a,n,o){Oe.forEach(function(s){var d=s.pluginName;if(!(!t.options[d]&&!s.initializeByDefault)){var i=new s(t,a,t.options);i.sortable=t,i.options=t.options,t[d]=i,ve(n,i.defaults)}});for(var l in t.options)if(t.options.hasOwnProperty(l)){var r=this.modifyOption(t,l,t.options[l]);typeof r<"u"&&(t.options[l]=r)}},getEventProperties:function(t,a){var n={};return Oe.forEach(function(o){typeof o.eventProperties=="function"&&ve(n,o.eventProperties.call(a[o.pluginName],t))}),n},modifyOption:function(t,a,n){var o;return Oe.forEach(function(l){t[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[a]=="function"&&(o=l.optionListeners[a].call(t[l.pluginName],n))}),o}};function eo(e){var t=e.sortable,a=e.rootEl,n=e.name,o=e.targetEl,l=e.cloneEl,r=e.toEl,s=e.fromEl,d=e.oldIndex,i=e.newIndex,m=e.oldDraggableIndex,h=e.newDraggableIndex,y=e.originalEvent,_=e.putSortable,v=e.extraEventProperties;if(t=t||a&&a[le],!!t){var c,b=t.options,F="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!be&&!Ze?c=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent(n,!0,!0)),c.to=r||a,c.from=s||a,c.item=o||a,c.clone=l,c.oldIndex=d,c.newIndex=i,c.oldDraggableIndex=m,c.newDraggableIndex=h,c.originalEvent=y,c.pullMode=_?_.lastPutMode:void 0;var H=ge(ge({},v),Je.getEventProperties(n,t));for(var j in H)c[j]=H[j];a&&a.dispatchEvent(c),b[F]&&b[F].call(t,c)}}var to=["evt"],ae=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,l=Ua(n,to);Je.pluginEvent.bind(k)(t,a,ge({dragEl:g,parentEl:Y,ghostEl:$,rootEl:V,nextEl:Te,lastDownEl:st,cloneEl:X,cloneHidden:_e,dragStarted:Ve,putSortable:q,activeSortable:k.active,originalEvent:o,oldIndex:Ae,oldDraggableIndex:Ue,newIndex:ie,newDraggableIndex:we,hideGhostForTarget:In,unhideGhostForTarget:On,cloneNowHidden:function(){_e=!0},cloneNowShown:function(){_e=!1},dispatchSortableEvent:function(s){ne({sortable:a,name:s,originalEvent:o})}},l))};function ne(e){eo(ge({putSortable:q,cloneEl:X,targetEl:g,rootEl:V,oldIndex:Ae,oldDraggableIndex:Ue,newIndex:ie,newDraggableIndex:we},e))}var g,Y,$,V,Te,st,X,_e,Ae,ie,Ue,we,tt,q,Pe=!1,gt=!1,ht=[],Se,ce,Tt,It,sn,dn,Ve,$e,Ge,We=!1,nt=!1,dt,Z,Ot=[],Vt=!1,pt=[],xt=typeof document<"u",at=Lt,un=Ze||be?"cssFloat":"float",no=xt&&!bn&&!Lt&&"draggable"in document.createElement("div"),Sn=(function(){if(xt){if(be)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}})(),kn=function(t,a){var n=S(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),l=Be(t,0,a),r=Be(t,1,a),s=l&&S(l),d=r&&S(r),i=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+L(l).width,m=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+L(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var h=s.float==="left"?"left":"right";return r&&(d.clear==="both"||d.clear===h)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||i>=o&&n[un]==="none"||r&&n[un]==="none"&&i+m>o)?"vertical":"horizontal"},ao=function(t,a,n){var o=n?t.left:t.top,l=n?t.right:t.bottom,r=n?t.width:t.height,s=n?a.left:a.top,d=n?a.right:a.bottom,i=n?a.width:a.height;return o===s||l===d||o+r/2===s+i/2},oo=function(t,a){var n;return ht.some(function(o){var l=o[le].options.emptyInsertThreshold;if(!(!l||Ut(o))){var r=L(o),s=t>=r.left-l&&t<=r.right+l,d=a>=r.top-l&&a<=r.bottom+l;if(s&&d)return n=o}}),n},Tn=function(t){function a(l,r){return function(s,d,i,m){var h=s.options.group.name&&d.options.group.name&&s.options.group.name===d.options.group.name;if(l==null&&(r||h))return!0;if(l==null||l===!1)return!1;if(r&&l==="clone")return l;if(typeof l=="function")return a(l(s,d,i,m),r)(s,d,i,m);var y=(r?s:d).options.group.name;return l===!0||typeof l=="string"&&l===y||l.join&&l.indexOf(y)>-1}}var n={},o=t.group;(!o||it(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=a(o.pull,!0),n.checkPut=a(o.put),n.revertClone=o.revertClone,t.group=n},In=function(){!Sn&&$&&S($,"display","none")},On=function(){!Sn&&$&&S($,"display","")};xt&&!bn&&document.addEventListener("click",function(e){if(gt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),gt=!1,!1},!0);var ke=function(t){if(g){t=t.touches?t.touches[0]:t;var a=oo(t.clientX,t.clientY);if(a){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.target=n.rootEl=a,n.preventDefault=void 0,n.stopPropagation=void 0,a[le]._onDragOver(n)}}},lo=function(t){g&&g.parentNode[le]._isOutsideThisEl(t.target)};function k(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ve({},t),e[le]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:k.supportPointer!==!1&&"PointerEvent"in window&&(!ze||Lt),emptyInsertThreshold:5};Je.initializePlugins(this,e,a);for(var n in a)!(n in t)&&(t[n]=a[n]);Tn(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:no,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?B(e,"pointerdown",this._onTapStart):(B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),ht.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ve(this,Qa())}k.prototype={constructor:k,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&($e=null)},_getDirection:function(t,a){return typeof this.options.direction=="function"?this.options.direction.call(this,t,a,g):this.options.direction},_onTapStart:function(t){if(t.cancelable){var a=this,n=this.el,o=this.options,l=o.preventOnFilter,r=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,d=(s||t).target,i=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||d,m=o.filter;if(go(n),!g&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||o.disabled)&&!i.isContentEditable&&!(!this.nativeDraggable&&ze&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=fe(d,o.draggable,n,!1),!(d&&d.animated)&&st!==d)){if(Ae=ue(d),Ue=ue(d,o.draggable),typeof m=="function"){if(m.call(this,t,d,this)){ne({sortable:a,rootEl:i,name:"filter",targetEl:d,toEl:n,fromEl:n}),ae("filter",a,{evt:t}),l&&t.preventDefault();return}}else if(m&&(m=m.split(",").some(function(h){if(h=fe(i,h.trim(),n,!1),h)return ne({sortable:a,rootEl:h,name:"filter",targetEl:d,fromEl:n,toEl:n}),ae("filter",a,{evt:t}),!0}),m)){l&&t.preventDefault();return}o.handle&&!fe(i,o.handle,n,!1)||this._prepareDragStart(t,s,d)}}},_prepareDragStart:function(t,a,n){var o=this,l=o.el,r=o.options,s=l.ownerDocument,d;if(n&&!g&&n.parentNode===l){var i=L(n);if(V=l,g=n,Y=g.parentNode,Te=g.nextSibling,st=n,tt=r.group,k.dragged=g,Se={target:g,clientX:(a||t).clientX,clientY:(a||t).clientY},sn=Se.clientX-i.left,dn=Se.clientY-i.top,this._lastX=(a||t).clientX,this._lastY=(a||t).clientY,g.style["will-change"]="all",d=function(){if(ae("delayEnded",o,{evt:t}),k.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!an&&o.nativeDraggable&&(g.draggable=!0),o._triggerDragStart(t,a),ne({sortable:o,name:"choose",originalEvent:t}),re(g,r.chosenClass,!0)},r.ignore.split(",").forEach(function(m){wn(g,m.trim(),$t)}),B(s,"dragover",ke),B(s,"mousemove",ke),B(s,"touchmove",ke),r.supportPointer?(B(s,"pointerup",o._onDrop),!this.nativeDraggable&&B(s,"pointercancel",o._onDrop)):(B(s,"mouseup",o._onDrop),B(s,"touchend",o._onDrop),B(s,"touchcancel",o._onDrop)),an&&this.nativeDraggable&&(this.options.touchStartThreshold=4,g.draggable=!0),ae("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||a)&&(!this.nativeDraggable||!(Ze||be))){if(k.eventCanceled){this._onDrop();return}r.supportPointer?(B(s,"pointerup",o._disableDelayedDrag),B(s,"pointercancel",o._disableDelayedDrag)):(B(s,"mouseup",o._disableDelayedDrag),B(s,"touchend",o._disableDelayedDrag),B(s,"touchcancel",o._disableDelayedDrag)),B(s,"mousemove",o._delayedDragTouchMoveHandler),B(s,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&B(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(d,r.delay)}else d()}},_delayedDragTouchMoveHandler:function(t){var a=t.touches?t.touches[0]:t;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){g&&$t(g),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;M(t,"mouseup",this._disableDelayedDrag),M(t,"touchend",this._disableDelayedDrag),M(t,"touchcancel",this._disableDelayedDrag),M(t,"pointerup",this._disableDelayedDrag),M(t,"pointercancel",this._disableDelayedDrag),M(t,"mousemove",this._delayedDragTouchMoveHandler),M(t,"touchmove",this._delayedDragTouchMoveHandler),M(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,a){a=a||t.pointerType=="touch"&&t,!this.nativeDraggable||a?this.options.supportPointer?B(document,"pointermove",this._onTouchMove):a?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(g,"dragend",this),B(V,"dragstart",this._onDragStart));try{document.selection?ut(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,a){if(Pe=!1,V&&g){ae("dragStarted",this,{evt:a}),this.nativeDraggable&&B(document,"dragover",lo);var n=this.options;!t&&re(g,n.dragClass,!1),re(g,n.ghostClass,!0),k.active=this,t&&this._appendGhost(),ne({sortable:this,name:"start",originalEvent:a})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,In();for(var t=document.elementFromPoint(ce.clientX,ce.clientY),a=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ce.clientX,ce.clientY),t!==a);)a=t;if(g.parentNode[le]._isOutsideThisEl(t),a)do{if(a[le]){var n=void 0;if(n=a[le]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:t,rootEl:a}),n&&!this.options.dragoverBubble)break}t=a}while(a=xn(a));On()}},_onTouchMove:function(t){if(Se){var a=this.options,n=a.fallbackTolerance,o=a.fallbackOffset,l=t.touches?t.touches[0]:t,r=$&&Ne($,!0),s=$&&r&&r.a,d=$&&r&&r.d,i=at&&Z&&rn(Z),m=(l.clientX-Se.clientX+o.x)/(s||1)+(i?i[0]-Ot[0]:0)/(s||1),h=(l.clientY-Se.clientY+o.y)/(d||1)+(i?i[1]-Ot[1]:0)/(d||1);if(!k.active&&!Pe){if(n&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if($){r?(r.e+=m-(Tt||0),r.f+=h-(It||0)):r={a:1,b:0,c:0,d:1,e:m,f:h};var y="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");S($,"webkitTransform",y),S($,"mozTransform",y),S($,"msTransform",y),S($,"transform",y),Tt=m,It=h,ce=l}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!$){var t=this.options.fallbackOnBody?document.body:V,a=L(g,!0,at,!0,t),n=this.options;if(at){for(Z=t;S(Z,"position")==="static"&&S(Z,"transform")==="none"&&Z!==document;)Z=Z.parentNode;Z!==document.body&&Z!==document.documentElement?(Z===document&&(Z=me()),a.top+=Z.scrollTop,a.left+=Z.scrollLeft):Z=me(),Ot=rn(Z)}$=g.cloneNode(!0),re($,n.ghostClass,!1),re($,n.fallbackClass,!0),re($,n.dragClass,!0),S($,"transition",""),S($,"transform",""),S($,"box-sizing","border-box"),S($,"margin",0),S($,"top",a.top),S($,"left",a.left),S($,"width",a.width),S($,"height",a.height),S($,"opacity","0.8"),S($,"position",at?"absolute":"fixed"),S($,"zIndex","100000"),S($,"pointerEvents","none"),k.ghost=$,t.appendChild($),S($,"transform-origin",sn/parseInt($.style.width)*100+"% "+dn/parseInt($.style.height)*100+"%")}},_onDragStart:function(t,a){var n=this,o=t.dataTransfer,l=n.options;if(ae("dragStart",this,{evt:t}),k.eventCanceled){this._onDrop();return}ae("setupClone",this),k.eventCanceled||(X=Dn(g),X.removeAttribute("id"),X.draggable=!1,X.style["will-change"]="",this._hideClone(),re(X,this.options.chosenClass,!1),k.clone=X),n.cloneId=ut(function(){ae("clone",n),!k.eventCanceled&&(n.options.removeCloneOnHide||V.insertBefore(X,g),n._hideClone(),ne({sortable:n,name:"clone"}))}),!a&&re(g,l.dragClass,!0),a?(gt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(M(document,"mouseup",n._onDrop),M(document,"touchend",n._onDrop),M(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",l.setData&&l.setData.call(n,o,g)),B(document,"drop",n),S(g,"transform","translateZ(0)")),Pe=!0,n._dragStartId=ut(n._dragStarted.bind(n,a,t)),B(document,"selectstart",n),Ve=!0,window.getSelection().removeAllRanges(),ze&&S(document.body,"user-select","none")},_onDragOver:function(t){var a=this.el,n=t.target,o,l,r,s=this.options,d=s.group,i=k.active,m=tt===d,h=s.sort,y=q||i,_,v=this,c=!1;if(Vt)return;function b(Re,Pn){ae(Re,v,ge({evt:t,isOwner:m,axis:_?"vertical":"horizontal",revert:r,dragRect:o,targetRect:l,canSort:h,fromSortable:y,target:n,completed:H,onMove:function(qt,An){return ot(V,a,g,o,qt,L(qt),t,An)},changed:j},Pn))}function F(){b("dragOverAnimationCapture"),v.captureAnimationState(),v!==y&&y.captureAnimationState()}function H(Re){return b("dragOverCompleted",{insertion:Re}),Re&&(m?i._hideClone():i._showClone(v),v!==y&&(re(g,q?q.options.ghostClass:i.options.ghostClass,!1),re(g,s.ghostClass,!0)),q!==v&&v!==k.active?q=v:v===k.active&&q&&(q=null),y===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){b("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(n===g&&!g.animated||n===a&&!n.animated)&&($e=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(g.parentNode[le]._isOutsideThisEl(t.target),!Re&&ke(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),c=!0}function j(){ie=ue(g),we=ue(g,s.draggable),ne({sortable:v,name:"change",toEl:a,newIndex:ie,newDraggableIndex:we,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=fe(n,s.draggable,a,!0),b("dragOver"),k.eventCanceled)return c;if(g.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return H(!1);if(gt=!1,i&&!s.disabled&&(m?h||(r=Y!==V):q===this||(this.lastPutMode=tt.checkPull(this,i,g,t))&&d.checkPut(this,i,g,t))){if(_=this._getDirection(t,n)==="vertical",o=L(g),b("dragOverValid"),k.eventCanceled)return c;if(r)return Y=V,F(),this._hideClone(),b("revert"),k.eventCanceled||(Te?V.insertBefore(g,Te):V.appendChild(g)),H(!0);var E=Ut(a,s.draggable);if(!E||uo(t,_,this)&&!E.animated){if(E===g)return H(!1);if(E&&a===t.target&&(n=E),n&&(l=L(n)),ot(V,a,g,o,n,l,t,!!n)!==!1)return F(),E&&E.nextSibling?a.insertBefore(g,E.nextSibling):a.appendChild(g),Y=a,j(),H(!0)}else if(E&&so(t,_,this)){var I=Be(a,0,s,!0);if(I===g)return H(!1);if(n=I,l=L(n),ot(V,a,g,o,n,l,t,!1)!==!1)return F(),a.insertBefore(g,I),Y=a,j(),H(!0)}else if(n.parentNode===a){l=L(n);var ee=0,de,U=g.parentNode!==a,te=!ao(g.animated&&g.toRect||o,n.animated&&n.toRect||l,_),ye=_?"top":"left",A=ln(n,"top","top")||ln(g,"top","top"),C=A?A.scrollTop:void 0;$e!==n&&(de=l[ye],We=!1,nt=!te&&s.invertSwap||U),ee=co(t,n,l,_,te?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,nt,$e===n);var G;if(ee!==0){var O=ue(g);do O-=ee,G=Y.children[O];while(G&&(S(G,"display")==="none"||G===$))}if(ee===0||G===n)return H(!1);$e=n,Ge=ee;var Ie=n.nextElementSibling,xe=!1;xe=ee===1;var et=ot(V,a,g,o,n,l,t,xe);if(et!==!1)return(et===1||et===-1)&&(xe=et===1),Vt=!0,setTimeout(io,30),F(),xe&&!Ie?a.appendChild(g):n.parentNode.insertBefore(g,xe?Ie:n),A&&En(A,0,C-A.scrollTop),Y=g.parentNode,de!==void 0&&!nt&&(dt=Math.abs(de-L(n)[ye])),j(),H(!0)}if(a.contains(g))return H(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){M(document,"mousemove",this._onTouchMove),M(document,"touchmove",this._onTouchMove),M(document,"pointermove",this._onTouchMove),M(document,"dragover",ke),M(document,"mousemove",ke),M(document,"touchmove",ke)},_offUpEvents:function(){var t=this.el.ownerDocument;M(t,"mouseup",this._onDrop),M(t,"touchend",this._onDrop),M(t,"pointerup",this._onDrop),M(t,"pointercancel",this._onDrop),M(t,"touchcancel",this._onDrop),M(document,"selectstart",this)},_onDrop:function(t){var a=this.el,n=this.options;if(ie=ue(g),we=ue(g,n.draggable),ae("drop",this,{evt:t}),Y=g&&g.parentNode,ie=ue(g),we=ue(g,n.draggable),k.eventCanceled){this._nulling();return}Pe=!1,nt=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Xt(this.cloneId),Xt(this._dragStartId),this.nativeDraggable&&(M(document,"drop",this),M(a,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ze&&S(document.body,"user-select",""),S(g,"transform",""),t&&(Ve&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),$&&$.parentNode&&$.parentNode.removeChild($),(V===Y||q&&q.lastPutMode!=="clone")&&X&&X.parentNode&&X.parentNode.removeChild(X),g&&(this.nativeDraggable&&M(g,"dragend",this),$t(g),g.style["will-change"]="",Ve&&!Pe&&re(g,q?q.options.ghostClass:this.options.ghostClass,!1),re(g,this.options.chosenClass,!1),ne({sortable:this,name:"unchoose",toEl:Y,newIndex:null,newDraggableIndex:null,originalEvent:t}),V!==Y?(ie>=0&&(ne({rootEl:Y,name:"add",toEl:Y,fromEl:V,originalEvent:t}),ne({sortable:this,name:"remove",toEl:Y,originalEvent:t}),ne({rootEl:Y,name:"sort",toEl:Y,fromEl:V,originalEvent:t}),ne({sortable:this,name:"sort",toEl:Y,originalEvent:t})),q&&q.save()):ie!==Ae&&ie>=0&&(ne({sortable:this,name:"update",toEl:Y,originalEvent:t}),ne({sortable:this,name:"sort",toEl:Y,originalEvent:t})),k.active&&((ie==null||ie===-1)&&(ie=Ae,we=Ue),ne({sortable:this,name:"end",toEl:Y,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ae("nulling",this),V=g=Y=$=Te=X=st=_e=Se=ce=Ve=ie=we=Ae=Ue=$e=Ge=q=tt=k.dragged=k.ghost=k.clone=k.active=null,pt.forEach(function(t){t.checked=!0}),pt.length=Tt=It=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":g&&(this._onDragOver(t),ro(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],a,n=this.el.children,o=0,l=n.length,r=this.options;o<l;o++)a=n[o],fe(a,r.draggable,this.el,!1)&&t.push(a.getAttribute(r.dataIdAttr)||mo(a));return t},sort:function(t,a){var n={},o=this.el;this.toArray().forEach(function(l,r){var s=o.children[r];fe(s,this.options.draggable,o,!1)&&(n[l]=s)},this),a&&this.captureAnimationState(),t.forEach(function(l){n[l]&&(o.removeChild(n[l]),o.appendChild(n[l]))}),a&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,a){return fe(t,a||this.options.draggable,this.el,!1)},option:function(t,a){var n=this.options;if(a===void 0)return n[t];var o=Je.modifyOption(this,t,a);typeof o<"u"?n[t]=o:n[t]=a,t==="group"&&Tn(n)},destroy:function(){ae("destroy",this);var t=this.el;t[le]=null,M(t,"mousedown",this._onTapStart),M(t,"touchstart",this._onTapStart),M(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(M(t,"dragover",this),M(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ht.splice(ht.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!_e){if(ae("hideClone",this),k.eventCanceled)return;S(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),_e=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(_e){if(ae("showClone",this),k.eventCanceled)return;g.parentNode==V&&!this.options.group.revertClone?V.insertBefore(X,g):Te?V.insertBefore(X,Te):V.appendChild(X),this.options.group.revertClone&&this.animate(g,X),S(X,"display",""),_e=!1}}};function ro(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ot(e,t,a,n,o,l,r,s){var d,i=e[le],m=i.options.onMove,h;return window.CustomEvent&&!be&&!Ze?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=t,d.from=e,d.dragged=a,d.draggedRect=n,d.related=o||t,d.relatedRect=l||L(t),d.willInsertAfter=s,d.originalEvent=r,e.dispatchEvent(d),m&&(h=m.call(i,d,r)),h}function $t(e){e.draggable=!1}function io(){Vt=!1}function so(e,t,a){var n=L(Be(a.el,0,a.options,!0)),o=Cn(a.el,a.options,$),l=10;return t?e.clientX<o.left-l||e.clientY<n.top&&e.clientX<n.right:e.clientY<o.top-l||e.clientY<n.bottom&&e.clientX<n.left}function uo(e,t,a){var n=L(Ut(a.el,a.options.draggable)),o=Cn(a.el,a.options,$),l=10;return t?e.clientX>o.right+l||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>o.bottom+l||e.clientX>n.right&&e.clientY>n.top}function co(e,t,a,n,o,l,r,s){var d=n?e.clientY:e.clientX,i=n?a.height:a.width,m=n?a.top:a.left,h=n?a.bottom:a.right,y=!1;if(!r){if(s&&dt<i*o){if(!We&&(Ge===1?d>m+i*l/2:d<h-i*l/2)&&(We=!0),We)y=!0;else if(Ge===1?d<m+dt:d>h-dt)return-Ge}else if(d>m+i*(1-o)/2&&d<h-i*(1-o)/2)return fo(t)}return y=y||r,y&&(d<m+i*l/2||d>h-i*l/2)?d>m+i/2?1:-1:0}function fo(e){return ue(g)<ue(e)?1:-1}function mo(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,a=t.length,n=0;a--;)n+=t.charCodeAt(a);return n.toString(36)}function go(e){pt.length=0;for(var t=e.getElementsByTagName("input"),a=t.length;a--;){var n=t[a];n.checked&&pt.push(n)}}function ut(e){return setTimeout(e,0)}function Xt(e){return clearTimeout(e)}xt&&B(document,"touchmove",function(e){(k.active||Pe)&&e.cancelable&&e.preventDefault()});k.utils={on:B,off:M,css:S,find:wn,is:function(t,a){return!!fe(t,a,t,!1)},extend:qa,throttle:_n,closest:fe,toggleClass:re,clone:Dn,index:ue,nextTick:ut,cancelNextTick:Xt,detectDirection:kn,getChild:Be,expando:le};k.get=function(e){return e[le]};k.mount=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(k.utils=ge(ge({},k.utils),n.utils)),Je.mount(n)})};k.create=function(e,t){return new k(e,t)};k.version=Ga;var z=[],Xe,Yt,jt=!1,Pt,At,vt,Ye;function ho(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(a){var n=a.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):n.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){var n=a.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?M(document,"dragover",this._handleAutoScroll):(M(document,"pointermove",this._handleFallbackAutoScroll),M(document,"touchmove",this._handleFallbackAutoScroll),M(document,"mousemove",this._handleFallbackAutoScroll)),cn(),ct(),Ka()},nulling:function(){vt=Yt=Xe=jt=Ye=Pt=At=null,z.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,n){var o=this,l=(a.touches?a.touches[0]:a).clientX,r=(a.touches?a.touches[0]:a).clientY,s=document.elementFromPoint(l,r);if(vt=a,n||this.options.forceAutoScrollFallback||Ze||be||ze){Nt(a,this.options,s,n);var d=De(s,!0);jt&&(!Ye||l!==Pt||r!==At)&&(Ye&&cn(),Ye=setInterval(function(){var i=De(document.elementFromPoint(l,r),!0);i!==d&&(d=i,ct()),Nt(a,o.options,i,n)},10),Pt=l,At=r)}else{if(!this.options.bubbleScroll||De(s,!0)===me()){ct();return}Nt(a,this.options,De(s,!1),!1)}}},ve(e,{pluginName:"scroll",initializeByDefault:!0})}function ct(){z.forEach(function(e){clearInterval(e.pid)}),z=[]}function cn(){clearInterval(Ye)}var Nt=_n(function(e,t,a,n){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,s=t.scrollSpeed,d=me(),i=!1,m;Yt!==a&&(Yt=a,ct(),Xe=t.scroll,m=t.scrollFn,Xe===!0&&(Xe=De(a,!0)));var h=0,y=Xe;do{var _=y,v=L(_),c=v.top,b=v.bottom,F=v.left,H=v.right,j=v.width,E=v.height,I=void 0,ee=void 0,de=_.scrollWidth,U=_.scrollHeight,te=S(_),ye=_.scrollLeft,A=_.scrollTop;_===d?(I=j<de&&(te.overflowX==="auto"||te.overflowX==="scroll"||te.overflowX==="visible"),ee=E<U&&(te.overflowY==="auto"||te.overflowY==="scroll"||te.overflowY==="visible")):(I=j<de&&(te.overflowX==="auto"||te.overflowX==="scroll"),ee=E<U&&(te.overflowY==="auto"||te.overflowY==="scroll"));var C=I&&(Math.abs(H-o)<=r&&ye+j<de)-(Math.abs(F-o)<=r&&!!ye),G=ee&&(Math.abs(b-l)<=r&&A+E<U)-(Math.abs(c-l)<=r&&!!A);if(!z[h])for(var O=0;O<=h;O++)z[O]||(z[O]={});(z[h].vx!=C||z[h].vy!=G||z[h].el!==_)&&(z[h].el=_,z[h].vx=C,z[h].vy=G,clearInterval(z[h].pid),(C!=0||G!=0)&&(i=!0,z[h].pid=setInterval((function(){n&&this.layer===0&&k.active._onTouchMove(vt);var Ie=z[this.layer].vy?z[this.layer].vy*s:0,xe=z[this.layer].vx?z[this.layer].vx*s:0;typeof m=="function"&&m.call(k.dragged.parentNode[le],xe,Ie,e,vt,z[this.layer].el)!=="continue"||En(z[this.layer].el,xe,Ie)}).bind({layer:h}),24))),h++}while(t.bubbleScroll&&y!==d&&(y=De(y,!1)));jt=i}},30),$n=function(t){var a=t.originalEvent,n=t.putSortable,o=t.dragEl,l=t.activeSortable,r=t.dispatchSortableEvent,s=t.hideGhostForTarget,d=t.unhideGhostForTarget;if(a){var i=n||l;s();var m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,h=document.elementFromPoint(m.clientX,m.clientY);d(),i&&!i.el.contains(h)&&(r("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Gt(){}Gt.prototype={startIndex:null,dragStart:function(t){var a=t.oldDraggableIndex;this.startIndex=a},onSpill:function(t){var a=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Be(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(a,o):this.sortable.el.appendChild(a),this.sortable.animateAll(),n&&n.animateAll()},drop:$n};ve(Gt,{pluginName:"revertOnSpill"});function Wt(){}Wt.prototype={onSpill:function(t){var a=t.dragEl,n=t.putSortable,o=n||this.sortable;o.captureAnimationState(),a.parentNode&&a.parentNode.removeChild(a),o.animateAll()},drop:$n};ve(Wt,{pluginName:"removeOnSpill"});k.mount(new ho);k.mount(Wt,Gt);const po=["data-estado"],vo={class:"p-3 border-b bg-background/50 rounded-t-lg"},bo={class:"flex items-center gap-2"},yo={class:"font-medium text-sm"},xo=["data-estado"],wo={key:0,class:"h-20 border-2 border-dashed border-muted-foreground/20 rounded-lg flex items-center justify-center text-sm text-muted-foreground"},_o=Ce({__name:"HitosKanbanColumn",props:{estado:{},entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},isDragOver:{type:Boolean,default:!1}},emits:["edit","delete","complete","change-status"],setup(e,{emit:t}){const a=e,n=t,o=K(()=>je[a.estado]),l=K(()=>{switch(a.estado){case"completado":return Ke;case"en_progreso":return Ee;case"cancelado":return yt;default:return qe}}),r=K(()=>{const s="flex flex-col rounded-lg border bg-muted/30 min-h-[300px] transition-colors duration-150",d=a.isDragOver?"border-primary border-dashed bg-primary/5":"border-border";return`${s} ${d}`});return(s,d)=>(f(),D("div",{class:W(r.value),"data-estado":e.estado},[x("div",vo,[x("div",bo,[(f(),N(Me(l.value),{class:W(["h-4 w-4 flex-shrink-0",o.value.color])},null,8,["class"])),x("span",yo,P(o.value.label),1),p(u(he),{variant:"secondary",class:"ml-auto text-xs"},{default:w(()=>[R(P(e.entregables.length),1)]),_:1})])]),p(u(Mt),{class:"flex-1 p-2"},{default:w(()=>[x("div",{class:"kanban-column-cards space-y-2 min-h-[200px]","data-estado":e.estado},[(f(!0),D(Q,null,se(e.entregables,i=>(f(),N(zt,{key:i.id,entregable:i,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,draggable:!0,variant:"kanban",onEdit:m=>n("edit",i),onDelete:m=>n("delete",i),onComplete:m=>n("complete",i),onChangeStatus:m=>n("change-status",i,m)},null,8,["entregable","can-edit","can-delete","can-complete","onEdit","onDelete","onComplete","onChangeStatus"]))),128)),e.entregables.length===0?(f(),D("div",wo," Sin entregables ")):T("",!0)],8,xo)]),_:1})],10,po))}}),Eo={class:"kanban-container flex gap-4 overflow-x-auto snap-x snap-mandatory pb-4 -mx-2 px-2"},Do=Ce({__name:"HitosEntregablesKanban",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},confirmOnDrag:{type:Boolean,default:!0}},emits:["edit","delete","complete","change-status","drag-change-status"],setup(e,{emit:t}){const a=e,n=t,o=bt(a,"entregables"),{entregablesAgrupados:l}=Qe(o),r=J(null),s=J([]),d={pendiente:"pendientes",en_progreso:"en_progreso",completado:"completados",cancelado:"cancelados"},i=y=>l.value[d[y]],m=()=>{h(),Kt(()=>{document.querySelectorAll(".kanban-column-cards").forEach(_=>{const v=k.create(_,{group:"entregables-kanban",animation:150,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",delay:100,delayOnTouchOnly:!0,touchStartThreshold:3,onStart:()=>{},onEnd:c=>{const b=parseInt(c.item.dataset.id||"0"),F=c.to.dataset.estado,H=c.from.dataset.estado;if(r.value=null,F===H)return;const j=a.entregables.find(E=>E.id===b);j&&n("drag-change-status",j,F)},onChange:c=>{const b=c.to.dataset.estado;b&&(r.value=b)}});s.value.push(v)})})},h=()=>{s.value.forEach(y=>{y.destroy()}),s.value=[]};return Nn(()=>{m()}),Mn(()=>{h()}),ft(()=>a.entregables,()=>{Kt(()=>{m()})},{deep:!0}),(y,_)=>(f(),D("div",Eo,[(f(!0),D(Q,null,se(u(Ht),v=>(f(),D("div",{key:v,class:"kanban-column flex-shrink-0 w-72 snap-center md:w-auto md:flex-1 md:min-w-[200px]"},[p(_o,{estado:v,entregables:i(v),"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,"is-drag-over":r.value===v,onEdit:_[0]||(_[0]=c=>n("edit",c)),onDelete:_[1]||(_[1]=c=>n("delete",c)),onComplete:_[2]||(_[2]=c=>n("complete",c)),onChangeStatus:_[3]||(_[3]=(c,b)=>n("change-status",c,b))},null,8,["estado","entregables","can-edit","can-delete","can-complete","is-drag-over"])]))),128))]))}}),Co={class:"space-y-4"},So=Ce({__name:"HitosEntregablesPanel",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1}},emits:["edit","delete","complete","update-status"],setup(e,{emit:t}){const a=e,n=t,o=bt(a,"entregables"),{viewMode:l,confirmOnDrag:r}=Qe(o),s=J(!1),d=J(null),i=J("pendiente"),m=J(!1),h=J(!1),y=J(null),_=E=>{n("edit",E)},v=E=>{y.value=E,h.value=!0},c=()=>{y.value&&n("delete",y.value),h.value=!1,y.value=null},b=E=>{d.value=E,i.value="completado",s.value=!0},F=(E,I)=>{d.value=E,i.value=I,s.value=!0},H=(E,I)=>{r.value?(d.value=E,i.value=I,s.value=!0):n("update-status",E,I,"",[])},j=(E,I)=>{d.value&&(i.value==="completado"?n("complete",d.value,E,I):n("update-status",d.value,i.value,E,I),s.value=!1,d.value=null)};return(E,I)=>{var ee,de;return f(),D("div",Co,[p(ha,{modelValue:u(l),"onUpdate:modelValue":I[0]||(I[0]=U=>Bn(l)?l.value=U:null),"confirm-on-drag":u(r),"onUpdate:confirmOnDrag":I[1]||(I[1]=U=>r.value=U)},null,8,["modelValue","confirm-on-drag"]),u(l)==="list"?(f(),N(Fa,{key:0,entregables:e.entregables,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,onEdit:_,onDelete:v,onComplete:b,onChangeStatus:F},null,8,["entregables","can-edit","can-delete","can-complete"])):u(l)==="tabs"?(f(),N(ja,{key:1,entregables:e.entregables,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,onEdit:_,onDelete:v,onComplete:b,onChangeStatus:F},null,8,["entregables","can-edit","can-delete","can-complete"])):u(l)==="kanban"?(f(),N(Do,{key:2,entregables:e.entregables,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,"confirm-on-drag":u(r),onEdit:_,onDelete:v,onComplete:b,onChangeStatus:F,onDragChangeStatus:H},null,8,["entregables","can-edit","can-delete","can-complete","confirm-on-drag"])):T("",!0),p(Qn,{open:s.value,"onUpdate:open":I[2]||(I[2]=U=>s.value=U),"entregable-nombre":(ee=d.value)==null?void 0:ee.nombre,"estado-actual":(de=d.value)==null?void 0:de.estado,"nuevo-estado":i.value,loading:m.value,onConfirm:j},null,8,["open","entregable-nombre","estado-actual","nuevo-estado","loading"]),p(u(jn),{open:h.value,"onUpdate:open":I[3]||(I[3]=U=>h.value=U)},{default:w(()=>[p(u(zn),null,{default:w(()=>[p(u(Ln),null,{default:w(()=>[p(u(Un),null,{default:w(()=>[...I[4]||(I[4]=[R("¿Estás seguro?",-1)])]),_:1}),p(u(Gn),null,{default:w(()=>{var U;return[R(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+P((U=y.value)==null?void 0:U.nombre)+'". ',1)]}),_:1})]),_:1}),p(u(Wn),null,{default:w(()=>[p(u(qn),null,{default:w(()=>[...I[5]||(I[5]=[R("Cancelar",-1)])]),_:1}),p(u(Kn),{class:"bg-red-600 hover:bg-red-700",onClick:c},{default:w(()=>[...I[6]||(I[6]=[R(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])}}}),ko={class:"flex flex-col md:flex-row h-full min-h-[500px] border rounded-lg overflow-hidden bg-background"},To={class:"hidden md:flex md:w-72 lg:w-80 flex-col border-r bg-muted/30"},Io={class:"p-4 border-b bg-background"},Oo={class:"flex items-center justify-between"},$o={class:"font-semibold text-sm text-muted-foreground uppercase tracking-wide flex items-center gap-2"},Po={key:0,class:"mt-3"},Ao={class:"p-2 space-y-1"},No={key:0,class:"p-4 text-center text-muted-foreground text-sm"},Mo=["data-active","onClick"],Bo={class:"flex items-center gap-2"},Ro={class:"font-medium truncate flex-1"},Fo={key:0,class:"mt-1 ml-4 text-xs text-muted-foreground truncate"},Ho={class:"flex items-center gap-2 mt-2 ml-4 text-xs text-muted-foreground"},Vo={class:"mt-2 ml-4"},Xo={class:"flex-1 flex flex-col min-h-0"},Yo={class:"md:hidden p-4 border-b bg-background sticky top-0 z-10 space-y-3"},jo={class:"flex items-center gap-2"},zo={class:"flex flex-col"},Lo={key:0,class:"text-xs text-muted-foreground"},Uo={class:"text-muted-foreground"},Go={key:0,class:"flex items-center justify-center h-full min-h-[400px]"},Wo={class:"text-center space-y-3 max-w-sm p-6"},qo={key:1,class:"p-4 md:p-6 space-y-6"},Ko={class:"flex items-start justify-between gap-4"},Qo={class:"flex-1 min-w-0"},Zo={class:"flex items-center gap-2 mb-1"},Jo={key:0,class:"flex items-center gap-1.5 text-sm text-muted-foreground mt-1"},el={key:1,class:"text-sm text-muted-foreground mt-2"},tl={class:"space-y-2"},nl={class:"flex justify-between items-center text-sm"},al={class:"font-medium"},ol={class:"flex flex-wrap gap-4 text-sm"},ll={key:0,class:"flex items-center gap-1.5 text-muted-foreground"},rl={key:1,class:"flex items-center gap-1.5 text-muted-foreground"},il={key:2,class:"flex items-center gap-1.5 text-muted-foreground"},sl={class:"flex flex-wrap gap-2"},dl={class:"space-y-4"},ul={class:"flex items-center justify-between"},cl={class:"font-semibold flex items-center gap-2"},fl={key:1,class:"text-center py-8 border rounded-lg bg-muted/30"},Gl=Ce({__name:"HitosDashboard",props:{hitos:{},proyectoId:{},proyectos:{},selectedProyectoId:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},showViewDetail:{type:Boolean,default:!0},showProyectoInHito:{type:Boolean,default:!1},baseUrl:{default:"/admin/proyectos"}},emits:["select-hito","edit-hito","delete-hito","view-hito","add-entregable","complete-entregable","update-entregable-status","edit-entregable","delete-entregable","filter-proyecto"],setup(e,{emit:t}){var ye;const a=e,n=t,o=J(((ye=a.selectedProyectoId)==null?void 0:ye.toString())||""),l=K(()=>{if(!o.value)return a.hitos;const A=parseInt(o.value,10);return a.hitos.filter(C=>C.proyecto_id===A)}),r=A=>{o.value=A,d.value=null;const C=A?parseInt(A,10):null;n("filter-proyecto",C)};Fn("(max-width: 768px)");const d=J((()=>{const C=new URLSearchParams(window.location.search).get("hito");return C?parseInt(C,10):null})()),i=K(()=>l.value.find(A=>A.id===d.value)??null),m=K(()=>a.proyectoId?a.proyectoId:i.value?i.value.proyecto_id:null),h=K(()=>m.value?`${a.baseUrl}/${m.value}/hitos`:null),y=K(()=>!i.value||!m.value?null:`${a.baseUrl}/${m.value}/hitos/${i.value.id}/entregables`);ft(d,A=>{if(A){const C=window.location.pathname,G=new URLSearchParams(window.location.search);G.set("hito",String(A));const O=`${C}?${G.toString()}`;Rn.get(O,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]}),n("select-hito",A)}});const _=A=>{d.value=A},v=A=>{const C=parseInt(A,10);isNaN(C)||_(C)},c=A=>A?Bt(new Date(A),"dd MMM yyyy",{locale:Rt}):"Sin fecha",b=A=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[A]||"bg-gray-100 text-gray-800",F=A=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[A]||"bg-gray-400",H=(A,C,G)=>{n("complete-entregable",A,C,G)},j=(A,C,G,O)=>{n("update-entregable-status",A,C,G,O)},E=A=>{i.value&&n("edit-entregable",A,i.value)},I=A=>{i.value&&n("delete-entregable",A,i.value)},ee=()=>{i.value&&n("edit-hito",i.value)},de=()=>{i.value&&n("delete-hito",i.value)},U=()=>{i.value&&n("add-entregable",i.value)},te=()=>{i.value&&n("view-hito",i.value)};return(A,C)=>{var G;return f(),D("div",ko,[x("aside",To,[x("div",Io,[x("div",Oo,[x("h2",$o,[p(u(Jt),{class:"h-4 w-4"}),R(" Hitos ("+P(l.value.length)+") ",1)]),e.showViewDetail&&h.value?(f(),N(u(Qt),{key:0,href:h.value},{default:w(()=>[p(u(oe),{variant:"outline",size:"sm"},{default:w(()=>[p(u(en),{class:"h-3.5 w-3.5 mr-1"}),C[0]||(C[0]=R(" Ver todos ",-1))]),_:1})]),_:1},8,["href"])):T("",!0)]),e.proyectos&&e.proyectos.length>0?(f(),D("div",Po,[p(u(wt),{"model-value":o.value,"onUpdate:modelValue":r},{default:w(()=>[p(u(_t),{class:"w-full h-9 text-sm"},{default:w(()=>[p(u(Et),{placeholder:"Todos los proyectos"})]),_:1}),p(u(Dt),null,{default:w(()=>[p(u(Fe),{value:""},{default:w(()=>[...C[1]||(C[1]=[R("Todos los proyectos",-1)])]),_:1}),(f(!0),D(Q,null,se(e.proyectos,O=>(f(),N(u(Fe),{key:O.id,value:O.id.toString()},{default:w(()=>[R(P(O.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])])):T("",!0)]),p(u(Mt),{class:"flex-1"},{default:w(()=>[x("div",Ao,[l.value.length===0?(f(),D("div",No," No hay hitos definidos ")):T("",!0),(f(!0),D(Q,null,se(l.value,O=>(f(),D("button",{key:O.id,"data-active":d.value===O.id,class:"w-full text-left p-3 rounded-lg transition-colors duration-150 hover:bg-accent hover:text-accent-foreground data-[active=true]:bg-primary/10 data-[active=true]:text-primary data-[active=true]:border-l-2 data-[active=true]:border-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",onClick:Ie=>_(O.id)},[x("div",Bo,[x("div",{class:W([F(O.estado),"w-2 h-2 rounded-full flex-shrink-0"])},null,2),x("span",Ro,P(O.nombre),1),d.value===O.id?(f(),N(u(hn),{key:0,class:"h-4 w-4 flex-shrink-0 text-primary"})):T("",!0)]),e.showProyectoInHito&&O.proyecto?(f(),D("div",Fo,P(O.proyecto.nombre),1)):T("",!0),x("div",Ho,[p(u(he),{class:W([b(O.estado),"text-[10px] px-1.5 py-0"])},{default:w(()=>[R(P(O.estado_label||O.estado),1)]),_:2},1032,["class"]),x("span",null,P(O.porcentaje_completado)+"%",1)]),x("div",Vo,[p(u(Zt),{"model-value":O.porcentaje_completado,class:"h-1"},null,8,["model-value"])])],8,Mo))),128))])]),_:1})]),x("main",Xo,[x("div",Yo,[e.proyectos&&e.proyectos.length>0?(f(),N(u(wt),{key:0,"model-value":o.value,"onUpdate:modelValue":r},{default:w(()=>[p(u(_t),{class:"w-full h-9 text-sm"},{default:w(()=>[p(u(Et),{placeholder:"Todos los proyectos"})]),_:1}),p(u(Dt),null,{default:w(()=>[p(u(Fe),{value:""},{default:w(()=>[...C[2]||(C[2]=[R("Todos los proyectos",-1)])]),_:1}),(f(!0),D(Q,null,se(e.proyectos,O=>(f(),N(u(Fe),{key:O.id,value:O.id.toString()},{default:w(()=>[R(P(O.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])):T("",!0),p(u(wt),{"model-value":((G=d.value)==null?void 0:G.toString())||"","onUpdate:modelValue":v},{default:w(()=>[p(u(_t),{class:"w-full"},{default:w(()=>[p(u(Et),{placeholder:"Selecciona un hito"})]),_:1}),p(u(Dt),null,{default:w(()=>[(f(!0),D(Q,null,se(l.value,O=>(f(),N(u(Fe),{key:O.id,value:O.id.toString()},{default:w(()=>[x("div",jo,[x("div",{class:W([F(O.estado),"w-2 h-2 rounded-full"])},null,2),x("div",zo,[x("span",null,P(O.nombre),1),e.showProyectoInHito&&O.proyecto?(f(),D("span",Lo,P(O.proyecto.nombre),1)):T("",!0)]),x("span",Uo,"("+P(O.porcentaje_completado)+"%)",1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),p(u(Mt),{class:"flex-1"},{default:w(()=>[i.value?(f(),D("div",qo,[p(u(fn),null,{default:w(()=>[p(u(Hn),{class:"pb-3"},{default:w(()=>[x("div",Ko,[x("div",Qo,[x("div",Zo,[x("div",{class:W([F(i.value.estado),"w-2.5 h-2.5 rounded-full"])},null,2),p(u(Vn),{class:"text-xl truncate"},{default:w(()=>[R(P(i.value.nombre),1)]),_:1})]),e.showProyectoInHito&&i.value.proyecto?(f(),D("div",Jo,[p(u(da),{class:"h-4 w-4"}),x("span",null,P(i.value.proyecto.nombre),1)])):T("",!0),i.value.descripcion?(f(),D("p",el,P(i.value.descripcion),1)):T("",!0)]),p(u(he),{class:W(b(i.value.estado))},{default:w(()=>[R(P(i.value.estado_label||i.value.estado),1)]),_:1},8,["class"])])]),_:1}),p(u(mn),{class:"space-y-4"},{default:w(()=>[x("div",tl,[x("div",nl,[C[5]||(C[5]=x("span",{class:"text-muted-foreground"},"Progreso",-1)),x("span",al,P(i.value.porcentaje_completado)+"%",1)]),p(u(Zt),{"model-value":i.value.porcentaje_completado,class:"h-2"},null,8,["model-value"])]),x("div",ol,[i.value.fecha_inicio?(f(),D("div",ll,[p(u(Ft),{class:"h-4 w-4"}),x("span",null,"Inicio: "+P(c(i.value.fecha_inicio)),1)])):T("",!0),i.value.fecha_fin?(f(),D("div",rl,[p(u(Ee),{class:"h-4 w-4"}),x("span",null,"Fin: "+P(c(i.value.fecha_fin)),1)])):T("",!0),i.value.responsable?(f(),D("div",il,[p(u(lt),{class:"h-4 w-4"}),x("span",null,P(i.value.responsable.name),1)])):T("",!0)]),p(u(Xn)),x("div",sl,[e.canEdit?(f(),N(u(oe),{key:0,variant:"outline",size:"sm",onClick:ee},{default:w(()=>[p(u(pn),{class:"h-4 w-4 mr-1.5"}),C[6]||(C[6]=R(" Editar Hito ",-1))]),_:1})):T("",!0),e.canManageDeliverables?(f(),N(u(oe),{key:1,variant:"outline",size:"sm",onClick:U},{default:w(()=>[p(u(tn),{class:"h-4 w-4 mr-1.5"}),C[7]||(C[7]=R(" Añadir Entregable ",-1))]),_:1})):T("",!0),e.showViewDetail?(f(),N(u(oe),{key:2,variant:"ghost",size:"sm",onClick:te},{default:w(()=>[p(u(Ct),{class:"h-4 w-4 mr-1.5"}),C[8]||(C[8]=R(" Ver Detalle Completo ",-1))]),_:1})):T("",!0),e.canDelete?(f(),N(u(oe),{key:3,variant:"ghost",size:"sm",class:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:de},{default:w(()=>[p(u(vn),{class:"h-4 w-4 mr-1.5"}),C[9]||(C[9]=R(" Eliminar ",-1))]),_:1})):T("",!0)])]),_:1})]),_:1}),x("div",dl,[x("div",ul,[x("h3",cl,[p(u(Ct),{class:"h-5 w-5"}),C[10]||(C[10]=R(" Entregables ",-1)),p(u(he),{variant:"secondary",class:"ml-1"},{default:w(()=>{var O;return[R(P(((O=i.value.entregables)==null?void 0:O.length)||0),1)]}),_:1})]),e.showViewDetail&&y.value?(f(),N(u(Qt),{key:0,href:y.value},{default:w(()=>[p(u(oe),{variant:"outline",size:"sm"},{default:w(()=>[p(u(en),{class:"h-3.5 w-3.5 mr-1"}),C[11]||(C[11]=R(" Ver todos ",-1))]),_:1})]),_:1},8,["href"])):T("",!0)]),i.value.entregables&&i.value.entregables.length>0?(f(),N(u(So),{key:0,entregables:i.value.entregables,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-complete":e.canComplete,onComplete:H,onUpdateStatus:j,onEdit:E,onDelete:I},null,8,["entregables","can-edit","can-delete","can-complete"])):(f(),D("div",fl,[p(u(Ct),{class:"h-10 w-10 mx-auto text-muted-foreground/50 mb-3"}),C[13]||(C[13]=x("p",{class:"text-muted-foreground text-sm"},"No hay entregables en este hito",-1)),e.canManageDeliverables?(f(),N(u(oe),{key:0,variant:"outline",size:"sm",class:"mt-4",onClick:U},{default:w(()=>[p(u(tn),{class:"h-4 w-4 mr-1.5"}),C[12]||(C[12]=R(" Crear primer entregable ",-1))]),_:1})):T("",!0)]))])])):(f(),D("div",Go,[x("div",Wo,[p(u(Jt),{class:"h-16 w-16 mx-auto text-muted-foreground/50"}),C[3]||(C[3]=x("h3",{class:"font-medium text-lg"},"Selecciona un hito",-1)),C[4]||(C[4]=x("p",{class:"text-sm text-muted-foreground"}," Elige un hito de la lista para ver sus detalles y entregables ",-1))])]))]),_:1})])])}}});export{Gl as _};
