import{d as L,r as E,b as u,e as i,w as a,f as e,g as l,u as t,p as U,i as p,j as m,P as g,h as r,x as q,F as P,k as B,t as n,q as V,n as A,W}from"./app-B1G_J44z.js";import{_ as N}from"./index-DrlmzGiQ.js";import{_ as y}from"./createLucideIcon-BA6_5T5D.js";import{_ as F,a as H,b as I,c as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-BrPStMNy.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-DO9Up2O_.js";import{_ as G,a as Q,b as J,c as O,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-DqiXJPuJ.js";import{_ as R,a as X,b as h,c,d as Y,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-DEeWV0gk.js";import{_ as Z}from"./AdminLayout.vue_vue_type_script_setup_true_lang-C5GOebrC.js";import{P as tt}from"./plus-C4--oSuq.js";import{S as et}from"./search-C5r48Q90.js";import{U as at}from"./users-BTPJgUzs.js";import{E as st}from"./eye-BThIOa4U.js";import{S as T}from"./square-pen-CcGSqJMh.js";import{P as ot,a as lt}from"./play-CseTuAJ4.js";import{S as $}from"./send-NR9QQ2EJ.js";import{C as rt}from"./chart-column-BQZNw__2.js";import{C as it}from"./clock-C4HafEvv.js";import{M as dt}from"./mail-B8HbfnRt.js";import{M as nt}from"./message-square-B5Qpx1Pb.js";import"./index-CgnAgSJb.js";import"./VisuallyHidden-C3qe5bvd.js";import"./check-BgFr83Zy.js";import"./floating-ui.vue-BbXUDa7D.js";import"./nullish-CHIgUVhi.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-aHU7SBf4.js";import"./index-CUcRCP4y.js";import"./x-Cx8rnUeq.js";import"./index-DL5c8l9n.js";import"./shield-7VWun8q5.js";import"./user-BYX_8Zw8.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Cc6C8xpl.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-eI3Iaf36.js";import"./Label.vue_vue_type_script_setup_true_lang-CZcR4vXO.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-l9iCpPNA.js";import"./index-ciy4Hs4T.js";import"./circle-alert-DyErMS_l.js";import"./map-pin-DjHsa5mY.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-fWbNIzJ7.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-7E-GLJHG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-BiafVk5w.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CDcl1O4h.js";import"./vote-CmKJ4nIe.js";import"./file-text-BbAceoeB.js";import"./briefcase-DPZVG-y3.js";import"./calendar-DZb4HxWX.js";import"./megaphone-BcQW-GN7.js";import"./user-check-BYXz7gR7.js";import"./external-link-MvmDoI3Q.js";import"./panel-left-B9Wt-3Gr.js";import"./index-Ew3xmdhr.js";const ut={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},mt={class:"flex justify-between items-center"},ft={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},pt={class:"md:col-span-2"},_t={class:"relative"},ct={class:"font-medium"},vt={key:0,class:"text-sm text-muted-foreground"},gt={class:"flex items-center gap-2"},yt={class:"capitalize"},xt={key:0,class:"flex items-center gap-1"},bt={class:"text-sm"},ht={key:0,class:"text-sm"},$t={class:"text-muted-foreground"},Ct={key:1,class:"text-sm text-muted-foreground"},wt={class:"text-sm"},kt={class:"flex justify-end gap-1"},St={class:"text-muted-foreground"},Et={key:0,class:"flex justify-center"},Pt={class:"flex gap-1"},Se=L({__name:"Index",props:{campanas:{},filters:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canSend:{type:Boolean}},setup(j){var k,S;const C=j,z=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/campanas"}],x=E(((k=C.filters)==null?void 0:k.search)||""),v=E(((S=C.filters)==null?void 0:S.estado)||"all"),w=()=>{W.get("/admin/campanas",{search:x.value,estado:v.value!=="all"?v.value:void 0},{preserveState:!0,preserveScroll:!0})},b=d=>{const s={borrador:{variant:"secondary",icon:T},programada:{variant:"outline",icon:it},enviando:{variant:"default",icon:$},completada:{variant:"default",icon:rt},pausada:{variant:"warning",icon:lt},cancelada:{variant:"destructive",icon:null}};return s[d]||s.borrador},D=d=>d==="email"?dt:d==="whatsapp"?nt:$;return(d,s)=>(i(),u(Z,{breadcrumbs:z},{default:a(()=>[e(t(U),{title:"Campañas"}),l("div",ut,[l("div",mt,[s[3]||(s[3]=l("div",null,[l("h1",{class:"text-3xl font-bold"},"Campañas"),l("p",{class:"text-muted-foreground mt-1"}," Gestiona y monitorea tus campañas de email y WhatsApp ")],-1)),d.canCreate?(i(),u(t(g),{key:0,href:"/admin/campanas/create"},{default:a(()=>[e(t(y),null,{default:a(()=>[e(t(tt),{class:"w-4 h-4 mr-2"}),s[2]||(s[2]=r(" Nueva Campaña ",-1))]),_:1})]),_:1})):m("",!0)]),e(t(F),null,{default:a(()=>[e(t(H),null,{default:a(()=>[e(t(I),null,{default:a(()=>[...s[4]||(s[4]=[r("Filtros",-1)])]),_:1})]),_:1}),e(t(M),null,{default:a(()=>[l("div",ft,[l("div",pt,[l("div",_t,[e(t(et),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e(t(K),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=o=>x.value=o),placeholder:"Buscar campañas...",class:"pl-10",onKeyup:q(w,["enter"])},null,8,["modelValue"])])]),e(t(G),{modelValue:v.value,"onUpdate:modelValue":[s[1]||(s[1]=o=>v.value=o),w]},{default:a(()=>[e(t(Q),null,{default:a(()=>[e(t(J),{placeholder:"Estado"})]),_:1}),e(t(O),null,{default:a(()=>[e(t(_),{value:"all"},{default:a(()=>[...s[5]||(s[5]=[r("Todos",-1)])]),_:1}),e(t(_),{value:"borrador"},{default:a(()=>[...s[6]||(s[6]=[r("Borrador",-1)])]),_:1}),e(t(_),{value:"programada"},{default:a(()=>[...s[7]||(s[7]=[r("Programada",-1)])]),_:1}),e(t(_),{value:"enviando"},{default:a(()=>[...s[8]||(s[8]=[r("Enviando",-1)])]),_:1}),e(t(_),{value:"completada"},{default:a(()=>[...s[9]||(s[9]=[r("Completada",-1)])]),_:1}),e(t(_),{value:"pausada"},{default:a(()=>[...s[10]||(s[10]=[r("Pausada",-1)])]),_:1}),e(t(_),{value:"cancelada"},{default:a(()=>[...s[11]||(s[11]=[r("Cancelada",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(t(F),null,{default:a(()=>[e(t(M),{class:"p-0"},{default:a(()=>[e(t(R),null,{default:a(()=>[e(t(X),null,{default:a(()=>[e(t(h),null,{default:a(()=>[e(t(c),null,{default:a(()=>[...s[12]||(s[12]=[r("Nombre",-1)])]),_:1}),e(t(c),null,{default:a(()=>[...s[13]||(s[13]=[r("Tipo",-1)])]),_:1}),e(t(c),null,{default:a(()=>[...s[14]||(s[14]=[r("Segmento",-1)])]),_:1}),e(t(c),null,{default:a(()=>[...s[15]||(s[15]=[r("Estado",-1)])]),_:1}),e(t(c),null,{default:a(()=>[...s[16]||(s[16]=[r("Progreso",-1)])]),_:1}),e(t(c),null,{default:a(()=>[...s[17]||(s[17]=[r("Fecha",-1)])]),_:1}),e(t(c),{class:"text-right"},{default:a(()=>[...s[18]||(s[18]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),e(t(Y),null,{default:a(()=>[(i(!0),p(P,null,B(d.campanas.data,o=>(i(),u(t(h),{key:o.id},{default:a(()=>[e(t(f),{class:"font-medium"},{default:a(()=>[l("div",null,[l("div",ct,n(o.nombre),1),o.descripcion?(i(),p("div",vt,n(o.descripcion),1)):m("",!0)])]),_:2},1024),e(t(f),null,{default:a(()=>[l("div",gt,[(i(),u(V(D(o.tipo)),{class:"w-4 h-4"})),l("span",yt,n(o.tipo),1)])]),_:2},1024),e(t(f),null,{default:a(()=>[o.segment?(i(),p("div",xt,[e(t(at),{class:"w-4 h-4 text-muted-foreground"}),l("span",bt,n(o.segment.name),1),e(t(N),{variant:"secondary",class:"ml-1"},{default:a(()=>[r(n(o.segment.users_count),1)]),_:2},1024)])):m("",!0)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(N),{variant:b(o.estado).variant},{default:a(()=>[b(o.estado).icon?(i(),u(V(b(o.estado).icon),{key:0,class:"w-3 h-3 mr-1"})):m("",!0),r(" "+n(o.estado),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:a(()=>[o.metricas?(i(),p("div",ht,[l("div",null,n(o.metricas.total_enviados||0)+" / "+n(o.metricas.total_destinatarios||0),1),l("div",$t,n(((o.metricas.total_enviados||0)/(o.metricas.total_destinatarios||1)*100).toFixed(0))+"% ",1)])):(i(),p("span",Ct,"-"))]),_:2},1024),e(t(f),null,{default:a(()=>[l("div",wt,n(new Date(o.created_at).toLocaleDateString("es-ES")),1)]),_:2},1024),e(t(f),{class:"text-right"},{default:a(()=>[l("div",kt,[e(t(g),{href:`/admin/campanas/${o.id}`},{default:a(()=>[e(t(y),{variant:"ghost",size:"sm"},{default:a(()=>[e(t(st),{class:"w-4 h-4"})]),_:1})]),_:2},1032,["href"]),d.canEdit&&o.estado==="borrador"?(i(),u(t(g),{key:0,href:`/admin/campanas/${o.id}/edit`},{default:a(()=>[e(t(y),{variant:"ghost",size:"sm"},{default:a(()=>[e(t(T),{class:"w-4 h-4"})]),_:1})]),_:2},1032,["href"])):m("",!0),d.canSend&&o.estado==="borrador"?(i(),u(t(y),{key:1,variant:"ghost",size:"sm"},{default:a(()=>[e(t(ot),{class:"w-4 h-4"})]),_:1})):m("",!0)])]),_:2},1024)]),_:2},1024))),128)),d.campanas.data.length===0?(i(),u(t(h),{key:0},{default:a(()=>[e(t(f),{colspan:"7",class:"text-center py-8"},{default:a(()=>[l("div",St,[e(t($),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),s[19]||(s[19]=l("p",null,"No se encontraron campañas",-1))])]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),d.campanas.last_page>1?(i(),p("div",Et,[l("nav",Pt,[(i(!0),p(P,null,B(d.campanas.links,o=>(i(),u(t(g),{key:o.label,href:o.url||"#",class:A(["px-3 py-2 text-sm rounded-md",o.active?"bg-primary text-primary-foreground":"bg-background hover:bg-muted",!o.url&&"opacity-50 cursor-not-allowed"]),innerHTML:o.label},null,8,["href","class","innerHTML"]))),128))])])):m("",!0)])]),_:1}))}});export{Se as default};
