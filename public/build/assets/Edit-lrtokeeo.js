import{d as Ve,C as Ce,r as $,c as k,b,e as u,w as a,g as i,f as o,j as f,t as m,u as e,h as d,l as we,i as p,n as N,F as w,k as U,W as Ue}from"./app-BFCRP-hu.js";import{_ as Ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DVhxtwsQ.js";import{_ as E,a as S,b as z,c as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-C6Pf_Uif.js";import{_ as D}from"./CardDescription.vue_vue_type_script_setup_true_lang-C5iYxevR.js";import{_ as x}from"./createLucideIcon-B48W5HGR.js";import{_ as H}from"./Input.vue_vue_type_script_setup_true_lang-BArk2Dro.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-BSsD_nCa.js";import{_ as te}from"./Textarea.vue_vue_type_script_setup_true_lang-BvpXtNVw.js";import{_ as I,a as M,b as T,c as L,d as W}from"./SelectValue.vue_vue_type_script_setup_true_lang-D4BkPhEO.js";import{_ as Se,a as re}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-OjjH6Oyn.js";import{_ as X}from"./index-C4A356_A.js";import{_ as G,a as J,b as K}from"./index-7Cc0L9l5.js";import{_ as ie,a as ne}from"./index-BDFzzg4B.js";import{_ as de}from"./AddUsersModal.vue_vue_type_script_setup_true_lang-DthL8b9_.js";import{_ as ze}from"./CamposPersonalizadosForm.vue_vue_type_script_setup_true_lang-DV0xaFzQ.js";import{E as Ae}from"./EtiquetaSelector-DXljy2iI.js";import{u as qe}from"./useToast-B2ZAdFmg.js";import{C as De}from"./circle-check-big-uen-VRRD.js";import{F as Pe}from"./flag-KNsaGE_a.js";import{X as ue}from"./x-CO2t7227.js";import{U as me}from"./user-plus-BFKQiVAB.js";import{T as je}from"./tag-BD_pJCyF.js";import{C as Re}from"./circle-alert-Crqw8R8y.js";import{A as Be}from"./arrow-left-BiabW1KV.js";import{S as Fe}from"./save-BGOcn2DT.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-IDczqvjz.js";import"./index-BV8EXJV5.js";import"./floating-ui.vue-r1jh_cyr.js";import"./shield-CJLgSpbM.js";import"./user-B1UdYhgU.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bk1MyGsx.js";import"./chevron-right-jEjsThLi.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-it7-95jd.js";import"./VisuallyHidden-DtgZKa-V.js";import"./index-D4t36AHs.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-dTZ0TTmN.js";import"./index-D4Jmcyj5.js";import"./map-pin-96AKVoID.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Bn4JBZsL.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-Dy-9tXTd.js";import"./chevrons-up-down-B5X7TeC-.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C1tM4KQo.js";import"./users-D4nlGR3z.js";import"./target-BG-rBVrT.js";import"./vote-CRb2uBrD.js";import"./folder-open-CdHVd2oB.js";import"./send-B06MTMiq.js";import"./file-text-BNtX5jn7.js";import"./briefcase-DvfVQ7DM.js";import"./calendar-_r6_tYhJ.js";import"./megaphone-Dd-rvhjG.js";import"./user-check-CmuxQ_fm.js";import"./clipboard-list-BbsP5NSE.js";import"./mail-C7hV_ozf.js";import"./message-square-2Ae9CC_o.js";import"./external-link-DVqz8Mr1.js";import"./panel-left-BSTwYg9i.js";import"./check-50anzA7W.js";import"./index-BZv-jeFa.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-DIFJgx_h.js";import"./utils-DHSP7tfB.js";import"./VisuallyHiddenInput-BsNXVvQm.js";import"./circle-Cc_4kpMQ.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BPQOfPUO.js";import"./search-DzHipmqi.js";import"./loader-circle-BlBV89L7.js";import"./chevron-left-Bh0KDQsI.js";import"./CampoPersonalizadoInput.vue_vue_type_script_setup_true_lang-CVnM9dLg.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-B4ApdS_d.js";import"./TabsTrigger.vue_vue_type_script_setup_true_lang-KlWRsGd7.js";import"./index-BkDoy_-v.js";import"./useKbd-kRIii9yh.js";import"./useEtiquetaHierarchy-B_CuIAZi.js";import"./list-CQPYaV--.js";import"./tree-pine-DJFe6Cey.js";import"./plus-DUQ5nN3r.js";import"./zap-DWKEr6EP.js";import"./layers-DFj5lvvO.js";import"./trending-up-DtR6o0cj.js";import"./award-wiB2F5Sn.js";import"./hash-C6CBAZk_.js";const He={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ie={class:"text-muted-foreground mt-2"},Me={class:"grid gap-4 md:grid-cols-3"},Te={class:"font-medium"},Le={class:"font-medium"},We={key:0,class:"text-sm text-red-600 mt-1"},Xe={key:0,class:"text-sm text-red-600 mt-1"},Ge={class:"grid gap-4 md:grid-cols-2"},Je={class:"flex items-center gap-2"},Ke={class:"grid gap-4 md:grid-cols-2"},Oe={key:0,class:"text-sm text-red-600 mt-1"},Qe={key:0,class:"text-sm text-red-600 mt-1"},Ye={class:"space-y-2"},Ze={key:0,class:"p-3 bg-muted rounded-lg flex items-center justify-between"},es={class:"flex items-center gap-2"},ss={class:"font-medium"},os={class:"text-sm text-muted-foreground"},as={key:0,class:"text-sm text-red-600 mt-1"},ls={class:"flex items-center justify-between mb-2"},ts={key:0,class:"space-y-2 mt-3"},rs={class:"flex items-center gap-2"},is={class:"font-medium"},ns={class:"text-sm text-muted-foreground"},ds={key:1,class:"text-sm text-muted-foreground mt-3"},us={key:2,class:"space-y-4 p-4 border rounded-lg"},ms={class:"grid gap-4 md:grid-cols-3"},ps={class:"flex items-center space-x-2"},fs={class:"flex items-center space-x-2"},cs={key:0,class:"space-y-2"},_s={class:"flex items-center gap-2"},bs={class:"text-sm font-medium"},gs={class:"list-disc pl-4"},vs={class:"flex justify-end gap-2"},ys=Ve({__name:"Edit",props:{proyecto:{},hito:{},entregable:{},usuarios:{},usuariosAsignados:{},camposPersonalizados:{},valoresCamposPersonalizados:{},categorias:{},estados:{},prioridades:{},roles:{}},setup(pe){var Z,ee,se;const n=pe,{toast:j}=qe(),t=Ce({nombre:n.entregable.nombre||"",descripcion:n.entregable.descripcion||"",fecha_inicio:n.entregable.fecha_inicio||"",fecha_fin:n.entregable.fecha_fin||"",estado:n.entregable.estado||"pendiente",prioridad:n.entregable.prioridad||"media",responsable_id:n.entregable.responsable_id,usuarios_asignados:n.usuariosAsignados||[],campos_personalizados:n.valoresCamposPersonalizados||{},etiquetas:((Z=n.entregable.etiquetas)==null?void 0:Z.map(r=>r.id))??[],orden:n.entregable.orden||1,notas:""}),fe=$(!1),h=$(null),P=$("colaborador"),R=$(!1),B=$(!1),{route:O}=window,c=$(null),_=$(new Map);if(n.usuarios.forEach(r=>_.value.set(r.id,r)),n.entregable.responsable_id){const r=n.usuarios.find(s=>s.id===n.entregable.responsable_id);if(r)c.value=r;else{const s=n.entregable;c.value={id:n.entregable.responsable_id,name:((ee=s.responsable)==null?void 0:ee.name)||`Usuario #${n.entregable.responsable_id}`,email:((se=s.responsable)==null?void 0:se.email)||""},_.value.set(n.entregable.responsable_id,c.value)}}n.usuariosAsignados.forEach(r=>{var s,l,g;_.value.has(r.user_id)||_.value.set(r.user_id,{id:((s=r.user)==null?void 0:s.id)||r.user_id,name:((l=r.user)==null?void 0:l.name)||`Usuario #${r.user_id}`,email:((g=r.user)==null?void 0:g.email)||""})});const ce=k(()=>[{name:"rol",label:"Rol",type:"select",options:[{value:"colaborador",label:"Colaborador"},{value:"revisor",label:"Revisor"}],value:"colaborador",required:!0}]),_e=k(()=>{const r=t.usuarios_asignados.map(s=>s.user_id);return t.responsable_id&&r.push(t.responsable_id),r}),be=r=>{if(r.userIds.length>0){const s=r.userIds[0];t.responsable_id=s,_.value.has(s)?c.value=_.value.get(s)||null:(c.value={id:s,name:`Usuario seleccionado (ID: ${s})`,email:"Se actualizará al guardar"},_.value.set(s,c.value))}},ge=r=>{r.userIds.forEach(s=>{t.usuarios_asignados.some(g=>g.user_id===s)||(t.usuarios_asignados.push({user_id:s,rol:r.extraData.rol||"colaborador"}),_.value.has(s)||_.value.set(s,{id:s,name:`Usuario #${s}`,email:"Pendiente de actualizar"}))})},ve=k(()=>[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:n.proyecto.nombre,href:`/admin/proyectos/${n.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${n.proyecto.id}/hitos`},{title:n.hito.nombre,href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}`},{title:"Entregables",href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`},{title:"Editar Entregable"}]),ye=()=>{const r={...t.data(),usuarios:t.usuarios_asignados};delete r.usuarios_asignados,t.transform(()=>r).put(`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables/${n.entregable.id}`,{onSuccess:()=>{j.success("Entregable actualizado correctamente")},onError:()=>{j.error("Error al actualizar el entregable")}})},xe=()=>{Ue.get(`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`)},he=()=>{if(!h.value)return;if(t.usuarios_asignados.some(s=>s.user_id===h.value)){j.warning("Este usuario ya está asignado");return}t.usuarios_asignados.push({user_id:h.value,rol:P.value}),h.value=null,P.value="colaborador"},Q=r=>{const s=t.usuarios_asignados.findIndex(l=>l.user_id===r);s>-1&&t.usuarios_asignados.splice(s,1)},y=r=>_.value.has(r)?_.value.get(r):n.usuarios.find(s=>s.id===r),$e=k(()=>{const r=t.usuarios_asignados.map(s=>s.user_id);return t.responsable_id&&r.push(t.responsable_id),n.usuarios.filter(s=>!r.includes(s.id))}),F=k(()=>{const r=[];return t.nombre||r.push("El nombre es requerido"),t.nombre.length>255&&r.push("El nombre no puede exceder 255 caracteres"),t.fecha_inicio&&t.fecha_fin&&new Date(t.fecha_inicio)>new Date(t.fecha_fin)&&r.push("La fecha de inicio no puede ser posterior a la fecha de fin"),t.responsable_id||r.push("Debe asignar un responsable"),r}),ke=k(()=>F.value.length===0&&!t.processing),Y=k(()=>{var r;if(n.entregable.estado==="completado"&&n.entregable.completado_at){const s=new Date(n.entregable.completado_at).toLocaleDateString("es-ES"),l=((r=n.entregable.completado_por)==null?void 0:r.name)||"Usuario desconocido";return`Completado el ${s} por ${l}`}return null});return(r,s)=>(u(),b(Ee,{breadcrumbs:ve.value},{default:a(()=>[i("div",He,[i("div",null,[s[16]||(s[16]=i("h2",{class:"text-3xl font-bold tracking-tight"},"Editar Entregable",-1)),i("p",Ie,' Modificar el entregable "'+m(r.entregable.nombre)+'" ',1)]),Y.value?(u(),b(e(ie),{key:0,class:"bg-green-50 dark:bg-green-900/20 border-green-200"},{default:a(()=>[o(e(De),{class:"h-4 w-4 text-green-600"}),o(e(ne),{class:"text-green-800 dark:text-green-200"},{default:a(()=>[d(m(Y.value),1)]),_:1})]),_:1})):f("",!0),o(e(E),null,{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(z),{class:"text-base"},{default:a(()=>[...s[17]||(s[17]=[d("Información del Hito",-1)])]),_:1})]),_:1}),o(e(A),null,{default:a(()=>[i("div",Me,[i("div",null,[s[18]||(s[18]=i("p",{class:"text-sm text-muted-foreground"},"Hito",-1)),i("p",Te,m(r.hito.nombre),1)]),i("div",null,[s[19]||(s[19]=i("p",{class:"text-sm text-muted-foreground"},"Estado del Hito",-1)),o(e(X),null,{default:a(()=>[d(m(r.hito.estado_label||r.hito.estado),1)]),_:1})]),i("div",null,[s[20]||(s[20]=i("p",{class:"text-sm text-muted-foreground"},"Progreso del Hito",-1)),i("p",Le,m(r.hito.porcentaje_completado||0)+"%",1)])])]),_:1})]),_:1}),i("form",{onSubmit:we(ye,["prevent"]),class:"space-y-4"},[o(e(E),null,{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(z),null,{default:a(()=>[...s[21]||(s[21]=[d("Información Básica",-1)])]),_:1}),o(e(D),null,{default:a(()=>[...s[22]||(s[22]=[d(" Datos principales del entregable ",-1)])]),_:1})]),_:1}),o(e(A),{class:"space-y-4"},{default:a(()=>[i("div",null,[o(e(v),{for:"nombre",class:"required"},{default:a(()=>[...s[23]||(s[23]=[d(" Nombre del entregable ",-1)])]),_:1}),o(e(H),{id:"nombre",modelValue:e(t).nombre,"onUpdate:modelValue":s[0]||(s[0]=l=>e(t).nombre=l),placeholder:"Ej: Documento de diseño técnico",class:N({"border-red-500":e(t).errors.nombre})},null,8,["modelValue","class"]),e(t).errors.nombre?(u(),p("p",We,m(e(t).errors.nombre),1)):f("",!0)]),i("div",null,[o(e(v),{for:"descripcion"},{default:a(()=>[...s[24]||(s[24]=[d(" Descripción ",-1)])]),_:1}),o(e(te),{id:"descripcion",modelValue:e(t).descripcion,"onUpdate:modelValue":s[1]||(s[1]=l=>e(t).descripcion=l),placeholder:"Describe el entregable y sus objetivos...",rows:"4",class:N({"border-red-500":e(t).errors.descripcion})},null,8,["modelValue","class"]),e(t).errors.descripcion?(u(),p("p",Xe,m(e(t).errors.descripcion),1)):f("",!0)]),i("div",Ge,[i("div",null,[o(e(v),{for:"estado"},{default:a(()=>[...s[25]||(s[25]=[d(" Estado ",-1)])]),_:1}),o(e(I),{modelValue:e(t).estado,"onUpdate:modelValue":s[2]||(s[2]=l=>e(t).estado=l)},{default:a(()=>[o(e(M),null,{default:a(()=>[o(e(T),{placeholder:"Seleccionar estado"})]),_:1}),o(e(L),null,{default:a(()=>[(u(!0),p(w,null,U(r.estados,l=>(u(),b(e(W),{key:l.value,value:l.value},{default:a(()=>[d(m(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[o(e(v),{for:"prioridad"},{default:a(()=>[...s[26]||(s[26]=[d(" Prioridad ",-1)])]),_:1}),o(e(I),{modelValue:e(t).prioridad,"onUpdate:modelValue":s[3]||(s[3]=l=>e(t).prioridad=l)},{default:a(()=>[o(e(M),null,{default:a(()=>[o(e(T),{placeholder:"Seleccionar prioridad"})]),_:1}),o(e(L),null,{default:a(()=>[(u(!0),p(w,null,U(r.prioridades,l=>(u(),b(e(W),{key:l.value,value:l.value},{default:a(()=>[i("div",Je,[o(e(Pe),{class:N(["h-4 w-4",{"text-blue-500":l.value==="baja","text-yellow-500":l.value==="media","text-red-500":l.value==="alta"}])},null,8,["class"]),d(" "+m(l.label),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1}),o(e(E),null,{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(z),null,{default:a(()=>[...s[27]||(s[27]=[d("Fechas",-1)])]),_:1}),o(e(D),null,{default:a(()=>[...s[28]||(s[28]=[d(" Define el período de ejecución del entregable ",-1)])]),_:1})]),_:1}),o(e(A),{class:"space-y-4"},{default:a(()=>[i("div",Ke,[i("div",null,[o(e(v),{for:"fecha_inicio"},{default:a(()=>[...s[29]||(s[29]=[d(" Fecha de inicio ",-1)])]),_:1}),o(e(H),{id:"fecha_inicio",modelValue:e(t).fecha_inicio,"onUpdate:modelValue":s[4]||(s[4]=l=>e(t).fecha_inicio=l),type:"date",disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.fecha_inicio?(u(),p("p",Oe,m(e(t).errors.fecha_inicio),1)):f("",!0)]),i("div",null,[o(e(v),{for:"fecha_fin"},{default:a(()=>[...s[30]||(s[30]=[d(" Fecha de fin ",-1)])]),_:1}),o(e(H),{id:"fecha_fin",modelValue:e(t).fecha_fin,"onUpdate:modelValue":s[5]||(s[5]=l=>e(t).fecha_fin=l),type:"date",disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.fecha_fin?(u(),p("p",Qe,m(e(t).errors.fecha_fin),1)):f("",!0)])])]),_:1})]),_:1}),o(e(E),null,{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(z),null,{default:a(()=>[...s[31]||(s[31]=[d("Asignación",-1)])]),_:1}),o(e(D),null,{default:a(()=>[...s[32]||(s[32]=[d(" Asigna un responsable y colaboradores al entregable ",-1)])]),_:1})]),_:1}),o(e(A),{class:"space-y-4"},{default:a(()=>[i("div",null,[o(e(v),{for:"responsable",class:"required"},{default:a(()=>[...s[33]||(s[33]=[d(" Responsable principal ",-1)])]),_:1}),i("div",Ye,[c.value?(u(),p("div",Ze,[i("div",es,[o(e(G),{class:"h-8 w-8"},{default:a(()=>[c.value.avatar?(u(),b(e(J),{key:0,src:c.value.avatar},null,8,["src"])):f("",!0),o(e(K),null,{default:a(()=>[d(m(c.value.name.substring(0,2).toUpperCase()),1)]),_:1})]),_:1}),i("div",null,[i("p",ss,m(c.value.name),1),i("p",os,m(c.value.email),1)])]),o(e(x),{type:"button",variant:"ghost",size:"sm",onClick:s[6]||(s[6]=l=>{e(t).responsable_id=null,c.value=null})},{default:a(()=>[o(e(ue),{class:"h-4 w-4"})]),_:1})])):f("",!0),o(e(x),{type:"button",variant:"outline",onClick:s[7]||(s[7]=l=>R.value=!0),class:"w-full"},{default:a(()=>[o(e(me),{class:"h-4 w-4 mr-2"}),d(" "+m(c.value?"Cambiar Responsable":"Seleccionar Responsable"),1)]),_:1})]),e(t).errors.responsable_id?(u(),p("p",as,m(e(t).errors.responsable_id),1)):f("",!0)]),i("div",null,[i("div",ls,[o(e(v),null,{default:a(()=>[...s[34]||(s[34]=[d(" Colaboradores adicionales ",-1)])]),_:1}),o(e(x),{type:"button",variant:"outline",size:"sm",onClick:s[8]||(s[8]=l=>B.value=!0)},{default:a(()=>[o(e(me),{class:"mr-2 h-4 w-4"}),s[35]||(s[35]=d(" Agregar colaboradores ",-1))]),_:1})]),e(t).usuarios_asignados.length>0?(u(),p("div",ts,[(u(!0),p(w,null,U(e(t).usuarios_asignados,l=>{var g,V;return u(),p("div",{key:l.user_id,class:"p-3 bg-muted rounded-lg flex items-center justify-between"},[i("div",rs,[o(e(G),{class:"h-8 w-8"},{default:a(()=>{var C,q;return[(C=y(l.user_id))!=null&&C.avatar?(u(),b(e(J),{key:0,src:(q=y(l.user_id))==null?void 0:q.avatar},null,8,["src"])):f("",!0),o(e(K),null,{default:a(()=>{var oe,ae,le;return[d(m(((le=(ae=(oe=y(l.user_id))==null?void 0:oe.name)==null?void 0:ae.substring(0,2))==null?void 0:le.toUpperCase())||"US"),1)]}),_:2},1024)]}),_:2},1024),i("div",null,[i("p",is,m(((g=y(l.user_id))==null?void 0:g.name)||`Usuario #${l.user_id}`),1),i("p",ns,m(((V=y(l.user_id))==null?void 0:V.email)||""),1)]),o(e(X),{variant:"outline"},{default:a(()=>[d(m(l.rol),1)]),_:2},1024)]),o(e(x),{type:"button",variant:"ghost",size:"sm",onClick:C=>Q(l.user_id)},{default:a(()=>[o(e(ue),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])}),128))])):(u(),p("div",ds," No hay colaboradores asignados ")),fe.value?(u(),p("div",us,[i("div",ms,[o(e(I),{modelValue:h.value,"onUpdate:modelValue":s[9]||(s[9]=l=>h.value=l)},{default:a(()=>[o(e(M),null,{default:a(()=>[o(e(T),{placeholder:"Seleccionar usuario"})]),_:1}),o(e(L),null,{default:a(()=>[(u(!0),p(w,null,U($e.value,l=>(u(),b(e(W),{key:l.id,value:l.id},{default:a(()=>[d(m(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o(e(Se),{modelValue:P.value,"onUpdate:modelValue":s[10]||(s[10]=l=>P.value=l),class:"flex gap-4"},{default:a(()=>[i("div",ps,[o(e(re),{value:"colaborador",id:"colaborador"}),o(e(v),{for:"colaborador"},{default:a(()=>[...s[36]||(s[36]=[d("Colaborador",-1)])]),_:1})]),i("div",fs,[o(e(re),{value:"revisor",id:"revisor"}),o(e(v),{for:"revisor"},{default:a(()=>[...s[37]||(s[37]=[d("Revisor",-1)])]),_:1})])]),_:1},8,["modelValue"]),o(e(x),{type:"button",onClick:he,disabled:!h.value},{default:a(()=>[...s[38]||(s[38]=[d(" Agregar ",-1)])]),_:1},8,["disabled"])]),e(t).usuarios_asignados.length>0?(u(),p("div",cs,[s[40]||(s[40]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Usuarios asignados:",-1)),(u(!0),p(w,null,U(e(t).usuarios_asignados,l=>{var g;return u(),p("div",{key:l.user_id,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded"},[i("div",_s,[o(e(G),{class:"h-6 w-6"},{default:a(()=>{var V,C;return[(V=y(l.user_id))!=null&&V.avatar?(u(),b(e(J),{key:0,src:(C=y(l.user_id))==null?void 0:C.avatar},null,8,["src"])):f("",!0),o(e(K),null,{default:a(()=>{var q;return[d(m((q=y(l.user_id))==null?void 0:q.name.substring(0,2).toUpperCase()),1)]}),_:2},1024)]}),_:2},1024),i("span",bs,m((g=y(l.user_id))==null?void 0:g.name),1),o(e(X),{variant:"outline"},{default:a(()=>[d(m(l.rol),1)]),_:2},1024)]),o(e(x),{type:"button",variant:"ghost",size:"sm",onClick:V=>Q(l.user_id)},{default:a(()=>[...s[39]||(s[39]=[d(" Remover ",-1)])]),_:2},1032,["onClick"])])}),128))])):f("",!0)])):f("",!0)])]),_:1})]),_:1}),o(e(E),null,{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(z),null,{default:a(()=>[...s[41]||(s[41]=[d("Notas de actualización",-1)])]),_:1}),o(e(D),null,{default:a(()=>[...s[42]||(s[42]=[d(" Describe los cambios realizados (opcional) ",-1)])]),_:1})]),_:1}),o(e(A),null,{default:a(()=>[o(e(te),{modelValue:e(t).notas,"onUpdate:modelValue":s[11]||(s[11]=l=>e(t).notas=l),placeholder:"Notas sobre los cambios realizados...",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1}),r.camposPersonalizados&&r.camposPersonalizados.length>0?(u(),b(ze,{key:0,campos:r.camposPersonalizados,valores:e(t).campos_personalizados,errors:e(t).errors,onUpdate:s[12]||(s[12]=l=>e(t).campos_personalizados=l)},null,8,["campos","valores","errors"])):f("",!0),r.categorias&&r.categorias.length>0?(u(),b(e(E),{key:1},{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(z),{class:"flex items-center gap-2"},{default:a(()=>[o(e(je),{class:"h-5 w-5"}),s[43]||(s[43]=d(" Etiquetas ",-1))]),_:1}),o(e(D),null,{default:a(()=>[...s[44]||(s[44]=[d(" Asigna etiquetas para categorizar y organizar este entregable ",-1)])]),_:1})]),_:1}),o(e(A),null,{default:a(()=>[o(Ae,{modelValue:e(t).etiquetas,"onUpdate:modelValue":s[13]||(s[13]=l=>e(t).etiquetas=l),categorias:r.categorias,"max-etiquetas":10,placeholder:"Seleccionar etiquetas para el entregable...",description:"Puedes asignar hasta 10 etiquetas"},null,8,["modelValue","categorias"])]),_:1})]),_:1})):f("",!0),F.value.length>0?(u(),b(e(ie),{key:2,variant:"destructive"},{default:a(()=>[o(e(Re),{class:"h-4 w-4"}),o(e(ne),null,{default:a(()=>[i("ul",gs,[(u(!0),p(w,null,U(F.value,l=>(u(),p("li",{key:l},m(l),1))),128))])]),_:1})]),_:1})):f("",!0),i("div",vs,[o(e(x),{type:"button",variant:"outline",onClick:xe},{default:a(()=>[o(e(Be),{class:"mr-2 h-4 w-4"}),s[45]||(s[45]=d(" Cancelar ",-1))]),_:1}),o(e(x),{type:"submit",disabled:!ke.value},{default:a(()=>[o(e(Fe),{class:"mr-2 h-4 w-4"}),d(" "+m(e(t).processing?"Actualizando...":"Actualizar Entregable"),1)]),_:1},8,["disabled"])])],32)]),o(de,{modelValue:R.value,"onUpdate:modelValue":s[14]||(s[14]=l=>R.value=l),title:"Seleccionar Responsable Principal",description:"Selecciona el usuario que ser\\u00e1 el responsable principal del entregable","search-endpoint":e(O)("admin.proyectos.search-users"),"excluded-ids":e(t).responsable_id?[e(t).responsable_id]:[],"max-selection":1,"submit-button-text":"Seleccionar Responsable","search-placeholder":"Buscar por nombre, email, documento o tel\\u00e9fono...",onSubmit:be},null,8,["modelValue","search-endpoint","excluded-ids"]),o(de,{modelValue:B.value,"onUpdate:modelValue":s[15]||(s[15]=l=>B.value=l),title:"Agregar Colaboradores",description:"Selecciona los usuarios que colaborar\\u00e1n en este entregable","search-endpoint":e(O)("admin.proyectos.search-users"),"excluded-ids":_e.value,"extra-fields":ce.value,"submit-button-text":"Agregar Colaboradores","search-placeholder":"Buscar por nombre, email, documento o tel\\u00e9fono...",onSubmit:ge},null,8,["modelValue","search-endpoint","excluded-ids","extra-fields"])]),_:1},8,["breadcrumbs"]))}}),Oo=Ne(ys,[["__scopeId","data-v-d9027d60"]]);export{Oo as default};
