import{d as ct,r as mt,c as T,b as f,w as r,g as e,j as d,e as s,f as o,v as b,h as l,t as i,n as U,m as n,x as ut,i as c,y as ft,F as V,k as E,s as M,M as gt}from"./app-Cps90vG2.js";import{B as vt,_ as xt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CRO4CR7J.js";import{_,a as w,b as C,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-BGyo0yeJ.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-C4UwkfkC.js";import{_ as v}from"./createLucideIcon-Bgm72SpE.js";import{_ as y}from"./index-DCaFXfvI.js";import{_ as bt,a as yt,b as $,c as z}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DnD71FHf.js";import{_ as G,a as H}from"./index-pJUGBGGR.js";import{u as ht}from"./useToast-Bp0XLO6D.js";import{u as kt}from"./useFileUpload-BD0Ofi6C.js";import{C as pt}from"./circle-x-CgZ2_u7j.js";import{C as q}from"./circle-check-big-578n03r3.js";import{F as j}from"./file-text-C2ve5AKf.js";import{A as _t}from"./arrow-left-OC4YZDed.js";import{D as X}from"./download-Cvxor3vb.js";import{C as wt}from"./copy-DuChgs6v.js";import{S as Ct}from"./square-pen-CYx6UVcG.js";import{T as Dt}from"./trash-2-HQzTGKqd.js";import{C as J}from"./circle-alert-DWRzB4qn.js";import{E as $t}from"./external-link-C3J8C0aI.js";import{D as zt}from"./dollar-sign-DkjUOyRk.js";import{C as K}from"./calendar-ix5cF6z0.js";import{U as O}from"./user-CuQaavI3.js";import{M as Q}from"./mail-DkuJfTt6.js";import{P as W}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-WVtEzzjR.js";import{H as Y}from"./hash-C4Tl9qv6.js";import{E as Pt}from"./eye-BETTZgr0.js";import{P as Z}from"./plus-Cdk1dADm.js";import{L as St}from"./list-DaNEyUPx.js";import{T as Vt}from"./tree-pine-DZ-kZZCM.js";import{C as Et}from"./clock-C1riKzWv.js";import{C as Ft}from"./chevron-right-SnT3IiIz.js";import"./index-C8esdNXe.js";import"./floating-ui.vue-BvQrjiy0.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-B1u3EtG8.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DYGhjVPm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-736Vx309.js";import"./chevrons-up-down-BhyLWXf2.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ska8rz1v.js";import"./tag-C6AypVfl.js";import"./users-DhPw4U0m.js";import"./target-BmLeIdFc.js";import"./shield-oZ6Gn0Zg.js";import"./vote-BqFBh6gp.js";import"./folder-open-Bxf7NdBH.js";import"./send-BVGWuvqd.js";import"./briefcase-_bCdG8-w.js";import"./megaphone-BtrUQ1hy.js";import"./user-check-J5_GqRsJ.js";import"./clipboard-list-AgzzqwtV.js";import"./message-square-B5j_iapi.js";import"./panel-left-EiU9s9sA.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BFKDaOuW.js";import"./VisuallyHidden-DcEyuFH6.js";import"./Input.vue_vue_type_script_setup_true_lang-DrNZHE03.js";import"./index-BWN4Gq02.js";import"./check-sChBcA8x.js";import"./index-Bu3MKtdn.js";import"./index-BoOlVPqa.js";import"./RovingFocusItem-Cxzy3vCA.js";import"./utils-DkL8qrEj.js";import"./x-DubltOEj.js";import"./index-DJ86uzda.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DdRXkgOA.js";import"./Label.vue_vue_type_script_setup_true_lang-BhEm3-la.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BLVYDUmA.js";import"./map-pin-COMQfJXb.js";const At={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Tt={class:"flex items-center justify-between"},jt={class:"flex items-center gap-4"},Ot={class:"text-3xl font-bold"},It={class:"flex items-center gap-4 mt-2"},Lt={class:"flex gap-2"},Nt={class:"space-y-6"},Bt={class:"pb-6 border-b"},Ut={class:"flex items-center gap-2"},Mt={class:"pb-6 border-b"},Rt={key:0},Gt={class:"text-2xl font-bold flex items-center gap-2"},Ht={class:"text-sm text-gray-600"},qt={key:1},Xt={class:"pb-6 border-b"},Jt={class:"space-y-4"},Kt={key:0},Qt={class:"mt-1"},Wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Yt={class:"mt-1 flex items-center gap-2"},Zt={class:"mt-1 flex items-center gap-2"},te={key:1},ee={class:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2"},oe={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"},ae={key:2},se={class:"mt-1 text-gray-700"},re={class:"space-y-3 text-sm"},ne={class:"ml-2 font-mono"},ie={class:"ml-2"},le={key:0,class:"block text-xs text-gray-500 ml-2 mt-1"},de={class:"ml-2"},ce={key:0,class:"block text-xs text-gray-500 ml-2 mt-1"},me={key:0,class:"pb-6 border-b"},ue={class:"flex items-center gap-3 p-4 rounded-lg border bg-blue-50 dark:bg-blue-950/20"},fe={class:"font-medium"},ge=["href"],ve={class:"pb-6 border-b"},xe={key:0},be={class:"rounded-lg border p-4 bg-green-50 dark:bg-green-950/20"},ye={class:"flex items-start gap-4"},he={class:"flex-1"},ke={class:"flex items-center gap-2 mb-2"},pe={class:"font-semibold"},_e={class:"space-y-2 text-sm"},we={class:"flex items-center gap-2"},Ce=["href"],De={key:0,class:"flex items-center gap-2"},$e=["href"],ze={class:"flex items-center gap-2"},Pe={class:"text-gray-600"},Se={key:1},Ve={class:"space-y-3 p-4 rounded-lg border bg-gray-50 dark:bg-gray-900/20"},Ee={key:0,class:"flex items-start gap-3"},Fe={class:"font-medium"},Ae={key:1,class:"flex items-start gap-3"},Te={key:2,class:"flex items-start gap-3"},je=["href"],Oe={key:3,class:"flex items-start gap-3"},Ie=["href"],Le={key:2},Ne={key:1},Be={class:"text-sm font-medium text-gray-600 mb-3"},Ue={class:"space-y-2"},Me={class:"flex items-center gap-3"},Re={class:"font-medium"},Ge={class:"text-sm text-gray-500"},He={key:0,class:"text-sm text-gray-600 mt-1"},qe={key:2},Xe={class:"space-y-2"},Je={class:"flex items-center justify-between"},Ke={class:"flex items-center space-x-3 flex-1"},Qe={class:"min-w-0 flex-1"},We={class:"text-sm font-medium truncate"},Ye={key:0,class:"text-xs text-muted-foreground"},Ze={class:"flex items-center space-x-2"},to={class:"space-y-4"},eo={class:"text-sm font-medium text-gray-600"},oo={class:"mt-1"},ao={class:"flex justify-between items-center"},so={class:"flex gap-2"},ro={key:0},no={class:"grid grid-cols-4 gap-4 mb-6"},io={class:"text-center"},lo={class:"text-2xl font-bold"},co={class:"text-center"},mo={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},uo={class:"text-center"},fo={class:"text-2xl font-bold text-green-600 dark:text-green-400"},go={class:"text-center"},vo={class:"text-2xl font-bold"},xo={key:0,class:"mt-6 space-y-2"},bo={class:"flex items-center justify-between"},yo={class:"flex-1"},ho={class:"font-medium"},ko={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},po={class:"flex items-center gap-4 mt-2"},_o={key:0,class:"text-xs text-gray-500"},wo={key:1,class:"text-xs text-gray-500"},Co={class:"flex gap-2"},Do={class:"text-center mt-4"},$o={key:1,class:"text-center py-6 text-gray-500"},Ua=ct({__name:"Show",props:{contrato:{},can:{}},setup(a){const x=a,I=ht(),{downloadFile:tt}=kt(),L=mt("general"),et=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:x.contrato.nombre,href:`/admin/contratos/${x.contrato.id}`}],F=T(()=>{const u={borrador:{color:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",icon:j,label:"Borrador"},activo:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:q,label:"Activo"},finalizado:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:q,label:"Finalizado"},cancelado:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:pt,label:"Cancelado"}};return u[x.contrato.estado]||u.borrador}),ot=T(()=>({servicio:"Servicio",obra:"Obra",suministro:"Suministro",consultoria:"Consultoría",otro:"Otro"})[x.contrato.tipo]||"Otro"),at=T(()=>x.contrato.estado==="cancelado"?"bg-red-500":x.contrato.estado==="finalizado"?"bg-blue-500":x.contrato.esta_vencido?"bg-red-500":x.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),P=u=>u?new Date(u).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",N=u=>u?new Date(u).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",st=()=>{confirm("¿Está seguro de eliminar este contrato? Esta acción no se puede deshacer.")&&M.delete(route("admin.contratos.destroy",x.contrato.id),{onSuccess:()=>{I.success("Contrato eliminado exitosamente")}})},rt=()=>{confirm("¿Desea duplicar este contrato?")&&M.post(route("admin.contratos.duplicar",x.contrato.id),{},{onSuccess:()=>{I.success("Contrato duplicado exitosamente")}})},nt=u=>{window.open(u,"_blank")},it=()=>{x.contrato.archivo_pdf&&window.open(x.contrato.archivo_pdf,"_blank")},h=u=>{var m,g,p;const t=gt(),k=((m=t.props.auth)==null?void 0:m.permissions)||[];return((p=(g=t.props.auth)==null?void 0:g.roles)==null?void 0:p.some(S=>S.name==="super_admin"))?!0:k.includes(u)},lt=u=>({pendiente:"secondary",en_progreso:"warning",cumplida:"success",vencida:"destructive",cancelada:"outline"})[u]||"secondary";return(u,t)=>(n(),f(xt,{breadcrumbs:et},{default:r(()=>[e("div",At,[e("div",Tt,[e("div",jt,[s(o(b),{href:u.route("admin.contratos.index")},{default:r(()=>[s(o(v),{variant:"ghost",size:"sm"},{default:r(()=>[s(o(_t),{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=l(" Volver ",-1))]),_:1})]),_:1},8,["href"]),e("div",null,[e("h1",Ot,i(a.contrato.nombre),1),e("div",It,[s(o(y),{class:U(F.value.color)},{default:r(()=>[(n(),f(ut(F.value.icon),{class:"h-4 w-4 mr-1"})),l(" "+i(F.value.label),1)]),_:1},8,["class"]),s(o(y),{variant:"outline"},{default:r(()=>[l(i(ot.value),1)]),_:1}),a.contrato.esta_vencido?(n(),f(o(y),{key:0,variant:"destructive"},{default:r(()=>[...t[2]||(t[2]=[l(" Vencido ",-1)])]),_:1})):a.contrato.esta_proximo_vencer?(n(),f(o(y),{key:1,class:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 border border-yellow-300 dark:border-yellow-700"},{default:r(()=>[l(" Vence en "+i(a.contrato.dias_restantes)+" días ",1)]),_:1})):d("",!0)])])]),e("div",Lt,[a.contrato.archivo_pdf?(n(),f(o(v),{key:0,variant:"outline",onClick:it},{default:r(()=>[s(o(X),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=l(" Descargar PDF ",-1))]),_:1})):d("",!0),a.can.edit?(n(),f(o(v),{key:1,variant:"outline",onClick:rt},{default:r(()=>[s(o(wt),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=l(" Duplicar ",-1))]),_:1})):d("",!0),a.can.edit?(n(),f(o(b),{key:2,href:u.route("admin.contratos.edit",a.contrato.id)},{default:r(()=>[s(o(v),null,{default:r(()=>[s(o(Ct),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=l(" Editar ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),a.can.delete?(n(),f(o(v),{key:3,variant:"destructive",onClick:st},{default:r(()=>[s(o(Dt),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=l(" Eliminar ",-1))]),_:1})):d("",!0)])]),a.contrato.esta_vencido?(n(),f(o(G),{key:0,class:"bg-red-100 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200"},{default:r(()=>[s(o(J),{class:"h-4 w-4"}),s(o(H),null,{default:r(()=>[l(" Este contrato venció el "+i(P(a.contrato.fecha_fin))+". ",1)]),_:1})]),_:1})):a.contrato.esta_proximo_vencer?(n(),f(o(G),{key:1,variant:"warning"},{default:r(()=>[s(o(J),{class:"h-4 w-4"}),s(o(H),null,{default:r(()=>[l(" Este contrato vencerá en "+i(a.contrato.dias_restantes)+" días ("+i(P(a.contrato.fecha_fin))+"). ",1)]),_:1})]),_:1})):d("",!0),e("div",Nt,[s(o(bt),{modelValue:L.value,"onUpdate:modelValue":t[0]||(t[0]=k=>L.value=k)},{default:r(()=>{var k,A;return[s(o(yt),null,{default:r(()=>{var m,g;return[s(o($),{value:"general"},{default:r(()=>[...t[7]||(t[7]=[l("Información General",-1)])]),_:1}),s(o($),{value:"participantes"},{default:r(()=>[...t[8]||(t[8]=[l(" Partes Involucradas ",-1)])]),_:1}),(m=a.contrato.archivos_paths)!=null&&m.length?(n(),f(o($),{key:0,value:"archivos"},{default:r(()=>[t[9]||(t[9]=l(" Archivos ",-1)),s(o(y),{variant:"outline",class:"ml-1"},{default:r(()=>[l(i(a.contrato.archivos_paths.length),1)]),_:1})]),_:1})):d("",!0),(g=a.contrato.campos_personalizados)!=null&&g.length?(n(),f(o($),{key:1,value:"campos"},{default:r(()=>[...t[10]||(t[10]=[l(" Campos Adicionales ",-1)])]),_:1})):d("",!0),s(o($),{value:"obligaciones"},{default:r(()=>[t[11]||(t[11]=l(" Obligaciones ",-1)),a.contrato.total_obligaciones>0?(n(),f(o(y),{key:0,variant:"outline",class:"ml-1"},{default:r(()=>[l(i(a.contrato.total_obligaciones),1)]),_:1})):d("",!0)]),_:1})]}),_:1}),s(o(z),{value:"general"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[12]||(t[12]=[l("Información General",-1)])]),_:1})]),_:1}),s(o(D),{class:"space-y-6"},{default:r(()=>[e("div",Bt,[t[13]||(t[13]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Proyecto",-1)),e("div",Ut,[s(o(b),{href:u.route("admin.proyectos.show",a.contrato.proyecto.id),class:"text-blue-600 hover:underline flex items-center gap-2 font-medium"},{default:r(()=>[l(i(a.contrato.proyecto.nombre)+" ",1),s(o($t),{class:"h-4 w-4"})]),_:1},8,["href"]),s(o(y),{variant:"outline"},{default:r(()=>[l(i(a.contrato.proyecto.estado),1)]),_:1})])]),e("div",Mt,[t[15]||(t[15]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Información Financiera",-1)),a.contrato.monto_total?(n(),c("div",Rt,[e("p",Gt,[s(o(zt),{class:"h-6 w-6"}),l(" "+i(a.contrato.monto_formateado||a.contrato.monto_total)+" ",1),e("span",Ht,i(a.contrato.moneda),1)])])):(n(),c("div",qt,[...t[14]||(t[14]=[e("p",{class:"text-gray-500 text-sm"},"No se ha especificado información financiera",-1)])]))]),e("div",Xt,[t[21]||(t[21]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Detalles del Contrato",-1)),e("div",Jt,[a.contrato.descripcion?(n(),c("div",Kt,[t[16]||(t[16]=e("h5",{class:"text-sm font-medium text-gray-600"},"Descripción",-1)),e("p",Qt,i(a.contrato.descripcion),1)])):d("",!0),e("div",Wt,[e("div",null,[t[17]||(t[17]=e("h5",{class:"text-sm font-medium text-gray-600"},"Fecha de Inicio",-1)),e("p",Yt,[s(o(K),{class:"h-4 w-4"}),l(" "+i(P(a.contrato.fecha_inicio)),1)])]),e("div",null,[t[18]||(t[18]=e("h5",{class:"text-sm font-medium text-gray-600"},"Fecha de Fin",-1)),e("p",Zt,[s(o(K),{class:"h-4 w-4"}),l(" "+i(P(a.contrato.fecha_fin)),1)])])]),a.contrato.porcentaje_transcurrido!==void 0&&a.contrato.estado==="activo"?(n(),c("div",te,[e("div",ee,[t[19]||(t[19]=e("span",null,"Progreso del contrato",-1)),e("span",null,i(a.contrato.porcentaje_transcurrido)+"%",1)]),e("div",oe,[e("div",{class:U([at.value,"h-3 rounded-full transition-all duration-300"]),style:ft({width:`${a.contrato.porcentaje_transcurrido}%`})},null,6)])])):d("",!0),a.contrato.observaciones?(n(),c("div",ae,[t[20]||(t[20]=e("h5",{class:"text-sm font-medium text-gray-600"},"Observaciones",-1)),e("p",se,i(a.contrato.observaciones),1)])):d("",!0)])]),e("div",null,[t[25]||(t[25]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Información del Sistema",-1)),e("div",re,[e("div",null,[t[22]||(t[22]=e("span",{class:"text-gray-600"},"ID:",-1)),e("span",ne,"#"+i(a.contrato.id),1)]),e("div",null,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Creado:",-1)),e("span",ie,i(N(a.contrato.created_at)),1),a.contrato.creador?(n(),c("span",le," por "+i(a.contrato.creador.name),1)):d("",!0)]),e("div",null,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Última actualización:",-1)),e("span",de,i(N(a.contrato.updated_at)),1),a.contrato.actualizador?(n(),c("span",ce," por "+i(a.contrato.actualizador.name),1)):d("",!0)])])])]),_:1})]),_:1})]),_:1}),s(o(z),{value:"participantes"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[26]||(t[26]=[l("Partes Involucradas",-1)])]),_:1}),s(o(R),null,{default:r(()=>[...t[27]||(t[27]=[l(" Responsable, contraparte y participantes del contrato ",-1)])]),_:1})]),_:1}),s(o(D),{class:"space-y-6"},{default:r(()=>{var m;return[a.contrato.responsable?(n(),c("div",me,[t[28]||(t[28]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Responsable del Contrato",-1)),e("div",ue,[s(o(O),{class:"h-8 w-8 text-blue-600"}),e("div",null,[e("p",fe,i(a.contrato.responsable.name),1),e("a",{href:`mailto:${a.contrato.responsable.email}`,class:"text-sm text-blue-600 hover:underline"},i(a.contrato.responsable.email),9,ge)])])])):d("",!0),e("div",ve,[t[35]||(t[35]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Contraparte",-1)),a.contrato.contraparte_user?(n(),c("div",xe,[e("div",be,[e("div",ye,[s(o(O),{class:"h-8 w-8 text-green-600 mt-1"}),e("div",he,[e("div",ke,[e("h5",pe,i(a.contrato.contraparte_user.name),1),s(o(y),{class:"bg-green-100 text-green-800"},{default:r(()=>[...t[29]||(t[29]=[l(" Usuario del Sistema ",-1)])]),_:1})]),e("div",_e,[e("div",we,[s(o(Q),{class:"h-4 w-4 text-gray-400"}),e("a",{href:`mailto:${a.contrato.contraparte_user.email}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_user.email),9,Ce)]),a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono?(n(),c("div",De,[s(o(W),{class:"h-4 w-4 text-gray-400"}),e("a",{href:`tel:${a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono),9,$e)])):d("",!0),e("div",ze,[s(o(Y),{class:"h-4 w-4 text-gray-400"}),e("span",Pe,"ID: #"+i(a.contrato.contraparte_user.id),1)])])])])])])):a.contrato.contraparte_nombre||a.contrato.contraparte_identificacion||a.contrato.contraparte_email||a.contrato.contraparte_telefono?(n(),c("div",Se,[e("div",Ve,[a.contrato.contraparte_nombre?(n(),c("div",Ee,[s(o(vt),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[30]||(t[30]=e("h5",{class:"text-sm font-medium text-gray-600"},"Nombre",-1)),e("p",Fe,i(a.contrato.contraparte_nombre),1)])])):d("",!0),a.contrato.contraparte_identificacion?(n(),c("div",Ae,[s(o(Y),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[31]||(t[31]=e("h5",{class:"text-sm font-medium text-gray-600"},"Identificación",-1)),e("p",null,i(a.contrato.contraparte_identificacion),1)])])):d("",!0),a.contrato.contraparte_email?(n(),c("div",Te,[s(o(Q),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[32]||(t[32]=e("h5",{class:"text-sm font-medium text-gray-600"},"Email",-1)),e("a",{href:`mailto:${a.contrato.contraparte_email}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_email),9,je)])])):d("",!0),a.contrato.contraparte_telefono?(n(),c("div",Oe,[s(o(W),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[33]||(t[33]=e("h5",{class:"text-sm font-medium text-gray-600"},"Teléfono",-1)),e("a",{href:`tel:${a.contrato.contraparte_telefono}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_telefono),9,Ie)])])):d("",!0)])])):(n(),c("div",Le,[...t[34]||(t[34]=[e("p",{class:"text-gray-500 text-sm"},"No se ha especificado información de la contraparte",-1)])]))]),(m=a.contrato.participantes)!=null&&m.length?(n(),c("div",Ne,[e("h4",Be,"Participantes del Contrato ("+i(a.contrato.participantes.length)+")",1),e("div",Ue,[(n(!0),c(V,null,E(a.contrato.participantes,g=>(n(),c("div",{key:g.id,class:"flex items-center justify-between p-4 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},[e("div",Me,[s(o(O),{class:"h-8 w-8 text-gray-400"}),e("div",null,[e("p",Re,i(g.name),1),e("p",Ge,i(g.email),1),g.pivot.notas?(n(),c("p",He,i(g.pivot.notas),1)):d("",!0)])]),s(o(y),{variant:g.pivot.rol==="aprobador"?"default":g.pivot.rol==="observador"?"secondary":"outline"},{default:r(()=>[l(i(g.pivot.rol==="aprobador"?"Aprobador":g.pivot.rol==="observador"?"Observador":"Participante"),1)]),_:2},1032,["variant"])]))),128))])])):(n(),c("div",qe,[...t[36]||(t[36]=[e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Participantes del Contrato",-1),e("p",{class:"text-gray-500 text-sm"},"No hay participantes adicionales registrados para este contrato",-1)])]))]}),_:1})]),_:1})]),_:1}),(k=a.contrato.archivos_paths)!=null&&k.length?(n(),f(o(z),{key:0,value:"archivos"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[37]||(t[37]=[l("Archivos del Contrato",-1)])]),_:1}),s(o(R),null,{default:r(()=>[...t[38]||(t[38]=[l("Archivos adjuntos relacionados con el contrato",-1)])]),_:1})]),_:1}),s(o(D),null,{default:r(()=>[e("div",Xe,[(n(!0),c(V,null,E(a.contrato.archivos_paths,(m,g)=>{var p,S;return n(),c("div",{key:g,class:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("div",Je,[e("div",Ke,[s(o(j),{class:"h-5 w-5 text-muted-foreground flex-shrink-0"}),e("div",Qe,[e("p",We,i(((p=a.contrato.archivos_nombres)==null?void 0:p[g])||m.split("/").pop()||"archivo"),1),(S=a.contrato.tipos_archivos)!=null&&S[m]?(n(),c("p",Ye,i(a.contrato.tipos_archivos[m]),1)):d("",!0)])]),e("div",Ze,[s(o(v),{type:"button",variant:"ghost",size:"sm",onClick:dt=>nt(`/storage/${m}`),"aria-label":"Ver archivo"},{default:r(()=>[s(o(Pt),{class:"h-4 w-4 mr-1"}),t[39]||(t[39]=l(" Ver ",-1))]),_:1},8,["onClick"]),s(o(v),{type:"button",variant:"ghost",size:"sm",onClick:dt=>{var B;return o(tt)(m,((B=a.contrato.archivos_nombres)==null?void 0:B[g])||"archivo")},"aria-label":"Descargar archivo"},{default:r(()=>[s(o(X),{class:"h-4 w-4 mr-1"}),t[40]||(t[40]=l(" Descargar ",-1))]),_:1},8,["onClick"])])])])}),128))])]),_:1})]),_:1})]),_:1})):d("",!0),(A=a.contrato.campos_personalizados)!=null&&A.length?(n(),f(o(z),{key:1,value:"campos"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[41]||(t[41]=[l("Campos Adicionales",-1)])]),_:1})]),_:1}),s(o(D),null,{default:r(()=>[e("div",to,[(n(!0),c(V,null,E(a.contrato.campos_personalizados,m=>(n(),c("div",{key:m.campo.id},[e("h4",eo,i(m.campo.nombre),1),e("p",oo,i(m.valor_formateado||m.valor||"-"),1)]))),128))])]),_:1})]),_:1})]),_:1})):d("",!0),s(o(z),{value:"obligaciones",class:"space-y-6 mt-6"},{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(w),null,{default:r(()=>[e("div",ao,[s(o(C),null,{default:r(()=>[...t[42]||(t[42]=[l("Obligaciones del Contrato",-1)])]),_:1}),e("div",so,[h("obligaciones.create")?(n(),f(o(b),{key:0,href:u.route("admin.obligaciones.create",{contrato_id:a.contrato.id})},{default:r(()=>[s(o(v),{size:"sm",variant:"default"},{default:r(()=>[s(o(Z),{class:"h-4 w-4 mr-1"}),t[43]||(t[43]=l(" Nueva Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(o(b),{key:1,href:u.route("admin.obligaciones.index",{contrato_id:a.contrato.id})},{default:r(()=>[s(o(v),{size:"sm",variant:"outline"},{default:r(()=>[s(o(St),{class:"h-4 w-4 mr-1"}),t[44]||(t[44]=l(" Ver Lista ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(o(b),{key:2,href:u.route("admin.contratos.obligaciones.arbol",a.contrato.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"outline"},{default:r(()=>[s(o(Vt),{class:"h-4 w-4 mr-1"}),t[45]||(t[45]=l(" Vista Árbol ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(o(b),{key:3,href:u.route("admin.contratos.obligaciones.timeline",a.contrato.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"outline"},{default:r(()=>[s(o(Et),{class:"h-4 w-4 mr-1"}),t[46]||(t[46]=l(" Timeline ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)])])]),_:1}),s(o(D),null,{default:r(()=>[a.contrato.total_obligaciones&&a.contrato.total_obligaciones>0?(n(),c("div",ro,[e("div",no,[e("div",io,[e("div",lo,i(a.contrato.total_obligaciones),1),t[47]||(t[47]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Total",-1))]),e("div",co,[e("div",mo,i(a.contrato.obligaciones_pendientes),1),t[48]||(t[48]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Pendientes",-1))]),e("div",uo,[e("div",fo,i(a.contrato.obligaciones_cumplidas),1),t[49]||(t[49]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Cumplidas",-1))]),e("div",go,[e("div",vo,i(a.contrato.total_obligaciones>0?Math.round(a.contrato.obligaciones_cumplidas/a.contrato.total_obligaciones*100):0)+"% ",1),t[50]||(t[50]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Progreso",-1))])]),a.contrato.obligaciones&&a.contrato.obligaciones.length>0?(n(),c("div",xo,[t[53]||(t[53]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Obligaciones principales:",-1)),(n(!0),c(V,null,E(a.contrato.obligaciones,m=>(n(),c("div",{key:m.id,class:"border rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("div",bo,[e("div",yo,[e("h5",ho,i(m.titulo),1),m.descripcion?(n(),c("p",ko,i(m.descripcion),1)):d("",!0),e("div",po,[s(o(y),{variant:lt(m.estado),size:"sm"},{default:r(()=>[l(i(m.estado),1)]),_:2},1032,["variant"]),m.fecha_vencimiento?(n(),c("span",_o," Vence: "+i(new Date(m.fecha_vencimiento).toLocaleDateString()),1)):d("",!0),m.responsable?(n(),c("span",wo," Responsable: "+i(m.responsable.name),1)):d("",!0)])]),e("div",Co,[s(o(b),{href:u.route("admin.obligaciones.show",m.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"ghost"},{default:r(()=>[...t[51]||(t[51]=[l("Ver",-1)])]),_:1})]),_:1},8,["href"]),h("obligaciones.edit")?(n(),f(o(b),{key:0,href:u.route("admin.obligaciones.edit",m.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"ghost"},{default:r(()=>[...t[52]||(t[52]=[l("Editar",-1)])]),_:1})]),_:1},8,["href"])):d("",!0)])])]))),128))])):d("",!0),e("div",Do,[s(o(b),{href:u.route("admin.contratos.obligaciones.arbol",a.contrato.id),class:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800"},{default:r(()=>[t[54]||(t[54]=l(" Ver árbol completo de obligaciones ",-1)),s(o(Ft),{class:"h-4 w-4 ml-1"})]),_:1},8,["href"])])])):(n(),c("div",$o,[s(o(j),{class:"h-12 w-12 mx-auto mb-3 text-gray-300"}),t[56]||(t[56]=e("p",null,"No hay obligaciones registradas para este contrato",-1)),t[57]||(t[57]=e("p",{class:"text-sm text-gray-400 mt-1"},"Las obligaciones te ayudan a hacer seguimiento de tareas y compromisos del contrato",-1)),h("obligaciones.create")?(n(),f(o(b),{key:0,href:u.route("admin.obligaciones.create",{contrato_id:a.contrato.id}),class:"mt-3 inline-block"},{default:r(()=>[s(o(v),{size:"sm",variant:"default"},{default:r(()=>[s(o(Z),{class:"h-4 w-4 mr-1"}),t[55]||(t[55]=l(" Crear Primera Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)]))]),_:1})]),_:1})]),_:1})]}),_:1},8,["modelValue"])])])]),_:1}))}});export{Ua as default};
