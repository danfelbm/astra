import{B as U,_ as q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-zyTnkDHX.js";import{d as G,r as R,p as N,i as _,e,f as t,q as J,w as a,g as n,b as v,j as x,v as T,h as i,m as u,t as d,F as g,k as P,n as S,s as h}from"./app-CiYKByDx.js";import{c as K,_ as b}from"./createLucideIcon-vCxVUtgv.js";import{_ as $,a as w,b as k,c as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-HSpsIzMS.js";import{_ as E}from"./CardDescription.vue_vue_type_script_setup_true_lang-8xXpmH2S.js";import{_ as O,a as Q,b as V,c as p,d as W,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-jvC2Wrgk.js";import{_ as y}from"./index-CBfQJzNi.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-gE8KuA2i.js";import{_ as Y,a as Z,b as tt,c as et,d as B}from"./SelectValue.vue_vue_type_script_setup_true_lang-chRhyKDL.js";import{_ as at}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-Bamg5BO7.js";import{R as st}from"./refresh-cw-CdEh3O_m.js";import{S as lt}from"./square-pen-DLCIN_md.js";import{T as it}from"./trash-2-BAlT_ibO.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-S6CgYmJE.js";import"./index-DOxNh0bZ.js";import"./floating-ui.vue-CL8FEkqP.js";import"./x-CXPZGP07.js";import"./index-DGFgBY2S.js";import"./shield-BxAJWss7.js";import"./user-BJw_giDL.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BNFXC0bJ.js";import"./chevron-right-B-W4L8zY.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-93YjiwmB.js";import"./VisuallyHidden-NH1sY0jv.js";import"./index-D3UOLBw5.js";import"./Label.vue_vue_type_script_setup_true_lang-ByqVB3B0.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Bp8Fmgfx.js";import"./index-B6kxqeoX.js";import"./circle-alert-CPGGKiyu.js";import"./map-pin-cgEzkzwb.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-B5ApEFHj.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-5W_05qNw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-p_9iSoEq.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BrHz5HWe.js";import"./tag-BIqORR1G.js";import"./users-CtprPBb4.js";import"./target-CwFtMMUY.js";import"./vote-AckLOrAG.js";import"./folder-open-Ctjg_yvM.js";import"./send-Cyu4d_86.js";import"./file-text-BHhvAW8T.js";import"./briefcase-DRMnjkxD.js";import"./calendar-BPpWwgkz.js";import"./megaphone-KHZWJGl2.js";import"./user-check-BFUYGW0M.js";import"./clipboard-list-DH5kx6Km.js";import"./mail-DSsAb63T.js";import"./message-square-BRPAb3uw.js";import"./external-link-B7hKJaE7.js";import"./panel-left-BnECy0Gx.js";import"./check-Bb0tOxrP.js";import"./index-B0BlEbJl.js";import"./DialogTrigger-FHMtCVzU.js";import"./useKbd-kRIii9yh.js";import"./chevron-left-CWOfkp9C.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-KozJrtAF.js";import"./es-BDPlFIsO.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-D3ca6gHO.js";import"./loader-circle-BlmxD1f_.js";import"./plus-AM__aCJH.js";import"./search-LNyKfkCQ.js";import"./filter-Dyyx6ih_.js";import"./history-J-Wx4LAg.js";import"./save-DGYi4BSG.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=K("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),rt={class:"flex h-full flex-1 flex-col gap-4 p-4"},ot={class:"flex items-center justify-between"},ut={class:"flex items-center justify-between"},dt={class:"flex items-center gap-2"},mt={class:"flex items-center justify-between"},ft={class:"text-lg font-semibold"},ct={class:"text-sm text-muted-foreground"},pt={class:"grid gap-4 md:grid-cols-3"},_t={class:"mt-4"},vt={class:"relative overflow-x-auto"},xt={class:"font-medium"},gt={key:0,class:"text-xs text-muted-foreground"},bt={class:"text-sm"},yt={class:"text-sm"},Tt={class:"text-sm text-muted-foreground"},ht={class:"flex items-center justify-end gap-2"},$t={key:0,class:"mt-4 flex justify-center"},wt={class:"flex gap-1"},kt=["innerHTML"],Ee=G({__name:"Index",props:{tenants:{},filters:{},filterFieldsConfig:{},currentTenant:{}},setup(r){const L=r,M=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tenants",href:"/admin/tenants"}],m=R({search:L.filters.search||"",active:L.filters.active||"all"}),A=()=>{const o={search:m.value.search};m.value.active!=="all"&&(o.active=m.value.active),h.get("/admin/tenants",o,{preserveState:!0,preserveScroll:!0})};let j;N(()=>m.value.search,o=>{clearTimeout(j),j=setTimeout(()=>{A()},500)}),N(()=>m.value.active,()=>{A()});const z=o=>{confirm(`¿Estás seguro de eliminar el tenant "${o.name}"?`)&&h.delete(`/admin/tenants/${o.id}`)},D=o=>{h.post("/admin/tenants/switch",{tenant_id:o})},F=o=>{switch(o){case"basic":return"default";case"professional":return"secondary";case"enterprise":return"destructive";default:return"default"}},I=o=>{switch(o){case"basic":return"Básico";case"professional":return"Profesional";case"enterprise":return"Empresarial";default:return o}};return(o,s)=>(u(),_(g,null,[e(t(J),{title:"Gestión de Tenants"}),e(q,{breadcrumbs:M},{default:a(()=>[n("div",rt,[n("div",ot,[s[3]||(s[3]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Gestión de Tenants"),n("p",{class:"text-muted-foreground"}," Administra las organizaciones del sistema multi-tenant ")],-1)),e(t(T),{href:o.route("admin.tenants.create")},{default:a(()=>[e(t(b),null,{default:a(()=>[e(t(nt),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=i(" Nuevo Tenant ",-1))]),_:1})]),_:1},8,["href"])]),r.currentTenant?(u(),v(t($),{key:0},{default:a(()=>[e(t(w),{class:"pb-3"},{default:a(()=>[n("div",ut,[n("div",dt,[e(t(U),{class:"h-5 w-5 text-muted-foreground"}),e(t(k),{class:"text-sm font-medium"},{default:a(()=>[...s[4]||(s[4]=[i("Tenant Actual",-1)])]),_:1})]),e(t(y),{variant:r.currentTenant.active?"default":"secondary"},{default:a(()=>[i(d(r.currentTenant.active?"Activo":"Inactivo"),1)]),_:1},8,["variant"])])]),_:1}),e(t(C),null,{default:a(()=>[n("div",mt,[n("div",null,[n("p",ft,d(r.currentTenant.name),1),n("p",ct,d(r.currentTenant.subdomain)+".votaciones.test",1)]),e(t(y),{variant:F(r.currentTenant.subscription_plan)},{default:a(()=>[i(d(I(r.currentTenant.subscription_plan)),1)]),_:1},8,["variant"])])]),_:1})]),_:1})):x("",!0),e(t($),null,{default:a(()=>[e(t(w),null,{default:a(()=>[e(t(k),null,{default:a(()=>[...s[5]||(s[5]=[i("Filtros",-1)])]),_:1}),e(t(E),null,{default:a(()=>[...s[6]||(s[6]=[i("Busca y filtra los tenants del sistema",-1)])]),_:1})]),_:1}),e(t(C),null,{default:a(()=>[n("div",pt,[e(t(X),{modelValue:m.value.search,"onUpdate:modelValue":s[0]||(s[0]=l=>m.value.search=l),placeholder:"Buscar por nombre o subdominio...",class:"max-w-sm"},null,8,["modelValue"]),e(t(Y),{modelValue:m.value.active,"onUpdate:modelValue":s[1]||(s[1]=l=>m.value.active=l)},{default:a(()=>[e(t(Z),null,{default:a(()=>[e(t(tt),{placeholder:"Estado"})]),_:1}),e(t(et),null,{default:a(()=>[e(t(B),{value:"all"},{default:a(()=>[...s[7]||(s[7]=[i("Todos",-1)])]),_:1}),e(t(B),{value:"true"},{default:a(()=>[...s[8]||(s[8]=[i("Activos",-1)])]),_:1}),e(t(B),{value:"false"},{default:a(()=>[...s[9]||(s[9]=[i("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),n("div",_t,[e(at,{"filter-fields-config":r.filterFieldsConfig,"base-route":"/admin/tenants"},null,8,["filter-fields-config"])])]),_:1})]),_:1}),e(t($),null,{default:a(()=>[e(t(w),null,{default:a(()=>[e(t(k),null,{default:a(()=>[...s[10]||(s[10]=[i("Lista de Tenants",-1)])]),_:1}),e(t(E),null,{default:a(()=>[i(d(r.tenants.meta.total)+" tenant(s) encontrado(s) ",1)]),_:1})]),_:1}),e(t(C),null,{default:a(()=>[n("div",vt,[e(t(O),null,{default:a(()=>[e(t(Q),null,{default:a(()=>[e(t(V),null,{default:a(()=>[e(t(p),null,{default:a(()=>[...s[11]||(s[11]=[i("ID",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[12]||(s[12]=[i("Nombre",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[13]||(s[13]=[i("Subdominio",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[14]||(s[14]=[i("Plan",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[15]||(s[15]=[i("Estado",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[16]||(s[16]=[i("Usuarios",-1)])]),_:1}),e(t(p),null,{default:a(()=>[...s[17]||(s[17]=[i("Creado",-1)])]),_:1}),e(t(p),{class:"text-right"},{default:a(()=>[...s[18]||(s[18]=[i("Acciones",-1)])]),_:1})]),_:1})]),_:1}),e(t(W),null,{default:a(()=>[(u(!0),_(g,null,P(r.tenants.data,l=>(u(),v(t(V),{key:l.id},{default:a(()=>[e(t(f),{class:"font-medium"},{default:a(()=>[i(d(l.id),1)]),_:2},1024),e(t(f),null,{default:a(()=>{var c;return[n("div",null,[n("p",xt,d(l.name),1),l.id===((c=r.currentTenant)==null?void 0:c.id)?(u(),_("p",gt," (Actual) ")):x("",!0)])]}),_:2},1024),e(t(f),null,{default:a(()=>[n("code",bt,d(l.subdomain),1)]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(y),{variant:F(l.subscription_plan)},{default:a(()=>[i(d(I(l.subscription_plan)),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(y),{variant:l.active?"default":"secondary"},{default:a(()=>[i(d(l.active?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:a(()=>{var c;return[n("span",yt,d(((c=l.limits)==null?void 0:c.max_users)||"∞"),1)]}),_:2},1024),e(t(f),null,{default:a(()=>[n("span",Tt,d(new Date(l.created_at).toLocaleDateString()),1)]),_:2},1024),e(t(f),{class:"text-right"},{default:a(()=>{var c;return[n("div",ht,[l.id!==((c=r.currentTenant)==null?void 0:c.id)?(u(),v(t(b),{key:0,onClick:H=>D(l.id),size:"sm",variant:"outline",title:"Cambiar a este tenant"},{default:a(()=>[e(t(st),{class:"h-4 w-4"})]),_:1},8,["onClick"])):x("",!0),e(t(T),{href:`/admin/tenants/${l.id}/edit`},{default:a(()=>[e(t(b),{size:"sm",variant:"outline"},{default:a(()=>[e(t(lt),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),e(t(b),{onClick:H=>z(l),size:"sm",variant:"outline",disabled:l.id===1,title:"Eliminar tenant"},{default:a(()=>[e(t(it),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])])]}),_:2},1024)]),_:2},1024))),128)),r.tenants.data.length===0?(u(),v(t(V),{key:0},{default:a(()=>[e(t(f),{colspan:"8",class:"text-center text-muted-foreground"},{default:a(()=>[...s[19]||(s[19]=[i(" No se encontraron tenants ",-1)])]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1})]),r.tenants.links.length>3?(u(),_("div",$t,[n("nav",wt,[(u(!0),_(g,null,P(r.tenants.links,l=>(u(),_(g,{key:l.label},[l.url?(u(),v(t(T),{key:0,href:l.url,class:S(["px-3 py-1 text-sm rounded-md",l.active?"bg-primary text-primary-foreground":"hover:bg-muted"]),innerHTML:l.label},null,8,["href","class","innerHTML"])):(u(),_("span",{key:1,class:S(["px-3 py-1 text-sm rounded-md text-muted-foreground"]),innerHTML:l.label},null,8,kt))],64))),128))])])):x("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{Ee as default};
