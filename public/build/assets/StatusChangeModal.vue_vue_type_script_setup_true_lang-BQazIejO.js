import{d as w,r as $,p as y,c as g,b as f,f as e,w as o,e as t,g as d,x as k,n as C,h as i,t as p,l as E,j as N,m as b}from"./app-DHSrnHfp.js";import{_ as V,a as B,b as T,c as M,d as A,e as L,f as z,g as D}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BbYuKIX7.js";import{_ as R}from"./Textarea.vue_vue_type_script_setup_true_lang-W55y0TB8.js";import{_ as S}from"./Label.vue_vue_type_script_setup_true_lang-B85kH-Bv.js";import{C as U}from"./circle-x-_YYm_YZ3.js";import{C as j}from"./circle-alert-CJTy1Swl.js";import{C as q}from"./clock-C-Ce3F_a.js";import{C as O}from"./circle-check-big-oU6InZQz.js";import{L as P}from"./loader-circle-DSnlHN6u.js";const X={class:"flex gap-3"},F={class:"flex-1"},G={class:"py-4"},ae=w({__name:"StatusChangeModal",props:{open:{type:Boolean,default:!1},entregableNombre:{},estadoActual:{},nuevoEstado:{},loading:{type:Boolean,default:!1}},emits:["update:open","confirm","cancel"],setup(n,{emit:v}){const l=n,r=v,c=$("");y(()=>l.open,m=>{m||(c.value="")});const s=g(()=>({completado:{icon:O,iconClass:"text-green-600",buttonClass:"bg-green-600 hover:bg-green-700 !text-white",title:"¿Marcar como completado?",description:"El entregable se marcará como completado y se registrará la fecha y hora.",confirmText:"Completar"},en_progreso:{icon:q,iconClass:"text-blue-600",buttonClass:"bg-blue-600 hover:bg-blue-700 !text-white",title:"¿Marcar en progreso?",description:"El entregable se marcará como en progreso.",confirmText:"En Progreso"},pendiente:{icon:j,iconClass:"text-yellow-600",buttonClass:"bg-yellow-600 hover:bg-yellow-700 !text-white",title:"¿Reabrir entregable?",description:"El entregable volverá a estado pendiente.",confirmText:"Reabrir"},cancelado:{icon:U,iconClass:"text-red-600",buttonClass:"bg-red-600 hover:bg-red-700 !text-white",title:"¿Cancelar entregable?",description:"El entregable se marcará como cancelado.",confirmText:"Cancelar Entregable"}})[l.nuevoEstado]),x=g(()=>l.entregableNombre?`${s.value.title.replace("?","")}: "${l.entregableNombre}"?`:s.value.title),_=()=>{r("confirm",c.value),l.loading||r("update:open",!1)},h=()=>{r("cancel"),r("update:open",!1)};return(m,a)=>(b(),f(e(V),{open:n.open,"onUpdate:open":a[1]||(a[1]=u=>r("update:open",u))},{default:o(()=>[t(e(B),{class:"sm:max-w-md"},{default:o(()=>[t(e(T),null,{default:o(()=>[d("div",X,[(b(),f(k(s.value.icon),{class:C(["h-5 w-5 mt-0.5 flex-shrink-0",s.value.iconClass]),"aria-hidden":"true"},null,8,["class"])),d("div",F,[t(e(M),null,{default:o(()=>[i(p(x.value),1)]),_:1}),t(e(A),{class:"mt-2"},{default:o(()=>[i(p(s.value.description),1)]),_:1})])])]),_:1}),d("div",G,[t(e(S),{for:"observaciones",class:"text-sm font-medium mb-2 block"},{default:o(()=>[...a[2]||(a[2]=[i(" Observaciones (opcional) ",-1)])]),_:1}),t(e(R),{id:"observaciones",modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=u=>c.value=u),placeholder:"Añade un comentario sobre este cambio de estado...",class:"min-h-[80px] resize-none",disabled:n.loading},null,8,["modelValue","disabled"]),a[3]||(a[3]=d("p",{class:"text-xs text-muted-foreground mt-1"}," Las observaciones quedarán registradas en el historial de cambios. ",-1))]),t(e(L),null,{default:o(()=>[t(e(z),{onClick:h,disabled:n.loading},{default:o(()=>[...a[4]||(a[4]=[i(" Cancelar ",-1)])]),_:1},8,["disabled"]),t(e(D),{onClick:E(_,["prevent"]),class:C(s.value.buttonClass),disabled:n.loading},{default:o(()=>[n.loading?(b(),f(e(P),{key:0,class:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"})):N("",!0),i(" "+p(s.value.confirmText),1)]),_:1},8,["class","disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{ae as _};
