import{d as Q,u as S,r as k,c as X,i as m,m as r,e as s,f as e,q as Z,w as a,g as t,h as l,b as f,j as q,t as p,x as T,J as K,L as W,F as Y}from"./app-CUy8bq-4.js";import{_ as b}from"./createLucideIcon-BVeAo22y.js";import{_ as ee}from"./index-nP7KVplh.js";import{_ as C,a as $,b as z,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-aQWwj-VV.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-KDLmivUK.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-C8Yg27qk.js";import{_ as oe,a as D}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-C2XRmdWA.js";import{_ as te}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D-e5Olcc.js";import{S as h}from"./useFlashMessages-BSGtS98b.js";import{U as se}from"./upload-CZha5Hz_.js";import{X as ae}from"./x-BIc-vpoP.js";import{I}from"./image-De_e_eUu.js";import{T as le}from"./type-DctrUcwp.js";import{U as ie}from"./users-CtZ6ZZ1s.js";import{T as M,a as A}from"./toggle-right-DHvkftbi.js";import{C as F}from"./circle-alert-C27dg7Ep.js";import"./index-Cp4rSUgH.js";import"./VisuallyHidden-W3a4-zje.js";import"./RovingFocusItem-Bg0_Sxp8.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CDO9BPe3.js";import"./check-cYkI6jVy.js";import"./floating-ui.vue-BuhgbMW1.js";import"./utils-CtJjMwls.js";import"./VisuallyHiddenInput-C2CTewFt.js";import"./circle-CJ3J60x1.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BAUdGpDo.js";import"./index-aYAdEGHe.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-FYTrsXKF.js";import"./chevron-right-BN0pcRkC.js";import"./chevrons-up-down-CKHTIWfm.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CqolT--g.js";import"./tag-DkJT6krF.js";import"./target-BgLhoeBV.js";import"./shield-CM4rzlKb.js";import"./vote-CF4lBptY.js";import"./folder-open-Bt9R0Kno.js";import"./send-1hh2Ud6Y.js";import"./file-text-DLYSBMo_.js";import"./briefcase-GIKWN4Jb.js";import"./calendar-t9FerTPa.js";import"./megaphone-BY1r2WR-.js";import"./user-check-C8xKawhf.js";import"./clipboard-list-Cw3QyN8i.js";import"./mail-BMF7AYGX.js";import"./message-square-Bq3xsExI.js";import"./external-link-DoxxZ627.js";import"./panel-left--HMgbIFi.js";import"./index-BqMYO_2s.js";import"./index-B1IwCVKl.js";import"./index-Cibtne3p.js";import"./user-BblbUKaH.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BlrYM9n8.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CLMRNulS.js";import"./map-pin-DnLb6Xc5.js";const re={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},de={class:"grid gap-4 md:grid-cols-1 max-w-4xl"},ne={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},ue={class:"space-y-3"},me={class:"space-y-3"},ce={class:"space-y-4"},fe={class:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-4"},pe={key:0,class:"text-center"},ge={class:"mt-2 text-sm text-muted-foreground"},be={key:1,class:"relative"},xe=["src"],_e={class:"space-y-4"},ve={class:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-muted/50 transition-colors"},ye={class:"flex-1"},we={class:"flex items-center gap-2"},ke={class:"flex items-center space-x-3 p-4 border rounded-lg hover:bg-muted/50 transition-colors"},qe={class:"flex-1"},he={class:"border-t pt-4"},Ce={class:"bg-muted/50 rounded-lg p-4"},je={class:"flex items-center gap-3"},Ee={class:"flex aspect-square size-8 items-center justify-center rounded-md text-sidebar-primary-foreground"},Le=["src"],Ve={key:1,class:"size-5 fill-current text-white dark:text-black",viewBox:"0 0 24 24"},Se={key:0,class:"grid flex-1 text-left text-sm"},Te={class:"mb-0.5 truncate font-semibold leading-none"},$e={class:"flex justify-end pt-4 border-t"},ze={key:1,class:"text-sm text-muted-foreground"},Be={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},De={class:"space-y-3"},Ie={class:"flex items-center justify-between"},Me={class:"space-y-1"},Ae={key:0,class:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg"},Fe={class:"space-y-3"},Ne={class:"space-y-3"},Ue=["disabled"],Pe={key:0,class:"border-t pt-4"},Ge={class:"bg-muted/50 rounded-lg p-4"},Re={class:"flex items-start gap-3"},Oe={class:"flex-1"},Je={class:"font-semibold text-lg mb-2"},He={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Qe={class:"flex justify-end pt-4 border-t"},Xe={key:1,class:"text-sm text-muted-foreground"},Ze={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border border-dashed"},Ke={class:"text-center py-8"},Yo=Q({__name:"Configuracion",props:{configuracion:{},configuracionCandidaturas:{},canEdit:{type:Boolean}},setup(N){const d=N,U=[{title:"Admin",href:"/admin/dashboard"},{title:"Configuración",href:"/admin/configuracion"}],n=S({logo_display:d.configuracion.logo_display,logo_text:d.configuracion.logo_text,logo_file:null,remove_logo:!1}),x=k(!1),_=k(!1),v=k(),y=k(null),w=X(()=>n.remove_logo?null:y.value?y.value:d.configuracion.logo_file?`/storage/${d.configuracion.logo_file}`:null),P=g=>{var E;const u=(E=g.target.files)==null?void 0:E[0];if(u){n.logo_file=u,n.remove_logo=!1;const L=new FileReader;L.onload=H=>{var V;y.value=(V=H.target)==null?void 0:V.result},L.readAsDataURL(u)}},G=()=>{n.logo_file=null,y.value=null,n.remove_logo=!0,v.value&&(v.value.value="")},R=()=>{var g;(g=v.value)==null||g.click()},O=()=>{x.value=!0,n.post(route("admin.configuracion.update"),{forceFormData:!0,onSuccess:()=>{setTimeout(()=>{window.location.reload()},1e3)},onFinish:()=>{x.value=!1}})},i=S({bloqueo_activo:d.configuracionCandidaturas.bloqueo_activo,bloqueo_titulo:d.configuracionCandidaturas.bloqueo_titulo,bloqueo_mensaje:d.configuracionCandidaturas.bloqueo_mensaje}),J=()=>{_.value=!0,i.post(route("admin.configuracion.update.candidaturas"),{onFinish:()=>{_.value=!1}})};return(g,o)=>(r(),m(Y,null,[s(e(Z),{title:"Configuración"}),s(te,{breadcrumbs:U},{default:a(()=>[t("div",re,[o[33]||(o[33]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-3xl font-bold"},"Configuración del Sistema"),t("p",{class:"text-muted-foreground"}," Personaliza la apariencia y comportamiento del sistema ")])],-1)),t("div",de,[t("div",ne,[s(e(C),{class:"border-0 shadow-none"},{default:a(()=>[s(e($),null,{default:a(()=>[s(e(z),{class:"flex items-center gap-2"},{default:a(()=>[s(e(h),{class:"h-5 w-5"}),o[5]||(o[5]=l(" Configuración del Logo ",-1))]),_:1})]),_:1}),s(e(j),{class:"space-y-6"},{default:a(()=>[t("div",ue,[s(e(c),{for:"logo_text",class:"text-base font-medium"},{default:a(()=>[...o[6]||(o[6]=[l("Texto del Logo",-1)])]),_:1}),s(e(B),{id:"logo_text",modelValue:e(n).logo_text,"onUpdate:modelValue":o[0]||(o[0]=u=>e(n).logo_text=u),placeholder:"Ingresa el texto que aparecerá junto al logo",maxlength:"50",class:"max-w-md",disabled:!d.canEdit},null,8,["modelValue","disabled"]),o[7]||(o[7]=t("p",{class:"text-sm text-muted-foreground"}," Este texto aparecerá junto al logo cuando esté habilitado (máximo 50 caracteres) ",-1))]),t("div",me,[s(e(c),{class:"text-base font-medium"},{default:a(()=>[...o[8]||(o[8]=[l("Logo Personalizado (Opcional)",-1)])]),_:1}),t("div",ce,[t("input",{ref_key:"fileInputRef",ref:v,type:"file",accept:"image/*",class:"hidden",onChange:P},null,544),t("div",fe,[w.value?(r(),m("div",be,[t("img",{src:w.value,alt:"Logo preview",class:"w-16 h-16 object-contain mx-auto rounded"},null,8,xe),d.canEdit?(r(),f(e(b),{key:0,variant:"outline",size:"sm",class:"mt-2 mx-auto block",onClick:G},{default:a(()=>[s(e(ae),{class:"mr-2 h-4 w-4"}),o[12]||(o[12]=l(" Quitar ",-1))]),_:1})):q("",!0)])):(r(),m("div",pe,[s(e(se),{class:"mx-auto h-8 w-8 text-muted-foreground"}),t("p",ge,[o[10]||(o[10]=l(" Arrastra un archivo aquí o ",-1)),s(e(b),{variant:"link",class:"p-0 h-auto",onClick:R,disabled:!d.canEdit},{default:a(()=>[...o[9]||(o[9]=[l(" selecciona uno ",-1)])]),_:1},8,["disabled"])]),o[11]||(o[11]=t("p",{class:"text-xs text-muted-foreground mt-1"}," PNG, JPG, SVG hasta 2MB ",-1))]))]),o[13]||(o[13]=t("p",{class:"text-sm text-muted-foreground"}," Si no subes un logo personalizado, se usará el logo por defecto del sistema ",-1))])]),t("div",_e,[s(e(c),{class:"text-base font-medium"},{default:a(()=>[...o[14]||(o[14]=[l("Visualización en el Sidebar",-1)])]),_:1}),s(e(oe),{modelValue:e(n).logo_display,"onUpdate:modelValue":o[1]||(o[1]=u=>e(n).logo_display=u),class:"space-y-3",disabled:!d.canEdit},{default:a(()=>[t("div",ve,[s(e(D),{value:"logo_text",id:"logo_text"}),t("div",ye,[s(e(c),{for:"logo_text",class:"flex items-center gap-2 font-medium cursor-pointer"},{default:a(()=>[t("div",we,[s(e(I),{class:"h-4 w-4"}),s(e(le),{class:"h-4 w-4"})]),o[15]||(o[15]=l(" Logo + Texto ",-1))]),_:1}),o[16]||(o[16]=t("p",{class:"text-sm text-muted-foreground mt-1"}," Muestra el logo junto con el texto personalizado ",-1))])]),t("div",ke,[s(e(D),{value:"logo_only",id:"logo_only"}),t("div",qe,[s(e(c),{for:"logo_only",class:"flex items-center gap-2 font-medium cursor-pointer"},{default:a(()=>[s(e(I),{class:"h-4 w-4"}),o[17]||(o[17]=l(" Solo Logo ",-1))]),_:1}),o[18]||(o[18]=t("p",{class:"text-sm text-muted-foreground mt-1"}," Muestra únicamente el logo, sin texto ",-1))])])]),_:1},8,["modelValue","disabled"])]),t("div",he,[s(e(c),{class:"text-base font-medium mb-3 block"},{default:a(()=>[...o[19]||(o[19]=[l("Vista Previa",-1)])]),_:1}),t("div",Ce,[t("div",je,[t("div",Ee,[w.value?(r(),m("img",{key:0,src:w.value,alt:"Logo",class:"object-contain"},null,8,Le)):(r(),m("svg",Ve,[...o[20]||(o[20]=[t("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"},null,-1)])]))]),e(n).logo_display==="logo_text"?(r(),m("div",Se,[t("span",Te,p(e(n).logo_text),1)])):q("",!0)])])]),t("div",$e,[d.canEdit?(r(),f(e(b),{key:0,onClick:O,disabled:x.value||!e(n).isDirty,class:"min-w-32"},{default:a(()=>[s(e(h),{class:"mr-2 h-4 w-4"}),l(" "+p(x.value?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])):(r(),m("div",ze," No tienes permisos para editar la configuración "))])]),_:1})]),_:1})]),t("div",Be,[s(e(C),{class:"border-0 shadow-none"},{default:a(()=>[s(e($),null,{default:a(()=>[s(e(z),{class:"flex items-center gap-2"},{default:a(()=>[s(e(ie),{class:"h-5 w-5"}),o[21]||(o[21]=l(" Control de Candidaturas ",-1))]),_:1})]),_:1}),s(e(j),{class:"space-y-6"},{default:a(()=>[t("div",De,[t("div",Ie,[t("div",Me,[s(e(c),{class:"text-base font-medium"},{default:a(()=>[...o[22]||(o[22]=[l("Bloqueo de Candidaturas",-1)])]),_:1}),o[23]||(o[23]=t("p",{class:"text-sm text-muted-foreground"}," Cuando está activo, los usuarios no podrán crear nuevas candidaturas ni editar las que están en estado borrador ",-1))]),d.canEdit?(r(),f(e(b),{key:0,onClick:o[2]||(o[2]=u=>e(i).bloqueo_activo=!e(i).bloqueo_activo),variant:e(i).bloqueo_activo?"default":"outline",size:"sm",class:"min-w-24"},{default:a(()=>[(r(),f(T(e(i).bloqueo_activo?e(M):e(A)),{class:"mr-2 h-4 w-4"})),l(" "+p(e(i).bloqueo_activo?"Activo":"Inactivo"),1)]),_:1},8,["variant"])):(r(),f(e(ee),{key:1,variant:e(i).bloqueo_activo?"default":"secondary"},{default:a(()=>[(r(),f(T(e(i).bloqueo_activo?e(M):e(A)),{class:"mr-2 h-4 w-4"})),l(" "+p(e(i).bloqueo_activo?"Activo":"Inactivo"),1)]),_:1},8,["variant"]))]),e(i).bloqueo_activo?(r(),m("div",Ae,[s(e(F),{class:"h-5 w-5 text-yellow-600"}),o[24]||(o[24]=t("span",{class:"text-sm text-yellow-700 dark:text-yellow-400"}," El sistema de candidaturas está bloqueado. Los usuarios verán el mensaje configurado abajo. ",-1))])):q("",!0)]),t("div",Fe,[s(e(c),{for:"bloqueo_titulo",class:"text-base font-medium"},{default:a(()=>[...o[25]||(o[25]=[l(" Título del Mensaje de Bloqueo ",-1)])]),_:1}),s(e(B),{id:"bloqueo_titulo",modelValue:e(i).bloqueo_titulo,"onUpdate:modelValue":o[3]||(o[3]=u=>e(i).bloqueo_titulo=u),placeholder:"Ej: Sistema de Candidaturas Temporalmente Cerrado",maxlength:"255",class:"max-w-full",disabled:!d.canEdit},null,8,["modelValue","disabled"]),o[26]||(o[26]=t("p",{class:"text-sm text-muted-foreground"}," Este título se mostrará cuando los usuarios intenten crear o editar candidaturas ",-1))]),t("div",Ne,[s(e(c),{for:"bloqueo_mensaje",class:"text-base font-medium"},{default:a(()=>[...o[27]||(o[27]=[l(" Mensaje Detallado ",-1)])]),_:1}),K(t("textarea",{id:"bloqueo_mensaje","onUpdate:modelValue":o[4]||(o[4]=u=>e(i).bloqueo_mensaje=u),placeholder:"Ingresa el mensaje que verán los usuarios...",maxlength:"1000",rows:"4",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:!d.canEdit},null,8,Ue),[[W,e(i).bloqueo_mensaje]]),o[28]||(o[28]=t("p",{class:"text-sm text-muted-foreground"}," Explica por qué el sistema está bloqueado y cuándo estará disponible (máximo 1000 caracteres) ",-1))]),e(i).bloqueo_activo?(r(),m("div",Pe,[s(e(c),{class:"text-base font-medium mb-3 block"},{default:a(()=>[...o[29]||(o[29]=[l("Vista Previa del Mensaje",-1)])]),_:1}),t("div",Ge,[t("div",Re,[s(e(F),{class:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-0.5"}),t("div",Oe,[t("h3",Je,p(e(i).bloqueo_titulo||"Sin título"),1),t("p",He,p(e(i).bloqueo_mensaje||"Sin mensaje"),1)])])])])):q("",!0),o[30]||(o[30]=t("div",{class:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4"},[t("h4",{class:"font-medium text-sm mb-2 text-blue-800 dark:text-blue-200"}," Excepciones al Bloqueo: "),t("ul",{class:"space-y-1 text-sm text-blue-700 dark:text-blue-300"},[t("li",{class:"flex items-start gap-2"},[t("span",{class:"text-blue-500 mt-0.5"},"•"),t("span",null,"Las candidaturas en estado PENDIENTE, APROBADO o RECHAZADO no se ven afectadas")]),t("li",{class:"flex items-start gap-2"},[t("span",{class:"text-blue-500 mt-0.5"},"•"),t("span",null,'Las candidaturas marcadas con "subsanar = 1" pueden editarse aunque esté el bloqueo activo')]),t("li",{class:"flex items-start gap-2"},[t("span",{class:"text-blue-500 mt-0.5"},"•"),t("span",null,"Los administradores pueden marcar candidaturas individuales para subsanación desde el panel administrativo")])])],-1)),t("div",Qe,[d.canEdit?(r(),f(e(b),{key:0,onClick:J,disabled:_.value||!e(i).isDirty,class:"min-w-32"},{default:a(()=>[s(e(h),{class:"mr-2 h-4 w-4"}),l(" "+p(_.value?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])):(r(),m("div",Xe," No tienes permisos para editar la configuración "))])]),_:1})]),_:1})]),t("div",Ze,[s(e(C),{class:"border-0 shadow-none"},{default:a(()=>[s(e(j),{class:"pt-6"},{default:a(()=>[t("div",Ke,[s(e(h),{class:"mx-auto h-12 w-12 text-muted-foreground/50"}),o[31]||(o[31]=t("h3",{class:"mt-4 text-lg font-medium text-muted-foreground"},"Más opciones próximamente",-1)),o[32]||(o[32]=t("p",{class:"text-sm text-muted-foreground mt-2"}," Esta sección se expandirá con más opciones de configuración en futuras actualizaciones. ",-1))])]),_:1})]),_:1})])])])]),_:1})],64))}});export{Yo as default};
