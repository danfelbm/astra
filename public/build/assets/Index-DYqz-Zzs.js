import{d as M,k,j as _,o as i,e as s,b as t,f as o,u as e,m as H,P as x,g as n,a as v,i as p,R as K,t as u,F as w,r as P,n as W,W as E}from"./app-Cek8aP6k.js";import{f as q,g as G,h as I,i as O,j as y,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DwDg25c0.js";import{_ as h}from"./createLucideIcon-DuI2DrCA.js";import{_ as R,a as T,b as V,c as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-3LTNVSDv.js";import{_ as J}from"./CardDescription.vue_vue_type_script_setup_true_lang-cy5wB9LS.js";import{_ as X,a as Y,b,c as f,d as Z,e as d}from"./TableHeader.vue_vue_type_script_setup_true_lang-QYjAGM7q.js";import{_ as C}from"./index-BAQRLgBF.js";import{a as ee}from"./Label.vue_vue_type_script_setup_true_lang-CsBkOf58.js";import{_ as te}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-Cbd10Ek4.js";import{P as se}from"./plus-CDZJPo__.js";import{U as le}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C7a0PwBQ.js";import{E as ae}from"./ellipsis-9ma3LWdf.js";import{E as re}from"./eye-CYU2Cg50.js";import{S as ne}from"./square-pen--etRJ9n1.js";import{T as oe}from"./trash-2-DRVcyDup.js";import"./index-DTr9lscB.js";import"./check-NWA7xPga.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BmEvmKAm.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-pt25EWWT.js";import"./VisuallyHidden-Cd3OMfy1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BvLpt0Xu.js";import"./index-VwN8agGc.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-BoIzEZWP.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-C7Mvg76u.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-DWIqcD1y.js";import"./loader-circle-q_xFPKrn.js";import"./search-KnqzzlxU.js";import"./history--Er8RBh-.js";import"./save-pG1Y7cLP.js";const ie={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ue={class:"flex items-center justify-between"},de={class:"flex gap-4"},fe={class:"flex-1"},me={key:0},_e={class:"flex items-center gap-2"},pe={class:"font-semibold"},ce={class:"text-xs text-muted-foreground"},ge={class:"text-sm text-muted-foreground max-w-xs truncate"},xe={class:"flex items-center gap-1"},ve={class:"text-sm"},he={key:0,class:"flex items-center justify-center space-x-2 mt-6"},$e={class:"flex gap-1"},Ze=M({__name:"Index",props:{roles:{},segments:{},filters:{},filterFieldsConfig:{},availablePermissions:{}},setup(B){const m=B,D=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"}],$=k(m.filters.search||""),c=k(!1),g=a=>["super_admin","admin","manager","user","end_customer"].includes(a.name),N=a=>!a||a.length===0?"Sin permisos":a.includes("*")?"Todos los permisos":`${a.length} permisos`,U=a=>!a||a.length===0?"Sin usuarios":`${a.length} usuario${a.length!==1?"s":""}`,j=a=>!a||a.length===0?"Sin segmentos":`${a.length} segmento${a.length!==1?"s":""}`,S=()=>{E.get("/admin/roles",{search:$.value},{preserveState:!0,preserveScroll:!0})},z=a=>{confirm(`¿Estás seguro de eliminar el rol "${a.display_name}"?`)&&E.delete(`/admin/roles/${a.id}`)},A=a=>!g(a),L=a=>!g(a)&&(!a.users||a.users.length===0);return(a,l)=>(i(),_(Q,{breadcrumbs:D},{default:s(()=>[t(e(H),{title:"Roles y Permisos"}),o("div",ie,[o("div",ue,[l[3]||(l[3]=o("div",null,[o("h2",{class:"text-2xl font-bold tracking-tight"},"Roles y Permisos"),o("p",{class:"text-muted-foreground"}," Gestiona los roles y permisos del sistema ")],-1)),t(e(x),{href:a.route("admin.roles.create")},{default:s(()=>[t(e(h),null,{default:s(()=>[t(e(se),{class:"mr-2 h-4 w-4"}),l[2]||(l[2]=n(" Nuevo Rol "))]),_:1})]),_:1},8,["href"])]),t(e(R),null,{default:s(()=>[t(e(T),null,{default:s(()=>[t(e(V),{class:"text-base"},{default:s(()=>l[4]||(l[4]=[n("Filtros")])),_:1})]),_:1}),t(e(F),{class:"space-y-4"},{default:s(()=>[o("div",de,[o("div",fe,[t(e(ee),{modelValue:$.value,"onUpdate:modelValue":l[0]||(l[0]=r=>$.value=r),placeholder:"Buscar por nombre o descripción...",onKeyup:K(S,["enter"])},null,8,["modelValue"])]),t(e(h),{onClick:S,variant:"secondary"},{default:s(()=>l[5]||(l[5]=[n(" Buscar ")])),_:1}),t(e(h),{onClick:l[1]||(l[1]=r=>c.value=!c.value),variant:"outline"},{default:s(()=>[n(u(c.value?"Ocultar":"Mostrar")+" Filtros Avanzados ",1)]),_:1})]),c.value?(i(),v("div",me,[t(te,{fieldsConfig:a.filterFieldsConfig,baseUrl:"/admin/roles"},null,8,["fieldsConfig"])])):p("",!0)]),_:1})]),_:1}),t(e(R),null,{default:s(()=>[t(e(T),null,{default:s(()=>[t(e(V),null,{default:s(()=>l[6]||(l[6]=[n("Roles del Sistema")])),_:1}),t(e(J),null,{default:s(()=>[n(" Total de "+u(m.roles.total)+" roles registrados ",1)]),_:1})]),_:1}),t(e(F),null,{default:s(()=>[t(e(X),null,{default:s(()=>[t(e(Y),null,{default:s(()=>[t(e(b),null,{default:s(()=>[t(e(f),null,{default:s(()=>l[7]||(l[7]=[n("Rol")])),_:1}),t(e(f),null,{default:s(()=>l[8]||(l[8]=[n("Descripción")])),_:1}),t(e(f),null,{default:s(()=>l[9]||(l[9]=[n("Tipo")])),_:1}),t(e(f),null,{default:s(()=>l[10]||(l[10]=[n("Permisos")])),_:1}),t(e(f),null,{default:s(()=>l[11]||(l[11]=[n("Usuarios")])),_:1}),t(e(f),null,{default:s(()=>l[12]||(l[12]=[n("Segmentos")])),_:1}),t(e(f),{class:"text-right"},{default:s(()=>l[13]||(l[13]=[n("Acciones")])),_:1})]),_:1})]),_:1}),t(e(Z),null,{default:s(()=>[(i(!0),v(w,null,P(m.roles.data,r=>(i(),_(e(b),{key:r.id},{default:s(()=>[t(e(d),{class:"font-medium"},{default:s(()=>[o("div",_e,[t(e(q),{class:"h-4 w-4 text-muted-foreground"}),o("div",null,[o("p",pe,u(r.display_name),1),o("p",ce,u(r.name),1)])])]),_:2},1024),t(e(d),null,{default:s(()=>[o("p",ge,u(r.description||"Sin descripción"),1)]),_:2},1024),t(e(d),null,{default:s(()=>[t(e(C),{variant:g(r)?"default":"secondary"},{default:s(()=>[n(u(g(r)?"Sistema":"Personalizado"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(d),null,{default:s(()=>[t(e(C),{variant:"outline"},{default:s(()=>[n(u(N(r.permissions)),1)]),_:2},1024)]),_:2},1024),t(e(d),null,{default:s(()=>[o("div",xe,[t(e(le),{class:"h-4 w-4 text-muted-foreground"}),o("span",ve,u(U(r.users)),1)])]),_:2},1024),t(e(d),null,{default:s(()=>[t(e(C),{variant:"ghost"},{default:s(()=>[n(u(j(r.segments)),1)]),_:2},1024)]),_:2},1024),t(e(d),{class:"text-right"},{default:s(()=>[t(e(G),null,{default:s(()=>[t(e(I),{asChild:""},{default:s(()=>[t(e(h),{variant:"ghost",size:"icon"},{default:s(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(O),{align:"end"},{default:s(()=>[t(e(x),{href:`/admin/roles/${r.id}`},{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(re),{class:"mr-2 h-4 w-4"}),l[14]||(l[14]=n(" Ver Detalles "))]),_:1})]),_:2},1032,["href"]),A(r)?(i(),_(e(x),{key:0,href:`/admin/roles/${r.id}/edit`},{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(ne),{class:"mr-2 h-4 w-4"}),l[15]||(l[15]=n(" Editar "))]),_:1})]),_:2},1032,["href"])):p("",!0),L(r)?(i(),_(e(y),{key:1,onClick:ye=>z(r),class:"text-destructive"},{default:s(()=>[t(e(oe),{class:"mr-2 h-4 w-4"}),l[16]||(l[16]=n(" Eliminar "))]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),m.roles.data.length===0?(i(),_(e(b),{key:0},{default:s(()=>[t(e(d),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:s(()=>l[17]||(l[17]=[n(" No se encontraron roles ")])),_:1})]),_:1})):p("",!0)]),_:1})]),_:1}),m.roles.last_page>1?(i(),v("div",he,[o("nav",$e,[(i(!0),v(w,null,P(m.roles.links,r=>(i(),_(e(x),{key:r.label,href:r.url,class:W(["px-3 py-2 text-sm rounded-md",r.active?"bg-primary text-primary-foreground":"hover:bg-muted",!r.url&&"opacity-50 cursor-not-allowed"]),innerHTML:r.label,disabled:!r.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):p("",!0)]),_:1})]),_:1})])]),_:1}))}});export{Ze as default};
