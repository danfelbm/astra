import{r as z,_ as p,c as v,j as E,a as _,b,a5 as F,u as L,i as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-Co7Gw_Zm.js";import{_ as g}from"./AppLogo.vue_vue_type_script_setup_true_lang-Cspnvc-F.js";import{_ as I}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-Cp5F2Mf6.js";import{d as G,k as O,c as h,a as C,o as l,b as e,u as a,m as R,e as r,f as s,j as u,i as c,n as P,l as y,t as n,g as i,P as k,F as T}from"./app-aD7ckayy.js";import{P as S}from"./plus-CKJrP6bs.js";import{S as w}from"./square-pen-W2DdIdo1.js";import{C as D}from"./clock-BJMiKusA.js";import{C as V}from"./circle-x-DROzSd7q.js";import{C as A}from"./circle-check-big-RYyhg9vk.js";import{M as X}from"./message-square-_VBN9Z5O.js";import{U as B}from"./user-kwRmwSw3.js";import{H as J}from"./history-DekNuTs5.js";import"./Label.vue_vue_type_script_setup_true_lang-C-ININDd.js";import"./index-Dwkw4C9S.js";import"./VisuallyHidden-B5wuTxRJ.js";import"./eye-DsH4-t2l.js";const K={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Q={class:"flex items-center gap-4"},W={class:"flex-1"},Y={class:"text-xl font-semibold mb-1"},Z={class:"text-muted-foreground mb-2"},aa={key:0,class:"flex items-center gap-2"},ea={key:0,class:"text-right"},ta={class:"text-blue-700 dark:text-blue-300"},sa={key:1},ra={class:"grid gap-4 md:grid-cols-3"},da={class:"flex items-center gap-2"},ia={class:"flex items-center gap-2"},oa={class:"flex items-center gap-2"},la={class:"flex items-center gap-2"},na={class:"text-xs text-muted-foreground"},ua={class:"text-xs text-muted-foreground"},ca={class:"flex gap-1"},Sa=G({__name:"Dashboard",props:{candidatura:{},configuracion:{}},setup(M){const o=M,H=[{title:"Dashboard",href:"/dashboard"},{title:"Mi Candidatura",href:"#"}],f=O(!1),m=h(()=>!!o.candidatura),N=h(()=>{if(!o.candidatura)return S;switch(o.candidatura.estado){case"aprobado":return A;case"rechazado":return V;case"pendiente":return D;case"borrador":return w;default:return z}}),j=h(()=>{if(!o.candidatura)return"text-blue-600";switch(o.candidatura.estado){case"aprobado":return"text-green-600";case"rechazado":return"text-red-600";case"pendiente":return"text-blue-600";case"borrador":return"text-yellow-600";default:return"text-gray-600"}}),x=h(()=>{if(!o.candidatura)return{text:"Crear Perfil de Candidatura",href:"/candidaturas/create",icon:S,description:"Completa tu perfil para poder postularte a convocatorias"};if(o.candidatura.puede_editar){let d="Editar Candidatura",t="Completa o actualiza la información de tu candidatura";return o.candidatura.estado==="rechazado"?t="Corrige los aspectos señalados y reenvía tu candidatura":o.candidatura.estado==="aprobado"?(d="Editar Campos Permitidos",t="Solo puedes editar campos marcados como editables. Los cambios requerirán nueva aprobación."):o.candidatura.tiene_datos||(d="Completar Candidatura"),{text:d,href:`/candidaturas/${o.candidatura.id}/edit`,icon:w,description:t}}return null}),q=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(d,t)=>(l(),C(T,null,[e(a(R),{title:"Mi Candidatura"}),e(U,{breadcrumbs:H},{default:r(()=>{var $;return[s("div",K,[t[14]||(t[14]=s("div",{class:"flex items-center justify-between"},[s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Gestiona tu perfil de candidatura para participar en convocatorias ")])],-1)),e(a(p),{class:"border-2"},{default:r(()=>[e(a(v),{class:"p-6"},{default:r(()=>[s("div",Q,[s("div",{class:P([j.value,"p-3 rounded-full bg-opacity-10"])},[(l(),u(y(N.value),{class:"h-8 w-8"}))],2),s("div",W,[s("h3",Y,n(m.value?d.candidatura.estado_label:"Sin Candidatura"),1),s("p",Z,n(m.value?`Versión ${d.candidatura.version} - Actualizada el ${q(d.candidatura.updated_at)}`:"Aún no has creado tu perfil de candidatura"),1),m.value?(l(),C("div",aa,[e(a(E),{class:P(d.candidatura.estado_color)},{default:r(()=>[i(n(d.candidatura.estado_label),1)]),_:1},8,["class"]),d.candidatura.tiene_datos?c("",!0):(l(),u(a(E),{key:0,variant:"outline",class:"bg-yellow-50 text-yellow-700"},{default:r(()=>t[1]||(t[1]=[i(" Incompleto ")])),_:1}))])):c("",!0)]),x.value?(l(),C("div",ea,[e(a(k),{href:x.value.href},{default:r(()=>[e(a(g),null,{default:r(()=>[(l(),u(y(x.value.icon),{class:"mr-2 h-4 w-4"})),i(" "+n(x.value.text),1)]),_:1})]),_:1},8,["href"])])):c("",!0)])]),_:1})]),_:1}),($=d.candidatura)!=null&&$.comentarios_admin?(l(),u(a(p),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:r(()=>[e(a(_),null,{default:r(()=>[e(a(b),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:r(()=>[e(a(X),{class:"h-5 w-5"}),t[2]||(t[2]=i(" Comentarios de la comisión "))]),_:1})]),_:1}),e(a(v),null,{default:r(()=>[s("p",ta,n(d.candidatura.comentarios_admin),1)]),_:1})]),_:1})):c("",!0),m.value&&f.value?(l(),C("div",sa,[e(I,{"candidatura-id":d.candidatura.id,"version-actual":d.candidatura.version},null,8,["candidatura-id","version-actual"])])):c("",!0),s("div",ra,[e(a(p),{class:"h-fit"},{default:r(()=>[e(a(_),{class:"pb-3"},{default:r(()=>[e(a(b),{class:"text-base flex items-center gap-2"},{default:r(()=>[e(a(B),{class:"h-4 w-4"}),t[3]||(t[3]=i(" Estados "))]),_:1})]),_:1}),e(a(v),{class:"space-y-2"},{default:r(()=>[s("div",da,[e(a(w),{class:"h-3 w-3 text-yellow-600"}),t[4]||(t[4]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Borrador:"),i(" Editable")],-1))]),s("div",ia,[e(a(D),{class:"h-3 w-3 text-blue-600"}),t[5]||(t[5]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Pendiente:"),i(" En revisión")],-1))]),s("div",oa,[e(a(A),{class:"h-3 w-3 text-green-600"}),t[6]||(t[6]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Aprobado:"),i(" Listo")],-1))]),s("div",la,[e(a(V),{class:"h-3 w-3 text-red-600"}),t[7]||(t[7]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Rechazado:"),i(" Corregir")],-1))])]),_:1})]),_:1}),e(a(p),{class:"h-fit"},{default:r(()=>[e(a(_),{class:"pb-3"},{default:r(()=>[e(a(b),{class:"text-base flex items-center gap-2"},{default:r(()=>[e(a(z),{class:"h-4 w-4"}),t[8]||(t[8]=i(" Configuración "))]),_:1})]),_:1}),e(a(v),{class:"space-y-2"},{default:r(()=>[s("div",null,[t[9]||(t[9]=s("p",{class:"text-xs font-medium"},"Campos:",-1)),s("p",na,n(d.configuracion.resumen),1)]),s("div",null,[t[10]||(t[10]=s("p",{class:"text-xs font-medium"},"Versión:",-1)),s("p",ua,"v"+n(d.configuracion.version),1)])]),_:1})]),_:1}),m.value?(l(),u(a(p),{key:0,class:"h-fit"},{default:r(()=>[e(a(_),{class:"pb-3"},{default:r(()=>[e(a(b),{class:"text-base"},{default:r(()=>t[11]||(t[11]=[i("Acciones")])),_:1})]),_:1}),e(a(v),{class:"space-y-2"},{default:r(()=>[e(a(g),{onClick:t[0]||(t[0]=fa=>f.value=!f.value),variant:"outline",class:"w-full"},{default:r(()=>[e(a(J),{class:"mr-2 h-4 w-4"}),i(" "+n(f.value?"Ocultar":"Mostrar")+" Historial ",1),(l(),u(y(f.value?a(F):a(L)),{class:"ml-auto h-4 w-4"}))]),_:1}),s("div",ca,[e(a(k),{href:`/candidaturas/${d.candidatura.id}`},{default:r(()=>[e(a(g),{variant:"outline",size:"sm"},{default:r(()=>[e(a(B),{class:"mr-1 h-3 w-3"}),t[12]||(t[12]=i(" Ver "))]),_:1})]),_:1},8,["href"]),d.candidatura.puede_editar?(l(),u(a(k),{key:0,href:`/candidaturas/${d.candidatura.id}/edit`},{default:r(()=>[e(a(g),{variant:"outline",size:"sm"},{default:r(()=>[e(a(w),{class:"mr-1 h-3 w-3"}),t[13]||(t[13]=i(" Editar "))]),_:1})]),_:1},8,["href"])):c("",!0)])]),_:1})]),_:1})):c("",!0)])])]}),_:1})],64))}});export{Sa as default};
