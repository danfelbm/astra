import{d as ue,a as c,o as n,b as a,i as p,u as o,e as l,g as d,t as u,F as k,r as S,j as y,c as w,C as ye,k as x,w as ae,p as he,m as Ve,f as r,aa as ke,l as $e,n as te,W as C}from"./app-70T9gurS.js";import{_ as we}from"./index-DV2AU7KQ.js";import{_ as g}from"./createLucideIcon-D2UC7njQ.js";import{_ as F,c as D,a as N,b as P}from"./_plugin-vue_export-helper-D_KSvFQh.js";import{_ as Ce}from"./Checkbox.vue_vue_type_script_setup_true_lang-BV2IAP6H.js";import{_ as b,a as se}from"./Label.vue_vue_type_script_setup_true_lang-DzMdd1yJ.js";import{_ as T,a as q,b as L,c as H,d as M}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B5VhlVM4.js";import{_ as Se,a as Ee,b as Z,c as X}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-CuA_BwLO.js";import{_ as le}from"./Textarea.vue_vue_type_script_setup_true_lang-CDfGxXfA.js";import{_ as J}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-BlmfyKnR.js";import{_ as Ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-BAp8z8y4.js";import{L as je,a as ze,_ as Fe}from"./DynamicFormBuilder.vue_vue_type_script_setup_true_lang-Ln7Ws5Oy.js";import{U as ie}from"./upload-DyPWhHF1.js";import{P as re}from"./plus-I7yu_h51.js";import{H as ne}from"./history-CGdEsaMd.js";import{T as De}from"./trash-2-bKnjA2_V.js";import{C as Ue}from"./circle-x-C7cT44x5.js";import{C as Ie}from"./circle-check-big-BuXQXUG4.js";import{C as de}from"./clock-Dz4c3xg-.js";import"./index-YjrGdPjY.js";import"./RovingFocusItem-qz6ZxJn4.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C2udkL0y.js";import"./index-C1ciIYZH.js";import"./grip-vertical-GjWsn_Yz.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-Bzr0-Ggc.js";import"./eye-0eCXpnCf.js";import"./git-branch-eHgYHzqP.js";const Be={key:0,class:"text-red-500"},Ne={key:0,class:"text-sm text-destructive mt-1"},Pe={key:1,class:"text-xs text-muted-foreground mt-1"},Te=ue({__name:"TimezoneSelector",props:{modelValue:{},disabled:{type:Boolean,default:!1},label:{default:"Zona Horaria"},placeholder:{default:"Seleccionar zona horaria"},description:{default:"Las fechas de apertura y cierre se aplicar√°n seg√∫n esta zona horaria"},required:{type:Boolean,default:!1},error:{}},emits:["update:modelValue"],setup(K,{emit:f}){const m=f,G=v=>{m("update:modelValue",v)};return(v,O)=>(n(),c("div",null,[a(o(b),null,{default:l(()=>[d(u(v.label)+" ",1),v.required?(n(),c("span",Be,"*")):p("",!0)]),_:1}),a(o(T),{"model-value":v.modelValue,"onUpdate:modelValue":G,disabled:v.disabled},{default:l(()=>[a(o(q),null,{default:l(()=>[a(o(L),{placeholder:v.placeholder},null,8,["placeholder"])]),_:1}),a(o(H),null,{default:l(()=>[(n(!0),c(k,null,S(o(je),s=>(n(),y(o(M),{key:s.value,value:s.value},{default:l(()=>[d(u(s.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),v.error?(n(),c("p",Ne,u(v.error),1)):v.description?(n(),c("p",Pe,u(v.description),1)):p("",!0)]))}}),qe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Le={class:"flex items-center justify-between"},He={class:"text-3xl font-bold"},Me={class:"text-muted-foreground"},Ge={class:"relative min-h-[70vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},Oe={class:"grid gap-6 md:grid-cols-2"},Re={class:"space-y-4"},We={key:0,class:"text-sm text-destructive mt-1"},Ze={key:0,class:"text-sm text-destructive mt-1"},Xe={key:0,class:"text-sm text-destructive mt-1"},Je={class:"space-y-4"},Ke={key:0,class:"text-sm text-destructive mt-1"},Qe={key:0,class:"text-sm text-destructive mt-1"},Ye={key:1,class:"text-sm text-destructive mt-1"},eo={class:"flex items-center space-x-2"},oo={key:0,class:"space-y-2"},ao={class:"flex justify-between"},to={class:"flex gap-2"},so={class:"flex justify-between"},lo={class:"flex gap-2"},io={class:"space-y-4"},ro={class:"space-y-2"},no={class:"flex gap-4"},uo={class:"flex-1"},co={class:"flex items-center gap-2"},fo={key:0,class:"text-center py-6 text-muted-foreground"},mo={key:1,class:"space-y-3"},po=["onClick"],vo={class:"flex items-center gap-3"},_o={class:"font-medium text-sm"},go={class:"text-xs text-muted-foreground"},bo={class:"flex items-center gap-2"},xo={key:0,class:"text-xs text-muted-foreground"},yo={key:0},ho={key:1,class:"text-xs text-muted-foreground"},Vo={key:0,class:"text-center py-8 text-muted-foreground"},ko={key:1,class:"space-y-2"},$o={class:"font-medium"},wo={class:"text-sm text-muted-foreground"},Co={class:"flex justify-between"},ea=ue({__name:"Form",props:{categorias:{},votacion:{},cargos:{},periodosElectorales:{},convocatorias:{}},setup(K){var ee;const f=K,m=w(()=>!!f.votacion),G=w(()=>{var i;return m.value&&((i=f.votacion)==null?void 0:i.estado)==="borrador"}),v=[{title:"Admin",href:"/admin/dashboard"},{title:"Votaciones",href:"/admin/votaciones"},{title:m.value?"Editar":"Crear",href:"#"}],O=()=>{if(!f.votacion)return{titulo:"",descripcion:"",categoria_id:"",fecha_inicio:null,fecha_fin:null,estado:"borrador",resultados_publicos:!1,fecha_publicacion_resultados:null,formulario_config:[],timezone:"America/Bogota",territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[]};const i=f.votacion;return{titulo:i.titulo||"",descripcion:i.descripcion||"",categoria_id:i.categoria_id?String(i.categoria_id):"",fecha_inicio:i.fecha_inicio||null,fecha_fin:i.fecha_fin||null,estado:i.estado||"borrador",resultados_publicos:!!i.resultados_publicos,fecha_publicacion_resultados:i.fecha_publicacion_resultados||null,formulario_config:i.formulario_config||[],timezone:i.timezone||"America/Bogota",territorios_ids:i.territorios_ids||[],departamentos_ids:i.departamentos_ids||[],municipios_ids:i.municipios_ids||[],localidades_ids:i.localidades_ids||[]}},s=ye(O()),h=x("basicos"),ce=[{value:"borrador",label:"Borrador"},{value:"activa",label:"Activa"},{value:"finalizada",label:"Finalizada"}],Q=w({get:()=>({territorios_ids:s.territorios_ids||[],departamentos_ids:s.departamentos_ids||[],municipios_ids:s.municipios_ids||[],localidades_ids:s.localidades_ids||[]}),set:i=>{s.territorios_ids=i.territorios_ids,s.departamentos_ids=i.departamentos_ids,s.municipios_ids=i.municipios_ids,s.localidades_ids=i.localidades_ids}}),Y=w(()=>!s.fecha_fin||!s.fecha_inicio?"":s.fecha_fin<=s.fecha_inicio?"La fecha de fin debe ser posterior a la fecha de inicio":""),R=()=>{if(!E.value){h.value="basicos",alert('Por favor completa todos los campos requeridos en la pesta√±a "Datos B√°sicos" antes de crear la votaci√≥n.');return}if(s.formulario_config.length===0){alert("Por favor agrega al menos un campo al formulario antes de crear la votaci√≥n.");return}m.value?s.put(`/admin/votaciones/${f.votacion.id}`,{onError:i=>{const e=Object.values(i)[0];e&&alert(`Error: ${Array.isArray(e)?e[0]:e}`)}}):s.post("/admin/votaciones",{onError:i=>{const e=Object.values(i)[0];e&&alert(`Error: ${Array.isArray(e)?e[0]:e}`)}})},E=w(()=>s.titulo&&s.categoria_id&&s.fecha_inicio&&s.fecha_fin&&s.timezone);w(()=>E.value&&s.formulario_config.length>0);const A=x(null),j=x(""),$=x(((ee=f.votacion)==null?void 0:ee.votantes)||[]),W=x([]),V=x("");x("");const U=x([]),fe=async()=>{var i;if(!(!m.value||!((i=f.votacion)!=null&&i.id)))try{const e=await fetch(`/admin/votaciones/${f.votacion.id}/imports/recent`);if(e.ok){const t=await e.json();U.value=t}}catch(e){console.error("Error loading recent imports:",e)}},me=i=>{C.get(`/admin/imports/${i}`)},pe=()=>{var i;(i=f.votacion)!=null&&i.id&&C.get(`/admin/votaciones/${f.votacion.id}/imports`)},I=i=>{switch(i){case"pending":return{icon:de,label:"Pendiente",class:"text-yellow-600"};case"processing":return{icon:de,label:"Procesando",class:"text-blue-600"};case"completed":return{icon:Ie,label:"Completada",class:"text-green-600"};case"failed":return{icon:Ue,label:"Fallida",class:"text-red-600"}}},ve=i=>new Date(i).toLocaleString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=async()=>{var i;if(!(!m.value||!((i=f.votacion)!=null&&i.id)))try{const t=await(await fetch(`/admin/votaciones/${f.votacion.id}/votantes`)).json();W.value=t.votantes_disponibles||[]}catch(e){console.error("Error loading votantes disponibles:",e)}},_e=()=>{var i;!V.value||!m.value||!((i=f.votacion)!=null&&i.id)||C.post(`/admin/votaciones/${f.votacion.id}/votantes`,{votante_ids:[V.value]},{preserveScroll:!0,onSuccess:()=>{B();const e=W.value.find(t=>t.id.toString()===V.value);e&&$.value.push(e),V.value=""},onError:e=>{console.error("Error adding votante:",e),alert("Error al agregar votante")}})},ge=i=>{var e;!m.value||!((e=f.votacion)!=null&&e.id)||C.delete(`/admin/votaciones/${f.votacion.id}/votantes`,{data:{votante_id:i},preserveScroll:!0,onSuccess:()=>{$.value=$.value.filter(t=>t.id!==i),B()},onError:t=>{console.error("Error removing votante:",t),alert("Error al remover votante")}})},be=i=>{const e=i.target;e.files&&e.files[0]&&(A.value=e.files[0])},z=x(!1),xe=()=>{var e;if(!A.value||!m.value||!((e=f.votacion)!=null&&e.id))return;z.value=!0;const i=new FormData;i.append("csv_file",A.value),i.append("motivo",j.value),C.post(`/admin/votaciones/${f.votacion.id}/importar-votantes`,i,{preserveScroll:!0,onSuccess:t=>{var oe;z.value=!1,A.value=null,j.value="";const _=document.querySelector('input[type="file"]');_&&(_.value=""),B(),(oe=f.votacion)!=null&&oe.id&&C.get(`/admin/votaciones/${f.votacion.id}/edit`,{},{preserveScroll:!0,preserveState:!1,only:["votacion"]})},onError:t=>{z.value=!1,console.error("Error processing CSV:",t);const _=Object.values(t).flat().join(", ");alert(`Error al procesar archivo: ${_}`)}})};return ae(()=>f.votacion,i=>{if(i){const e=O();s.titulo=e.titulo,s.descripcion=e.descripcion,s.categoria_id=e.categoria_id,s.fecha_inicio=e.fecha_inicio,s.fecha_fin=e.fecha_fin,s.estado=e.estado,s.resultados_publicos=e.resultados_publicos,s.fecha_publicacion_resultados=e.fecha_publicacion_resultados,s.formulario_config=e.formulario_config,s.timezone=e.timezone,m.value&&(B(),fe())}},{immediate:!0,deep:!0}),ae(()=>s.resultados_publicos,i=>{console.log("resultados_publicos changed to:",i)},{immediate:!0}),he(()=>{}),(i,e)=>(n(),c(k,null,[a(o(Ve),{title:m.value?"Editar Votaci√≥n":"Nueva Votaci√≥n"},null,8,["title"]),a(Ae,{breadcrumbs:v},{default:l(()=>[r("div",qe,[r("div",Le,[r("div",null,[r("h1",He,u(m.value?"Editar Votaci√≥n":"Nueva Votaci√≥n"),1),r("p",Me,u(m.value?"Modifica los datos de la votaci√≥n":"Crea una nueva votaci√≥n paso a paso"),1)])]),r("div",Ge,[a(o(F),{class:"border-0 shadow-none h-full"},{default:l(()=>[a(o(D),{class:"p-6"},{default:l(()=>[a(o(Se),{modelValue:h.value,"onUpdate:modelValue":e[17]||(e[17]=t=>h.value=t),class:"w-full"},{default:l(()=>[a(o(Ee),{class:"grid w-full grid-cols-3"},{default:l(()=>[a(o(Z),{value:"basicos"},{default:l(()=>e[18]||(e[18]=[r("span",{class:"flex items-center gap-2"},[r("span",{class:"rounded-full bg-primary text-primary-foreground w-5 h-5 text-xs flex items-center justify-center"},"1"),d(" Datos B√°sicos ")],-1)])),_:1}),a(o(Z),{value:"formulario",disabled:!m.value&&!E.value},{default:l(()=>e[19]||(e[19]=[r("span",{class:"flex items-center gap-2"},[r("span",{class:"rounded-full bg-primary text-primary-foreground w-5 h-5 text-xs flex items-center justify-center"},"2"),d(" Formulario ")],-1)])),_:1},8,["disabled"]),a(o(Z),{value:"votantes",disabled:!m.value},{default:l(()=>e[20]||(e[20]=[r("span",{class:"flex items-center gap-2"},[r("span",{class:"rounded-full bg-primary text-primary-foreground w-5 h-5 text-xs flex items-center justify-center"},"3"),d(" Votantes ")],-1)])),_:1},8,["disabled"])]),_:1}),a(o(X),{value:"basicos",class:"space-y-6"},{default:l(()=>[r("div",Oe,[r("div",Re,[r("div",null,[a(o(b),{for:"titulo"},{default:l(()=>e[21]||(e[21]=[d("T√≠tulo *")])),_:1}),a(o(se),{id:"titulo",modelValue:o(s).titulo,"onUpdate:modelValue":e[0]||(e[0]=t=>o(s).titulo=t),placeholder:"Nombre de la votaci√≥n",error:o(s).errors.titulo},null,8,["modelValue","error"]),o(s).errors.titulo?(n(),c("p",We,u(o(s).errors.titulo),1)):p("",!0)]),r("div",null,[a(o(b),{for:"descripcion"},{default:l(()=>e[22]||(e[22]=[d("Descripci√≥n")])),_:1}),a(o(le),{id:"descripcion",modelValue:o(s).descripcion,"onUpdate:modelValue":e[1]||(e[1]=t=>o(s).descripcion=t),placeholder:"Descripci√≥n detallada de la votaci√≥n",rows:"4"},null,8,["modelValue"]),o(s).errors.descripcion?(n(),c("p",Ze,u(o(s).errors.descripcion),1)):p("",!0)]),r("div",null,[a(o(b),{for:"categoria"},{default:l(()=>e[23]||(e[23]=[d("Categor√≠a *")])),_:1}),a(o(T),{modelValue:o(s).categoria_id,"onUpdate:modelValue":e[2]||(e[2]=t=>o(s).categoria_id=t)},{default:l(()=>[a(o(q),null,{default:l(()=>[a(o(L),{placeholder:"Seleccionar categor√≠a"})]),_:1}),a(o(H),null,{default:l(()=>[(n(!0),c(k,null,S(i.categorias,t=>(n(),y(o(M),{key:t.id,value:t.id.toString()},{default:l(()=>[d(u(t.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o(s).errors.categoria_id?(n(),c("p",Xe,u(o(s).errors.categoria_id),1)):p("",!0)]),a(ze,{modelValue:Q.value,"onUpdate:modelValue":e[3]||(e[3]=t=>Q.value=t)},null,8,["modelValue"])]),r("div",Je,[r("div",null,[a(o(b),{for:"fecha_inicio"},{default:l(()=>e[24]||(e[24]=[d("Fecha y Hora de Inicio *")])),_:1}),a(o(J),{modelValue:o(s).fecha_inicio,"onUpdate:modelValue":e[4]||(e[4]=t=>o(s).fecha_inicio=t),placeholder:"Seleccionar fecha y hora de inicio"},null,8,["modelValue"]),o(s).errors.fecha_inicio?(n(),c("p",Ke,u(o(s).errors.fecha_inicio),1)):p("",!0)]),r("div",null,[a(o(b),{for:"fecha_fin"},{default:l(()=>e[25]||(e[25]=[d("Fecha y Hora de Fin *")])),_:1}),a(o(J),{modelValue:o(s).fecha_fin,"onUpdate:modelValue":e[5]||(e[5]=t=>o(s).fecha_fin=t),placeholder:"Seleccionar fecha y hora de fin"},null,8,["modelValue"]),Y.value?(n(),c("p",Qe,u(Y.value),1)):p("",!0),o(s).errors.fecha_fin?(n(),c("p",Ye,u(o(s).errors.fecha_fin),1)):p("",!0)]),r("div",null,[a(o(b),{for:"estado"},{default:l(()=>e[26]||(e[26]=[d("Estado")])),_:1}),a(o(T),{modelValue:o(s).estado,"onUpdate:modelValue":e[6]||(e[6]=t=>o(s).estado=t)},{default:l(()=>[a(o(q),null,{default:l(()=>[a(o(L))]),_:1}),a(o(H),null,{default:l(()=>[(n(),c(k,null,S(ce,t=>a(o(M),{key:t.value,value:t.value},{default:l(()=>[d(u(t.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),a(Te,{modelValue:o(s).timezone,"onUpdate:modelValue":e[7]||(e[7]=t=>o(s).timezone=t),required:"",error:o(s).errors.timezone},null,8,["modelValue","error"]),r("div",eo,[a(o(Ce),{id:"resultados_publicos",checked:o(s).resultados_publicos,"onUpdate:checked":e[8]||(e[8]=t=>o(s).resultados_publicos=t)},null,8,["checked"]),a(o(b),{for:"resultados_publicos"},{default:l(()=>e[27]||(e[27]=[d(" Resultados p√∫blicos ")])),_:1})]),a(ke,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:l(()=>[o(s).resultados_publicos?(n(),c("div",oo,[a(o(b),{for:"fecha_publicacion_resultados"},{default:l(()=>e[28]||(e[28]=[d(" Fecha de publicaci√≥n de resultados (opcional) ")])),_:1}),a(o(J),{id:"fecha_publicacion_resultados",modelValue:o(s).fecha_publicacion_resultados,"onUpdate:modelValue":e[9]||(e[9]=t=>o(s).fecha_publicacion_resultados=t),placeholder:"Dejar vac√≠o para publicar al finalizar la votaci√≥n"},null,8,["modelValue"]),e[29]||(e[29]=r("p",{class:"text-xs text-muted-foreground"}," Si se especifica una fecha, los resultados ser√°n visibles desde esa fecha. Si se deja vac√≠o, los resultados solo ser√°n visibles despu√©s de que termine la votaci√≥n. ",-1))])):p("",!0)]),_:1})])]),r("div",ao,[e[31]||(e[31]=r("div",null,null,-1)),r("div",to,[m.value?(n(),y(o(g),{key:0,onClick:R,disabled:o(s).processing||!E.value,variant:"default"},{default:l(()=>[d(u(o(s).processing?"Actualizando...":"Actualizar Votaci√≥n"),1)]),_:1},8,["disabled"])):p("",!0),a(o(g),{onClick:e[10]||(e[10]=t=>h.value="formulario"),disabled:!E.value,variant:"outline"},{default:l(()=>e[30]||(e[30]=[d(" Siguiente: Configurar Formulario ")])),_:1},8,["disabled"])])])]),_:1}),a(o(X),{value:"formulario",class:"space-y-6"},{default:l(()=>{var t;return[a(Fe,{modelValue:o(s).formulario_config,"onUpdate:modelValue":e[11]||(e[11]=_=>o(s).formulario_config=_),title:"Constructor de Formulario",description:"Agrega los campos que aparecer√°n en la votaci√≥n","show-perfil-candidatura-config":!0,"show-convocatoria-config":!0,cargos:((t=f.cargos)==null?void 0:t.filter(_=>_.es_cargo))||[],"periodos-electorales":f.periodosElectorales||[],convocatorias:f.convocatorias||[],context:"votacion"},null,8,["modelValue","cargos","periodos-electorales","convocatorias"]),r("div",so,[a(o(g),{variant:"outline",onClick:e[12]||(e[12]=_=>h.value="basicos")},{default:l(()=>e[32]||(e[32]=[d(" Anterior ")])),_:1}),r("div",lo,[G.value?(n(),y(o(g),{key:0,variant:"outline",onClick:e[13]||(e[13]=_=>h.value="votantes"),disabled:o(s).formulario_config.length===0},{default:l(()=>e[33]||(e[33]=[d(" Siguiente: Gestionar Votantes ")])),_:1},8,["disabled"])):p("",!0),a(o(g),{onClick:R,disabled:o(s).processing||o(s).formulario_config.length===0},{default:l(()=>[d(u(o(s).processing?"Guardando...":m.value?"Actualizar":"Crear")+" Votaci√≥n ",1)]),_:1},8,["disabled"])])])]}),_:1}),a(o(X),{value:"votantes",class:"space-y-6"},{default:l(()=>[e[46]||(e[46]=r("div",null,[r("h3",{class:"text-lg font-semibold"},"Gesti√≥n de Votantes"),r("p",{class:"text-sm text-muted-foreground"}," Asigna los usuarios que podr√°n participar en esta votaci√≥n ")],-1)),a(o(F),null,{default:l(()=>[a(o(N),null,{default:l(()=>[a(o(P),{class:"flex items-center gap-2"},{default:l(()=>[a(o(ie),{class:"h-5 w-5"}),e[34]||(e[34]=d(" Importar Votantes "))]),_:1})]),_:1}),a(o(D),null,{default:l(()=>[r("div",io,[e[36]||(e[36]=r("p",{class:"text-sm text-muted-foreground"}," Sube un archivo CSV con los datos de los votantes. El archivo debe contener las columnas: nombre, email, documento_identidad, territorio_id, departamento_id, municipio_id ",-1)),e[37]||(e[37]=r("p",{class:"text-sm text-blue-600"},[r("a",{href:"/ejemplo-votantes.csv",download:"",class:"underline"}," üì• Descargar ejemplo de formato CSV ")],-1)),r("div",ro,[a(o(b),{for:"motivo-importacion"},{default:l(()=>e[35]||(e[35]=[d("Motivo de la importaci√≥n")])),_:1}),a(o(le),{id:"motivo-importacion",modelValue:j.value,"onUpdate:modelValue":e[14]||(e[14]=t=>j.value=t),placeholder:"Describe el motivo por el cual se est√°n importando estos votantes...",rows:"3",class:"resize-none"},null,8,["modelValue"])]),a(o(se),{type:"file",accept:".csv",onChange:be}),a(o(g),{variant:"outline",disabled:!A.value||!j.value.trim()||z.value,onClick:xe},{default:l(()=>[a(o(ie),{class:"mr-2 h-4 w-4"}),d(" "+u(z.value?"Procesando...":"Procesar Archivo"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),m.value?(n(),y(o(F),{key:0},{default:l(()=>[a(o(N),null,{default:l(()=>[a(o(P),{class:"flex items-center gap-2"},{default:l(()=>[a(o(re),{class:"h-5 w-5"}),e[38]||(e[38]=d(" Agregar Votante "))]),_:1})]),_:1}),a(o(D),null,{default:l(()=>[r("div",no,[r("div",uo,[a(o(T),{modelValue:V.value,"onUpdate:modelValue":e[15]||(e[15]=t=>V.value=t)},{default:l(()=>[a(o(q),null,{default:l(()=>[a(o(L),{placeholder:"Seleccionar usuario..."})]),_:1}),a(o(H),null,{default:l(()=>[(n(!0),c(k,null,S(W.value,t=>(n(),y(o(M),{key:t.id,value:t.id.toString()},{default:l(()=>[d(u(t.name)+" ("+u(t.email)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),a(o(g),{onClick:_e,disabled:!V.value},{default:l(()=>[a(o(re),{class:"mr-2 h-4 w-4"}),e[39]||(e[39]=d(" Agregar "))]),_:1},8,["disabled"])])]),_:1})]),_:1})):p("",!0),m.value?(n(),y(o(F),{key:1},{default:l(()=>[a(o(N),null,{default:l(()=>[a(o(P),{class:"flex items-center justify-between"},{default:l(()=>[r("span",co,[a(o(ne),{class:"h-5 w-5"}),e[40]||(e[40]=d(" Historial de Importaciones "))]),U.value.length>0?(n(),y(o(g),{key:0,variant:"outline",size:"sm",onClick:pe},{default:l(()=>e[41]||(e[41]=[d(" Ver Todas ")])),_:1})):p("",!0)]),_:1})]),_:1}),a(o(D),null,{default:l(()=>[U.value.length===0?(n(),c("div",fo,[a(o(ne),{class:"mx-auto h-8 w-8 mb-2"}),e[42]||(e[42]=r("p",null,"No hay importaciones registradas",-1)),e[43]||(e[43]=r("p",{class:"text-sm"},"Las importaciones aparecer√°n aqu√≠ una vez que subas archivos CSV",-1))])):(n(),c("div",mo,[(n(!0),c(k,null,S(U.value,t=>(n(),c("div",{key:t.id,class:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:_=>me(t.id)},[r("div",vo,[(n(),y($e(I(t.status).icon),{class:te(["h-4 w-4",I(t.status).class])},null,8,["class"])),r("div",null,[r("p",_o,u(t.original_filename),1),r("p",go," Por "+u(t.created_by.name)+" ‚Ä¢ "+u(ve(t.created_at)),1)])]),r("div",bo,[a(o(we),{variant:"outline",class:te(I(t.status).class)},{default:l(()=>[d(u(I(t.status).label),1)]),_:2},1032,["class"]),t.status==="completed"?(n(),c("div",xo,[d(u(t.successful_rows)+" exitosos ",1),t.failed_rows>0?(n(),c("span",yo,", "+u(t.failed_rows)+" errores",1)):p("",!0)])):t.status==="processing"?(n(),c("div",ho,u(t.progress_percentage)+"% ",1)):p("",!0)])],8,po))),128))]))]),_:1})]),_:1})):p("",!0),a(o(F),null,{default:l(()=>[a(o(N),null,{default:l(()=>[a(o(P),null,{default:l(()=>[d("Votantes Asignados ("+u($.value.length)+")",1)]),_:1})]),_:1}),a(o(D),null,{default:l(()=>[$.value.length===0?(n(),c("div",Vo,e[44]||(e[44]=[r("p",null,"No hay votantes asignados a esta votaci√≥n",-1),r("p",{class:"text-sm"},"Importa un archivo CSV o agrega votantes manualmente",-1)]))):(n(),c("div",ko,[(n(!0),c(k,null,S($.value,t=>(n(),c("div",{key:t.id,class:"flex items-center justify-between p-3 border rounded-lg"},[r("div",null,[r("p",$o,u(t.name),1),r("p",wo,u(t.email),1)]),a(o(g),{variant:"ghost",size:"sm",onClick:_=>ge(t.id)},{default:l(()=>[a(o(De),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])]))),128))]))]),_:1})]),_:1}),r("div",Co,[a(o(g),{variant:"outline",onClick:e[16]||(e[16]=t=>h.value="formulario")},{default:l(()=>e[45]||(e[45]=[d(" Anterior ")])),_:1}),a(o(g),{onClick:R,disabled:o(s).processing},{default:l(()=>[d(u(o(s).processing?"Guardando...":"Actualizar")+" Votaci√≥n ",1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])])]),_:1})],64))}});export{ea as default};
