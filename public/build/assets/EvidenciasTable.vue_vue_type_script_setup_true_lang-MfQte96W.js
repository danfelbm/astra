import{P as z,c as _e,_ as j,a as Q}from"./createLucideIcon-DI6U3gwA.js";import{_ as J,c as W,a as ge,b as ye}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dn6Y_7jM.js";import{q as be,i as G,f as ce,P as he,_ as M,a as O,b as R,c as S,d as $,C as xe}from"./SelectValue.vue_vue_type_script_setup_true_lang-CIqxaMm-.js";import{a as fe,u as U,b as Ce,_ as se}from"./Input.vue_vue_type_script_setup_true_lang-8PRhBqBe.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-DoPMf_am.js";import{X as Ae}from"./x-C1SerbTX.js";import{d as q,a3 as pe,b as g,m as c,w as a,U as B,f as e,r as N,c as C,p as me,Y as $e,o as Ve,e as t,Q as L,j as T,A as ke,C as we,D as qe,g as _,h as u,i as x,F as E,k as I,n as Z,t as b,v as Y,l as Be,s as oe}from"./app-B7PnGMAV.js";import{_ as Ee}from"./CardDescription.vue_vue_type_script_setup_true_lang-VOU9gGEk.js";import{_ as H}from"./index-BTD9fiCJ.js";import{_ as ne,a as de,b as K,c as k,d as ie,e as w}from"./TableHeader.vue_vue_type_script_setup_true_lang-Cx28ZkFK.js";import{c as ae,a as Ie}from"./VisuallyHidden-DXdD7FDa.js";import{u as Te}from"./useArrowNavigation-B5rxJs06.js";import{t as De}from"./index-UPtpLtaq.js";import{I as Me}from"./image-De4SlgHg.js";import{F as Oe}from"./file-text-CmH6cCEi.js";import{E as Re}from"./external-link-CjNpfxsJ.js";import{E as re}from"./eye-D3-WG7cb.js";import{D as ue}from"./download-eWUEZUGA.js";function Se(n,i){return be(n)?!1:Array.isArray(n)?n.some(s=>G(s,i)):G(n,i)}const[ve,Ue]=ae("CollapsibleRoot");var Fe=q({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:open"],setup(n,{expose:i,emit:s}){const d=n,p=fe(d,"open",s,{defaultValue:d.defaultOpen,passive:d.open===void 0}),{disabled:o,unmountOnHide:f}=pe(d);return Ue({contentId:"",disabled:o,open:p,unmountOnHide:f,onOpenToggle:()=>{o.value||(p.value=!p.value)}}),i({open:p}),U(),(m,V)=>(c(),g(e(z),{as:m.as,"as-child":d.asChild,"data-state":e(p)?"open":"closed","data-disabled":e(o)?"":void 0},{default:a(()=>[B(m.$slots,"default",{open:e(p)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),He=Fe,Ne=q({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["contentFound"],setup(n,{emit:i}){const s=n,d=i,v=ve();v.contentId||(v.contentId=ce(void 0,"reka-collapsible-content"));const p=N(),{forwardRef:o,currentElement:f}=U(),m=N(0),V=N(0),y=C(()=>v.open.value),l=N(y.value),r=N();me(()=>{var h;return[y.value,(h=p.value)==null?void 0:h.present]},async()=>{await $e();const h=f.value;if(!h)return;r.value=r.value||{transitionDuration:h.style.transitionDuration,animationName:h.style.animationName},h.style.transitionDuration="0s",h.style.animationName="none";const F=h.getBoundingClientRect();V.value=F.height,m.value=F.width,l.value||(h.style.transitionDuration=r.value.transitionDuration,h.style.animationName=r.value.animationName)},{immediate:!0});const A=C(()=>l.value&&v.open.value);return Ve(()=>{requestAnimationFrame(()=>{l.value=!1})}),Ce(f,"beforematch",h=>{requestAnimationFrame(()=>{v.onOpenToggle(),d("contentFound")})}),(h,F)=>(c(),g(e(he),{ref_key:"presentRef",ref:p,present:h.forceMount||e(v).open.value,"force-mount":!0},{default:a(({present:P})=>{var le;return[t(e(z),L(h.$attrs,{id:e(v).contentId,ref:e(o),"as-child":s.asChild,as:h.as,hidden:P?void 0:e(v).unmountOnHide.value?"":"until-found","data-state":A.value?void 0:e(v).open.value?"open":"closed","data-disabled":(le=e(v).disabled)!=null&&le.value?"":void 0,style:{"--reka-collapsible-content-height":`${V.value}px`,"--reka-collapsible-content-width":`${m.value}px`}}),{default:a(()=>[!e(v).unmountOnHide.value||P?B(h.$slots,"default",{key:0}):T("v-if",!0)]),_:2},1040,["id","as-child","as","hidden","data-state","data-disabled","style"])]}),_:3},8,["present"]))}}),je=Ne,ze=q({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const i=n;U();const s=ve();return(d,v)=>{var p,o;return c(),g(e(z),{type:d.as==="button"?"button":void 0,as:d.as,"as-child":i.asChild,"aria-controls":e(s).contentId,"aria-expanded":e(s).open.value,"data-state":e(s).open.value?"open":"closed","data-disabled":(p=e(s).disabled)!=null&&p.value?"":void 0,disabled:(o=e(s).disabled)==null?void 0:o.value,onClick:e(s).onOpenToggle},{default:a(()=>[B(d.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"])}}}),Le=ze;function Pe({type:n,defaultValue:i,modelValue:s}){const d=s||i;return s!==void 0||i!==void 0?Array.isArray(d)?"multiple":"single":n??"single"}function Ke({type:n,defaultValue:i,modelValue:s}){return n||Pe({type:n,defaultValue:i,modelValue:s})}function Ge({type:n,defaultValue:i}){return i!==void 0?i:n==="single"?void 0:[]}function Qe(n,i){const s=C(()=>Ke(n)),d=fe(n,"modelValue",i,{defaultValue:Ge(n),passive:n.modelValue===void 0,deep:!0});function v(o){if(s.value==="single")d.value=G(o,d.value)?void 0:o;else{const f=Array.isArray(d.value)?[...d.value||[]]:[d.value].filter(Boolean);if(Se(f,o)){const m=f.findIndex(V=>G(V,o));f.splice(m,1)}else f.push(o);d.value=f}}const p=C(()=>s.value==="single");return{modelValue:d,changeModelValue:v,isSingle:p}}const[X,Xe]=ae("AccordionRoot");var Ye=q({__name:"AccordionRoot",props:{collapsible:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1,default:"vertical"},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:i}){const s=n,d=i,{dir:v,disabled:p,unmountOnHide:o}=pe(s),f=Ie(v),{modelValue:m,changeModelValue:V,isSingle:y}=Qe(s,d),{forwardRef:l,currentElement:r}=U();return Xe({disabled:p,direction:f,orientation:s.orientation,parentElement:r,isSingle:y,collapsible:s.collapsible,modelValue:m,changeModelValue:V,unmountOnHide:o}),(A,h)=>(c(),g(e(z),{ref:e(l),"as-child":A.asChild,as:A.as},{default:a(()=>[B(A.$slots,"default",{modelValue:e(m)})]),_:3},8,["as-child","as"]))}}),Je=Ye,ee=(function(n){return n.Open="open",n.Closed="closed",n})(ee||{});const[te,We]=ae("AccordionItem");var Ze=q({__name:"AccordionItem",props:{disabled:{type:Boolean,required:!1},value:{type:String,required:!0},unmountOnHide:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n,{expose:i}){const s=n,d=X(),v=C(()=>d.isSingle.value?s.value===d.modelValue.value:Array.isArray(d.modelValue.value)&&d.modelValue.value.includes(s.value)),p=C(()=>d.disabled.value||s.disabled),o=C(()=>p.value?"":void 0),f=C(()=>v.value?ee.Open:ee.Closed);i({open:v,dataDisabled:o});const{currentRef:m,currentElement:V}=U();We({open:v,dataState:f,disabled:p,dataDisabled:o,triggerId:"",currentRef:m,currentElement:V,value:C(()=>s.value)});function y(l){var F;const r=l.target;if(Array.from(((F=d.parentElement.value)==null?void 0:F.querySelectorAll("[data-reka-collection-item]"))??[]).findIndex(P=>P===r)===-1)return null;Te(l,r,d.parentElement.value,{arrowKeyOptions:d.orientation,dir:d.direction.value,focus:!0})}return(l,r)=>(c(),g(e(He),{"data-orientation":e(d).orientation,"data-disabled":o.value,"data-state":f.value,disabled:p.value,open:v.value,as:s.as,"as-child":s.asChild,"unmount-on-hide":e(d).unmountOnHide.value,onKeydown:ke(y,["up","down","left","right","home","end"])},{default:a(()=>[B(l.$slots,"default",{open:v.value})]),_:3},8,["data-orientation","data-disabled","data-state","disabled","open","as","as-child","unmount-on-hide"]))}}),ea=Ze,aa=q({__name:"AccordionContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const i=n,s=X(),d=te();return U(),(v,p)=>(c(),g(e(je),{role:"region","as-child":i.asChild,as:v.as,"force-mount":i.forceMount,"aria-labelledby":e(d).triggerId,"data-state":e(d).dataState.value,"data-disabled":e(d).dataDisabled.value,"data-orientation":e(s).orientation,style:{"--reka-accordion-content-width":"var(--reka-collapsible-content-width)","--reka-accordion-content-height":"var(--reka-collapsible-content-height)"},onContentFound:p[0]||(p[0]=o=>e(s).changeModelValue(e(d).value.value))},{default:a(()=>[B(v.$slots,"default")]),_:3},8,["as-child","as","force-mount","aria-labelledby","data-state","data-disabled","data-orientation"]))}}),ta=aa,la=q({__name:"AccordionHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h3"}},setup(n){const i=n,s=X(),d=te();return U(),(v,p)=>(c(),g(e(z),{as:i.as,"as-child":i.asChild,"data-orientation":e(s).orientation,"data-state":e(d).dataState.value,"data-disabled":e(d).dataDisabled.value},{default:a(()=>[B(v.$slots,"default")]),_:3},8,["as","as-child","data-orientation","data-state","data-disabled"]))}}),sa=la,oa=q({__name:"AccordionTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const i=n,s=X(),d=te();d.triggerId||(d.triggerId=ce(void 0,"reka-accordion-trigger"));function v(){const p=s.isSingle.value&&d.open.value&&!s.collapsible;d.disabled.value||p||s.changeModelValue(d.value.value)}return(p,o)=>(c(),g(e(Le),{id:e(d).triggerId,ref:e(d).currentRef,"data-reka-collection-item":"",as:i.as,"as-child":i.asChild,"aria-disabled":e(d).disabled.value||void 0,"aria-expanded":e(d).open.value||!1,"data-disabled":e(d).dataDisabled.value,"data-orientation":e(s).orientation,"data-state":e(d).dataState.value,disabled:e(d).disabled.value,onClick:v},{default:a(()=>[B(p.$slots,"default")]),_:3},8,["id","as","as-child","aria-disabled","aria-expanded","data-disabled","data-orientation","data-state","disabled"]))}}),na=oa;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=_e("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),da={class:"space-y-4"},ia={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4"},ra={class:"space-y-2"},ua={class:"space-y-2"},ca={class:"space-y-2"},fa={class:"space-y-2"},pa={class:"space-y-2"},ma={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},va={class:"space-y-2"},_a={key:0,class:"space-y-2"},ga={key:1,class:"space-y-2"},ya={class:"flex items-end lg:col-span-2"},ut=q({__name:"EvidenciaFilters",props:we({contratos:{},evidencias:{},entregables:{},hitos:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const i=n,s=qe(n,"modelValue"),d=C(()=>{const y=new Set(i.evidencias.map(l=>l.tipo_evidencia).filter(Boolean));return Array.from(y).map(l=>({value:l,label:l}))}),v=C(()=>{const y=new Set(i.evidencias.map(l=>l.estado).filter(Boolean));return Array.from(y).map(l=>({value:l,label:l.charAt(0).toUpperCase()+l.slice(1)}))}),p=C(()=>{const y=new Map;return i.evidencias.forEach(l=>{var r;(r=l.usuario)!=null&&r.id&&y.set(l.usuario.id,l.usuario)}),Array.from(y.values()).map(l=>({value:l.id,label:l.name}))}),o=C(()=>{if(i.hitos&&i.hitos.length>0)return i.hitos.map(l=>({value:l.id,label:l.nombre}));const y=new Map;return i.evidencias.forEach(l=>{l.entregables&&l.entregables.length>0&&l.entregables.forEach(r=>{var A;(A=r==null?void 0:r.hito)!=null&&A.id&&y.set(r.hito.id,r.hito)})}),Array.from(y.values()).map(l=>({value:l.id,label:l.nombre}))}),f=C(()=>{let y=[];if(i.entregables&&i.entregables.length>0)y=i.entregables;else{const l=new Map;i.evidencias.forEach(r=>{r.entregables&&r.entregables.length>0&&r.entregables.forEach(A=>{A!=null&&A.id&&l.set(A.id,A)})}),y=Array.from(l.values())}return s.value.hito_id&&(y=y.filter(l=>l.hito_id===s.value.hito_id)),y.map(l=>({value:l.id,label:l.nombre}))}),m=()=>{s.value={contrato_id:null,fecha_inicio:null,fecha_fin:null,tipo:null,estado:null,usuario_id:null,hito_id:null,entregable_id:null}},V=C(()=>Object.values(s.value).some(y=>y!==null&&y!==""));return me(()=>s.value.hito_id,()=>{s.value.entregable_id=null}),(y,l)=>(c(),g(e(J),null,{default:a(()=>[t(e(W),{class:"p-4"},{default:a(()=>[_("div",da,[_("div",ia,[_("div",ra,[t(e(D),{for:"filter-contrato",class:"text-xs"},{default:a(()=>[...l[8]||(l[8]=[u("Contrato",-1)])]),_:1}),t(e(M),{modelValue:s.value.contrato_id,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value.contrato_id=r),id:"filter-contrato"},{default:a(()=>[t(e(O),null,{default:a(()=>[t(e(R),{placeholder:"Todos los contratos"})]),_:1}),t(e(S),null,{default:a(()=>[t(e($),{value:null},{default:a(()=>[...l[9]||(l[9]=[u("Todos los contratos",-1)])]),_:1}),(c(!0),x(E,null,I(n.contratos,r=>(c(),g(e($),{key:r.id,value:r.id},{default:a(()=>[u(b(r.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_("div",ua,[t(e(D),{for:"filter-fecha-inicio",class:"text-xs"},{default:a(()=>[...l[10]||(l[10]=[u("Fecha Desde",-1)])]),_:1}),t(e(se),{modelValue:s.value.fecha_inicio,"onUpdate:modelValue":l[1]||(l[1]=r=>s.value.fecha_inicio=r),type:"date",id:"filter-fecha-inicio",class:"text-sm"},null,8,["modelValue"])]),_("div",ca,[t(e(D),{for:"filter-fecha-fin",class:"text-xs"},{default:a(()=>[...l[11]||(l[11]=[u("Fecha Hasta",-1)])]),_:1}),t(e(se),{modelValue:s.value.fecha_fin,"onUpdate:modelValue":l[2]||(l[2]=r=>s.value.fecha_fin=r),type:"date",id:"filter-fecha-fin",class:"text-sm"},null,8,["modelValue"])]),_("div",fa,[t(e(D),{for:"filter-tipo",class:"text-xs"},{default:a(()=>[...l[12]||(l[12]=[u("Tipo",-1)])]),_:1}),t(e(M),{modelValue:s.value.tipo,"onUpdate:modelValue":l[3]||(l[3]=r=>s.value.tipo=r),id:"filter-tipo"},{default:a(()=>[t(e(O),null,{default:a(()=>[t(e(R),{placeholder:"Todos los tipos"})]),_:1}),t(e(S),null,{default:a(()=>[t(e($),{value:null},{default:a(()=>[...l[13]||(l[13]=[u("Todos los tipos",-1)])]),_:1}),(c(!0),x(E,null,I(d.value,r=>(c(),g(e($),{key:r.value,value:r.value},{default:a(()=>[u(b(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_("div",pa,[t(e(D),{for:"filter-estado",class:"text-xs"},{default:a(()=>[...l[14]||(l[14]=[u("Estado",-1)])]),_:1}),t(e(M),{modelValue:s.value.estado,"onUpdate:modelValue":l[4]||(l[4]=r=>s.value.estado=r),id:"filter-estado"},{default:a(()=>[t(e(O),null,{default:a(()=>[t(e(R),{placeholder:"Todos los estados"})]),_:1}),t(e(S),null,{default:a(()=>[t(e($),{value:null},{default:a(()=>[...l[15]||(l[15]=[u("Todos los estados",-1)])]),_:1}),(c(!0),x(E,null,I(v.value,r=>(c(),g(e($),{key:r.value,value:r.value},{default:a(()=>[u(b(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),_("div",ma,[_("div",va,[t(e(D),{for:"filter-usuario",class:"text-xs"},{default:a(()=>[...l[16]||(l[16]=[u("Usuario",-1)])]),_:1}),t(e(M),{modelValue:s.value.usuario_id,"onUpdate:modelValue":l[5]||(l[5]=r=>s.value.usuario_id=r),id:"filter-usuario"},{default:a(()=>[t(e(O),null,{default:a(()=>[t(e(R),{placeholder:"Todos los usuarios"})]),_:1}),t(e(S),null,{default:a(()=>[t(e($),{value:null},{default:a(()=>[...l[17]||(l[17]=[u("Todos los usuarios",-1)])]),_:1}),(c(!0),x(E,null,I(p.value,r=>(c(),g(e($),{key:r.value,value:r.value},{default:a(()=>[u(b(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),o.value.length>0?(c(),x("div",_a,[t(e(D),{for:"filter-hito",class:"text-xs"},{default:a(()=>[...l[18]||(l[18]=[u("Hito",-1)])]),_:1}),t(e(M),{modelValue:s.value.hito_id,"onUpdate:modelValue":l[6]||(l[6]=r=>s.value.hito_id=r),id:"filter-hito"},{default:a(()=>[t(e(O),null,{default:a(()=>[t(e(R),{placeholder:"Todos los hitos"})]),_:1}),t(e(S),null,{default:a(()=>[t(e($),{value:null},{default:a(()=>[...l[19]||(l[19]=[u("Todos los hitos",-1)])]),_:1}),(c(!0),x(E,null,I(o.value,r=>(c(),g(e($),{key:r.value,value:r.value},{default:a(()=>[u(b(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])):T("",!0),o.value.length>0?(c(),x("div",ga,[t(e(D),{for:"filter-entregable",class:"text-xs"},{default:a(()=>[...l[20]||(l[20]=[u("Entregable",-1)])]),_:1}),t(e(M),{modelValue:s.value.entregable_id,"onUpdate:modelValue":l[7]||(l[7]=r=>s.value.entregable_id=r),id:"filter-entregable",disabled:!s.value.hito_id},{default:a(()=>[t(e(O),{class:Z({"opacity-60":!s.value.hito_id})},{default:a(()=>[t(e(R),{placeholder:s.value.hito_id?"Todos los entregables":"Elige primero un hito"},null,8,["placeholder"])]),_:1},8,["class"]),s.value.hito_id?(c(),g(e(S),{key:0},{default:a(()=>[t(e($),{value:null},{default:a(()=>[...l[21]||(l[21]=[u("Todos los entregables",-1)])]),_:1}),(c(!0),x(E,null,I(f.value,r=>(c(),g(e($),{key:r.value,value:r.value},{default:a(()=>[u(b(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})):T("",!0)]),_:1},8,["modelValue","disabled"])])):T("",!0),_("div",ya,[V.value?(c(),g(e(j),{key:0,variant:"outline",size:"sm",onClick:m,class:"w-full md:w-auto"},{default:a(()=>[t(e(Ae),{class:"h-4 w-4 mr-2"}),l[22]||(l[22]=u(" Limpiar Filtros ",-1))]),_:1})):T("",!0)])])])]),_:1})]),_:1}))}}),ba=q({__name:"Accordion",props:{collapsible:{type:Boolean},disabled:{type:Boolean},dir:{},orientation:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{},class:{}},setup(n){const i=n;return(s,d)=>(c(),g(e(Je),L(i,{class:e(Q)("w-full",i.class)}),{default:a(()=>[B(s.$slots,"default")]),_:3},16,["class"]))}}),ha=q({__name:"AccordionItem",props:{disabled:{type:Boolean},value:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const i=n;return(s,d)=>(c(),g(e(ea),L(i,{class:e(Q)("border-b",i.class)}),{default:a(()=>[B(s.$slots,"default")]),_:3},16,["class"]))}}),xa=q({__name:"AccordionTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const i=n;return(s,d)=>(c(),g(e(sa),{class:"flex"},{default:a(()=>[t(e(na),L(i,{class:e(Q)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",i.class)}),{default:a(()=>[B(s.$slots,"default"),t(e(xe),{class:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]),_:3},16,["class"])]),_:3}))}}),Ca={class:"pb-4 pt-0"},Aa=q({__name:"AccordionContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const i=n;return(s,d)=>(c(),g(e(ta),L(i,{class:e(Q)("overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",i.class)}),{default:a(()=>[_("div",Ca,[B(s.$slots,"default")])]),_:3},16,["class"]))}}),$a={key:0},Va={class:"flex items-center justify-between w-full pr-4"},ka={class:"flex items-center gap-3"},wa={class:"text-left"},qa={class:"font-semibold"},Ba={class:"text-sm text-gray-500"},Ea={class:"flex items-center gap-3"},Ia={class:"text-sm text-gray-600"},Ta={class:"text-sm"},Da={class:"flex items-center justify-end gap-2"},Ma=["href"],Oa={key:1},Ra={class:"text-sm text-gray-600"},Sa={key:0,class:"flex flex-wrap gap-1"},Ua={key:1,class:"text-sm text-gray-500"},Fa={class:"text-sm"},Ha={class:"flex items-center justify-end gap-2"},Na=["href"],ja={class:"text-center"},za={class:"mt-2 text-sm text-gray-600"},La={class:"text-xs text-gray-500 mt-1"},ct=q({__name:"EvidenciasTable",props:{mode:{},evidencias:{},evidenciasAgrupadas:{},contrato:{},formatDate:{},cardTitle:{default:"Evidencias Asociadas"},cardDescription:{default:"Evidencias cargadas para esta obligación"},modo:{default:"admin"},puedeGestionarEstado:{type:Boolean,default:!1},proyectoId:{}},setup(n){const i=n,s=p=>({"bg-yellow-100 text-yellow-800":p==="pendiente","bg-green-100 text-green-800":p==="aprobada","bg-red-100 text-red-800":p==="rechazada"}),d=C(()=>i.mode==="grouped"?i.evidenciasAgrupadas&&i.evidenciasAgrupadas.length>0:i.evidencias&&i.evidencias.length>0),v=(p,o)=>{if(o===p.estado||!i.proyectoId)return;const f=i.modo==="admin"?`/admin/proyectos/${i.proyectoId}/evidencias/${p.id}/cambiar-estado`:`/miembro/mis-proyectos/${i.proyectoId}/evidencias/${p.id}/cambiar-estado`;oe.post(f,{estado:o,observaciones:null},{preserveScroll:!0,onSuccess:()=>{oe.reload()},onError:m=>{De.error("Error al cambiar el estado"),console.error(m)}})};return(p,o)=>n.mode==="grouped"&&d.value?(c(),x("div",$a,[t(e(ba),{type:"multiple",class:"space-y-4",collapsible:""},{default:a(()=>[(c(!0),x(E,null,I(n.evidenciasAgrupadas,f=>(c(),g(e(ha),{key:f.contrato.id,value:`contrato-${f.contrato.id}`,class:"border rounded-lg bg-card"},{default:a(()=>[t(e(xa),{class:"px-4 py-3 hover:no-underline hover:bg-gray-50 dark:hover:bg-gray-800 rounded-t-lg"},{default:a(()=>[_("div",Va,[_("div",ka,[t(e(Oe),{class:"h-5 w-5 text-gray-500"}),_("div",wa,[_("div",qa,b(f.contrato.nombre),1),_("div",Ba," Contrato #"+b(f.contrato.id),1)])]),_("div",Ea,[t(e(H),{variant:"secondary"},{default:a(()=>[u(b(f.evidencias.length)+" evidencia(s) ",1)]),_:2},1024),t(e(Y),{href:`/admin/contratos/${f.contrato.id}`,onClick:o[0]||(o[0]=Be(()=>{},["stop"])),class:"text-blue-600 hover:text-blue-800 flex items-center gap-1"},{default:a(()=>[o[1]||(o[1]=u(" Ver contrato ",-1)),t(e(Re),{class:"h-3 w-3"})]),_:1},8,["href"])])])]),_:2},1024),t(e(Aa),{class:"px-4 pb-4"},{default:a(()=>[t(e(ne),null,{default:a(()=>[t(e(de),null,{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(k),null,{default:a(()=>[...o[2]||(o[2]=[u("Tipo",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[3]||(o[3]=[u("Obligación",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[4]||(o[4]=[u("Descripción",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[5]||(o[5]=[u("Usuario",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[6]||(o[6]=[u("Estado",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[7]||(o[7]=[u("Fecha",-1)])]),_:1}),t(e(k),{class:"text-right"},{default:a(()=>[...o[8]||(o[8]=[u("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(ie),null,{default:a(()=>[(c(!0),x(E,null,I(f.evidencias,m=>(c(),g(e(K),{key:m.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[t(e(w),null,{default:a(()=>[t(e(H),{variant:"outline"},{default:a(()=>[u(b(m.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),t(e(w),null,{default:a(()=>[u(b(m.obligacion_titulo),1)]),_:2},1024),t(e(w),null,{default:a(()=>[_("span",Ia,b(m.descripcion||"-"),1)]),_:2},1024),t(e(w),null,{default:a(()=>{var V;return[_("span",Ta,b(((V=m.usuario)==null?void 0:V.name)||"-"),1)]}),_:2},1024),t(e(w),null,{default:a(()=>[t(e(H),{class:Z(s(m.estado))},{default:a(()=>[u(b(m.estado),1)]),_:2},1032,["class"])]),_:2},1024),t(e(w),null,{default:a(()=>[u(b(n.formatDate(m.created_at)),1)]),_:2},1024),t(e(w),{class:"text-right"},{default:a(()=>[_("div",Da,[t(e(j),{variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>[t(e(Y),{href:`/admin/contratos/${f.contrato.id}/evidencias/${m.id}`},{default:a(()=>[t(e(re),{class:"h-4 w-4"}),o[9]||(o[9]=_("span",{class:"ml-1"},"Ver",-1))]),_:1},8,["href"])]),_:2},1024),m.archivo_url?(c(),g(e(j),{key:0,variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>[_("a",{href:m.archivo_url,target:"_blank"},[t(e(ue),{class:"h-4 w-4"}),o[10]||(o[10]=_("span",{class:"ml-1"},"Descargar",-1))],8,Ma)]),_:2},1024)):T("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])):n.mode==="simple"&&d.value?(c(),x("div",Oa,[t(e(J),null,{default:a(()=>[t(e(ge),null,{default:a(()=>[t(e(ye),null,{default:a(()=>[u(b(n.cardTitle),1)]),_:1}),t(e(Ee),null,{default:a(()=>[u(b(n.cardDescription),1)]),_:1})]),_:1}),t(e(W),null,{default:a(()=>[t(e(ne),null,{default:a(()=>[t(e(de),null,{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(k),null,{default:a(()=>[...o[11]||(o[11]=[u("Tipo",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[12]||(o[12]=[u("Descripción",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[13]||(o[13]=[u("Entregable",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[14]||(o[14]=[u("Usuario",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[15]||(o[15]=[u("Estado",-1)])]),_:1}),t(e(k),null,{default:a(()=>[...o[16]||(o[16]=[u("Fecha",-1)])]),_:1}),t(e(k),{class:"text-right"},{default:a(()=>[...o[17]||(o[17]=[u("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(ie),null,{default:a(()=>[(c(!0),x(E,null,I(n.evidencias,f=>(c(),g(e(K),{key:f.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[t(e(w),null,{default:a(()=>[t(e(H),{variant:"outline"},{default:a(()=>[u(b(f.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),t(e(w),null,{default:a(()=>[_("span",Ra,b(f.descripcion||"-"),1)]),_:2},1024),t(e(w),null,{default:a(()=>[f.entregables&&f.entregables.length>0?(c(),x("div",Sa,[(c(!0),x(E,null,I(f.entregables,m=>(c(),g(e(H),{key:m.id,variant:"secondary",class:"text-xs"},{default:a(()=>[u(b(m.nombre),1)]),_:2},1024))),128))])):(c(),x("span",Ua,"-"))]),_:2},1024),t(e(w),null,{default:a(()=>{var m;return[_("span",Fa,b(((m=f.usuario)==null?void 0:m.name)||"-"),1)]}),_:2},1024),t(e(w),null,{default:a(()=>[t(e(H),{class:Z(s(f.estado))},{default:a(()=>[u(b(f.estado),1)]),_:2},1032,["class"])]),_:2},1024),t(e(w),null,{default:a(()=>[u(b(n.formatDate(f.created_at)),1)]),_:2},1024),t(e(w),{class:"text-right"},{default:a(()=>[_("div",Ha,[t(e(j),{variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>{var m;return[t(e(Y),{href:`/admin/contratos/${(m=n.contrato)==null?void 0:m.id}/evidencias/${f.id}`},{default:a(()=>[t(e(re),{class:"h-4 w-4"}),o[18]||(o[18]=_("span",{class:"ml-1"},"Ver",-1))]),_:1},8,["href"])]}),_:2},1024),f.archivo_url?(c(),g(e(j),{key:0,variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>[_("a",{href:f.archivo_url,target:"_blank"},[t(e(ue),{class:"h-4 w-4"}),o[19]||(o[19]=_("span",{class:"ml-1"},"Descargar",-1))],8,Na)]),_:2},1024)):T("",!0),n.modo==="admin"&&n.proyectoId||n.modo==="user"&&n.puedeGestionarEstado&&n.proyectoId?(c(),g(e(M),{key:1,"model-value":f.estado,"onUpdate:modelValue":m=>v(f,m)},{default:a(()=>[t(e(O),{class:"h-8 w-32"},{default:a(()=>[t(e(R))]),_:1}),t(e(S),null,{default:a(()=>[t(e($),{value:"pendiente"},{default:a(()=>[...o[20]||(o[20]=[_("span",{class:"text-yellow-600"},"Pendiente",-1)])]),_:1}),t(e($),{value:"aprobada"},{default:a(()=>[...o[21]||(o[21]=[_("span",{class:"text-green-600"},"Aprobada",-1)])]),_:1}),t(e($),{value:"rechazada"},{default:a(()=>[...o[22]||(o[22]=[_("span",{class:"text-red-600"},"Rechazada",-1)])]),_:1})]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])):T("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])):d.value?T("",!0):(c(),g(e(J),{key:2},{default:a(()=>[t(e(W),{class:"py-8"},{default:a(()=>[_("div",ja,[t(e(Me),{class:"mx-auto h-12 w-12 text-gray-400"}),_("p",za,b(n.mode==="grouped"?"No hay evidencias que coincidan con los filtros":"No hay evidencias asociadas"),1),_("p",La,b(n.mode==="grouped"?"Intenta ajustar los criterios de búsqueda":"Las evidencias se cargan desde los contratos"),1)])]),_:1})]),_:1}))}});export{rt as A,ut as _,ct as a,ba as b,ha as c,xa as d,Aa as e};
