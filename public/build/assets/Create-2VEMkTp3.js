import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-BO31RGYM.js";import{d as G,C as W,k as F,c as H,w as J,a as m,o as d,b as o,u as l,m as K,e as i,f as r,j as P,i as $,g as s,t as y,F as x,r as B,n as Q,W as X}from"./app-CWwwNt3G.js";import{_ as U}from"./createLucideIcon-CYGqxGZ-.js";import{_,a as v,b as c,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-B6TzwI-a.js";import{_ as g}from"./CardDescription.vue_vue_type_script_setup_true_lang-CSFhE41I.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-yj7-d7AZ.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-Be93Ey8c.js";import{_ as D}from"./Textarea.vue_vue_type_script_setup_true_lang-0we5beMb.js";import{_ as j,a as w,b as k,c as E,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-ut_BKIxz.js";import{_ as S}from"./Switch.vue_vue_type_script_setup_true_lang-BTgiFhwH.js";import{_ as Y,a as Z,b as N,c as q}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-E9KhJKu0.js";import{_ as h,a as ll}from"./index-BcdHKot4.js";import{_ as el}from"./DynamicFormBuilder.vue_vue_type_script_setup_true_lang-5iltVNAd.js";import{A as ol}from"./arrow-left-B8AI2Yl2.js";import{E as il}from"./eye-ag4c4PBK.js";import{S as tl}from"./save-BNgeVFU2.js";import"./index-yoAtM8gA.js";import"./check-CQlGkbKe.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-FMzhBrMz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cf7ZLqek.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-X-Ey77Ew.js";import"./VisuallyHidden-CC1T6Mtv.js";import"./index-q0XNljsS.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Bp7mlSfv.js";import"./users-DWOxtz6J.js";import"./index-YQgw5yum.js";import"./briefcase-FTzzlp-v.js";import"./calendar-m8SEPsWf.js";import"./index-CMn-shes.js";import"./circle-alert-bRjx1fxm.js";import"./map-pin-BM1tyrfv.js";import"./VisuallyHiddenInput-CQ_zttL3.js";import"./RovingFocusItem-CtfYQslM.js";import"./utils-BR1_O-JS.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-B3ZcHRxU.js";import"./plus-DmOsdfYz.js";import"./grip-vertical-DtuGSt4X.js";import"./trash-2-ByFXxmLQ.js";import"./git-branch-DP5Ai0Jx.js";const al={class:"p-6"},sl={class:"mb-6 flex items-center justify-between"},rl={class:"flex gap-2"},ul={class:"list-disc list-inside"},nl={key:0,class:"text-sm text-destructive mt-1"},dl={class:"flex items-center justify-between"},ml={class:"space-y-0.5"},fl={key:0,class:"flex items-center justify-between"},pl={class:"space-y-0.5"},_l={class:"grid grid-cols-2 gap-4"},vl={class:"grid grid-cols-2 gap-4"},cl={class:"flex items-center justify-between"},Vl={class:"space-y-0.5"},ae=G({__name:"Create",props:{categorias:{}},setup(gl){const T=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Formularios",href:"/admin/formularios"},{title:"Crear",href:"#"}],t=W({titulo:"",descripcion:"",categoria_id:null,configuracion_campos:[],configuracion_general:{},tipo_acceso:"autenticado",permite_visitantes:!1,requiere_captcha:!0,fecha_inicio:null,fecha_fin:null,limite_respuestas:null,limite_por_usuario:1,emails_notificacion:[],mensaje_confirmacion:"",estado:"borrador",activo:!0}),A=F("informacion"),b=F(""),C=F(!1),I=H(()=>t.titulo&&t.configuracion_campos.length>0&&t.limite_por_usuario>=1),L=()=>{b.value&&(t.emails_notificacion=b.value.split(",").map(n=>n.trim()).filter(n=>n.length>0)),t.post(route("admin.formularios.store"),{preserveScroll:!0,onError:()=>{}})},M=()=>{X.get(route("admin.formularios.index"))},O=n=>{t.configuracion_campos=n};return J(()=>t.fecha_inicio,n=>{n&&t.fecha_fin&&n>t.fecha_fin&&(t.fecha_fin=null)}),(n,e)=>(d(),m(x,null,[o(l(K),{title:"Crear Formulario"}),o(R,{breadcrumbs:T},{default:i(()=>[r("div",al,[r("div",sl,[e[19]||(e[19]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Crear Formulario"),r("p",{class:"text-muted-foreground"}," Configura un nuevo formulario dinámico ")],-1)),r("div",rl,[o(l(U),{variant:"outline",onClick:M},{default:i(()=>[o(l(ol),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=s(" Cancelar "))]),_:1}),o(l(U),{onClick:e[0]||(e[0]=a=>C.value=!C.value),variant:"outline"},{default:i(()=>[o(l(il),{class:"mr-2 h-4 w-4"}),s(" "+y(C.value?"Ocultar":"Ver")+" Vista Previa ",1)]),_:1}),o(l(U),{onClick:L,disabled:l(t).processing||!I.value},{default:i(()=>[o(l(tl),{class:"mr-2 h-4 w-4"}),e[18]||(e[18]=s(" Guardar Formulario "))]),_:1},8,["disabled"])])]),l(t).errors&&Object.keys(l(t).errors).length>0?(d(),P(l(h),{key:0,class:"mb-6",variant:"destructive"},{default:i(()=>[o(l(ll),null,{default:i(()=>[r("ul",ul,[(d(!0),m(x,null,B(l(t).errors,(a,z)=>(d(),m("li",{key:z},y(a),1))),128))])]),_:1})]),_:1})):$("",!0),o(l(Y),{modelValue:A.value,"onUpdate:modelValue":e[16]||(e[16]=a=>A.value=a),class:"space-y-6"},{default:i(()=>[o(l(Z),{class:"grid w-full grid-cols-2"},{default:i(()=>[o(l(N),{value:"informacion"},{default:i(()=>e[20]||(e[20]=[s("Información General")])),_:1}),o(l(N),{value:"formulario"},{default:i(()=>e[21]||(e[21]=[s("Constructor de Formulario")])),_:1})]),_:1}),o(l(q),{value:"informacion",class:"space-y-6"},{default:i(()=>[o(l(_),null,{default:i(()=>[o(l(v),null,{default:i(()=>[o(l(c),null,{default:i(()=>e[22]||(e[22]=[s("Información Básica")])),_:1}),o(l(g),null,{default:i(()=>e[23]||(e[23]=[s(" Define los datos principales del formulario ")])),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[r("div",null,[o(l(u),{htmlFor:"titulo"},{default:i(()=>e[24]||(e[24]=[s("Título *")])),_:1}),o(l(f),{id:"titulo",modelValue:l(t).titulo,"onUpdate:modelValue":e[1]||(e[1]=a=>l(t).titulo=a),placeholder:"Ej: Encuesta de Satisfacción",class:Q({"border-destructive":l(t).errors.titulo})},null,8,["modelValue","class"]),l(t).errors.titulo?(d(),m("p",nl,y(l(t).errors.titulo),1)):$("",!0)]),r("div",null,[o(l(u),{htmlFor:"descripcion"},{default:i(()=>e[25]||(e[25]=[s("Descripción")])),_:1}),o(l(D),{id:"descripcion",modelValue:l(t).descripcion,"onUpdate:modelValue":e[2]||(e[2]=a=>l(t).descripcion=a),placeholder:"Describe el propósito del formulario",rows:"3"},null,8,["modelValue"])]),r("div",null,[o(l(u),{htmlFor:"categoria"},{default:i(()=>e[26]||(e[26]=[s("Categoría")])),_:1}),o(l(j),{modelValue:l(t).categoria_id,"onUpdate:modelValue":e[3]||(e[3]=a=>l(t).categoria_id=a)},{default:i(()=>[o(l(w),{id:"categoria"},{default:i(()=>[o(l(k),{placeholder:"Selecciona una categoría"})]),_:1}),o(l(E),null,{default:i(()=>[(d(!0),m(x,null,B(n.categorias,a=>(d(),P(l(p),{key:a.id,value:a.id.toString()},{default:i(()=>[s(y(a.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),o(l(_),null,{default:i(()=>[o(l(v),null,{default:i(()=>[o(l(c),null,{default:i(()=>e[27]||(e[27]=[s("Control de Acceso")])),_:1}),o(l(g),null,{default:i(()=>e[28]||(e[28]=[s(" Define quién puede llenar el formulario ")])),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[r("div",null,[o(l(u),{htmlFor:"tipo_acceso"},{default:i(()=>e[29]||(e[29]=[s("Tipo de Acceso")])),_:1}),o(l(j),{modelValue:l(t).tipo_acceso,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).tipo_acceso=a)},{default:i(()=>[o(l(w),{id:"tipo_acceso"},{default:i(()=>[o(l(k))]),_:1}),o(l(E),null,{default:i(()=>[o(l(p),{value:"publico"},{default:i(()=>e[30]||(e[30]=[s("Público")])),_:1}),o(l(p),{value:"autenticado"},{default:i(()=>e[31]||(e[31]=[s("Usuarios Autenticados")])),_:1}),o(l(p),{value:"con_permiso"},{default:i(()=>e[32]||(e[32]=[s("Con Permiso Específico")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",dl,[r("div",ml,[o(l(u),null,{default:i(()=>e[33]||(e[33]=[s("Permitir Visitantes")])),_:1}),e[34]||(e[34]=r("p",{class:"text-sm text-muted-foreground"}," Usuarios no autenticados pueden llenar el formulario ",-1))]),o(l(S),{modelValue:l(t).permite_visitantes,"onUpdate:modelValue":e[5]||(e[5]=a=>l(t).permite_visitantes=a)},null,8,["modelValue"])]),l(t).permite_visitantes?(d(),m("div",fl,[r("div",pl,[o(l(u),null,{default:i(()=>e[35]||(e[35]=[s("Requiere Captcha")])),_:1}),e[36]||(e[36]=r("p",{class:"text-sm text-muted-foreground"}," Protección contra bots para visitantes ",-1))]),o(l(S),{modelValue:l(t).requiere_captcha,"onUpdate:modelValue":e[6]||(e[6]=a=>l(t).requiere_captcha=a)},null,8,["modelValue"])])):$("",!0)]),_:1})]),_:1}),o(l(_),null,{default:i(()=>[o(l(v),null,{default:i(()=>[o(l(c),null,{default:i(()=>e[37]||(e[37]=[s("Vigencia y Límites")])),_:1}),o(l(g),null,{default:i(()=>e[38]||(e[38]=[s(" Controla la disponibilidad del formulario ")])),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[r("div",_l,[r("div",null,[o(l(u),{htmlFor:"fecha_inicio"},{default:i(()=>e[39]||(e[39]=[s("Fecha de Inicio")])),_:1}),o(l(f),{id:"fecha_inicio",type:"datetime-local",modelValue:l(t).fecha_inicio,"onUpdate:modelValue":e[7]||(e[7]=a=>l(t).fecha_inicio=a)},null,8,["modelValue"])]),r("div",null,[o(l(u),{htmlFor:"fecha_fin"},{default:i(()=>e[40]||(e[40]=[s("Fecha de Fin")])),_:1}),o(l(f),{id:"fecha_fin",type:"datetime-local",modelValue:l(t).fecha_fin,"onUpdate:modelValue":e[8]||(e[8]=a=>l(t).fecha_fin=a),min:l(t).fecha_inicio},null,8,["modelValue","min"])])]),r("div",vl,[r("div",null,[o(l(u),{htmlFor:"limite_respuestas"},{default:i(()=>e[41]||(e[41]=[s("Límite Total de Respuestas")])),_:1}),o(l(f),{id:"limite_respuestas",type:"number",modelValue:l(t).limite_respuestas,"onUpdate:modelValue":e[9]||(e[9]=a=>l(t).limite_respuestas=a),modelModifiers:{number:!0},placeholder:"Sin límite",min:"1"},null,8,["modelValue"])]),r("div",null,[o(l(u),{htmlFor:"limite_por_usuario"},{default:i(()=>e[42]||(e[42]=[s("Respuestas por Usuario *")])),_:1}),o(l(f),{id:"limite_por_usuario",type:"number",modelValue:l(t).limite_por_usuario,"onUpdate:modelValue":e[10]||(e[10]=a=>l(t).limite_por_usuario=a),modelModifiers:{number:!0},min:"1"},null,8,["modelValue"])])])]),_:1})]),_:1}),o(l(_),null,{default:i(()=>[o(l(v),null,{default:i(()=>[o(l(c),null,{default:i(()=>e[43]||(e[43]=[s("Configuración Adicional")])),_:1}),o(l(g),null,{default:i(()=>e[44]||(e[44]=[s(" Opciones avanzadas del formulario ")])),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[r("div",null,[o(l(u),{htmlFor:"estado"},{default:i(()=>e[45]||(e[45]=[s("Estado Inicial")])),_:1}),o(l(j),{modelValue:l(t).estado,"onUpdate:modelValue":e[11]||(e[11]=a=>l(t).estado=a)},{default:i(()=>[o(l(w),{id:"estado"},{default:i(()=>[o(l(k))]),_:1}),o(l(E),null,{default:i(()=>[o(l(p),{value:"borrador"},{default:i(()=>e[46]||(e[46]=[s("Borrador")])),_:1}),o(l(p),{value:"publicado"},{default:i(()=>e[47]||(e[47]=[s("Publicado")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",null,[o(l(u),{htmlFor:"emails"},{default:i(()=>e[48]||(e[48]=[s("Emails de Notificación")])),_:1}),o(l(f),{id:"emails",modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=a=>b.value=a),placeholder:"email1@ejemplo.com, email2@ejemplo.com"},null,8,["modelValue"]),e[49]||(e[49]=r("p",{class:"text-sm text-muted-foreground mt-1"}," Separa múltiples emails con comas ",-1))]),r("div",null,[o(l(u),{htmlFor:"mensaje"},{default:i(()=>e[50]||(e[50]=[s("Mensaje de Confirmación")])),_:1}),o(l(D),{id:"mensaje",modelValue:l(t).mensaje_confirmacion,"onUpdate:modelValue":e[13]||(e[13]=a=>l(t).mensaje_confirmacion=a),placeholder:"Mensaje personalizado al completar el formulario",rows:"3"},null,8,["modelValue"])]),r("div",cl,[r("div",Vl,[o(l(u),null,{default:i(()=>e[51]||(e[51]=[s("Formulario Activo")])),_:1}),e[52]||(e[52]=r("p",{class:"text-sm text-muted-foreground"}," El formulario estará disponible ",-1))]),o(l(S),{modelValue:l(t).activo,"onUpdate:modelValue":e[14]||(e[14]=a=>l(t).activo=a)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),o(l(q),{value:"formulario",class:"space-y-6"},{default:i(()=>[o(l(_),null,{default:i(()=>[o(l(v),null,{default:i(()=>[o(l(c),null,{default:i(()=>e[53]||(e[53]=[s("Constructor de Formulario")])),_:1}),o(l(g),null,{default:i(()=>e[54]||(e[54]=[s(" Arrastra y suelta campos para construir tu formulario ")])),_:1})]),_:1}),o(l(V),null,{default:i(()=>[o(el,{modelValue:l(t).configuracion_campos,"onUpdate:modelValue":[e[15]||(e[15]=a=>l(t).configuracion_campos=a),O],disabled:!1,showEditableOption:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{ae as default};
