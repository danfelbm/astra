import{_ as z}from"./index-B3DtUUiE.js";import{_ as y}from"./createLucideIcon-BUECicj9.js";import{_ as f,c as p,a as C,b as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-CT1yUYTV.js";import{_ as G}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-CKdL2Xnf.js";import{_ as R}from"./UserLayout.vue_vue_type_script_setup_true_lang-BpHIOm3Q.js";import{d as X,r as J,c as k,i as g,e as t,f as a,q as K,w as r,g as s,b as m,j as u,m as l,t as c,n as B,x as q,h as d,v as E,F as Q}from"./app-CY4fpyRH.js";import{P as M}from"./plus-BiixfLKo.js";import{C as D}from"./circle-alert-Dkmz2jMW.js";import{S as $}from"./square-pen-Bc-FAQkV.js";import{C as N}from"./clock-CDDAup-t.js";import{C as P}from"./circle-x-BcyuwE7d.js";import{C as V}from"./circle-check-big-RJK9b0iD.js";import{M as W}from"./message-square-wQ4z8VD2.js";import{U as I}from"./user-BCWGsjcS.js";import{H as Y}from"./history-By8Inmd2.js";import{e as Z,C as aa}from"./SelectValue.vue_vue_type_script_setup_true_lang-BrHoEOV3.js";import"./index-Dcl2iUr2.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DKvOFvGa.js";import"./index-k-MsGPJi.js";import"./floating-ui.vue-BgG7CvxB.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-Dj9V6pbd.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Yf3VHYez.js";import"./VisuallyHidden-Dd9UDqIp.js";import"./Input.vue_vue_type_script_setup_true_lang-BBhemVbG.js";import"./x-Ng6EYabW.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-BFbD-hL4.js";import"./eye-DfxJFi3C.js";import"./chevron-right-CCQvkp6Z.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-CSfYhO8t.js";import"./index-C_PwubL4.js";import"./shield-DdGaTi6M.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-lKBiAPb3.js";import"./Label.vue_vue_type_script_setup_true_lang-sOJ62zyO.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CNvMp7ba.js";import"./index-Cs230O3d.js";import"./map-pin-BVjN3qg6.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D0_CQ0-L.js";import"./usePermissions-Dgnkacwv.js";import"./square-check-big-CpiUDS1p.js";import"./file-text-jsBbuVBq.js";import"./users-DEYBvhrR.js";import"./folder-open-wHQQaPbv.js";import"./index-DzmjX_KP.js";import"./check-D_a0JCVe.js";const ea={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ta={class:"flex items-start gap-3"},sa={class:"flex-1"},ra={class:"font-semibold text-lg mb-2 text-yellow-800 dark:text-yellow-200"},ia={class:"text-yellow-700 dark:text-yellow-300 whitespace-pre-wrap"},oa={class:"flex flex-col sm:flex-row sm:items-center gap-4"},da={class:"flex items-center gap-4 flex-1"},la={class:"flex-1"},na={class:"text-xl font-semibold mb-1"},ua={key:0,class:"text-muted-foreground mb-1"},ca={class:"text-muted-foreground mb-2"},ma={key:1,class:"flex items-center gap-2 flex-wrap"},fa={key:0,class:"w-full sm:w-auto"},pa=["innerHTML"],xa={key:2},ba={class:"grid gap-4 md:grid-cols-3"},va={class:"flex items-center gap-2"},ha={class:"flex items-center gap-2"},ga={class:"flex items-center gap-2"},wa={class:"flex items-center gap-2"},ya={class:"text-xs text-muted-foreground"},Ca={class:"text-xs text-muted-foreground"},_a={class:"flex gap-1"},pe=X({__name:"Dashboard",props:{candidatura:{},configuracion:{},bloqueo:{},canCreateOwn:{type:Boolean},canEditOwn:{type:Boolean},canViewPublic:{type:Boolean}},setup(i){const o=i,T=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mi Candidatura",href:"#"}],x=J(!1),b=k(()=>!!o.candidatura),A=k(()=>{if(!o.candidatura)return M;switch(o.candidatura.estado){case"aprobado":return V;case"rechazado":return P;case"pendiente":return N;case"borrador":return $;default:return D}}),H=k(()=>{if(!o.candidatura)return"text-blue-600";switch(o.candidatura.estado){case"aprobado":return"text-green-600";case"rechazado":return"text-red-600";case"pendiente":return"text-blue-600";case"borrador":return"text-yellow-600";default:return"text-gray-600"}}),w=k(()=>{if(!o.candidatura)return o.bloqueo.activo?null:{text:"Crear Perfil de Candidatura",href:"/miembro/candidaturas/create",icon:M,description:"Completa tu perfil para poder postularte a convocatorias"};if(o.candidatura.puede_editar){let n="Editar Candidatura",e="Completa o actualiza la información de tu candidatura";return o.candidatura.estado==="borrador"&&o.bloqueo.activo&&o.candidatura.subsanar?e="Tu candidatura ha sido habilitada para subsanación. Puedes editarla aunque el sistema esté bloqueado.":o.candidatura.estado==="rechazado"?e="Corrige los aspectos señalados y reenvía tu candidatura":o.candidatura.estado==="aprobado"?(n="Editar Campos Permitidos",e="Solo puedes editar campos marcados como editables. Los cambios requerirán nueva aprobación."):o.candidatura.tiene_datos||(n="Completar Candidatura"),{text:n,href:`/miembro/candidaturas/${o.candidatura.id}/edit`,icon:$,description:e}}return null}),L=n=>{if(!n)return"Fecha no disponible";try{const e=new Date(n);if(isNaN(e.getTime())){const v=n.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})/);if(v){const[,h,F,j,O,U]=v,S=new Date(parseInt(j),parseInt(F)-1,parseInt(h),parseInt(O),parseInt(U));if(!isNaN(S.getTime()))return S.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return n}return e.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error al formatear fecha:",e),n||"Fecha no disponible"}};return(n,e)=>(l(),g(Q,null,[t(a(K),{title:"Mi Candidatura"}),t(R,{breadcrumbs:T},{default:r(()=>{var v;return[s("div",ea,[e[15]||(e[15]=s("div",{class:"flex items-center justify-between"},[s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Gestiona tu perfil de candidatura para participar en convocatorias ")])],-1)),i.bloqueo.activo&&(!i.candidatura||i.candidatura.estado==="borrador"&&!i.candidatura.subsanar)?(l(),m(a(f),{key:0,class:"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-950/20"},{default:r(()=>[t(a(p),{class:"p-6"},{default:r(()=>[s("div",ta,[t(a(D),{class:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-0.5"}),s("div",sa,[s("h3",ra,c(i.bloqueo.titulo),1),s("p",ia,c(i.bloqueo.mensaje),1)])])]),_:1})]),_:1})):u("",!0),t(a(f),{class:"border-2"},{default:r(()=>[t(a(p),{class:"p-6"},{default:r(()=>{var h;return[s("div",oa,[s("div",da,[s("div",{class:B([H.value,"p-3 rounded-full bg-opacity-10 flex-shrink-0"])},[(l(),m(q(A.value),{class:"h-8 w-8"}))],2),s("div",la,[s("h3",na,c(b.value?i.candidatura.estado==="pendiente"?"Candidatura enviada":i.candidatura.estado_label:"Sin Candidatura"),1),((h=i.candidatura)==null?void 0:h.estado)==="pendiente"?(l(),g("p",ua," Tu Candidatura ahora está pendiente de revisión ")):u("",!0),s("p",ca,c(b.value?`Versión ${i.candidatura.version} - Actualizada el ${L(i.candidatura.updated_at)}`:"Aún no has creado tu perfil de candidatura"),1),b.value?(l(),g("div",ma,[t(a(z),{class:B(i.candidatura.estado_color)},{default:r(()=>[d(c(i.candidatura.estado_label),1)]),_:1},8,["class"]),i.candidatura.tiene_datos?u("",!0):(l(),m(a(z),{key:0,variant:"outline",class:"bg-yellow-50 text-yellow-700"},{default:r(()=>[...e[1]||(e[1]=[d(" Incompleto ",-1)])]),_:1}))])):u("",!0)])]),w.value?(l(),g("div",fa,[t(a(E),{href:w.value.href,class:"block"},{default:r(()=>[t(a(y),{class:"w-full sm:w-auto"},{default:r(()=>[(l(),m(q(w.value.icon),{class:"mr-2 h-4 w-4"})),d(" "+c(w.value.text),1)]),_:1})]),_:1},8,["href"])])):u("",!0)])]}),_:1})]),_:1}),(v=i.candidatura)!=null&&v.comentarios_admin?(l(),m(a(f),{key:1,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:r(()=>[t(a(C),null,{default:r(()=>[t(a(_),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:r(()=>[t(a(W),{class:"h-5 w-5"}),e[2]||(e[2]=d(" Comentarios de la comisión ",-1))]),_:1})]),_:1}),t(a(p),null,{default:r(()=>[s("div",{class:"text-blue-700 dark:text-blue-300 prose prose-sm max-w-none",innerHTML:i.candidatura.comentarios_admin},null,8,pa)]),_:1})]),_:1})):u("",!0),b.value&&x.value?(l(),g("div",xa,[t(G,{"candidatura-id":i.candidatura.id,"version-actual":i.candidatura.version},null,8,["candidatura-id","version-actual"])])):u("",!0),s("div",ba,[t(a(f),{class:"h-fit"},{default:r(()=>[t(a(C),{class:"pb-3"},{default:r(()=>[t(a(_),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(I),{class:"h-4 w-4"}),e[3]||(e[3]=d(" Estados ",-1))]),_:1}),e[4]||(e[4]=s("p",{class:"text-xs text-muted-foreground mt-1"},"Este es el listado de posibles estados:",-1))]),_:1}),t(a(p),{class:"space-y-2"},{default:r(()=>[s("div",va,[t(a($),{class:"h-3 w-3 text-yellow-600"}),e[5]||(e[5]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Borrador:"),d(" editable dentro de tiempos de subsanación")],-1))]),s("div",ha,[t(a(N),{class:"h-3 w-3 text-blue-600"}),e[6]||(e[6]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Pendiente:"),d(" En revisión")],-1))]),s("div",ga,[t(a(V),{class:"h-3 w-3 text-green-600"}),e[7]||(e[7]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Aprobado:"),d(" Listo")],-1))]),s("div",wa,[t(a(P),{class:"h-3 w-3 text-red-600"}),e[8]||(e[8]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Rechazado:"),d(" solicitar revision a comité de garantías")],-1))])]),_:1})]),_:1}),t(a(f),{class:"h-fit"},{default:r(()=>[t(a(C),{class:"pb-3"},{default:r(()=>[t(a(_),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(D),{class:"h-4 w-4"}),e[9]||(e[9]=d(" Configuración ",-1))]),_:1})]),_:1}),t(a(p),{class:"space-y-2"},{default:r(()=>[s("div",null,[e[10]||(e[10]=s("p",{class:"text-xs font-medium"},"Campos:",-1)),s("p",ya,c(i.configuracion.resumen),1)]),s("div",null,[e[11]||(e[11]=s("p",{class:"text-xs font-medium"},"Versión:",-1)),s("p",Ca,"v"+c(i.configuracion.version),1)])]),_:1})]),_:1}),b.value?(l(),m(a(f),{key:0,class:"h-fit"},{default:r(()=>[t(a(C),{class:"pb-3"},{default:r(()=>[t(a(_),{class:"text-base"},{default:r(()=>[...e[12]||(e[12]=[d("Acciones",-1)])]),_:1})]),_:1}),t(a(p),{class:"space-y-2"},{default:r(()=>[t(a(y),{onClick:e[0]||(e[0]=h=>x.value=!x.value),variant:"outline",class:"w-full"},{default:r(()=>[t(a(Y),{class:"mr-2 h-4 w-4"}),d(" "+c(x.value?"Ocultar":"Mostrar")+" Historial ",1),(l(),m(q(x.value?a(Z):a(aa)),{class:"ml-auto h-4 w-4"}))]),_:1}),s("div",_a,[t(a(E),{href:`/miembro/candidaturas/${i.candidatura.id}`},{default:r(()=>[t(a(y),{variant:"outline",size:"sm"},{default:r(()=>[t(a(I),{class:"mr-1 h-3 w-3"}),e[13]||(e[13]=d(" Ver ",-1))]),_:1})]),_:1},8,["href"]),i.candidatura.puede_editar?(l(),m(a(E),{key:0,href:`/miembro/candidaturas/${i.candidatura.id}/edit`},{default:r(()=>[t(a(y),{variant:"outline",size:"sm"},{default:r(()=>[t(a($),{class:"mr-1 h-3 w-3"}),e[14]||(e[14]=d(" Editar ",-1))]),_:1})]),_:1},8,["href"])):u("",!0)])]),_:1})]),_:1})):u("",!0)])])]}),_:1})],64))}});export{pe as default};
