import{d as W,c as y,r as X,i as m,e as d,f as t,u as e,p as Z,w as s,g as a,t as r,b as M,j as x,P as U,h as i,n as T,F as E,k as q}from"./app-CbA_dzrH.js";import{_ as ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DjfisSTq.js";import{_ as g,a as b,c as v,b as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dpl1EP6e.js";import{_ as $}from"./CardDescription.vue_vue_type_script_setup_true_lang-FdnBhRW4.js";import{c as te,_ as R}from"./createLucideIcon-0y3HvBb2.js";import{_ as O}from"./index-MuREUf8q.js";import{_ as se}from"./Progress.vue_vue_type_script_setup_true_lang-D8y6e2Bc.js";import{_ as N,a as j,b as P}from"./index-BGfSt6nP.js";import{_ as ae,a as le,b as S,c as z}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-nmj-UEmO.js";import{_ as oe,a as ne}from"./index-CMryySum.js";import{n as re,d as ie,f as Y,e as G}from"./es-BDPlFIsO.js";import{A as de}from"./arrow-left-DWk22nOp.js";import{S as ue}from"./square-pen-CVrov98_.js";import{F as me}from"./flag-Dx8Rkwge.js";import{C as fe}from"./clock-Bx6DQ-_s.js";import{F as pe}from"./file-text-DINmkRZl.js";import{U as ce}from"./users-DLZP89St.js";import{C as J}from"./calendar-BOFnEXb6.js";import{C as _e}from"./circle-alert-CfNQ3Vlu.js";import{p as K}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-C4x6rJ8B.js";import"./index-D-PGeZ3t.js";import"./floating-ui.vue-D3EH1Xba.js";import"./x-CxSWfWOJ.js";import"./Input.vue_vue_type_script_setup_true_lang-Dw2oMjuZ.js";import"./index-DzUkqZxm.js";import"./shield-yBic2gp-.js";import"./user-BnDczykq.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-H44qAxpr.js";import"./chevron-right-pq_ChJ0s.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-H8FdC1v8.js";import"./VisuallyHidden-BOU54Fpc.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-C7VbuHoF.js";import"./check-8t2yOxAa.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-BHOcaT7W.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-fWHHAQt9.js";import"./index-CXCj42Z3.js";import"./map-pin-B0r5dLQM.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-nF_8TJte.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CPMNIlI6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-B4CsJOKK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BZUuILpY.js";import"./tag-DBRua3DS.js";import"./target-B8OPFMH2.js";import"./vote-5ymqB6Fb.js";import"./folder-open-B03CPFE8.js";import"./send-BUC0oswk.js";import"./briefcase-BEGziJue.js";import"./megaphone-CDZIxwTF.js";import"./user-check-B3Jm4jmh.js";import"./clipboard-list-wMp9Eq1A.js";import"./mail-I3hCy8Tx.js";import"./message-square-RBI0Tfwc.js";import"./external-link-CKKN5QSr.js";import"./panel-left-ivBXt___.js";import"./index-DPtKDKxs.js";import"./RovingFocusItem-CIXcS1m3.js";import"./utils-D2aazO7p.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=te("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function be(p,n,c){const[_,h]=re(c==null?void 0:c.in,p,n),w=Q(_,h),k=Math.abs(ie(_,h));_.setDate(_.getDate()-w*k);const V=+(Q(_,h)===-w),C=w*(k-V);return C===0?0:C}function Q(p,n){const c=p.getFullYear()-n.getFullYear()||p.getMonth()-n.getMonth()||p.getDate()-n.getDate()||p.getHours()-n.getHours()||p.getMinutes()-n.getMinutes()||p.getSeconds()-n.getSeconds()||p.getMilliseconds()-n.getMilliseconds();return c<0?-1:c>0?1:c}const ve={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ye={class:"flex items-center justify-between"},he={class:"text-3xl font-bold"},xe={class:"text-muted-foreground mt-2"},$e={class:"flex gap-2"},we={class:"grid gap-4 md:grid-cols-4"},ke={class:"flex items-center gap-2"},Ce={class:"font-medium capitalize"},Me={class:"space-y-2"},Ae={class:"flex justify-between"},Ve={class:"text-2xl font-bold"},Fe={key:0,class:"flex items-center gap-2"},Ee={class:"font-medium"},Ne={key:1,class:"text-muted-foreground"},je={key:0},Pe={class:"text-sm"},Se={class:"grid gap-4 md:grid-cols-2"},ze={class:"flex items-center gap-2"},Ie={class:"flex items-center gap-2"},Be={key:1},He={class:"border-t pt-4"},Le={class:"grid gap-2 text-sm"},De={class:"flex justify-between"},Ue={class:"flex justify-between"},Te={class:"flex justify-between"},qe={key:0,class:"flex items-center gap-3"},Re={class:"font-medium"},Oe={class:"text-sm text-muted-foreground"},Ye={key:1,class:"text-muted-foreground"},Ge={key:0,class:"space-y-3"},Je={class:"flex items-center gap-3"},Ke={class:"font-medium"},Qe={class:"text-sm text-muted-foreground"},We={key:1,class:"text-muted-foreground"},Xe={key:0,class:"space-y-4"},Ze={class:"flex-1"},et={class:"text-sm"},tt={class:"font-medium"},st={class:"text-xs text-muted-foreground mt-1"},at={key:1,class:"text-muted-foreground"},us=W({__name:"Show",props:{proyecto:{},hito:{},entregable:{},usuariosAsignados:{},actividades:{},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(p){const n=p,c=y(()=>n.usuariosAsignados||[]),_=y(()=>n.actividades||[]),h=X("detalles"),w=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:n.proyecto.nombre,href:`/admin/proyectos/${n.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${n.proyecto.id}/hitos`},{title:n.hito.nombre,href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}`},{title:"Entregables",href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`},{title:n.entregable.nombre}],k=y(()=>({pendiente:"secondary",en_progreso:"default",completado:"outline",cancelado:"destructive"})[n.entregable.estado]||"default"),V=y(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[n.entregable.estado]||n.entregable.estado),C=y(()=>({baja:"text-blue-500",media:"text-yellow-500",alta:"text-red-500"})[n.entregable.prioridad]||""),f=y(()=>n.entregable.fecha_fin?be(new Date(n.entregable.fecha_fin),new Date):null);y(()=>{if(n.entregable.estado==="completado")return"Completado";if(n.entregable.estado==="cancelado")return"Cancelado";if(f.value!==null){if(f.value<0)return"Vencido";if(f.value===0)return"Vence hoy";if(f.value<=3)return"Por vencer"}return"En curso"});const I=o=>o?Y(K(o),"d 'de' MMMM 'de' yyyy",{locale:G}):"No definida",F=o=>Y(K(o),"d MMM yyyy 'a las' HH:mm",{locale:G});return(o,l)=>(d(),m(E,null,[t(e(Z),{title:`Entregable - ${o.entregable.nombre}`},null,8,["title"]),t(ee,{breadcrumbs:w},{default:s(()=>[a("div",ve,[a("div",ye,[a("div",null,[a("h1",he,r(o.entregable.nombre),1),a("p",xe,' Entregable del hito "'+r(o.hito.nombre)+'" ',1)]),a("div",$e,[t(e(U),{href:`/admin/proyectos/${o.proyecto.id}/hitos/${o.hito.id}/entregables`},{default:s(()=>[t(e(R),{variant:"outline",size:"sm"},{default:s(()=>[t(e(de),{class:"h-4 w-4 mr-2"}),l[1]||(l[1]=i(" Volver ",-1))]),_:1})]),_:1},8,["href"]),o.canEdit?(d(),M(e(U),{key:0,href:`/admin/proyectos/${o.proyecto.id}/hitos/${o.hito.id}/entregables/${o.entregable.id}/edit`},{default:s(()=>[t(e(R),{variant:"outline",size:"sm"},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),l[2]||(l[2]=i(" Editar ",-1))]),_:1})]),_:1},8,["href"])):x("",!0)])]),a("div",we,[t(e(g),null,{default:s(()=>[t(e(b),{class:"pb-2"},{default:s(()=>[t(e($),null,{default:s(()=>[...l[3]||(l[3]=[i("Estado",-1)])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(O),{variant:k.value,class:"text-sm"},{default:s(()=>[i(r(V.value),1)]),_:1},8,["variant"])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(b),{class:"pb-2"},{default:s(()=>[t(e($),null,{default:s(()=>[...l[4]||(l[4]=[i("Prioridad",-1)])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[a("div",ke,[t(e(me),{class:T(["h-4 w-4",C.value])},null,8,["class"]),a("span",Ce,r(o.entregable.prioridad),1)])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(b),{class:"pb-2"},{default:s(()=>[t(e($),null,{default:s(()=>[...l[5]||(l[5]=[i("Progreso",-1)])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[a("div",Me,[a("div",Ae,[a("span",Ve,r(o.entregable.porcentaje_completado)+"%",1)]),t(e(se),{"model-value":o.entregable.porcentaje_completado},null,8,["model-value"])])]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(b),{class:"pb-2"},{default:s(()=>[t(e($),null,{default:s(()=>[...l[6]||(l[6]=[i("Tiempo Restante",-1)])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[f.value!==null?(d(),m("div",Fe,[t(e(fe),{class:T(["h-4 w-4",{"text-red-500":f.value<0,"text-yellow-500":f.value>=0&&f.value<=3,"text-green-500":f.value>3}])},null,8,["class"]),a("span",Ee,r(f.value<0?`Vencido hace ${Math.abs(f.value)} días`:f.value===0?"Vence hoy":`${f.value} días`),1)])):(d(),m("span",Ne,"Sin fecha límite"))]),_:1})]),_:1})]),t(e(ae),{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=u=>h.value=u),class:"flex-1"},{default:s(()=>[t(e(le),null,{default:s(()=>[t(e(S),{value:"detalles"},{default:s(()=>[t(e(pe),{class:"h-4 w-4 mr-2"}),l[7]||(l[7]=i(" Detalles ",-1))]),_:1}),t(e(S),{value:"equipo"},{default:s(()=>[t(e(ce),{class:"h-4 w-4 mr-2"}),l[8]||(l[8]=i(" Equipo ",-1))]),_:1}),t(e(S),{value:"actividad"},{default:s(()=>[t(e(ge),{class:"h-4 w-4 mr-2"}),l[9]||(l[9]=i(" Actividad ",-1))]),_:1})]),_:1}),t(e(z),{value:"detalles",class:"space-y-4"},{default:s(()=>[t(e(g),null,{default:s(()=>[t(e(b),null,{default:s(()=>[t(e(A),null,{default:s(()=>[...l[10]||(l[10]=[i("Información General",-1)])]),_:1})]),_:1}),t(e(v),{class:"space-y-4"},{default:s(()=>[o.entregable.descripcion?(d(),m("div",je,[l[11]||(l[11]=a("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),a("p",Pe,r(o.entregable.descripcion),1)])):x("",!0),a("div",Se,[a("div",null,[l[12]||(l[12]=a("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Inicio",-1)),a("div",ze,[t(e(J),{class:"h-4 w-4"}),a("span",null,r(I(o.entregable.fecha_inicio)),1)])]),a("div",null,[l[13]||(l[13]=a("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Fin",-1)),a("div",Ie,[t(e(J),{class:"h-4 w-4"}),a("span",null,r(I(o.entregable.fecha_fin)),1)])])]),o.entregable.notas?(d(),m("div",Be,[l[14]||(l[14]=a("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Notas",-1)),t(e(oe),null,{default:s(()=>[t(e(_e),{class:"h-4 w-4"}),t(e(ne),null,{default:s(()=>[i(r(o.entregable.notas),1)]),_:1})]),_:1})])):x("",!0),a("div",He,[l[18]||(l[18]=a("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Metadatos",-1)),a("div",Le,[a("div",De,[l[15]||(l[15]=a("span",{class:"text-muted-foreground"},"Creado:",-1)),a("span",null,r(F(o.entregable.created_at)),1)]),a("div",Ue,[l[16]||(l[16]=a("span",{class:"text-muted-foreground"},"Última actualización:",-1)),a("span",null,r(F(o.entregable.updated_at)),1)]),a("div",Te,[l[17]||(l[17]=a("span",{class:"text-muted-foreground"},"Orden de visualización:",-1)),a("span",null,r(o.entregable.orden),1)])])])]),_:1})]),_:1})]),_:1}),t(e(z),{value:"equipo",class:"space-y-4"},{default:s(()=>[t(e(g),null,{default:s(()=>[t(e(b),null,{default:s(()=>[t(e(A),null,{default:s(()=>[...l[19]||(l[19]=[i("Responsable Principal",-1)])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[o.entregable.responsable?(d(),m("div",qe,[t(e(N),{class:"h-10 w-10"},{default:s(()=>[o.entregable.responsable.avatar?(d(),M(e(j),{key:0,src:o.entregable.responsable.avatar},null,8,["src"])):x("",!0),t(e(P),null,{default:s(()=>[i(r(o.entregable.responsable.name.substring(0,2).toUpperCase()),1)]),_:1})]),_:1}),a("div",null,[a("p",Re,r(o.entregable.responsable.name),1),a("p",Oe,r(o.entregable.responsable.email),1)])])):(d(),m("p",Ye,"No hay responsable asignado"))]),_:1})]),_:1}),t(e(g),null,{default:s(()=>[t(e(b),null,{default:s(()=>[t(e(A),null,{default:s(()=>[...l[20]||(l[20]=[i("Colaboradores",-1)])]),_:1}),t(e($),null,{default:s(()=>[i(r(c.value.length)+" usuarios asignados ",1)]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[c.value.length>0?(d(),m("div",Ge,[(d(!0),m(E,null,q(c.value,u=>(d(),m("div",{key:u.user_id,class:"flex items-center justify-between p-3 bg-muted rounded-lg"},[a("div",Je,[t(e(N),{class:"h-8 w-8"},{default:s(()=>[u.user.avatar?(d(),M(e(j),{key:0,src:u.user.avatar},null,8,["src"])):x("",!0),t(e(P),null,{default:s(()=>[i(r(u.user.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),a("div",null,[a("p",Ke,r(u.user.name),1),a("p",Qe,r(u.user.email),1)])]),t(e(O),{variant:"outline"},{default:s(()=>[i(r(u.rol),1)]),_:2},1024)]))),128))])):(d(),m("p",We,"No hay colaboradores asignados"))]),_:1})]),_:1})]),_:1}),t(e(z),{value:"actividad",class:"space-y-4"},{default:s(()=>[t(e(g),null,{default:s(()=>[t(e(b),null,{default:s(()=>[t(e(A),null,{default:s(()=>[...l[21]||(l[21]=[i("Historial de Actividad",-1)])]),_:1}),t(e($),null,{default:s(()=>[...l[22]||(l[22]=[i(" Registro de cambios y eventos del entregable ",-1)])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[_.value.length>0?(d(),m("div",Xe,[(d(!0),m(E,null,q(_.value,u=>{var B;return d(),m("div",{key:u.id,class:"flex gap-3 pb-4 border-b last:border-0"},[t(e(N),{class:"h-8 w-8"},{default:s(()=>{var H;return[(H=u.causer)!=null&&H.avatar?(d(),M(e(j),{key:0,src:u.causer.avatar},null,8,["src"])):x("",!0),t(e(P),null,{default:s(()=>{var L,D;return[i(r(((D=(L=u.causer)==null?void 0:L.name)==null?void 0:D.substring(0,2).toUpperCase())||"SI"),1)]}),_:2},1024)]}),_:2},1024),a("div",Ze,[a("p",et,[a("span",tt,r(((B=u.causer)==null?void 0:B.name)||"Sistema"),1),i(" "+r(u.description),1)]),a("p",st,r(F(u.created_at)),1)])])}),128))])):(d(),m("p",at,"No hay actividad registrada"))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{us as default};
