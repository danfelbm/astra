import{d as y,k as c,C as $,c as g,w as N,p as U,j as b,o as f,e as d,b as t,f as s,u as e,m as E,h as q,g as l,a as P,F as k,r as A,t as I,i as T}from"./app-8pO39dLK.js";import{_ as n}from"./InputError.vue_vue_type_script_setup_true_lang-B1er0Hoc.js";import{_ as j}from"./TextLink.vue_vue_type_script_setup_true_lang-B_iWbz7O.js";import{_ as B}from"./createLucideIcon-Hz4OZlOx.js";import{_ as m,a as u}from"./Label.vue_vue_type_script_setup_true_lang-UcaRVaEG.js";import{_ as R,a as S,b as D,c as F,d as L}from"./SelectValue.vue_vue_type_script_setup_true_lang-00hBXGh6.js";import{_ as M}from"./GeographicSelector.vue_vue_type_script_setup_true_lang-DeejVEmn.js";import{_ as G}from"./AuthLayout.vue_vue_type_script_setup_true_lang-DggMWuN-.js";import{L as Y}from"./loader-circle-DyPECFyn.js";import"./VisuallyHidden-Cs7tJ_ME.js";import"./check-Cwswp745.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-DiDSRsNr.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C-S9ZHhr.js";const Z={class:"grid gap-6"},z={class:"grid gap-2"},H={class:"grid gap-2"},J={class:"grid gap-4 md:grid-cols-3"},K={class:"grid gap-2 md:col-span-1"},O={class:"grid gap-2 md:col-span-2"},Q={class:"grid gap-2"},W={class:"grid gap-2"},X={class:"grid gap-2"},h={class:"grid gap-2"},ee={class:"text-center text-sm text-muted-foreground"},_e=y({__name:"Register",setup(oe){const w=[{value:"CC",label:"CC (Cédula de Ciudadanía)"},{value:"TI",label:"TI (Tarjeta de Identidad)"},{value:"CE",label:"CE (Cédula de Extranjería)"},{value:"PA",label:"PA (Pasaporte)"}],V=c([]);c([]);const o=$({name:"",email:"",tipo_documento:"CC",documento_identidad:"",telefono:"",territorio_id:null,departamento_id:null,municipio_id:null,localidad_id:null,password:"",password_confirmation:""}),v=g(()=>o.tipo_documento==="PA"?/^[A-Z0-9]+$/i:/^[0-9]+$/),_=g(()=>o.tipo_documento==="PA"?"text":"numeric"),p=c("");N(()=>o.documento_identidad,i=>{i&&!v.value.test(i)?o.tipo_documento==="PA"?p.value="El pasaporte debe contener solo letras y números":p.value="El documento debe contener solo números":p.value=""});const C=i=>{o.territorio_id=i.territorio_id||null,o.departamento_id=i.departamento_id||null,o.municipio_id=i.municipio_id||null,o.localidad_id=i.localidad_id||null};U(async()=>{try{const a=await(await fetch("/api/public/geographic/territorios")).json();V.value=a}catch(i){console.error("Error cargando datos geográficos:",i)}});const x=()=>{p.value="",o.post(route("register"),{onFinish:()=>o.reset("password","password_confirmation")})};return(i,a)=>(f(),b(G,{title:"Crear una cuenta",description:"Ingresa tus datos para crear tu cuenta"},{default:d(()=>[t(e(E),{title:"Registro"}),s("form",{onSubmit:q(x,["prevent"]),class:"flex flex-col gap-6"},[s("div",Z,[s("div",z,[t(e(m),{for:"name"},{default:d(()=>a[7]||(a[7]=[l("Nombre completo")])),_:1}),t(e(u),{id:"name",type:"text",required:"",autofocus:"",tabindex:"1",autocomplete:"name",modelValue:e(o).name,"onUpdate:modelValue":a[0]||(a[0]=r=>e(o).name=r),placeholder:"Nombre completo"},null,8,["modelValue"]),t(n,{message:e(o).errors.name},null,8,["message"])]),s("div",H,[t(e(m),{for:"email"},{default:d(()=>a[8]||(a[8]=[l("Correo electrónico")])),_:1}),t(e(u),{id:"email",type:"email",required:"",tabindex:"2",autocomplete:"email",modelValue:e(o).email,"onUpdate:modelValue":a[1]||(a[1]=r=>e(o).email=r),placeholder:"correo@ejemplo.com"},null,8,["modelValue"]),t(n,{message:e(o).errors.email},null,8,["message"])]),s("div",J,[s("div",K,[t(e(m),{for:"tipo_documento"},{default:d(()=>a[9]||(a[9]=[l("Tipo de documento")])),_:1}),t(e(R),{modelValue:e(o).tipo_documento,"onUpdate:modelValue":a[2]||(a[2]=r=>e(o).tipo_documento=r),required:""},{default:d(()=>[t(e(S),{id:"tipo_documento",tabindex:"3"},{default:d(()=>[t(e(D),{placeholder:"Seleccionar tipo"})]),_:1}),t(e(F),null,{default:d(()=>[(f(),P(k,null,A(w,r=>t(e(L),{key:r.value,value:r.value},{default:d(()=>[l(I(r.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"]),t(n,{message:e(o).errors.tipo_documento},null,8,["message"])]),s("div",O,[t(e(m),{for:"documento_identidad"},{default:d(()=>a[10]||(a[10]=[l("Número de documento")])),_:1}),t(e(u),{id:"documento_identidad",type:(_.value==="numeric","text"),inputmode:_.value,required:"",tabindex:"4",autocomplete:"off",modelValue:e(o).documento_identidad,"onUpdate:modelValue":a[3]||(a[3]=r=>e(o).documento_identidad=r),placeholder:"Número de documento"},null,8,["type","inputmode","modelValue"]),t(n,{message:p.value||e(o).errors.documento_identidad},null,8,["message"])])]),s("div",Q,[t(e(m),{for:"telefono"},{default:d(()=>a[11]||(a[11]=[l("Teléfono")])),_:1}),t(e(u),{id:"telefono",type:"text",inputmode:"numeric",required:"",tabindex:"5",autocomplete:"tel",modelValue:e(o).telefono,"onUpdate:modelValue":a[4]||(a[4]=r=>e(o).telefono=r),placeholder:"Número de teléfono"},null,8,["modelValue"]),t(n,{message:e(o).errors.telefono},null,8,["message"])]),s("div",W,[t(e(m),null,{default:d(()=>a[12]||(a[12]=[l("Ubicación (opcional)")])),_:1}),t(M,{modelValue:{territorio_id:e(o).territorio_id,departamento_id:e(o).departamento_id,municipio_id:e(o).municipio_id,localidad_id:e(o).localidad_id},"onUpdate:modelValue":C,mode:"single",showCard:!1,description:"Selecciona tu ubicación"},null,8,["modelValue"]),t(n,{message:e(o).errors.territorio_id||e(o).errors.departamento_id||e(o).errors.municipio_id||e(o).errors.localidad_id},null,8,["message"])]),s("div",X,[t(e(m),{for:"password"},{default:d(()=>a[13]||(a[13]=[l("Contraseña")])),_:1}),t(e(u),{id:"password",type:"password",required:"",tabindex:"6",autocomplete:"new-password",modelValue:e(o).password,"onUpdate:modelValue":a[5]||(a[5]=r=>e(o).password=r),placeholder:"Contraseña"},null,8,["modelValue"]),t(n,{message:e(o).errors.password},null,8,["message"])]),s("div",h,[t(e(m),{for:"password_confirmation"},{default:d(()=>a[14]||(a[14]=[l("Confirmar contraseña")])),_:1}),t(e(u),{id:"password_confirmation",type:"password",required:"",tabindex:"7",autocomplete:"new-password",modelValue:e(o).password_confirmation,"onUpdate:modelValue":a[6]||(a[6]=r=>e(o).password_confirmation=r),placeholder:"Confirmar contraseña"},null,8,["modelValue"]),t(n,{message:e(o).errors.password_confirmation},null,8,["message"])]),t(e(B),{type:"submit",class:"mt-2 w-full",tabindex:"8",disabled:e(o).processing},{default:d(()=>[e(o).processing?(f(),b(e(Y),{key:0,class:"h-4 w-4 animate-spin"})):T("",!0),a[15]||(a[15]=l(" Crear cuenta "))]),_:1},8,["disabled"])]),s("div",ee,[a[17]||(a[17]=l(" ¿Ya tienes una cuenta? ")),t(j,{href:i.route("login"),class:"underline underline-offset-4",tabindex:"9"},{default:d(()=>a[16]||(a[16]=[l("Iniciar sesión")])),_:1},8,["href"])])],32)]),_:1}))}});export{_e as default};
