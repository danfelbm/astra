import{d as ve,r as V,c as I,o as pe,y as _e,i as v,e as m,f as s,u as t,p as ge,w as r,g as l,b as w,j as p,t as n,h as u,q as Q,n as S,F as j,k as T,A as xe,ai as be,W as h}from"./app-D8b1iyhG.js";import{_ as K}from"./index-BFz4Rjr1.js";import{_ as g}from"./createLucideIcon-BzCZ4Ux9.js";import{_ as x,a as P,b as O,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-CpubZFQk.js";import{_ as ye}from"./Progress.vue_vue_type_script_setup_true_lang-3lBB9Alf.js";import{_ as Ce,a as we}from"./index-DPm6YMhX.js";import{_ as he,a as ke,b as $e,d as Ee,e as Ve}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D5C9pVNC.js";import{_ as Se,a as Y}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-Crew8DVj.js";import{_ as Z}from"./Label.vue_vue_type_script_setup_true_lang-DXnOW2ZY.js";import{_ as Fe,a as Ie,b as ee,c as D,d as je,e as z}from"./TableHeader.vue_vue_type_script_setup_true_lang-Bmp4aWmy.js";import{_ as Ae}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CNKKI51X.js";import{C as te}from"./circle-alert-BAiY2yAu.js";import{C as oe}from"./circle-x-DsYKV8ih.js";import{C as U}from"./circle-check-big-JRbHwfFc.js";import{C as se}from"./clock-DfPMpIv_.js";import{A as Ne}from"./arrow-left-DAvFF-xx.js";import{F as ae}from"./file-text-D-NxJb2x.js";import{U as Te}from"./users-bMGn_vPW.js";import{T as F}from"./triangle-alert-IfWxoaA0.js";import"./index-_HrGOJG6.js";import"./VisuallyHidden-D42UHKy9.js";import"./Input.vue_vue_type_script_setup_true_lang-DEoN5cyd.js";import"./nullish-CHIgUVhi.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BW9QKckn.js";import"./check-DAlbwhOo.js";import"./floating-ui.vue-D_44iLrk.js";import"./x-Di3hRZd2.js";import"./RovingFocusItem-DJ7qzBf4.js";import"./utils-DYqR3Zf-.js";import"./VisuallyHiddenInput-Bwl-uNH5.js";import"./circle-CijP4krc.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-DfKxWH3N.js";import"./index-9EknitmW.js";import"./index-yOcDiT7U.js";import"./shield-CrMFR-sA.js";import"./user-DoEsQuJB.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Clw7uZZX.js";import"./chevron-right-C1p0_YAD.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CPkoHE-3.js";import"./index-DFpoRNc9.js";import"./map-pin-DH233x2C.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D6e-kB5n.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CphnuyJe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-C6uCeRcr.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cl6UTNVG.js";import"./tag-DOh8ybwv.js";import"./target-9B9VxhTw.js";import"./vote-BNngkYIu.js";import"./folder-open-DzYKMiH4.js";import"./send-BGQbBVWn.js";import"./briefcase-CLa5E6pc.js";import"./calendar-C2mN7fi8.js";import"./megaphone-DB_W2_ij.js";import"./user-check-CENHsehh.js";import"./clipboard-list-CkSM2h9J.js";import"./mail-C9q7NsOX.js";import"./message-square-C_xQNDn7.js";import"./external-link-CoSv1yei.js";import"./panel-left-CtA1CDY4.js";import"./index-BPeLIox3.js";const Pe={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},Oe={class:"flex items-center justify-between"},De={class:"text-muted-foreground"},ze={class:"flex gap-2"},Ue={class:"flex items-center justify-between"},Me={class:"text-sm text-muted-foreground mb-4"},Le={key:0,class:"mb-4 p-3 bg-muted/50 rounded-lg"},Be={class:"text-sm text-muted-foreground"},qe={class:"space-y-2"},Re={class:"flex justify-between text-sm"},Xe={class:"text-center text-sm text-muted-foreground"},Je={key:1,class:"mt-4 pt-4 border-t"},Ke={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},We={key:0},He={class:"text-muted-foreground"},Ge={key:1},Qe={class:"text-muted-foreground"},Ye={key:2},Ze={class:"text-muted-foreground"},et={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},tt={class:"flex items-center space-x-2"},ot={class:"text-2xl font-bold"},st={class:"flex items-center space-x-2"},at={class:"text-2xl font-bold text-green-600"},lt={class:"flex items-center space-x-2"},rt={class:"text-2xl font-bold text-red-600"},it={class:"flex items-center space-x-2"},nt={class:"text-2xl font-bold text-blue-600"},ut={class:"space-y-3 max-h-96 overflow-y-auto"},dt={class:"flex justify-between items-start"},ct={class:"flex-1"},mt={class:"flex items-center gap-2 mb-2"},ft={class:"font-medium"},vt={class:"text-sm text-muted-foreground mb-3"},pt={class:"bg-gray-50 p-2 rounded text-xs space-y-1"},_t={key:0},gt={class:"flex flex-col gap-2 ml-4"},xt={class:"space-y-2 max-h-32 overflow-y-auto"},bt={class:"flex items-center gap-2"},yt={class:"max-h-60 overflow-y-auto space-y-2"},Ct={key:3,class:"text-center"},wt={key:0,class:"space-y-4"},ht={class:"border rounded-lg overflow-x-auto"},kt=["title"],$t=["title"],Et={class:"flex items-center space-x-2"},Vt={class:"flex items-center space-x-2"},Do=ve({__name:"Show",props:{import:{}},setup(le){const a=V(le.import);let k=null;const re=(()=>{var i,e;return a.value.import_type==="users"?[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"},{title:"Importaciones",href:"/admin/imports"},{title:"Progreso",href:"#"}]:a.value.import_type==="asamblea"?[{title:"Admin",href:"/admin/dashboard"},{title:"Asambleas",href:"/admin/asambleas"},{title:((i=a.value.asamblea)==null?void 0:i.nombre)||"Asamblea",href:`/admin/asambleas/${a.value.asamblea_id}`},{title:"Progreso de Importación",href:"#"}]:[{title:"Admin",href:"/admin/dashboard"},{title:"Votaciones",href:"/admin/votaciones"},{title:((e=a.value.votacion)==null?void 0:e.titulo)||"Votación",href:`/admin/votaciones/${a.value.votacion_id}/edit`},{title:"Progreso de Importación",href:"#"}]})(),y=I(()=>{switch(a.value.status){case"pending":return{icon:se,color:"bg-yellow-500",textColor:"text-yellow-700",bgColor:"bg-yellow-50",label:"Pendiente",description:"La importación está en cola para ser procesada"};case"processing":return{icon:se,color:"bg-blue-500",textColor:"text-blue-700",bgColor:"bg-blue-50",label:"Procesando",description:"La importación está siendo procesada en lotes"};case"completed":return{icon:U,color:"bg-green-500",textColor:"text-green-700",bgColor:"bg-green-50",label:"Completada",description:"La importación se completó exitosamente"};case"failed":return{icon:oe,color:"bg-red-500",textColor:"text-red-700",bgColor:"bg-red-50",label:"Fallida",description:"La importación falló durante el procesamiento"};default:return{icon:te,color:"bg-gray-500",textColor:"text-gray-700",bgColor:"bg-gray-50",label:"Desconocido",description:"Estado desconocido"}}}),M=I(()=>["pending","processing"].includes(a.value.status)),A=V(!1),_=V(!1),N=V(!1),c=V(null),$=V({}),L=I(()=>{var i;return((i=a.value.conflict_resolution)==null?void 0:i.filter(e=>!e.resolved))||[]}),B=I(()=>{var i;return((i=a.value.conflict_resolution)==null?void 0:i.filter(e=>e.resolved))||[]}),ie=I(()=>L.value.length>0),q=i=>{switch(i){case"email_document_mismatch":return{label:"Email y documento pertenecen a usuarios diferentes",icon:F,color:"text-red-600"};case"document_exists_different_email":return{label:"Documento existe con email diferente",icon:F,color:"text-orange-600"};case"email_exists_different_document":return{label:"Email existe con documento diferente",icon:F,color:"text-orange-600"};default:return{label:"Conflicto desconocido",icon:te,color:"text-gray-600"}}},R=async()=>{var i;try{const e=await fetch(`/admin/imports/${a.value.id}/status`);if(e.ok){const o=await e.json(),d=a.value.status==="processing",f=o.status==="completed";a.value={...a.value,...o},d&&f&&(console.log("Importación completada. Conflictos recibidos:",o.conflict_resolution),o.conflict_resolution&&o.conflict_resolution.length>0?(a.value.conflict_resolution=o.conflict_resolution,console.log(`✓ ${o.conflict_resolution.length} conflictos detectados y cargados para resolver`)):console.log("✓ Importación completada sin conflictos"));const E=(i=o.conflict_resolution)==null?void 0:i.some(C=>!C.resolved);!M.value&&!E&&k&&(clearInterval(k),k=null)}}catch(e){console.error("Error updating status:",e)}},ne=()=>{var e;const i=(e=a.value.conflict_resolution)==null?void 0:e.some(o=>!o.resolved);(M.value||i)&&(k=setInterval(R,2e3))},ue=()=>{a.value.import_type==="users"?h.get("/admin/imports"):a.value.votacion_id?h.get(`/admin/votaciones/${a.value.votacion_id}/edit`):a.value.asamblea_id?h.get(`/admin/asambleas/${a.value.asamblea_id}`):h.get("/admin/usuarios")},de=()=>{a.value.import_type==="users"?h.get("/admin/imports"):a.value.votacion_id?h.get(`/admin/votaciones/${a.value.votacion_id}/imports`):a.value.asamblea_id&&h.get(`/admin/asambleas/${a.value.asamblea_id}`)},X=async(i,e)=>{var o,d;if(!_.value){_.value=!0;try{const f=await fetch(`/admin/imports/${a.value.id}/resolve-conflict`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},body:JSON.stringify({conflict_id:i,resolution:e})}),E=await f.json();if(f.ok){const C=(d=a.value.conflict_resolution)==null?void 0:d.findIndex(fe=>fe.id===i);C!==void 0&&C>=0&&a.value.conflict_resolution&&(a.value.conflict_resolution[C].resolved=!0),await R(),console.log("Conflicto resuelto:",E.message)}else alert(E.error||"Error al resolver conflicto")}catch(f){console.error("Error:",f),alert("Error al resolver conflicto")}finally{_.value=!1}}},ce=async i=>{var o;try{const d=await fetch(`/admin/imports/${a.value.id}/refresh-conflict-data`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},body:JSON.stringify({conflict_id:i.id})});if(d.ok){const f=await d.json();c.value=f.conflict}else console.warn("No se pudieron actualizar los datos del conflicto, usando datos originales"),c.value=i}catch(d){console.error("Error al actualizar datos del conflicto:",d),c.value=i}const e={};Object.keys(c.value.data).forEach(d=>{d!=="password"&&(e[d]="csv")}),$.value=e,N.value=!0},W=()=>{N.value=!1,c.value=null,$.value={}},me=async()=>{var i,e;if(c.value){_.value=!0;try{const o=await fetch(`/admin/imports/${a.value.id}/resolve-conflict`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({conflict_id:c.value.id,resolution:"merge",merge_selections:$.value})}),d=await o.json();if(o.ok){if(c.value){const f=(e=a.value.conflict_resolution)==null?void 0:e.findIndex(E=>{var C;return E.id===((C=c.value)==null?void 0:C.id)});f!==void 0&&f>=0&&a.value.conflict_resolution&&(a.value.conflict_resolution[f].resolved=!0)}W(),await R(),console.log("Conflicto fusionado:",d.message)}else alert(d.error||"Error al fusionar conflicto")}catch(o){console.error("Error:",o),alert("Error al fusionar conflicto")}finally{_.value=!1}}},H=(i,e)=>{if(!c.value)return"";const o=c.value.data[i],d=J(i);return o!==d?e===$.value[i]?"bg-green-50 border-green-200":"bg-red-50 border-red-200":""},J=i=>{if(!c.value)return"";let e=null;if(c.value.existing_user?e=c.value.existing_user:c.value.existing_users&&(e=c.value.existing_users.by_email||c.value.existing_users.by_document),!e)return"";const o={territorio_id:"territorio_nombre",departamento_id:"departamento_nombre",municipio_id:"municipio_nombre",localidad_id:"localidad_nombre"};return o[i]&&e[o[i]]?e[o[i]]:e[i]||""},G=i=>{var f;if(!c.value)return"";const e=c.value.data[i],o=(f=c.value.data_with_ids)==null?void 0:f[i];if(["territorio_id","departamento_id","municipio_id","localidad_id"].includes(i)){if(c.value.data_with_ids&&!o)return"";if(e)return isNaN(e)?e:`${e} (ID)`}return e||""};return pe(()=>{ne()}),_e(()=>{k&&clearInterval(k)}),(i,e)=>(m(),v(j,null,[s(t(ge),{title:"Progreso de Importación"}),s(Ae,{breadcrumbs:t(re)},{default:r(()=>[l("div",Pe,[l("div",Oe,[l("div",null,[e[2]||(e[2]=l("h1",{class:"text-3xl font-bold"},"Progreso de Importación",-1)),l("p",De,n(a.value.name||a.value.original_filename)+" "+n(a.value.votacion?` - ${a.value.votacion.titulo}`:"")+" "+n(a.value.asamblea?` - ${a.value.asamblea.nombre}`:""),1)]),l("div",ze,[s(t(g),{variant:"outline",onClick:ue},{default:r(()=>[s(t(Ne),{class:"mr-2 h-4 w-4"}),u(" "+n(a.value.import_type==="users"?"Volver a Importaciones":"Volver a Votación"),1)]),_:1}),s(t(g),{variant:"outline",onClick:de},{default:r(()=>[s(t(ae),{class:"mr-2 h-4 w-4"}),e[3]||(e[3]=u(" Ver Historial ",-1))]),_:1})])]),s(t(x),null,{default:r(()=>[s(t(P),null,{default:r(()=>[l("div",Ue,[s(t(O),{class:"flex items-center gap-2"},{default:r(()=>[(m(),w(Q(y.value.icon),{class:S(["h-6 w-6",y.value.textColor])},null,8,["class"])),u(" "+n(y.value.label),1)]),_:1}),s(t(K),{class:S(y.value.bgColor+" "+y.value.textColor)},{default:r(()=>[u(n(y.value.label),1)]),_:1},8,["class"])])]),_:1}),s(t(b),null,{default:r(()=>[l("p",Me,n(y.value.description),1),a.value.motivo?(m(),v("div",Le,[e[4]||(e[4]=l("h4",{class:"text-sm font-medium mb-2"},"Motivo de la importación:",-1)),l("p",Be,n(a.value.motivo),1)])):p("",!0),l("div",qe,[l("div",Re,[e[5]||(e[5]=l("span",null,"Progreso",-1)),l("span",null,n(a.value.processed_rows)+" / "+n(a.value.total_rows||"?")+" filas",1)]),s(t(ye),{value:a.value.progress_percentage,class:S(y.value.color)},null,8,["value","class"]),l("div",Xe,n(a.value.progress_percentage)+"% completado ",1)]),a.value.started_at||a.value.completed_at?(m(),v("div",Je,[l("div",Ke,[a.value.started_at?(m(),v("div",We,[e[6]||(e[6]=l("span",{class:"font-medium"},"Iniciado:",-1)),l("p",He,n(a.value.started_at),1)])):p("",!0),a.value.completed_at?(m(),v("div",Ge,[e[7]||(e[7]=l("span",{class:"font-medium"},"Completado:",-1)),l("p",Qe,n(a.value.completed_at),1)])):p("",!0),a.value.duration?(m(),v("div",Ye,[e[8]||(e[8]=l("span",{class:"font-medium"},"Duración:",-1)),l("p",Ze,n(a.value.duration),1)])):p("",!0)])])):p("",!0)]),_:1})]),_:1}),l("div",et,[s(t(x),null,{default:r(()=>[s(t(b),{class:"pt-6"},{default:r(()=>[l("div",tt,[s(t(ae),{class:"h-5 w-5 text-muted-foreground"}),l("div",null,[l("p",ot,n(a.value.total_rows||0),1),e[9]||(e[9]=l("p",{class:"text-xs text-muted-foreground"},"Total Filas",-1))])])]),_:1})]),_:1}),s(t(x),null,{default:r(()=>[s(t(b),{class:"pt-6"},{default:r(()=>[l("div",st,[s(t(U),{class:"h-5 w-5 text-green-600"}),l("div",null,[l("p",at,n(a.value.successful_rows),1),e[10]||(e[10]=l("p",{class:"text-xs text-muted-foreground"},"Exitosos",-1))])])]),_:1})]),_:1}),s(t(x),null,{default:r(()=>[s(t(b),{class:"pt-6"},{default:r(()=>[l("div",lt,[s(t(oe),{class:"h-5 w-5 text-red-600"}),l("div",null,[l("p",rt,n(a.value.failed_rows),1),e[11]||(e[11]=l("p",{class:"text-xs text-muted-foreground"},"Errores",-1))])])]),_:1})]),_:1}),s(t(x),null,{default:r(()=>[s(t(b),{class:"pt-6"},{default:r(()=>[l("div",it,[s(t(Te),{class:"h-5 w-5 text-blue-600"}),l("div",null,[l("p",nt,n(a.value.processed_rows),1),e[12]||(e[12]=l("p",{class:"text-xs text-muted-foreground"},"Procesados",-1))])])]),_:1})]),_:1})]),ie.value?(m(),w(t(x),{key:0},{default:r(()=>[s(t(P),null,{default:r(()=>[s(t(O),{class:"flex items-center gap-2 text-orange-700"},{default:r(()=>[s(t(F),{class:"h-5 w-5"}),u(" Conflictos Detectados ("+n(L.value.length)+") ",1)]),_:1})]),_:1}),s(t(b),null,{default:r(()=>[l("div",ut,[(m(!0),v(j,null,T(L.value,o=>(m(),w(t(x),{key:o.id,class:"border-orange-200"},{default:r(()=>[s(t(b),{class:"p-4"},{default:r(()=>[l("div",dt,[l("div",ct,[l("div",mt,[(m(),w(Q(q(o.type).icon),{class:S(["h-4 w-4",q(o.type).color])},null,8,["class"])),l("span",ft,"Fila "+n(o.row),1),s(t(K),{variant:"outline",class:"text-xs"},{default:r(()=>[u(n(q(o.type).label),1)]),_:2},1024)]),l("p",vt,n(o.description),1),l("div",pt,[l("div",null,[e[13]||(e[13]=l("strong",null,"Email:",-1)),u(" "+n(o.data.email),1)]),o.data.documento_identidad?(m(),v("div",_t,[e[14]||(e[14]=l("strong",null,"Documento:",-1)),u(" "+n(o.data.documento_identidad),1)])):p("",!0),l("div",null,[e[15]||(e[15]=l("strong",null,"Nombre:",-1)),u(" "+n(o.data.name),1)])])]),l("div",gt,[s(t(g),{size:"sm",variant:"outline",disabled:_.value,onClick:d=>X(o.id,"skip")},{default:r(()=>[...e[16]||(e[16]=[u(" Omitir ",-1)])]),_:2},1032,["disabled","onClick"]),s(t(g),{size:"sm",variant:"outline",disabled:_.value,onClick:d=>X(o.id,"update")},{default:r(()=>[...e[17]||(e[17]=[u(" Actualizar ",-1)])]),_:2},1032,["disabled","onClick"]),s(t(g),{size:"sm",disabled:_.value,onClick:d=>ce(o)},{default:r(()=>[...e[18]||(e[18]=[u(" Fusionar ",-1)])]),_:2},1032,["disabled","onClick"]),s(t(g),{size:"sm",variant:"destructive",disabled:_.value,onClick:d=>X(o.id,"force_create"),title:"Crear nuevo usuario con datos modificados para evitar conflictos"},{default:r(()=>[...e[19]||(e[19]=[u(" Forzar Creación ",-1)])]),_:2},1032,["disabled","onClick"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})):p("",!0),B.value.length>0?(m(),w(t(x),{key:1},{default:r(()=>[s(t(P),null,{default:r(()=>[s(t(O),{class:"flex items-center gap-2 text-green-700"},{default:r(()=>[s(t(U),{class:"h-5 w-5"}),u(" Conflictos Resueltos ("+n(B.value.length)+") ",1)]),_:1})]),_:1}),s(t(b),null,{default:r(()=>[l("div",xt,[(m(!0),v(j,null,T(B.value,o=>(m(),v("div",{key:o.id,class:"flex items-center gap-2 text-sm text-green-700 bg-green-50 p-2 rounded"},[s(t(U),{class:"h-4 w-4"}),l("span",null,"Fila "+n(o.row)+": "+n(o.description),1),s(t(K),{variant:"outline",class:"text-xs"},{default:r(()=>[u(n(o.resolution),1)]),_:2},1024)]))),128))])]),_:1})]),_:1})):p("",!0),a.value.errors&&a.value.errors.length>0?(m(),w(t(x),{key:2},{default:r(()=>[s(t(P),null,{default:r(()=>[s(t(O),{class:"flex items-center justify-between"},{default:r(()=>[l("span",bt,[s(t(F),{class:"h-5 w-5 text-orange-600"}),u(" Errores Encontrados ("+n(a.value.errors.length)+") ",1)]),s(t(g),{variant:"outline",size:"sm",onClick:e[0]||(e[0]=o=>A.value=!A.value)},{default:r(()=>[u(n(A.value?"Ocultar":"Mostrar")+" Errores ",1)]),_:1})]),_:1})]),_:1}),A.value?(m(),w(t(b),{key:0},{default:r(()=>[s(t(Ce),{class:"mb-4"},{default:r(()=>[s(t(F),{class:"h-4 w-4"}),s(t(we),null,{default:r(()=>[...e[20]||(e[20]=[u(" Los siguientes registros no pudieron ser procesados. El resto de usuarios fueron importados correctamente. ",-1)])]),_:1})]),_:1}),l("div",yt,[(m(!0),v(j,null,T(a.value.errors,(o,d)=>(m(),v("div",{key:d,class:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-800"},n(o),1))),128))])]),_:1})):p("",!0)]),_:1})):p("",!0),M.value?(m(),v("div",Ct,[...e[21]||(e[21]=[l("div",{class:"inline-flex items-center gap-2 text-sm text-muted-foreground"},[l("div",{class:"animate-pulse h-2 w-2 bg-blue-500 rounded-full"}),u(" Actualizando automáticamente cada 2 segundos ")],-1)])])):p("",!0)])]),_:1},8,["breadcrumbs"]),s(t(Ve),{open:N.value,"onUpdate:open":e[1]||(e[1]=o=>N.value=o)},{default:r(()=>[s(t(he),{class:"max-w-7xl max-h-[90vh] overflow-auto wide-dialog"},{default:r(()=>[s(t(ke),null,{default:r(()=>[s(t($e),null,{default:r(()=>{var o;return[u(" Fusionar Datos - Fila "+n((o=c.value)==null?void 0:o.row),1)]}),_:1})]),_:1}),c.value?(m(),v("div",wt,[e[28]||(e[28]=l("p",{class:"text-sm text-muted-foreground"}," Selecciona qué valor usar para cada campo. Los campos marcados en rojo son diferentes entre el CSV y la base de datos. ",-1)),l("div",ht,[s(t(Fe),null,{default:r(()=>[s(t(Ie),null,{default:r(()=>[s(t(ee),null,{default:r(()=>[s(t(D),{class:"w-40"},{default:r(()=>[...e[22]||(e[22]=[u("Campo",-1)])]),_:1}),s(t(D),{class:"min-w-64"},{default:r(()=>[...e[23]||(e[23]=[u("Valor del CSV",-1)])]),_:1}),s(t(D),{class:"min-w-64"},{default:r(()=>[...e[24]||(e[24]=[u("Valor Existente",-1)])]),_:1}),s(t(D),{class:"w-48"},{default:r(()=>[...e[25]||(e[25]=[u("Usar",-1)])]),_:1})]),_:1})]),_:1}),s(t(je),null,{default:r(()=>[(m(!0),v(j,null,T(Object.keys(c.value.data),o=>xe((m(),w(t(ee),{key:o},{default:r(()=>[s(t(z),{class:"font-medium w-40"},{default:r(()=>[u(n(o),1)]),_:2},1024),s(t(z),{class:S([H(o,"csv"),"min-w-64"])},{default:r(()=>[l("div",{class:"truncate",title:G(o)},n(G(o)||"-"),9,kt)]),_:2},1032,["class"]),s(t(z),{class:S([H(o,"existing"),"min-w-64"])},{default:r(()=>[l("div",{class:"truncate",title:J(o)},n(J(o)||"-"),9,$t)]),_:2},1032,["class"]),s(t(z),{class:"w-48"},{default:r(()=>[s(t(Se),{modelValue:$.value[o],"onUpdate:modelValue":d=>$.value[o]=d,class:"flex space-x-4"},{default:r(()=>[l("div",Et,[s(t(Y),{value:"csv",id:`${o}-csv`},null,8,["id"]),s(t(Z),{for:`${o}-csv`},{default:r(()=>[...e[26]||(e[26]=[u("CSV",-1)])]),_:2},1032,["for"])]),l("div",Vt,[s(t(Y),{value:"existing",id:`${o}-existing`},null,8,["id"]),s(t(Z),{for:`${o}-existing`},{default:r(()=>[...e[27]||(e[27]=[u("Existente",-1)])]),_:2},1032,["for"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[be,o!=="password"]])),128))]),_:1})]),_:1})])])):p("",!0),s(t(Ee),null,{default:r(()=>[s(t(g),{variant:"outline",onClick:W},{default:r(()=>[...e[29]||(e[29]=[u(" Cancelar ",-1)])]),_:1}),s(t(g),{onClick:me,disabled:_.value},{default:r(()=>[u(n(_.value?"Fusionando...":"Confirmar Fusión"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{Do as default};
