import{r as w,c as B,d as J,i as C,e as r,g as p,f as e,t as S,m as o,p as se,b as h,w as m,j as k,h as q,F as A,k as Q,n as Y,I as ue,o as me}from"./app-CchgBPDI.js";import{_ as oe,c as ne,a as de,b as fe}from"./CardTitle.vue_vue_type_script_setup_true_lang-BvB8Nmm4.js";import{_ as pe}from"./CardDescription.vue_vue_type_script_setup_true_lang-CYSJq7w-.js";import{c as te,_ as L}from"./createLucideIcon-CCv9JMZk.js";import{_ as G}from"./Skeleton.vue_vue_type_script_setup_true_lang-SCEDnnfv.js";import{C as ve,_ as ge,a as he,b as ye,c as _e,d as xe}from"./SelectValue.vue_vue_type_script_setup_true_lang-DiGTnrHw.js";import{R as Ce}from"./RichTextEditor-BP7y1Slr.js";import{X as be}from"./x-DCIVO5nz.js";import{L as re}from"./loader-circle-6x5goR9B.js";import{S as ke}from"./send-DgLYtmrq.js";import{b as we,_ as Re}from"./index-982-a3Qk.js";import{_ as $e}from"./index-DpjPa7U4.js";import{b as Ee,c as Te,g as ae,d as Se}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-_nFByL4T.js";import{_ as Me,a as qe,b as je}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DUTV_HmV.js";import{C as ze}from"./clock-DW06-BzV.js";import{M as Z}from"./message-square-BzfZHJ2F.js";import{E as Le}from"./ellipsis-DJinYT2F.js";import{S as Xe}from"./square-pen-DuhjF_1_.js";import{T as Oe}from"./trash-2-D4vO06Al.js";import{C as Be}from"./chevron-right-D_xvEnWd.js";import{t as O}from"./index-C0L976ef.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=te("ArrowUpDownIcon",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=te("QuoteIcon",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=te("SmilePlusIcon",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);function Ue(a,I){const u=w([]),n=w(!1),v=w(null),f=w(1),R=w(1),M=w(0),j=w("recientes"),T={thumbs_up:"üëç",thumbs_down:"üëé",heart:"‚ù§Ô∏è",laugh:"üòÑ",clap:"üëè",fire:"üî•",check:"‚úÖ",eyes:"üëÄ"},$=`/api/comentarios/${a}/${I}`,d=async(l=1)=>{n.value=!0,v.value=null;try{const i=new URLSearchParams({page:String(l),sort:j.value}),t=await(await fetch(`${$}?${i}`,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"})).json();if(t.success&&t.data)l===1?u.value=t.data.data:u.value=[...u.value,...t.data.data],f.value=t.data.current_page,R.value=t.data.last_page,M.value=t.data.total;else throw new Error(t.message||"Error al cargar comentarios")}catch(i){v.value=i instanceof Error?i.message:"Error desconocido",console.error("Error cargando comentarios:",i)}finally{n.value=!1}},g=async l=>{l!==j.value&&(j.value=l,await d(1))},z=async()=>{f.value<R.value&&await d(f.value+1)},P=async l=>{n.value=!0,v.value=null;try{const s=await(await fetch($,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":X()},credentials:"same-origin",body:JSON.stringify(l)})).json();return s.success&&s.comentario&&(l.parent_id?U(l.parent_id,s.comentario):(u.value=[s.comentario,...u.value],M.value++)),s}catch(i){const s=i instanceof Error?i.message:"Error al crear comentario";return v.value=s,{success:!1,message:s}}finally{n.value=!1}},W=async(l,i)=>{n.value=!0,v.value=null;try{const t=await(await fetch(`/api/comentarios/${l}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":X()},credentials:"same-origin",body:JSON.stringify(i)})).json();return t.success&&t.comentario&&F(t.comentario),t}catch(s){const t=s instanceof Error?s.message:"Error al actualizar comentario";return v.value=t,{success:!1,message:t}}finally{n.value=!1}},V=async l=>{n.value=!0,v.value=null;try{const s=await(await fetch(`/api/comentarios/${l}`,{method:"DELETE",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":X()},credentials:"same-origin"})).json();return s.success&&(H(l),M.value--),s}catch(i){const s=i instanceof Error?i.message:"Error al eliminar comentario";return v.value=s,{success:!1,message:s}}finally{n.value=!1}},D=async(l,i)=>{try{const t=await(await fetch(`/api/comentarios/${l}/reaccion`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":X()},credentials:"same-origin",body:JSON.stringify({emoji:i})})).json();return t.success&&t.reacciones&&K(l,t.reacciones),t}catch(s){return{success:!1,message:s instanceof Error?s.message:"Error al agregar reacci√≥n"}}},X=()=>{var i;return((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},U=(l,i)=>{const s=t=>{for(const b of t){if(b.id===l)return b.respuestas||(b.respuestas=[]),b.respuestas.push(i),!0;if(b.respuestas&&s(b.respuestas))return!0}return!1};s(u.value)},F=l=>{const i=s=>{for(let t=0;t<s.length;t++){if(s[t].id===l.id)return s[t]={...l,respuestas:s[t].respuestas},!0;if(s[t].respuestas&&i(s[t].respuestas))return!0}return!1};i(u.value)},H=l=>{const i=s=>s.filter(t=>t.id!==l).map(t=>({...t,respuestas:t.respuestas?i(t.respuestas):void 0}));u.value=i(u.value)},K=(l,i)=>{const s=t=>{for(const b of t){if(b.id===l)return b.reacciones_resumen=i,!0;if(b.respuestas&&s(b.respuestas))return!0}return!1};s(u.value)},y=B(()=>u.value.length>0),c=B(()=>f.value<R.value);return{comentarios:u,loading:n,error:v,currentPage:f,lastPage:R,total:M,emojis:T,sortBy:j,tieneComentarios:y,puedeCargarMas:c,cargar:d,cargarMas:z,crear:P,editar:W,eliminar:V,toggleReaccion:D,cambiarOrden:g}}const Ve={class:"flex items-start gap-2 p-3 bg-muted/50 rounded-md border-l-4 border-primary/30 text-sm"},De={class:"flex-1 min-w-0"},Fe={class:"flex items-center gap-2 mb-1"},Ne={class:"font-medium text-xs"},Ae={class:"text-xs text-muted-foreground"},He=["innerHTML"],ie=J({__name:"ComentarioQuote",props:{comentario:{}},setup(a){return(I,u)=>{var n;return o(),C("div",Ve,[r(e(le),{class:"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5"}),p("div",De,[p("div",Fe,[p("span",Ne,S(((n=a.comentario.autor)==null?void 0:n.name)||"Usuario"),1),p("span",Ae,S(a.comentario.fecha_relativa),1)]),p("p",{class:"text-muted-foreground line-clamp-2",innerHTML:a.comentario.contenido_truncado||a.comentario.contenido_plain},null,8,He)])])}}}),Qe={key:1,class:"flex items-center gap-2 text-sm text-muted-foreground"},We={class:"font-medium"},Ke={class:"flex items-center justify-end gap-2"},ee=J({__name:"ComentarioForm",props:{mode:{default:"create"},comentarioEditar:{default:null},comentarioCitar:{default:null},comentarioResponder:{default:null},loading:{type:Boolean,default:!1},placeholder:{default:"Escribe un comentario..."}},emits:["submit","cancel"],setup(a,{expose:I,emit:u}){const n=a,v=u,f=w("");se(()=>n.comentarioEditar,d=>{d&&(f.value=d.contenido)},{immediate:!0});const R=B(()=>{switch(n.mode){case"edit":return"Guardar cambios";case"reply":return"Responder";case"quote":return"Comentar";default:return"Comentar"}}),M=B(()=>{var d,g;switch(n.mode){case"reply":return`Responder a ${((g=(d=n.comentarioResponder)==null?void 0:d.autor)==null?void 0:g.name)||"usuario"}...`;case"quote":return"Escribe tu comentario sobre la cita...";default:return n.placeholder}}),j=B(()=>f.value.replace(/<[^>]*>/g,"").trim().length>0),T=()=>{var z,P;if(!j.value||n.loading)return;const d=n.mode==="reply"&&((z=n.comentarioResponder)==null?void 0:z.id)||null,g=n.mode==="quote"&&((P=n.comentarioCitar)==null?void 0:P.id)||null;v("submit",f.value,d,g),n.mode!=="edit"&&(f.value="")},$=()=>{f.value="",v("cancel")};return I({clear:()=>{f.value=""}}),(d,g)=>(o(),h(e(oe),{class:"border-0 shadow-none"},{default:m(()=>[r(e(ne),{class:"p-0 space-y-3"},{default:m(()=>{var z;return[a.mode==="quote"&&a.comentarioCitar?(o(),h(ie,{key:0,comentario:a.comentarioCitar},null,8,["comentario"])):k("",!0),a.mode==="reply"&&a.comentarioResponder?(o(),C("div",Qe,[g[1]||(g[1]=p("span",null,"Respondiendo a",-1)),p("span",We,S((z=a.comentarioResponder.autor)==null?void 0:z.name),1),r(e(L),{variant:"ghost",size:"sm",class:"h-5 w-5 p-0 ml-auto",onClick:$},{default:m(()=>[r(e(be),{class:"h-3 w-3"})]),_:1})])):k("",!0),r(Ce,{modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=P=>f.value=P),placeholder:M.value,rows:3},null,8,["modelValue","placeholder"]),p("div",Ke,[a.mode!=="create"?(o(),h(e(L),{key:0,variant:"ghost",size:"sm",onClick:$,disabled:a.loading},{default:m(()=>[...g[2]||(g[2]=[q(" Cancelar ",-1)])]),_:1},8,["disabled"])):k("",!0),r(e(L),{size:"sm",onClick:T,disabled:!j.value||a.loading},{default:m(()=>[a.loading?(o(),h(e(re),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(o(),h(e(ke),{key:1,class:"h-4 w-4 mr-2"})),q(" "+S(R.value),1)]),_:1},8,["disabled"])])]}),_:1})]),_:1}))}}),Je={class:"flex items-center gap-1.5 flex-wrap"},Ge={class:"text-muted-foreground"},Ye={class:"flex gap-1"},Ze=J({__name:"ComentarioReacciones",props:{reacciones:{default:()=>[]},canReact:{type:Boolean,default:!0}},emits:["toggle"],setup(a,{emit:I}){const u=a,n=I,v={thumbs_up:"üëç",thumbs_down:"üëé",heart:"‚ù§Ô∏è",laugh:"üòÑ",clap:"üëè",fire:"üî•",check:"‚úÖ",eyes:"üëÄ"},f=w(!1),R=B(()=>[...u.reacciones].sort((T,$)=>$.count-T.count)),M=T=>{const $=u.reacciones.find(d=>d.emoji===T);return($==null?void 0:$.usuario_actual_reacciono)||!1},j=T=>{n("toggle",T),f.value=!1};return(T,$)=>(o(),C("div",Je,[(o(!0),C(A,null,Q(R.value,d=>(o(),h(e(L),{key:d.emoji,variant:"ghost",size:"sm",class:Y(["h-7 px-2 text-xs gap-1",{"bg-primary/10 hover:bg-primary/20":d.usuario_actual_reacciono}]),onClick:g=>j(d.emoji),disabled:!a.canReact},{default:m(()=>[p("span",null,S(d.simbolo),1),p("span",Ge,S(d.count),1)]),_:2},1032,["class","onClick","disabled"]))),128)),a.canReact?(o(),h(e(Me),{key:0,open:f.value,"onUpdate:open":$[0]||($[0]=d=>f.value=d)},{default:m(()=>[r(e(qe),{asChild:""},{default:m(()=>[r(e(L),{variant:"ghost",size:"sm",class:"h-7 w-7 p-0"},{default:m(()=>[r(e(Pe),{class:"h-4 w-4 text-muted-foreground"})]),_:1})]),_:1}),r(e(je),{class:"w-auto p-2",align:"start"},{default:m(()=>[p("div",Ye,[(o(),C(A,null,Q(v,(d,g)=>r(e(L),{key:g,variant:"ghost",size:"sm",class:Y(["h-8 w-8 p-0 text-lg hover:scale-125 transition-transform",{"bg-primary/10":M(g)}]),onClick:z=>j(g)},{default:m(()=>[q(S(d),1)]),_:2},1032,["class","onClick"])),64))])]),_:1})]),_:1},8,["open"])):k("",!0)]))}}),et={class:"group/item flex gap-3"},tt={class:"flex-1 min-w-0"},at={class:"flex items-center gap-2 flex-wrap"},st={class:"font-medium text-sm"},ot={class:"text-xs text-muted-foreground"},nt={key:1,class:"text-xs text-muted-foreground flex items-center gap-1"},rt={key:0,class:"mt-2"},lt=["innerHTML"],it={class:"mt-2 flex items-center gap-2 flex-wrap"},ct={class:"flex items-center gap-1 opacity-0 group-hover/item:opacity-100 transition-opacity"},ut={key:2,class:"mt-3"},mt={key:0,class:"mt-3 space-y-3"},dt=J({__name:"ComentarioItem",props:{comentario:{},nivel:{default:0},canCreate:{type:Boolean,default:!0},canReact:{type:Boolean,default:!0}},emits:["reply","quote","edit","delete","toggleReaccion","submitReply"],setup(a,{emit:I}){const u=a,n=I,v=w(!1),f=w(!1),R=w(!1),M=w(!1),j=B(()=>{const y=c=>{var i,s;let l=((i=c.respuestas)==null?void 0:i.length)||0;return(s=c.respuestas)==null||s.forEach(t=>{l+=y(t)}),l};return y(u.comentario)}),T=B(()=>{var y;return(((y=u.comentario.respuestas)==null?void 0:y.length)||0)>0}),$=B(()=>{var c;return(((c=u.comentario.autor)==null?void 0:c.name)||"U").substring(0,2).toUpperCase()}),d=B(()=>u.comentario.es_editable||!1),g=B(()=>{const y=u.comentario.tiempo_restante_edicion;if(!y||y<=0)return null;const c=Math.floor(y/60),l=y%60;return c>0?`${c}h ${l}m para editar`:`${l}m para editar`}),z=()=>{v.value=!v.value},P=()=>{f.value=!0},W=(y,c,l)=>{n("submitReply",y,u.comentario.id),f.value=!1},V=()=>{f.value=!1},D=()=>{n("quote",u.comentario)},X=()=>{R.value=!0},U=y=>{n("edit",u.comentario,y),R.value=!1},F=()=>{R.value=!1},H=()=>{M.value?(n("delete",u.comentario),M.value=!1):(M.value=!0,setTimeout(()=>{M.value=!1},3e3))},K=y=>{n("toggleReaccion",u.comentario.id,y)};return(y,c)=>{var i;const l=ue("ComentarioItem",!0);return o(),C("div",{class:Y({"ml-6 border-l-2 border-muted pl-4":a.nivel>0})},[p("div",et,[r(e(Re),{class:"h-8 w-8 flex-shrink-0"},{default:m(()=>[r(e(we),{class:"text-xs"},{default:m(()=>[q(S($.value),1)]),_:1})]),_:1}),p("div",tt,[p("div",at,[p("span",st,S(((i=a.comentario.autor)==null?void 0:i.name)||"Usuario"),1),p("span",ot,S(a.comentario.fecha_relativa),1),a.comentario.es_editado?(o(),h(e($e),{key:0,variant:"outline",class:"text-xs h-5"},{default:m(()=>[...c[7]||(c[7]=[q(" editado ",-1)])]),_:1})):k("",!0),g.value?(o(),C("span",nt,[r(e(ze),{class:"h-3 w-3"}),q(" "+S(g.value),1)])):k("",!0)]),R.value?(o(),C("div",rt,[r(ee,{mode:"edit","comentario-editar":a.comentario,onSubmit:c[0]||(c[0]=s=>U(s)),onCancel:F},null,8,["comentario-editar"])])):(o(),C(A,{key:1},[a.comentario.comentario_citado?(o(),h(ie,{key:0,comentario:a.comentario.comentario_citado,class:"mt-2"},null,8,["comentario"])):k("",!0),p("div",{class:"mt-1 text-sm prose prose-sm dark:prose-invert max-w-none",innerHTML:a.comentario.contenido},null,8,lt),p("div",it,[r(Ze,{reacciones:a.comentario.reacciones_resumen||[],"can-react":a.canReact,onToggle:K},null,8,["reacciones","can-react"]),p("div",ct,[a.canCreate?(o(),h(e(L),{key:0,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:P},{default:m(()=>[r(e(Z),{class:"h-3 w-3 mr-1"}),c[8]||(c[8]=q(" Responder ",-1))]),_:1})):k("",!0),a.canCreate?(o(),h(e(L),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:D},{default:m(()=>[r(e(le),{class:"h-3 w-3 mr-1"}),c[9]||(c[9]=q(" Citar ",-1))]),_:1})):k("",!0),d.value||a.comentario.es_eliminable?(o(),h(e(Ee),{key:2},{default:m(()=>[r(e(Te),{asChild:""},{default:m(()=>[r(e(L),{variant:"ghost",size:"sm",class:"h-7 w-7 p-0"},{default:m(()=>[r(e(Le),{class:"h-4 w-4"})]),_:1})]),_:1}),r(e(Se),{align:"end"},{default:m(()=>[a.comentario.es_editable?(o(),h(e(ae),{key:0,onClick:X},{default:m(()=>[r(e(Xe),{class:"h-4 w-4 mr-2"}),c[10]||(c[10]=q(" Editar ",-1))]),_:1})):k("",!0),a.comentario.es_eliminable?(o(),h(e(ae),{key:1,class:"text-destructive",onClick:H},{default:m(()=>[r(e(Oe),{class:"h-4 w-4 mr-2"}),q(" "+S(M.value?"Confirmar eliminaci√≥n":"Eliminar"),1)]),_:1})):k("",!0)]),_:1})]),_:1})):k("",!0),T.value?(o(),h(e(L),{key:3,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:z},{default:m(()=>[v.value?(o(),h(e(Be),{key:1,class:"h-3 w-3 mr-1"})):(o(),h(e(ve),{key:0,class:"h-3 w-3 mr-1"})),q(" "+S(v.value?`Mostrar ${j.value}`:"Ocultar"),1)]),_:1})):k("",!0)])])],64)),f.value?(o(),C("div",ut,[r(ee,{mode:"reply","comentario-responder":a.comentario,onSubmit:W,onCancel:V},null,8,["comentario-responder"])])):k("",!0)])]),T.value&&!v.value?(o(),C("div",mt,[(o(!0),C(A,null,Q(a.comentario.respuestas,s=>(o(),h(l,{key:s.id,comentario:s,nivel:a.nivel+1,"can-create":a.canCreate,"can-react":a.canReact,onReply:c[1]||(c[1]=t=>n("reply",t)),onQuote:c[2]||(c[2]=t=>n("quote",t)),onEdit:c[3]||(c[3]=(t,b)=>n("edit",t,b)),onDelete:c[4]||(c[4]=t=>n("delete",t)),onToggleReaccion:c[5]||(c[5]=(t,b)=>n("toggleReaccion",t,b)),onSubmitReply:c[6]||(c[6]=(t,b)=>n("submitReply",t,b))},null,8,["comentario","nivel","can-create","can-react"]))),128))])):k("",!0)],2)}}}),ft={class:"flex items-center justify-between"},pt={key:0},vt={key:1,class:"space-y-4"},gt={class:"flex-1 space-y-2"},ht={key:2,class:"text-center py-8 text-destructive"},yt={key:3,class:"text-center py-8"},_t={key:0,class:"text-sm text-muted-foreground mt-1"},xt={key:4,class:"space-y-4"},Ct={key:0,class:"text-center pt-4"},Ft=J({__name:"ComentariosPanel",props:{commentableType:{},commentableId:{},canCreate:{type:Boolean,default:!0},canReact:{type:Boolean,default:!0}},setup(a){const I=[{value:"recientes",label:"M√°s recientes"},{value:"antiguos",label:"M√°s antiguos"},{value:"populares",label:"M√°s populares"}],u=a,{comentarios:n,loading:v,error:f,total:R,puedeCargarMas:M,sortBy:j,cargar:T,cargarMas:$,crear:d,editar:g,eliminar:z,toggleReaccion:P,cambiarOrden:W}=Ue(u.commentableType,u.commentableId),V=w("create"),D=w(null),X=w(null),U=w(null),F=w(!1),H=w(null);me(()=>{T()}),se(()=>[u.commentableType,u.commentableId],()=>{T()});const K=async(E,_,x)=>{F.value=!0;try{if(V.value==="edit"&&U.value){const N=await g(U.value.id,{contenido:E});N.success?(O.success(N.message),b()):O.error(N.message||"Error al actualizar")}else{const N=await d({contenido:E,parent_id:_,quoted_comentario_id:x});N.success?(O.success(N.message),b()):O.error(N.message||"Error al publicar")}}finally{F.value=!1}},y=E=>{V.value="reply",D.value=E,X.value=null,U.value=null},c=E=>{V.value="quote",X.value=E,D.value=null,U.value=null},l=async(E,_)=>{const x=await g(E.id,{contenido:_});x.success?O.success(x.message):O.error(x.message||"Error al actualizar")},i=async E=>{const _=await z(E.id);_.success?O.success(_.message):O.error(_.message||"Error al eliminar")},s=async(E,_)=>{const x=await P(E,_);x.success||O.error(x.message||"Error al agregar reacci√≥n")},t=async(E,_)=>{const x=await d({contenido:E,parent_id:_,quoted_comentario_id:null});x.success?O.success(x.message):O.error(x.message||"Error al enviar respuesta")},b=()=>{var E;V.value="create",D.value=null,X.value=null,U.value=null,(E=H.value)==null||E.clear()},ce=()=>{b()};return(E,_)=>(o(),h(e(oe),null,{default:m(()=>[r(e(de),null,{default:m(()=>[p("div",ft,[p("div",null,[r(e(fe),{class:"flex items-center gap-2"},{default:m(()=>[r(e(Z),{class:"h-5 w-5"}),_[1]||(_[1]=q(" Comentarios ",-1))]),_:1}),e(R)>0?(o(),h(e(pe),{key:0},{default:m(()=>[q(S(e(R))+" "+S(e(R)===1?"comentario":"comentarios"),1)]),_:1})):k("",!0)]),e(R)>1?(o(),h(e(ge),{key:0,"model-value":e(j),"onUpdate:modelValue":e(W)},{default:m(()=>[r(e(he),{class:"w-[160px] h-8 text-xs"},{default:m(()=>[r(e(Ie),{class:"h-3 w-3 mr-1"}),r(e(ye))]),_:1}),r(e(_e),null,{default:m(()=>[(o(),C(A,null,Q(I,x=>r(e(xe),{key:x.value,value:x.value},{default:m(()=>[q(S(x.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])):k("",!0)])]),_:1}),r(e(ne),{class:"space-y-6"},{default:m(()=>[a.canCreate?(o(),C("div",pt,[r(ee,{ref_key:"formRef",ref:H,mode:V.value,"comentario-editar":U.value,"comentario-citar":X.value,"comentario-responder":D.value,loading:F.value,onSubmit:K,onCancel:ce},null,8,["mode","comentario-editar","comentario-citar","comentario-responder","loading"])])):k("",!0),e(v)&&e(n).length===0?(o(),C("div",vt,[(o(),C(A,null,Q(3,x=>p("div",{key:x,class:"flex gap-3"},[r(e(G),{class:"h-8 w-8 rounded-full"}),p("div",gt,[r(e(G),{class:"h-4 w-32"}),r(e(G),{class:"h-16 w-full"})])])),64))])):e(f)?(o(),C("div",ht,[p("p",null,S(e(f)),1),r(e(L),{variant:"outline",size:"sm",class:"mt-2",onClick:_[0]||(_[0]=x=>e(T)())},{default:m(()=>[..._[2]||(_[2]=[q(" Reintentar ",-1)])]),_:1})])):e(n).length===0?(o(),C("div",yt,[r(e(Z),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),_[3]||(_[3]=p("p",{class:"text-muted-foreground"},"No hay comentarios todav√≠a",-1)),a.canCreate?(o(),C("p",_t," S√© el primero en comentar ")):k("",!0)])):(o(),C("div",xt,[(o(!0),C(A,null,Q(e(n),x=>(o(),h(dt,{key:x.id,comentario:x,"can-create":a.canCreate,"can-react":a.canReact,onReply:y,onQuote:c,onEdit:l,onDelete:i,onToggleReaccion:s,onSubmitReply:t},null,8,["comentario","can-create","can-react"]))),128)),e(M)?(o(),C("div",Ct,[r(e(L),{variant:"outline",size:"sm",disabled:e(v),onClick:e($)},{default:m(()=>[e(v)?(o(),h(e(re),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):k("",!0),_[4]||(_[4]=q(" Cargar m√°s comentarios ",-1))]),_:1},8,["disabled","onClick"])])):k("",!0)]))]),_:1})]),_:1}))}});export{Ft as _};
