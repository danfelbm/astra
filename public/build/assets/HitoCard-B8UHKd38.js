import{a as M,b as D,c as j,_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-C6Pf_Uif.js";import{_ as P}from"./CardFooter.vue_vue_type_script_setup_true_lang-BtoAFpCO.js";import{c as k,_ as p}from"./createLucideIcon-B48W5HGR.js";import{_ as y}from"./index-C4A356_A.js";import{_ as V}from"./Progress.vue_vue_type_script_setup_true_lang-CmiRJl8o.js";import{_ as z,b as L}from"./index-7Cc0L9l5.js";import{_ as T,a as A,b as I,c as u,e as N}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bk1MyGsx.js";import{E as q}from"./ellipsis-p-U2_drz.js";import{P as H}from"./pen-DYl94tMC.js";import{P as x}from"./plus-DUQ5nN3r.js";import{C as F}from"./copy-BNnrXPXq.js";import{T as S}from"./trash-2-8yxMJPAD.js";import{C as O}from"./calendar-days-30VAgYjK.js";import{C as U}from"./clock-PhaHEFle.js";import{E as G}from"./eye-s1iMQI4x.js";import{d as J,c as g,b as c,e as i,w as o,f as a,j as n,u as s,g as r,n as _,h as m,t as d,i as f,F as K,k as Q,s as R}from"./app-BFCRP-hu.js";import{f as W,e as X}from"./es-BDPlFIsO.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=k("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=k("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),se={class:"flex items-center justify-between"},te={class:"flex items-center space-x-3"},ae={class:"flex items-center space-x-2"},oe={key:0,class:"text-sm text-muted-foreground mb-3 line-clamp-2"},ie={key:1,class:"flex items-center space-x-4 text-sm text-muted-foreground mb-3"},ne={key:0,class:"flex items-center"},re={key:1,class:"flex items-center"},le={key:2,class:"flex items-center space-x-2 mb-3"},de={class:"text-sm text-muted-foreground"},me={key:3,class:"flex flex-wrap gap-1 mb-3"},ce={class:"space-y-2"},fe={class:"flex justify-between items-center text-xs"},he={class:"font-medium"},ue={key:4,class:"mt-3 flex items-center justify-between text-xs text-muted-foreground"},pe={class:"flex items-center space-x-3"},ye={key:0,class:"flex items-center"},ge={class:"w-full flex justify-between"},be=J({__name:"HitoCard",props:{hito:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageDeliverables:{type:Boolean},showActions:{type:Boolean}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables"],setup(w){const h=w,$=g(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[h.hito.estado]||h.hito.estado),C=g(()=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[h.hito.estado]||"bg-gray-400"),E=g(()=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[h.hito.estado]||"secondary"),b=e=>{if(!e)return"";try{const t=typeof e=="string"?new Date(e):e;return W(t,"dd MMM yyyy",{locale:X})}catch{return""}};return(e,t)=>(i(),c(s(B),{class:"hover:shadow-lg transition-shadow duration-200"},{default:o(()=>[a(s(M),{class:"pb-3"},{default:o(()=>[r("div",se,[r("div",te,[r("div",{class:_([C.value,"w-2 h-2 rounded-full"])},null,2),a(s(D),{class:"text-lg font-medium"},{default:o(()=>[m(d(e.hito.nombre),1)]),_:1})]),r("div",ae,[a(s(y),{variant:E.value,class:"text-xs"},{default:o(()=>[m(d(e.hito.estado_label||$.value),1)]),_:1},8,["variant"]),e.canEdit||e.canDelete?(i(),c(s(T),{key:0},{default:o(()=>[a(s(A),{asChild:""},{default:o(()=>[a(s(p),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:o(()=>[a(s(q),{class:"h-4 w-4"})]),_:1})]),_:1}),a(s(I),{align:"end"},{default:o(()=>[e.canEdit?(i(),c(s(u),{key:0,onClick:t[0]||(t[0]=l=>e.$emit("edit",e.hito))},{default:o(()=>[a(s(H),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=m(" Editar ",-1))]),_:1})):n("",!0),e.canManageDeliverables?(i(),c(s(u),{key:1,onClick:t[1]||(t[1]=l=>e.$emit("add-entregable",e.hito))},{default:o(()=>[a(s(x),{class:"mr-2 h-4 w-4"}),t[7]||(t[7]=m(" Añadir Entregable ",-1))]),_:1})):n("",!0),a(s(u),{onClick:t[2]||(t[2]=l=>e.$emit("duplicate",e.hito))},{default:o(()=>[a(s(F),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=m(" Duplicar ",-1))]),_:1}),e.canDelete?(i(),c(s(N),{key:2})):n("",!0),e.canDelete?(i(),c(s(u),{key:3,onClick:t[3]||(t[3]=l=>e.$emit("delete",e.hito)),class:"text-red-600"},{default:o(()=>[a(s(S),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=m(" Eliminar ",-1))]),_:1})):n("",!0)]),_:1})]),_:1})):n("",!0)])])]),_:1}),a(s(j),{class:"pb-3"},{default:o(()=>[e.hito.descripcion?(i(),f("p",oe,d(e.hito.descripcion),1)):n("",!0),e.hito.fecha_inicio||e.hito.fecha_fin?(i(),f("div",ie,[e.hito.fecha_inicio?(i(),f("div",ne,[a(s(O),{class:"mr-1 h-3 w-3"}),r("span",null,d(b(e.hito.fecha_inicio)),1)])):n("",!0),e.hito.fecha_fin?(i(),f("div",re,[a(s(Z),{class:"mr-1 h-3 w-3"}),r("span",null,d(b(e.hito.fecha_fin)),1)])):n("",!0)])):n("",!0),e.hito.responsable?(i(),f("div",le,[a(s(z),{class:"h-6 w-6"},{default:o(()=>[a(s(L),{class:"text-xs"},{default:o(()=>{var l,v;return[m(d((v=(l=e.hito.responsable.name)==null?void 0:l.charAt(0))==null?void 0:v.toUpperCase()),1)]}),_:1})]),_:1}),r("span",de,d(e.hito.responsable.name),1)])):n("",!0),e.hito.etiquetas&&e.hito.etiquetas.length>0?(i(),f("div",me,[(i(!0),f(K,null,Q(e.hito.etiquetas.slice(0,3),l=>(i(),c(s(y),{key:l.id,variant:"outline",class:"text-xs",style:R({borderColor:l.color||"#94a3b8",color:l.color||"#64748b"})},{default:o(()=>[m(d(l.nombre),1)]),_:2},1032,["style"]))),128)),e.hito.etiquetas.length>3?(i(),c(s(y),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>[m(" +"+d(e.hito.etiquetas.length-3),1)]),_:1})):n("",!0)])):n("",!0),r("div",ce,[r("div",fe,[t[10]||(t[10]=r("span",{class:"text-muted-foreground"},"Progreso",-1)),r("span",he,d(e.hito.porcentaje_completado)+"%",1)]),a(s(V),{value:e.hito.porcentaje_completado,class:"h-2"},null,8,["value"])]),e.hito.entregables&&e.hito.entregables.length>0?(i(),f("div",ue,[r("div",pe,[r("span",null,d(e.hito.entregables_completados||0)+"/"+d(e.hito.total_entregables||e.hito.entregables.length)+" entregables",1)]),e.hito.dias_restantes!==null?(i(),f("div",ye,[a(s(U),{class:"mr-1 h-3 w-3"}),r("span",{class:_({"text-red-500":e.hito.dias_restantes<0,"text-orange-500":e.hito.dias_restantes<=7})},d(e.hito.dias_restantes<0?`Vencido hace ${Math.abs(e.hito.dias_restantes)} días`:`${e.hito.dias_restantes} días restantes`),3)])):n("",!0)])):n("",!0)]),_:1}),e.showActions?(i(),c(s(P),{key:0,class:"pt-3 border-t"},{default:o(()=>[r("div",ge,[a(s(p),{variant:"ghost",size:"sm",onClick:t[4]||(t[4]=l=>e.$emit("view",e.hito))},{default:o(()=>[a(s(G),{class:"mr-2 h-4 w-4"}),t[11]||(t[11]=m(" Ver detalles ",-1))]),_:1}),a(s(p),{variant:"outline",size:"sm",onClick:t[5]||(t[5]=l=>e.$emit("view-entregables",e.hito))},{default:o(()=>[a(s(ee),{class:"mr-2 h-4 w-4"}),t[12]||(t[12]=m(" Entregables ",-1))]),_:1})])]),_:1})):n("",!0)]),_:1}))}}),Ne=Y(be,[["__scopeId","data-v-e0b982f3"]]);export{Ne as H,ee as L};
