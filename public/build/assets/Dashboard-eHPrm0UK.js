import{C as S,_ as z}from"./index-CQWxbFbf.js";import{_ as h}from"./createLucideIcon-s5sOHYqj.js";import{_,c as v,a as C,b as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-BTRZ6n-Z.js";import{_ as G}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-C6zHJZWF.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dbsa-okf.js";import{d as X,k as J,c as y,a as b,o,b as t,u as a,m as K,e as r,f as s,j as c,i as l,n as N,l as $,t as u,g as d,P as D,F as Q}from"./app-CELEraHo.js";import{P}from"./plus-BAx3QMdb.js";import{S as k}from"./square-pen-skyYA5OL.js";import{C as I}from"./clock-Btpg2Aml.js";import{C as V}from"./circle-x-DosRB3FF.js";import{C as A}from"./circle-check-big-KKamaf-R.js";import{M as W}from"./message-square-BTzqJBEg.js";import{U as B}from"./user-ClkCqNzr.js";import{H as Y}from"./history-CGZnWK2J.js";import{l as Z,C as aa}from"./SelectValue.vue_vue_type_script_setup_true_lang-BarmgKfq.js";import"./Label.vue_vue_type_script_setup_true_lang-D9qfcfgT.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D5Ok5Z3Z.js";import"./VisuallyHidden-qfxc1uTE.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-CGVFs08Q.js";import"./eye-Dlm8BiRN.js";import"./index-B2-9gOJc.js";import"./check-DBj6brRU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DcJpg0p7.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DGsevKjb.js";import"./index-W4JxdBIy.js";const ea={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ta={class:"flex flex-col sm:flex-row sm:items-center gap-4"},sa={class:"flex items-center gap-4 flex-1"},ra={class:"flex-1"},ia={class:"text-xl font-semibold mb-1"},da={key:0,class:"text-muted-foreground mb-1"},oa={class:"text-muted-foreground mb-2"},na={key:1,class:"flex items-center gap-2 flex-wrap"},la={key:0,class:"w-full sm:w-auto"},ua={class:"text-blue-700 dark:text-blue-300"},ca={key:1},ma={class:"grid gap-4 md:grid-cols-3"},fa={class:"flex items-center gap-2"},pa={class:"flex items-center gap-2"},xa={class:"flex items-center gap-2"},_a={class:"flex items-center gap-2"},va={class:"text-xs text-muted-foreground"},ba={class:"text-xs text-muted-foreground"},ga={class:"flex gap-1"},Ra=X({__name:"Dashboard",props:{candidatura:{},configuracion:{}},setup(M){const n=M,F=[{title:"Dashboard",href:"/dashboard"},{title:"Mi Candidatura",href:"#"}],m=J(!1),f=y(()=>!!n.candidatura),H=y(()=>{if(!n.candidatura)return P;switch(n.candidatura.estado){case"aprobado":return A;case"rechazado":return V;case"pendiente":return I;case"borrador":return k;default:return S}}),L=y(()=>{if(!n.candidatura)return"text-blue-600";switch(n.candidatura.estado){case"aprobado":return"text-green-600";case"rechazado":return"text-red-600";case"pendiente":return"text-blue-600";case"borrador":return"text-yellow-600";default:return"text-gray-600"}}),g=y(()=>{if(!n.candidatura)return{text:"Crear Perfil de Candidatura",href:"/candidaturas/create",icon:P,description:"Completa tu perfil para poder postularte a convocatorias"};if(n.candidatura.puede_editar){let i="Editar Candidatura",e="Completa o actualiza la información de tu candidatura";return n.candidatura.estado==="rechazado"?e="Corrige los aspectos señalados y reenvía tu candidatura":n.candidatura.estado==="aprobado"?(i="Editar Campos Permitidos",e="Solo puedes editar campos marcados como editables. Los cambios requerirán nueva aprobación."):n.candidatura.tiene_datos||(i="Completar Candidatura"),{text:i,href:`/candidaturas/${n.candidatura.id}/edit`,icon:k,description:e}}return null}),T=i=>{if(!i)return"Fecha no disponible";try{const e=new Date(i);if(isNaN(e.getTime())){const p=i.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})/);if(p){const[,x,j,q,U,O]=p,E=new Date(parseInt(q),parseInt(j)-1,parseInt(x),parseInt(U),parseInt(O));if(!isNaN(E.getTime()))return E.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return i}return e.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error al formatear fecha:",e),i||"Fecha no disponible"}};return(i,e)=>(o(),b(Q,null,[t(a(K),{title:"Mi Candidatura"}),t(R,{breadcrumbs:F},{default:r(()=>{var p;return[s("div",ea,[e[14]||(e[14]=s("div",{class:"flex items-center justify-between"},[s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Gestiona tu perfil de candidatura para participar en convocatorias ")])],-1)),t(a(_),{class:"border-2"},{default:r(()=>[t(a(v),{class:"p-6"},{default:r(()=>{var x;return[s("div",ta,[s("div",sa,[s("div",{class:N([L.value,"p-3 rounded-full bg-opacity-10 flex-shrink-0"])},[(o(),c($(H.value),{class:"h-8 w-8"}))],2),s("div",ra,[s("h3",ia,u(f.value?i.candidatura.estado==="pendiente"?"Candidatura enviada":i.candidatura.estado_label:"Sin Candidatura"),1),((x=i.candidatura)==null?void 0:x.estado)==="pendiente"?(o(),b("p",da," Tu Candidatura ahora está pendiente de revisión ")):l("",!0),s("p",oa,u(f.value?`Versión ${i.candidatura.version} - Actualizada el ${T(i.candidatura.updated_at)}`:"Aún no has creado tu perfil de candidatura"),1),f.value?(o(),b("div",na,[t(a(z),{class:N(i.candidatura.estado_color)},{default:r(()=>[d(u(i.candidatura.estado_label),1)]),_:1},8,["class"]),i.candidatura.tiene_datos?l("",!0):(o(),c(a(z),{key:0,variant:"outline",class:"bg-yellow-50 text-yellow-700"},{default:r(()=>e[1]||(e[1]=[d(" Incompleto ")])),_:1}))])):l("",!0)])]),g.value?(o(),b("div",la,[t(a(D),{href:g.value.href,class:"block"},{default:r(()=>[t(a(h),{class:"w-full sm:w-auto"},{default:r(()=>[(o(),c($(g.value.icon),{class:"mr-2 h-4 w-4"})),d(" "+u(g.value.text),1)]),_:1})]),_:1},8,["href"])])):l("",!0)])]}),_:1})]),_:1}),(p=i.candidatura)!=null&&p.comentarios_admin?(o(),c(a(_),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:r(()=>[t(a(C),null,{default:r(()=>[t(a(w),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:r(()=>[t(a(W),{class:"h-5 w-5"}),e[2]||(e[2]=d(" Comentarios de la comisión "))]),_:1})]),_:1}),t(a(v),null,{default:r(()=>[s("p",ua,u(i.candidatura.comentarios_admin),1)]),_:1})]),_:1})):l("",!0),f.value&&m.value?(o(),b("div",ca,[t(G,{"candidatura-id":i.candidatura.id,"version-actual":i.candidatura.version},null,8,["candidatura-id","version-actual"])])):l("",!0),s("div",ma,[t(a(_),{class:"h-fit"},{default:r(()=>[t(a(C),{class:"pb-3"},{default:r(()=>[t(a(w),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(B),{class:"h-4 w-4"}),e[3]||(e[3]=d(" Estados "))]),_:1})]),_:1}),t(a(v),{class:"space-y-2"},{default:r(()=>[s("div",fa,[t(a(k),{class:"h-3 w-3 text-yellow-600"}),e[4]||(e[4]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Borrador:"),d(" Editable")],-1))]),s("div",pa,[t(a(I),{class:"h-3 w-3 text-blue-600"}),e[5]||(e[5]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Pendiente:"),d(" En revisión")],-1))]),s("div",xa,[t(a(A),{class:"h-3 w-3 text-green-600"}),e[6]||(e[6]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Aprobado:"),d(" Listo")],-1))]),s("div",_a,[t(a(V),{class:"h-3 w-3 text-red-600"}),e[7]||(e[7]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Rechazado:"),d(" Corregir")],-1))])]),_:1})]),_:1}),t(a(_),{class:"h-fit"},{default:r(()=>[t(a(C),{class:"pb-3"},{default:r(()=>[t(a(w),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(S),{class:"h-4 w-4"}),e[8]||(e[8]=d(" Configuración "))]),_:1})]),_:1}),t(a(v),{class:"space-y-2"},{default:r(()=>[s("div",null,[e[9]||(e[9]=s("p",{class:"text-xs font-medium"},"Campos:",-1)),s("p",va,u(i.configuracion.resumen),1)]),s("div",null,[e[10]||(e[10]=s("p",{class:"text-xs font-medium"},"Versión:",-1)),s("p",ba,"v"+u(i.configuracion.version),1)])]),_:1})]),_:1}),f.value?(o(),c(a(_),{key:0,class:"h-fit"},{default:r(()=>[t(a(C),{class:"pb-3"},{default:r(()=>[t(a(w),{class:"text-base"},{default:r(()=>e[11]||(e[11]=[d("Acciones")])),_:1})]),_:1}),t(a(v),{class:"space-y-2"},{default:r(()=>[t(a(h),{onClick:e[0]||(e[0]=x=>m.value=!m.value),variant:"outline",class:"w-full"},{default:r(()=>[t(a(Y),{class:"mr-2 h-4 w-4"}),d(" "+u(m.value?"Ocultar":"Mostrar")+" Historial ",1),(o(),c($(m.value?a(Z):a(aa)),{class:"ml-auto h-4 w-4"}))]),_:1}),s("div",ga,[t(a(D),{href:`/candidaturas/${i.candidatura.id}`},{default:r(()=>[t(a(h),{variant:"outline",size:"sm"},{default:r(()=>[t(a(B),{class:"mr-1 h-3 w-3"}),e[12]||(e[12]=d(" Ver "))]),_:1})]),_:1},8,["href"]),i.candidatura.puede_editar?(o(),c(a(D),{key:0,href:`/candidaturas/${i.candidatura.id}/edit`},{default:r(()=>[t(a(h),{variant:"outline",size:"sm"},{default:r(()=>[t(a(k),{class:"mr-1 h-3 w-3"}),e[13]||(e[13]=d(" Editar "))]),_:1})]),_:1},8,["href"])):l("",!0)])]),_:1})]),_:1})):l("",!0)])])]}),_:1})],64))}});export{Ra as default};
