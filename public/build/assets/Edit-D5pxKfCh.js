import{d as se,C as ne,r as O,c as X,b as V,e as n,w as t,g as d,j as f,f as a,u as e,P as de,h as i,t as v,l as ue,i as m,F as P,k as F,W as A}from"./app-CNcf-zdV.js";import{_ as me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DTy3l80b.js";import{_ as E,a as k,b as $,c as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-DhL5ChM3.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-C68I3fFy.js";import{_ as C}from"./createLucideIcon-DgLLtpTc.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-CXr4ucc6.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-BFduy937.js";import{_ as H}from"./Textarea.vue_vue_type_script_setup_true_lang-BLahoW9V.js";import{_ as w,a as D,b as N,c as I,d as b}from"./SelectValue.vue_vue_type_script_setup_true_lang-Bt0xndJV.js";import{_ as J,a as K}from"./index-BXNWrcHO.js";import{_ as pe,a as fe,b as j,c as M}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-PuWmj34h.js";import{u as ce}from"./useToast-CrUC3BSK.js";import{_ as R}from"./CampoPersonalizadoInput.vue_vue_type_script_setup_true_lang-Cn-pdbFi.js";import{_ as ve,a as _e}from"./ParticipantesManager.vue_vue_type_script_setup_true_lang-uzZKp6do.js";import{A as be}from"./arrow-left-qPIiRNis.js";import{T as ge}from"./trash-2-BaR4XxZx.js";import{C as Q}from"./circle-alert-BWYDLxj9.js";import{U as ye}from"./upload-BXITFokJ.js";import{S as Ve}from"./save-Bvcpe2E0.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D8koaehi.js";import"./index-C53AKuaZ.js";import"./floating-ui.vue-g3wBdaGy.js";import"./x-arLKReWz.js";import"./index-DoUjDw3v.js";import"./shield-Ds2U7D9u.js";import"./user-DzTPpMzP.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BBJrNP3L.js";import"./chevron-right-CoIj8tGl.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CS3Y7RjP.js";import"./VisuallyHidden-BMJ7uEAj.js";import"./index-BfcJxwg-.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D-RM_gVc.js";import"./index-UZehIf0x.js";import"./map-pin-CODmF8A6.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-CPZLV3U1.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CQwxGvmo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-Co9lmALi.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Bowse19S.js";import"./target-Bzh15SE9.js";import"./users-BCniY5Uo.js";import"./vote-DWrrItDX.js";import"./folder-open-Bl1zn-Xz.js";import"./send-Cs3Svvwv.js";import"./file-text-VjUXoo3d.js";import"./briefcase-BxQurTMk.js";import"./calendar-DAAYlVnm.js";import"./megaphone-DSquqsX_.js";import"./user-check-t0y4Vuir.js";import"./mail-CzyXkW1x.js";import"./message-square-vVP8zyj_.js";import"./external-link-DknYr06I.js";import"./panel-left-C37rxO5h.js";import"./index-s_YMJFqv.js";import"./check-N9bkD0I5.js";import"./index-DraxJDKZ.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-KgjJr8lb.js";import"./utils-D1nKU7ku.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BDqsklM1.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-Cu2pXtyO.js";import"./VisuallyHiddenInput-DQv9Xmp3.js";import"./circle-DT2yxC1F.js";import"./index-wZxNlukw.js";import"./search-DXa90Ror.js";import"./useKbd-kRIii9yh.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CxYPgAQ2.js";import"./plus-B0xw1qKM.js";import"./square-pen-Def0jsxb.js";const Ce={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},xe={class:"flex items-center justify-between"},Ee={class:"flex items-center gap-4"},ke={class:"text-gray-600 mt-1"},$e={class:"flex gap-2"},Ue={class:"flex gap-2"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se={key:0,class:"text-red-500 text-sm mt-1"},Pe={key:0,class:"text-red-500 text-sm mt-1"},Fe={key:0,class:"text-red-500 text-sm mt-1"},Ae={key:0,class:"space-y-4 pt-4 border-t"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},De={key:0,class:"text-red-500 text-sm mt-1"},Ne={key:0,class:"text-red-500 text-sm mt-1"},Ie={key:0,class:"text-red-500 text-sm mt-1"},je={key:0,class:"text-red-500 text-sm mt-1"},Me={key:0},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Le={key:0,class:"text-red-500 text-sm mt-1"},Oe={key:0,class:"text-red-500 text-sm mt-1"},Re={key:0,class:"space-y-4 pt-4 border-t"},Be={class:"space-y-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"flex items-center gap-4"},We={key:0,class:"text-sm text-gray-600"},Xe={key:0,class:"text-red-500 text-sm mt-1"},He={key:0,class:"text-red-500 text-sm mt-1"},Je={key:0,class:"space-y-4 pt-4 border-t"},Ke={key:0,class:"flex justify-end gap-4"},pa=se({__name:"Edit",props:{contrato:{},proyectos:{},camposPersonalizados:{},valoresCampos:{},usuarios:{default:()=>[]}},setup(Y){var G,W;const u=Y,g=ce(),Z=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:u.contrato.nombre,href:`/admin/contratos/${u.contrato.id}`},{title:"Editar",href:`/admin/contratos/${u.contrato.id}/edit`}],h=()=>!u.contrato.participantes||u.contrato.participantes.length===0?[]:u.contrato.participantes.map(s=>{var o,r,c;return{user_id:((o=s.pivot)==null?void 0:o.user_id)||s.user_id||s.id,rol:((r=s.pivot)==null?void 0:r.rol)||s.rol||"participante",notas:((c=s.pivot)==null?void 0:c.notas)||s.notas||""}}),l=ne({proyecto_id:u.contrato.proyecto_id.toString(),nombre:u.contrato.nombre,descripcion:u.contrato.descripcion||"",fecha_inicio:u.contrato.fecha_inicio,fecha_fin:u.contrato.fecha_fin||"",estado:u.contrato.estado,tipo:u.contrato.tipo,monto_total:((G=u.contrato.monto_total)==null?void 0:G.toString())||"",moneda:u.contrato.moneda,responsable_id:((W=u.contrato.responsable_id)==null?void 0:W.toString())||"none",contraparte_user_id:u.contrato.contraparte_user_id||null,contraparte_nombre:u.contrato.contraparte_nombre||"",contraparte_identificacion:u.contrato.contraparte_identificacion||"",contraparte_email:u.contrato.contraparte_email||"",contraparte_telefono:u.contrato.contraparte_telefono||"",participantes:h(),archivo_pdf:null,observaciones:u.contrato.observaciones||"",campos_personalizados:u.valoresCampos||{},_method:"PUT"}),L=O(u.contrato.archivo_pdf?"Archivo actual: "+u.contrato.archivo_pdf.split("/").pop():""),B=O("informacion");O(!1);const ee=[{value:"USD",label:"USD - Dólar Estadounidense"},{value:"EUR",label:"EUR - Euro"},{value:"MXN",label:"MXN - Peso Mexicano"},{value:"COP",label:"COP - Peso Colombiano"},{value:"ARS",label:"ARS - Peso Argentino"},{value:"CLP",label:"CLP - Peso Chileno"},{value:"PEN",label:"PEN - Sol Peruano"}],S=X(()=>{const s={informacion:[],financiero:[],otros:[]};return u.camposPersonalizados.forEach(o=>{o.slug.includes("financ")||o.slug.includes("monto")||o.slug.includes("precio")?s.financiero.push(o):o.slug.includes("info")||o.slug.includes("descrip")?s.informacion.push(o):s.otros.push(o)}),s}),p=X(()=>u.contrato.estado!=="finalizado"&&u.contrato.estado!=="cancelado"),q=s=>{const o=s.target;o.files&&o.files[0]&&(l.archivo_pdf=o.files[0],L.value="Nuevo archivo: "+o.files[0].name)},oe=()=>{const s=[];return l.proyecto_id||s.push("Debe seleccionar un proyecto"),l.nombre.trim()||s.push("El nombre del contrato es obligatorio"),l.fecha_inicio||s.push("La fecha de inicio es obligatoria"),l.fecha_fin&&l.fecha_fin<l.fecha_inicio&&s.push("La fecha de fin debe ser posterior a la fecha de inicio"),u.camposPersonalizados.forEach(o=>{o.es_requerido&&!l.campos_personalizados[o.id]&&s.push(`El campo "${o.nombre}" es obligatorio`)}),s},ae=()=>{const s=oe();if(s.length>0){s.forEach(r=>g.error(r));return}const o=new FormData;Object.keys(l.data()).forEach(r=>{r==="campos_personalizados"?Object.keys(l.campos_personalizados).forEach(c=>{const y=l.campos_personalizados[c];y!=null&&y!==""&&o.append(`campos_personalizados[${c}]`,y)}):r==="participantes"?l.participantes.forEach((c,y)=>{o.append(`participantes[${y}][user_id]`,c.user_id.toString()),o.append(`participantes[${y}][rol]`,c.rol),c.notas&&o.append(`participantes[${y}][notas]`,c.notas)}):r==="archivo_pdf"&&l.archivo_pdf?o.append("archivo_pdf",l.archivo_pdf):r==="responsable_id"&&l[r]==="none"||r!=="_method"&&l[r]!==null&&l[r]!==""&&o.append(r,l[r])}),o.append("_method","PUT"),A.post(route("admin.contratos.update",u.contrato.id),o,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{g.success("Contrato actualizado exitosamente")},onError:r=>{typeof r=="object"&&r!==null?Object.values(r).forEach(c=>{Array.isArray(c)?c.forEach(y=>g.error(String(y))):typeof c=="string"?g.error(c):g.error("Error al actualizar el contrato")}):g.error("Error al actualizar el contrato")}})},te=()=>{confirm("¿Está seguro de eliminar este contrato? Esta acción no se puede deshacer.")&&A.delete(route("admin.contratos.destroy",u.contrato.id),{onSuccess:()=>{g.success("Contrato eliminado exitosamente")},onError:()=>{g.error("Error al eliminar el contrato")}})},le=()=>{confirm("¿Desea duplicar este contrato?")&&A.post(route("admin.contratos.duplicar",u.contrato.id),{},{onSuccess:()=>{g.success("Contrato duplicado exitosamente")},onError:()=>{g.error("Error al duplicar el contrato")}})},T=s=>{A.post(route("admin.contratos.cambiar-estado",u.contrato.id),{estado:s},{onSuccess:()=>{l.estado=s,g.success("Estado actualizado exitosamente")},onError:()=>{g.error("Error al cambiar el estado")}})},re=()=>{confirm("¿Está seguro de cancelar? Los cambios no guardados se perderán.")&&A.get(route("admin.contratos.show",u.contrato.id))},ie=s=>{s&&(l.contraparte_nombre="",l.contraparte_identificacion="",l.contraparte_email="",l.contraparte_telefono="")};return(s,o)=>(n(),V(me,{breadcrumbs:Z},{default:t(()=>[d("div",Ce,[d("div",xe,[d("div",Ee,[a(e(de),{href:s.route("admin.contratos.index")},{default:t(()=>[a(e(C),{variant:"ghost",size:"sm"},{default:t(()=>[a(e(be),{class:"h-4 w-4 mr-2"}),o[23]||(o[23]=i(" Volver ",-1))]),_:1})]),_:1},8,["href"]),d("div",null,[o[24]||(o[24]=d("h1",{class:"text-3xl font-bold"},"Editar Contrato",-1)),d("p",ke,"Modificar información del contrato #"+v(s.contrato.id),1)])]),d("div",$e,[a(e(C),{variant:"outline",onClick:le},{default:t(()=>[...o[25]||(o[25]=[i(" Duplicar ",-1)])]),_:1}),a(e(C),{variant:"destructive",onClick:te},{default:t(()=>[a(e(ge),{class:"h-4 w-4 mr-2"}),o[26]||(o[26]=i(" Eliminar ",-1))]),_:1})])]),p.value?f("",!0):(n(),V(e(J),{key:0,variant:"warning"},{default:t(()=>[a(e(Q),{class:"h-4 w-4"}),a(e(K),null,{default:t(()=>[i(" Este contrato está "+v(s.contrato.estado)+" y no puede ser editado. ",1),s.contrato.estado==="finalizado"?(n(),V(e(C),{key:0,variant:"link",size:"sm",onClick:o[0]||(o[0]=r=>T("activo")),class:"ml-2"},{default:t(()=>[...o[27]||(o[27]=[i(" Reactivar ",-1)])]),_:1})):f("",!0)]),_:1})]),_:1})),p.value?(n(),V(e(E),{key:1},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),{class:"text-lg"},{default:t(()=>[...o[28]||(o[28]=[i("Cambio Rápido de Estado",-1)])]),_:1})]),_:1}),a(e(U),null,{default:t(()=>[d("div",Ue,[e(l).estado==="borrador"?(n(),V(e(C),{key:0,variant:"outline",size:"sm",onClick:o[1]||(o[1]=r=>T("activo"))},{default:t(()=>[...o[29]||(o[29]=[i(" Activar Contrato ",-1)])]),_:1})):f("",!0),e(l).estado==="activo"?(n(),V(e(C),{key:1,variant:"outline",size:"sm",onClick:o[2]||(o[2]=r=>T("finalizado"))},{default:t(()=>[...o[30]||(o[30]=[i(" Finalizar Contrato ",-1)])]),_:1})):f("",!0),e(l).estado!=="cancelado"?(n(),V(e(C),{key:2,variant:"outline",size:"sm",class:"text-red-600",onClick:o[3]||(o[3]=r=>T("cancelado"))},{default:t(()=>[...o[31]||(o[31]=[i(" Cancelar Contrato ",-1)])]),_:1})):f("",!0)])]),_:1})]),_:1})):f("",!0),d("form",{onSubmit:ue(ae,["prevent"]),class:"space-y-6"},[a(e(pe),{modelValue:B.value,"onUpdate:modelValue":o[22]||(o[22]=r=>B.value=r)},{default:t(()=>[a(e(fe),{class:"grid w-full grid-cols-5"},{default:t(()=>[a(e(j),{value:"informacion"},{default:t(()=>[...o[32]||(o[32]=[i("Información General",-1)])]),_:1}),a(e(j),{value:"fechas"},{default:t(()=>[...o[33]||(o[33]=[i("Fechas y Estado",-1)])]),_:1}),a(e(j),{value:"financiero"},{default:t(()=>[...o[34]||(o[34]=[i("Información Financiera",-1)])]),_:1}),a(e(j),{value:"contraparte"},{default:t(()=>[...o[35]||(o[35]=[i("Contraparte",-1)])]),_:1}),a(e(j),{value:"adicional"},{default:t(()=>[...o[36]||(o[36]=[i("Información Adicional",-1)])]),_:1})]),_:1}),a(e(M),{value:"informacion"},{default:t(()=>[a(e(E),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),null,{default:t(()=>[...o[37]||(o[37]=[i("Información General",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[38]||(o[38]=[i("Datos principales del contrato",-1)])]),_:1})]),_:1}),a(e(U),{class:"space-y-4"},{default:t(()=>[d("div",ze,[d("div",null,[a(e(_),{for:"proyecto_id"},{default:t(()=>[...o[39]||(o[39]=[i("Proyecto *",-1)])]),_:1}),a(e(w),{modelValue:e(l).proyecto_id,"onUpdate:modelValue":o[4]||(o[4]=r=>e(l).proyecto_id=r),disabled:!p.value},{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(N),{placeholder:"Seleccione un proyecto"})]),_:1}),a(e(I),null,{default:t(()=>[(n(!0),m(P,null,F(s.proyectos,r=>(n(),V(e(b),{key:r.id,value:r.id.toString()},{default:t(()=>[i(v(r.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(l).errors.proyecto_id?(n(),m("div",Se,v(e(l).errors.proyecto_id),1)):f("",!0)]),d("div",null,[a(e(_),{for:"nombre"},{default:t(()=>[...o[40]||(o[40]=[i("Nombre del Contrato *",-1)])]),_:1}),a(e(x),{id:"nombre",modelValue:e(l).nombre,"onUpdate:modelValue":o[5]||(o[5]=r=>e(l).nombre=r),placeholder:"Ej: Contrato de servicios de consultoría",disabled:!p.value},null,8,["modelValue","disabled"]),e(l).errors.nombre?(n(),m("div",Pe,v(e(l).errors.nombre),1)):f("",!0)])]),d("div",null,[a(e(_),{for:"descripcion"},{default:t(()=>[...o[41]||(o[41]=[i("Descripción",-1)])]),_:1}),a(e(H),{id:"descripcion",modelValue:e(l).descripcion,"onUpdate:modelValue":o[6]||(o[6]=r=>e(l).descripcion=r),placeholder:"Descripción detallada del contrato...",rows:"4",disabled:!p.value},null,8,["modelValue","disabled"]),e(l).errors.descripcion?(n(),m("div",Fe,v(e(l).errors.descripcion),1)):f("",!0)]),S.value.informacion.length>0?(n(),m("div",Ae,[o[42]||(o[42]=d("h3",{class:"font-medium"},"Información Complementaria",-1)),(n(!0),m(P,null,F(S.value.informacion,r=>(n(),m("div",{key:r.id},[a(R,{campo:r,modelValue:e(l).campos_personalizados[r.id],"onUpdate:modelValue":c=>e(l).campos_personalizados[r.id]=c,disabled:!p.value},null,8,["campo","modelValue","onUpdate:modelValue","disabled"])]))),128))])):f("",!0)]),_:1})]),_:1})]),_:1}),a(e(M),{value:"fechas"},{default:t(()=>[a(e(E),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),null,{default:t(()=>[...o[43]||(o[43]=[i("Fechas y Estado",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[44]||(o[44]=[i("Configure las fechas y el estado del contrato",-1)])]),_:1})]),_:1}),a(e(U),{class:"space-y-4"},{default:t(()=>[d("div",we,[d("div",null,[a(e(_),{for:"fecha_inicio"},{default:t(()=>[...o[45]||(o[45]=[i("Fecha de Inicio *",-1)])]),_:1}),a(e(x),{id:"fecha_inicio",type:"date",modelValue:e(l).fecha_inicio,"onUpdate:modelValue":o[7]||(o[7]=r=>e(l).fecha_inicio=r),disabled:!p.value},null,8,["modelValue","disabled"]),e(l).errors.fecha_inicio?(n(),m("div",De,v(e(l).errors.fecha_inicio),1)):f("",!0)]),d("div",null,[a(e(_),{for:"fecha_fin"},{default:t(()=>[...o[46]||(o[46]=[i("Fecha de Fin",-1)])]),_:1}),a(e(x),{id:"fecha_fin",type:"date",modelValue:e(l).fecha_fin,"onUpdate:modelValue":o[8]||(o[8]=r=>e(l).fecha_fin=r),disabled:!p.value},null,8,["modelValue","disabled"]),e(l).errors.fecha_fin?(n(),m("div",Ne,v(e(l).errors.fecha_fin),1)):f("",!0)]),d("div",null,[a(e(_),{for:"estado"},{default:t(()=>[...o[47]||(o[47]=[i("Estado",-1)])]),_:1}),a(e(w),{modelValue:e(l).estado,"onUpdate:modelValue":o[9]||(o[9]=r=>e(l).estado=r),disabled:!p.value},{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(N))]),_:1}),a(e(I),null,{default:t(()=>[a(e(b),{value:"borrador"},{default:t(()=>[...o[48]||(o[48]=[i("Borrador",-1)])]),_:1}),a(e(b),{value:"activo"},{default:t(()=>[...o[49]||(o[49]=[i("Activo",-1)])]),_:1}),a(e(b),{value:"finalizado"},{default:t(()=>[...o[50]||(o[50]=[i("Finalizado",-1)])]),_:1}),a(e(b),{value:"cancelado"},{default:t(()=>[...o[51]||(o[51]=[i("Cancelado",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e(l).errors.estado?(n(),m("div",Ie,v(e(l).errors.estado),1)):f("",!0)]),d("div",null,[a(e(_),{for:"tipo"},{default:t(()=>[...o[52]||(o[52]=[i("Tipo de Contrato *",-1)])]),_:1}),a(e(w),{modelValue:e(l).tipo,"onUpdate:modelValue":o[10]||(o[10]=r=>e(l).tipo=r),disabled:!p.value},{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(N))]),_:1}),a(e(I),null,{default:t(()=>[a(e(b),{value:"servicio"},{default:t(()=>[...o[53]||(o[53]=[i("Servicio",-1)])]),_:1}),a(e(b),{value:"obra"},{default:t(()=>[...o[54]||(o[54]=[i("Obra",-1)])]),_:1}),a(e(b),{value:"suministro"},{default:t(()=>[...o[55]||(o[55]=[i("Suministro",-1)])]),_:1}),a(e(b),{value:"consultoria"},{default:t(()=>[...o[56]||(o[56]=[i("Consultoría",-1)])]),_:1}),a(e(b),{value:"otro"},{default:t(()=>[...o[57]||(o[57]=[i("Otro",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e(l).errors.tipo?(n(),m("div",je,v(e(l).errors.tipo),1)):f("",!0)])]),s.usuarios?(n(),m("div",Me,[a(e(_),{for:"responsable_id"},{default:t(()=>[...o[58]||(o[58]=[i("Responsable",-1)])]),_:1}),a(e(w),{modelValue:e(l).responsable_id,"onUpdate:modelValue":o[11]||(o[11]=r=>e(l).responsable_id=r),disabled:!p.value},{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(N),{placeholder:"Seleccione un responsable"})]),_:1}),a(e(I),null,{default:t(()=>[a(e(b),{value:"none"},{default:t(()=>[...o[59]||(o[59]=[i("Sin responsable",-1)])]),_:1}),(n(!0),m(P,null,F(s.usuarios,r=>(n(),V(e(b),{key:r.id,value:r.id.toString()},{default:t(()=>[i(v(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])):f("",!0)]),_:1})]),_:1})]),_:1}),a(e(M),{value:"financiero"},{default:t(()=>[a(e(E),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),null,{default:t(()=>[...o[60]||(o[60]=[i("Información Financiera",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[61]||(o[61]=[i("Montos y detalles financieros del contrato",-1)])]),_:1})]),_:1}),a(e(U),{class:"space-y-4"},{default:t(()=>[d("div",Te,[d("div",null,[a(e(_),{for:"monto_total"},{default:t(()=>[...o[62]||(o[62]=[i("Monto Total",-1)])]),_:1}),a(e(x),{id:"monto_total",type:"number",step:"0.01",modelValue:e(l).monto_total,"onUpdate:modelValue":o[12]||(o[12]=r=>e(l).monto_total=r),placeholder:"0.00",disabled:!p.value},null,8,["modelValue","disabled"]),e(l).errors.monto_total?(n(),m("div",Le,v(e(l).errors.monto_total),1)):f("",!0)]),d("div",null,[a(e(_),{for:"moneda"},{default:t(()=>[...o[63]||(o[63]=[i("Moneda",-1)])]),_:1}),a(e(w),{modelValue:e(l).moneda,"onUpdate:modelValue":o[13]||(o[13]=r=>e(l).moneda=r),disabled:!p.value},{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(N))]),_:1}),a(e(I),null,{default:t(()=>[(n(),m(P,null,F(ee,r=>a(e(b),{key:r.value,value:r.value},{default:t(()=>[i(v(r.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue","disabled"]),e(l).errors.moneda?(n(),m("div",Oe,v(e(l).errors.moneda),1)):f("",!0)])]),S.value.financiero.length>0?(n(),m("div",Re,[o[64]||(o[64]=d("h3",{class:"font-medium"},"Campos Financieros Personalizados",-1)),(n(!0),m(P,null,F(S.value.financiero,r=>(n(),m("div",{key:r.id},[a(R,{campo:r,modelValue:e(l).campos_personalizados[r.id],"onUpdate:modelValue":c=>e(l).campos_personalizados[r.id]=c,disabled:!p.value},null,8,["campo","modelValue","onUpdate:modelValue","disabled"])]))),128))])):f("",!0)]),_:1})]),_:1})]),_:1}),a(e(M),{value:"contraparte"},{default:t(()=>[d("div",Be,[a(e(E),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),null,{default:t(()=>[...o[65]||(o[65]=[i("Contraparte - Usuario del Sistema",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[66]||(o[66]=[i(" Seleccione un usuario del sistema como contraparte del contrato ",-1)])]),_:1})]),_:1}),a(e(U),null,{default:t(()=>[a(ve,{modelValue:e(l).contraparte_user_id,"onUpdate:modelValue":o[14]||(o[14]=r=>e(l).contraparte_user_id=r),users:s.usuarios,label:"Usuario Contraparte",placeholder:"Seleccionar usuario del sistema...",description:"Si la contraparte es un usuario registrado en el sistema, selecciónelo aquí",disabled:!p.value,onChange:ie},null,8,["modelValue","users","disabled"])]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),null,{default:t(()=>[...o[67]||(o[67]=[i("Contraparte - Información Externa",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[68]||(o[68]=[i(" Complete estos campos si la contraparte no es un usuario del sistema ",-1)])]),_:1})]),_:1}),a(e(U),{class:"space-y-4"},{default:t(()=>[e(l).contraparte_user_id?(n(),V(e(J),{key:0,class:"mb-4"},{default:t(()=>[a(e(Q),{class:"h-4 w-4"}),a(e(K),null,{default:t(()=>[...o[69]||(o[69]=[i(" Los campos de contraparte externa están deshabilitados porque ya se seleccionó un usuario del sistema. ",-1)])]),_:1})]),_:1})):f("",!0),d("div",qe,[d("div",null,[a(e(_),{for:"contraparte_nombre"},{default:t(()=>[...o[70]||(o[70]=[i("Nombre de la Contraparte",-1)])]),_:1}),a(e(x),{id:"contraparte_nombre",modelValue:e(l).contraparte_nombre,"onUpdate:modelValue":o[15]||(o[15]=r=>e(l).contraparte_nombre=r),placeholder:"Nombre de la empresa o persona",disabled:!p.value||!!e(l).contraparte_user_id},null,8,["modelValue","disabled"])]),d("div",null,[a(e(_),{for:"contraparte_identificacion"},{default:t(()=>[...o[71]||(o[71]=[i("Identificación/RUC",-1)])]),_:1}),a(e(x),{id:"contraparte_identificacion",modelValue:e(l).contraparte_identificacion,"onUpdate:modelValue":o[16]||(o[16]=r=>e(l).contraparte_identificacion=r),placeholder:"Número de identificación",disabled:!p.value||!!e(l).contraparte_user_id},null,8,["modelValue","disabled"])]),d("div",null,[a(e(_),{for:"contraparte_email"},{default:t(()=>[...o[72]||(o[72]=[i("Email de Contacto",-1)])]),_:1}),a(e(x),{id:"contraparte_email",type:"email",modelValue:e(l).contraparte_email,"onUpdate:modelValue":o[17]||(o[17]=r=>e(l).contraparte_email=r),placeholder:"email@ejemplo.com",disabled:!p.value||!!e(l).contraparte_user_id},null,8,["modelValue","disabled"])]),d("div",null,[a(e(_),{for:"contraparte_telefono"},{default:t(()=>[...o[73]||(o[73]=[i("Teléfono de Contacto",-1)])]),_:1}),a(e(x),{id:"contraparte_telefono",modelValue:e(l).contraparte_telefono,"onUpdate:modelValue":o[18]||(o[18]=r=>e(l).contraparte_telefono=r),placeholder:"+1234567890",disabled:!p.value||!!e(l).contraparte_user_id},null,8,["modelValue","disabled"])])])]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),null,{default:t(()=>[...o[74]||(o[74]=[i("Participantes del Contrato",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[75]||(o[75]=[i(" Agregue usuarios del sistema que participarán en este contrato con diferentes roles ",-1)])]),_:1})]),_:1}),a(e(U),null,{default:t(()=>[a(_e,{modelValue:e(l).participantes,"onUpdate:modelValue":o[19]||(o[19]=r=>e(l).participantes=r),users:s.usuarios,"entity-type":"contrato",title:"",disabled:!p.value},null,8,["modelValue","users","disabled"])]),_:1})]),_:1})])]),_:1}),a(e(M),{value:"adicional"},{default:t(()=>[a(e(E),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e($),null,{default:t(()=>[...o[76]||(o[76]=[i("Información Adicional",-1)])]),_:1}),a(e(z),null,{default:t(()=>[...o[77]||(o[77]=[i("Archivos y observaciones",-1)])]),_:1})]),_:1}),a(e(U),{class:"space-y-4"},{default:t(()=>[d("div",null,[a(e(_),{for:"archivo_pdf"},{default:t(()=>[...o[78]||(o[78]=[i("Archivo del Contrato (PDF)",-1)])]),_:1}),d("div",Ge,[a(e(x),{id:"archivo_pdf",type:"file",accept:".pdf",onChange:q,class:"hidden",disabled:!p.value},null,8,["disabled"]),a(e(C),{type:"button",variant:"outline",onClick:o[20]||(o[20]=r=>s.$refs.fileInput.click()),disabled:!p.value},{default:t(()=>[a(e(ye),{class:"h-4 w-4 mr-2"}),o[79]||(o[79]=i(" Cambiar PDF ",-1))]),_:1},8,["disabled"]),L.value?(n(),m("span",We,v(L.value),1)):f("",!0)]),o[80]||(o[80]=d("p",{class:"text-xs text-gray-500 mt-1"},"Máximo 10MB",-1)),e(l).errors.archivo_pdf?(n(),m("div",Xe,v(e(l).errors.archivo_pdf),1)):f("",!0)]),d("div",null,[a(e(_),{for:"observaciones"},{default:t(()=>[...o[81]||(o[81]=[i("Observaciones",-1)])]),_:1}),a(e(H),{id:"observaciones",modelValue:e(l).observaciones,"onUpdate:modelValue":o[21]||(o[21]=r=>e(l).observaciones=r),placeholder:"Notas u observaciones adicionales...",rows:"4",disabled:!p.value},null,8,["modelValue","disabled"]),e(l).errors.observaciones?(n(),m("div",He,v(e(l).errors.observaciones),1)):f("",!0)]),S.value.otros.length>0?(n(),m("div",Je,[o[82]||(o[82]=d("h3",{class:"font-medium"},"Campos Personalizados",-1)),(n(!0),m(P,null,F(S.value.otros,r=>(n(),m("div",{key:r.id},[a(R,{campo:r,modelValue:e(l).campos_personalizados[r.id],"onUpdate:modelValue":c=>e(l).campos_personalizados[r.id]=c,disabled:!p.value},null,8,["campo","modelValue","onUpdate:modelValue","disabled"])]))),128))])):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p.value?(n(),m("div",Ke,[a(e(C),{type:"button",variant:"outline",onClick:re,disabled:e(l).processing},{default:t(()=>[...o[83]||(o[83]=[i(" Cancelar ",-1)])]),_:1},8,["disabled"]),a(e(C),{type:"submit",disabled:e(l).processing},{default:t(()=>[a(e(Ve),{class:"h-4 w-4 mr-2"}),i(" "+v(e(l).processing?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])])):f("",!0)],32)]),d("input",{ref:"fileInput",type:"file",accept:".pdf",onChange:q,class:"hidden"},null,544)]),_:1}))}});export{pa as default};
