import{_ as F}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DfbVIH0o.js";import{d as M,b as p,w as l,e as s,g as o,f as t,q as G,t as u,h as a,m as n,v as w,i as f,j as R,F as y,k as b}from"./app-CkhVWdHG.js";import{_ as k}from"./createLucideIcon-CHf_Lxma.js";import{_,a as c,b as x,c as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-BXCLwqRH.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-Kyr86e_f.js";import{_ as v}from"./index-DgRiAzms.js";import{_ as H,a as J,b as h,c as S}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Cp_zDCVi.js";import{_ as K,a as O,b as j,c as A,d as Q,e as C}from"./TableHeader.vue_vue_type_script_setup_true_lang-CaX1coAH.js";import{_ as W,a as X,b as Y}from"./index-DAkIX2xo.js";import{S as L}from"./shield-CF7xWoVR.js";import{S as Z}from"./square-pen-5xtJLdpS.js";import{A as tt}from"./arrow-left-BWgHrqDN.js";import{U as et}from"./users-F_LGaRLI.js";import{L as st}from"./lock-WUwtc3rs.js";import{T as lt}from"./target-BmVErwO4.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-DKaD928I.js";import"./index-At6q0cj0.js";import"./floating-ui.vue-8TPJYbVN.js";import"./x-BCEWOWXy.js";import"./Input.vue_vue_type_script_setup_true_lang-DzvVhVAL.js";import"./index-DrV5l2Sk.js";import"./user-CeelOWF7.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-f6YTEwmi.js";import"./chevron-right-DdPTDTrr.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BHk0bXwu.js";import"./VisuallyHidden-C9lEUMbd.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DU0zgQXL.js";import"./check-D3BooNAk.js";import"./Label.vue_vue_type_script_setup_true_lang-j5TDzH1i.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-H8opoY1u.js";import"./index-B0WfP2AV.js";import"./circle-alert-C7lqUy5m.js";import"./map-pin-DsvTsqaq.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-9dijwKH3.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-hJmYyt6h.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-UscTC1nv.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ByygLhPE.js";import"./tag-B5l-vvj7.js";import"./vote-CcdJJgdz.js";import"./folder-open-DYXDlTv5.js";import"./send-6mxAGbLJ.js";import"./file-text-D16wxmF-.js";import"./briefcase-BZxp1iFi.js";import"./calendar-DY2SJR6W.js";import"./megaphone-BRrpcecz.js";import"./user-check-Csl4bhL0.js";import"./clipboard-list-C9l00ASA.js";import"./mail-bD5vIarq.js";import"./message-square-V9_XX9nJ.js";import"./external-link-J8JT7u4-.js";import"./panel-left-BoQqoDB3.js";import"./index-DXVwOIj3.js";import"./RovingFocusItem-BlRAFxra.js";import"./utils-Co-ORTrX.js";const ot={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},at={class:"flex items-center justify-between"},it={class:"flex items-center gap-4"},rt={class:"p-3 bg-primary/10 rounded-lg"},nt={class:"text-2xl font-bold tracking-tight"},dt={class:"flex items-center gap-2 mt-1"},ut={class:"flex gap-2"},mt={class:"grid gap-6 md:grid-cols-3"},ft={class:"text-2xl font-bold"},pt={class:"text-2xl font-bold"},_t={class:"text-2xl font-bold"},ct={class:"grid grid-cols-2 gap-4"},xt={class:"text-sm font-mono"},gt={class:"text-sm font-mono"},vt={class:"text-sm"},yt={class:"text-sm"},bt={key:0},$t={class:"text-sm"},wt={key:1},kt={class:"flex flex-wrap gap-2"},ht={key:0,class:"text-center py-8"},St={key:1,class:"space-y-4"},At={class:"font-semibold mb-2"},Ct={class:"flex flex-wrap gap-2"},Dt={key:2,class:"text-center py-8 text-muted-foreground"},Pt={class:"flex items-center gap-3"},Vt={class:"font-medium"},Rt={key:1,class:"text-center py-8 text-muted-foreground"},Ut={key:0,class:"space-y-3"},jt={class:"font-semibold"},Lt={class:"text-sm text-muted-foreground mt-1"},Nt={class:"flex gap-2 mt-2"},Et={key:1,class:"text-center py-8 text-muted-foreground"},ze=M({__name:"Show",props:{role:{},userCount:{}},setup(r){const $=r,N=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"},{title:$.role.display_name,href:"#"}],E=()=>["super_admin","admin","manager","user","end_customer"].includes($.role.name),B=m=>m.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),D=m=>new Date(m).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),z=()=>{if(!$.role.permissions)return{};const m={};return $.role.permissions.forEach(e=>{const[d,i]=e.split(".");m[d]||(m[d]=[]),m[d].push(i)}),m},T=m=>({users:"Usuarios",votaciones:"Votaciones",convocatorias:"Convocatorias",postulaciones:"Postulaciones",candidaturas:"Candidaturas",reports:"Reportes",settings:"Configuración",dashboard:"Dashboard",profile:"Perfil"})[m]||m,q=m=>({view:"secondary",create:"default",edit:"outline",delete:"destructive",export:"ghost"})[m]||"outline";return(m,e)=>(n(),p(F,{breadcrumbs:N},{default:l(()=>[s(t(G),{title:`Rol: ${r.role.display_name}`},null,8,["title"]),o("div",ot,[o("div",at,[o("div",it,[o("div",rt,[s(t(L),{class:"h-8 w-8 text-primary"})]),o("div",null,[o("h2",nt,u(r.role.display_name),1),o("div",dt,[s(t(v),{variant:"outline"},{default:l(()=>[a(u(r.role.name),1)]),_:1}),E()?(n(),p(t(v),{key:0,variant:"default"},{default:l(()=>[...e[0]||(e[0]=[a("Rol del Sistema",-1)])]),_:1})):(n(),p(t(v),{key:1,variant:"secondary"},{default:l(()=>[...e[1]||(e[1]=[a("Rol Personalizado",-1)])]),_:1}))])])]),o("div",ut,[s(t(w),{href:`/admin/roles/${r.role.id}/edit`},{default:l(()=>[s(t(k),null,{default:l(()=>[s(t(Z),{class:"mr-2 h-4 w-4"}),e[2]||(e[2]=a(" Editar ",-1))]),_:1})]),_:1},8,["href"]),s(t(w),{href:m.route("admin.roles.index")},{default:l(()=>[s(t(k),{variant:"outline"},{default:l(()=>[s(t(tt),{class:"mr-2 h-4 w-4"}),e[3]||(e[3]=a(" Volver ",-1))]),_:1})]),_:1},8,["href"])])]),o("div",mt,[s(t(_),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(t(x),{class:"text-sm font-medium"},{default:l(()=>[...e[4]||(e[4]=[a("Usuarios Asignados",-1)])]),_:1}),s(t(et),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(g),null,{default:l(()=>[o("div",ft,u(r.userCount),1),e[5]||(e[5]=o("p",{class:"text-xs text-muted-foreground"},"usuarios con este rol",-1))]),_:1})]),_:1}),s(t(_),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(t(x),{class:"text-sm font-medium"},{default:l(()=>[...e[6]||(e[6]=[a("Permisos",-1)])]),_:1}),s(t(st),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(g),null,{default:l(()=>{var d,i;return[o("div",pt,u((d=r.role.permissions)!=null&&d.includes("*")?"Todos":((i=r.role.permissions)==null?void 0:i.length)||0),1),e[7]||(e[7]=o("p",{class:"text-xs text-muted-foreground"},"permisos asignados",-1))]}),_:1})]),_:1}),s(t(_),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(t(x),{class:"text-sm font-medium"},{default:l(()=>[...e[8]||(e[8]=[a("Segmentos",-1)])]),_:1}),s(t(lt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(g),null,{default:l(()=>{var d;return[o("div",_t,u(((d=r.role.segments)==null?void 0:d.length)||0),1),e[9]||(e[9]=o("p",{class:"text-xs text-muted-foreground"},"segmentos asociados",-1))]}),_:1})]),_:1})]),s(t(H),{defaultValue:"details",class:"space-y-4"},{default:l(()=>[s(t(J),null,{default:l(()=>[s(t(h),{value:"details"},{default:l(()=>[...e[10]||(e[10]=[a("Detalles",-1)])]),_:1}),s(t(h),{value:"permissions"},{default:l(()=>[...e[11]||(e[11]=[a("Permisos",-1)])]),_:1}),s(t(h),{value:"users"},{default:l(()=>[...e[12]||(e[12]=[a("Usuarios",-1)])]),_:1}),s(t(h),{value:"segments"},{default:l(()=>[...e[13]||(e[13]=[a("Segmentos",-1)])]),_:1})]),_:1}),s(t(S),{value:"details"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[14]||(e[14]=[a("Información del Rol",-1)])]),_:1})]),_:1}),s(t(g),{class:"space-y-4"},{default:l(()=>{var d;return[o("div",ct,[o("div",null,[e[15]||(e[15]=o("p",{class:"text-sm font-medium text-muted-foreground"},"ID del Rol",-1)),o("p",xt,u(r.role.id),1)]),o("div",null,[e[16]||(e[16]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Nombre Interno",-1)),o("p",gt,u(r.role.name),1)]),o("div",null,[e[17]||(e[17]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Creado",-1)),o("p",vt,u(D(r.role.created_at)),1)]),o("div",null,[e[18]||(e[18]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Última Actualización",-1)),o("p",yt,u(D(r.role.updated_at)),1)])]),r.role.description?(n(),f("div",bt,[e[19]||(e[19]=o("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),o("p",$t,u(r.role.description),1)])):R("",!0),(d=r.role.allowed_modules)!=null&&d.length?(n(),f("div",wt,[e[20]||(e[20]=o("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Módulos Permitidos",-1)),o("div",kt,[(n(!0),f(y,null,b(r.role.allowed_modules,i=>(n(),p(t(v),{key:i,variant:"outline"},{default:l(()=>[a(u(i),1)]),_:2},1024))),128))])])):R("",!0)]}),_:1})]),_:1})]),_:1}),s(t(S),{value:"permissions"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[21]||(e[21]=[a("Permisos Asignados",-1)])]),_:1}),s(t(U),null,{default:l(()=>[...e[22]||(e[22]=[a(" Lista detallada de permisos organizados por módulo ",-1)])]),_:1})]),_:1}),s(t(g),null,{default:l(()=>{var d,i;return[(d=r.role.permissions)!=null&&d.includes("*")?(n(),f("div",ht,[s(t(L),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e[23]||(e[23]=o("p",{class:"text-lg font-semibold"},"Acceso Total",-1)),e[24]||(e[24]=o("p",{class:"text-sm text-muted-foreground"},"Este rol tiene todos los permisos del sistema",-1))])):(i=r.role.permissions)!=null&&i.length?(n(),f("div",St,[(n(!0),f(y,null,b(z(),(I,P)=>(n(),f("div",{key:P,class:"border rounded-lg p-4"},[o("h4",At,u(T(P)),1),o("div",Ct,[(n(!0),f(y,null,b(I,V=>(n(),p(t(v),{key:`${P}.${V}`,variant:q(V)},{default:l(()=>[a(u(V),1)]),_:2},1032,["variant"]))),128))])]))),128))])):(n(),f("div",Dt," No hay permisos asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(t(S),{value:"users"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[25]||(e[25]=[a("Usuarios con este Rol",-1)])]),_:1}),s(t(U),null,{default:l(()=>[...e[26]||(e[26]=[a(" Lista de usuarios que tienen asignado este rol ",-1)])]),_:1})]),_:1}),s(t(g),null,{default:l(()=>{var d;return[(d=r.role.users)!=null&&d.length?(n(),p(t(K),{key:0},{default:l(()=>[s(t(O),null,{default:l(()=>[s(t(j),null,{default:l(()=>[s(t(A),null,{default:l(()=>[...e[27]||(e[27]=[a("Usuario",-1)])]),_:1}),s(t(A),null,{default:l(()=>[...e[28]||(e[28]=[a("Email",-1)])]),_:1}),s(t(A),null,{default:l(()=>[...e[29]||(e[29]=[a("Fecha de Asignación",-1)])]),_:1}),s(t(A),{class:"text-right"},{default:l(()=>[...e[30]||(e[30]=[a("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(t(Q),null,{default:l(()=>[(n(!0),f(y,null,b(r.role.users,i=>(n(),p(t(j),{key:i.id},{default:l(()=>[s(t(C),null,{default:l(()=>[o("div",Pt,[s(t(W),{class:"h-8 w-8"},{default:l(()=>[i.avatar_url?(n(),p(t(X),{key:0,src:i.avatar_url,alt:i.name},null,8,["src","alt"])):R("",!0),s(t(Y),null,{default:l(()=>[a(u(B(i.name)),1)]),_:2},1024)]),_:2},1024),o("span",Vt,u(i.name),1)])]),_:2},1024),s(t(C),null,{default:l(()=>[a(u(i.email),1)]),_:2},1024),s(t(C),null,{default:l(()=>[a(u(D(i.created_at)),1)]),_:2},1024),s(t(C),{class:"text-right"},{default:l(()=>[s(t(w),{href:`/admin/users/${i.id}`},{default:l(()=>[s(t(k),{size:"sm",variant:"ghost"},{default:l(()=>[...e[31]||(e[31]=[a(" Ver Usuario ",-1)])]),_:1})]),_:1},8,["href"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(n(),f("div",Rt," No hay usuarios asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(t(S),{value:"segments"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[32]||(e[32]=[a("Segmentos Asociados",-1)])]),_:1}),s(t(U),null,{default:l(()=>[...e[33]||(e[33]=[a(" Segmentos que delimitan el alcance de datos para este rol ",-1)])]),_:1})]),_:1}),s(t(g),null,{default:l(()=>{var d;return[(d=r.role.segments)!=null&&d.length?(n(),f("div",Ut,[(n(!0),f(y,null,b(r.role.segments,i=>(n(),f("div",{key:i.id,class:"flex items-start justify-between p-4 border rounded-lg"},[o("div",null,[o("h4",jt,u(i.name),1),o("p",Lt,u(i.description||"Sin descripción"),1),o("div",Nt,[s(t(v),{variant:"outline"},{default:l(()=>[a(u(i.user_count||0)+" usuarios ",1)]),_:2},1024),s(t(v),{variant:i.is_dynamic?"default":"secondary"},{default:l(()=>[a(u(i.is_dynamic?"Dinámico":"Estático"),1)]),_:2},1032,["variant"])])]),s(t(w),{href:`/admin/segments/${i.id}`},{default:l(()=>[s(t(k),{size:"sm",variant:"ghost"},{default:l(()=>[...e[34]||(e[34]=[a(" Ver Segmento ",-1)])]),_:1})]),_:1},8,["href"])]))),128))])):(n(),f("div",Et," No hay segmentos asociados a este rol "))]}),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}))}});export{ze as default};
