import{d as P,k as $,c as R,a as u,o as l,b as s,u as t,m as q,e as a,f as i,j as p,i as _,R as z,g as n,F as g,r as y,t as c,W as b,l as E,n as A}from"./app-DkmRr0KC.js";import{_ as H}from"./UserLayout.vue_vue_type_script_setup_true_lang-CXQLvBE_.js";import{_ as k,c as w,a as K,b as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5ejVlRg.js";import{_ as W}from"./CardDescription.vue_vue_type_script_setup_true_lang-BocLyR7u.js";import{c as Y,_ as v}from"./createLucideIcon-DXkxOUK0.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-DihuhIKU.js";import{_ as J,a as O,b as Q,c as X,d as F}from"./SelectValue.vue_vue_type_script_setup_true_lang-CLO-V0CQ.js";import{_ as V}from"./index-DVRv0UkJ.js";import{S as B}from"./search-YuJUy9e-.js";import{C as S}from"./clock-BFv09G8c.js";import{I as Z}from"./info-Daq5dZv0.js";import{A as ee}from"./arrow-right-Dhzj9eD8.js";import{F as D}from"./file-text-DxNfQIRv.js";import{C as te}from"./circle-check-big-COeyMNlf.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-DWY7xu_8.js";import"./index-BdJFCkyv.js";import"./floating-ui.vue-CeXbWfQj.js";import"./x-D_lEJPee.js";import"./index-Bku5qikM.js";import"./shield-Bf5LORgb.js";import"./user-AeqXvCM3.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BBdfce-v.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CMBoC-Ke.js";import"./VisuallyHidden-B4JTwG-M.js";import"./PopperContent-a6xuH_X0.js";import"./index-C9_fScWN.js";import"./Label.vue_vue_type_script_setup_true_lang-CJyIYAf6.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-ZxQp_3oc.js";import"./index-BYI2yCwO.js";import"./circle-alert-Cn12rJzD.js";import"./map-pin-mX_8rXlu.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CzJh65a2.js";import"./square-check-big-BEsnhUwL.js";import"./users-CeUnMfI3.js";import"./index-ljVxmsRr.js";import"./check-Co91sU4n.js";import"./nullish-CHIgUVhi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=Y("FilePenIcon",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),ae={class:"p-6"},oe={class:"flex flex-col md:flex-row gap-4"},re={class:"flex-1"},le={class:"relative"},ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"flex items-start justify-between"},de={class:"flex-1"},ce={class:"space-y-3"},ue={key:0,class:"flex items-center gap-2"},me={class:"flex items-center gap-2"},pe={key:1,class:"text-sm text-muted-foreground"},fe={key:2,class:"text-sm text-muted-foreground"},_e={class:"mt-4 pt-4 border-t"},ve={class:"text-muted-foreground text-center max-w-md"},he={key:2,class:"mt-6 flex justify-center gap-2"},tt=P({__name:"Index",props:{formularios:{},categorias:{},filters:{},canViewPublic:{type:Boolean},canFillPublic:{type:Boolean}},setup(N){const x=N,T=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Formularios",href:"#"}],f=$(x.filters.search||""),d=$(x.filters.categoria||"all"),I=R(()=>x.formularios.data.length>0),h=()=>{b.get(route("user.formularios.index"),{search:f.value||void 0,categoria:d.value==="all"?void 0:d.value},{preserveState:!0,preserveScroll:!0})},L=r=>{d.value=r,h()},C=()=>{f.value="",d.value="all",h()},m=r=>{if(r.usuario_ha_respondido)return{texto:"Completado",color:"success",icon:te};if(r.tiene_borrador)return{texto:"Borrador guardado",color:"warning",icon:se};if(r.fecha_fin){const o=Math.ceil((new Date(r.fecha_fin).getTime()-new Date().getTime())/864e5);if(o<=3&&o>0)return{texto:`Cierra en ${o} días`,color:"destructive",icon:S}}return{texto:"Disponible",color:"default",icon:D}},j=r=>new Date(r).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return(r,o)=>(l(),u(g,null,[s(t(q),{title:"Formularios"}),s(H,{breadcrumbs:T},{default:a(()=>[i("div",ae,[o[7]||(o[7]=i("div",{class:"mb-6"},[i("h1",{class:"text-3xl font-bold"},"Formularios Disponibles"),i("p",{class:"text-muted-foreground"}," Completa los formularios que están disponibles para ti ")],-1)),s(t(k),{class:"mb-6"},{default:a(()=>[s(t(w),{class:"pt-6"},{default:a(()=>[i("div",oe,[i("div",re,[i("div",le,[s(t(B),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s(t(G),{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=e=>f.value=e),placeholder:"Buscar formularios...",class:"pl-10",onKeyup:z(h,["enter"])},null,8,["modelValue"])])]),s(t(J),{modelValue:d.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>d.value=e),L]},{default:a(()=>[s(t(O),{class:"w-full md:w-[200px]"},{default:a(()=>[s(t(Q),{placeholder:"Todas las categorías"})]),_:1}),s(t(X),null,{default:a(()=>[s(t(F),{value:"all"},{default:a(()=>[...o[2]||(o[2]=[n("Todas las categorías",-1)])]),_:1}),(l(!0),u(g,null,y(r.categorias,e=>(l(),p(t(F),{key:e.id,value:e.id.toString()},{default:a(()=>[n(c(e.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(t(v),{onClick:h,variant:"default"},{default:a(()=>[s(t(B),{class:"mr-2 h-4 w-4"}),o[3]||(o[3]=n(" Buscar ",-1))]),_:1}),f.value||d.value&&d.value!=="all"?(l(),p(t(v),{key:0,onClick:C,variant:"outline"},{default:a(()=>[...o[4]||(o[4]=[n(" Limpiar ",-1)])]),_:1})):_("",!0)])]),_:1})]),_:1}),I.value?(l(),u("div",ie,[(l(!0),u(g,null,y(r.formularios.data,e=>(l(),p(t(k),{key:e.id,class:"hover:shadow-lg transition-shadow cursor-pointer",onClick:M=>t(b).visit(r.route("formularios.show",e.slug))},{default:a(()=>[s(t(K),null,{default:a(()=>[i("div",ne,[i("div",de,[s(t(U),{class:"line-clamp-2"},{default:a(()=>[n(c(e.titulo),1)]),_:2},1024),e.descripcion?(l(),p(t(W),{key:0,class:"mt-2 line-clamp-2"},{default:a(()=>[n(c(e.descripcion),1)]),_:2},1024)):_("",!0)]),(l(),p(E(m(e).icon),{class:A(["h-5 w-5 ml-2",m(e).color==="success"?"text-green-600":m(e).color==="warning"?"text-yellow-600":m(e).color==="destructive"?"text-red-600":"text-muted-foreground"])},null,8,["class"]))])]),_:2},1024),s(t(w),null,{default:a(()=>[i("div",ce,[e.categoria?(l(),u("div",ue,[s(t(V),{variant:"secondary"},{default:a(()=>[n(c(e.categoria.nombre),1)]),_:2},1024)])):_("",!0),i("div",me,[s(t(V),{variant:m(e).color==="success"?"default":m(e).color==="warning"?"secondary":m(e).color==="destructive"?"destructive":"outline"},{default:a(()=>[n(c(m(e).texto),1)]),_:2},1032,["variant"])]),e.fecha_fin?(l(),u("div",pe,[s(t(S),{class:"inline h-3 w-3 mr-1"}),n(" Cierra el "+c(j(e.fecha_fin)),1)])):_("",!0),e.limite_respuestas?(l(),u("div",fe,[s(t(Z),{class:"inline h-3 w-3 mr-1"}),n(" "+c(e.respuestas_count||0)+" / "+c(e.limite_respuestas)+" respuestas ",1)])):_("",!0)]),i("div",_e,[s(t(v),{variant:"ghost",class:"w-full",disabled:e.usuario_ha_respondido},{default:a(()=>[n(c(e.usuario_ha_respondido?"Ya respondido":e.tiene_borrador?"Continuar":"Responder")+" ",1),s(t(ee),{class:"ml-2 h-4 w-4"})]),_:2},1032,["disabled"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(l(),p(t(k),{key:1},{default:a(()=>[s(t(w),{class:"flex flex-col items-center justify-center py-12"},{default:a(()=>[s(t(D),{class:"h-12 w-12 text-muted-foreground mb-4"}),o[6]||(o[6]=i("h3",{class:"text-lg font-semibold mb-2"},"No hay formularios disponibles",-1)),i("p",ve,c(f.value||d.value&&d.value!=="all"?"No se encontraron formularios con los filtros aplicados.":"No hay formularios disponibles en este momento. Vuelve más tarde."),1),f.value||d.value&&d.value!=="all"?(l(),p(t(v),{key:0,onClick:C,class:"mt-4",variant:"outline"},{default:a(()=>[...o[5]||(o[5]=[n(" Limpiar filtros ",-1)])]),_:1})):_("",!0)]),_:1})]),_:1})),r.formularios.last_page>1?(l(),u("div",he,[(l(!0),u(g,null,y(r.formularios.last_page,e=>(l(),p(t(v),{key:e,variant:e===r.formularios.current_page?"default":"outline",size:"sm",onClick:M=>t(b).get(r.route("user.formularios.index"),{...r.filters,page:e},{preserveState:!0})},{default:a(()=>[n(c(e),1)]),_:2},1032,["variant","onClick"]))),128))])):_("",!0)])]),_:1})],64))}});export{tt as default};
