import{d as z,c as C,C as F,a as u,o as c,b as o,u as e,m as h,e as a,f as t,t as d,g as l,h as A,i as f,n as v,F as y,r as B,j as $,l as U}from"./app-CQ5Hqy3G.js";import{_ as b}from"./AppLogo.vue_vue_type_script_setup_true_lang-DO2zxUhg.js";import{_ as I,a as q,b as P,c as T,d as L,e as M,f as G,g as H,h as k,B as x,s as V,i as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-BdUd6Ihc.js";import{_ as E}from"./Checkbox.vue_vue_type_script_setup_true_lang-Djh33fvS.js";import{_ as p,a as K}from"./Label.vue_vue_type_script_setup_true_lang-nTjvYCo7.js";import{_ as O}from"./Textarea.vue_vue_type_script_setup_true_lang-BFdsSVDb.js";import{A as Q}from"./arrow-left-C58VVzG9.js";import"./index-DmV6TRR9.js";import"./VisuallyHidden-QrAUFbwX.js";const R={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},W={class:"flex items-center justify-between"},X={class:"text-3xl font-bold"},Y={class:"text-muted-foreground"},Z={class:"grid gap-6 md:grid-cols-2"},ee={class:"space-y-4"},se={key:0,class:"text-sm text-destructive mt-1"},re={key:0,class:"text-sm text-destructive mt-1"},te={class:"space-y-4"},oe={class:"flex items-center gap-2"},ae={key:0,class:"text-sm text-destructive mt-1"},ie={class:"space-y-3"},ne={class:"flex items-center space-x-2"},le={class:"bg-muted/50 p-3 rounded-lg text-sm space-y-2"},de={class:"flex items-start gap-2"},ce={class:"flex items-start gap-2"},ue={class:"flex items-center space-x-2"},me={key:0,class:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},pe={class:"flex items-center gap-2 mt-2 text-blue-700"},fe={key:0},_e={class:"font-medium"},ge={key:1,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},ve={class:"text-red-800 text-sm"},be={class:"flex justify-between mt-8"},De=z({__name:"Form",props:{cargo:{},cargosPadre:{}},setup(w){const _=w,m=C(()=>!!_.cargo),S=[{title:"Admin",href:"/admin/dashboard"},{title:"Cargos",href:"/admin/cargos"},{title:m.value?"Editar":"Crear",href:"#"}],r=F((()=>{if(!_.cargo)return{nombre:"",descripcion:"",parent_id:"null",es_cargo:!0,activo:!0};const n=_.cargo;return{nombre:n.nombre||"",descripcion:n.descripcion||"",parent_id:n.parent_id?String(n.parent_id):"null",es_cargo:n.es_cargo,activo:n.activo}})()),N=()=>{const n={nombre:r.nombre,descripcion:r.descripcion,parent_id:r.parent_id&&r.parent_id!=="null"?parseInt(r.parent_id):null,es_cargo:r.es_cargo,activo:r.activo};m.value?r.transform(()=>n).put(`/admin/cargos/${_.cargo.id}`,{onError:s=>{console.error("Errores de validación:",s)}}):r.transform(()=>n).post("/admin/cargos",{onError:s=>{console.error("Errores de validación:",s)}})},D=n=>n?x:V,j=C(()=>r.nombre.trim().length>0);return(n,s)=>(c(),u(y,null,[o(e(h),{title:m.value?"Editar Cargo":"Nuevo Cargo"},null,8,["title"]),o(J,{breadcrumbs:S},{default:a(()=>[t("div",R,[t("div",W,[t("div",null,[t("h1",X,d(m.value?"Editar Cargo":"Nuevo Cargo"),1),t("p",Y,d(m.value?"Modifica los datos del cargo":"Crea un nuevo cargo en la estructura jerárquica"),1)]),o(e(b),{variant:"outline",onClick:s[0]||(s[0]=g=>n.$inertia.visit("/admin/cargos"))},{default:a(()=>[o(e(Q),{class:"mr-2 h-4 w-4"}),s[7]||(s[7]=l(" Volver "))]),_:1})]),o(e(I),null,{default:a(()=>[o(e(q),null,{default:a(()=>[o(e(P),null,{default:a(()=>[l(d(m.value?"Datos del Cargo":"Información del Nuevo Cargo"),1)]),_:1})]),_:1}),o(e(T),{class:"space-y-6"},{default:a(()=>{var g;return[t("form",{onSubmit:A(N,["prevent"])},[t("div",Z,[t("div",ee,[t("div",null,[o(e(p),{for:"nombre"},{default:a(()=>s[8]||(s[8]=[l("Nombre del Cargo *")])),_:1}),o(e(K),{id:"nombre",modelValue:e(r).nombre,"onUpdate:modelValue":s[1]||(s[1]=i=>e(r).nombre=i),placeholder:"Ej: Presidente, Senador, Alcalde...",class:v({"border-destructive":e(r).errors.nombre})},null,8,["modelValue","class"]),e(r).errors.nombre?(c(),u("p",se,d(e(r).errors.nombre),1)):f("",!0)]),t("div",null,[o(e(p),{for:"descripcion"},{default:a(()=>s[9]||(s[9]=[l("Descripción (opcional)")])),_:1}),o(e(O),{id:"descripcion",modelValue:e(r).descripcion,"onUpdate:modelValue":s[2]||(s[2]=i=>e(r).descripcion=i),placeholder:"Descripción detallada del cargo...",rows:"4",class:v({"border-destructive":e(r).errors.descripcion})},null,8,["modelValue","class"]),e(r).errors.descripcion?(c(),u("p",re,d(e(r).errors.descripcion),1)):f("",!0)])]),t("div",te,[t("div",null,[o(e(p),{for:"parent_id"},{default:a(()=>s[10]||(s[10]=[l("Cargo Padre (opcional)")])),_:1}),o(e(L),{modelValue:e(r).parent_id,"onUpdate:modelValue":s[3]||(s[3]=i=>e(r).parent_id=i)},{default:a(()=>[o(e(M),{class:v({"border-destructive":e(r).errors.parent_id})},{default:a(()=>[o(e(G),{placeholder:"Seleccionar cargo padre..."})]),_:1},8,["class"]),o(e(H),null,{default:a(()=>[o(e(k),{value:"null"},{default:a(()=>s[11]||(s[11]=[l("Sin cargo padre (raíz)")])),_:1}),(c(!0),u(y,null,B(n.cargosPadre,i=>(c(),$(e(k),{key:i.id,value:i.id.toString()},{default:a(()=>[t("div",oe,[(c(),$(U(D(i.es_cargo)),{class:"h-3 w-3"})),l(" "+d(i.nombre),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.parent_id?(c(),u("p",ae,d(e(r).errors.parent_id),1)):f("",!0),s[12]||(s[12]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Define la jerarquía organizacional. Un cargo sin padre es de nivel raíz. ",-1))]),t("div",ie,[o(e(p),null,{default:a(()=>s[13]||(s[13]=[l("Tipo de Elemento")])),_:1}),t("div",ne,[o(e(E),{id:"es_cargo",checked:e(r).es_cargo,"onUpdate:checked":s[4]||(s[4]=i=>e(r).es_cargo=i)},null,8,["checked"]),o(e(p),{for:"es_cargo",class:"flex items-center gap-2"},{default:a(()=>[o(e(x),{class:"h-4 w-4"}),s[14]||(s[14]=l(" Es un Cargo "))]),_:1})]),t("div",le,[t("div",de,[o(e(x),{class:"h-4 w-4 mt-0.5 text-blue-600"}),s[15]||(s[15]=t("div",null,[t("p",{class:"font-medium text-blue-800"},"Cargo:"),t("p",{class:"text-muted-foreground"}," Aparece en el listado de cargos disponibles para crear convocatorias y postulaciones. ")],-1))]),t("div",ce,[o(e(V),{class:"h-4 w-4 mt-0.5 text-gray-600"}),s[16]||(s[16]=t("div",null,[t("p",{class:"font-medium text-gray-800"},"Categoría:"),t("p",{class:"text-muted-foreground"}," Solo se usa para organizar la estructura jerárquica. No aparece en convocatorias. ")],-1))])])]),t("div",ue,[o(e(E),{id:"activo",checked:e(r).activo,"onUpdate:checked":s[5]||(s[5]=i=>e(r).activo=i)},null,8,["checked"]),o(e(p),{for:"activo"},{default:a(()=>s[17]||(s[17]=[l(" Cargo activo ")])),_:1})]),s[18]||(s[18]=t("p",{class:"text-xs text-muted-foreground"}," Solo los cargos activos pueden ser seleccionados como padres o utilizados en convocatorias. ",-1))])]),e(r).parent_id&&e(r).parent_id!=="null"?(c(),u("div",me,[o(e(p),{class:"text-blue-800 font-medium"},{default:a(()=>s[19]||(s[19]=[l("Vista previa de la jerarquía:")])),_:1}),t("div",pe,[n.cargosPadre.find(i=>i.id.toString()===e(r).parent_id)?(c(),u("span",fe,d((g=n.cargosPadre.find(i=>i.id.toString()===e(r).parent_id))==null?void 0:g.nombre),1)):f("",!0),s[20]||(s[20]=t("span",{class:"text-blue-500"},"→",-1)),t("span",_e,d(e(r).nombre||"Nuevo cargo"),1)])])):f("",!0),e(r).errors.delete?(c(),u("div",ge,[t("p",ve,d(e(r).errors.delete),1)])):f("",!0),t("div",be,[o(e(b),{variant:"outline",type:"button",onClick:s[6]||(s[6]=i=>n.$inertia.visit("/admin/cargos"))},{default:a(()=>s[21]||(s[21]=[l(" Cancelar ")])),_:1}),o(e(b),{type:"submit",disabled:e(r).processing||!j.value},{default:a(()=>[l(d(e(r).processing?"Guardando...":m.value?"Actualizar":"Crear")+" Cargo ",1)]),_:1},8,["disabled"])])],32)]}),_:1})]),_:1})])]),_:1})],64))}});export{De as default};
