import{_ as w}from"./createLucideIcon-wqcwkUQd.js";import{a as $,b as q,c as B,_ as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-BzTFcOtj.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bv7agPvB.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-Bm_1WzJZ.js";import{_ as j}from"./Label.vue_vue_type_script_setup_true_lang-BM_hjP20.js";import{a as b,_ as x}from"./index-BWHNfg5d.js";import{_}from"./AlertTitle.vue_vue_type_script_setup_true_lang-D-gJxUHA.js";import{d as A,r as g,i as h,e as s,g as l,f as e,q as D,t as f,j as y,w as t,h as r,b as p,m as i,a as K}from"./app-NmALTVyN.js";import{C as T}from"./calendar-D33aSez1.js";import{M as U}from"./map-pin-aXg-1VED.js";import{A as F}from"./arrow-left-92cQyYkQ.js";import{I as E}from"./info-DTXTh7SR.js";import{S as L}from"./search-CgQd1oDs.js";import{L as O}from"./loader-circle-CGtOz5FN.js";import{C as R}from"./circle-x-BatFjNRj.js";import{C as X}from"./circle-check-big-Dn4oYbfO.js";import{f as G,e as H}from"./es-BDPlFIsO.js";import"./index-DVFh-uMH.js";const J={class:"min-h-screen bg-gray-50"},Q={class:"bg-white shadow-sm border-b"},W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Y={class:"flex items-start justify-between"},Z={class:"flex flex-col gap-4"},aa={class:"text-2xl font-bold text-gray-900"},ea={class:"flex flex-wrap gap-4 text-sm text-gray-600"},sa={class:"flex items-center gap-1"},ta={key:0,class:"flex items-center gap-1"},la={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ra={class:"space-y-4"},oa={class:"space-y-2"},na={class:"flex gap-2"},ia={key:1,class:"mt-6"},qa=A({__name:"ParticipantsSearch",props:{asamblea:{}},setup(c){const S=c,u=g(""),v=g(!1),o=g(null),d=g(""),k=n=>n?G(new Date(n),"PPP",{locale:H}):"",C=async()=>{var n,a;if(!u.value||u.value.length<3){d.value="Por favor ingrese al menos 3 caracteres para buscar.",o.value=null;return}d.value="",o.value=null,v.value=!0;try{const m=await K.post(`/public-api/asambleas/${S.asamblea.id}/buscar-participante`,{search:u.value});o.value=m.data}catch(m){if(console.error("Error buscando participante:",m),((n=m.response)==null?void 0:n.status)===422){const P=m.response.data.errors;d.value=P.search?P.search[0]:"Error en la búsqueda."}else((a=m.response)==null?void 0:a.status)===404?d.value="La búsqueda no está disponible en este momento.":d.value="Ocurrió un error al realizar la búsqueda. Por favor intente nuevamente."}finally{v.value=!1}},I=()=>{u.value="",o.value=null,d.value=""},N=n=>{n.key==="Enter"&&C()};return(n,a)=>(i(),h("div",null,[s(e(D),{title:`Buscar Participantes - ${c.asamblea.nombre}`},null,8,["title"]),l("div",J,[l("div",Q,[l("div",W,[l("div",Y,[l("div",Z,[l("h1",aa,f(c.asamblea.nombre),1),l("div",ea,[l("div",sa,[s(e(T),{class:"h-4 w-4"}),l("span",null,f(k(c.asamblea.fecha_inicio))+" - "+f(k(c.asamblea.fecha_fin)),1)]),c.asamblea.lugar?(i(),h("div",ta,[s(e(U),{class:"h-4 w-4"}),l("span",null,f(c.asamblea.ubicacion_completa),1)])):y("",!0)])]),s(e(w),{variant:"outline",size:"sm",onClick:a[0]||(a[0]=()=>n.window.history.back())},{default:t(()=>[s(e(F),{class:"h-4 w-4 mr-2"}),a[2]||(a[2]=r(" Volver ",-1))]),_:1})])])]),l("div",la,[s(e(x),{class:"mb-6"},{default:t(()=>[s(e(E),{class:"h-4 w-4"}),s(e(_),null,{default:t(()=>[...a[3]||(a[3]=[r("Verificación de Participantes",-1)])]),_:1}),s(e(b),null,{default:t(()=>[...a[4]||(a[4]=[r(" Utilice este buscador para verificar si una persona está registrada como participante de la asamblea. Puede buscar por nombre completo o número de documento de identidad (cédula). ",-1)])]),_:1})]),_:1}),s(e(V),null,{default:t(()=>[s(e($),null,{default:t(()=>[s(e(q),null,{default:t(()=>[s(e(L),{class:"inline-block mr-2 h-5 w-5"}),a[5]||(a[5]=r(" Buscar Participante ",-1))]),_:1}),s(e(z),null,{default:t(()=>[...a[6]||(a[6]=[r(" Ingrese los datos de la persona que desea verificar ",-1)])]),_:1})]),_:1}),s(e(B),null,{default:t(()=>[l("div",ra,[l("div",oa,[s(e(j),{for:"search"},{default:t(()=>[...a[7]||(a[7]=[r("Búsqueda",-1)])]),_:1}),l("div",na,[s(e(M),{id:"search",modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=m=>u.value=m),type:"text",placeholder:"Ingrese nombre completo o número de cédula...",class:"flex-1",onKeydown:N,disabled:v.value},null,8,["modelValue","disabled"]),s(e(w),{onClick:C,disabled:v.value||!u.value},{default:t(()=>[v.value?(i(),p(e(O),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(i(),p(e(L),{key:1,class:"mr-2 h-4 w-4"})),a[8]||(a[8]=r(" Buscar ",-1))]),_:1},8,["disabled"]),u.value||o.value?(i(),p(e(w),{key:0,variant:"outline",onClick:I},{default:t(()=>[...a[9]||(a[9]=[r(" Limpiar ",-1)])]),_:1})):y("",!0)]),a[10]||(a[10]=l("p",{class:"text-xs text-muted-foreground"}," Mínimo 3 caracteres. La búsqueda es sensible a mayúsculas y minúsculas. ",-1))]),d.value?(i(),p(e(x),{key:0,variant:"destructive"},{default:t(()=>[s(e(R),{class:"h-4 w-4"}),s(e(_),null,{default:t(()=>[...a[11]||(a[11]=[r("Error",-1)])]),_:1}),s(e(b),null,{default:t(()=>[r(f(d.value),1)]),_:1})]),_:1})):y("",!0),o.value?(i(),h("div",ia,[o.value.found?(i(),p(e(x),{key:0,class:"border-green-200 bg-green-50"},{default:t(()=>[s(e(X),{class:"h-4 w-4 text-green-600"}),s(e(_),{class:"text-green-800"},{default:t(()=>[...a[12]||(a[12]=[r("Participante Confirmado",-1)])]),_:1}),s(e(b),{class:"text-green-700"},{default:t(()=>[r(f(o.value.message),1)]),_:1})]),_:1})):(i(),p(e(x),{key:1,class:"border-orange-200 bg-orange-50"},{default:t(()=>[s(e(E),{class:"h-4 w-4 text-orange-600"}),s(e(_),{class:"text-orange-800"},{default:t(()=>[...a[13]||(a[13]=[r("No Encontrado",-1)])]),_:1}),s(e(b),{class:"text-orange-700"},{default:t(()=>[r(f(o.value.message),1)]),_:1})]),_:1}))])):y("",!0)])]),_:1})]),_:1}),s(e(V),{class:"mt-6"},{default:t(()=>[s(e($),null,{default:t(()=>[s(e(q),{class:"text-base"},{default:t(()=>[...a[14]||(a[14]=[r("Información Importante",-1)])]),_:1})]),_:1}),s(e(B),null,{default:t(()=>[...a[15]||(a[15]=[l("ul",{class:"list-disc list-inside space-y-2 text-sm text-gray-600"},[l("li",null,"La búsqueda solo confirmará si una persona es participante o no."),l("li",null,"No se mostrará información personal adicional de los participantes."),l("li",null,"Para búsquedas exactas, use el documento de identidad completo."),l("li",null,"Si tiene dudas sobre su participación, contacte a la organización.")],-1)])]),_:1})]),_:1}),a[16]||(a[16]=l("div",{class:"mt-6 text-center text-sm text-gray-500"},[l("p",null,"Esta herramienta de verificación respeta la privacidad de los participantes."),l("p",{class:"mt-1"}," Para más información sobre la asamblea, contacte a la organización. ")],-1))])])]))}});export{qa as default};
