import{_ as K}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BeLpyYqE.js";import{d as O,r as $,c as Q,i as f,e as s,f as t,q as W,w as e,g as l,v as L,j as h,t as r,m as u,b as g,h as o,F as k,k as C,n as X,s as Y}from"./app-D-mMsgzO.js";import{_ as w}from"./createLucideIcon-DWtXnox6.js";import{_ as m,a as c,b as _,c as p}from"./CardTitle.vue_vue_type_script_setup_true_lang-BgiNK3Ya.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-C_rr11Vd.js";import{_ as v}from"./index-GY4kRjnA.js";import{_ as Z,a as tt,b as M,c as b,d as st,e as y}from"./TableHeader.vue_vue_type_script_setup_true_lang-D0vMnsUS.js";import{_ as et,a as at,b as j,c as E}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-H-HShfX_.js";import{_ as lt,a as ot}from"./index-CCTmGbNe.js";import{t as it}from"./index-Dy8aUQLX.js";import{A as rt}from"./arrow-left-BzhVSiPB.js";import{S as nt}from"./square-pen-CNbmNCFr.js";import{D as ut}from"./download-BSSxzPnL.js";import{E as A}from"./external-link-CTYuphgO.js";import{C as dt}from"./copy-BZhTK1pE.js";import{F}from"./file-text-DicCwGGY.js";import{U as H}from"./users-LIJfVJdA.js";import{C as ft}from"./calendar-BDQCbko8.js";import{E as mt}from"./eye-JxracTU3.js";import{f as ct,e as _t}from"./es-BDPlFIsO.js";import"./useFlashMessages-AoBQ_eXO.js";import"./index-BAj9xiWq.js";import"./floating-ui.vue-4hJfc7OH.js";import"./x-CIl7KNta.js";import"./Input.vue_vue_type_script_setup_true_lang-CVKEdmcH.js";import"./index-BdjqPSN4.js";import"./index-CEcIOlkF.js";import"./shield-DkPA8D-O.js";import"./user-Cn5dRJhC.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-UfYfeqBW.js";import"./chevron-right-xhiFxKKv.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BUEAJKW4.js";import"./VisuallyHidden-DtIrnN8i.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BnsZXqw_.js";import"./check-DEBndSuB.js";import"./Label.vue_vue_type_script_setup_true_lang-BqkWMgQk.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-V7yOK_cL.js";import"./circle-alert-CoGGtMg1.js";import"./map-pin-BH9ZGKi6.js";import"./chevrons-up-down-C3FBt5Gr.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-5ezQOI3f.js";import"./tag-BzSUM4un.js";import"./target-BzlnrZ2O.js";import"./vote-Bs96cbOo.js";import"./folder-open-BefaaYb1.js";import"./send-DO0yWTLt.js";import"./briefcase-DhHOphU5.js";import"./megaphone-NN7FqyRQ.js";import"./user-check-1Fi7BCN_.js";import"./clipboard-list-ueCZynu0.js";import"./mail-BuqLUvNl.js";import"./message-square-BATwQeaY.js";import"./panel-left-CpJM7jrY.js";import"./index-DW3VffZR.js";import"./RovingFocusItem-DZ-R2l5-.js";import"./utils-C7876XvJ.js";const pt={class:"p-6"},xt={class:"mb-6"},vt={class:"flex items-center justify-between mb-4"},bt={class:"flex items-center gap-2"},yt={class:"text-3xl font-bold"},gt={key:0,class:"text-muted-foreground"},wt={class:"flex gap-2"},ht={class:"flex items-center gap-2"},kt={class:"flex items-center gap-2"},$t={class:"bg-gray-100 px-2 py-1 rounded text-sm"},Ct={class:"flex gap-2"},jt=["href"],Et={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Tt={class:"text-2xl font-bold"},Rt={class:"text-xs text-muted-foreground"},Vt={class:"text-2xl font-bold"},Lt={class:"text-2xl font-bold"},Ut={class:"text-xs text-muted-foreground"},Mt={class:"text-2xl font-bold"},At={class:"space-y-4"},Ft={class:"space-y-2"},Ht={class:"text-sm font-medium"},Dt={class:"text-sm"},Nt={key:0,class:"text-center py-8"},St={key:2,class:"mt-4"},zt={class:"flex items-center justify-center gap-1"},Pt=["innerHTML"],qt={class:"grid gap-6 md:grid-cols-2"},Bt={class:"space-y-4"},It={class:"flex items-center justify-between"},Gt={class:"font-bold"},Jt={class:"flex items-center justify-between"},Kt={class:"font-bold"},Ot={class:"flex items-center justify-between"},Qt={class:"font-bold"},Wt={class:"flex items-center justify-between"},Xt={class:"font-bold"},Yt={class:"space-y-4"},Zt={class:"flex items-center justify-between"},ts={class:"font-bold"},ss={class:"flex items-center justify-between"},es={class:"font-bold"},as={class:"mt-4 pt-4 border-t"},ls={class:"flex items-center justify-between"},os={class:"font-bold"},ne=O({__name:"Show",props:{formulario:{},respuestas:{}},setup(i){const x=i,D=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Formularios",href:"/admin/formularios"},{title:x.formulario.titulo,href:"#"}],T=$("resumen"),N=$(null),S=$(!1),z=()=>{Y.get(route("admin.formularios.edit",x.formulario.id))},P=()=>{window.location.href=route("admin.formularios.exportar",x.formulario.id)},q=()=>{navigator.clipboard.writeText(x.formulario.url_publica).then(()=>{it.success("URL copiada al portapapeles")})},B=d=>{N.value=d,S.value=!0},I=d=>ct(new Date(d),"d 'de' MMMM 'de' yyyy, HH:mm",{locale:_t}),G=d=>({publico:"Público",autenticado:"Autenticado",con_permiso:"Con Permiso"})[d]||d,J=d=>({borrador:"secondary",publicado:"default",archivado:"outline"})[d]||"secondary",R=Q(()=>{const d=x.formulario.estadisticas.usuarios_unicos+x.formulario.estadisticas.visitantes_unicos;return d===0?0:Math.round(x.formulario.estadisticas.visitantes_unicos/d*100)});return(d,a)=>(u(),f(k,null,[s(t(W),{title:i.formulario.titulo},null,8,["title"]),s(K,{breadcrumbs:D},{default:e(()=>[l("div",pt,[l("div",xt,[l("div",vt,[l("div",bt,[s(t(L),{href:d.route("admin.formularios.index")},{default:e(()=>[s(t(w),{variant:"ghost",size:"sm"},{default:e(()=>[s(t(rt),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),l("div",null,[l("h1",yt,r(i.formulario.titulo),1),i.formulario.descripcion?(u(),f("p",gt,r(i.formulario.descripcion),1)):h("",!0)])]),l("div",wt,[s(t(w),{variant:"outline",onClick:z},{default:e(()=>[s(t(nt),{class:"mr-2 h-4 w-4"}),a[1]||(a[1]=o(" Editar ",-1))]),_:1}),i.formulario.estadisticas.total_respuestas>0?(u(),g(t(w),{key:0,onClick:P},{default:e(()=>[s(t(ut),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=o(" Exportar CSV ",-1))]),_:1})):h("",!0)])]),l("div",ht,[s(t(v),{variant:J(i.formulario.estado)},{default:e(()=>[o(r(i.formulario.estado),1)]),_:1},8,["variant"]),s(t(v),{variant:"outline"},{default:e(()=>[o(r(G(i.formulario.tipo_acceso)),1)]),_:1}),i.formulario.categoria?(u(),g(t(v),{key:0,variant:"secondary"},{default:e(()=>[o(r(i.formulario.categoria.nombre),1)]),_:1})):h("",!0),s(t(v),{variant:i.formulario.activo?"default":"destructive"},{default:e(()=>[o(r(i.formulario.activo?"Activo":"Inactivo"),1)]),_:1},8,["variant"])])]),s(t(lt),{class:"mb-6"},{default:e(()=>[s(t(ot),{class:"flex items-center justify-between"},{default:e(()=>[l("div",kt,[s(t(A),{class:"h-4 w-4"}),a[3]||(a[3]=l("span",{class:"font-medium"},"URL Pública:",-1)),l("code",$t,r(i.formulario.url_publica),1)]),l("div",Ct,[s(t(w),{variant:"ghost",size:"sm",onClick:q},{default:e(()=>[s(t(dt),{class:"h-4 w-4"})]),_:1}),l("a",{href:i.formulario.url_publica,target:"_blank"},[s(t(w),{variant:"ghost",size:"sm"},{default:e(()=>[s(t(A),{class:"h-4 w-4"})]),_:1})],8,jt)])]),_:1})]),_:1}),s(t(et),{modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=n=>T.value=n),class:"space-y-6"},{default:e(()=>[s(t(at),null,{default:e(()=>[s(t(j),{value:"resumen"},{default:e(()=>[...a[4]||(a[4]=[o("Resumen",-1)])]),_:1}),s(t(j),{value:"respuestas"},{default:e(()=>[o(" Respuestas ("+r(i.formulario.estadisticas.total_respuestas)+") ",1)]),_:1}),s(t(j),{value:"estadisticas"},{default:e(()=>[...a[5]||(a[5]=[o("Estadísticas",-1)])]),_:1})]),_:1}),s(t(E),{value:"resumen",class:"space-y-6"},{default:e(()=>[l("div",Et,[s(t(m),null,{default:e(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(_),{class:"text-sm font-medium"},{default:e(()=>[...a[6]||(a[6]=[o(" Total Respuestas ",-1)])]),_:1}),s(t(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(p),null,{default:e(()=>[l("div",Tt,r(i.formulario.estadisticas.total_respuestas),1),l("p",Rt,r(i.formulario.estadisticas.respuestas_hoy)+" hoy ",1)]),_:1})]),_:1}),s(t(m),null,{default:e(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(_),{class:"text-sm font-medium"},{default:e(()=>[...a[7]||(a[7]=[o(" Usuarios Únicos ",-1)])]),_:1}),s(t(H),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(p),null,{default:e(()=>[l("div",Vt,r(i.formulario.estadisticas.usuarios_unicos),1),a[8]||(a[8]=l("p",{class:"text-xs text-muted-foreground"}," Usuarios registrados ",-1))]),_:1})]),_:1}),s(t(m),null,{default:e(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(_),{class:"text-sm font-medium"},{default:e(()=>[...a[9]||(a[9]=[o(" Visitantes ",-1)])]),_:1}),s(t(H),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(p),null,{default:e(()=>[l("div",Lt,r(i.formulario.estadisticas.visitantes_unicos),1),l("p",Ut,r(R.value)+"% del total ",1)]),_:1})]),_:1}),s(t(m),null,{default:e(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[s(t(_),{class:"text-sm font-medium"},{default:e(()=>[...a[10]||(a[10]=[o(" Esta Semana ",-1)])]),_:1}),s(t(ft),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(p),null,{default:e(()=>[l("div",Mt,r(i.formulario.estadisticas.respuestas_semana),1),a[11]||(a[11]=l("p",{class:"text-xs text-muted-foreground"}," Respuestas ",-1))]),_:1})]),_:1})]),s(t(m),null,{default:e(()=>[s(t(c),null,{default:e(()=>[s(t(_),null,{default:e(()=>[...a[12]||(a[12]=[o("Configuración del Formulario",-1)])]),_:1}),s(t(U),null,{default:e(()=>[...a[13]||(a[13]=[o(" Estructura y campos del formulario ",-1)])]),_:1})]),_:1}),s(t(p),null,{default:e(()=>[l("div",At,[l("div",null,[a[15]||(a[15]=l("h4",{class:"font-medium mb-2"},"Campos del formulario:",-1)),l("div",Ft,[(u(!0),f(k,null,C(i.formulario.configuracion_campos,(n,V)=>(u(),f("div",{key:n.id,class:"flex items-center gap-2 p-2 bg-gray-50 rounded"},[l("span",Ht,r(V+1)+".",1),l("span",Dt,r(n.title),1),s(t(v),{variant:"outline",class:"text-xs"},{default:e(()=>[o(r(n.type),1)]),_:2},1024),n.required?(u(),g(t(v),{key:0,variant:"destructive",class:"text-xs"},{default:e(()=>[...a[14]||(a[14]=[o(" Requerido ",-1)])]),_:1})):h("",!0)]))),128))])])])]),_:1})]),_:1})]),_:1}),s(t(E),{value:"respuestas",class:"space-y-6"},{default:e(()=>[s(t(m),null,{default:e(()=>[s(t(c),null,{default:e(()=>[s(t(_),null,{default:e(()=>[...a[16]||(a[16]=[o("Respuestas Recibidas",-1)])]),_:1}),s(t(U),null,{default:e(()=>[...a[17]||(a[17]=[o(" Lista de todas las respuestas enviadas ",-1)])]),_:1})]),_:1}),s(t(p),null,{default:e(()=>[i.respuestas.data.length===0?(u(),f("div",Nt,[s(t(F),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a[18]||(a[18]=l("p",{class:"text-muted-foreground"}," No hay respuestas aún ",-1))])):(u(),g(t(Z),{key:1},{default:e(()=>[s(t(tt),null,{default:e(()=>[s(t(M),null,{default:e(()=>[s(t(b),null,{default:e(()=>[...a[19]||(a[19]=[o("Código",-1)])]),_:1}),s(t(b),null,{default:e(()=>[...a[20]||(a[20]=[o("Nombre",-1)])]),_:1}),s(t(b),null,{default:e(()=>[...a[21]||(a[21]=[o("Email",-1)])]),_:1}),s(t(b),null,{default:e(()=>[...a[22]||(a[22]=[o("Tipo",-1)])]),_:1}),s(t(b),null,{default:e(()=>[...a[23]||(a[23]=[o("Tiempo",-1)])]),_:1}),s(t(b),null,{default:e(()=>[...a[24]||(a[24]=[o("Fecha",-1)])]),_:1}),s(t(b),null,{default:e(()=>[...a[25]||(a[25]=[o("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(t(st),null,{default:e(()=>[(u(!0),f(k,null,C(i.respuestas.data,n=>(u(),g(t(M),{key:n.id},{default:e(()=>[s(t(y),{class:"font-mono text-xs"},{default:e(()=>[o(r(n.codigo_confirmacion),1)]),_:2},1024),s(t(y),null,{default:e(()=>[o(r(n.nombre),1)]),_:2},1024),s(t(y),null,{default:e(()=>[o(r(n.email||"-"),1)]),_:2},1024),s(t(y),null,{default:e(()=>[s(t(v),{variant:"outline"},{default:e(()=>[o(r(n.es_visitante?"Visitante":"Usuario"),1)]),_:2},1024)]),_:2},1024),s(t(y),null,{default:e(()=>[o(r(n.tiempo_llenado||"-"),1)]),_:2},1024),s(t(y),{class:"text-sm"},{default:e(()=>[o(r(I(n.enviado_en)),1)]),_:2},1024),s(t(y),null,{default:e(()=>[s(t(w),{variant:"ghost",size:"sm",onClick:V=>B(n)},{default:e(()=>[s(t(mt),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),i.respuestas.links&&i.respuestas.links.length>3?(u(),f("div",St,[l("nav",zt,[(u(!0),f(k,null,C(i.respuestas.links,n=>(u(),f(k,{key:n.label},[n.url?(u(),g(t(L),{key:0,href:n.url,class:X(["px-3 py-2 text-sm rounded-md",n.active?"bg-primary text-primary-foreground":"bg-white hover:bg-gray-50 border"]),innerHTML:n.label},null,8,["href","class","innerHTML"])):(u(),f("span",{key:1,class:"px-3 py-2 text-sm text-gray-400",innerHTML:n.label},null,8,Pt))],64))),128))])])):h("",!0)]),_:1})]),_:1})]),_:1}),s(t(E),{value:"estadisticas",class:"space-y-6"},{default:e(()=>[l("div",qt,[s(t(m),null,{default:e(()=>[s(t(c),null,{default:e(()=>[s(t(_),null,{default:e(()=>[...a[26]||(a[26]=[o("Respuestas por Período",-1)])]),_:1})]),_:1}),s(t(p),null,{default:e(()=>[l("div",Bt,[l("div",It,[a[27]||(a[27]=l("span",null,"Hoy",-1)),l("span",Gt,r(i.formulario.estadisticas.respuestas_hoy),1)]),l("div",Jt,[a[28]||(a[28]=l("span",null,"Esta semana",-1)),l("span",Kt,r(i.formulario.estadisticas.respuestas_semana),1)]),l("div",Ot,[a[29]||(a[29]=l("span",null,"Este mes",-1)),l("span",Qt,r(i.formulario.estadisticas.respuestas_mes),1)]),l("div",Wt,[a[30]||(a[30]=l("span",null,"Total",-1)),l("span",Xt,r(i.formulario.estadisticas.total_respuestas),1)])])]),_:1})]),_:1}),s(t(m),null,{default:e(()=>[s(t(c),null,{default:e(()=>[s(t(_),null,{default:e(()=>[...a[31]||(a[31]=[o("Tipo de Usuarios",-1)])]),_:1})]),_:1}),s(t(p),null,{default:e(()=>[l("div",Yt,[l("div",Zt,[a[32]||(a[32]=l("span",null,"Usuarios registrados",-1)),l("span",ts,r(i.formulario.estadisticas.usuarios_unicos),1)]),l("div",ss,[a[33]||(a[33]=l("span",null,"Visitantes",-1)),l("span",es,r(i.formulario.estadisticas.visitantes_unicos),1)]),l("div",as,[l("div",ls,[a[34]||(a[34]=l("span",null,"% Visitantes",-1)),l("span",os,r(R.value)+"%",1)])])])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{ne as default};
