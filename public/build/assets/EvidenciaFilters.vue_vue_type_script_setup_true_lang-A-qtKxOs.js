import{c as B,_ as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-TyS-yRYh.js";import{_,a as c,b as g,c as b,d as r}from"./SelectValue.vue_vue_type_script_setup_true_lang-DUiQEXpy.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-CGgKhCND.js";import{_ as D}from"./createLucideIcon-CpLzXnUV.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-CMq6Pfuh.js";import{X as S}from"./x-BEuzp8MD.js";import{d as j,C as z,D as L,c as V,b as v,w as t,e as s,f as l,g as n,h as o,i as p,F as y,k as x,j as w,n as q,m as i,t as U}from"./app-CXqeR4-a.js";const H={class:"space-y-4"},O={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4"},X={class:"space-y-2"},h={class:"space-y-2"},G={class:"space-y-2"},I={class:"space-y-2"},J={class:"space-y-2"},K={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},P={class:"space-y-2 md:col-span-2"},Q={key:0,class:"space-y-2 md:col-span-2"},se=j({__name:"EvidenciaFilters",props:z({contratos:{},evidencias:{},entregables:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(k){const f=k,u=L(k,"modelValue"),C=V(()=>{const d=new Set(f.evidencias.map(e=>e.tipo_evidencia).filter(Boolean));return Array.from(d).map(e=>({value:e,label:e}))}),F=V(()=>{const d=new Set(f.evidencias.map(e=>e.estado).filter(Boolean));return Array.from(d).map(e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)}))}),E=V(()=>{const d=new Map;return f.evidencias.forEach(e=>{var a;(a=e.usuario)!=null&&a.id&&d.set(e.usuario.id,e.usuario)}),Array.from(d.values()).map(e=>({value:e.id,label:e.name}))}),T=V(()=>{if(!f.entregables||f.entregables.length===0){const d=new Map;return f.evidencias.forEach(e=>{e.entregables&&e.entregables.length>0&&e.entregables.forEach(a=>{a!=null&&a.id&&d.set(a.id,a)})}),Array.from(d.values()).map(e=>({value:e.id,label:e.nombre}))}return f.entregables.map(d=>({value:d.id,label:d.nombre}))}),M=()=>{u.value={contrato_id:null,fecha_inicio:null,fecha_fin:null,tipo:null,estado:null,usuario_id:null,entregable_id:null}},A=V(()=>Object.values(u.value).some(d=>d!==null&&d!==""));return(d,e)=>(i(),v(l(N),null,{default:t(()=>[s(l(B),{class:"p-4"},{default:t(()=>[n("div",H,[n("div",O,[n("div",X,[s(l(m),{for:"filter-contrato",class:"text-xs"},{default:t(()=>[...e[7]||(e[7]=[o("Contrato",-1)])]),_:1}),s(l(_),{modelValue:u.value.contrato_id,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value.contrato_id=a),id:"filter-contrato"},{default:t(()=>[s(l(c),null,{default:t(()=>[s(l(g),{placeholder:"Todos los contratos"})]),_:1}),s(l(b),null,{default:t(()=>[s(l(r),{value:null},{default:t(()=>[...e[8]||(e[8]=[o("Todos los contratos",-1)])]),_:1}),(i(!0),p(y,null,x(k.contratos,a=>(i(),v(l(r),{key:a.id,value:a.id},{default:t(()=>[o(U(a.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",h,[s(l(m),{for:"filter-fecha-inicio",class:"text-xs"},{default:t(()=>[...e[9]||(e[9]=[o("Fecha Desde",-1)])]),_:1}),s(l($),{modelValue:u.value.fecha_inicio,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value.fecha_inicio=a),type:"date",id:"filter-fecha-inicio",class:"text-sm"},null,8,["modelValue"])]),n("div",G,[s(l(m),{for:"filter-fecha-fin",class:"text-xs"},{default:t(()=>[...e[10]||(e[10]=[o("Fecha Hasta",-1)])]),_:1}),s(l($),{modelValue:u.value.fecha_fin,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value.fecha_fin=a),type:"date",id:"filter-fecha-fin",class:"text-sm"},null,8,["modelValue"])]),n("div",I,[s(l(m),{for:"filter-tipo",class:"text-xs"},{default:t(()=>[...e[11]||(e[11]=[o("Tipo",-1)])]),_:1}),s(l(_),{modelValue:u.value.tipo,"onUpdate:modelValue":e[3]||(e[3]=a=>u.value.tipo=a),id:"filter-tipo"},{default:t(()=>[s(l(c),null,{default:t(()=>[s(l(g),{placeholder:"Todos los tipos"})]),_:1}),s(l(b),null,{default:t(()=>[s(l(r),{value:null},{default:t(()=>[...e[12]||(e[12]=[o("Todos los tipos",-1)])]),_:1}),(i(!0),p(y,null,x(C.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:t(()=>[o(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",J,[s(l(m),{for:"filter-estado",class:"text-xs"},{default:t(()=>[...e[13]||(e[13]=[o("Estado",-1)])]),_:1}),s(l(_),{modelValue:u.value.estado,"onUpdate:modelValue":e[4]||(e[4]=a=>u.value.estado=a),id:"filter-estado"},{default:t(()=>[s(l(c),null,{default:t(()=>[s(l(g),{placeholder:"Todos los estados"})]),_:1}),s(l(b),null,{default:t(()=>[s(l(r),{value:null},{default:t(()=>[...e[14]||(e[14]=[o("Todos los estados",-1)])]),_:1}),(i(!0),p(y,null,x(F.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:t(()=>[o(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),n("div",K,[n("div",P,[s(l(m),{for:"filter-usuario",class:"text-xs"},{default:t(()=>[...e[15]||(e[15]=[o("Usuario",-1)])]),_:1}),s(l(_),{modelValue:u.value.usuario_id,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value.usuario_id=a),id:"filter-usuario"},{default:t(()=>[s(l(c),null,{default:t(()=>[s(l(g),{placeholder:"Todos los usuarios"})]),_:1}),s(l(b),null,{default:t(()=>[s(l(r),{value:null},{default:t(()=>[...e[16]||(e[16]=[o("Todos los usuarios",-1)])]),_:1}),(i(!0),p(y,null,x(E.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:t(()=>[o(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),T.value.length>0?(i(),p("div",Q,[s(l(m),{for:"filter-entregable",class:"text-xs"},{default:t(()=>[...e[17]||(e[17]=[o("Entregable",-1)])]),_:1}),s(l(_),{modelValue:u.value.entregable_id,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value.entregable_id=a),id:"filter-entregable"},{default:t(()=>[s(l(c),null,{default:t(()=>[s(l(g),{placeholder:"Todos los entregables"})]),_:1}),s(l(b),null,{default:t(()=>[s(l(r),{value:null},{default:t(()=>[...e[18]||(e[18]=[o("Todos los entregables",-1)])]),_:1}),(i(!0),p(y,null,x(T.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:t(()=>[o(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])):w("",!0),n("div",{class:q(["flex items-end",T.value.length>0?"md:col-span-1":"md:col-span-3"])},[A.value?(i(),v(l(D),{key:0,variant:"outline",size:"sm",onClick:M,class:"w-full md:w-auto"},{default:t(()=>[s(l(S),{class:"h-4 w-4 mr-2"}),e[19]||(e[19]=o(" Limpiar Filtros ",-1))]),_:1})):w("",!0)],2)])])]),_:1})]),_:1}))}});export{se as _};
