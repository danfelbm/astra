import{_ as T,c as q,j as C,z,A as I,D as R,E as $,a7 as M,t as W,i as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-Co7Gw_Zm.js";import{d as J,k as h,a as f,o as d,b as t,u as e,m as O,e as a,f as n,P as y,g as o,i as v,j as D,F as E,r as Q,t as r,W as b}from"./app-aD7ckayy.js";import{c as H,_ as g}from"./AppLogo.vue_vue_type_script_setup_true_lang-Cspnvc-F.js";import{_ as K,a as X,b as k,c as m,d as Y,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang---7ZHr9v.js";import{_ as Z,a as ee,b as te,c as se,d as ae,e as ie,f as le,g as oe}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-WaznGDve.js";import{_ as ne,C as re}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-DUSJJAeb.js";import{P as de}from"./plus-CKJrP6bs.js";import{E as ue}from"./ellipsis-BKOb_IwO.js";import{S as fe}from"./square-pen-W2DdIdo1.js";import{T as me}from"./trash-CZ5WK777.js";import"./Label.vue_vue_type_script_setup_true_lang-C-ININDd.js";import"./index-Dwkw4C9S.js";import"./VisuallyHidden-B5wuTxRJ.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-DDmPgKIB.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DkakK3-r.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-CSpzu1fK.js";import"./trash-2-zoc0w4C6.js";import"./search-DSbV9co8.js";import"./history-DekNuTs5.js";import"./save-BzvU4vli.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=H("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),ce={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},pe={class:"flex items-center justify-between"},ve={class:"rounded-md border"},ge={class:"font-medium"},$e={class:"text-sm text-muted-foreground"},be={key:0,class:"text-xs text-muted-foreground"},ke=["title"],xe={key:0,class:"text-sm"},Se={key:1,class:"text-sm text-muted-foreground"},we={class:"text-sm text-muted-foreground"},Ce={key:0,class:"flex items-center justify-between mt-4"},he={class:"text-sm text-muted-foreground"},ye={class:"flex items-center space-x-2"},De={class:"text-sm"},Ee={key:0},Ke=J({__name:"Index",props:{users:{},filters:{},filterFieldsConfig:{}},setup(P){const x=P,{route:_}=window,U=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"}],p=h(!1),c=h(null),A={fields:x.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["name","email","documento_identidad","telefono"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},N=i=>{b.post(_("admin.usuarios.toggle-active",i.id),{},{preserveScroll:!0})},B=i=>{c.value=i,p.value=!0},j=()=>{c.value&&b.delete(_("admin.usuarios.destroy",c.value.id),{preserveScroll:!0}),p.value=!1,c.value=null},F=i=>i==="admin"?"default":"secondary",L=i=>i?"success":"destructive",S=i=>{const s=[];return i.localidad&&s.push(i.localidad.nombre),i.municipio&&s.push(i.municipio.nombre),i.departamento&&s.push(i.departamento.nombre),i.territorio&&s.push(i.territorio.nombre),s.join(", ")||"Sin ubicación"},w=i=>{b.get(_("admin.usuarios.index"),{...x.filters,page:i},{preserveState:!0,preserveScroll:!0})};return(i,s)=>(d(),f(E,null,[t(e(O),{title:"Usuarios"}),t(G,{breadcrumbs:U},{default:a(()=>[n("div",ce,[n("div",pe,[s[4]||(s[4]=n("div",null,[n("h1",{class:"text-3xl font-bold tracking-tight"},"Usuarios"),n("p",{class:"text-muted-foreground"}," Administra los usuarios del sistema ")],-1)),t(e(y),{href:e(_)("admin.usuarios.create")},{default:a(()=>[t(e(g),null,{default:a(()=>[t(e(de),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=o(" Nuevo Usuario "))]),_:1})]),_:1},8,["href"])]),t(ne,{config:A,route:e(_)("admin.usuarios.index"),"initial-filters":{quickSearch:i.filters.search,rootGroup:i.filters.advanced_filters?JSON.parse(i.filters.advanced_filters):void 0}},null,8,["route","initial-filters"]),t(e(T),null,{default:a(()=>[t(e(q),{class:"pt-6"},{default:a(()=>[n("div",ve,[t(e(K),null,{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(m),null,{default:a(()=>s[5]||(s[5]=[o("Usuario")])),_:1}),t(e(m),null,{default:a(()=>s[6]||(s[6]=[o("Rol")])),_:1}),t(e(m),null,{default:a(()=>s[7]||(s[7]=[o("Ubicación")])),_:1}),t(e(m),null,{default:a(()=>s[8]||(s[8]=[o("Cargo")])),_:1}),t(e(m),null,{default:a(()=>s[9]||(s[9]=[o("Estado")])),_:1}),t(e(m),null,{default:a(()=>s[10]||(s[10]=[o("Registro")])),_:1}),t(e(m),{class:"text-right"},{default:a(()=>s[11]||(s[11]=[o("Acciones")])),_:1})]),_:1})]),_:1}),t(e(Y),null,{default:a(()=>[(d(!0),f(E,null,Q(i.users.data,l=>(d(),D(e(k),{key:l.id},{default:a(()=>[t(e(u),null,{default:a(()=>[n("div",null,[n("div",ge,r(l.name),1),n("div",$e,r(l.email),1),l.documento_identidad?(d(),f("div",be," Doc: "+r(l.documento_identidad),1)):v("",!0)])]),_:2},1024),t(e(u),null,{default:a(()=>[t(e(C),{variant:F(l.role)},{default:a(()=>[o(r(l.role==="admin"?"Administrador":"Usuario"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),null,{default:a(()=>[n("div",{class:"max-w-[200px] truncate text-sm",title:S(l)},r(S(l)),9,ke)]),_:2},1024),t(e(u),null,{default:a(()=>[l.cargo?(d(),f("span",xe,r(l.cargo.nombre),1)):(d(),f("span",Se," Sin cargo "))]),_:2},1024),t(e(u),null,{default:a(()=>[t(e(C),{variant:L(l.activo)},{default:a(()=>[o(r(l.activo?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),null,{default:a(()=>[n("div",we,r(new Date(l.created_at).toLocaleDateString()),1)]),_:2},1024),t(e(u),{class:"text-right"},{default:a(()=>[t(e(z),null,{default:a(()=>[t(e(I),{"as-child":""},{default:a(()=>[t(e(g),{variant:"ghost",size:"sm"},{default:a(()=>[t(e(ue),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(R),{align:"end"},{default:a(()=>[t(e(y),{href:e(_)("admin.usuarios.edit",l.id)},{default:a(()=>[t(e($),null,{default:a(()=>[t(e(fe),{class:"mr-2 h-4 w-4"}),s[12]||(s[12]=o(" Editar "))]),_:1})]),_:2},1032,["href"]),t(e($),{onClick:V=>N(l)},{default:a(()=>[t(e(_e),{class:"mr-2 h-4 w-4"}),o(" "+r(l.activo?"Desactivar":"Activar"),1)]),_:2},1032,["onClick"]),t(e(M)),t(e($),{class:"text-destructive",onClick:V=>B(l)},{default:a(()=>[t(e(me),{class:"mr-2 h-4 w-4"}),s[13]||(s[13]=o(" Eliminar "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),i.users.data.length===0?(d(),D(e(k),{key:0},{default:a(()=>[t(e(u),{colspan:"7",class:"text-center"},{default:a(()=>s[14]||(s[14]=[n("div",{class:"py-12 text-muted-foreground"}," No se encontraron usuarios ",-1)])),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),i.users.last_page>1?(d(),f("div",Ce,[n("div",he," Mostrando "+r(i.users.from)+" a "+r(i.users.to)+" de "+r(i.users.total)+" resultados ",1),n("div",ye,[t(e(g),{variant:"outline",size:"sm",disabled:i.users.current_page===1,onClick:s[0]||(s[0]=l=>w(i.users.current_page-1))},{default:a(()=>[t(e(re),{class:"h-4 w-4"}),s[15]||(s[15]=o(" Anterior "))]),_:1},8,["disabled"]),n("div",De," Página "+r(i.users.current_page)+" de "+r(i.users.last_page),1),t(e(g),{variant:"outline",size:"sm",disabled:i.users.current_page===i.users.last_page,onClick:s[1]||(s[1]=l=>w(i.users.current_page+1))},{default:a(()=>[s[16]||(s[16]=o(" Siguiente ")),t(e(W),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):v("",!0)]),_:1})]),_:1})]),t(e(Z),{open:p.value,"onUpdate:open":s[2]||(s[2]=l=>p.value=l)},{default:a(()=>[t(e(ee),null,{default:a(()=>[t(e(te),null,{default:a(()=>[t(e(se),null,{default:a(()=>s[17]||(s[17]=[o("¿Estás seguro?")])),_:1}),t(e(ae),null,{default:a(()=>[s[18]||(s[18]=o(" Esta acción no se puede deshacer. Se eliminará permanentemente el usuario ")),c.value?(d(),f("strong",Ee,r(c.value.name),1)):v("",!0),s[19]||(s[19]=o(" del sistema. "))]),_:1})]),_:1}),t(e(ie),null,{default:a(()=>[t(e(le),null,{default:a(()=>s[20]||(s[20]=[o("Cancelar")])),_:1}),t(e(oe),{onClick:j,class:"bg-destructive text-destructive-foreground"},{default:a(()=>s[21]||(s[21]=[o(" Eliminar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Ke as default};
