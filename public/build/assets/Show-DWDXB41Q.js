import{j as se,C as pe,k as K,l as W,m as G,n as Q,o as Y,p as Z,_ as V,c as j,a as E,b as B,i as fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-Co7Gw_Zm.js";import{c as re,_ as f}from"./AppLogo.vue_vue_type_script_setup_true_lang-Cspnvc-F.js";import{_ as $}from"./Label.vue_vue_type_script_setup_true_lang-C-ININDd.js";import{_ as U}from"./Textarea.vue_vue_type_script_setup_true_lang-DAoHxm-T.js";import{_ as be}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-Cp5F2Mf6.js";import{C as ne}from"./clock-BJMiKusA.js";import{C as q}from"./circle-check-big-RYyhg9vk.js";import{C as I}from"./circle-x-DROzSd7q.js";import{U as X}from"./user-kwRmwSw3.js";import{M as le}from"./message-square-_VBN9Z5O.js";import{d as de,k as S,c as T,a as p,o as u,F as M,f as t,b as a,i as m,t as d,u as e,n as D,e as s,j as h,g as l,l as ve,p as ge,C as J,m as _e,W as ee,q as ye,r as ae}from"./app-aD7ckayy.js";import{A as xe}from"./arrow-left-D736I_Gj.js";import{T as oe}from"./triangle-alert-C6oHuguR.js";import"./index-Dwkw4C9S.js";import"./VisuallyHidden-B5wuTxRJ.js";import"./eye-DsH4-t2l.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=re("SquareCheckBigIcon",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=re("Undo2Icon",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),Ce={class:"border rounded-lg p-4 space-y-3"},he={class:"flex items-start justify-between"},$e={class:"flex-1"},we={class:"font-medium text-sm"},ze={class:"text-sm text-muted-foreground mt-1"},Ae={class:"flex items-center gap-2"},Ve={key:0,class:"pt-2 border-t"},je={class:"flex items-start gap-2 text-xs text-muted-foreground"},Se={class:"flex-1"},Re={class:"font-medium"},Ee={key:0,class:"flex items-center gap-1 mt-0.5"},Be={key:0,class:"mt-2 p-2 bg-muted rounded text-xs"},Te={class:"flex items-start gap-1"},Fe={class:"flex-1"},Ue={key:1,class:"flex gap-2 pt-2"},qe={class:"space-y-4 py-4"},Ie={class:"mt-1 p-2 bg-muted rounded text-sm"},Ne={class:"space-y-4 py-4"},Me={class:"mt-1 p-2 bg-muted rounded text-sm"},De=de({__name:"AprobacionCampo",props:{candidaturaId:{},campoId:{},campoTitle:{},valor:{},aprobacion:{},puedeAprobar:{type:Boolean},readonly:{type:Boolean}},emits:["campo-actualizado"],setup(O,{emit:x}){const g=O,N=x,w=S(!1),R=S(!1),b=S(""),v=S(!1),A=T(()=>g.aprobacion?g.aprobacion.aprobado?"aprobado":"rechazado":"pendiente"),z=T(()=>g.aprobacion?g.aprobacion.aprobado?"bg-green-100 text-green-800":"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),_=T(()=>g.aprobacion?g.aprobacion.aprobado?"Aprobado":"Rechazado":"Pendiente"),k=T(()=>g.aprobacion?g.aprobacion.aprobado?q:I:ne),L=async()=>{var i;v.value=!0;try{const r=await fetch(`/admin/candidaturas/${g.candidaturaId}/campos/${g.campoId}/aprobar`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({comentario:b.value||null})}),C=await r.json();r.ok&&C.success?(N("campo-actualizado",C.aprobacion),w.value=!1,b.value=""):console.error("Error al aprobar campo:",C)}catch(r){console.error("Error al aprobar campo:",r)}finally{v.value=!1}},P=async()=>{var i;if(b.value.trim()){v.value=!0;try{const r=await fetch(`/admin/candidaturas/${g.candidaturaId}/campos/${g.campoId}/rechazar`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({comentario:b.value})}),C=await r.json();r.ok&&C.success?(N("campo-actualizado",C.aprobacion),R.value=!1,b.value=""):console.error("Error al rechazar campo:",C)}catch(r){console.error("Error al rechazar campo:",r)}finally{v.value=!1}}},F=i=>Array.isArray(i)?i.join(", "):typeof i=="object"&&i!==null?JSON.stringify(i):(i==null?void 0:i.toString())||"Sin valor";return(i,r)=>{var C;return u(),p(M,null,[t("div",Ce,[t("div",he,[t("div",$e,[t("h4",we,d(i.campoTitle),1),t("p",ze,d(F(i.valor)),1)]),t("div",Ae,[a(e(se),{class:D([z.value,"flex items-center gap-1"])},{default:s(()=>[(u(),h(ve(k.value),{class:"h-3 w-3"})),l(" "+d(_.value),1)]),_:1},8,["class"])])]),(C=i.aprobacion)!=null&&C.aprobado_por?(u(),p("div",Ve,[t("div",je,[a(e(X),{class:"h-3 w-3 mt-0.5"}),t("div",Se,[t("p",null,[l(d(i.aprobacion.aprobado?"Aprobado":"Rechazado")+" por ",1),t("span",Re,d(i.aprobacion.aprobado_por.name),1)]),i.aprobacion.fecha_aprobacion?(u(),p("p",Ee,[a(e(pe),{class:"h-3 w-3"}),l(" "+d(i.aprobacion.fecha_aprobacion),1)])):m("",!0)])]),i.aprobacion.comentario?(u(),p("div",Be,[t("div",Te,[a(e(le),{class:"h-3 w-3 mt-0.5 text-muted-foreground"}),t("p",Fe,d(i.aprobacion.comentario),1)])])):m("",!0)])):m("",!0),i.puedeAprobar&&!i.readonly?(u(),p("div",Ue,[A.value!=="aprobado"?(u(),h(e(f),{key:0,size:"sm",variant:"outline",class:"text-green-700 border-green-300 hover:bg-green-50",onClick:r[0]||(r[0]=y=>w.value=!0)},{default:s(()=>[a(e(q),{class:"h-3 w-3 mr-1"}),r[8]||(r[8]=l(" Aprobar "))]),_:1})):m("",!0),A.value!=="rechazado"?(u(),h(e(f),{key:1,size:"sm",variant:"outline",class:"text-red-700 border-red-300 hover:bg-red-50",onClick:r[1]||(r[1]=y=>R.value=!0)},{default:s(()=>[a(e(I),{class:"h-3 w-3 mr-1"}),r[9]||(r[9]=l(" Rechazar "))]),_:1})):m("",!0)])):m("",!0)]),a(e(K),{open:w.value,"onUpdate:open":r[4]||(r[4]=y=>w.value=y)},{default:s(()=>[a(e(W),null,{default:s(()=>[a(e(G),null,{default:s(()=>[a(e(Q),null,{default:s(()=>r[10]||(r[10]=[l("Aprobar Campo")])),_:1}),a(e(Y),null,{default:s(()=>[l(' Estás aprobando el campo "'+d(i.campoTitle)+'". Puedes agregar un comentario opcional. ',1)]),_:1})]),_:1}),t("div",qe,[t("div",null,[a(e($),null,{default:s(()=>r[11]||(r[11]=[l("Valor actual del campo")])),_:1}),t("p",Ie,d(F(i.valor)),1)]),t("div",null,[a(e($),{for:"comentario-aprobacion"},{default:s(()=>r[12]||(r[12]=[l(" Comentario (opcional) ")])),_:1}),a(e(U),{id:"comentario-aprobacion",modelValue:b.value,"onUpdate:modelValue":r[2]||(r[2]=y=>b.value=y),placeholder:"Agregar comentario...",rows:"3"},null,8,["modelValue"])])]),a(e(Z),null,{default:s(()=>[a(e(f),{variant:"outline",onClick:r[3]||(r[3]=y=>w.value=!1),disabled:v.value},{default:s(()=>r[13]||(r[13]=[l(" Cancelar ")])),_:1},8,["disabled"]),a(e(f),{onClick:L,disabled:v.value,class:"bg-green-600 hover:bg-green-700"},{default:s(()=>[a(e(q),{class:"h-4 w-4 mr-2"}),l(" "+d(v.value?"Aprobando...":"Aprobar Campo"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),a(e(K),{open:R.value,"onUpdate:open":r[7]||(r[7]=y=>R.value=y)},{default:s(()=>[a(e(W),null,{default:s(()=>[a(e(G),null,{default:s(()=>[a(e(Q),null,{default:s(()=>r[14]||(r[14]=[l("Rechazar Campo")])),_:1}),a(e(Y),null,{default:s(()=>[l(' Estás rechazando el campo "'+d(i.campoTitle)+'". Por favor, indica el motivo del rechazo. ',1)]),_:1})]),_:1}),t("div",Ne,[t("div",null,[a(e($),null,{default:s(()=>r[15]||(r[15]=[l("Valor actual del campo")])),_:1}),t("p",Me,d(F(i.valor)),1)]),t("div",null,[a(e($),{for:"comentario-rechazo"},{default:s(()=>r[16]||(r[16]=[l(" Motivo del rechazo * ")])),_:1}),a(e(U),{id:"comentario-rechazo",modelValue:b.value,"onUpdate:modelValue":r[5]||(r[5]=y=>b.value=y),placeholder:"Explica qué debe corregir el usuario...",rows:"4",required:""},null,8,["modelValue"])])]),a(e(Z),null,{default:s(()=>[a(e(f),{variant:"outline",onClick:r[6]||(r[6]=y=>R.value=!1),disabled:v.value},{default:s(()=>r[17]||(r[17]=[l(" Cancelar ")])),_:1},8,["disabled"]),a(e(f),{variant:"destructive",onClick:P,disabled:!b.value.trim()||v.value},{default:s(()=>[a(e(I),{class:"h-4 w-4 mr-2"}),l(" "+d(v.value?"Rechazando...":"Rechazar Campo"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64)}}}),Oe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Le={class:"flex items-center justify-between"},Pe={class:"text-3xl font-bold"},Je={class:"text-muted-foreground"},Xe={class:"flex items-center justify-between"},He={class:"flex items-center gap-4"},Ke={class:"flex items-center gap-2"},We={class:"text-sm text-muted-foreground"},Ge={key:0,class:"flex items-center gap-2 text-sm"},Qe={class:"text-muted-foreground"},Ye={key:0,class:"flex gap-2"},Ze={class:"flex justify-end gap-2"},ea={key:0,class:"text-sm text-destructive mt-1"},aa={class:"flex justify-end gap-2"},oa={class:"p-4 bg-orange-100 dark:bg-orange-900/30 rounded-lg"},ta={class:"flex items-start gap-3"},sa={key:0,class:"text-sm text-destructive mt-1"},ra={class:"flex justify-end gap-2"},na={class:"grid gap-4 md:grid-cols-2"},la={class:"text-muted-foreground"},da={class:"text-muted-foreground"},ia={class:"text-muted-foreground"},ua={class:"text-muted-foreground"},ca={class:"flex items-center gap-2"},ma={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},pa={class:"text-center"},fa={class:"text-2xl font-bold"},ba={class:"text-center"},va={class:"text-2xl font-bold text-green-600"},ga={class:"text-center"},_a={class:"text-2xl font-bold text-red-600"},ya={class:"text-center"},xa={class:"text-2xl font-bold text-yellow-600"},ka={class:"mt-4"},Ca={class:"flex justify-between text-sm mb-1"},ha={class:"w-full bg-gray-200 rounded-full h-2"},$a={class:"text-blue-700 dark:text-blue-300"},wa={key:0,class:"text-center py-8"},za={key:1,class:"space-y-6"},Aa={key:0},Va={key:0,class:"text-red-500"},ja={key:0,class:"text-xs text-muted-foreground mb-2"},Sa={class:"mt-2"},Ra={class:"text-muted-foreground"},Ea={key:1,class:"space-y-4"},Wa=de({__name:"Show",props:{candidatura:{},configuracion_campos:{},campo_aprobaciones:{},resumen_aprobaciones:{},puede_aprobar_campos:{type:Boolean}},setup(O){const x=O,g=ge(x.campo_aprobaciones||{}),N=n=>{g[n.campo_id]=n,ee.reload({only:["resumen_aprobaciones"]})},w=S(!1),R=[{title:"Admin",href:"/admin/dashboard"},{title:"Candidaturas",href:"/admin/candidaturas"},{title:x.candidatura.usuario.name,href:"#"}],b=S(!1),v=S(!1),A=S(!1),z=J({comentarios:""}),_=J({comentarios:""}),k=J({motivo:""}),L=T(()=>x.candidatura.estado==="pendiente"&&!i(x.candidatura.formulario_data)),P=T(()=>x.candidatura.estado==="pendiente"),F=T(()=>x.candidatura.estado==="aprobado"||x.candidatura.estado==="rechazado"),i=n=>!n||Object.keys(n).length===0,r=()=>{z.post(`/admin/candidaturas/${x.candidatura.id}/aprobar`,{onSuccess:()=>{b.value=!1}})},C=()=>{_.comentarios.trim()&&_.post(`/admin/candidaturas/${x.candidatura.id}/rechazar`,{onSuccess:()=>{v.value=!1}})},y=()=>{z.reset(),b.value=!1},ie=()=>{_.reset(),v.value=!1},ue=()=>{k.post(`/admin/candidaturas/${x.candidatura.id}/volver-borrador`,{onSuccess:()=>{A.value=!1}})},ce=()=>{k.reset(),A.value=!1},me=(n,o)=>{if(!o)return"No especificado";switch(n.type){case"checkbox":return Array.isArray(o)?o.join(", "):o;case"date":return new Date(o).toLocaleDateString("es-ES");default:return o}},H=n=>new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(n,o)=>(u(),p(M,null,[a(e(_e),{title:`Candidatura - ${n.candidatura.usuario.name}`},null,8,["title"]),a(fe,{breadcrumbs:R},{default:s(()=>[t("div",Oe,[t("div",Le,[t("div",null,[t("h1",Pe,d(n.candidatura.usuario.name),1),t("p",Je," Candidatura "+d(n.candidatura.estado_label)+" - Versión "+d(n.candidatura.version),1)]),a(e(f),{variant:"outline",onClick:o[0]||(o[0]=c=>e(ee).visit("/admin/candidaturas"))},{default:s(()=>[a(e(xe),{class:"mr-2 h-4 w-4"}),o[8]||(o[8]=l(" Volver a Lista "))]),_:1})]),a(e(V),null,{default:s(()=>[a(e(j),{class:"p-6"},{default:s(()=>[t("div",Xe,[t("div",He,[t("div",Ke,[a(e(se),{class:D([n.candidatura.estado_color,"text-sm"])},{default:s(()=>[l(d(n.candidatura.estado_label),1)]),_:1},8,["class"]),t("span",We," Versión "+d(n.candidatura.version),1)]),n.candidatura.aprobado_por?(u(),p("div",Ge,[a(e(X),{class:"h-4 w-4"}),t("span",null,d(n.candidatura.aprobado_por.name),1),t("span",Qe,"- "+d(n.candidatura.fecha_aprobacion),1)])):m("",!0)]),!b.value&&!v.value&&!A.value?(u(),p("div",Ye,[L.value?(u(),h(e(f),{key:0,onClick:o[1]||(o[1]=c=>b.value=!0),class:"bg-green-600 hover:bg-green-700"},{default:s(()=>[a(e(q),{class:"mr-2 h-4 w-4"}),o[9]||(o[9]=l(" Aprobar "))]),_:1})):m("",!0),P.value?(u(),h(e(f),{key:1,variant:"destructive",onClick:o[2]||(o[2]=c=>v.value=!0)},{default:s(()=>[a(e(I),{class:"mr-2 h-4 w-4"}),o[10]||(o[10]=l(" Rechazar "))]),_:1})):m("",!0),F.value?(u(),h(e(f),{key:2,variant:"outline",onClick:o[3]||(o[3]=c=>A.value=!0),class:"border-orange-300 text-orange-700 hover:bg-orange-50"},{default:s(()=>[a(e(te),{class:"mr-2 h-4 w-4"}),o[11]||(o[11]=l(" Volver a Borrador "))]),_:1})):m("",!0)])):m("",!0)])]),_:1})]),_:1}),b.value?(u(),h(e(V),{key:0,class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-950/20"},{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(B),{class:"text-green-800 dark:text-green-200 flex items-center gap-2"},{default:s(()=>[a(e(q),{class:"h-5 w-5"}),o[12]||(o[12]=l(" Aprobar Candidatura "))]),_:1})]),_:1}),a(e(j),{class:"space-y-4"},{default:s(()=>[t("div",null,[a(e($),{for:"approval_comments"},{default:s(()=>o[13]||(o[13]=[l("Comentarios (opcional)")])),_:1}),a(e(U),{id:"approval_comments",modelValue:e(z).comentarios,"onUpdate:modelValue":o[4]||(o[4]=c=>e(z).comentarios=c),placeholder:"Comentarios adicionales para el usuario...",rows:"3"},null,8,["modelValue"])]),t("div",Ze,[a(e(f),{variant:"outline",onClick:y,disabled:e(z).processing},{default:s(()=>o[14]||(o[14]=[l(" Cancelar ")])),_:1},8,["disabled"]),a(e(f),{onClick:r,disabled:e(z).processing,class:"bg-green-600 hover:bg-green-700"},{default:s(()=>[l(d(e(z).processing?"Aprobando...":"Confirmar Aprobación"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})):m("",!0),v.value?(u(),h(e(V),{key:1,class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950/20"},{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(B),{class:"text-red-800 dark:text-red-200 flex items-center gap-2"},{default:s(()=>[a(e(I),{class:"h-5 w-5"}),o[15]||(o[15]=l(" Rechazar Candidatura "))]),_:1})]),_:1}),a(e(j),{class:"space-y-4"},{default:s(()=>[t("div",null,[a(e($),{for:"rejection_comments"},{default:s(()=>o[16]||(o[16]=[l("Motivo del rechazo *")])),_:1}),a(e(U),{id:"rejection_comments",modelValue:e(_).comentarios,"onUpdate:modelValue":o[5]||(o[5]=c=>e(_).comentarios=c),placeholder:"Explica al usuario qué debe corregir...",rows:"4",class:D({"border-destructive":e(_).errors.comentarios})},null,8,["modelValue","class"]),e(_).errors.comentarios?(u(),p("p",ea,d(e(_).errors.comentarios),1)):m("",!0)]),t("div",aa,[a(e(f),{variant:"outline",onClick:ie,disabled:e(_).processing},{default:s(()=>o[17]||(o[17]=[l(" Cancelar ")])),_:1},8,["disabled"]),a(e(f),{variant:"destructive",onClick:C,disabled:!e(_).comentarios.trim()||e(_).processing},{default:s(()=>[l(d(e(_).processing?"Rechazando...":"Confirmar Rechazo"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})):m("",!0),A.value?(u(),h(e(V),{key:2,class:"border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-950/20"},{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(B),{class:"text-orange-800 dark:text-orange-200 flex items-center gap-2"},{default:s(()=>[a(e(te),{class:"h-5 w-5"}),o[18]||(o[18]=l(" Volver Candidatura a Borrador "))]),_:1})]),_:1}),a(e(j),{class:"space-y-4"},{default:s(()=>[t("div",oa,[t("div",ta,[a(e(oe),{class:"h-5 w-5 text-orange-600 dark:text-orange-400 mt-0.5"}),o[19]||(o[19]=t("div",{class:"text-sm text-orange-800 dark:text-orange-200"},[t("p",{class:"font-medium"},'Esta acción volverá la candidatura al estado "Borrador"'),t("p",{class:"mt-1"},"El usuario podrá editar su candidatura nuevamente y deberá ser revisada otra vez.")],-1))])]),t("div",null,[a(e($),{for:"revert_reason"},{default:s(()=>o[20]||(o[20]=[l("Motivo (opcional)")])),_:1}),a(e(U),{id:"revert_reason",modelValue:e(k).motivo,"onUpdate:modelValue":o[6]||(o[6]=c=>e(k).motivo=c),placeholder:"Explica al usuario por qué su candidatura volvió a borrador...",rows:"3",class:D({"border-destructive":e(k).errors.motivo})},null,8,["modelValue","class"]),e(k).errors.motivo?(u(),p("p",sa,d(e(k).errors.motivo),1)):m("",!0)]),t("div",ra,[a(e(f),{variant:"outline",onClick:ce,disabled:e(k).processing},{default:s(()=>o[21]||(o[21]=[l(" Cancelar ")])),_:1},8,["disabled"]),a(e(f),{onClick:ue,disabled:e(k).processing,class:"bg-orange-600 hover:bg-orange-700"},{default:s(()=>[l(d(e(k).processing?"Procesando...":"Confirmar"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})):m("",!0),a(e(V),null,{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(B),{class:"flex items-center gap-2"},{default:s(()=>[a(e(X),{class:"h-5 w-5"}),o[22]||(o[22]=l(" Información del Usuario "))]),_:1})]),_:1}),a(e(j),null,{default:s(()=>[t("div",na,[t("div",null,[a(e($),{class:"text-sm font-medium"},{default:s(()=>o[23]||(o[23]=[l("Nombre")])),_:1}),t("p",la,d(n.candidatura.usuario.name),1)]),t("div",null,[a(e($),{class:"text-sm font-medium"},{default:s(()=>o[24]||(o[24]=[l("Email")])),_:1}),t("p",da,d(n.candidatura.usuario.email),1)]),t("div",null,[a(e($),{class:"text-sm font-medium"},{default:s(()=>o[25]||(o[25]=[l("Fecha de creación")])),_:1}),t("p",ia,d(H(n.candidatura.created_at)),1)]),t("div",null,[a(e($),{class:"text-sm font-medium"},{default:s(()=>o[26]||(o[26]=[l("Última actualización")])),_:1}),t("p",ua,d(H(n.candidatura.updated_at)),1)])])]),_:1})]),_:1}),n.resumen_aprobaciones&&n.puede_aprobar_campos?(u(),h(e(V),{key:3,class:"border-indigo-200 dark:border-indigo-800"},{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(B),{class:"flex items-center justify-between"},{default:s(()=>[t("span",ca,[a(e(ke),{class:"h-5 w-5"}),o[27]||(o[27]=l(" Aprobación de Campos "))]),a(e(f),{variant:"outline",size:"sm",onClick:o[7]||(o[7]=c=>w.value=!w.value)},{default:s(()=>[l(d(w.value?"Ocultar Aprobaciones":"Mostrar Aprobaciones"),1)]),_:1})]),_:1})]),_:1}),a(e(j),null,{default:s(()=>[t("div",ma,[t("div",pa,[t("p",fa,d(n.resumen_aprobaciones.total),1),o[28]||(o[28]=t("p",{class:"text-xs text-muted-foreground"},"Total Campos",-1))]),t("div",ba,[t("p",va,d(n.resumen_aprobaciones.aprobados),1),o[29]||(o[29]=t("p",{class:"text-xs text-muted-foreground"},"Aprobados",-1))]),t("div",ga,[t("p",_a,d(n.resumen_aprobaciones.rechazados),1),o[30]||(o[30]=t("p",{class:"text-xs text-muted-foreground"},"Rechazados",-1))]),t("div",ya,[t("p",xa,d(n.resumen_aprobaciones.pendientes),1),o[31]||(o[31]=t("p",{class:"text-xs text-muted-foreground"},"Pendientes",-1))])]),t("div",ka,[t("div",Ca,[o[32]||(o[32]=t("span",null,"Progreso de Aprobación",-1)),t("span",null,d(n.resumen_aprobaciones.porcentaje_aprobado)+"%",1)]),t("div",ha,[t("div",{class:"bg-green-600 h-2 rounded-full transition-all",style:ye({width:`${n.resumen_aprobaciones.porcentaje_aprobado}%`})},null,4)])])]),_:1})]),_:1})):m("",!0),n.candidatura.comentarios_admin?(u(),h(e(V),{key:4,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(B),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:s(()=>[a(e(le),{class:"h-5 w-5"}),o[33]||(o[33]=l(" Comentarios de la comisión "))]),_:1})]),_:1}),a(e(j),null,{default:s(()=>[t("p",$a,d(n.candidatura.comentarios_admin),1)]),_:1})]),_:1})):m("",!0),a(e(V),null,{default:s(()=>[a(e(E),null,{default:s(()=>[a(e(B),{class:"flex items-center gap-2"},{default:s(()=>[a(e(ne),{class:"h-5 w-5"}),o[34]||(o[34]=l(" Datos de la Candidatura "))]),_:1})]),_:1}),a(e(j),null,{default:s(()=>[i(n.candidatura.formulario_data)?(u(),p("div",wa,[a(e(oe),{class:"mx-auto h-12 w-12 text-yellow-500"}),o[35]||(o[35]=t("h3",{class:"mt-4 text-lg font-medium"},"Candidatura vacía",-1)),o[36]||(o[36]=t("p",{class:"text-muted-foreground"},"El usuario aún no ha completado su perfil de candidatura.",-1))])):(u(),p("div",za,[w.value?(u(),p("div",Ea,[(u(!0),p(M,null,ae(n.configuracion_campos,c=>(u(),h(De,{key:c.id,"candidatura-id":n.candidatura.id,"campo-id":c.id,"campo-title":c.title,valor:n.candidatura.formulario_data[c.id],aprobacion:g[c.id],"puede-aprobar":n.puede_aprobar_campos,readonly:n.candidatura.estado==="aprobado",onCampoActualizado:N},null,8,["candidatura-id","campo-id","campo-title","valor","aprobacion","puede-aprobar","readonly"]))),128))])):(u(),p("div",Aa,[(u(!0),p(M,null,ae(n.configuracion_campos,c=>(u(),p("div",{key:c.id,class:"border-b pb-4 last:border-b-0"},[a(e($),{class:"text-sm font-medium flex items-center gap-1"},{default:s(()=>[l(d(c.title)+" ",1),c.required?(u(),p("span",Va,"*")):m("",!0)]),_:2},1024),c.description?(u(),p("p",ja,d(c.description),1)):m("",!0),t("div",Sa,[t("p",Ra,d(me(c,n.candidatura.formulario_data[c.id])),1)])]))),128))]))]))]),_:1})]),_:1}),a(be,{"candidatura-id":n.candidatura.id,"version-actual":n.candidatura.version,"is-admin":!0},null,8,["candidatura-id","version-actual"])])]),_:1})],64))}});export{Wa as default};
