import{_ as D}from"./index-ByRNdMTg.js";import{_ as y}from"./createLucideIcon-DVREvg6J.js";import{a as B,b as N,c as S,_ as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-BuU4x3mY.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-MjlgMBI4.js";import{_ as T,a as G,b,c as f,d as Q,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-BYJZLy9w.js";import{a as R,_ as H}from"./index-DpE8LhEi.js";import{_ as J}from"./AlertTitle.vue_vue_type_script_setup_true_lang-CRF_NwO_.js";import{_}from"./Skeleton.vue_vue_type_script_setup_true_lang-D-Bujckb.js";import{_ as K}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-BDBcc3yu.js";import{d as O,r as g,c as W,o as X,i as u,e as a,g as o,f as s,q as Y,w as e,h as l,b as k,j as C,m as d,t as c,F as Z,k as tt,v as st,a as at}from"./app-DMuAIQna.js";import{u as et}from"./useGeographicFilters-Cs8QI0Xo.js";import{A as q}from"./award-Dr-7DhCo.js";import{A as ot}from"./arrow-left-B_TuOwLj.js";import{I as lt}from"./info-BDF1BKU4.js";import{S as it}from"./search-DfFMlcXH.js";import{C as z}from"./circle-check-big-Y1a4sD88.js";import{U as rt}from"./users-DC8IvOAs.js";import{B as nt}from"./briefcase-C66ynNrT.js";import{C as dt}from"./calendar-days-BbVCqlmM.js";import{M as ct}from"./map-pin-D7fd8V0G.js";import{C as pt}from"./chevron-left-D3lzVNn4.js";import{C as ut}from"./chevron-right-B7cHhwdw.js";import"./index-DhwjMzhI.js";import"./Input.vue_vue_type_script_setup_true_lang-BGVUfrGL.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DPlLDIxr.js";import"./index-BlEXpuxR.js";import"./floating-ui.vue-B_8ih11B.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Do5CqHgU.js";import"./VisuallyHidden-B9gbRvHT.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-B5RgMbmd.js";import"./check-CX6SjPsT.js";import"./nullish-CHIgUVhi.js";import"./x-BIajvu4a.js";import"./DialogTrigger-CBqMfsKy.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-IJBj02SI.js";import"./useKbd-kRIii9yh.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-C1E7z6vo.js";import"./es-BDPlFIsO.js";import"./calendar-D2WQq3Rt.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-C5sXKupV.js";import"./loader-circle-BqKSK0Eu.js";import"./trash-2-0Ljoci2r.js";import"./plus-RVQXooLS.js";import"./filter-HFRolTJa.js";import"./history-DgpHyGPf.js";import"./save-CifUn7gj.js";import"./circle-alert-DLR_15wS.js";const mt={class:"min-h-screen bg-gray-50"},ft={class:"bg-white shadow-sm border-b"},_t={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},gt={class:"flex items-start justify-between"},vt={class:"flex flex-col gap-4"},xt={class:"flex items-center gap-3"},wt={href:"/"},ht={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},yt={class:"flex items-center justify-between"},bt={key:0,class:"space-y-4"},kt={key:1,class:"overflow-x-auto"},Ct={class:"flex items-center gap-2"},$t={class:"max-w-[200px]"},Ft={class:"font-medium truncate"},Pt={key:0,class:"flex items-center gap-1"},At={class:"text-sm"},Bt={key:1,class:"text-gray-400 text-sm"},Nt={key:0,class:"flex items-center gap-1"},St={class:"text-sm"},Lt={key:1,class:"text-gray-400 text-sm"},jt={class:"flex items-center gap-1"},qt={class:"text-sm truncate max-w-[200px]"},zt={class:"flex flex-col items-center gap-2 text-muted-foreground"},Ut={key:2,class:"mt-6 flex items-center justify-between"},Vt={class:"text-sm text-muted-foreground"},Mt={class:"flex gap-2"},Et={class:"flex items-center gap-2"},It={class:"text-sm"},Dt={class:"mt-6 text-center text-sm text-gray-500"},Tt={class:"mt-1"},Us=O({__name:"PostulacionesAceptadas",props:{filterFieldsConfig:{}},setup(U){const V=U,h=g([]),r=g({current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}),v=g(!1),$=g({}),F=g(V.filterFieldsConfig||[]),P=et({prefix:"users.",endpoints:{territorios:`${window.location.origin}/api/public/geographic/territorios`,departamentos:`${window.location.origin}/api/public/geographic/departamentos`,municipios:`${window.location.origin}/api/public/geographic/municipios`,localidades:`${window.location.origin}/api/public/geographic/localidades`}}),M=W(()=>({fields:[...F.value||[],...P.generateFilterFields()],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, cédula o convocatoria...",quickSearchFields:["users.name","users.documento_identidad","convocatorias.nombre"],maxNestingLevel:1,allowSaveFilters:!1})),E=i=>{const t=[];return i.localidad&&t.push(i.localidad),i.municipio&&t.push(i.municipio),i.departamento&&t.push(i.departamento),i.territorio&&t.push(i.territorio),t.length>0?t.join(", "):"No especificada"},x=async(i={},t=1)=>{var n;v.value=!0;try{const w={...i,page:t},p=await at.get("/public-api/postulaciones-aceptadas",{params:w});h.value=p.data.postulaciones.data,r.value={current_page:p.data.postulaciones.current_page,last_page:p.data.postulaciones.last_page,per_page:p.data.postulaciones.per_page,total:p.data.postulaciones.total,from:p.data.postulaciones.from,to:p.data.postulaciones.to},p.data.filterFieldsConfig&&(F.value=p.data.filterFieldsConfig)}catch(w){console.error("Error cargando postulaciones:",w),((n=w.response)==null?void 0:n.status)===404&&(window.location.href="/")}finally{v.value=!1}},I=i=>{$.value=i,x(i,1)},A=i=>{x($.value,i)};return X(async()=>{await P.initialize(),x()}),(i,t)=>(d(),u("div",null,[a(s(Y),{title:"Postulaciones Aceptadas"}),o("div",mt,[o("div",ft,[o("div",_t,[o("div",gt,[o("div",vt,[o("div",xt,[a(s(q),{class:"h-8 w-8 text-green-600"}),t[2]||(t[2]=o("h1",{class:"text-2xl font-bold text-gray-900"}," Postulaciones Aceptadas ",-1))]),t[3]||(t[3]=o("p",{class:"text-gray-600"}," Consulta pública de postulaciones aprobadas a convocatorias ",-1))]),o("a",wt,[a(s(y),{variant:"outline",size:"sm"},{default:e(()=>[a(s(ot),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=l(" Volver al inicio ",-1))]),_:1})])])])]),o("div",ht,[a(s(H),{class:"mb-6"},{default:e(()=>[a(s(lt),{class:"h-4 w-4"}),a(s(J),null,{default:e(()=>[...t[5]||(t[5]=[l("Información Pública",-1)])]),_:1}),a(s(R),null,{default:e(()=>[...t[6]||(t[6]=[l(" Esta página muestra únicamente las postulaciones que han sido aceptadas. La información mostrada es de carácter público y cumple con las políticas de privacidad. ",-1)])]),_:1})]),_:1}),a(s(L),{class:"mb-6"},{default:e(()=>[a(s(B),null,{default:e(()=>[a(s(N),null,{default:e(()=>[a(s(it),{class:"inline-block mr-2 h-5 w-5"}),t[7]||(t[7]=l(" Filtros de Búsqueda ",-1))]),_:1}),a(s(j),null,{default:e(()=>[...t[8]||(t[8]=[l(" Utiliza los filtros para encontrar postulaciones específicas ",-1)])]),_:1})]),_:1}),a(s(S),null,{default:e(()=>[a(K,{config:M.value,onApply:I,onClear:x},null,8,["config"])]),_:1})]),_:1}),a(s(L),null,{default:e(()=>[a(s(B),null,{default:e(()=>[o("div",yt,[o("div",null,[a(s(N),null,{default:e(()=>[a(s(z),{class:"inline-block mr-2 h-5 w-5 text-green-600"}),t[9]||(t[9]=l(" Listado de Postulaciones Aceptadas ",-1))]),_:1}),v.value?C("",!0):(d(),k(s(j),{key:0},{default:e(()=>[l(c(r.value.total)+" "+c(r.value.total===1?"postulación encontrada":"postulaciones encontradas"),1)]),_:1}))]),a(s(D),{variant:"outline",class:"bg-green-50 text-green-700 border-green-300"},{default:e(()=>[a(s(z),{class:"h-3 w-3 mr-1"}),t[10]||(t[10]=l(" Todas Aceptadas ",-1))]),_:1})])]),_:1}),a(s(S),null,{default:e(()=>[v.value?(d(),u("div",bt,[a(s(_),{class:"h-12 w-full"}),a(s(_),{class:"h-12 w-full"}),a(s(_),{class:"h-12 w-full"}),a(s(_),{class:"h-12 w-full"}),a(s(_),{class:"h-12 w-full"})])):(d(),u("div",kt,[a(s(T),null,{default:e(()=>[a(s(G),null,{default:e(()=>[a(s(b),null,{default:e(()=>[a(s(f),null,{default:e(()=>[...t[11]||(t[11]=[l("Postulante",-1)])]),_:1}),a(s(f),null,{default:e(()=>[...t[12]||(t[12]=[l("Convocatoria",-1)])]),_:1}),a(s(f),null,{default:e(()=>[...t[13]||(t[13]=[l("Cargo",-1)])]),_:1}),a(s(f),null,{default:e(()=>[...t[14]||(t[14]=[l("Periodo",-1)])]),_:1}),a(s(f),null,{default:e(()=>[...t[15]||(t[15]=[l("Ubicación",-1)])]),_:1})]),_:1})]),_:1}),a(s(Q),null,{default:e(()=>[(d(!0),u(Z,null,tt(h.value,n=>(d(),k(s(b),{key:n.id},{default:e(()=>[a(s(m),{class:"font-medium"},{default:e(()=>[o("div",Ct,[a(s(rt),{class:"h-4 w-4 text-gray-400"}),l(" "+c(n.postulante.nombre),1)])]),_:2},1024),a(s(m),null,{default:e(()=>[o("div",$t,[o("p",Ft,c(n.convocatoria.nombre),1)])]),_:2},1024),a(s(m),null,{default:e(()=>[n.convocatoria.cargo?(d(),u("div",Pt,[a(s(nt),{class:"h-4 w-4 text-gray-400"}),o("span",At,c(n.convocatoria.cargo),1)])):(d(),u("span",Bt,"No especificado"))]),_:2},1024),a(s(m),null,{default:e(()=>[n.convocatoria.periodo?(d(),u("div",Nt,[a(s(dt),{class:"h-4 w-4 text-gray-400"}),o("span",St,c(n.convocatoria.periodo),1)])):(d(),u("span",Lt,"No especificado"))]),_:2},1024),a(s(m),null,{default:e(()=>[o("div",jt,[a(s(ct),{class:"h-4 w-4 text-gray-400 flex-shrink-0"}),o("span",qt,c(E(n.ubicacion)),1)])]),_:2},1024)]),_:2},1024))),128)),h.value.length===0?(d(),k(s(b),{key:0},{default:e(()=>[a(s(m),{colspan:5,class:"text-center py-8"},{default:e(()=>[o("div",zt,[a(s(q),{class:"h-8 w-8"}),t[16]||(t[16]=o("p",null,"No se encontraron postulaciones con los filtros aplicados",-1))])]),_:1})]),_:1})):C("",!0)]),_:1})]),_:1})])),r.value.last_page>1?(d(),u("div",Ut,[o("p",Vt," Mostrando "+c(r.value.from||0)+" a "+c(r.value.to||0)+" de "+c(r.value.total)+" postulaciones ",1),o("div",Mt,[a(s(y),{variant:"outline",size:"sm",disabled:r.value.current_page===1,onClick:t[0]||(t[0]=n=>A(r.value.current_page-1))},{default:e(()=>[a(s(pt),{class:"h-4 w-4"}),t[17]||(t[17]=l(" Anterior ",-1))]),_:1},8,["disabled"]),o("div",Et,[o("span",It," Página "+c(r.value.current_page)+" de "+c(r.value.last_page),1)]),a(s(y),{variant:"outline",size:"sm",disabled:r.value.current_page===r.value.last_page,onClick:t[1]||(t[1]=n=>A(r.value.current_page+1))},{default:e(()=>[t[18]||(t[18]=l(" Siguiente ",-1)),a(s(ut),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):C("",!0)]),_:1})]),_:1}),o("div",Dt,[t[22]||(t[22]=o("p",null,"La información mostrada es de carácter público y cumple con las políticas de privacidad.",-1)),o("p",Tt,[t[20]||(t[20]=l(" Para más información sobre el proceso de postulación, ",-1)),a(s(st),{href:"/login",class:"text-blue-600 hover:underline"},{default:e(()=>[...t[19]||(t[19]=[l("inicie sesión",-1)])]),_:1}),t[21]||(t[21]=l(". ",-1))])])])])]))}});export{Us as default};
