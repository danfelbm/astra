import{_ as y}from"./createLucideIcon-CpLzXnUV.js";import{a as B,b as q,c as E,_ as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-TyS-yRYh.js";import{_ as D}from"./CardDescription.vue_vue_type_script_setup_true_lang-Ch2GH_sJ.js";import{_ as H,a as Q,b as L,c as g,d as R,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-BVJnOh2_.js";import{a as J,_ as K}from"./index-BG4oTL1r.js";import{_ as O}from"./AlertTitle.vue_vue_type_script_setup_true_lang-COA8FAjP.js";import{_ as W}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-W5UM7IN7.js";import{d as X,r as p,c as Y,o as Z,i as _,e,g as i,f as t,q as aa,t as o,j as v,w as s,h as l,b as C,m as u,F as ta,k as ea,a as sa}from"./app-CXqeR4-a.js";import{u as ia}from"./useGeographicFilters-SED3nKqL.js";import{C as la}from"./calendar-BhbA0VfK.js";import{M as oa}from"./map-pin-CTYkmBKO.js";import{A as ra}from"./arrow-left-DpGKD7gF.js";import{I as na}from"./info-hZV7e_6m.js";import{U as $}from"./users-DofqsMlh.js";import{S as da}from"./search-Bt_YncZq.js";import{C as ua}from"./chevron-left-Cz05qBRR.js";import{C as ma}from"./chevron-right-BdTxjXhb.js";import{f as pa,e as ca}from"./es-BDPlFIsO.js";import"./Input.vue_vue_type_script_setup_true_lang-CGgKhCND.js";import"./index-YW3zb1ZU.js";import"./index-CygHK_pP.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Bwedse_w.js";import"./index-BH7gl6Ss.js";import"./floating-ui.vue-DAU4aHHe.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DLXfhP6o.js";import"./VisuallyHidden-BDq1908I.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DUiQEXpy.js";import"./check-0OPOwJmX.js";import"./x-BEuzp8MD.js";import"./DialogTrigger-DM9sRMn1.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C6eblcqN.js";import"./useKbd-kRIii9yh.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DVlcjevx.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-b7570jU1.js";import"./loader-circle-ag-f-HGM.js";import"./trash-2-Dl1NliaY.js";import"./plus-DUtB4BJC.js";import"./filter-CNH6Mpm3.js";import"./history-BdpQ0wSs.js";import"./save-Kt7lsDhZ.js";import"./circle-alert-iRJER3rF.js";const fa={class:"min-h-screen bg-gray-50"},_a={class:"bg-white shadow-sm border-b"},ga={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},va={class:"flex items-start justify-between"},ba={class:"flex flex-col gap-4"},xa={class:"text-2xl font-bold text-gray-900"},wa={class:"flex flex-wrap gap-4 text-sm text-gray-600"},ya={class:"flex items-center gap-1"},Ca={key:0,class:"flex items-center gap-1"},$a={href:"/"},ka={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pa={class:"text-center py-8"},Fa={class:"flex items-center justify-between"},ha={class:"mb-4"},La={key:0,class:"flex justify-center py-8"},Na={key:1},za={class:"flex flex-col items-center gap-2 text-muted-foreground"},Aa={key:0,class:"flex items-center justify-between mt-4"},Sa={class:"text-sm text-muted-foreground"},ja={class:"flex items-center space-x-2"},Ma={class:"text-sm"},Ct=X({__name:"ParticipantsList",props:{asamblea:{},filterFieldsConfig:{}},setup(c){const N=c,k=p([]),r=p({current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}),b=p(!1),z=p({}),A=p(N.filterFieldsConfig||[]),S=p(!1),x=p(!1),P=p(!1),F=ia({prefix:"users.",endpoints:{territorios:`${window.location.origin}/api/public/geographic/territorios`,departamentos:`${window.location.origin}/api/public/geographic/departamentos`,municipios:`${window.location.origin}/api/public/geographic/municipios`,localidades:`${window.location.origin}/api/public/geographic/localidades`}}),G=Y(()=>({fields:[...A.value||[],...F.generateFilterFields()],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre o cédula...",quickSearchFields:["users.name","users.documento_identidad"],maxNestingLevel:1,allowSaveFilters:!1})),j=d=>d?pa(new Date(d),"PPP",{locale:ca}):"",h=async(d={},a=1)=>{var n;b.value=!0;try{const w={...d,page:a},m=await sa.get(`/public-api/asambleas/${N.asamblea.id}/participantes`,{params:w});k.value=m.data.participantes.data,r.value={current_page:m.data.participantes.current_page,last_page:m.data.participantes.last_page,per_page:m.data.participantes.per_page,total:m.data.participantes.total,from:m.data.participantes.from,to:m.data.participantes.to},m.data.filterFieldsConfig&&(A.value=m.data.filterFieldsConfig)}catch(w){console.error("Error cargando participantes:",w),((n=w.response)==null?void 0:n.status)===404&&(window.location.href="/")}finally{b.value=!1}},M=d=>{z.value=d,h(d,1)},V=d=>{h(z.value,d)},T=async()=>{S.value||(S.value=!0,P.value=!0,x.value||(x.value=!0,await F.initialize()),await h())},U=async()=>{x.value||(x.value=!0,await F.initialize())};return Z(()=>{}),(d,a)=>(u(),_("div",null,[e(t(aa),{title:`Participantes - ${c.asamblea.nombre}`},null,8,["title"]),i("div",fa,[i("div",_a,[i("div",ga,[i("div",va,[i("div",ba,[i("h1",xa,o(c.asamblea.nombre),1),i("div",wa,[i("div",ya,[e(t(la),{class:"h-4 w-4"}),i("span",null,o(j(c.asamblea.fecha_inicio))+" - "+o(j(c.asamblea.fecha_fin)),1)]),c.asamblea.lugar?(u(),_("div",Ca,[e(t(oa),{class:"h-4 w-4"}),i("span",null,o(c.asamblea.ubicacion_completa),1)])):v("",!0)])]),i("a",$a,[e(t(y),{variant:"outline",size:"sm"},{default:s(()=>[e(t(ra),{class:"h-4 w-4 mr-2"}),a[3]||(a[3]=l(" Volver al inicio ",-1))]),_:1})])])])]),i("div",ka,[e(t(K),{class:"mb-6"},{default:s(()=>[e(t(na),{class:"h-4 w-4"}),e(t(O),null,{default:s(()=>[...a[4]||(a[4]=[l("Consulta Pública de Participantes",-1)])]),_:1}),e(t(J),null,{default:s(()=>[...a[5]||(a[5]=[l(" Esta es una vista pública de los participantes registrados en la asamblea. La información mostrada es limitada para proteger la privacidad de los participantes. ",-1)])]),_:1})]),_:1}),P.value?v("",!0):(u(),C(t(I),{key:0,class:"mb-6"},{default:s(()=>[e(t(B),null,{default:s(()=>[e(t(q),null,{default:s(()=>[e(t($),{class:"inline-block mr-2 h-5 w-5"}),a[6]||(a[6]=l(" Lista de Participantes ",-1))]),_:1}),e(t(D),null,{default:s(()=>[...a[7]||(a[7]=[l(" Consulta la lista completa de participantes registrados en esta asamblea ",-1)])]),_:1})]),_:1}),e(t(E),null,{default:s(()=>[i("div",Pa,[e(t($),{class:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a[9]||(a[9]=i("p",{class:"text-gray-600 mb-6"},[l(" Haz clic en el botón para cargar la lista de participantes. "),i("br"),i("span",{class:"text-sm text-gray-500"}," Los resultados se mostrarán paginados (50 participantes por página) ")],-1)),e(t(y),{onClick:T,disabled:b.value},{default:s(()=>[e(t($),{class:"h-4 w-4 mr-2"}),a[8]||(a[8]=l(" Ver Lista de Participantes ",-1))]),_:1},8,["disabled"])])]),_:1})]),_:1})),P.value?(u(),C(t(I),{key:1},{default:s(()=>[e(t(B),null,{default:s(()=>[i("div",Fa,[i("div",null,[e(t(q),null,{default:s(()=>[e(t($),{class:"inline-block mr-2 h-5 w-5"}),a[10]||(a[10]=l(" Lista de Participantes ",-1))]),_:1}),e(t(D),null,{default:s(()=>[l(o(r.value.total)+" participantes registrados ",1)]),_:1})])])]),_:1}),e(t(E),null,{default:s(()=>[i("div",ha,[e(W,{config:G.value,onApply:M,onClear:a[0]||(a[0]=n=>M({})),onMounted:U},null,8,["config"])]),b.value?(u(),_("div",La,[...a[11]||(a[11]=[i("div",{class:"text-muted-foreground"},"Cargando participantes...",-1)])])):(u(),_("div",Na,[e(t(H),null,{default:s(()=>[e(t(Q),null,{default:s(()=>[e(t(L),null,{default:s(()=>[e(t(g),null,{default:s(()=>[...a[12]||(a[12]=[l("Nombre",-1)])]),_:1}),e(t(g),null,{default:s(()=>[...a[13]||(a[13]=[l("Territorio",-1)])]),_:1}),e(t(g),null,{default:s(()=>[...a[14]||(a[14]=[l("Departamento",-1)])]),_:1}),e(t(g),null,{default:s(()=>[...a[15]||(a[15]=[l("Municipio",-1)])]),_:1}),e(t(g),null,{default:s(()=>[...a[16]||(a[16]=[l("Localidad",-1)])]),_:1})]),_:1})]),_:1}),e(t(R),null,{default:s(()=>[(u(!0),_(ta,null,ea(k.value,n=>(u(),C(t(L),{key:n.id},{default:s(()=>[e(t(f),{class:"font-medium"},{default:s(()=>[l(o(n.name),1)]),_:2},1024),e(t(f),null,{default:s(()=>[l(o(n.territorio_nombre||"N/A"),1)]),_:2},1024),e(t(f),null,{default:s(()=>[l(o(n.departamento_nombre||"N/A"),1)]),_:2},1024),e(t(f),null,{default:s(()=>[l(o(n.municipio_nombre||"N/A"),1)]),_:2},1024),e(t(f),null,{default:s(()=>[l(o(n.localidad_nombre||"N/A"),1)]),_:2},1024)]),_:2},1024))),128)),k.value.length===0?(u(),C(t(L),{key:0},{default:s(()=>[e(t(f),{colspan:5,class:"text-center py-8"},{default:s(()=>[i("div",za,[e(t(da),{class:"h-8 w-8"}),a[17]||(a[17]=i("p",null,"No se encontraron participantes",-1)),a[18]||(a[18]=i("p",{class:"text-sm"},"Intenta ajustar los filtros de búsqueda",-1))])]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1}),r.value.last_page>1?(u(),_("div",Aa,[i("div",Sa," Mostrando "+o(r.value.from)+" a "+o(r.value.to)+" de "+o(r.value.total)+" resultados ",1),i("div",ja,[e(t(y),{variant:"outline",size:"sm",disabled:r.value.current_page===1,onClick:a[1]||(a[1]=n=>V(r.value.current_page-1))},{default:s(()=>[e(t(ua),{class:"h-4 w-4"}),a[19]||(a[19]=l(" Anterior ",-1))]),_:1},8,["disabled"]),i("div",Ma," Página "+o(r.value.current_page)+" de "+o(r.value.last_page),1),e(t(y),{variant:"outline",size:"sm",disabled:r.value.current_page===r.value.last_page,onClick:a[2]||(a[2]=n=>V(r.value.current_page+1))},{default:s(()=>[a[20]||(a[20]=l(" Siguiente ",-1)),e(t(ma),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):v("",!0)]))]),_:1})]),_:1})):v("",!0),a[21]||(a[21]=i("div",{class:"mt-6 text-center text-sm text-gray-500"},[i("p",null,"Esta información es de carácter público y está sujeta a las políticas de privacidad."),i("p",{class:"mt-1"}," Para más información sobre la asamblea, contacte a la organización. ")],-1))])])]))}});export{Ct as default};
