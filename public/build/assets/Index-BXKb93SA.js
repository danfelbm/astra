import{d as j,r as F,c as B,b as f,e as l,w as o,g as n,j as N,f as s,i as d,A as q,u as t,x as H,F as p,k as v,t as u,au as K,h as i,P as S,W as g,n as W}from"./app-CbA_dzrH.js";import{_ as G}from"./UserLayout.vue_vue_type_script_setup_true_lang-C0kuRXSj.js";import{_,a as b,b as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dpl1EP6e.js";import{_ as y}from"./CardDescription.vue_vue_type_script_setup_true_lang-FdnBhRW4.js";import{_ as I}from"./createLucideIcon-0y3HvBb2.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-Dw2oMjuZ.js";import{_ as J,a as O,b as h,c as k}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-nmj-UEmO.js";import{_ as M,a as P}from"./index-CMryySum.js";import{_ as w}from"./ContratoCard.vue_vue_type_script_setup_true_lang-FhGWFjJg.js";import{S as Q}from"./search-BT-o3QIf.js";import{F as R}from"./filter-DH7chmfT.js";import{T as Y}from"./triangle-alert-BGkuYH5L.js";import{C as Z}from"./clock-Bx6DQ-_s.js";import{F as A}from"./file-text-DINmkRZl.js";import{C as L}from"./circle-check-big-CTzKScww.js";import{C as tt}from"./circle-x-BAB6M3OH.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-C4x6rJ8B.js";import"./index-D-PGeZ3t.js";import"./floating-ui.vue-D3EH1Xba.js";import"./x-CxSWfWOJ.js";import"./index-BGfSt6nP.js";import"./shield-yBic2gp-.js";import"./user-BnDczykq.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-H44qAxpr.js";import"./chevron-right-pq_ChJ0s.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-H8FdC1v8.js";import"./VisuallyHidden-BOU54Fpc.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-C7VbuHoF.js";import"./index-DzUkqZxm.js";import"./check-8t2yOxAa.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-BHOcaT7W.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-fWHHAQt9.js";import"./index-CXCj42Z3.js";import"./circle-alert-CfNQ3Vlu.js";import"./map-pin-B0r5dLQM.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BZUuILpY.js";import"./square-check-big-CDgrQbfI.js";import"./users-DLZP89St.js";import"./folder-open-B03CPFE8.js";import"./index-DPtKDKxs.js";import"./RovingFocusItem-CIXcS1m3.js";import"./utils-D2aazO7p.js";import"./index-MuREUf8q.js";import"./calendar-BOFnEXb6.js";import"./dollar-sign-CHkcv1fe.js";import"./eye-CuQC-PD5.js";import"./square-pen-CVrov98_.js";const st={class:"space-y-6"},et={class:"flex flex-col gap-4"},ot={class:"flex flex-col md:flex-row gap-4"},at={class:"flex-1 relative"},lt=["value"],rt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-6"},it={key:0,class:"text-center py-12"},dt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},nt={key:0,class:"text-center py-12"},ut={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ct={key:0,class:"text-center py-12"},mt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ft={key:0,class:"text-center py-12"},pt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},vt={key:0,class:"text-center py-12"},gt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},_t={key:2,class:"flex justify-center mt-6"},bt={class:"flex gap-2"},fs=j({__name:"Index",props:{contratos:{},filtros:{},estadisticas:{},proyectos:{},authPermissions:{}},setup(D){const m=D,E=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"}],z=F(m.filtros.search||""),C=F(m.filtros.estado||"todos"),T=F(m.filtros.proyecto_id||0);B(()=>m.authPermissions.includes("contratos.view_own"));const c=B(()=>({todos:m.contratos.data,activos:m.contratos.data.filter(e=>e.estado==="activo"),finalizados:m.contratos.data.filter(e=>e.estado==="finalizado"),borradores:m.contratos.data.filter(e=>e.estado==="borrador"),cancelados:m.contratos.data.filter(e=>e.estado==="cancelado")})),$=()=>{g.get(route("user.mis-contratos.index"),{search:z.value,estado:C.value!=="todos"?C.value:void 0,proyecto_id:T.value||void 0},{preserveState:!0,preserveScroll:!0})},U=r=>{C.value=r,$()};return(r,e)=>(l(),f(G,{breadcrumbs:E},{default:o(()=>[n("div",st,[n("div",et,[e[4]||(e[4]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Mis Contratos"),n("p",{class:"text-muted-foreground mt-2"}," Gestiona y consulta los contratos de tus proyectos ")],-1)),n("div",ot,[n("div",at,[s(t(Q),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s(t(X),{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=a=>z.value=a),placeholder:"Buscar contratos...",class:"pl-10",onKeyup:H($,["enter"])},null,8,["modelValue"])]),q(n("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>T.value=a),onChange:$,class:"px-3 py-2 border border-input rounded-md bg-background"},[e[2]||(e[2]=n("option",{value:0},"Todos los proyectos",-1)),(l(!0),d(p,null,v(r.proyectos,a=>(l(),d("option",{key:a.id,value:a.id},u(a.nombre),9,lt))),128))],544),[[K,T.value]]),s(t(I),{onClick:$},{default:o(()=>[s(t(R),{class:"w-4 h-4 mr-2"}),e[3]||(e[3]=i(" Filtrar ",-1))]),_:1})])]),n("div",rt,[s(t(_),null,{default:o(()=>[s(t(b),{class:"pb-3"},{default:o(()=>[s(t(y),null,{default:o(()=>[...e[5]||(e[5]=[i("Total",-1)])]),_:1}),s(t(x),{class:"text-2xl"},{default:o(()=>[i(u(r.estadisticas.total),1)]),_:1})]),_:1})]),_:1}),s(t(_),null,{default:o(()=>[s(t(b),{class:"pb-3"},{default:o(()=>[s(t(y),null,{default:o(()=>[...e[6]||(e[6]=[i("Activos",-1)])]),_:1}),s(t(x),{class:"text-2xl text-green-600"},{default:o(()=>[i(u(r.estadisticas.activos),1)]),_:1})]),_:1})]),_:1}),s(t(_),null,{default:o(()=>[s(t(b),{class:"pb-3"},{default:o(()=>[s(t(y),null,{default:o(()=>[...e[7]||(e[7]=[i("Finalizados",-1)])]),_:1}),s(t(x),{class:"text-2xl text-blue-600"},{default:o(()=>[i(u(r.estadisticas.finalizados),1)]),_:1})]),_:1})]),_:1}),s(t(_),null,{default:o(()=>[s(t(b),{class:"pb-3"},{default:o(()=>[s(t(y),null,{default:o(()=>[...e[8]||(e[8]=[i("Vencidos",-1)])]),_:1}),s(t(x),{class:"text-2xl text-red-600"},{default:o(()=>[i(u(r.estadisticas.vencidos),1)]),_:1})]),_:1})]),_:1}),s(t(_),null,{default:o(()=>[s(t(b),{class:"pb-3"},{default:o(()=>[s(t(y),null,{default:o(()=>[...e[9]||(e[9]=[i("Por Vencer",-1)])]),_:1}),s(t(x),{class:"text-2xl text-orange-600"},{default:o(()=>[i(u(r.estadisticas.proximos_vencer),1)]),_:1})]),_:1})]),_:1}),s(t(_),null,{default:o(()=>[s(t(b),{class:"pb-3"},{default:o(()=>[s(t(y),null,{default:o(()=>[...e[10]||(e[10]=[i("Monto Total",-1)])]),_:1}),s(t(x),{class:"text-xl"},{default:o(()=>{var a;return[i(" $"+u(((a=r.estadisticas.monto_total)==null?void 0:a.toLocaleString())||0),1)]}),_:1})]),_:1})]),_:1})]),r.estadisticas.vencidos>0?(l(),f(t(M),{key:0,class:"border-red-200 bg-red-50"},{default:o(()=>[s(t(Y),{class:"h-4 w-4 text-red-600"}),s(t(P),{class:"text-red-800"},{default:o(()=>[i(" Tienes "+u(r.estadisticas.vencidos)+" contrato(s) vencido(s) que requieren atención. ",1),s(t(S),{href:r.route("user.mis-contratos.vencidos"),class:"font-medium underline ml-2"},{default:o(()=>[...e[11]||(e[11]=[i(" Ver contratos vencidos ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):N("",!0),r.estadisticas.proximos_vencer>0?(l(),f(t(M),{key:1,class:"border-orange-200 bg-orange-50"},{default:o(()=>[s(t(Z),{class:"h-4 w-4 text-orange-600"}),s(t(P),{class:"text-orange-800"},{default:o(()=>[i(u(r.estadisticas.proximos_vencer)+" contrato(s) vencerán en los próximos 30 días. ",1),s(t(S),{href:r.route("user.mis-contratos.proximos-vencer"),class:"font-medium underline ml-2"},{default:o(()=>[...e[12]||(e[12]=[i(" Ver próximos a vencer ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):N("",!0),s(t(J),{"default-value":C.value,"onUpdate:modelValue":U},{default:o(()=>[s(t(O),{class:"grid w-full grid-cols-5"},{default:o(()=>[s(t(h),{value:"todos"},{default:o(()=>[i(" Todos ("+u(c.value.todos.length)+") ",1)]),_:1}),s(t(h),{value:"activos"},{default:o(()=>[i(" Activos ("+u(c.value.activos.length)+") ",1)]),_:1}),s(t(h),{value:"finalizados"},{default:o(()=>[i(" Finalizados ("+u(c.value.finalizados.length)+") ",1)]),_:1}),s(t(h),{value:"borradores"},{default:o(()=>[i(" Borradores ("+u(c.value.borradores.length)+") ",1)]),_:1}),s(t(h),{value:"cancelados"},{default:o(()=>[i(" Cancelados ("+u(c.value.cancelados.length)+") ",1)]),_:1})]),_:1}),s(t(k),{value:"todos",class:"mt-6"},{default:o(()=>[r.contratos.data.length===0?(l(),d("div",it,[s(t(A),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[13]||(e[13]=n("p",{class:"text-muted-foreground"}," No tienes contratos asignados ",-1))])):(l(),d("div",dt,[(l(!0),d(p,null,v(r.contratos.data,a=>(l(),f(w,{key:a.id,contrato:a,"show-actions":!1,onClick:V=>t(g).visit(r.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),s(t(k),{value:"activos",class:"mt-6"},{default:o(()=>[c.value.activos.length===0?(l(),d("div",nt,[s(t(L),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[14]||(e[14]=n("p",{class:"text-muted-foreground"}," No hay contratos activos ",-1))])):(l(),d("div",ut,[(l(!0),d(p,null,v(c.value.activos,a=>(l(),f(w,{key:a.id,contrato:a,"show-actions":!1,onClick:V=>t(g).visit(r.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),s(t(k),{value:"finalizados",class:"mt-6"},{default:o(()=>[c.value.finalizados.length===0?(l(),d("div",ct,[s(t(L),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[15]||(e[15]=n("p",{class:"text-muted-foreground"}," No hay contratos finalizados ",-1))])):(l(),d("div",mt,[(l(!0),d(p,null,v(c.value.finalizados,a=>(l(),f(w,{key:a.id,contrato:a,"show-actions":!1,onClick:V=>t(g).visit(r.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),s(t(k),{value:"borradores",class:"mt-6"},{default:o(()=>[c.value.borradores.length===0?(l(),d("div",ft,[s(t(A),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[16]||(e[16]=n("p",{class:"text-muted-foreground"}," No hay contratos en borrador ",-1))])):(l(),d("div",pt,[(l(!0),d(p,null,v(c.value.borradores,a=>(l(),f(w,{key:a.id,contrato:a,"show-actions":!1,onClick:V=>t(g).visit(r.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),s(t(k),{value:"cancelados",class:"mt-6"},{default:o(()=>[c.value.cancelados.length===0?(l(),d("div",vt,[s(t(tt),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[17]||(e[17]=n("p",{class:"text-muted-foreground"}," No hay contratos cancelados ",-1))])):(l(),d("div",gt,[(l(!0),d(p,null,v(c.value.cancelados,a=>(l(),f(w,{key:a.id,contrato:a,"show-actions":!1,onClick:V=>t(g).visit(r.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1})]),_:1},8,["default-value"]),r.contratos.links&&r.contratos.links.length>3?(l(),d("div",_t,[n("nav",bt,[(l(!0),d(p,null,v(r.contratos.links,a=>(l(),f(t(S),{key:a.label,href:a.url,class:W(["px-3 py-2 rounded-md text-sm",a.active?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"]),innerHTML:a.label,"preserve-state":"","preserve-scroll":""},null,8,["href","class","innerHTML"]))),128))])])):N("",!0)])]),_:1}))}});export{fs as default};
