import{d as P,k as $,c as R,a as u,o as r,b as s,u as t,m as q,e as a,f as i,j as f,i as _,R as z,g as n,F as g,r as y,t as c,W as b,l as E,n as A}from"./app-BS9XlOI1.js";import{_ as H}from"./UserLayout.vue_vue_type_script_setup_true_lang-AwI-v1g8.js";import{_ as k,c as w,a as K,b as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3Omm2ZH.js";import{_ as W}from"./CardDescription.vue_vue_type_script_setup_true_lang-DqqFwRdU.js";import{c as Y,_ as v}from"./createLucideIcon-CoiVMf3Y.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-B0Lm-MVR.js";import{_ as J,a as O,b as Q,c as X,d as F}from"./SelectValue.vue_vue_type_script_setup_true_lang-JZr5JedR.js";import{_ as V}from"./index-DWRN2ibd.js";import{S as B}from"./search-CgQwyEMU.js";import{C as S}from"./clock-BdP3W7rL.js";import{I as Z}from"./info-DxYYWJ4q.js";import{A as ee}from"./arrow-right-CZjlVdVS.js";import{F as D}from"./file-text-DCiL5M9z.js";import{C as te}from"./circle-check-big-CECKn-82.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BvdzkcsD.js";import"./index-DlfIkzvf.js";import"./floating-ui.vue-2NNx9uEx.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DRMSiv_B.js";import"./VisuallyHidden-CXrzuRgz.js";import"./index-BIGMq5Xk.js";import"./shield-pr9anytA.js";import"./user-YOiQ0oKj.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-YhrPR235.js";import"./Label.vue_vue_type_script_setup_true_lang-COEXgYjN.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cj8uOxdD.js";import"./index-Btkc9Vu7.js";import"./circle-alert-CiNzyy5h.js";import"./map-pin-B_lTWc96.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CvcZAjqG.js";import"./square-check-big-CjkSljYe.js";import"./users-CI0OCXEP.js";import"./index-C_vxUID_.js";import"./check-BZtgD0Hw.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=Y("FilePenIcon",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),ae={class:"p-6"},oe={class:"flex flex-col md:flex-row gap-4"},le={class:"flex-1"},re={class:"relative"},ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"flex items-start justify-between"},de={class:"flex-1"},ce={class:"space-y-3"},ue={key:0,class:"flex items-center gap-2"},me={class:"flex items-center gap-2"},fe={key:1,class:"text-sm text-muted-foreground"},pe={key:2,class:"text-sm text-muted-foreground"},_e={class:"mt-4 pt-4 border-t"},ve={class:"text-muted-foreground text-center max-w-md"},he={key:2,class:"mt-6 flex justify-center gap-2"},Qe=P({__name:"Index",props:{formularios:{},categorias:{},filters:{},canViewPublic:{type:Boolean},canFillPublic:{type:Boolean}},setup(N){const x=N,T=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Formularios",href:"#"}],p=$(x.filters.search||""),d=$(x.filters.categoria||"all"),I=R(()=>x.formularios.data.length>0),h=()=>{b.get(route("user.formularios.index"),{search:p.value||void 0,categoria:d.value==="all"?void 0:d.value},{preserveState:!0,preserveScroll:!0})},L=l=>{d.value=l,h()},C=()=>{p.value="",d.value="all",h()},m=l=>{if(l.usuario_ha_respondido)return{texto:"Completado",color:"success",icon:te};if(l.tiene_borrador)return{texto:"Borrador guardado",color:"warning",icon:se};if(l.fecha_fin){const o=Math.ceil((new Date(l.fecha_fin).getTime()-new Date().getTime())/864e5);if(o<=3&&o>0)return{texto:`Cierra en ${o} días`,color:"destructive",icon:S}}return{texto:"Disponible",color:"default",icon:D}},j=l=>new Date(l).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return(l,o)=>(r(),u(g,null,[s(t(q),{title:"Formularios"}),s(H,{breadcrumbs:T},{default:a(()=>[i("div",ae,[o[7]||(o[7]=i("div",{class:"mb-6"},[i("h1",{class:"text-3xl font-bold"},"Formularios Disponibles"),i("p",{class:"text-muted-foreground"}," Completa los formularios que están disponibles para ti ")],-1)),s(t(k),{class:"mb-6"},{default:a(()=>[s(t(w),{class:"pt-6"},{default:a(()=>[i("div",oe,[i("div",le,[i("div",re,[s(t(B),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s(t(G),{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e),placeholder:"Buscar formularios...",class:"pl-10",onKeyup:z(h,["enter"])},null,8,["modelValue"])])]),s(t(J),{modelValue:d.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>d.value=e),L]},{default:a(()=>[s(t(O),{class:"w-full md:w-[200px]"},{default:a(()=>[s(t(Q),{placeholder:"Todas las categorías"})]),_:1}),s(t(X),null,{default:a(()=>[s(t(F),{value:"all"},{default:a(()=>o[2]||(o[2]=[n("Todas las categorías")])),_:1}),(r(!0),u(g,null,y(l.categorias,e=>(r(),f(t(F),{key:e.id,value:e.id.toString()},{default:a(()=>[n(c(e.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(t(v),{onClick:h,variant:"default"},{default:a(()=>[s(t(B),{class:"mr-2 h-4 w-4"}),o[3]||(o[3]=n(" Buscar "))]),_:1}),p.value||d.value&&d.value!=="all"?(r(),f(t(v),{key:0,onClick:C,variant:"outline"},{default:a(()=>o[4]||(o[4]=[n(" Limpiar ")])),_:1})):_("",!0)])]),_:1})]),_:1}),I.value?(r(),u("div",ie,[(r(!0),u(g,null,y(l.formularios.data,e=>(r(),f(t(k),{key:e.id,class:"hover:shadow-lg transition-shadow cursor-pointer",onClick:M=>t(b).visit(l.route("formularios.show",e.slug))},{default:a(()=>[s(t(K),null,{default:a(()=>[i("div",ne,[i("div",de,[s(t(U),{class:"line-clamp-2"},{default:a(()=>[n(c(e.titulo),1)]),_:2},1024),e.descripcion?(r(),f(t(W),{key:0,class:"mt-2 line-clamp-2"},{default:a(()=>[n(c(e.descripcion),1)]),_:2},1024)):_("",!0)]),(r(),f(E(m(e).icon),{class:A(["h-5 w-5 ml-2",m(e).color==="success"?"text-green-600":m(e).color==="warning"?"text-yellow-600":m(e).color==="destructive"?"text-red-600":"text-muted-foreground"])},null,8,["class"]))])]),_:2},1024),s(t(w),null,{default:a(()=>[i("div",ce,[e.categoria?(r(),u("div",ue,[s(t(V),{variant:"secondary"},{default:a(()=>[n(c(e.categoria.nombre),1)]),_:2},1024)])):_("",!0),i("div",me,[s(t(V),{variant:m(e).color==="success"?"default":m(e).color==="warning"?"secondary":m(e).color==="destructive"?"destructive":"outline"},{default:a(()=>[n(c(m(e).texto),1)]),_:2},1032,["variant"])]),e.fecha_fin?(r(),u("div",fe,[s(t(S),{class:"inline h-3 w-3 mr-1"}),n(" Cierra el "+c(j(e.fecha_fin)),1)])):_("",!0),e.limite_respuestas?(r(),u("div",pe,[s(t(Z),{class:"inline h-3 w-3 mr-1"}),n(" "+c(e.respuestas_count||0)+" / "+c(e.limite_respuestas)+" respuestas ",1)])):_("",!0)]),i("div",_e,[s(t(v),{variant:"ghost",class:"w-full",disabled:e.usuario_ha_respondido},{default:a(()=>[n(c(e.usuario_ha_respondido?"Ya respondido":e.tiene_borrador?"Continuar":"Responder")+" ",1),s(t(ee),{class:"ml-2 h-4 w-4"})]),_:2},1032,["disabled"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(r(),f(t(k),{key:1},{default:a(()=>[s(t(w),{class:"flex flex-col items-center justify-center py-12"},{default:a(()=>[s(t(D),{class:"h-12 w-12 text-muted-foreground mb-4"}),o[6]||(o[6]=i("h3",{class:"text-lg font-semibold mb-2"},"No hay formularios disponibles",-1)),i("p",ve,c(p.value||d.value&&d.value!=="all"?"No se encontraron formularios con los filtros aplicados.":"No hay formularios disponibles en este momento. Vuelve más tarde."),1),p.value||d.value&&d.value!=="all"?(r(),f(t(v),{key:0,onClick:C,class:"mt-4",variant:"outline"},{default:a(()=>o[5]||(o[5]=[n(" Limpiar filtros ")])),_:1})):_("",!0)]),_:1})]),_:1})),l.formularios.last_page>1?(r(),u("div",he,[(r(!0),u(g,null,y(l.formularios.last_page,e=>(r(),f(t(v),{key:e,variant:e===l.formularios.current_page?"default":"outline",size:"sm",onClick:M=>t(b).get(l.route("user.formularios.index"),{...l.filters,page:e},{preserveState:!0})},{default:a(()=>[n(c(e),1)]),_:2},1032,["variant","onClick"]))),128))])):_("",!0)])]),_:1})],64))}});export{Qe as default};
