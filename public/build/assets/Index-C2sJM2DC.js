import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BAX2dDyG.js";import{d as Z,c as ee,r as F,m as I,i as x,e as i,f as t,u as e,p as te,w as a,g as n,j as y,P,h as r,F as S,k as L,b as p,t as m,n as j,q as se,W as h}from"./app-Dt2sukkq.js";import{_ as B,c as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3D16Ztn.js";import{c as ae,_}from"./createLucideIcon-ADYiFz1p.js";import{_ as oe}from"./Input.vue_vue_type_script_setup_true_lang-B3JXaiF3.js";import{_ as C}from"./index-DZUQ23bj.js";import{_ as le}from"./Switch.vue_vue_type_script_setup_true_lang-C5vqZ6z2.js";import{_ as re,a as ie,b as M,c as v,d as ne,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-VWehj9vh.js";import{_ as A,a as D,b as R,c as O,d as w,e as de,C as ue}from"./SelectValue.vue_vue_type_script_setup_true_lang-XTf0O-lR.js";import{t as z}from"./index-CTkeagVR.js";import{P as pe}from"./plus-C-zod1mM.js";import{S as me}from"./search-BkHaPo1l.js";import{S as fe}from"./square-pen-CgZnJT5s.js";import{T as ce}from"./trash-2-Dt0_aFzc.js";import{F as _e}from"./file-B6nSnaQS.js";import{S as ve}from"./square-check-big-DhrFbnJK.js";import{L as ge}from"./list-CoVgyVD2.js";import{F as xe}from"./file-text-CrhgvIVS.js";import{C as ye}from"./calendar-CJYt0g6k.js";import{H as be}from"./hash-MWEq_BBv.js";import{T as Ce}from"./type-BkvukYUP.js";import{S as ke}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Dk5ovgNn.js";import"./index-DYtBqwXi.js";import"./floating-ui.vue-DhUnkJfc.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-TmplCPgM.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BlnKZeFr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-CkT1ue1I.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Ch_KWbnG.js";import"./chevrons-up-down-CLsbi7q1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BcP5joWp.js";import"./tag-euMStffd.js";import"./users-ARKz5o5z.js";import"./target-BlHWusLl.js";import"./shield-Cyievtug.js";import"./vote-D-ho2Upj.js";import"./folder-open-BwpEZUDw.js";import"./send-D6GePUDU.js";import"./briefcase-CdnBkwVO.js";import"./megaphone-BWKT3hAA.js";import"./user-check-Cjdi1Rn1.js";import"./clipboard-list-DeVxPgd5.js";import"./mail-Cjqn3QRK.js";import"./message-square-CtTij58U.js";import"./external-link-GRGCmSzE.js";import"./panel-left-CvMlf3oX.js";import"./check-DzU-qwfx.js";import"./index-C5GM-A1h.js";import"./index-YHYyGAco.js";import"./VisuallyHidden-H3fpmsLx.js";import"./VisuallyHiddenInput-CTh2PJwg.js";import"./nullish-CHIgUVhi.js";import"./x-BpcUsJXn.js";import"./index-C_zthh-d.js";import"./user-Ca0ja34E.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-V01rVzxA.js";import"./Label.vue_vue_type_script_setup_true_lang-DCZhrf2e.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CwNj20AO.js";import"./circle-alert-Bny28mZr.js";import"./map-pin-D1rtVCPc.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ae("RadioIcon",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),Se={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},we={class:"flex items-center justify-between"},ze={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Te={class:"relative"},he={class:"flex items-center gap-1"},Ve={class:"text-sm text-gray-500"},Fe={class:"font-medium"},Pe={key:0,class:"text-xs text-gray-500"},Le={class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},Me={class:"flex flex-wrap gap-1"},Ee={class:"flex justify-end gap-2"},Ne={key:0,class:"flex justify-center gap-2"},qe={class:"text-center text-sm text-gray-500"},Dt=Z({__name:"Index",props:{campos:{},filters:{},tiposCampo:{},tipos:{},entidadesDisponibles:{}},setup(W){const g=W,E=ee(()=>g.tiposCampo||g.tipos||{}),N=E,G=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Campos Personalizados",href:"/admin/campos-personalizados"}],k=F(g.filters.search||""),$=F(g.filters.tipo||""),b=F(g.filters.activo!==void 0?String(g.filters.activo):""),V=()=>{const l={search:k.value,tipo:$.value};b.value!==""&&(l.activo=b.value==="1"),h.get("/admin/campos-personalizados",l,{preserveState:!0,preserveScroll:!0})};let q;I(k,()=>{clearTimeout(q),q=setTimeout(()=>{V()},500)}),I([$,b],()=>{V()});const J=l=>{confirm(`¿Estás seguro de eliminar el campo "${l.nombre}"?

Esto eliminará también todos los valores asociados en los proyectos.`)&&h.delete(`/admin/campos-personalizados/${l.id}`,{preserveScroll:!0,onSuccess:()=>{z.success("Campo personalizado eliminado exitosamente")},onError:()=>{z.error("No se puede eliminar el campo porque tiene valores asociados")}})},K=(l,s)=>{h.patch(`/admin/campos-personalizados/${l.id}/toggle-activo`,{activo:s},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{z.success(`Campo ${s?"activado":"desactivado"} exitosamente`)},onError:()=>{z.error("Error al cambiar el estado del campo")}})},H=(l,s)=>{const o=g.campos.data,u=o.findIndex(d=>d.id===l.id);if(s==="up"&&u>0||s==="down"&&u<o.length-1){const d=s==="up"?u-1:u+1,c=o.map(T=>T.id);[c[u],c[d]]=[c[d],c[u]],h.post("/admin/campos-personalizados/reordenar",{orden:c},{preserveScroll:!0,onSuccess:()=>{z.success("Orden actualizado")}})}},Q=l=>({text:Ce,number:be,date:ye,textarea:xe,select:ge,checkbox:ve,radio:$e,file:_e})[l]||ke,X=l=>({text:"bg-blue-100 text-blue-800",number:"bg-purple-100 text-purple-800",date:"bg-green-100 text-green-800",textarea:"bg-yellow-100 text-yellow-800",select:"bg-orange-100 text-orange-800",checkbox:"bg-pink-100 text-pink-800",radio:"bg-indigo-100 text-indigo-800",file:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800";return(l,s)=>(i(),x(S,null,[t(e(te),{title:"Campos Personalizados"}),t(Y,{breadcrumbs:G},{default:a(()=>[n("div",Se,[n("div",we,[s[5]||(s[5]=n("div",null,[n("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Campos Personalizados "),n("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Define campos adicionales para los proyectos ")],-1)),t(e(P),{href:"/admin/campos-personalizados/create"},{default:a(()=>[t(e(_),null,{default:a(()=>[t(e(pe),{class:"mr-2 h-4 w-4"}),s[4]||(s[4]=r(" Nuevo Campo ",-1))]),_:1})]),_:1})]),t(e(B),null,{default:a(()=>[t(e(U),{class:"p-4"},{default:a(()=>[n("div",ze,[n("div",Te,[t(e(me),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(oe),{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=o=>k.value=o),type:"text",placeholder:"Buscar campos...",class:"pl-10"},null,8,["modelValue"])]),t(e(A),{modelValue:$.value,"onUpdate:modelValue":s[1]||(s[1]=o=>$.value=o)},{default:a(()=>[t(e(D),null,{default:a(()=>[t(e(R),{placeholder:"Todos los tipos"})]),_:1}),t(e(O),null,{default:a(()=>[t(e(w),{value:"all"},{default:a(()=>[...s[6]||(s[6]=[r("Todos los tipos",-1)])]),_:1}),(i(!0),x(S,null,L(e(N),(o,u)=>(i(),p(e(w),{key:u,value:u},{default:a(()=>[r(m(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(A),{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=o=>b.value=o)},{default:a(()=>[t(e(D),null,{default:a(()=>[t(e(R),{placeholder:"Todos los estados"})]),_:1}),t(e(O),null,{default:a(()=>[t(e(w),{value:"all"},{default:a(()=>[...s[7]||(s[7]=[r("Todos los estados",-1)])]),_:1}),t(e(w),{value:"1"},{default:a(()=>[...s[8]||(s[8]=[r("Activos",-1)])]),_:1}),t(e(w),{value:"0"},{default:a(()=>[...s[9]||(s[9]=[r("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(_),{variant:"outline",onClick:s[3]||(s[3]=o=>{k.value="",$.value="",b.value="",V()})},{default:a(()=>[...s[10]||(s[10]=[r(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(B),null,{default:a(()=>[t(e(U),{class:"p-0"},{default:a(()=>[t(e(re),null,{default:a(()=>[t(e(ie),null,{default:a(()=>[t(e(M),null,{default:a(()=>[t(e(v),{class:"w-12"},{default:a(()=>[...s[11]||(s[11]=[r("Orden",-1)])]),_:1}),t(e(v),null,{default:a(()=>[...s[12]||(s[12]=[r("Campo",-1)])]),_:1}),t(e(v),null,{default:a(()=>[...s[13]||(s[13]=[r("Slug",-1)])]),_:1}),t(e(v),null,{default:a(()=>[...s[14]||(s[14]=[r("Tipo",-1)])]),_:1}),t(e(v),null,{default:a(()=>[...s[15]||(s[15]=[r("Aplicar a",-1)])]),_:1}),t(e(v),{class:"text-center"},{default:a(()=>[...s[16]||(s[16]=[r("Requerido",-1)])]),_:1}),t(e(v),{class:"text-center"},{default:a(()=>[...s[17]||(s[17]=[r("Estado",-1)])]),_:1}),t(e(v),{class:"text-right"},{default:a(()=>[...s[18]||(s[18]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(ne),null,{default:a(()=>[(i(!0),x(S,null,L(l.campos.data,(o,u)=>(i(),p(e(M),{key:o.id},{default:a(()=>[t(e(f),null,{default:a(()=>[n("div",he,[t(e(_),{variant:"ghost",size:"sm",disabled:u===0,onClick:d=>H(o,"up")},{default:a(()=>[t(e(de),{class:"h-3 w-3"})]),_:2},1032,["disabled","onClick"]),n("span",Ve,m(o.orden),1),t(e(_),{variant:"ghost",size:"sm",disabled:u===l.campos.data.length-1,onClick:d=>H(o,"down")},{default:a(()=>[t(e(ue),{class:"h-3 w-3"})]),_:2},1032,["disabled","onClick"])])]),_:2},1024),t(e(f),null,{default:a(()=>[n("div",null,[n("p",Fe,m(o.nombre),1),o.descripcion?(i(),x("p",Pe,m(o.descripcion),1)):y("",!0)])]),_:2},1024),t(e(f),null,{default:a(()=>[n("code",Le,m(o.slug),1)]),_:2},1024),t(e(f),null,{default:a(()=>[t(e(C),{class:j([X(o.tipo),"flex items-center gap-1 w-fit"])},{default:a(()=>{var d;return[(i(),p(se(Q(o.tipo)),{class:"h-3 w-3"})),r(" "+m(((d=E.value||e(N))==null?void 0:d[o.tipo])||o.tipo),1)]}),_:2},1032,["class"])]),_:2},1024),t(e(f),null,{default:a(()=>{var d,c,T;return[n("div",Me,[!o.aplicar_para||o.aplicar_para.length===0||o.aplicar_para.includes("proyectos")?(i(),p(e(C),{key:0,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[19]||(s[19]=[r(" Proyectos ",-1)])]),_:1})):y("",!0),(d=o.aplicar_para)!=null&&d.includes("contratos")?(i(),p(e(C),{key:1,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[20]||(s[20]=[r(" Contratos ",-1)])]),_:1})):y("",!0),(c=o.aplicar_para)!=null&&c.includes("hitos")?(i(),p(e(C),{key:2,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[21]||(s[21]=[r(" Hitos ",-1)])]),_:1})):y("",!0),(T=o.aplicar_para)!=null&&T.includes("entregables")?(i(),p(e(C),{key:3,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[22]||(s[22]=[r(" Entregables ",-1)])]),_:1})):y("",!0)])]}),_:2},1024),t(e(f),{class:"text-center"},{default:a(()=>[t(e(C),{class:j(o.es_requerido?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")},{default:a(()=>[r(m(o.es_requerido?"Sí":"No"),1)]),_:2},1032,["class"])]),_:2},1024),t(e(f),{class:"text-center"},{default:a(()=>[t(e(le),{"model-value":o.activo,"onUpdate:modelValue":d=>K(o,d)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),t(e(f),{class:"text-right"},{default:a(()=>[n("div",Ee,[t(e(P),{href:`/admin/campos-personalizados/${o.id}/edit`},{default:a(()=>[t(e(_),{variant:"outline",size:"sm"},{default:a(()=>[t(e(fe),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),t(e(_),{variant:"destructive",size:"sm",onClick:d=>J(o)},{default:a(()=>[t(e(ce),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),l.campos.data.length===0?(i(),p(e(M),{key:0},{default:a(()=>[t(e(f),{colspan:"7",class:"text-center py-8"},{default:a(()=>[...s[23]||(s[23]=[n("p",{class:"text-gray-500"},"No se encontraron campos personalizados",-1)])]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l.campos.last_page>1?(i(),x("div",Ne,[(i(!0),x(S,null,L(l.campos.links,o=>(i(),x(S,{key:o.label},[o.url?(i(),p(e(P),{key:0,href:o.url,"preserve-state":"","preserve-scroll":""},{default:a(()=>[t(e(_),{variant:o.active?"default":"outline",size:"sm",innerHTML:o.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(i(),p(e(_),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:o.label},null,8,["innerHTML"]))],64))),128))])):y("",!0),n("div",qe," Mostrando "+m(l.campos.data.length)+" de "+m(l.campos.total)+" campos ",1)])]),_:1})],64))}});export{Dt as default};
