import{d as N,b as x,w as e,g as i,j as v,e as s,f as t,t as n,m,h as r,i as g,F as k,k as w,v as y,n as E,s as h}from"./app-DMuAIQna.js";import{_ as A}from"./UserLayout.vue_vue_type_script_setup_true_lang-BxIziJ01.js";import{_ as b}from"./createLucideIcon-DVREvg6J.js";import{_ as c,c as f,a as j,b as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-BuU4x3mY.js";import{_ as O}from"./index-ByRNdMTg.js";import{_ as D}from"./Progress.vue_vue_type_script_setup_true_lang-2K8Fv54y.js";import{_ as F,a as T,b as S,c as p,d as q,e as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-BYJZLy9w.js";import{t as z}from"./index-CpDHrFpE.js";import{C as L}from"./calendar-D2WQq3Rt.js";import{S as G}from"./square-pen-SCHpeBDi.js";import{C as H}from"./check-CX6SjPsT.js";import{f as J,e as K}from"./es-BDPlFIsO.js";import{p as Q}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D_47fHXe.js";import"./index-BlEXpuxR.js";import"./floating-ui.vue-B_8ih11B.js";import"./x-BIajvu4a.js";import"./Input.vue_vue_type_script_setup_true_lang-BGVUfrGL.js";import"./index-DhwjMzhI.js";import"./index-iQ0XWSid.js";import"./shield-C0sXgp1j.js";import"./user-B-kt00xt.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-IJBj02SI.js";import"./chevron-right-B7cHhwdw.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Do5CqHgU.js";import"./VisuallyHidden-B9gbRvHT.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-B5RgMbmd.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-BjkfVnrt.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BrvzYmYh.js";import"./circle-alert-DLR_15wS.js";import"./map-pin-D7fd8V0G.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-cf_yvTXL.js";import"./square-check-big-CBvFIhq6.js";import"./file-text-CiWb_rUT.js";import"./users-DC8IvOAs.js";import"./folder-open-sBsr1tf6.js";import"./index-3tyT_Ccr.js";const R={class:"py-6"},U={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},W={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},X={class:"text-2xl font-bold"},Y={class:"text-2xl font-bold text-yellow-600"},Z={class:"text-2xl font-bold text-green-600"},tt={class:"text-2xl font-bold text-red-600"},et={class:"space-y-2"},st={class:"text-sm text-gray-600"},at={class:"flex justify-between"},lt={class:"text-sm"},it={class:"text-gray-500"},ot={class:"flex items-center gap-2"},nt={class:"text-sm"},rt={class:"flex gap-1"},Qt=N({__name:"Index",props:{obligaciones:{},estadisticas:{},obligacionesCriticas:{},canComplete:{type:Boolean}},setup(d){const M=o=>{if(!o)return"Sin fecha";try{return J(Q(o),"dd MMM yyyy",{locale:K})}catch{return o}},P=o=>({pendiente:"secondary",en_progreso:"default",cumplida:"success",vencida:"destructive",cancelada:"warning"})[o]||"secondary",B=o=>{const a=prompt("Ingrese el porcentaje de avance (0-100):",String(o.porcentaje_cumplimiento));a!==null&&h.put(route("miembro.mis-obligaciones.actualizar-progreso",o.id),{porcentaje_cumplimiento:parseInt(a)},{onSuccess:()=>z.success("Progreso actualizado")})},I=o=>{confirm("¿Marcar esta obligación como cumplida?")&&h.post(route("miembro.mis-obligaciones.completar",o.id),{},{onSuccess:()=>z.success("Obligación marcada como cumplida")})};return(o,a)=>(m(),x(A,{title:"Mis Obligaciones"},{header:e(()=>[...a[0]||(a[0]=[i("h2",{class:"text-xl font-semibold"},"Mis Obligaciones",-1)])]),default:e(()=>[i("div",R,[i("div",U,[i("div",W,[s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",X,n(d.estadisticas.total),1),a[1]||(a[1]=i("p",{class:"text-sm text-gray-600"},"Total Asignadas",-1))]),_:1})]),_:1}),s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",Y,n(d.estadisticas.pendientes),1),a[2]||(a[2]=i("p",{class:"text-sm text-gray-600"},"Pendientes",-1))]),_:1})]),_:1}),s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",Z,n(d.estadisticas.cumplidas),1),a[3]||(a[3]=i("p",{class:"text-sm text-gray-600"},"Cumplidas",-1))]),_:1})]),_:1}),s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",tt,n(d.estadisticas.vencidas),1),a[4]||(a[4]=i("p",{class:"text-sm text-gray-600"},"Vencidas",-1))]),_:1})]),_:1})]),d.obligacionesCriticas.length>0?(m(),x(t(c),{key:0,class:"mb-6 border-red-200"},{default:e(()=>[s(t(j),{class:"bg-red-50"},{default:e(()=>[s(t(V),{class:"text-red-800"},{default:e(()=>[...a[5]||(a[5]=[r("⚠️ Obligaciones Críticas",-1)])]),_:1})]),_:1}),s(t(f),{class:"pt-4"},{default:e(()=>[i("div",et,[(m(!0),g(k,null,w(d.obligacionesCriticas,l=>{var u;return m(),g("div",{key:l.id,class:"flex justify-between items-center p-2 bg-red-50 rounded"},[i("div",null,[s(t(y),{href:o.route("miembro.mis-obligaciones.show",l.id),class:"font-medium hover:underline"},{default:e(()=>[r(n(l.titulo),1)]),_:2},1032,["href"]),i("p",st,n((u=l.contrato)==null?void 0:u.nombre),1)]),s(t(O),{variant:"destructive"},{default:e(()=>[r(n(l.dias_restantes!==null&&l.dias_restantes>=0?`${l.dias_restantes} días`:"Vencida"),1)]),_:2},1024)])}),128))])]),_:1})]),_:1})):v("",!0),s(t(c),null,{default:e(()=>[s(t(j),null,{default:e(()=>[i("div",at,[s(t(V),null,{default:e(()=>[...a[6]||(a[6]=[r("Mis Obligaciones",-1)])]),_:1}),s(t(y),{href:o.route("miembro.mis-obligaciones.calendario")},{default:e(()=>[s(t(b),{variant:"outline",size:"sm"},{default:e(()=>[s(t(L),{class:"h-4 w-4 mr-1"}),a[7]||(a[7]=r(" Vista Calendario ",-1))]),_:1})]),_:1},8,["href"])])]),_:1}),s(t(f),null,{default:e(()=>[s(t(F),null,{default:e(()=>[s(t(T),null,{default:e(()=>[s(t(S),null,{default:e(()=>[s(t(p),null,{default:e(()=>[...a[8]||(a[8]=[r("Obligación",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[9]||(a[9]=[r("Contrato/Proyecto",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[10]||(a[10]=[r("Estado",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[11]||(a[11]=[r("Vencimiento",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[12]||(a[12]=[r("Progreso",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[13]||(a[13]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(t(q),null,{default:e(()=>[(m(!0),g(k,null,w(d.obligaciones.data,l=>(m(),x(t(S),{key:l.id},{default:e(()=>[s(t(_),null,{default:e(()=>[s(t(y),{href:o.route("miembro.mis-obligaciones.show",l.id),class:"font-medium hover:underline"},{default:e(()=>[r(n(l.titulo),1)]),_:2},1032,["href"])]),_:2},1024),s(t(_),null,{default:e(()=>{var u,C,$;return[i("div",lt,[i("p",null,n((u=l.contrato)==null?void 0:u.nombre),1),i("p",it,n(($=(C=l.contrato)==null?void 0:C.proyecto)==null?void 0:$.nombre),1)])]}),_:2},1024),s(t(_),null,{default:e(()=>[s(t(O),{variant:P(l.estado)},{default:e(()=>[r(n(l.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),s(t(_),null,{default:e(()=>[i("span",{class:E({"text-red-600":l.esta_vencida})},n(M(l.fecha_vencimiento)),3)]),_:2},1024),s(t(_),null,{default:e(()=>[i("div",ot,[s(t(D),{value:l.porcentaje_cumplimiento,class:"w-16"},null,8,["value"]),i("span",nt,n(l.porcentaje_cumplimiento)+"%",1)])]),_:2},1024),s(t(_),null,{default:e(()=>[i("div",rt,[l.estado!=="cumplida"&&d.canComplete?(m(),x(t(b),{key:0,size:"sm",variant:"ghost",onClick:u=>B(l)},{default:e(()=>[s(t(G),{class:"h-4 w-4"})]),_:1},8,["onClick"])):v("",!0),l.estado!=="cumplida"&&d.canComplete?(m(),x(t(b),{key:1,size:"sm",variant:"ghost",onClick:u=>I(l)},{default:e(()=>[s(t(H),{class:"h-4 w-4"})]),_:1},8,["onClick"])):v("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1}))}});export{Qt as default};
