import{c as N,_ as H,a as me,b as fe}from"./CardTitle.vue_vue_type_script_setup_true_lang-DwQGgR-i.js";import{_ as he}from"./CardFooter.vue_vue_type_script_setup_true_lang-BaGu-eBc.js";import{c as de,_ as g}from"./createLucideIcon-I1BaLUp8.js";import{_ as D}from"./index-Djk0n9d2.js";import{_ as ve}from"./Progress.vue_vue_type_script_setup_true_lang-BZ1bdrKa.js";import{_ as ge,b as xe}from"./index-BCNCE9eK.js";import{_ as pe,a as ye}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Co-SHXYC.js";import{_ as ke,a as be,b as Ce,c as we,d as $e,e as _e,f as Ee,g as De}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BLsYZM51.js";import{_ as Me}from"./StatusChangeModal.vue_vue_type_script_setup_true_lang-D1_4MeVZ.js";import{C as ae}from"./circle-alert-DqdhPVID.js";import{C as V}from"./clock-DZR65FQf.js";import{C as A}from"./circle-check-big-kYXZ969j.js";import{F as ze}from"./file-text-w6e7k9Cu.js";import{C as le}from"./chevron-right-BpVk5ZHm.js";import{C as Q,e as je}from"./SelectValue.vue_vue_type_script_setup_true_lang-Brl8Pxle.js";import{C as ne}from"./calendar-BA09vsNT.js";import{U as J}from"./user-CwMJLfNw.js";import{U as Be}from"./users-CoAr_cTZ.js";import{S as oe}from"./square-pen-BMc1oxZr.js";import{T as q}from"./trash-2-D72TYpus.js";import{d as re,r as E,c as F,i as m,j as r,e as s,g as n,h as f,f as e,t as u,F as U,k as S,w as o,b as h,m as a,n as y,x as Pe,y as Ve}from"./app-CS8sR3Ia.js";import{f as W,e as X}from"./es-BDPlFIsO.js";import{C as Te}from"./calendar-days-DLDNZ7zH.js";import{E as Ue}from"./eye-BA_ANM1P.js";import{P as Se}from"./pen-DtKYrpuw.js";import{P as K}from"./plus-DaX_ufwD.js";import{C as Ie}from"./copy-CoLj3xIY.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=de("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=de("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Ne={class:"space-y-6"},He={key:0,class:"space-y-6"},qe={key:0},Fe={class:"font-semibold mb-3 flex items-center gap-2"},Oe={class:"space-y-2"},Re={class:"flex items-start justify-between"},Ge={class:"flex-1"},Je={class:"flex items-center gap-2 mb-2"},Ke={class:"font-medium"},Qe={key:0,class:"ml-8 space-y-3"},We={key:0,class:"text-sm text-muted-foreground"},Xe={class:"flex flex-wrap gap-4 text-sm"},Ye={class:"flex items-center gap-1 text-muted-foreground"},Ze={key:0,class:"flex items-center gap-1 text-muted-foreground"},et={key:1,class:"flex items-center gap-2"},tt={class:"flex gap-1"},st={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},at={key:1},lt={class:"font-semibold mb-3 flex items-center gap-2"},nt={class:"space-y-2"},ot={class:"flex items-start justify-between"},it={class:"flex-1"},dt={class:"flex items-center gap-2 mb-2"},rt={class:"font-medium"},ct={key:0,class:"ml-8 space-y-3"},ut={key:0,class:"text-sm text-muted-foreground"},mt={class:"flex flex-wrap gap-4 text-sm"},ft={class:"flex items-center gap-1 text-muted-foreground"},ht={key:0,class:"flex items-center gap-1 text-muted-foreground"},vt={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},gt={key:2},xt={class:"font-semibold mb-3 flex items-center gap-2"},pt={class:"space-y-2"},yt={class:"flex items-start justify-between"},kt={class:"flex-1"},bt={class:"flex items-center gap-2 mb-2"},Ct={class:"font-medium line-through text-muted-foreground"},wt={class:"ml-7 space-y-1 text-sm text-muted-foreground"},$t={key:0,class:"flex items-center gap-1"},_t={key:1,class:"flex items-center gap-1"},Et={key:2,class:"italic mt-2"},Dt={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},Mt={key:3,class:"text-center py-8"},zt=re({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(t,{emit:O}){const k=t,$=O;E([]);const b=E([]),P=E(!1),M=E(null),z=E(!1),_=E(null),j=E("pendiente"),R=E(!1),C=F(()=>({pendientes:k.entregables.filter(c=>c.estado==="pendiente"),en_progreso:k.entregables.filter(c=>c.estado==="en_progreso"),completados:k.entregables.filter(c=>c.estado==="completado"),cancelados:k.entregables.filter(c=>c.estado==="cancelado")})),I=c=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-800",v=c=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-600",d=c=>c?W(new Date(c),"dd MMM yyyy",{locale:X}):"Sin fecha",x=c=>c?W(new Date(c),"dd MMM yyyy 'a las' HH:mm",{locale:X}):"-",p=c=>{if(!c)return null;const i=Math.ceil((new Date(c).getTime()-new Date().getTime())/(1e3*60*60*24));return i<0?`Vencido hace ${Math.abs(i)} días`:i===0?"Vence hoy":i===1?"Vence mañana":`${i} días`},T=c=>{const i=b.value.indexOf(c);i===-1?b.value.push(c):b.value.splice(i,1)},L=c=>b.value.includes(c),Y=c=>{$("edit",c)},G=c=>{M.value=c,P.value=!0},ce=()=>{M.value&&$("delete",M.value),P.value=!1,M.value=null},Z=c=>{_.value=c,j.value="completado",z.value=!0},ee=(c,i)=>{_.value=c,j.value=i,z.value=!0},ue=c=>{_.value&&(j.value==="completado"?$("complete",_.value,c):$("update-status",_.value,j.value,c),z.value=!1,_.value=null)};return(c,i)=>{var te,se;return a(),m("div",Ne,[t.viewMode==="list"?(a(),m("div",He,[C.value.pendientes.length>0?(a(),m("div",qe,[n("h3",Fe,[s(e(ae),{class:"h-5 w-5 text-yellow-600"}),f(" Pendientes ("+u(C.value.pendientes.length)+") ",1)]),n("div",Oe,[(a(!0),m(U,null,S(C.value.pendientes,l=>(a(),h(e(H),{key:l.id},{default:o(()=>[s(e(N),{class:"p-4"},{default:o(()=>{var B;return[n("div",Re,[n("div",Ge,[n("div",Je,[s(e(g),{onClick:w=>T(l.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:o(()=>[L(l.id)?(a(),h(e(Q),{key:1,class:"h-4 w-4"})):(a(),h(e(le),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),n("h4",Ke,u(l.nombre),1),s(e(D),{class:y(v(l.prioridad)),variant:"outline"},{default:o(()=>[f(u(l.prioridad),1)]),_:2},1032,["class"]),s(e(D),{class:y(I(l.estado))},{default:o(()=>[f(u(l.estado),1)]),_:2},1032,["class"])]),L(l.id)?(a(),m("div",Qe,[l.descripcion?(a(),m("p",We,u(l.descripcion),1)):r("",!0),n("div",Xe,[n("div",Ye,[s(e(ne),{class:"h-4 w-4"}),n("span",null,u(d(l.fecha_inicio))+" - "+u(d(l.fecha_fin)),1)]),l.responsable?(a(),m("div",Ze,[s(e(J),{class:"h-4 w-4"}),n("span",null,u(l.responsable.name),1)])):r("",!0),p(l.fecha_fin)?(a(),m("div",{key:1,class:y(["flex items-center gap-1",{"text-red-600":(B=p(l.fecha_fin))==null?void 0:B.includes("Vencido")}])},[s(e(V),{class:"h-4 w-4"}),n("span",null,u(p(l.fecha_fin)),1)],2)):r("",!0)]),l.usuarios&&l.usuarios.length>0?(a(),m("div",et,[s(e(Be),{class:"h-4 w-4 text-muted-foreground"}),n("div",tt,[(a(!0),m(U,null,S(l.usuarios,w=>(a(),h(e(D),{key:w.id,variant:"secondary"},{default:o(()=>[f(u(w.name),1)]),_:2},1024))),128))])])):r("",!0)])):r("",!0)])]),t.canEdit||t.canDelete||t.canComplete?(a(),m("div",st,[t.canComplete?(a(),h(e(g),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:w=>Z(l)},{default:o(()=>[s(e(A),{class:"h-3 w-3 mr-1"}),i[2]||(i[2]=f(" Completar ",-1))]),_:1},8,["onClick"])):r("",!0),t.canEdit?(a(),h(e(g),{key:1,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:w=>ee(l,"en_progreso")},{default:o(()=>[s(e(V),{class:"h-3 w-3 mr-1"}),i[3]||(i[3]=f(" En progreso ",-1))]),_:1},8,["onClick"])):r("",!0),t.canEdit?(a(),h(e(g),{key:2,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:w=>Y(l)},{default:o(()=>[s(e(oe),{class:"h-3 w-3 mr-1"}),i[4]||(i[4]=f(" Editar ",-1))]),_:1},8,["onClick"])):r("",!0),t.canDelete?(a(),h(e(g),{key:3,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:w=>G(l)},{default:o(()=>[s(e(q),{class:"h-3 w-3 mr-1"}),i[5]||(i[5]=f(" Eliminar ",-1))]),_:1},8,["onClick"])):r("",!0)])):r("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):r("",!0),C.value.en_progreso.length>0?(a(),m("div",at,[n("h3",lt,[s(e(V),{class:"h-5 w-5 text-blue-600"}),f(" En Progreso ("+u(C.value.en_progreso.length)+") ",1)]),n("div",nt,[(a(!0),m(U,null,S(C.value.en_progreso,l=>(a(),h(e(H),{key:l.id,class:"border-l-4 border-l-blue-500"},{default:o(()=>[s(e(N),{class:"p-4"},{default:o(()=>{var B;return[n("div",ot,[n("div",it,[n("div",dt,[s(e(g),{onClick:w=>T(l.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:o(()=>[L(l.id)?(a(),h(e(Q),{key:1,class:"h-4 w-4"})):(a(),h(e(le),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),n("h4",rt,u(l.nombre),1),s(e(D),{class:y(v(l.prioridad)),variant:"outline"},{default:o(()=>[f(u(l.prioridad),1)]),_:2},1032,["class"]),s(e(D),{class:"bg-blue-100 text-blue-800"},{default:o(()=>[...i[6]||(i[6]=[f(" En Progreso ",-1)])]),_:1})]),L(l.id)?(a(),m("div",ct,[l.descripcion?(a(),m("p",ut,u(l.descripcion),1)):r("",!0),n("div",mt,[n("div",ft,[s(e(ne),{class:"h-4 w-4"}),n("span",null,"Fecha límite: "+u(d(l.fecha_fin)),1)]),l.responsable?(a(),m("div",ht,[s(e(J),{class:"h-4 w-4"}),n("span",null,u(l.responsable.name),1)])):r("",!0),p(l.fecha_fin)?(a(),m("div",{key:1,class:y(["flex items-center gap-1",{"text-red-600":(B=p(l.fecha_fin))==null?void 0:B.includes("Vencido")}])},[s(e(V),{class:"h-4 w-4"}),n("span",null,u(p(l.fecha_fin)),1)],2)):r("",!0)])])):r("",!0)])]),t.canEdit||t.canDelete||t.canComplete?(a(),m("div",vt,[t.canComplete?(a(),h(e(g),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:w=>Z(l)},{default:o(()=>[s(e(A),{class:"h-3 w-3 mr-1"}),i[7]||(i[7]=f(" Completar ",-1))]),_:1},8,["onClick"])):r("",!0),t.canEdit?(a(),h(e(g),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:w=>Y(l)},{default:o(()=>[s(e(oe),{class:"h-3 w-3 mr-1"}),i[8]||(i[8]=f(" Editar ",-1))]),_:1},8,["onClick"])):r("",!0),t.canDelete?(a(),h(e(g),{key:2,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:w=>G(l)},{default:o(()=>[s(e(q),{class:"h-3 w-3 mr-1"}),i[9]||(i[9]=f(" Eliminar ",-1))]),_:1},8,["onClick"])):r("",!0)])):r("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):r("",!0),C.value.completados.length>0?(a(),m("div",gt,[n("h3",xt,[s(e(A),{class:"h-5 w-5 text-green-600"}),f(" Completados ("+u(C.value.completados.length)+") ",1)]),n("div",pt,[(a(!0),m(U,null,S(C.value.completados,l=>(a(),h(e(H),{key:l.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:o(()=>[s(e(N),{class:"p-4"},{default:o(()=>[n("div",yt,[n("div",kt,[n("div",bt,[s(e(A),{class:"h-5 w-5 text-green-600"}),n("h4",Ct,u(l.nombre),1),s(e(D),{class:"bg-green-100 text-green-800"},{default:o(()=>[...i[10]||(i[10]=[f(" Completado ",-1)])]),_:1})]),n("div",wt,[l.completado_at?(a(),m("div",$t,[s(e(V),{class:"h-3 w-3"}),n("span",null,"Completado: "+u(x(l.completado_at)),1)])):r("",!0),l.completado_por_usuario?(a(),m("div",_t,[s(e(J),{class:"h-3 w-3"}),n("span",null,"Por: "+u(l.completado_por_usuario.name),1)])):r("",!0),l.observaciones_estado?(a(),m("p",Et,' "'+u(l.observaciones_estado)+'" ',1)):r("",!0)])])]),t.canEdit||t.canDelete?(a(),m("div",Dt,[t.canEdit?(a(),h(e(g),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:B=>ee(l,"pendiente")},{default:o(()=>[s(e(ae),{class:"h-3 w-3 mr-1"}),i[11]||(i[11]=f(" Reabrir ",-1))]),_:1},8,["onClick"])):r("",!0),t.canDelete?(a(),h(e(g),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:B=>G(l)},{default:o(()=>[s(e(q),{class:"h-3 w-3 mr-1"}),i[12]||(i[12]=f(" Eliminar ",-1))]),_:1},8,["onClick"])):r("",!0)])):r("",!0)]),_:2},1024)]),_:2},1024))),128))])])):r("",!0),t.entregables.length===0?(a(),m("div",Mt,[s(e(ze),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i[13]||(i[13]=n("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):r("",!0)])):r("",!0),s(e(ke),{open:P.value,"onUpdate:open":i[0]||(i[0]=l=>P.value=l)},{default:o(()=>[s(e(be),null,{default:o(()=>[s(e(Ce),null,{default:o(()=>[s(e(we),null,{default:o(()=>[...i[14]||(i[14]=[f("¿Estás seguro?",-1)])]),_:1}),s(e($e),null,{default:o(()=>{var l;return[f(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+u((l=M.value)==null?void 0:l.nombre)+'". ',1)]}),_:1})]),_:1}),s(e(_e),null,{default:o(()=>[s(e(Ee),null,{default:o(()=>[...i[15]||(i[15]=[f("Cancelar",-1)])]),_:1}),s(e(De),{onClick:ce},{default:o(()=>[...i[16]||(i[16]=[f(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),s(Me,{open:z.value,"onUpdate:open":i[1]||(i[1]=l=>z.value=l),"entregable-nombre":(te=_.value)==null?void 0:te.nombre,"estado-actual":(se=_.value)==null?void 0:se.estado,"nuevo-estado":j.value,loading:R.value,onConfirm:ue},null,8,["open","entregable-nombre","estado-actual","nuevo-estado","loading"])])}}}),jt={class:"flex items-center justify-between gap-2"},Bt={class:"flex items-center gap-2 min-w-0 flex-1"},Pt={key:0,class:"text-sm text-muted-foreground line-clamp-2"},Vt={class:"flex items-center justify-between gap-4 text-xs text-muted-foreground"},Tt={class:"flex items-center gap-3"},Ut={key:0,class:"flex items-center gap-1"},St={key:1,class:"text-gray-300"},It={key:2,class:"flex items-center gap-1"},Lt={key:0,class:"flex items-center gap-1.5"},At={class:"truncate max-w-[100px]"},Nt={class:"flex justify-between items-center text-xs"},Ht={class:"font-medium"},qt={class:"flex items-center justify-between text-xs text-muted-foreground"},Ft={key:0,class:"flex items-center gap-1"},Ot={key:1,class:"flex flex-wrap gap-1"},Rt={class:"w-full flex items-center justify-between gap-2"},Gt={class:"flex items-center gap-1"},Jt={class:"flex items-center gap-1"},Kt={class:"border-t px-4 py-4 bg-muted/30"},Qt={key:0,class:"mb-4 flex justify-end"},Wt={key:2,class:"text-center py-4 text-muted-foreground text-sm"},Xt=re({__name:"HitoCard",props:{hito:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},expandEntregablesInline:{type:Boolean,default:!1},canCompleteEntregables:{type:Boolean,default:!1},canEditEntregables:{type:Boolean,default:!1}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables","complete-entregable","update-entregable-status","edit-entregable"],setup(t,{emit:O}){const k=t,$=E(!1),b=O,P=()=>{k.expandEntregablesInline?$.value=!$.value:b("view-entregables",k.hito)},M=(v,d)=>{b("complete-entregable",v,d)},z=(v,d,x)=>{b("update-entregable-status",v,d,x)},_=v=>{b("edit-entregable",v,k.hito)},j=F(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[k.hito.estado]||k.hito.estado),R=F(()=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[k.hito.estado]||"bg-gray-400"),C=F(()=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[k.hito.estado]||"secondary"),I=v=>{if(!v)return"";try{const d=typeof v=="string"?new Date(v):v;return W(d,"dd MMM yyyy",{locale:X})}catch{return""}};return(v,d)=>(a(),h(e(H),{class:"hover:shadow-md transition-shadow duration-200"},{default:o(()=>[s(e(me),{class:y(t.compact?"pb-2 pt-3 px-4":"pb-3")},{default:o(()=>[n("div",jt,[n("div",Bt,[n("div",{class:y([R.value,"w-2 h-2 rounded-full flex-shrink-0"])},null,2),s(e(fe),{class:y([t.compact?"text-base":"text-lg","font-medium truncate"])},{default:o(()=>[f(u(t.hito.nombre),1)]),_:1},8,["class"])]),s(e(D),{variant:C.value,class:y(t.compact?"text-xs px-2 py-0.5":"text-xs")},{default:o(()=>[f(u(t.hito.estado_label||j.value),1)]),_:1},8,["variant","class"])])]),_:1},8,["class"]),s(e(N),{class:y(t.compact?"pb-2 px-4 space-y-2":"pb-3 space-y-3")},{default:o(()=>{var x;return[t.hito.descripcion&&!t.compact?(a(),m("p",Pt,u(t.hito.descripcion),1)):r("",!0),n("div",Vt,[n("div",Tt,[t.hito.fecha_inicio?(a(),m("div",Ut,[s(e(Te),{class:"h-3 w-3"}),n("span",null,u(I(t.hito.fecha_inicio)),1)])):r("",!0),t.hito.fecha_inicio&&t.hito.fecha_fin?(a(),m("span",St,"→")):r("",!0),t.hito.fecha_fin?(a(),m("div",It,[s(e(Ae),{class:"h-3 w-3"}),n("span",null,u(I(t.hito.fecha_fin)),1)])):r("",!0)]),t.hito.responsable?(a(),m("div",Lt,[s(e(ge),{class:"h-5 w-5"},{default:o(()=>[s(e(xe),{class:"text-[10px]"},{default:o(()=>{var p,T;return[f(u((T=(p=t.hito.responsable.name)==null?void 0:p.charAt(0))==null?void 0:T.toUpperCase()),1)]}),_:1})]),_:1}),n("span",At,u(t.hito.responsable.name),1)])):r("",!0)]),n("div",{class:y(t.compact?"space-y-1":"space-y-2")},[n("div",Nt,[d[8]||(d[8]=n("span",{class:"text-muted-foreground"},"Progreso",-1)),n("span",Ht,u(t.hito.porcentaje_completado)+"%",1)]),s(e(ve),{"model-value":t.hito.porcentaje_completado,class:y(t.compact?"h-1.5":"h-2")},null,8,["model-value","class"])],2),n("div",qt,[n("span",null,u(t.hito.entregables_completados||0)+"/"+u(t.hito.total_entregables||((x=t.hito.entregables)==null?void 0:x.length)||0)+" entregables",1),t.hito.dias_restantes!==null&&t.hito.dias_restantes!==void 0?(a(),m("div",Ft,[s(e(V),{class:"h-3 w-3"}),n("span",{class:y({"text-red-500 font-medium":t.hito.dias_restantes<0,"text-orange-500":t.hito.dias_restantes>=0&&t.hito.dias_restantes<=7})},u(t.hito.dias_restantes<0?`Vencido hace ${Math.abs(t.hito.dias_restantes)} días`:`${t.hito.dias_restantes} días`),3)])):r("",!0)]),!t.compact&&t.hito.etiquetas&&t.hito.etiquetas.length>0?(a(),m("div",Ot,[(a(!0),m(U,null,S(t.hito.etiquetas.slice(0,3),p=>(a(),h(e(D),{key:p.id,variant:"outline",class:"text-xs",style:Ve({borderColor:p.color||"#94a3b8",color:p.color||"#64748b"})},{default:o(()=>[f(u(p.nombre),1)]),_:2},1032,["style"]))),128)),t.hito.etiquetas.length>3?(a(),h(e(D),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>[f(" +"+u(t.hito.etiquetas.length-3),1)]),_:1})):r("",!0)])):r("",!0)]}),_:1},8,["class"]),t.showActions?(a(),h(e(he),{key:0,class:y(t.compact?"pt-2 pb-3 px-4 border-t":"pt-3 border-t")},{default:o(()=>[n("div",Rt,[n("div",Gt,[t.expandEntregablesInline?r("",!0):(a(),h(e(g),{key:0,variant:"ghost",size:"sm",onClick:d[0]||(d[0]=x=>v.$emit("view",t.hito)),class:"h-8 px-2"},{default:o(()=>[s(e(Ue),{class:"h-4 w-4"}),d[9]||(d[9]=n("span",{class:"ml-1.5"},"Ver detalles",-1))]),_:1})),s(e(g),{variant:"ghost",size:"sm",onClick:P,class:"h-8 px-2"},{default:o(()=>[s(e(ie),{class:"h-4 w-4"}),d[10]||(d[10]=n("span",{class:"ml-1.5"},"Entregables",-1)),t.expandEntregablesInline?(a(),h(Pe($.value?e(je):e(Q)),{key:0,class:"h-3 w-3 ml-1"})):r("",!0)]),_:1})]),n("div",Jt,[t.canEdit?(a(),h(e(g),{key:0,variant:"ghost",size:"sm",onClick:d[1]||(d[1]=x=>v.$emit("edit",t.hito)),class:"h-8 px-2"},{default:o(()=>[s(e(Se),{class:"h-4 w-4"}),d[11]||(d[11]=n("span",{class:"ml-1.5"},"Editar",-1))]),_:1})):r("",!0),t.canManageDeliverables?(a(),h(e(g),{key:1,variant:"ghost",size:"sm",onClick:d[2]||(d[2]=x=>v.$emit("add-entregable",t.hito)),class:"h-8 px-2"},{default:o(()=>[s(e(K),{class:"h-4 w-4"}),d[12]||(d[12]=n("span",{class:"ml-1.5"},"Añadir",-1))]),_:1})):r("",!0),s(e(g),{variant:"ghost",size:"sm",onClick:d[3]||(d[3]=x=>v.$emit("duplicate",t.hito)),class:"h-8 px-2"},{default:o(()=>[s(e(Ie),{class:"h-4 w-4"}),d[13]||(d[13]=n("span",{class:"ml-1.5"},"Duplicar",-1))]),_:1}),t.canDelete?(a(),h(e(g),{key:2,variant:"ghost",size:"sm",onClick:d[4]||(d[4]=x=>v.$emit("delete",t.hito)),class:"h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50"},{default:o(()=>[s(e(q),{class:"h-4 w-4"}),d[14]||(d[14]=n("span",{class:"ml-1.5"},"Eliminar",-1))]),_:1})):r("",!0)])])]),_:1},8,["class"])):r("",!0),t.expandEntregablesInline?(a(),h(e(pe),{key:1,open:$.value,"onUpdate:open":d[7]||(d[7]=x=>$.value=x)},{default:o(()=>[s(e(ye),null,{default:o(()=>[n("div",Kt,[t.canManageDeliverables?(a(),m("div",Qt,[s(e(g),{variant:"outline",size:"sm",onClick:d[5]||(d[5]=x=>b("add-entregable",t.hito))},{default:o(()=>[s(e(K),{class:"h-4 w-4 mr-1"}),d[15]||(d[15]=f(" Añadir Entregable ",-1))]),_:1})])):r("",!0),t.hito.entregables&&t.hito.entregables.length>0?(a(),h(zt,{key:1,entregables:t.hito.entregables,"can-edit":t.canEditEntregables,"can-delete":!1,"can-complete":t.canCompleteEntregables,"view-mode":"list",onComplete:M,onUpdateStatus:z,onEdit:_},null,8,["entregables","can-edit","can-complete"])):(a(),m("div",Wt,[s(e(ie),{class:"h-8 w-8 mx-auto mb-2 opacity-50"}),d[17]||(d[17]=n("p",null,"No hay entregables asignados a este hito",-1)),t.canManageDeliverables?(a(),h(e(g),{key:0,variant:"outline",size:"sm",class:"mt-3",onClick:d[6]||(d[6]=x=>b("add-entregable",t.hito))},{default:o(()=>[s(e(K),{class:"h-4 w-4 mr-1"}),d[16]||(d[16]=f(" Crear primer entregable ",-1))]),_:1})):r("",!0)]))])]),_:1})]),_:1},8,["open"])):r("",!0)]),_:1}))}}),Es=Le(Xt,[["__scopeId","data-v-f0d9cf19"]]);export{Es as H,ie as L};
