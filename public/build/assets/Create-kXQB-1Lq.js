import{d as Ve,r as Q,c as z,p as Ce,i as _,e as a,g as s,b as y,j as x,w as l,f as e,h as n,t as c,n as k,F as O,k as R,x as ve,m,u as De,q as Ee,l as Fe,s as Pe}from"./app-mFjNR0uy.js";import{_ as U}from"./createLucideIcon-DV63zE4q.js";import{a as C,b as S,c as h,_ as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-hSJ_OoAd.js";import{_ as F}from"./CardDescription.vue_vue_type_script_setup_true_lang--1nrBezq.js";import{_ as P}from"./Input.vue_vue_type_script_setup_true_lang-CNEz7wjh.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-Ptqk43pC.js";import{_ as Ue}from"./Textarea.vue_vue_type_script_setup_true_lang-DUFQzli-.js";import{_ as xe,a as be,b as ke,c as we,d as ye}from"./SelectValue.vue_vue_type_script_setup_true_lang-6O6NwUTg.js";import{_ as q,a as N}from"./index-BEVjO-xC.js";import{_ as Se,a as K}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-CZAGKb1i.js";import{_ as Me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BY7lKvDI.js";import{_ as he}from"./index-DqYseeyG.js";import{M as H}from"./map-pin-r6PRlCcc.js";import{S as J}from"./shield-CB0p3Wgf.js";import{F as X}from"./filter-COSfdjk5.js";import{C as $e}from"./calendar-Cm20HlMs.js";import{S as je}from"./search-D8t0C8-4.js";import{C as Te}from"./circle-check-Ba_X3ZQE.js";import{U as Y}from"./users-CiqWown6.js";import{I as Z}from"./info-Dsjlkl9c.js";import{C as ze}from"./circle-alert-CmAp537w.js";import{t as E}from"./index-CaeQmIhS.js";import{A as Le}from"./arrow-left-CMQ9Lije.js";import{S as qe}from"./save-0aYg0_LZ.js";import{M as Ne}from"./mail-CPdjIYoP.js";import{M as We}from"./message-square-DfetztH6.js";import{S as Be}from"./send-Dg9CFN7Q.js";import"./index--pHTbmQT.js";import"./VisuallyHidden-COJ7Fb0c.js";import"./check-DqR1QvvK.js";import"./floating-ui.vue-BEpYSMep.js";import"./RovingFocusItem-87i-7BW-.js";import"./utils-z5ZiaV82.js";import"./VisuallyHiddenInput-BP158PRv.js";import"./circle-BS06R25i.js";import"./useFlashMessages-BVRUDuxg.js";import"./index-BMdvpPIB.js";import"./x-BTsnVFB2.js";import"./index-CV2uV2r8.js";import"./user-D53RqOVT.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-VzFRDKII.js";import"./chevron-right-CIWmfxEc.js";import"./house-CxaPguce.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bxfkh_IO.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-n7r7D0yy.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BgntieAH.js";import"./chevrons-up-down-DH491GTa.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DZT8-SqG.js";import"./target-Bnze_1sc.js";import"./vote-DzWdcEHv.js";import"./folder-open-sxcDvQaM.js";import"./file-text-DBZ_xMXZ.js";import"./briefcase-DuDCvRc2.js";import"./megaphone-CXthdG0w.js";import"./user-check-DEMk8N5M.js";import"./clipboard-list-DBZjorI_.js";import"./external-link-DNr1QS6y.js";import"./panel-left-CBoIG6Cn.js";import"./index-ByD7XnCM.js";const Ie={class:"space-y-4"},Ge={class:"flex justify-between items-center"},Oe={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},Re={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-2"},Qe={class:"flex items-center gap-2"},He={class:"flex items-center gap-2"},Je={class:"flex flex-col md:flex-row gap-4"},Xe={class:"flex-1"},Ye={class:"relative"},Ze={class:"flex gap-2"},ea={class:"space-y-2 max-h-96 overflow-y-auto p-2"},aa={class:"flex items-start justify-between"},ta={class:"flex-1"},la={class:"flex items-center gap-2"},sa={class:"font-medium"},oa={key:0,class:"text-sm text-muted-foreground mt-1"},ia={class:"text-right"},na={class:"text-2xl font-bold"},ra={key:0,class:"text-center py-8 text-muted-foreground"},da={class:"space-y-3"},ua={class:"font-medium flex items-center gap-2"},ma={key:0,class:"text-sm text-muted-foreground mt-1"},pa={class:"flex items-center justify-between p-3 bg-muted rounded-md"},ca={class:"text-2xl font-bold"},fa=Ve({__name:"SegmentSelector",props:{modelValue:{default:null},segments:{},required:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(V,{emit:p}){const b=V,W=p,o=Q(b.modelValue),A=Q(""),g=Q("all"),w=z(()=>b.segments.find(d=>d.id===o.value)||null),B=z(()=>{let d=b.segments;if(A.value){const i=A.value.toLowerCase();d=d.filter(u=>{var L;return u.nombre.toLowerCase().includes(i)||((L=u.descripcion)==null?void 0:L.toLowerCase().includes(i))})}return g.value!=="all"&&(d=d.filter(i=>i.tipo===g.value)),d}),D=z(()=>{const d={total:b.segments.length,geografico:0,rol:0,personalizado:0,dinamico:0,totalUsuarios:0};return b.segments.forEach(i=>{d[i.tipo]++,d.totalUsuarios+=i.count||0}),d}),I=d=>{o.value=d;const i=b.segments.find(u=>u.id===d)||null;W("update:modelValue",d),W("change",i)},M=d=>({geografico:H,rol:J,personalizado:X,dinamico:$e})[d]||Y,j=d=>({geografico:"text-blue-600",rol:"text-purple-600",personalizado:"text-green-600",dinamico:"text-orange-600"})[d]||"text-gray-600",G=d=>({geografico:"Geográfico",rol:"Por Rol",personalizado:"Personalizado",dinamico:"Dinámico"})[d]||d,T=d=>d?d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(1)}K`:d.toLocaleString():"0";return Ce(()=>b.modelValue,d=>{o.value=d}),(d,i)=>(m(),_("div",Ie,[a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[s("div",Ge,[a(e(S),{class:"text-base"},{default:l(()=>[...i[6]||(i[6]=[n("Seleccionar Segmento",-1)])]),_:1}),a(e(he),{variant:"outline"},{default:l(()=>[n(c(D.value.total)+" segmentos disponibles ",1)]),_:1})])]),_:1}),a(e(h),null,{default:l(()=>[s("div",Oe,[s("div",Re,[a(e(H),{class:"w-4 h-4 text-blue-600"}),s("span",null,c(D.value.geografico)+" Geográficos",1)]),s("div",Ke,[a(e(J),{class:"w-4 h-4 text-purple-600"}),s("span",null,c(D.value.rol)+" Por Rol",1)]),s("div",Qe,[a(e(X),{class:"w-4 h-4 text-green-600"}),s("span",null,c(D.value.personalizado)+" Personalizados",1)]),s("div",He,[a(e($e),{class:"w-4 h-4 text-orange-600"}),s("span",null,c(D.value.dinamico)+" Dinámicos",1)])])]),_:1})]),_:1}),s("div",Je,[s("div",Xe,[s("div",Ye,[a(e(je),{class:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a(e(P),{modelValue:A.value,"onUpdate:modelValue":i[0]||(i[0]=u=>A.value=u),placeholder:"Buscar segmento...",class:"pl-8"},null,8,["modelValue"])])]),s("div",Ze,[a(e(U),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="all"}),onClick:i[1]||(i[1]=u=>g.value="all")},{default:l(()=>[...i[7]||(i[7]=[n(" Todos ",-1)])]),_:1},8,["class"]),a(e(U),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="geografico"}),onClick:i[2]||(i[2]=u=>g.value="geografico")},{default:l(()=>[a(e(H),{class:"w-4 h-4 mr-1"}),i[8]||(i[8]=n(" Geográfico ",-1))]),_:1},8,["class"]),a(e(U),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="rol"}),onClick:i[3]||(i[3]=u=>g.value="rol")},{default:l(()=>[a(e(J),{class:"w-4 h-4 mr-1"}),i[9]||(i[9]=n(" Rol ",-1))]),_:1},8,["class"]),a(e(U),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="personalizado"}),onClick:i[4]||(i[4]=u=>g.value="personalizado")},{default:l(()=>[a(e(X),{class:"w-4 h-4 mr-1"}),i[10]||(i[10]=n(" Personalizado ",-1))]),_:1},8,["class"])])]),a(e($),null,{default:l(()=>[a(e(h),{class:"p-2"},{default:l(()=>[a(e(Se),{modelValue:o.value,"onUpdate:modelValue":[i[5]||(i[5]=u=>o.value=u),I]},{default:l(()=>[s("div",ea,[(m(!0),_(O,null,R(B.value,u=>(m(),_("div",{key:u.id,class:k(["flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent cursor-pointer",{"bg-accent border-primary":o.value===u.id}])},[a(e(K),{value:u.id,id:`segment-${u.id}`},null,8,["value","id"]),a(e(v),{for:`segment-${u.id}`,class:"flex-1 cursor-pointer"},{default:l(()=>[s("div",aa,[s("div",ta,[s("div",la,[(m(),y(ve(M(u.tipo)),{class:k(["w-4 h-4",j(u.tipo)])},null,8,["class"])),s("span",sa,c(u.nombre),1),a(e(he),{variant:"outline",class:"ml-2"},{default:l(()=>[n(c(G(u.tipo)),1)]),_:2},1024)]),u.descripcion?(m(),_("p",oa,c(u.descripcion),1)):x("",!0)]),s("div",ia,[s("p",na,c(T(u.count)),1),i[11]||(i[11]=s("p",{class:"text-xs text-muted-foreground"},"usuarios",-1))])])]),_:2},1032,["for"])],2))),128)),B.value.length===0?(m(),_("div",ra," No se encontraron segmentos ")):x("",!0)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),V.showPreview&&w.value?(m(),y(e($),{key:0},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(S),{class:"text-base flex items-center gap-2"},{default:l(()=>[a(e(Te),{class:"w-4 h-4 text-green-600"}),i[12]||(i[12]=n(" Segmento Seleccionado ",-1))]),_:1})]),_:1}),a(e(h),null,{default:l(()=>[s("div",da,[s("div",null,[s("h4",ua,[(m(),y(ve(M(w.value.tipo)),{class:k(["w-4 h-4",j(w.value.tipo)])},null,8,["class"])),n(" "+c(w.value.nombre),1)]),w.value.descripcion?(m(),_("p",ma,c(w.value.descripcion),1)):x("",!0)]),s("div",pa,[s("div",null,[i[13]||(i[13]=s("p",{class:"text-sm text-muted-foreground"},"Total de destinatarios",-1)),s("p",ca,c(T(w.value.count)),1)]),a(e(Y),{class:"w-8 h-8 text-muted-foreground"})]),a(e(q),null,{default:l(()=>[a(e(Z),{class:"h-4 w-4"}),a(e(N),null,{default:l(()=>[...i[14]||(i[14]=[n(" Los usuarios de este segmento recibirán la campaña según los criterios definidos. El número de destinatarios puede variar al momento del envío. ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):x("",!0),V.required&&!o.value?(m(),y(e(q),{key:1,variant:"warning"},{default:l(()=>[a(e(ze),{class:"h-4 w-4"}),a(e(N),null,{default:l(()=>[...i[15]||(i[15]=[n(" Debes seleccionar un segmento para continuar ",-1)])]),_:1})]),_:1})):x("",!0)]))}}),_a={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ga={class:"flex justify-between items-center"},va={class:"text-3xl font-bold"},xa={class:"text-muted-foreground mt-1"},ba={class:"flex gap-2"},ka={class:"list-disc pl-4"},wa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ya={class:"flex items-center space-x-2"},ha={class:"flex items-center space-x-2"},$a={class:"flex items-center space-x-2"},Va={key:0,class:"mt-4 p-3 bg-muted rounded-md"},Ca={class:"flex items-center gap-2 text-sm"},Sa={class:"font-medium"},za={class:"font-medium"},Aa={key:0,class:"text-xs text-muted-foreground"},Da={class:"font-medium"},Ea={key:0,class:"text-xs text-muted-foreground"},Fa={class:"flex items-center space-x-2"},Pa=["aria-checked"],Ua={key:0,class:"space-y-2"},Ma={key:0},ja={key:1,class:"space-y-4"},Ta={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},La={key:2,class:"space-y-2"},qa={class:"space-y-2"},Na={class:"flex items-center space-x-2"},Wa=["aria-checked"],Ba={class:"flex items-center space-x-2"},Ia=["aria-checked"],Ht=Ve({__name:"Create",props:{campana:{},segmentos:{default:()=>[]},plantillasEmail:{default:()=>[]},plantillasWhatsApp:{default:()=>[]},tiposOptions:{default:()=>["email","whatsapp","ambos"]},estadosOptions:{},batchSizeEmailDefault:{},batchSizeWhatsAppDefault:{},whatsAppDelayDefault:{}},setup(V){var G,T,d,i,u,L,ee,ae,te,le,se,oe,ie,ne,re,de,ue,me,pe,ce,fe,_e,ge;const p=V,b=z(()=>{var f;return!!((f=p.campana)!=null&&f.id)}),W=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/campanas"},{title:b.value?"Editar Campaña":"Nueva Campaña",href:"#"}],o=De({nombre:((G=p.campana)==null?void 0:G.nombre)||"",descripcion:((T=p.campana)==null?void 0:T.descripcion)||"",tipo:((d=p.campana)==null?void 0:d.tipo)||"email",estado:((i=p.campana)==null?void 0:i.estado)||"borrador",segment_id:((u=p.campana)==null?void 0:u.segment_id)||null,plantilla_email_id:((L=p.campana)==null?void 0:L.plantilla_email_id)||null,plantilla_whatsapp_id:((ee=p.campana)==null?void 0:ee.plantilla_whatsapp_id)||null,fecha_programada:((ae=p.campana)==null?void 0:ae.fecha_programada)||"",es_programada:!!((te=p.campana)!=null&&te.fecha_programada),configuracion:{batch_size_email:((se=(le=p.campana)==null?void 0:le.configuracion)==null?void 0:se.batch_size_email)||p.batchSizeEmailDefault||50,whatsapp_delay_min:((ie=(oe=p.campana)==null?void 0:oe.configuracion)==null?void 0:ie.whatsapp_delay_min)||((ne=p.whatsAppDelayDefault)==null?void 0:ne.min)||5,whatsapp_delay_max:((de=(re=p.campana)==null?void 0:re.configuracion)==null?void 0:de.whatsapp_delay_max)||((ue=p.whatsAppDelayDefault)==null?void 0:ue.max)||30,enable_tracking:((pe=(me=p.campana)==null?void 0:me.configuracion)==null?void 0:pe.enable_tracking)??!0,enable_pixel_tracking:((fe=(ce=p.campana)==null?void 0:ce.configuracion)==null?void 0:fe.enable_pixel_tracking)??!0,enable_click_tracking:((ge=(_e=p.campana)==null?void 0:_e.configuracion)==null?void 0:ge.enable_click_tracking)??!0}}),A=z(()=>p.segmentos.find(f=>f.id===o.segment_id)),g=z(()=>o.tipo==="email"||o.tipo==="ambos"),w=z(()=>o.tipo==="whatsapp"||o.tipo==="ambos");Ce(()=>o.tipo,f=>{f==="email"?o.plantilla_whatsapp_id=null:f==="whatsapp"&&(o.plantilla_email_id=null)});const B=()=>{var f;if(!o.segment_id){E.error("Debes seleccionar un segmento");return}if(g.value&&!o.plantilla_email_id){E.error("Debes seleccionar una plantilla de email");return}if(w.value&&!o.plantilla_whatsapp_id){E.error("Debes seleccionar una plantilla de WhatsApp");return}b.value?o.put(`/admin/campanas/${(f=p.campana)==null?void 0:f.id}`,{onSuccess:()=>{E.success("Campaña actualizada exitosamente")},onError:()=>{E.error("Error al actualizar la campaña")}}):o.post("/admin/campanas",{onSuccess:()=>{E.success("Campaña creada exitosamente")},onError:()=>{E.error("Error al crear la campaña")}})},D=z(()=>o.nombre&&o.segment_id&&!o.processing&&(g.value?o.plantilla_email_id:!0)&&(w.value?o.plantilla_whatsapp_id:!0)),I=f=>{o.es_programada=f,f||(o.fecha_programada="")},M=f=>{o.configuracion.enable_pixel_tracking=f},j=f=>{o.configuracion.enable_click_tracking=f};return(f,t)=>(m(),y(Me,{breadcrumbs:W},{default:l(()=>[a(e(Ee),{title:b.value?"Editar Campaña":"Nueva Campaña"},null,8,["title"]),s("div",_a,[s("form",{onSubmit:Fe(B,["prevent"]),class:"space-y-6"},[s("div",ga,[s("div",null,[s("h1",va,c(b.value?"Editar Campaña":"Nueva Campaña"),1),s("p",xa,c(b.value?"Modifica los detalles de la campaña":"Configura y programa tu campaña de comunicación"),1)]),s("div",ba,[a(e(U),{type:"button",variant:"outline",onClick:t[0]||(t[0]=r=>e(Pe).visit("/admin/campanas"))},{default:l(()=>[a(e(Le),{class:"w-4 h-4 mr-2"}),t[17]||(t[17]=n(" Cancelar ",-1))]),_:1}),a(e(U),{type:"submit",disabled:!D.value},{default:l(()=>[a(e(qe),{class:"w-4 h-4 mr-2"}),n(" "+c(b.value?"Actualizar":"Guardar")+" Campaña ",1)]),_:1},8,["disabled"])])]),Object.keys(e(o).errors).length>0?(m(),y(e(q),{key:0,variant:"destructive"},{default:l(()=>[a(e(ze),{class:"h-4 w-4"}),a(e(N),null,{default:l(()=>[s("ul",ka,[(m(!0),_(O,null,R(e(o).errors,(r,Ae)=>(m(),_("li",{key:Ae},c(r),1))),128))])]),_:1})]),_:1})):x("",!0),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(S),null,{default:l(()=>[...t[18]||(t[18]=[n("Información Básica",-1)])]),_:1}),a(e(F),null,{default:l(()=>[...t[19]||(t[19]=[n(" Define el nombre y tipo de campaña ",-1)])]),_:1})]),_:1}),a(e(h),{class:"space-y-4"},{default:l(()=>[s("div",wa,[s("div",null,[a(e(v),{htmlFor:"nombre"},{default:l(()=>[...t[20]||(t[20]=[n(" Nombre de la Campaña ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(e(P),{id:"nombre",modelValue:e(o).nombre,"onUpdate:modelValue":t[1]||(t[1]=r=>e(o).nombre=r),placeholder:"Ej: Recordatorio Asamblea General",error:e(o).errors.nombre},null,8,["modelValue","error"])]),s("div",null,[a(e(v),null,{default:l(()=>[...t[21]||(t[21]=[n("Tipo de Campaña ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(e(Se),{modelValue:e(o).tipo,"onUpdate:modelValue":t[2]||(t[2]=r=>e(o).tipo=r),class:"flex flex-wrap gap-4 mt-2"},{default:l(()=>[s("div",ya,[a(e(K),{value:"email",id:"tipo-email"}),a(e(v),{htmlFor:"tipo-email",class:"flex items-center gap-1 cursor-pointer"},{default:l(()=>[a(e(Ne),{class:"w-4 h-4"}),t[22]||(t[22]=n(" Email ",-1))]),_:1})]),s("div",ha,[a(e(K),{value:"whatsapp",id:"tipo-whatsapp"}),a(e(v),{htmlFor:"tipo-whatsapp",class:"flex items-center gap-1 cursor-pointer"},{default:l(()=>[a(e(We),{class:"w-4 h-4"}),t[23]||(t[23]=n(" WhatsApp ",-1))]),_:1})]),s("div",$a,[a(e(K),{value:"ambos",id:"tipo-ambos"}),a(e(v),{htmlFor:"tipo-ambos",class:"flex items-center gap-1 cursor-pointer"},{default:l(()=>[a(e(Be),{class:"w-4 h-4"}),t[24]||(t[24]=n(" Ambos ",-1))]),_:1})])]),_:1},8,["modelValue"])])]),s("div",null,[a(e(v),{htmlFor:"descripcion"},{default:l(()=>[...t[25]||(t[25]=[n("Descripción",-1)])]),_:1}),a(e(Ue),{id:"descripcion",modelValue:e(o).descripcion,"onUpdate:modelValue":t[3]||(t[3]=r=>e(o).descripcion=r),placeholder:"Describe el objetivo de esta campaña...",rows:"3"},null,8,["modelValue"])])]),_:1})]),_:1}),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(S),null,{default:l(()=>[...t[26]||(t[26]=[n("Audiencia",-1)])]),_:1}),a(e(F),null,{default:l(()=>[...t[27]||(t[27]=[n(" Selecciona el segmento de usuarios que recibirá esta campaña ",-1)])]),_:1})]),_:1}),a(e(h),null,{default:l(()=>[a(fa,{modelValue:e(o).segment_id,"onUpdate:modelValue":t[4]||(t[4]=r=>e(o).segment_id=r),segments:V.segmentos},null,8,["modelValue","segments"]),A.value?(m(),_("div",Va,[s("div",Ca,[a(e(Y),{class:"w-4 h-4"}),s("span",Sa,c(A.value.count)+" usuarios",1),t[28]||(t[28]=s("span",{class:"text-muted-foreground"},"recibirán esta campaña",-1))])])):x("",!0)]),_:1})]),_:1}),g.value?(m(),y(e($),{key:1},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(S),null,{default:l(()=>[...t[29]||(t[29]=[n("Plantilla de Email",-1)])]),_:1}),a(e(F),null,{default:l(()=>[...t[30]||(t[30]=[n(" Selecciona la plantilla de email a utilizar ",-1)])]),_:1})]),_:1}),a(e(h),null,{default:l(()=>[a(e(xe),{modelValue:e(o).plantilla_email_id,"onUpdate:modelValue":t[5]||(t[5]=r=>e(o).plantilla_email_id=r)},{default:l(()=>[a(e(be),null,{default:l(()=>[a(e(ke),{placeholder:"Selecciona una plantilla"})]),_:1}),a(e(we),null,{default:l(()=>[(m(!0),_(O,null,R(V.plantillasEmail,r=>(m(),y(e(ye),{key:r.id,value:r.id.toString()},{default:l(()=>[s("div",null,[s("div",za,c(r.nombre),1),r.asunto?(m(),_("div",Aa," Asunto: "+c(r.asunto),1)):x("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):x("",!0),w.value?(m(),y(e($),{key:2},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(S),null,{default:l(()=>[...t[31]||(t[31]=[n("Plantilla de WhatsApp",-1)])]),_:1}),a(e(F),null,{default:l(()=>[...t[32]||(t[32]=[n(" Selecciona la plantilla de WhatsApp a utilizar ",-1)])]),_:1})]),_:1}),a(e(h),null,{default:l(()=>[a(e(xe),{modelValue:e(o).plantilla_whatsapp_id,"onUpdate:modelValue":t[6]||(t[6]=r=>e(o).plantilla_whatsapp_id=r)},{default:l(()=>[a(e(be),null,{default:l(()=>[a(e(ke),{placeholder:"Selecciona una plantilla"})]),_:1}),a(e(we),null,{default:l(()=>[(m(!0),_(O,null,R(V.plantillasWhatsApp,r=>(m(),y(e(ye),{key:r.id,value:r.id.toString()},{default:l(()=>[s("div",null,[s("div",Da,c(r.nombre),1),r.descripcion?(m(),_("div",Ea,c(r.descripcion),1)):x("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):x("",!0),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(S),null,{default:l(()=>[...t[33]||(t[33]=[n("Programación",-1)])]),_:1}),a(e(F),null,{default:l(()=>[...t[34]||(t[34]=[n(" Define cuándo se enviará la campaña ",-1)])]),_:1})]),_:1}),a(e(h),{class:"space-y-4"},{default:l(()=>[s("div",Fa,[s("button",{type:"button",onClick:t[7]||(t[7]=r=>I(!e(o).es_programada)),class:k(["inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] cursor-pointer",e(o).es_programada?"bg-primary":"bg-input"]),"aria-checked":e(o).es_programada,role:"switch"},[s("span",{class:k(["pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",e(o).es_programada?"translate-x-[calc(100%-2px)]":"translate-x-0"])},null,2)],10,Pa),a(e(v),{onClick:t[8]||(t[8]=r=>I(!e(o).es_programada)),class:"cursor-pointer"},{default:l(()=>[...t[35]||(t[35]=[n("Programar envío",-1)])]),_:1})]),e(o).es_programada?(m(),_("div",Ua,[a(e(v),{htmlFor:"fecha_programada"},{default:l(()=>[...t[36]||(t[36]=[n(" Fecha y hora de envío ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(e(P),{id:"fecha_programada",type:"datetime-local",modelValue:e(o).fecha_programada,"onUpdate:modelValue":t[9]||(t[9]=r=>e(o).fecha_programada=r),min:new Date().toISOString().slice(0,16),class:"w-full",required:""},null,8,["modelValue","min"]),t[37]||(t[37]=s("p",{class:"text-xs text-muted-foreground"}," La campaña se enviará automáticamente en la fecha y hora seleccionada ",-1))])):x("",!0)]),_:1})]),_:1}),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(S),null,{default:l(()=>[...t[38]||(t[38]=[n("Configuración Avanzada",-1)])]),_:1}),a(e(F),null,{default:l(()=>[...t[39]||(t[39]=[n(" Ajusta los parámetros de envío y tracking ",-1)])]),_:1})]),_:1}),a(e(h),{class:"space-y-4"},{default:l(()=>[g.value?(m(),_("div",Ma,[a(e(v),{htmlFor:"batch_size_email"},{default:l(()=>[...t[40]||(t[40]=[n(" Tamaño de lote (Email) ",-1)])]),_:1}),a(e(P),{id:"batch_size_email",type:"number",modelValue:e(o).configuracion.batch_size_email,"onUpdate:modelValue":t[10]||(t[10]=r=>e(o).configuracion.batch_size_email=r),modelModifiers:{number:!0},min:"1",max:"100",class:"max-w-xs"},null,8,["modelValue"]),t[41]||(t[41]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Emails enviados por lote (máximo 100, recomendado: 50) ",-1))])):x("",!0),w.value?(m(),_("div",ja,[a(e(q),null,{default:l(()=>[a(e(Z),{class:"h-4 w-4"}),a(e(N),null,{default:l(()=>[...t[42]||(t[42]=[n(" Los mensajes de WhatsApp se envían uno a uno con intervalos de tiempo aleatorios para evitar bloqueos de la API. ",-1)])]),_:1})]),_:1}),s("div",Ta,[s("div",null,[a(e(v),{htmlFor:"whatsapp_delay_min"},{default:l(()=>[...t[43]||(t[43]=[n(" Intervalo mínimo (segundos) ",-1)])]),_:1}),a(e(P),{id:"whatsapp_delay_min",type:"number",modelValue:e(o).configuracion.whatsapp_delay_min,"onUpdate:modelValue":t[11]||(t[11]=r=>e(o).configuracion.whatsapp_delay_min=r),modelModifiers:{number:!0},min:"5",max:"120"},null,8,["modelValue"]),t[44]||(t[44]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Mínimo 5 segundos entre mensajes ",-1))]),s("div",null,[a(e(v),{htmlFor:"whatsapp_delay_max"},{default:l(()=>[...t[45]||(t[45]=[n(" Intervalo máximo (segundos) ",-1)])]),_:1}),a(e(P),{id:"whatsapp_delay_max",type:"number",modelValue:e(o).configuracion.whatsapp_delay_max,"onUpdate:modelValue":t[12]||(t[12]=r=>e(o).configuracion.whatsapp_delay_max=r),modelModifiers:{number:!0},min:"5",max:"120"},null,8,["modelValue"]),t[46]||(t[46]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Máximo 120 segundos entre mensajes ",-1))])])])):x("",!0),g.value?(m(),_("div",La,[a(e(v),null,{default:l(()=>[...t[47]||(t[47]=[n("Opciones de Tracking",-1)])]),_:1}),s("div",qa,[s("div",Na,[s("button",{type:"button",onClick:t[13]||(t[13]=r=>M(!e(o).configuracion.enable_pixel_tracking)),class:k(["inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] cursor-pointer",e(o).configuracion.enable_pixel_tracking?"bg-primary":"bg-input"]),"aria-checked":e(o).configuracion.enable_pixel_tracking,role:"switch"},[s("span",{class:k(["pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",e(o).configuracion.enable_pixel_tracking?"translate-x-[calc(100%-2px)]":"translate-x-0"])},null,2)],10,Wa),a(e(v),{class:"font-normal cursor-pointer",onClick:t[14]||(t[14]=r=>M(!e(o).configuracion.enable_pixel_tracking))},{default:l(()=>[...t[48]||(t[48]=[n(" Tracking de apertura (pixel) ",-1)])]),_:1})]),s("div",Ba,[s("button",{type:"button",onClick:t[15]||(t[15]=r=>j(!e(o).configuracion.enable_click_tracking)),class:k(["inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] cursor-pointer",e(o).configuracion.enable_click_tracking?"bg-primary":"bg-input"]),"aria-checked":e(o).configuracion.enable_click_tracking,role:"switch"},[s("span",{class:k(["pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",e(o).configuracion.enable_click_tracking?"translate-x-[calc(100%-2px)]":"translate-x-0"])},null,2)],10,Ia),a(e(v),{class:"font-normal cursor-pointer",onClick:t[16]||(t[16]=r=>j(!e(o).configuracion.enable_click_tracking))},{default:l(()=>[...t[49]||(t[49]=[n(" Tracking de clicks ",-1)])]),_:1})])])])):x("",!0)]),_:1})]),_:1}),a(e(q),null,{default:l(()=>[a(e(Z),{class:"h-4 w-4"}),a(e(N),null,{default:l(()=>[...t[50]||(t[50]=[n(" La campaña se guardará en estado ",-1),s("strong",null,"borrador",-1),n(". Podrás revisarla y enviarla desde el listado de campañas. ",-1)])]),_:1})]),_:1})],32)])]),_:1}))}});export{Ht as default};
