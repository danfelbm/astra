import{_ as b}from"./index-DV2AU7KQ.js";import{c as z,_ as m}from"./createLucideIcon-D2UC7njQ.js";import{_ as F,c as L}from"./_plugin-vue_export-helper-D_KSvFQh.js";import{a as M,M as T,_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-BAp8z8y4.js";import{d as q,k as B,w as A,W as x,a as l,o as i,b as a,u as t,m as E,e as r,f as e,P as v,g as p,i as g,F as h,r as k,j as y,t as d,n as H}from"./app-70T9gurS.js";import{_ as I}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-CCQkXTrM.js";import{P as C}from"./plus-I7yu_h51.js";import{U as V,C as U}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B5VhlVM4.js";import{C as D}from"./clock-Dz4c3xg-.js";import{E as G}from"./eye-0eCXpnCf.js";import{T as O}from"./trash-2-bKnjA2_V.js";import"./Label.vue_vue_type_script_setup_true_lang-DzMdd1yJ.js";import"./index-YjrGdPjY.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C2udkL0y.js";import"./index-C1ciIYZH.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-Bzr0-Ggc.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-ROZOkoki.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-BlmfyKnR.js";import"./loader-circle-BIxTJC65.js";import"./search-DwMc3U1H.js";import"./history-CGdEsaMd.js";import"./save-o71XXqOB.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=z("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),J={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Q={class:"flex items-center justify-between"},K={key:0,class:"text-center py-8"},R={key:1,class:"space-y-4"},X={class:"flex items-start justify-between"},Y={class:"flex-1"},Z={class:"flex items-center gap-2 mb-2"},ee={class:"text-lg font-semibold"},se={key:0,class:"text-muted-foreground mb-3"},te={class:"grid gap-2 md:grid-cols-2 lg:grid-cols-4 text-sm"},ae={class:"flex items-center gap-2"},oe={class:"flex items-center gap-2"},re={class:"flex items-center gap-2"},ie={class:"flex items-center gap-2"},le={class:"mt-3 text-sm text-muted-foreground"},ne={key:0,class:"ml-4"},de={class:"flex items-center gap-2 ml-4"},ce={key:2,class:"mt-6 flex justify-center"},me={class:"flex items-center gap-2"},ue=["innerHTML"],Ae=q({__name:"Index",props:{convocatorias:{},filters:{},filterFieldsConfig:{}},setup(w){const c=w,$=[{title:"Admin",href:"/admin/dashboard"},{title:"Convocatorias",href:"#"}],_=B({estado_temporal:c.filters.estado_temporal||"null",estado:c.filters.estado||"null",activo:c.filters.activo||"null",cargo_id:c.filters.cargo_id||"null",periodo_electoral_id:c.filters.periodo_electoral_id||"null",search:c.filters.search||""});A(_,n=>{const o=Object.entries(n).reduce((s,[u,f])=>(s[u]=f==="null"?"":f,s),{});x.get("/admin/convocatorias",o,{preserveState:!0,replace:!0})},{deep:!0});const N={fields:c.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre o descripción...",quickSearchFields:["nombre","descripcion"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},{route:P}=window,S=n=>{confirm(`¿Estás seguro de que quieres eliminar la convocatoria "${n.nombre}"?`)&&x.delete(`/admin/convocatorias/${n.id}`,{onSuccess:()=>{}})};return(n,o)=>(i(),l(h,null,[a(t(E),{title:"Convocatorias"}),a(j,{breadcrumbs:$},{default:r(()=>[e("div",J,[e("div",Q,[o[1]||(o[1]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"Convocatorias"),e("p",{class:"text-muted-foreground"}," Gestiona las convocatorias electorales y formularios de postulación ")],-1)),a(t(v),{href:"/admin/convocatorias/create"},{default:r(()=>[a(t(m),null,{default:r(()=>[a(t(C),{class:"mr-2 h-4 w-4"}),o[0]||(o[0]=p(" Nueva Convocatoria "))]),_:1})]),_:1})]),a(I,{config:N,route:t(P)("admin.convocatorias.index"),"initial-filters":{quickSearch:_.value.search,rootGroup:_.value.advanced_filters?JSON.parse(_.value.advanced_filters):void 0}},null,8,["route","initial-filters"]),a(t(F),null,{default:r(()=>[a(t(L),{class:"pt-6"},{default:r(()=>[n.convocatorias.data.length===0?(i(),l("div",K,[a(t(M),{class:"mx-auto h-12 w-12 text-muted-foreground"}),o[3]||(o[3]=e("h3",{class:"mt-4 text-lg font-medium"},"No hay convocatorias",-1)),o[4]||(o[4]=e("p",{class:"text-muted-foreground"},"Comienza creando tu primera convocatoria.",-1)),a(t(v),{href:"/admin/convocatorias/create",class:"mt-4 inline-block"},{default:r(()=>[a(t(m),null,{default:r(()=>[a(t(C),{class:"mr-2 h-4 w-4"}),o[2]||(o[2]=p(" Nueva Convocatoria "))]),_:1})]),_:1})])):(i(),l("div",R,[(i(!0),l(h,null,k(n.convocatorias.data,s=>{var u,f;return i(),l("div",{key:s.id,class:"border rounded-lg p-4 hover:bg-muted/50 transition-colors"},[e("div",X,[e("div",Y,[e("div",Z,[e("h3",ee,d(s.nombre),1),a(t(b),{class:H(s.estado_temporal_color)},{default:r(()=>[p(d(s.estado_temporal_label),1)]),_:2},1032,["class"]),s.activo?g("",!0):(i(),y(t(b),{key:0,variant:"secondary"},{default:r(()=>o[5]||(o[5]=[p(" Inactivo ")])),_:1}))]),s.descripcion?(i(),l("p",se,d(s.descripcion),1)):g("",!0),e("div",te,[e("div",ae,[a(t(V),{class:"h-4 w-4 text-muted-foreground"}),o[6]||(o[6]=e("span",{class:"font-medium"},"Cargo:",-1)),e("span",null,d(((u=s.cargo)==null?void 0:u.ruta_jerarquica)||"N/A"),1)]),e("div",oe,[a(t(U),{class:"h-4 w-4 text-muted-foreground"}),o[7]||(o[7]=e("span",{class:"font-medium"},"Periodo:",-1)),e("span",null,d(((f=s.periodo_electoral)==null?void 0:f.nombre)||"N/A"),1)]),e("div",re,[a(t(D),{class:"h-4 w-4 text-muted-foreground"}),o[8]||(o[8]=e("span",{class:"font-medium"},"Duración:",-1)),e("span",null,d(s.duracion),1)]),e("div",ie,[a(t(T),{class:"h-4 w-4 text-muted-foreground"}),o[9]||(o[9]=e("span",{class:"font-medium"},"Ubicación:",-1)),e("span",null,d(s.ubicacion_texto),1)])]),e("div",le,[o[10]||(o[10]=e("span",{class:"font-medium"},"Fechas:",-1)),p(" "+d(s.rango_fechas)+" ",1),s.dias_restantes>0?(i(),l("span",ne," ("+d(s.dias_restantes)+" días restantes) ",1)):g("",!0)])]),e("div",de,[a(t(v),{href:`/admin/convocatorias/${s.id}`},{default:r(()=>[a(t(m),{variant:"outline",size:"sm"},{default:r(()=>[a(t(G),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),a(t(v),{href:`/admin/convocatorias/${s.id}/edit`},{default:r(()=>[a(t(m),{variant:"outline",size:"sm"},{default:r(()=>[a(t(W),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),a(t(m),{variant:"outline",size:"sm",onClick:fe=>S(s),class:"text-destructive hover:text-destructive"},{default:r(()=>[a(t(O),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])])}),128))])),n.convocatorias.links&&n.convocatorias.links.length>3?(i(),l("div",ce,[e("div",me,[(i(!0),l(h,null,k(n.convocatorias.links,s=>(i(),l(h,{key:s.label},[s.url?(i(),y(t(m),{key:0,variant:s.active?"default":"outline",size:"sm",onClick:u=>t(x).get(s.url),innerHTML:s.label},null,8,["variant","onClick","innerHTML"])):(i(),l("span",{key:1,class:"px-3 py-1 text-sm text-muted-foreground",innerHTML:s.label},null,8,ue))],64))),128))])])):g("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{Ae as default};
