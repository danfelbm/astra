import{_ as oe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BJpgPWDW.js";import{d as le,r as P,p as ne,s as x,c as S,i as p,e as s,f as t,q as re,w as a,g as o,t as d,b as y,j as c,v as de,h as r,m,n as V,F as j,k as H,y as ue}from"./app-DsXE2pWc.js";import{_ as v,a as _,b as $,c as h}from"./CardTitle.vue_vue_type_script_setup_true_lang-xy0V8ZYM.js";import{_ as A}from"./CardDescription.vue_vue_type_script_setup_true_lang-B1lpjejk.js";import{_ as k}from"./createLucideIcon-DouqM7Af.js";import{_ as E}from"./index-y46K_9sH.js";import{_ as me}from"./Progress.vue_vue_type_script_setup_true_lang-ByPuVsxG.js";import{_ as ce,a as fe,b as D,c as M}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-D0nylEol.js";import{_ as ge,a as be,b as pe,c as ve,d as he,e as ye,f as xe,g as _e}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Dta_aQOk.js";import{_ as $e}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-NLOGSeDE.js";import{t as w}from"./index-m72Zk-4d.js";import{_ as we,a as Ee}from"./EntregablesFilters.vue_vue_type_script_setup_true_lang-PpySnKyY.js";import{_ as ke,a as Ce}from"./ActivityLog.vue_vue_type_script_setup_true_lang-DKW1fr27.js";import{A as ze}from"./arrow-left-0197JD2N.js";import{S as Pe}from"./square-pen-BeM5JM7c.js";import{C as Se}from"./copy-9ckAgEeC.js";import{T as Ve}from"./trash-2-DYWzh1AW.js";import{T as je}from"./target-JnPkIZyO.js";import{C as De}from"./clock-DsxhAmwf.js";import{F as I}from"./file-text-DfLCxJYs.js";import{C as Me}from"./calendar-DIP-jwI8.js";import{U as Fe}from"./user-DCuOmdtA.js";import{T as Ne}from"./tag-BkqJ0RJe.js";import{P as L}from"./plus-dUDcGxZl.js";import{f as B,e as U}from"./es-BDPlFIsO.js";import{p as q}from"./parseISO-DFjB8F03.js";import"./useFlashMessages-CGfrcOeM.js";import"./index-DAR7lzPI.js";import"./floating-ui.vue-DzTgyoI6.js";import"./x-yKNShXT9.js";import"./Input.vue_vue_type_script_setup_true_lang-CZjvqwkd.js";import"./index-t5DUeMD0.js";import"./index-CeQoWpaA.js";import"./shield-DACf9x8q.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DjLWJI2c.js";import"./chevron-right-B6Xp79RV.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-RKJOy7-G.js";import"./VisuallyHidden-CMJYJfaX.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D3WTtkQ-.js";import"./check-D5piUvgk.js";import"./Label.vue_vue_type_script_setup_true_lang-BTG0OZau.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CM1CkMqd.js";import"./circle-alert-BRENL4vk.js";import"./map-pin-B6p31ase.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D5oklv-b.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CwKfbOu2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-BPosUKQo.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-hHg2FrHb.js";import"./users-BYEo5yWZ.js";import"./vote-D7d78Kwy.js";import"./folder-open-CijtWzyH.js";import"./send-CB1yZuS_.js";import"./briefcase-BJhP6bZE.js";import"./megaphone-BvWbwmeA.js";import"./user-check-5cFJ_Y_Z.js";import"./clipboard-list-D4NcI0fM.js";import"./mail-Ch1JxZzN.js";import"./message-square-C7bp91Te.js";import"./external-link-Cmz6L_Z6.js";import"./panel-left-BiPU9AaT.js";import"./index-BUTl1shx.js";import"./RovingFocusItem-K_X8Xq8j.js";import"./utils-BNLTfb3r.js";import"./DialogTrigger-rlgg4at1.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-B19sEPdQ.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-D9hLrHcA.js";import"./eye-irxjha9f.js";import"./circle-check-BzhkiSE7.js";import"./filter-3HiK9cUv.js";import"./search-BN_4pExK.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-C65_02EH.js";const Te={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},He={class:"flex items-center justify-between"},Ae={class:"text-2xl font-bold"},Ie={class:"text-muted-foreground"},Le={class:"flex items-center gap-2"},Be={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Ue={class:"text-2xl font-bold"},qe={class:"text-2xl font-bold"},Re={class:"text-xs text-muted-foreground"},Oe={class:"text-sm font-medium"},Ge={class:"text-sm font-medium"},Je={key:0,class:"text-xs text-muted-foreground"},Ke={key:0},Qe={class:"text-sm text-muted-foreground whitespace-pre-wrap"},We={class:"grid gap-4 md:grid-cols-2"},Xe={class:"text-sm text-muted-foreground"},Ye={class:"text-sm text-muted-foreground"},Ze={class:"text-sm text-muted-foreground"},et={class:"space-y-2"},tt={class:"flex items-center justify-between text-sm"},st={class:"flex items-center justify-between text-sm"},at={class:"flex items-center justify-between text-sm"},it={class:"flex items-center gap-2"},ot={class:"flex flex-wrap gap-2"},lt={class:"space-y-3"},nt={key:0},rt={class:"text-sm text-muted-foreground"},dt={key:1},ut={class:"grid gap-4 md:grid-cols-2"},mt={class:"font-semibold mb-1"},ct={key:0,class:"text-red-500"},ft={class:"text-sm text-muted-foreground"},gt={key:0,class:"text-xs text-muted-foreground mt-1"},bt={key:0,class:"text-center py-4"},pt={class:"grid gap-4 md:grid-cols-2 text-sm"},vt={class:"font-medium"},ht={class:"font-medium"},yt={key:0},xt={class:"font-medium"},_t={key:1},$t={class:"font-medium"},wt={class:"flex justify-between items-center"},qs=le({__name:"Show",props:{hito:{},proyecto:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageEntregables:{type:Boolean},estadisticas:{},actividades:{},usuariosActividades:{},camposPersonalizados:{},valoresCamposPersonalizados:{}},setup(i){const u=i,R=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:u.proyecto.nombre,href:`/admin/proyectos/${u.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${u.proyecto.id}/hitos`},{title:u.hito.nombre,href:"#"}],O=["detalles","entregables","actividad"],z=P((()=>{const e=new URLSearchParams(window.location.search).get("tab");return e&&O.includes(e)?e:"detalles"})());ne(z,l=>{const e=`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}?tab=${l}`;x.get(e,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const b=P({usuario_id:null,tipo_entidad:null,tipo_accion:null,fecha_inicio:null,fecha_fin:null}),f=P({search:null,estado:null,prioridad:null,responsable_id:null,fecha_inicio:null,fecha_fin:null}),G=()=>{x.visit(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/edit`)},J=()=>{x.delete(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}`,{onSuccess:()=>{w.success("Hito eliminado exitosamente")},onError:()=>{w.error("Error al eliminar el hito")}})},K=()=>{x.post(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/duplicar`,{},{onSuccess:()=>{w.success("Hito duplicado exitosamente")},onError:()=>{w.error("Error al duplicar el hito")}})},F=()=>{x.visit(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/entregables/create`)},Q=l=>{x.visit(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/entregables/${l.id}`)},W=l=>{x.visit(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/entregables/${l.id}/edit`)},X=l=>{x.delete(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/entregables/${l.id}`,{onSuccess:()=>{w.success("Entregable eliminado exitosamente")},onError:()=>{w.error("Error al eliminar el entregable")}})},Y=l=>{x.post(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/entregables/${l.id}/completar`,{},{onSuccess:()=>{w.success("Entregable completado exitosamente")},onError:()=>{w.error("Error al completar el entregable")}})},Z=l=>{x.post(`/admin/proyectos/${u.proyecto.id}/hitos/${u.hito.id}/entregables/${l.id}/actualizar-estado`,{estado:"en_progreso"},{onSuccess:()=>{w.success("Entregable marcado como en progreso")},onError:()=>{w.error("Error al actualizar el estado")}})},N=l=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",C=l=>l?B(q(l),"dd MMM yyyy",{locale:U}):"No definida",T=l=>l?B(q(l),"dd MMM yyyy 'a las' HH:mm",{locale:U}):"No definida",ee=(l,e)=>{var n;if(e==null||e==="")return"No especificado";switch(l.tipo){case"date":return C(e);case"checkbox":return e?"Sí":"No";case"select":case"radio":const g=(n=l.opciones)==null?void 0:n.find(ie=>ie.value===e);return(g==null?void 0:g.label)||e;default:return e}},te=S(()=>{let l=u.hito.entregables||[];if(f.value.search){const e=f.value.search.toLowerCase();l=l.filter(n=>n.nombre.toLowerCase().includes(e)||n.descripcion&&n.descripcion.toLowerCase().includes(e))}return f.value.estado&&(l=l.filter(e=>e.estado===f.value.estado)),f.value.prioridad&&(l=l.filter(e=>e.prioridad===f.value.prioridad)),f.value.responsable_id&&(l=l.filter(e=>{var n;return((n=e.responsable)==null?void 0:n.id)===f.value.responsable_id})),(f.value.fecha_inicio||f.value.fecha_fin)&&(l=l.filter(e=>{if(!e.fecha_fin)return!1;const n=new Date(e.fecha_fin);if(f.value.fecha_inicio){const g=new Date(f.value.fecha_inicio);if(n<g)return!1}if(f.value.fecha_fin){const g=new Date(f.value.fecha_fin);if(g.setHours(23,59,59,999),n>g)return!1}return!0})),l}),se=S(()=>{const l=new Map;return(u.hito.entregables||[]).forEach(e=>{var n;(n=e.responsable)!=null&&n.id&&l.set(e.responsable.id,{id:e.responsable.id,name:e.responsable.name,email:e.responsable.email})}),Array.from(l.values())}),ae=S(()=>{let l=u.actividades||[];return b.value.usuario_id&&(l=l.filter(e=>{var n;return((n=e.causer)==null?void 0:n.id)===b.value.usuario_id})),b.value.tipo_entidad&&(l=l.filter(e=>e.subject_type===b.value.tipo_entidad)),b.value.tipo_accion&&(l=l.filter(e=>e.event===b.value.tipo_accion)),(b.value.fecha_inicio||b.value.fecha_fin)&&(l=l.filter(e=>{const n=new Date(e.created_at);if(b.value.fecha_inicio){const g=new Date(b.value.fecha_inicio);if(n<g)return!1}if(b.value.fecha_fin){const g=new Date(b.value.fecha_fin);if(g.setHours(23,59,59,999),n>g)return!1}return!0})),l});return(l,e)=>(m(),p(j,null,[s(t(re),{title:`Hito: ${i.hito.nombre}`},null,8,["title"]),s(oe,{breadcrumbs:R},{default:a(()=>[o("div",Te,[o("div",He,[o("div",null,[o("h1",Ae,d(i.hito.nombre),1),o("p",Ie,"Proyecto: "+d(i.proyecto.nombre),1)]),o("div",Le,[s(t(de),{href:`/admin/proyectos/${i.proyecto.id}/hitos`},{default:a(()=>[s(t(k),{variant:"outline",size:"sm"},{default:a(()=>[s(t(ze),{class:"h-4 w-4 mr-2"}),e[3]||(e[3]=r(" Volver ",-1))]),_:1})]),_:1},8,["href"]),i.canEdit?(m(),y(t(k),{key:0,onClick:G,size:"sm",variant:"outline"},{default:a(()=>[s(t(Pe),{class:"h-4 w-4 mr-2"}),e[4]||(e[4]=r(" Editar ",-1))]),_:1})):c("",!0),s(t(k),{onClick:K,size:"sm",variant:"outline"},{default:a(()=>[s(t(Se),{class:"h-4 w-4 mr-2"}),e[5]||(e[5]=r(" Duplicar ",-1))]),_:1}),i.canDelete?(m(),y(t(ge),{key:1},{default:a(()=>[s(t($e),{asChild:""},{default:a(()=>[s(t(k),{variant:"destructive",size:"sm"},{default:a(()=>[s(t(Ve),{class:"h-4 w-4 mr-2"}),e[6]||(e[6]=r(" Eliminar ",-1))]),_:1})]),_:1}),s(t(be),null,{default:a(()=>[s(t(pe),null,{default:a(()=>[s(t(ve),null,{default:a(()=>[...e[7]||(e[7]=[r("¿Estás seguro?",-1)])]),_:1}),s(t(he),null,{default:a(()=>[...e[8]||(e[8]=[r(" Esta acción no se puede deshacer. Se eliminará permanentemente el hito y todos sus entregables asociados. ",-1)])]),_:1})]),_:1}),s(t(ye),null,{default:a(()=>[s(t(xe),null,{default:a(()=>[...e[9]||(e[9]=[r("Cancelar",-1)])]),_:1}),s(t(_e),{onClick:J},{default:a(()=>[...e[10]||(e[10]=[r(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0)])]),o("div",Be,[s(t(v),null,{default:a(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(t($),{class:"text-sm font-medium"},{default:a(()=>[...e[11]||(e[11]=[r("Estado",-1)])]),_:1}),s(t(je),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(h),null,{default:a(()=>[s(t(E),{class:V([N(i.hito.estado),"mt-1"])},{default:a(()=>[r(d(i.hito.estado),1)]),_:1},8,["class"])]),_:1})]),_:1}),s(t(v),null,{default:a(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(t($),{class:"text-sm font-medium"},{default:a(()=>[...e[12]||(e[12]=[r("Progreso",-1)])]),_:1}),s(t(De),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(h),null,{default:a(()=>[o("div",Ue,d(i.hito.porcentaje_completado)+"%",1),s(t(me),{"model-value":i.hito.porcentaje_completado,class:"mt-2 h-1"},null,8,["model-value"])]),_:1})]),_:1}),s(t(v),null,{default:a(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(t($),{class:"text-sm font-medium"},{default:a(()=>[...e[13]||(e[13]=[r("Entregables",-1)])]),_:1}),s(t(I),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(h),null,{default:a(()=>[o("div",qe,d(i.estadisticas.total_entregables),1),o("p",Re,d(i.estadisticas.entregables_completados)+" completados ",1)]),_:1})]),_:1}),s(t(v),null,{default:a(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(t($),{class:"text-sm font-medium"},{default:a(()=>[...e[14]||(e[14]=[r("Fecha Fin",-1)])]),_:1}),s(t(Me),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(h),null,{default:a(()=>[o("div",Oe,d(C(i.hito.fecha_fin)),1),i.estadisticas.dias_restantes!==null?(m(),p("p",{key:0,class:V(["text-xs",i.estadisticas.esta_vencido?"text-red-600":"text-muted-foreground"])},d(i.estadisticas.esta_vencido?`Vencido hace ${Math.abs(i.estadisticas.dias_restantes)} días`:`${i.estadisticas.dias_restantes} días restantes`),3)):c("",!0)]),_:1})]),_:1}),s(t(v),null,{default:a(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(t($),{class:"text-sm font-medium"},{default:a(()=>[...e[15]||(e[15]=[r("Responsable",-1)])]),_:1}),s(t(Fe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(h),null,{default:a(()=>{var n;return[o("div",Ge,d(((n=i.hito.responsable)==null?void 0:n.name)||"Sin asignar"),1),i.hito.responsable?(m(),p("p",Je,d(i.hito.responsable.email),1)):c("",!0)]}),_:1})]),_:1})]),s(t(ce),{modelValue:z.value,"onUpdate:modelValue":e[2]||(e[2]=n=>z.value=n),class:"flex-1"},{default:a(()=>[s(t(fe),null,{default:a(()=>[s(t(D),{value:"detalles"},{default:a(()=>[...e[16]||(e[16]=[r("Detalles",-1)])]),_:1}),s(t(D),{value:"entregables"},{default:a(()=>[e[17]||(e[17]=r(" Entregables ",-1)),s(t(E),{variant:"secondary",class:"ml-2"},{default:a(()=>[r(d(i.estadisticas.total_entregables),1)]),_:1})]),_:1}),s(t(D),{value:"actividad"},{default:a(()=>[...e[18]||(e[18]=[r("Actividad",-1)])]),_:1})]),_:1}),s(t(M),{value:"detalles",class:"space-y-4"},{default:a(()=>[s(t(v),null,{default:a(()=>[s(t(_),null,{default:a(()=>[s(t($),null,{default:a(()=>[...e[19]||(e[19]=[r("Información General",-1)])]),_:1})]),_:1}),s(t(h),{class:"space-y-4"},{default:a(()=>[i.hito.descripcion?(m(),p("div",Ke,[e[20]||(e[20]=o("h3",{class:"font-semibold mb-2"},"Descripción",-1)),o("p",Qe,d(i.hito.descripcion),1)])):c("",!0),o("div",We,[o("div",null,[e[21]||(e[21]=o("h3",{class:"font-semibold mb-2"},"Fecha de Inicio",-1)),o("p",Xe,d(C(i.hito.fecha_inicio)),1)]),o("div",null,[e[22]||(e[22]=o("h3",{class:"font-semibold mb-2"},"Fecha de Fin",-1)),o("p",Ye,d(C(i.hito.fecha_fin)),1)]),o("div",null,[e[23]||(e[23]=o("h3",{class:"font-semibold mb-2"},"Orden",-1)),o("p",Ze,d(i.hito.orden),1)]),o("div",null,[e[24]||(e[24]=o("h3",{class:"font-semibold mb-2"},"Estado",-1)),s(t(E),{class:V(N(i.hito.estado))},{default:a(()=>[r(d(i.hito.estado),1)]),_:1},8,["class"])])]),o("div",null,[e[28]||(e[28]=o("h3",{class:"font-semibold mb-2"},"Resumen de Entregables",-1)),o("div",et,[o("div",tt,[e[25]||(e[25]=o("span",{class:"text-muted-foreground"},"Pendientes",-1)),s(t(E),{variant:"outline"},{default:a(()=>[r(d(i.estadisticas.entregables_pendientes),1)]),_:1})]),o("div",st,[e[26]||(e[26]=o("span",{class:"text-muted-foreground"},"En Progreso",-1)),s(t(E),{variant:"outline",class:"bg-blue-50"},{default:a(()=>[r(d(i.estadisticas.entregables_en_progreso),1)]),_:1})]),o("div",at,[e[27]||(e[27]=o("span",{class:"text-muted-foreground"},"Completados",-1)),s(t(E),{variant:"outline",class:"bg-green-50"},{default:a(()=>[r(d(i.estadisticas.entregables_completados),1)]),_:1})])])])]),_:1})]),_:1}),i.hito.etiquetas&&i.hito.etiquetas.length>0?(m(),y(t(v),{key:0},{default:a(()=>[s(t(_),null,{default:a(()=>[o("div",it,[s(t(Ne),{class:"h-5 w-5"}),s(t($),null,{default:a(()=>[...e[29]||(e[29]=[r("Etiquetas",-1)])]),_:1})]),s(t(A),null,{default:a(()=>[...e[30]||(e[30]=[r(" Etiquetas asignadas a este hito para su organización y categorización ",-1)])]),_:1})]),_:1}),s(t(h),null,{default:a(()=>[o("div",ot,[(m(!0),p(j,null,H(i.hito.etiquetas,n=>(m(),y(t(E),{key:n.id,variant:"outline",class:"px-3 py-1.5",style:ue({borderColor:n.color||"#94a3b8",color:n.color||"#64748b",backgroundColor:`${n.color}15`||"#f1f5f9"})},{default:a(()=>[r(d(n.nombre),1)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})):c("",!0),i.hito.parent_id||i.hito.ruta_completa?(m(),y(t(v),{key:1},{default:a(()=>[s(t(_),null,{default:a(()=>[s(t($),null,{default:a(()=>[...e[31]||(e[31]=[r("Jerarquía",-1)])]),_:1})]),_:1}),s(t(h),null,{default:a(()=>[o("div",lt,[i.hito.ruta_completa?(m(),p("div",nt,[e[32]||(e[32]=o("h3",{class:"font-semibold mb-2"},"Ruta Completa",-1)),o("p",rt,d(i.hito.ruta_completa),1)])):c("",!0),i.hito.nivel!==void 0?(m(),p("div",dt,[e[33]||(e[33]=o("h3",{class:"font-semibold mb-2"},"Nivel",-1)),s(t(E),{variant:"outline"},{default:a(()=>[r("Nivel "+d(i.hito.nivel),1)]),_:1})])):c("",!0)])]),_:1})]),_:1})):c("",!0),i.camposPersonalizados&&i.camposPersonalizados.length>0?(m(),y(t(v),{key:2},{default:a(()=>[s(t(_),null,{default:a(()=>[s(t($),null,{default:a(()=>[...e[34]||(e[34]=[r("Campos Personalizados",-1)])]),_:1}),s(t(A),null,{default:a(()=>[...e[35]||(e[35]=[r(" Información adicional específica del hito ",-1)])]),_:1})]),_:1}),s(t(h),null,{default:a(()=>[o("div",ut,[(m(!0),p(j,null,H(i.camposPersonalizados,n=>{var g;return m(),p("div",{key:n.id},[o("h3",mt,[r(d(n.nombre)+" ",1),n.es_requerido?(m(),p("span",ct,"*")):c("",!0)]),o("p",ft,d(ee(n,(g=i.valoresCamposPersonalizados)==null?void 0:g[n.id])),1),n.descripcion?(m(),p("p",gt,d(n.descripcion),1)):c("",!0)])}),128))]),!i.camposPersonalizados||i.camposPersonalizados.length===0?(m(),p("div",bt,[...e[36]||(e[36]=[o("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):c("",!0)]),_:1})]),_:1})):c("",!0),s(t(v),null,{default:a(()=>[s(t(_),null,{default:a(()=>[s(t($),null,{default:a(()=>[...e[37]||(e[37]=[r("Información del Sistema",-1)])]),_:1})]),_:1}),s(t(h),null,{default:a(()=>[o("div",pt,[o("div",null,[e[38]||(e[38]=o("span",{class:"text-muted-foreground"},"Creado el:",-1)),o("p",vt,d(T(i.hito.created_at)),1)]),o("div",null,[e[39]||(e[39]=o("span",{class:"text-muted-foreground"},"Última actualización:",-1)),o("p",ht,d(T(i.hito.updated_at)),1)]),i.hito.created_by_usuario?(m(),p("div",yt,[e[40]||(e[40]=o("span",{class:"text-muted-foreground"},"Creado por:",-1)),o("p",xt,d(i.hito.created_by_usuario.name),1)])):c("",!0),i.hito.updated_by_usuario?(m(),p("div",_t,[e[41]||(e[41]=o("span",{class:"text-muted-foreground"},"Actualizado por:",-1)),o("p",$t,d(i.hito.updated_by_usuario.name),1)])):c("",!0)])]),_:1})]),_:1})]),_:1}),s(t(M),{value:"entregables",class:"space-y-4"},{default:a(()=>[o("div",wt,[e[43]||(e[43]=o("h2",{class:"text-lg font-semibold"},"Lista de Entregables",-1)),i.canManageEntregables?(m(),y(t(k),{key:0,onClick:F,size:"sm"},{default:a(()=>[s(t(L),{class:"h-4 w-4 mr-2"}),e[42]||(e[42]=r(" Nuevo Entregable ",-1))]),_:1})):c("",!0)]),i.hito.entregables&&i.hito.entregables.length>0?(m(),y(we,{key:0,modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=n=>f.value=n),usuarios:se.value},null,8,["modelValue","usuarios"])):c("",!0),s(t(v),null,{default:a(()=>[s(t(h),{class:"p-0"},{default:a(()=>[s(Ee,{entregables:te.value,"proyecto-id":i.proyecto.id,"hito-id":i.hito.id,"can-edit":i.canManageEntregables,"can-delete":i.canManageEntregables,"can-complete":i.canManageEntregables,"show-checkbox":!1,onView:Q,onEdit:W,onDelete:X,onComplete:Y,onMarkInProgress:Z},null,8,["entregables","proyecto-id","hito-id","can-edit","can-delete","can-complete"])]),_:1})]),_:1}),!i.hito.entregables||i.hito.entregables.length===0?(m(),y(t(v),{key:1},{default:a(()=>[s(t(h),{class:"text-center py-8"},{default:a(()=>[s(t(I),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e[45]||(e[45]=o("p",{class:"text-muted-foreground mb-4"},"No hay entregables asignados a este hito",-1)),i.canManageEntregables?(m(),y(t(k),{key:0,onClick:F,variant:"outline"},{default:a(()=>[s(t(L),{class:"h-4 w-4 mr-2"}),e[44]||(e[44]=r(" Crear Primer Entregable ",-1))]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0)]),_:1}),s(t(M),{value:"actividad",class:"space-y-4"},{default:a(()=>[i.actividades&&i.actividades.length>0?(m(),y(ke,{key:0,modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=n=>b.value=n),usuarios:i.usuariosActividades,"context-level":"hito"},null,8,["modelValue","usuarios"])):c("",!0),s(Ce,{activities:ae.value,title:"Historial de Actividad",description:"Registro de cambios y actividades del hito y sus entregables","empty-message":"No hay actividad registrada"},null,8,["activities"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{qs as default};
