import{r as R,c as X,d as Q,i as x,e as c,g as v,f as e,t as $,m as n,p as Z,b as y,w as d,j as C,h as T,F as B,k as U,n as K,I as re,o as le}from"./app-DDUuJmlD.js";import{_ as ee,c as te,a as ie,b as ce}from"./CardTitle.vue_vue_type_script_setup_true_lang-DgnVqcak.js";import{_ as ue}from"./CardDescription.vue_vue_type_script_setup_true_lang-D8EoRgB6.js";import{c as ae,_ as z}from"./createLucideIcon-Bg1XJggj.js";import{_ as W}from"./Skeleton.vue_vue_type_script_setup_true_lang-Diahkv2c.js";import{R as me}from"./RichTextEditor-yY1Z-Xkd.js";import{X as de}from"./x-CfVtqyCR.js";import{L as se}from"./loader-circle-Dbb5jFm0.js";import{S as fe}from"./send-CdFjc3B9.js";import{b as pe,_ as ve}from"./index-CvBHxVi8.js";import{_ as ge}from"./index-BiXuha3L.js";import{b as he,c as ye,g as Y,d as xe}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C_C82_tg.js";import{_ as Ce,a as _e,b as ke}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DD_W3GoS.js";import{C as Re}from"./clock-C9gzEIFf.js";import{M as J}from"./message-square-SQ7rHRuZ.js";import{E as be}from"./ellipsis-DD8bXzo_.js";import{S as we}from"./square-pen-CJmkx79i.js";import{T as $e}from"./trash-2-Dc3r8p3R.js";import{C as Ee}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dx89iQRK.js";import{C as Te}from"./chevron-right-G8IEVF8E.js";import{t as F}from"./index-D4GCKZH4.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=ae("QuoteIcon",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=ae("SmilePlusIcon",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);function Me(s,S){const m=R([]),r=R(!1),g=R(null),f=R(1),E=R(1),k=R(0),L={thumbs_up:"üëç",thumbs_down:"üëé",heart:"‚ù§Ô∏è",laugh:"üòÑ",clap:"üëè",fire:"üî•",check:"‚úÖ",eyes:"üëÄ"},b=`/api/comentarios/${s}/${S}`,_=async(o=1)=>{r.value=!0,g.value=null;try{const a=await(await fetch(`${b}?page=${o}`,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"})).json();if(a.success&&a.data)o===1?m.value=a.data.data:m.value=[...m.value,...a.data.data],f.value=a.data.current_page,E.value=a.data.last_page,k.value=a.data.total;else throw new Error(a.message||"Error al cargar comentarios")}catch(t){g.value=t instanceof Error?t.message:"Error desconocido",console.error("Error cargando comentarios:",t)}finally{r.value=!1}},p=async()=>{f.value<E.value&&await _(f.value+1)},h=async o=>{r.value=!0,g.value=null;try{const a=await(await fetch(b,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":q()},credentials:"same-origin",body:JSON.stringify(o)})).json();return a.success&&a.comentario&&(o.parent_id?O(o.parent_id,a.comentario):(m.value=[a.comentario,...m.value],k.value++)),a}catch(t){const a=t instanceof Error?t.message:"Error al crear comentario";return g.value=a,{success:!1,message:a}}finally{r.value=!1}},w=async(o,t)=>{r.value=!0,g.value=null;try{const l=await(await fetch(`/api/comentarios/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":q()},credentials:"same-origin",body:JSON.stringify(t)})).json();return l.success&&l.comentario&&P(l.comentario),l}catch(a){const l=a instanceof Error?a.message:"Error al actualizar comentario";return g.value=l,{success:!1,message:l}}finally{r.value=!1}},M=async o=>{r.value=!0,g.value=null;try{const a=await(await fetch(`/api/comentarios/${o}`,{method:"DELETE",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":q()},credentials:"same-origin"})).json();return a.success&&(I(o),k.value--),a}catch(t){const a=t instanceof Error?t.message:"Error al eliminar comentario";return g.value=a,{success:!1,message:a}}finally{r.value=!1}},N=async(o,t)=>{try{const l=await(await fetch(`/api/comentarios/${o}/reaccion`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":q()},credentials:"same-origin",body:JSON.stringify({emoji:t})})).json();return l.success&&l.reacciones&&D(o,l.reacciones),l}catch(a){return{success:!1,message:a instanceof Error?a.message:"Error al agregar reacci√≥n"}}},q=()=>{var t;return((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},O=(o,t)=>{const a=l=>{for(const i of l){if(i.id===o)return i.respuestas||(i.respuestas=[]),i.respuestas.push(t),!0;if(i.respuestas&&a(i.respuestas))return!0}return!1};a(m.value)},P=o=>{const t=a=>{for(let l=0;l<a.length;l++){if(a[l].id===o.id)return a[l]={...o,respuestas:a[l].respuestas},!0;if(a[l].respuestas&&t(a[l].respuestas))return!0}return!1};t(m.value)},I=o=>{const t=a=>a.filter(l=>l.id!==o).map(l=>({...l,respuestas:l.respuestas?t(l.respuestas):void 0}));m.value=t(m.value)},D=(o,t)=>{const a=l=>{for(const i of l){if(i.id===o)return i.reacciones_resumen=t,!0;if(i.respuestas&&a(i.respuestas))return!0}return!1};a(m.value)},V=X(()=>m.value.length>0),H=X(()=>f.value<E.value);return{comentarios:m,loading:r,error:g,currentPage:f,lastPage:E,total:k,emojis:L,tieneComentarios:V,puedeCargarMas:H,cargar:_,cargarMas:p,crear:h,editar:w,eliminar:M,toggleReaccion:N}}const qe={class:"flex items-start gap-2 p-3 bg-muted/50 rounded-md border-l-4 border-primary/30 text-sm"},je={class:"flex-1 min-w-0"},ze={class:"flex items-center gap-2 mb-1"},Le={class:"font-medium text-xs"},Xe={class:"text-xs text-muted-foreground"},Fe=["innerHTML"],ne=Q({__name:"ComentarioQuote",props:{comentario:{}},setup(s){return(S,m)=>{var r;return n(),x("div",qe,[c(e(oe),{class:"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5"}),v("div",je,[v("div",ze,[v("span",Le,$(((r=s.comentario.autor)==null?void 0:r.name)||"Usuario"),1),v("span",Xe,$(s.comentario.fecha_relativa),1)]),v("p",{class:"text-muted-foreground line-clamp-2",innerHTML:s.comentario.contenido_truncado||s.comentario.contenido_plain},null,8,Fe)])])}}}),Ne={key:1,class:"flex items-center gap-2 text-sm text-muted-foreground"},Oe={class:"font-medium"},Pe={class:"flex items-center justify-end gap-2"},G=Q({__name:"ComentarioForm",props:{mode:{default:"create"},comentarioEditar:{default:null},comentarioCitar:{default:null},comentarioResponder:{default:null},loading:{type:Boolean,default:!1},placeholder:{default:"Escribe un comentario..."}},emits:["submit","cancel"],setup(s,{expose:S,emit:m}){const r=s,g=m,f=R("");Z(()=>r.comentarioEditar,p=>{p&&(f.value=p.contenido)},{immediate:!0});const E=X(()=>{switch(r.mode){case"edit":return"Guardar cambios";case"reply":return"Responder";case"quote":return"Comentar";default:return"Comentar"}}),k=X(()=>{var p,h;switch(r.mode){case"reply":return`Responder a ${((h=(p=r.comentarioResponder)==null?void 0:p.autor)==null?void 0:h.name)||"usuario"}...`;case"quote":return"Escribe tu comentario sobre la cita...";default:return r.placeholder}}),L=X(()=>f.value.replace(/<[^>]*>/g,"").trim().length>0),b=()=>{var w,M;if(!L.value||r.loading)return;const p=r.mode==="reply"&&((w=r.comentarioResponder)==null?void 0:w.id)||null,h=r.mode==="quote"&&((M=r.comentarioCitar)==null?void 0:M.id)||null;g("submit",f.value,p,h),r.mode!=="edit"&&(f.value="")},_=()=>{f.value="",g("cancel")};return S({clear:()=>{f.value=""}}),(p,h)=>(n(),y(e(ee),{class:"border-0 shadow-none"},{default:d(()=>[c(e(te),{class:"p-0 space-y-3"},{default:d(()=>{var w;return[s.mode==="quote"&&s.comentarioCitar?(n(),y(ne,{key:0,comentario:s.comentarioCitar},null,8,["comentario"])):C("",!0),s.mode==="reply"&&s.comentarioResponder?(n(),x("div",Ne,[h[1]||(h[1]=v("span",null,"Respondiendo a",-1)),v("span",Oe,$((w=s.comentarioResponder.autor)==null?void 0:w.name),1),c(e(z),{variant:"ghost",size:"sm",class:"h-5 w-5 p-0 ml-auto",onClick:_},{default:d(()=>[c(e(de),{class:"h-3 w-3"})]),_:1})])):C("",!0),c(me,{modelValue:f.value,"onUpdate:modelValue":h[0]||(h[0]=M=>f.value=M),placeholder:k.value,rows:3},null,8,["modelValue","placeholder"]),v("div",Pe,[s.mode!=="create"?(n(),y(e(z),{key:0,variant:"ghost",size:"sm",onClick:_,disabled:s.loading},{default:d(()=>[...h[2]||(h[2]=[T(" Cancelar ",-1)])]),_:1},8,["disabled"])):C("",!0),c(e(z),{size:"sm",onClick:b,disabled:!L.value||s.loading},{default:d(()=>[s.loading?(n(),y(e(se),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(n(),y(e(fe),{key:1,class:"h-4 w-4 mr-2"})),T(" "+$(E.value),1)]),_:1},8,["disabled"])])]}),_:1})]),_:1}))}}),Be={class:"flex items-center gap-1.5 flex-wrap"},Ie={class:"text-muted-foreground"},De={class:"flex gap-1"},Ve=Q({__name:"ComentarioReacciones",props:{reacciones:{default:()=>[]},canReact:{type:Boolean,default:!0}},emits:["toggle"],setup(s,{emit:S}){const m=s,r=S,g={thumbs_up:"üëç",thumbs_down:"üëé",heart:"‚ù§Ô∏è",laugh:"üòÑ",clap:"üëè",fire:"üî•",check:"‚úÖ",eyes:"üëÄ"},f=R(!1),E=X(()=>[...m.reacciones].sort((b,_)=>_.count-b.count)),k=b=>{const _=m.reacciones.find(p=>p.emoji===b);return(_==null?void 0:_.usuario_actual_reacciono)||!1},L=b=>{r("toggle",b),f.value=!1};return(b,_)=>(n(),x("div",Be,[(n(!0),x(B,null,U(E.value,p=>(n(),y(e(z),{key:p.emoji,variant:"ghost",size:"sm",class:K(["h-7 px-2 text-xs gap-1",{"bg-primary/10 hover:bg-primary/20":p.usuario_actual_reacciono}]),onClick:h=>L(p.emoji),disabled:!s.canReact},{default:d(()=>[v("span",null,$(p.simbolo),1),v("span",Ie,$(p.count),1)]),_:2},1032,["class","onClick","disabled"]))),128)),s.canReact?(n(),y(e(Ce),{key:0,open:f.value,"onUpdate:open":_[0]||(_[0]=p=>f.value=p)},{default:d(()=>[c(e(_e),{asChild:""},{default:d(()=>[c(e(z),{variant:"ghost",size:"sm",class:"h-7 w-7 p-0"},{default:d(()=>[c(e(Se),{class:"h-4 w-4 text-muted-foreground"})]),_:1})]),_:1}),c(e(ke),{class:"w-auto p-2",align:"start"},{default:d(()=>[v("div",De,[(n(),x(B,null,U(g,(p,h)=>c(e(z),{key:h,variant:"ghost",size:"sm",class:K(["h-8 w-8 p-0 text-lg hover:scale-125 transition-transform",{"bg-primary/10":k(h)}]),onClick:w=>L(h)},{default:d(()=>[T($(p),1)]),_:2},1032,["class","onClick"])),64))])]),_:1})]),_:1},8,["open"])):C("",!0)]))}}),He={class:"flex gap-3"},Ae={class:"flex-1 min-w-0"},Ue={class:"flex items-center gap-2 flex-wrap"},Qe={class:"font-medium text-sm"},We={class:"text-xs text-muted-foreground"},Ke={key:1,class:"text-xs text-muted-foreground flex items-center gap-1"},Je={key:0,class:"mt-2"},Ge=["innerHTML"],Ye={class:"mt-2"},Ze={class:"flex items-center gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity"},et={key:2,class:"mt-3"},tt={key:0,class:"mt-3 space-y-3"},at=Q({__name:"ComentarioItem",props:{comentario:{},nivel:{default:0},canCreate:{type:Boolean,default:!0},canReact:{type:Boolean,default:!0}},emits:["reply","quote","edit","delete","toggleReaccion"],setup(s,{emit:S}){const m=s,r=S,g=R(!1),f=R(!1),E=R(!1),k=R(!1),L=X(()=>{const o=t=>{var l,i;let a=((l=t.respuestas)==null?void 0:l.length)||0;return(i=t.respuestas)==null||i.forEach(u=>{a+=o(u)}),a};return o(m.comentario)}),b=X(()=>{var o;return(((o=m.comentario.respuestas)==null?void 0:o.length)||0)>0}),_=X(()=>{var t;return(((t=m.comentario.autor)==null?void 0:t.name)||"U").substring(0,2).toUpperCase()}),p=X(()=>m.comentario.es_editable||!1),h=X(()=>{const o=m.comentario.tiempo_restante_edicion;if(!o||o<=0)return null;const t=Math.floor(o/60),a=o%60;return t>0?`${t}h ${a}m para editar`:`${a}m para editar`}),w=()=>{g.value=!g.value},M=()=>{f.value=!0},N=(o,t,a)=>{r("reply",m.comentario),f.value=!1},q=()=>{f.value=!1},O=()=>{r("quote",m.comentario)},P=()=>{E.value=!0},I=o=>{r("edit",m.comentario,o),E.value=!1},D=()=>{E.value=!1},V=()=>{k.value?(r("delete",m.comentario),k.value=!1):(k.value=!0,setTimeout(()=>{k.value=!1},3e3))},H=o=>{r("toggleReaccion",m.comentario.id,o)};return(o,t)=>{var l;const a=re("ComentarioItem",!0);return n(),x("div",{class:K(["group",{"ml-6 border-l-2 border-muted pl-4":s.nivel>0}])},[v("div",He,[c(e(ve),{class:"h-8 w-8 flex-shrink-0"},{default:d(()=>[c(e(pe),{class:"text-xs"},{default:d(()=>[T($(_.value),1)]),_:1})]),_:1}),v("div",Ae,[v("div",Ue,[v("span",Qe,$(((l=s.comentario.autor)==null?void 0:l.name)||"Usuario"),1),v("span",We,$(s.comentario.fecha_relativa),1),s.comentario.es_editado?(n(),y(e(ge),{key:0,variant:"outline",class:"text-xs h-5"},{default:d(()=>[...t[6]||(t[6]=[T(" editado ",-1)])]),_:1})):C("",!0),h.value?(n(),x("span",Ke,[c(e(Re),{class:"h-3 w-3"}),T(" "+$(h.value),1)])):C("",!0)]),E.value?(n(),x("div",Je,[c(G,{mode:"edit","comentario-editar":s.comentario,onSubmit:t[0]||(t[0]=i=>I(i)),onCancel:D},null,8,["comentario-editar"])])):(n(),x(B,{key:1},[s.comentario.comentario_citado?(n(),y(ne,{key:0,comentario:s.comentario.comentario_citado,class:"mt-2"},null,8,["comentario"])):C("",!0),v("div",{class:"mt-1 text-sm prose prose-sm dark:prose-invert max-w-none",innerHTML:s.comentario.contenido},null,8,Ge),v("div",Ye,[c(Ve,{reacciones:s.comentario.reacciones_resumen||[],"can-react":s.canReact,onToggle:H},null,8,["reacciones","can-react"])]),v("div",Ze,[s.canCreate?(n(),y(e(z),{key:0,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:M},{default:d(()=>[c(e(J),{class:"h-3 w-3 mr-1"}),t[7]||(t[7]=T(" Responder ",-1))]),_:1})):C("",!0),s.canCreate?(n(),y(e(z),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:O},{default:d(()=>[c(e(oe),{class:"h-3 w-3 mr-1"}),t[8]||(t[8]=T(" Citar ",-1))]),_:1})):C("",!0),p.value||s.comentario.es_eliminable?(n(),y(e(he),{key:2},{default:d(()=>[c(e(ye),{asChild:""},{default:d(()=>[c(e(z),{variant:"ghost",size:"sm",class:"h-7 w-7 p-0"},{default:d(()=>[c(e(be),{class:"h-4 w-4"})]),_:1})]),_:1}),c(e(xe),{align:"end"},{default:d(()=>[s.comentario.es_editable?(n(),y(e(Y),{key:0,onClick:P},{default:d(()=>[c(e(we),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=T(" Editar ",-1))]),_:1})):C("",!0),s.comentario.es_eliminable?(n(),y(e(Y),{key:1,class:"text-destructive",onClick:V},{default:d(()=>[c(e($e),{class:"h-4 w-4 mr-2"}),T(" "+$(k.value?"Confirmar eliminaci√≥n":"Eliminar"),1)]),_:1})):C("",!0)]),_:1})]),_:1})):C("",!0),b.value?(n(),y(e(z),{key:3,variant:"ghost",size:"sm",class:"h-7 text-xs ml-auto",onClick:w},{default:d(()=>[g.value?(n(),y(e(Te),{key:1,class:"h-3 w-3 mr-1"})):(n(),y(e(Ee),{key:0,class:"h-3 w-3 mr-1"})),T(" "+$(g.value?`Mostrar ${L.value} respuestas`:"Ocultar respuestas"),1)]),_:1})):C("",!0)])],64)),f.value?(n(),x("div",et,[c(G,{mode:"reply","comentario-responder":s.comentario,onSubmit:N,onCancel:q},null,8,["comentario-responder"])])):C("",!0)])]),b.value&&!g.value?(n(),x("div",tt,[(n(!0),x(B,null,U(s.comentario.respuestas,i=>(n(),y(a,{key:i.id,comentario:i,nivel:s.nivel+1,"can-create":s.canCreate,"can-react":s.canReact,onReply:t[1]||(t[1]=u=>r("reply",u)),onQuote:t[2]||(t[2]=u=>r("quote",u)),onEdit:t[3]||(t[3]=u=>r("edit",u,u)),onDelete:t[4]||(t[4]=u=>r("delete",u)),onToggleReaccion:t[5]||(t[5]=u=>r("toggleReaccion",u,u))},null,8,["comentario","nivel","can-create","can-react"]))),128))])):C("",!0)],2)}}}),st={class:"flex items-center justify-between"},ot={key:0},nt={key:1,class:"space-y-4"},rt={class:"flex-1 space-y-2"},lt={key:2,class:"text-center py-8 text-destructive"},it={key:3,class:"text-center py-8"},ct={key:0,class:"text-sm text-muted-foreground mt-1"},ut={key:4,class:"space-y-4"},mt={key:0,class:"text-center pt-4"},zt=Q({__name:"ComentariosPanel",props:{commentableType:{},commentableId:{},canCreate:{type:Boolean,default:!0},canReact:{type:Boolean,default:!0}},setup(s){const S=s,{comentarios:m,loading:r,error:g,total:f,puedeCargarMas:E,cargar:k,cargarMas:L,crear:b,editar:_,eliminar:p,toggleReaccion:h}=Me(S.commentableType,S.commentableId),w=R("create"),M=R(null),N=R(null),q=R(null),O=R(!1),P=R(null);le(()=>{k()}),Z(()=>[S.commentableType,S.commentableId],()=>{k()});const I=async(i,u,j)=>{O.value=!0;try{if(w.value==="edit"&&q.value){const A=await _(q.value.id,{contenido:i});A.success?(F.success("Comentario actualizado"),a()):F.error(A.message||"Error al actualizar")}else{const A=await b({contenido:i,parent_id:u,quoted_comentario_id:j});A.success?(F.success(u?"Respuesta enviada":"Comentario publicado"),a()):F.error(A.message||"Error al publicar")}}finally{O.value=!1}},D=i=>{w.value="reply",M.value=i,N.value=null,q.value=null},V=i=>{w.value="quote",N.value=i,M.value=null,q.value=null},H=async(i,u)=>{const j=await _(i.id,{contenido:u});j.success?F.success("Comentario actualizado"):F.error(j.message||"Error al actualizar")},o=async i=>{const u=await p(i.id);u.success?F.success("Comentario eliminado"):F.error(u.message||"Error al eliminar")},t=async(i,u)=>{const j=await h(i,u);j.success||F.error(j.message||"Error al agregar reacci√≥n")},a=()=>{var i;w.value="create",M.value=null,N.value=null,q.value=null,(i=P.value)==null||i.clear()},l=()=>{a()};return(i,u)=>(n(),y(e(ee),null,{default:d(()=>[c(e(ie),null,{default:d(()=>[v("div",st,[v("div",null,[c(e(ce),{class:"flex items-center gap-2"},{default:d(()=>[c(e(J),{class:"h-5 w-5"}),u[1]||(u[1]=T(" Comentarios ",-1))]),_:1}),e(f)>0?(n(),y(e(ue),{key:0},{default:d(()=>[T($(e(f))+" "+$(e(f)===1?"comentario":"comentarios"),1)]),_:1})):C("",!0)])])]),_:1}),c(e(te),{class:"space-y-6"},{default:d(()=>[s.canCreate?(n(),x("div",ot,[c(G,{ref_key:"formRef",ref:P,mode:w.value,"comentario-editar":q.value,"comentario-citar":N.value,"comentario-responder":M.value,loading:O.value,onSubmit:I,onCancel:l},null,8,["mode","comentario-editar","comentario-citar","comentario-responder","loading"])])):C("",!0),e(r)&&e(m).length===0?(n(),x("div",nt,[(n(),x(B,null,U(3,j=>v("div",{key:j,class:"flex gap-3"},[c(e(W),{class:"h-8 w-8 rounded-full"}),v("div",rt,[c(e(W),{class:"h-4 w-32"}),c(e(W),{class:"h-16 w-full"})])])),64))])):e(g)?(n(),x("div",lt,[v("p",null,$(e(g)),1),c(e(z),{variant:"outline",size:"sm",class:"mt-2",onClick:u[0]||(u[0]=j=>e(k)())},{default:d(()=>[...u[2]||(u[2]=[T(" Reintentar ",-1)])]),_:1})])):e(m).length===0?(n(),x("div",it,[c(e(J),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),u[3]||(u[3]=v("p",{class:"text-muted-foreground"},"No hay comentarios todav√≠a",-1)),s.canCreate?(n(),x("p",ct," S√© el primero en comentar ")):C("",!0)])):(n(),x("div",ut,[(n(!0),x(B,null,U(e(m),j=>(n(),y(at,{key:j.id,comentario:j,"can-create":s.canCreate,"can-react":s.canReact,onReply:D,onQuote:V,onEdit:H,onDelete:o,onToggleReaccion:t},null,8,["comentario","can-create","can-react"]))),128)),e(E)?(n(),x("div",mt,[c(e(z),{variant:"outline",size:"sm",disabled:e(r),onClick:e(L)},{default:d(()=>[e(r)?(n(),y(e(se),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):C("",!0),u[4]||(u[4]=T(" Cargar m√°s comentarios ",-1))]),_:1},8,["disabled","onClick"])])):C("",!0)]))]),_:1})]),_:1}))}});export{zt as _};
