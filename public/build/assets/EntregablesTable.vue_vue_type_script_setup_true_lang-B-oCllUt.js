import{d as cs,r as fs,c as ds,i,b as u,j as c,g as f,e,h as n,n as es,x as E,t as d,f as s,w as l,F as w,k as g,m as a,l as N,y as T}from"./app-BrD2QGCV.js";import{_ as L,a as j,b as y,c as p,d as A,e as x}from"./TableHeader.vue_vue_type_script_setup_true_lang-ByXequ3_.js";import{_ as z}from"./Checkbox.vue_vue_type_script_setup_true_lang-Bsdl3ZMu.js";import{c as ms,_}from"./createLucideIcon-CfvjSeOT.js";import{_ as k}from"./index-CNCNgiGH.js";import{_ as O,a as G,b as H}from"./index-C-zWBZWq.js";import{C as V}from"./circle-alert-C3pua8qZ.js";import{E as J}from"./eye-CJEUMqxr.js";import{S as K}from"./square-pen-CirwZveB.js";import{C as as}from"./clock-4chQLfX0.js";import{C as ls}from"./circle-check-BqkTo4ZH.js";import{T as Q}from"./trash-2-CDmVNBir.js";import{C as W}from"./calendar-CYwFKqbN.js";import{U as X}from"./users-CKUBvxrh.js";import{e as xs,C as ps}from"./SelectValue.vue_vue_type_script_setup_true_lang-r_ipOL3R.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=ms("CircleDotIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),hs={key:0,class:"space-y-6"},_s={key:0},ks={class:"font-semibold mb-3 flex items-center gap-2"},vs={class:"font-medium"},ys={key:0,class:"text-sm text-muted-foreground line-clamp-2"},Cs={key:1,class:"flex items-center gap-1 mt-1"},ws={class:"text-xs text-red-600"},gs={key:2,class:"flex items-center gap-1 mt-1"},Es={class:"text-xs text-orange-600"},$s={class:"flex gap-1 mt-2"},Vs={key:0,class:"flex items-center gap-2"},zs={class:"text-sm"},Us={key:1,class:"text-sm text-muted-foreground"},Ds={class:"flex items-center gap-1"},Ps={class:"text-sm"},qs={key:0,class:"flex items-center gap-1"},Fs={class:"text-sm"},Ss={key:1,class:"text-sm text-muted-foreground"},Rs={key:0,class:"flex flex-wrap gap-1"},Bs={key:1,class:"text-sm text-muted-foreground"},Is={key:1},Ms={class:"font-semibold mb-3 flex items-center gap-2"},Ns={class:"font-medium"},Ts={key:0,class:"text-sm text-muted-foreground line-clamp-2"},Ls={key:1,class:"flex items-center gap-1 mt-1"},js={class:"text-xs text-red-600"},As={key:2,class:"flex items-center gap-1 mt-1"},Os={class:"text-xs text-orange-600"},Gs={class:"flex gap-1 mt-2"},Hs={key:0,class:"flex items-center gap-2"},Js={class:"text-sm"},Ks={key:1,class:"text-sm text-muted-foreground"},Qs={class:"flex items-center gap-1"},Ws={class:"text-sm"},Xs={key:0,class:"flex items-center gap-1"},Ys={class:"text-sm"},Zs={key:1,class:"text-sm text-muted-foreground"},bs={key:0,class:"flex flex-wrap gap-1"},st={key:1,class:"text-sm text-muted-foreground"},tt={key:2},et={class:"font-semibold mb-3 flex items-center gap-2"},lt={class:"font-medium line-through text-muted-foreground"},ot={key:0,class:"text-sm text-muted-foreground line-clamp-2"},at={class:"flex gap-1 mt-2"},nt={key:0,class:"flex items-center gap-2"},dt={class:"text-sm"},it={key:1,class:"text-sm text-muted-foreground"},ut={class:"flex items-center gap-1"},rt={class:"text-sm"},ct={key:0,class:"flex items-center gap-1"},ft={class:"text-sm"},mt={key:1,class:"text-sm text-muted-foreground"},xt={key:0,class:"flex flex-wrap gap-1"},pt={key:1,class:"text-sm text-muted-foreground"},ht={key:3},_t={class:"font-semibold mb-3 flex items-center gap-2"},kt={class:"font-medium line-through"},vt={key:0,class:"text-sm text-muted-foreground line-clamp-2"},yt={class:"flex gap-1 mt-2"},Ct={key:0,class:"flex items-center gap-2"},wt={class:"text-sm"},gt={key:1,class:"text-sm text-muted-foreground"},Et={class:"flex items-center gap-1"},$t={class:"text-sm"},Vt={key:0,class:"flex items-center gap-1"},zt={class:"text-sm"},Ut={key:1,class:"text-sm text-muted-foreground"},Dt={key:0,class:"flex flex-wrap gap-1"},Pt={key:1,class:"text-sm text-muted-foreground"},qt={key:4,class:"text-center py-8"},Ft={class:"font-medium"},St={key:0,class:"text-sm text-muted-foreground"},Rt={key:1,class:"flex items-center gap-1 mt-1"},Bt={class:"text-xs text-red-600"},It={key:2,class:"flex items-center gap-1 mt-1"},Mt={class:"text-xs text-orange-600"},Nt={class:"flex gap-1 mt-2"},Tt={key:0,class:"flex items-center gap-2"},Lt={class:"text-sm"},jt={key:1,class:"text-sm text-muted-foreground"},At={class:"flex items-center gap-1"},Ot={class:"text-sm"},Gt={key:0,class:"flex items-center gap-1"},Ht={class:"text-sm"},Jt={key:1,class:"text-sm text-muted-foreground"},Kt={key:0,class:"flex flex-wrap gap-1"},Qt={key:1,class:"text-sm text-muted-foreground"},re=cs({__name:"EntregablesTable",props:{entregables:{},proyectoId:{},hitoId:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!0},grouped:{type:Boolean,default:!1}},emits:["view","edit","delete","complete","mark-in-progress","selection-change"],setup(h,{emit:us}){const Y=h,$=us,C=fs([]),U=ds(()=>Y.entregables.map(r=>({...r,diasRestantes:ts(r.fecha_fin),estaVencido:r.fecha_fin&&ts(r.fecha_fin)<0,estaProximoVencer:r.fecha_fin&&ts(r.fecha_fin)>=0&&ts(r.fecha_fin)<=7}))),v=ds(()=>Y.grouped?{pendientes:U.value.filter(r=>r.estado==="pendiente"),en_progreso:U.value.filter(r=>r.estado==="en_progreso"),completados:U.value.filter(r=>r.estado==="completado"),cancelados:U.value.filter(r=>r.estado==="cancelado")}:null),Z=r=>{switch(r){case"completado":return ls;case"en_progreso":return as;case"pendiente":return V;default:return is}},b=r=>({pendiente:"Pendientes",en_progreso:"En Progreso",completado:"Completados",cancelado:"Cancelados"})[r]||r,ss=r=>({pendiente:"text-yellow-600",en_progreso:"text-blue-600",completado:"text-green-600",cancelado:"text-red-600"})[r]||"text-gray-600",rs=()=>{C.value.length===Y.entregables.length?C.value=[]:C.value=Y.entregables.map(r=>r.id),$("selection-change",C.value)},D=r=>C.value.includes(r),P=r=>{const o=C.value.indexOf(r);o>-1?C.value.splice(o,1):C.value.push(r),$("selection-change",C.value)},q=r=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[r]||"secondary",F=r=>({baja:"outline",media:"default",alta:"destructive"})[r]||"outline",S=r=>r==="alta"?xs:r==="baja"?ps:is,R=r=>r?new Date(r).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"-",ts=r=>{if(!r)return null;const o=new Date,m=new Date(r).getTime()-o.getTime();return Math.ceil(m/(1e3*60*60*24))},B=r=>{$("view",r)},I=r=>{$("edit",r)},os=r=>{$("complete",r)},M=r=>{$("delete",r)},ns=r=>{$("mark-in-progress",r)};return(r,o)=>h.grouped?(a(),i("div",hs,[v.value.pendientes.length>0?(a(),i("div",_s,[f("h3",ks,[(a(),u(E(Z("pendiente")),{class:es(["h-5 w-5",ss("pendiente")])},null,8,["class"])),n(" "+d(b("pendiente"))+" ("+d(v.value.pendientes.length)+") ",1)]),e(s(L),null,{default:l(()=>[e(s(j),null,{default:l(()=>[e(s(y),null,{default:l(()=>[h.showCheckbox?(a(),u(s(p),{key:0,class:"w-[40px]"})):c("",!0),e(s(p),null,{default:l(()=>[...o[5]||(o[5]=[n("Entregable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[6]||(o[6]=[n("Responsable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[7]||(o[7]=[n("Estado",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[8]||(o[8]=[n("Prioridad",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[9]||(o[9]=[n("Fecha Fin",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[10]||(o[10]=[n("Colaboradores",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[11]||(o[11]=[n("Etiquetas",-1)])]),_:1})]),_:1})]),_:1}),e(s(A),null,{default:l(()=>[(a(!0),i(w,null,g(v.value.pendientes,t=>(a(),u(s(y),{key:t.id,class:"hover:bg-muted/50"},{default:l(()=>[h.showCheckbox?(a(),u(s(x),{key:0,onClick:o[0]||(o[0]=N(()=>{},["stop"]))},{default:l(()=>[e(s(z),{checked:D(t.id),"onUpdate:checked":()=>P(t.id)},null,8,["checked","onUpdate:checked"])]),_:2},1024)):c("",!0),e(s(x),null,{default:l(()=>[f("div",null,[f("p",vs,d(t.nombre),1),t.descripcion?(a(),i("p",ys,d(t.descripcion),1)):c("",!0),t.estaVencido?(a(),i("div",Cs,[e(s(V),{class:"h-3 w-3 text-red-600"}),f("span",ws,"Vencido hace "+d(Math.abs(t.diasRestantes))+" días",1)])):t.estaProximoVencer?(a(),i("div",gs,[e(s(V),{class:"h-3 w-3 text-orange-600"}),f("span",Es,"Vence en "+d(t.diasRestantes)+" días",1)])):c("",!0),f("div",$s,[e(s(_),{variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>B(t)},{default:l(()=>[e(s(J),{class:"mr-1 h-3 w-3"}),o[12]||(o[12]=n(" Ver ",-1))]),_:1},8,["onClick"]),h.canEdit?(a(),u(s(_),{key:0,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>I(t)},{default:l(()=>[e(s(K),{class:"mr-1 h-3 w-3"}),o[13]||(o[13]=n(" Editar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canEdit&&t.estado==="pendiente"?(a(),u(s(_),{key:1,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-blue-600 hover:text-blue-700",onClick:m=>ns(t)},{default:l(()=>[e(s(as),{class:"mr-1 h-3 w-3"}),o[14]||(o[14]=n(" En Progreso ",-1))]),_:1},8,["onClick"])):c("",!0),h.canComplete&&t.estado!=="completado"?(a(),u(s(_),{key:2,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-green-600 hover:text-green-700",onClick:m=>os(t)},{default:l(()=>[e(s(ls),{class:"mr-1 h-3 w-3"}),o[15]||(o[15]=n(" Completar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canDelete?(a(),u(s(_),{key:3,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-red-600 hover:text-red-700",onClick:m=>M(t)},{default:l(()=>[e(s(Q),{class:"mr-1 h-3 w-3"}),o[16]||(o[16]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):c("",!0)])])]),_:2},1024),e(s(x),null,{default:l(()=>[t.responsable?(a(),i("div",Vs,[e(s(O),{class:"h-8 w-8"},{default:l(()=>[t.responsable.avatar?(a(),u(s(G),{key:0,src:t.responsable.avatar},null,8,["src"])):c("",!0),e(s(H),null,{default:l(()=>[n(d(t.responsable.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),f("span",zs,d(t.responsable.name),1)])):(a(),i("span",Us,"Sin asignar"))]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:q(t.estado)},{default:l(()=>[n(d(t.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:F(t.prioridad)},{default:l(()=>[(a(),u(E(S(t.prioridad)),{class:"mr-1 h-3 w-3"})),n(" "+d(t.prioridad_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[f("div",Ds,[e(s(W),{class:"h-4 w-4 text-muted-foreground"}),f("span",Ps,d(R(t.fecha_fin)),1)])]),_:2},1024),e(s(x),null,{default:l(()=>[t.usuarios&&t.usuarios.length>0?(a(),i("div",qs,[e(s(X),{class:"h-4 w-4 text-muted-foreground"}),f("span",Fs,d(t.usuarios.length),1)])):(a(),i("span",Ss,"-"))]),_:2},1024),e(s(x),null,{default:l(()=>[t.etiquetas&&t.etiquetas.length>0?(a(),i("div",Rs,[(a(!0),i(w,null,g(t.etiquetas.slice(0,2),m=>(a(),u(s(k),{key:m.id,variant:"outline",class:"text-xs",style:T({borderColor:m.color||"#94a3b8",color:m.color||"#64748b"})},{default:l(()=>[n(d(m.nombre),1)]),_:2},1032,["style"]))),128)),t.etiquetas.length>2?(a(),u(s(k),{key:0,variant:"outline",class:"text-xs"},{default:l(()=>[n(" +"+d(t.etiquetas.length-2),1)]),_:2},1024)):c("",!0)])):(a(),i("span",Bs,"-"))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):c("",!0),v.value.en_progreso.length>0?(a(),i("div",Is,[f("h3",Ms,[(a(),u(E(Z("en_progreso")),{class:es(["h-5 w-5",ss("en_progreso")])},null,8,["class"])),n(" "+d(b("en_progreso"))+" ("+d(v.value.en_progreso.length)+") ",1)]),e(s(L),null,{default:l(()=>[e(s(j),null,{default:l(()=>[e(s(y),null,{default:l(()=>[h.showCheckbox?(a(),u(s(p),{key:0,class:"w-[40px]"})):c("",!0),e(s(p),null,{default:l(()=>[...o[17]||(o[17]=[n("Entregable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[18]||(o[18]=[n("Responsable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[19]||(o[19]=[n("Estado",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[20]||(o[20]=[n("Prioridad",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[21]||(o[21]=[n("Fecha Fin",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[22]||(o[22]=[n("Colaboradores",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[23]||(o[23]=[n("Etiquetas",-1)])]),_:1})]),_:1})]),_:1}),e(s(A),null,{default:l(()=>[(a(!0),i(w,null,g(v.value.en_progreso,t=>(a(),u(s(y),{key:t.id,class:"hover:bg-muted/50"},{default:l(()=>[h.showCheckbox?(a(),u(s(x),{key:0,onClick:o[1]||(o[1]=N(()=>{},["stop"]))},{default:l(()=>[e(s(z),{checked:D(t.id),"onUpdate:checked":()=>P(t.id)},null,8,["checked","onUpdate:checked"])]),_:2},1024)):c("",!0),e(s(x),null,{default:l(()=>[f("div",null,[f("p",Ns,d(t.nombre),1),t.descripcion?(a(),i("p",Ts,d(t.descripcion),1)):c("",!0),t.estaVencido?(a(),i("div",Ls,[e(s(V),{class:"h-3 w-3 text-red-600"}),f("span",js,"Vencido hace "+d(Math.abs(t.diasRestantes))+" días",1)])):t.estaProximoVencer?(a(),i("div",As,[e(s(V),{class:"h-3 w-3 text-orange-600"}),f("span",Os,"Vence en "+d(t.diasRestantes)+" días",1)])):c("",!0),f("div",Gs,[e(s(_),{variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>B(t)},{default:l(()=>[e(s(J),{class:"mr-1 h-3 w-3"}),o[24]||(o[24]=n(" Ver ",-1))]),_:1},8,["onClick"]),h.canEdit?(a(),u(s(_),{key:0,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>I(t)},{default:l(()=>[e(s(K),{class:"mr-1 h-3 w-3"}),o[25]||(o[25]=n(" Editar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canComplete&&t.estado!=="completado"?(a(),u(s(_),{key:1,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-green-600 hover:text-green-700",onClick:m=>os(t)},{default:l(()=>[e(s(ls),{class:"mr-1 h-3 w-3"}),o[26]||(o[26]=n(" Completar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canDelete?(a(),u(s(_),{key:2,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-red-600 hover:text-red-700",onClick:m=>M(t)},{default:l(()=>[e(s(Q),{class:"mr-1 h-3 w-3"}),o[27]||(o[27]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):c("",!0)])])]),_:2},1024),e(s(x),null,{default:l(()=>[t.responsable?(a(),i("div",Hs,[e(s(O),{class:"h-8 w-8"},{default:l(()=>[t.responsable.avatar?(a(),u(s(G),{key:0,src:t.responsable.avatar},null,8,["src"])):c("",!0),e(s(H),null,{default:l(()=>[n(d(t.responsable.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),f("span",Js,d(t.responsable.name),1)])):(a(),i("span",Ks,"Sin asignar"))]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:q(t.estado)},{default:l(()=>[n(d(t.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:F(t.prioridad)},{default:l(()=>[(a(),u(E(S(t.prioridad)),{class:"mr-1 h-3 w-3"})),n(" "+d(t.prioridad_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[f("div",Qs,[e(s(W),{class:"h-4 w-4 text-muted-foreground"}),f("span",Ws,d(R(t.fecha_fin)),1)])]),_:2},1024),e(s(x),null,{default:l(()=>[t.usuarios&&t.usuarios.length>0?(a(),i("div",Xs,[e(s(X),{class:"h-4 w-4 text-muted-foreground"}),f("span",Ys,d(t.usuarios.length),1)])):(a(),i("span",Zs,"-"))]),_:2},1024),e(s(x),null,{default:l(()=>[t.etiquetas&&t.etiquetas.length>0?(a(),i("div",bs,[(a(!0),i(w,null,g(t.etiquetas.slice(0,2),m=>(a(),u(s(k),{key:m.id,variant:"outline",class:"text-xs",style:T({borderColor:m.color||"#94a3b8",color:m.color||"#64748b"})},{default:l(()=>[n(d(m.nombre),1)]),_:2},1032,["style"]))),128)),t.etiquetas.length>2?(a(),u(s(k),{key:0,variant:"outline",class:"text-xs"},{default:l(()=>[n(" +"+d(t.etiquetas.length-2),1)]),_:2},1024)):c("",!0)])):(a(),i("span",st,"-"))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):c("",!0),v.value.completados.length>0?(a(),i("div",tt,[f("h3",et,[(a(),u(E(Z("completado")),{class:es(["h-5 w-5",ss("completado")])},null,8,["class"])),n(" "+d(b("completado"))+" ("+d(v.value.completados.length)+") ",1)]),e(s(L),null,{default:l(()=>[e(s(j),null,{default:l(()=>[e(s(y),null,{default:l(()=>[h.showCheckbox?(a(),u(s(p),{key:0,class:"w-[40px]"})):c("",!0),e(s(p),null,{default:l(()=>[...o[28]||(o[28]=[n("Entregable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[29]||(o[29]=[n("Responsable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[30]||(o[30]=[n("Estado",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[31]||(o[31]=[n("Prioridad",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[32]||(o[32]=[n("Fecha Fin",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[33]||(o[33]=[n("Colaboradores",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[34]||(o[34]=[n("Etiquetas",-1)])]),_:1})]),_:1})]),_:1}),e(s(A),null,{default:l(()=>[(a(!0),i(w,null,g(v.value.completados,t=>(a(),u(s(y),{key:t.id,class:"hover:bg-muted/50 bg-green-50/30"},{default:l(()=>[h.showCheckbox?(a(),u(s(x),{key:0,onClick:o[2]||(o[2]=N(()=>{},["stop"]))},{default:l(()=>[e(s(z),{checked:D(t.id),"onUpdate:checked":()=>P(t.id)},null,8,["checked","onUpdate:checked"])]),_:2},1024)):c("",!0),e(s(x),null,{default:l(()=>[f("div",null,[f("p",lt,d(t.nombre),1),t.descripcion?(a(),i("p",ot,d(t.descripcion),1)):c("",!0),f("div",at,[e(s(_),{variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>B(t)},{default:l(()=>[e(s(J),{class:"mr-1 h-3 w-3"}),o[35]||(o[35]=n(" Ver ",-1))]),_:1},8,["onClick"]),h.canEdit?(a(),u(s(_),{key:0,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>I(t)},{default:l(()=>[e(s(K),{class:"mr-1 h-3 w-3"}),o[36]||(o[36]=n(" Editar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canDelete?(a(),u(s(_),{key:1,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-red-600 hover:text-red-700",onClick:m=>M(t)},{default:l(()=>[e(s(Q),{class:"mr-1 h-3 w-3"}),o[37]||(o[37]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):c("",!0)])])]),_:2},1024),e(s(x),null,{default:l(()=>[t.responsable?(a(),i("div",nt,[e(s(O),{class:"h-8 w-8"},{default:l(()=>[t.responsable.avatar?(a(),u(s(G),{key:0,src:t.responsable.avatar},null,8,["src"])):c("",!0),e(s(H),null,{default:l(()=>[n(d(t.responsable.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),f("span",dt,d(t.responsable.name),1)])):(a(),i("span",it,"Sin asignar"))]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:q(t.estado)},{default:l(()=>[n(d(t.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:F(t.prioridad)},{default:l(()=>[(a(),u(E(S(t.prioridad)),{class:"mr-1 h-3 w-3"})),n(" "+d(t.prioridad_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[f("div",ut,[e(s(W),{class:"h-4 w-4 text-muted-foreground"}),f("span",rt,d(R(t.fecha_fin)),1)])]),_:2},1024),e(s(x),null,{default:l(()=>[t.usuarios&&t.usuarios.length>0?(a(),i("div",ct,[e(s(X),{class:"h-4 w-4 text-muted-foreground"}),f("span",ft,d(t.usuarios.length),1)])):(a(),i("span",mt,"-"))]),_:2},1024),e(s(x),null,{default:l(()=>[t.etiquetas&&t.etiquetas.length>0?(a(),i("div",xt,[(a(!0),i(w,null,g(t.etiquetas.slice(0,2),m=>(a(),u(s(k),{key:m.id,variant:"outline",class:"text-xs",style:T({borderColor:m.color||"#94a3b8",color:m.color||"#64748b"})},{default:l(()=>[n(d(m.nombre),1)]),_:2},1032,["style"]))),128)),t.etiquetas.length>2?(a(),u(s(k),{key:0,variant:"outline",class:"text-xs"},{default:l(()=>[n(" +"+d(t.etiquetas.length-2),1)]),_:2},1024)):c("",!0)])):(a(),i("span",pt,"-"))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):c("",!0),v.value.cancelados.length>0?(a(),i("div",ht,[f("h3",_t,[(a(),u(E(Z("cancelado")),{class:es(["h-5 w-5",ss("cancelado")])},null,8,["class"])),n(" "+d(b("cancelado"))+" ("+d(v.value.cancelados.length)+") ",1)]),e(s(L),null,{default:l(()=>[e(s(j),null,{default:l(()=>[e(s(y),null,{default:l(()=>[h.showCheckbox?(a(),u(s(p),{key:0,class:"w-[40px]"})):c("",!0),e(s(p),null,{default:l(()=>[...o[38]||(o[38]=[n("Entregable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[39]||(o[39]=[n("Responsable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[40]||(o[40]=[n("Estado",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[41]||(o[41]=[n("Prioridad",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[42]||(o[42]=[n("Fecha Fin",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[43]||(o[43]=[n("Colaboradores",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[44]||(o[44]=[n("Etiquetas",-1)])]),_:1})]),_:1})]),_:1}),e(s(A),null,{default:l(()=>[(a(!0),i(w,null,g(v.value.cancelados,t=>(a(),u(s(y),{key:t.id,class:"hover:bg-muted/50 opacity-60"},{default:l(()=>[h.showCheckbox?(a(),u(s(x),{key:0,onClick:o[3]||(o[3]=N(()=>{},["stop"]))},{default:l(()=>[e(s(z),{checked:D(t.id),"onUpdate:checked":()=>P(t.id)},null,8,["checked","onUpdate:checked"])]),_:2},1024)):c("",!0),e(s(x),null,{default:l(()=>[f("div",null,[f("p",kt,d(t.nombre),1),t.descripcion?(a(),i("p",vt,d(t.descripcion),1)):c("",!0),f("div",yt,[e(s(_),{variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>B(t)},{default:l(()=>[e(s(J),{class:"mr-1 h-3 w-3"}),o[45]||(o[45]=n(" Ver ",-1))]),_:1},8,["onClick"]),h.canEdit?(a(),u(s(_),{key:0,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>I(t)},{default:l(()=>[e(s(K),{class:"mr-1 h-3 w-3"}),o[46]||(o[46]=n(" Editar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canDelete?(a(),u(s(_),{key:1,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-red-600 hover:text-red-700",onClick:m=>M(t)},{default:l(()=>[e(s(Q),{class:"mr-1 h-3 w-3"}),o[47]||(o[47]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):c("",!0)])])]),_:2},1024),e(s(x),null,{default:l(()=>[t.responsable?(a(),i("div",Ct,[e(s(O),{class:"h-8 w-8"},{default:l(()=>[t.responsable.avatar?(a(),u(s(G),{key:0,src:t.responsable.avatar},null,8,["src"])):c("",!0),e(s(H),null,{default:l(()=>[n(d(t.responsable.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),f("span",wt,d(t.responsable.name),1)])):(a(),i("span",gt,"Sin asignar"))]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:q(t.estado)},{default:l(()=>[n(d(t.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:F(t.prioridad)},{default:l(()=>[(a(),u(E(S(t.prioridad)),{class:"mr-1 h-3 w-3"})),n(" "+d(t.prioridad_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[f("div",Et,[e(s(W),{class:"h-4 w-4 text-muted-foreground"}),f("span",$t,d(R(t.fecha_fin)),1)])]),_:2},1024),e(s(x),null,{default:l(()=>[t.usuarios&&t.usuarios.length>0?(a(),i("div",Vt,[e(s(X),{class:"h-4 w-4 text-muted-foreground"}),f("span",zt,d(t.usuarios.length),1)])):(a(),i("span",Ut,"-"))]),_:2},1024),e(s(x),null,{default:l(()=>[t.etiquetas&&t.etiquetas.length>0?(a(),i("div",Dt,[(a(!0),i(w,null,g(t.etiquetas.slice(0,2),m=>(a(),u(s(k),{key:m.id,variant:"outline",class:"text-xs",style:T({borderColor:m.color||"#94a3b8",color:m.color||"#64748b"})},{default:l(()=>[n(d(m.nombre),1)]),_:2},1032,["style"]))),128)),t.etiquetas.length>2?(a(),u(s(k),{key:0,variant:"outline",class:"text-xs"},{default:l(()=>[n(" +"+d(t.etiquetas.length-2),1)]),_:2},1024)):c("",!0)])):(a(),i("span",Pt,"-"))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):c("",!0),h.entregables.length===0?(a(),i("div",qt,[...o[48]||(o[48]=[f("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1)])])):c("",!0)])):(a(),u(s(L),{key:1},{default:l(()=>[e(s(j),null,{default:l(()=>[e(s(y),null,{default:l(()=>[h.showCheckbox?(a(),u(s(p),{key:0,class:"w-[40px]"},{default:l(()=>[e(s(z),{checked:C.value.length===h.entregables.length&&h.entregables.length>0,"onUpdate:checked":rs},null,8,["checked"])]),_:1})):c("",!0),e(s(p),null,{default:l(()=>[...o[49]||(o[49]=[n("Entregable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[50]||(o[50]=[n("Responsable",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[51]||(o[51]=[n("Estado",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[52]||(o[52]=[n("Prioridad",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[53]||(o[53]=[n("Fecha Fin",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[54]||(o[54]=[n("Colaboradores",-1)])]),_:1}),e(s(p),null,{default:l(()=>[...o[55]||(o[55]=[n("Etiquetas",-1)])]),_:1})]),_:1})]),_:1}),e(s(A),null,{default:l(()=>[(a(!0),i(w,null,g(U.value,t=>(a(),u(s(y),{key:t.id,class:"hover:bg-muted/50"},{default:l(()=>[h.showCheckbox?(a(),u(s(x),{key:0,onClick:o[4]||(o[4]=N(()=>{},["stop"]))},{default:l(()=>[e(s(z),{checked:D(t.id),"onUpdate:checked":()=>P(t.id)},null,8,["checked","onUpdate:checked"])]),_:2},1024)):c("",!0),e(s(x),null,{default:l(()=>[f("div",null,[f("p",Ft,d(t.nombre),1),t.descripcion?(a(),i("p",St,d(t.descripcion),1)):c("",!0),t.estaVencido?(a(),i("div",Rt,[e(s(V),{class:"h-3 w-3 text-red-600"}),f("span",Bt,"Vencido hace "+d(Math.abs(t.diasRestantes))+" días",1)])):t.estaProximoVencer?(a(),i("div",It,[e(s(V),{class:"h-3 w-3 text-orange-600"}),f("span",Mt,"Vence en "+d(t.diasRestantes)+" días",1)])):c("",!0),f("div",Nt,[e(s(_),{variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>B(t)},{default:l(()=>[e(s(J),{class:"mr-1 h-3 w-3"}),o[56]||(o[56]=n(" Ver ",-1))]),_:1},8,["onClick"]),h.canEdit?(a(),u(s(_),{key:0,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs",onClick:m=>I(t)},{default:l(()=>[e(s(K),{class:"mr-1 h-3 w-3"}),o[57]||(o[57]=n(" Editar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canEdit&&t.estado==="pendiente"?(a(),u(s(_),{key:1,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-blue-600 hover:text-blue-700",onClick:m=>ns(t)},{default:l(()=>[e(s(as),{class:"mr-1 h-3 w-3"}),o[58]||(o[58]=n(" En Progreso ",-1))]),_:1},8,["onClick"])):c("",!0),h.canComplete&&t.estado!=="completado"?(a(),u(s(_),{key:2,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-green-600 hover:text-green-700",onClick:m=>os(t)},{default:l(()=>[e(s(ls),{class:"mr-1 h-3 w-3"}),o[59]||(o[59]=n(" Completar ",-1))]),_:1},8,["onClick"])):c("",!0),h.canDelete?(a(),u(s(_),{key:3,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-red-600 hover:text-red-700",onClick:m=>M(t)},{default:l(()=>[e(s(Q),{class:"mr-1 h-3 w-3"}),o[60]||(o[60]=n(" Eliminar ",-1))]),_:1},8,["onClick"])):c("",!0)])])]),_:2},1024),e(s(x),null,{default:l(()=>[t.responsable?(a(),i("div",Tt,[e(s(O),{class:"h-8 w-8"},{default:l(()=>[t.responsable.avatar?(a(),u(s(G),{key:0,src:t.responsable.avatar},null,8,["src"])):c("",!0),e(s(H),null,{default:l(()=>[n(d(t.responsable.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),f("span",Lt,d(t.responsable.name),1)])):(a(),i("span",jt,"Sin asignar"))]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:q(t.estado)},{default:l(()=>[n(d(t.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[e(s(k),{variant:F(t.prioridad)},{default:l(()=>[(a(),u(E(S(t.prioridad)),{class:"mr-1 h-3 w-3"})),n(" "+d(t.prioridad_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(s(x),null,{default:l(()=>[f("div",At,[e(s(W),{class:"h-4 w-4 text-muted-foreground"}),f("span",Ot,d(R(t.fecha_fin)),1)])]),_:2},1024),e(s(x),null,{default:l(()=>[t.usuarios&&t.usuarios.length>0?(a(),i("div",Gt,[e(s(X),{class:"h-4 w-4 text-muted-foreground"}),f("span",Ht,d(t.usuarios.length),1)])):(a(),i("span",Jt,"-"))]),_:2},1024),e(s(x),null,{default:l(()=>[t.etiquetas&&t.etiquetas.length>0?(a(),i("div",Kt,[(a(!0),i(w,null,g(t.etiquetas.slice(0,2),m=>(a(),u(s(k),{key:m.id,variant:"outline",class:"text-xs",style:T({borderColor:m.color||"#94a3b8",color:m.color||"#64748b"})},{default:l(()=>[n(d(m.nombre),1)]),_:2},1032,["style"]))),128)),t.etiquetas.length>2?(a(),u(s(k),{key:0,variant:"outline",class:"text-xs"},{default:l(()=>[n(" +"+d(t.etiquetas.length-2),1)]),_:2},1024)):c("",!0)])):(a(),i("span",Qt,"-"))]),_:2},1024)]),_:2},1024))),128)),h.entregables.length===0?(a(),u(s(y),{key:0},{default:l(()=>[e(s(x),{colspan:h.showCheckbox?8:7,class:"text-center py-8"},{default:l(()=>[...o[61]||(o[61]=[f("p",{class:"text-muted-foreground"},"No se encontraron entregables",-1)])]),_:1},8,["colspan"])]),_:1})):c("",!0)]),_:1})]),_:1}))}});export{re as _};
