import{d as U,r as T,c as W,b as n,e as i,w as e,g as d,f as s,j as u,u as t,P,h as r,t as f,i as v,F as M,k as H,n as J,W as h}from"./app-CNcf-zdV.js";import{_ as j}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DTy3l80b.js";import{_ as b,a as x,b as y,c as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-DhL5ChM3.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-C68I3fFy.js";import{_ as m}from"./createLucideIcon-DgLLtpTc.js";import{_ as q}from"./index-s_YMJFqv.js";import{_ as Q}from"./Switch.vue_vue_type_script_setup_true_lang-CROETeuV.js";import{_ as X,a as Y,b as E,c as g,d as Z,e as C}from"./TableHeader.vue_vue_type_script_setup_true_lang-B2B-X4-8.js";import{_ as tt,a as et}from"./index-BXNWrcHO.js";import{t as $}from"./index-UZehIf0x.js";import{P as O}from"./plus-B0xw1qKM.js";import{G as st}from"./grip-vertical-DNH1M1QZ.js";import{S as at}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D8koaehi.js";import{C as ot}from"./circle-check-BQI9FbJM.js";import{S as rt}from"./square-pen-Def0jsxb.js";import{C as lt}from"./copy-CuJiGPes.js";import{T as it}from"./trash-2-BaR4XxZx.js";import{C as nt}from"./circle-alert-BWYDLxj9.js";import"./index-C53AKuaZ.js";import"./floating-ui.vue-g3wBdaGy.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-CPZLV3U1.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CQwxGvmo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-CoIj8tGl.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BBJrNP3L.js";import"./chevrons-up-down-Co9lmALi.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Bowse19S.js";import"./target-Bzh15SE9.js";import"./users-BCniY5Uo.js";import"./shield-Ds2U7D9u.js";import"./vote-DWrrItDX.js";import"./folder-open-Bl1zn-Xz.js";import"./send-Cs3Svvwv.js";import"./file-text-VjUXoo3d.js";import"./briefcase-BxQurTMk.js";import"./calendar-DAAYlVnm.js";import"./megaphone-DSquqsX_.js";import"./user-check-t0y4Vuir.js";import"./mail-CzyXkW1x.js";import"./message-square-vVP8zyj_.js";import"./external-link-DknYr06I.js";import"./panel-left-C37rxO5h.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Bt0xndJV.js";import"./VisuallyHidden-BMJ7uEAj.js";import"./Input.vue_vue_type_script_setup_true_lang-CXr4ucc6.js";import"./index-BfcJxwg-.js";import"./check-N9bkD0I5.js";import"./nullish-CHIgUVhi.js";import"./index-DraxJDKZ.js";import"./VisuallyHiddenInput-DQv9Xmp3.js";import"./x-arLKReWz.js";import"./index-DoUjDw3v.js";import"./user-DzTPpMzP.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CS3Y7RjP.js";import"./Label.vue_vue_type_script_setup_true_lang-BFduy937.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D-RM_gVc.js";import"./map-pin-CODmF8A6.js";const dt={class:"space-y-6"},ut={class:"flex justify-between items-center"},mt={class:"flex gap-2"},ct={class:"grid gap-4 md:grid-cols-4"},pt={class:"flex justify-between items-center"},ft={key:0,class:"flex gap-2"},_t={key:0,class:"text-center py-12"},vt={key:1,class:"overflow-x-auto"},gt={class:"flex flex-col gap-1"},Ct={key:0,class:"text-xs text-muted-foreground mt-1"},kt={class:"text-xs bg-muted px-1 py-0.5 rounded"},bt={key:1,class:"text-muted-foreground"},xt={key:0,class:"flex justify-end gap-1"},he=U({layout:j,__name:"Index",props:{campos:{},estadisticas:{},authPermissions:{}},setup(V){const S=V,A=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:"Campos Personalizados",href:"/admin/contratos/campos-personalizados"}],c=T(S.campos.data),p=T(!1),_=W(()=>S.authPermissions.includes("contratos.manage_fields")),B=o=>{h.post(route("admin.campos-personalizados-contrato.toggle-activo",o.id),{},{preserveScroll:!0,onSuccess:()=>{$.success(`Campo ${o.activo?"desactivado":"activado"} correctamente`)}})},R=o=>{confirm(`¿Estás seguro de eliminar el campo "${o.nombre}"? Esta acción no se puede deshacer.`)&&h.delete(route("admin.campos-personalizados-contrato.destroy",o.id),{preserveScroll:!0,onSuccess:()=>{$.success("Campo eliminado correctamente")},onError:a=>{$.error("Error al eliminar el campo")}})},G=o=>{h.post(route("admin.campos-personalizados-contrato.duplicar",o.id),{},{preserveScroll:!0,onSuccess:()=>{$.success("Campo duplicado correctamente")}})},D=()=>{p.value=!0},F=()=>{const o=c.value.map((a,l)=>({id:a.id,orden:l+1}));h.post(route("admin.campos-personalizados-contrato.reordenar"),{campos:o},{preserveScroll:!0,onSuccess:()=>{p.value=!1,$.success("Orden guardado correctamente")}})},L=()=>{c.value=[...S.campos.data],p.value=!1},N=(o,a)=>{const l=a==="arriba"?o-1:o+1;if(l>=0&&l<c.value.length){const k=c.value[o];c.value[o]=c.value[l],c.value[l]=k}},I=o=>({text:"default",number:"secondary",date:"outline",textarea:"default",select:"secondary",checkbox:"outline",radio:"outline",file:"destructive"})[o]||"default";return(o,a)=>(i(),n(j,{breadcrumbs:A},{default:e(()=>[d("div",dt,[d("div",ut,[a[1]||(a[1]=d("div",null,[d("h2",{class:"text-3xl font-bold tracking-tight"}," Campos Personalizados de Contratos "),d("p",{class:"text-muted-foreground mt-2"}," Gestiona los campos adicionales para los contratos ")],-1)),d("div",mt,[_.value?(i(),n(t(P),{key:0,href:o.route("admin.campos-personalizados-contrato.create"),as:"button"},{default:e(()=>[s(t(m),null,{default:e(()=>[s(t(O),{class:"w-4 h-4 mr-2"}),a[0]||(a[0]=r(" Nuevo Campo ",-1))]),_:1})]),_:1},8,["href"])):u("",!0)])]),d("div",ct,[s(t(b),null,{default:e(()=>[s(t(x),{class:"pb-3"},{default:e(()=>[s(t(w),null,{default:e(()=>[...a[2]||(a[2]=[r("Total Campos",-1)])]),_:1}),s(t(y),{class:"text-2xl"},{default:e(()=>[r(f(o.estadisticas.total),1)]),_:1})]),_:1})]),_:1}),s(t(b),null,{default:e(()=>[s(t(x),{class:"pb-3"},{default:e(()=>[s(t(w),null,{default:e(()=>[...a[3]||(a[3]=[r("Campos Activos",-1)])]),_:1}),s(t(y),{class:"text-2xl text-green-600"},{default:e(()=>[r(f(o.estadisticas.activos),1)]),_:1})]),_:1})]),_:1}),s(t(b),null,{default:e(()=>[s(t(x),{class:"pb-3"},{default:e(()=>[s(t(w),null,{default:e(()=>[...a[4]||(a[4]=[r("Campos Requeridos",-1)])]),_:1}),s(t(y),{class:"text-2xl text-blue-600"},{default:e(()=>[r(f(o.estadisticas.requeridos),1)]),_:1})]),_:1})]),_:1}),s(t(b),null,{default:e(()=>[s(t(x),{class:"pb-3"},{default:e(()=>[s(t(w),null,{default:e(()=>[...a[5]||(a[5]=[r("Tipos Distintos",-1)])]),_:1}),s(t(y),{class:"text-2xl"},{default:e(()=>[r(f(Object.keys(o.estadisticas.tipos).length),1)]),_:1})]),_:1})]),_:1})]),s(t(b),null,{default:e(()=>[s(t(x),null,{default:e(()=>[d("div",pt,[s(t(y),null,{default:e(()=>[...a[6]||(a[6]=[r("Campos Configurados",-1)])]),_:1}),p.value?(i(),v("div",ft,[s(t(m),{onClick:F,size:"sm",variant:"default"},{default:e(()=>[...a[7]||(a[7]=[r(" Guardar Orden ",-1)])]),_:1}),s(t(m),{onClick:L,size:"sm",variant:"outline"},{default:e(()=>[...a[8]||(a[8]=[r(" Cancelar ",-1)])]),_:1})])):_.value&&o.campos.data.length>1?(i(),n(t(m),{key:1,onClick:D,size:"sm",variant:"outline"},{default:e(()=>[s(t(st),{class:"w-4 h-4 mr-2"}),a[9]||(a[9]=r(" Reordenar ",-1))]),_:1})):u("",!0)])]),_:1}),s(t(K),null,{default:e(()=>[o.campos.data.length===0?(i(),v("div",_t,[s(t(at),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),a[11]||(a[11]=d("p",{class:"text-muted-foreground"}," No hay campos personalizados configurados ",-1)),_.value?(i(),n(t(P),{key:0,href:o.route("admin.campos-personalizados-contrato.create"),class:"mt-4 inline-block"},{default:e(()=>[s(t(m),null,{default:e(()=>[s(t(O),{class:"w-4 h-4 mr-2"}),a[10]||(a[10]=r(" Crear Primer Campo ",-1))]),_:1})]),_:1},8,["href"])):u("",!0)])):(i(),v("div",vt,[s(t(X),null,{default:e(()=>[s(t(Y),null,{default:e(()=>[s(t(E),null,{default:e(()=>[p.value?(i(),n(t(g),{key:0,class:"w-12"},{default:e(()=>[...a[12]||(a[12]=[r("Orden",-1)])]),_:1})):u("",!0),s(t(g),null,{default:e(()=>[...a[13]||(a[13]=[r("Nombre",-1)])]),_:1}),s(t(g),null,{default:e(()=>[...a[14]||(a[14]=[r("Slug",-1)])]),_:1}),s(t(g),null,{default:e(()=>[...a[15]||(a[15]=[r("Tipo",-1)])]),_:1}),s(t(g),{class:"text-center"},{default:e(()=>[...a[16]||(a[16]=[r("Requerido",-1)])]),_:1}),s(t(g),{class:"text-center"},{default:e(()=>[...a[17]||(a[17]=[r("Estado",-1)])]),_:1}),s(t(g),{class:"text-right"},{default:e(()=>[...a[18]||(a[18]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(t(Z),null,{default:e(()=>[(i(!0),v(M,null,H(c.value,(l,k)=>(i(),n(t(E),{key:l.id,class:J({"opacity-50":!l.activo})},{default:e(()=>[p.value?(i(),n(t(C),{key:0,class:"w-12"},{default:e(()=>[d("div",gt,[s(t(m),{onClick:z=>N(k,"arriba"),size:"sm",variant:"ghost",disabled:k===0,class:"h-6 w-6 p-0"},{default:e(()=>[...a[19]||(a[19]=[r(" ↑ ",-1)])]),_:2},1032,["onClick","disabled"]),s(t(m),{onClick:z=>N(k,"abajo"),size:"sm",variant:"ghost",disabled:k===c.value.length-1,class:"h-6 w-6 p-0"},{default:e(()=>[...a[20]||(a[20]=[r(" ↓ ",-1)])]),_:2},1032,["onClick","disabled"])])]),_:2},1024)):u("",!0),s(t(C),{class:"font-medium"},{default:e(()=>[r(f(l.nombre)+" ",1),l.descripcion?(i(),v("div",Ct,f(l.descripcion),1)):u("",!0)]),_:2},1024),s(t(C),null,{default:e(()=>[d("code",kt,f(l.slug),1)]),_:2},1024),s(t(C),null,{default:e(()=>[s(t(q),{variant:I(l.tipo)},{default:e(()=>[r(f(l.tipo),1)]),_:2},1032,["variant"])]),_:2},1024),s(t(C),{class:"text-center"},{default:e(()=>[l.es_requerido?(i(),n(t(q),{key:0,variant:"default"},{default:e(()=>[s(t(ot),{class:"w-3 h-3"})]),_:1})):(i(),v("span",bt,"-"))]),_:2},1024),s(t(C),{class:"text-center"},{default:e(()=>[s(t(Q),{checked:l.activo,"onUpdate:checked":z=>B(l),disabled:!_.value||p.value},null,8,["checked","onUpdate:checked","disabled"])]),_:2},1024),s(t(C),{class:"text-right"},{default:e(()=>[p.value?u("",!0):(i(),v("div",xt,[_.value?(i(),n(t(P),{key:0,href:o.route("admin.campos-personalizados-contrato.edit",l.id),as:"button"},{default:e(()=>[s(t(m),{size:"sm",variant:"ghost"},{default:e(()=>[s(t(rt),{class:"w-4 h-4"})]),_:1})]),_:2},1032,["href"])):u("",!0),_.value?(i(),n(t(m),{key:1,onClick:z=>G(l),size:"sm",variant:"ghost",title:"Duplicar campo"},{default:e(()=>[s(t(lt),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):u("",!0),_.value?(i(),n(t(m),{key:2,onClick:z=>R(l),size:"sm",variant:"ghost",class:"text-destructive"},{default:e(()=>[s(t(it),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):u("",!0)]))]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]))]),_:1})]),_:1}),s(t(tt),null,{default:e(()=>[s(t(nt),{class:"h-4 w-4"}),s(t(et),null,{default:e(()=>[...a[21]||(a[21]=[r(" Los campos personalizados permiten agregar información adicional a los contratos. Los cambios en los campos no afectan a los contratos existentes hasta que se actualicen. ",-1)])]),_:1})]),_:1})])]),_:1}))}});export{he as default};
