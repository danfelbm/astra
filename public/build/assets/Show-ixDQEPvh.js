import{_ as q}from"./index-DqYseeyG.js";import{c as he,_ as T}from"./createLucideIcon-DV63zE4q.js";import{a as F,b as I,c as z,_ as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-hSJ_OoAd.js";import{_ as $e,a as Ce,b as J,c as Y}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Dq1sxUPC.js";import{_ as Le,a as Te,b as oe,c as N,d as Fe,e as B}from"./TableHeader.vue_vue_type_script_setup_true_lang-BATF2Vo-.js";import{_ as Oe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BY7lKvDI.js";import{_ as se}from"./Progress.vue_vue_type_script_setup_true_lang-CKCbMEZo.js";import{E as Q}from"./eye-Bj0oigsJ.js";import{C as me}from"./circle-alert-CmAp537w.js";import{C as We}from"./chart-column-CI2O3__l.js";import{M as ie}from"./mail-CPdjIYoP.js";import{M as re}from"./message-square-DfetztH6.js";import{U as Ie}from"./users-CiqWown6.js";import{C as ze}from"./circle-check-Ba_X3ZQE.js";import{C as fe}from"./circle-x-qoXF2ofy.js";import{T as xe}from"./trending-up-CKAjCwI2.js";import{M as Ee}from"./minus-fFXbMnQq.js";import{d as ve,c as ee,i as f,g as t,j as x,b as k,e as a,w as s,f as e,h as c,n as V,t as o,x as Z,m as u,r as A,o as Pe,F as K,k as le,B as He,q as Xe,v as De,s as ae}from"./app-mFjNR0uy.js";import{C as ne}from"./clock-CTAjxCuo.js";import{_ as Re,a as Se}from"./index-BEVjO-xC.js";import{_ as Ge,a as Je,b as Ke,c as Qe,e as Ye}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Bxfkh_IO.js";import{R as _e}from"./refresh-cw-BXnBVpms.js";import{C as Ze}from"./circle-check-big-BjixJc8S.js";import{t as L}from"./index-CaeQmIhS.js";import{C as et}from"./calendar-Cm20HlMs.js";import{A as tt}from"./arrow-left-CMQ9Lije.js";import{S as at}from"./square-pen-0L84AS20.js";import{P as je,a as st}from"./play-DWPyzVUT.js";import{D as lt}from"./download-wSYylb8d.js";import{C as ot}from"./chevron-right-CIWmfxEc.js";import{C as nt}from"./SelectValue.vue_vue_type_script_setup_true_lang-6O6NwUTg.js";import{S as it}from"./send-Dg9CFN7Q.js";import"./index--pHTbmQT.js";import"./VisuallyHidden-COJ7Fb0c.js";import"./Input.vue_vue_type_script_setup_true_lang-CNEz7wjh.js";import"./RovingFocusItem-87i-7BW-.js";import"./utils-z5ZiaV82.js";import"./useFlashMessages-BVRUDuxg.js";import"./index-BMdvpPIB.js";import"./floating-ui.vue-BEpYSMep.js";import"./x-BTsnVFB2.js";import"./index-CV2uV2r8.js";import"./shield-CB0p3Wgf.js";import"./user-D53RqOVT.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-VzFRDKII.js";import"./house-CxaPguce.js";import"./Label.vue_vue_type_script_setup_true_lang-Ptqk43pC.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-n7r7D0yy.js";import"./map-pin-r6PRlCcc.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BgntieAH.js";import"./chevrons-up-down-DH491GTa.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DZT8-SqG.js";import"./target-Bnze_1sc.js";import"./vote-DzWdcEHv.js";import"./folder-open-sxcDvQaM.js";import"./file-text-DBZ_xMXZ.js";import"./briefcase-DuDCvRc2.js";import"./megaphone-CXthdG0w.js";import"./user-check-DEMk8N5M.js";import"./clipboard-list-DBZjorI_.js";import"./external-link-DNr1QS6y.js";import"./panel-left-CBoIG6Cn.js";import"./check-DqR1QvvK.js";import"./index-ByD7XnCM.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=he("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=he("MousePointerIcon",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=he("TrendingDownIcon",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),dt={class:"space-y-4"},ut={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},ct={class:"flex items-center gap-2 mt-1"},mt={class:"text-xs text-muted-foreground"},ft={class:"text-xs text-muted-foreground mt-2"},vt={class:"flex items-center gap-2 mt-1"},pt={class:"text-xs text-muted-foreground"},xt={class:"text-xs text-muted-foreground mt-2"},_t={class:"flex items-center gap-2 mt-1"},gt={class:"text-xs text-muted-foreground"},ht={class:"text-xs text-muted-foreground mt-2"},wt={class:"text-2xl font-bold text-purple-600"},yt={key:0,class:"grid gap-4 md:grid-cols-2"},bt={class:"flex items-center justify-between"},kt={class:"space-y-2"},$t={class:"flex justify-between text-sm"},Ct={class:"font-medium"},Et={class:"space-y-2"},Dt={class:"flex justify-between text-sm"},Rt={class:"font-medium"},St={class:"grid grid-cols-2 gap-4 pt-2 border-t"},jt={class:"text-lg font-semibold"},At={class:"text-lg font-semibold"},Mt={key:0,class:"pt-2 border-t"},Lt={class:"text-sm font-medium"},Tt={class:"flex items-center justify-between"},Ft={class:"space-y-2"},It={class:"flex justify-between text-sm"},zt={class:"font-medium"},Pt={class:"space-y-2"},Bt={class:"flex justify-between text-sm"},Ut={class:"font-medium text-red-600"},Vt={class:"pt-2 border-t"},Nt={class:"flex items-center justify-between"},qt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ot={class:"flex items-center gap-3"},Wt={class:"text-xl font-bold"},Ht={class:"flex items-center gap-3"},Xt={class:"text-xl font-bold"},Gt={class:"flex items-center gap-3"},Jt={class:"text-xl font-bold"},Kt={class:"flex items-center gap-3"},Qt={class:"text-xl font-bold"},Yt=ve({__name:"CampanaMetrics",props:{metrics:{},comparison:{},showDetails:{type:Boolean,default:!0}},setup(d){const D=d,i=(l,r)=>{if(!r)return{icon:Ee,color:"text-gray-400",text:"--"};const _=l-r,p=Math.abs(_/r*100).toFixed(1);return Math.abs(_)<.5?{icon:Ee,color:"text-gray-400",text:"0%"}:_>0?{icon:xe,color:"text-green-600",text:`+${p}%`}:{icon:rt,color:"text-red-600",text:`-${p}%`}},g=(l,r)=>{const p={apertura:{excellent:25,good:20,warning:15,poor:10},click:{excellent:10,good:5,warning:3,poor:2},rebote:{excellent:2,good:5,warning:10,poor:15},entrega:{excellent:98,good:95,warning:90,poor:85}}[r];return r==="rebote"?l<=p.excellent?"text-green-700":l<=p.good?"text-green-600":l<=p.warning?"text-yellow-600":"text-red-600":l>=p.excellent?"text-green-700":l>=p.good?"text-green-600":l>=p.warning?"text-yellow-600":l>=p.poor?"text-orange-600":"text-red-600"},M=ee(()=>{const l=D.metrics;return{tasaEntrega:((l==null?void 0:l.total_enviados)||0)>0?(((l==null?void 0:l.total_enviados)||0)-((l==null?void 0:l.total_fallidos)||0))/((l==null?void 0:l.total_enviados)||1)*100:0,engagementRate:((l==null?void 0:l.emails_enviados)||0)>0?(((l==null?void 0:l.emails_abiertos)||0)+((l==null?void 0:l.emails_con_click)||0))/(((l==null?void 0:l.emails_enviados)||1)*2)*100:0,ctr:((l==null?void 0:l.emails_abiertos)||0)>0?((l==null?void 0:l.emails_con_click)||0)/((l==null?void 0:l.emails_abiertos)||1)*100:0,clicksPorUsuario:((l==null?void 0:l.emails_con_click)||0)>0?((l==null?void 0:l.total_clicks)||0)/((l==null?void 0:l.emails_con_click)||1):0,tasaExitoWhatsApp:((l==null?void 0:l.whatsapp_enviados)||0)>0?((l==null?void 0:l.whatsapp_entregados)||0)/((l==null?void 0:l.whatsapp_enviados)||1)*100:0}}),b=l=>l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}K`:l.toString();return(l,r)=>(u(),f("div",dt,[t("div",ut,[a(e(P),null,{default:s(()=>[a(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(I),{class:"text-sm font-medium"},{default:s(()=>[...r[0]||(r[0]=[c("Tasa de Apertura",-1)])]),_:1}),a(e(Q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(z),null,{default:s(()=>{var _,p,w,y,R,j,E,h,m,$;return[t("div",{class:V(["text-2xl font-bold",g(((_=d.metrics)==null?void 0:_.tasa_apertura)||0,"apertura")])},o((((p=d.metrics)==null?void 0:p.tasa_apertura)||0).toFixed(1))+"% ",3),t("div",ct,[(u(),k(Z(i(((w=d.metrics)==null?void 0:w.tasa_apertura)||0,(y=d.comparison)==null?void 0:y.tasa_apertura_prev).icon),{class:V(["h-3 w-3",i(((R=d.metrics)==null?void 0:R.tasa_apertura)||0,(j=d.comparison)==null?void 0:j.tasa_apertura_prev).color])},null,8,["class"])),t("span",mt,o(i(((E=d.metrics)==null?void 0:E.tasa_apertura)||0,(h=d.comparison)==null?void 0:h.tasa_apertura_prev).text),1)]),t("p",ft,o(b(((m=d.metrics)==null?void 0:m.emails_abiertos)||0))+" de "+o(b((($=d.metrics)==null?void 0:$.emails_enviados)||0)),1)]}),_:1})]),_:1}),a(e(P),null,{default:s(()=>[a(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(I),{class:"text-sm font-medium"},{default:s(()=>[...r[1]||(r[1]=[c("Tasa de Clicks",-1)])]),_:1}),a(e(ge),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(z),null,{default:s(()=>{var _,p,w,y,R,j,E,h,m;return[t("div",{class:V(["text-2xl font-bold",g(((_=d.metrics)==null?void 0:_.tasa_click)||0,"click")])},o((((p=d.metrics)==null?void 0:p.tasa_click)||0).toFixed(1))+"% ",3),t("div",vt,[(u(),k(Z(i(((w=d.metrics)==null?void 0:w.tasa_click)||0,(y=d.comparison)==null?void 0:y.tasa_click_prev).icon),{class:V(["h-3 w-3",i(((R=d.metrics)==null?void 0:R.tasa_click)||0,(j=d.comparison)==null?void 0:j.tasa_click_prev).color])},null,8,["class"])),t("span",pt,o(i(((E=d.metrics)==null?void 0:E.tasa_click)||0,(h=d.comparison)==null?void 0:h.tasa_click_prev).text),1)]),t("p",xt,o(b(((m=d.metrics)==null?void 0:m.emails_con_click)||0))+" usuarios ",1)]}),_:1})]),_:1}),a(e(P),null,{default:s(()=>[a(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(I),{class:"text-sm font-medium"},{default:s(()=>[...r[2]||(r[2]=[c("Tasa de Rebote",-1)])]),_:1}),a(e(me),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(z),null,{default:s(()=>{var _,p,w,y,R,j,E,h,m;return[t("div",{class:V(["text-2xl font-bold",g(((_=d.metrics)==null?void 0:_.tasa_rebote)||0,"rebote")])},o((((p=d.metrics)==null?void 0:p.tasa_rebote)||0).toFixed(1))+"% ",3),t("div",_t,[(u(),k(Z(i(((w=d.metrics)==null?void 0:w.tasa_rebote)||0,(y=d.comparison)==null?void 0:y.tasa_rebote_prev).icon),{class:V(["h-3 w-3",i(((R=d.metrics)==null?void 0:R.tasa_rebote)||0,(j=d.comparison)==null?void 0:j.tasa_rebote_prev).color])},null,8,["class"])),t("span",gt,o(i(((E=d.metrics)==null?void 0:E.tasa_rebote)||0,(h=d.comparison)==null?void 0:h.tasa_rebote_prev).text),1)]),t("p",ht,o(b(((m=d.metrics)==null?void 0:m.emails_rebotados)||0))+" rebotes ",1)]}),_:1})]),_:1}),a(e(P),null,{default:s(()=>[a(e(F),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[a(e(I),{class:"text-sm font-medium"},{default:s(()=>[...r[3]||(r[3]=[c("Engagement",-1)])]),_:1}),a(e(We),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),a(e(z),null,{default:s(()=>[t("div",wt,o(M.value.engagementRate.toFixed(1))+"% ",1),r[4]||(r[4]=t("p",{class:"text-xs text-muted-foreground mt-3"}," Interacci칩n general ",-1))]),_:1})]),_:1})]),d.showDetails?(u(),f("div",yt,[a(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[t("div",bt,[a(e(I),{class:"text-base flex items-center gap-2"},{default:s(()=>[a(e(ie),{class:"h-4 w-4"}),r[5]||(r[5]=c(" Email ",-1))]),_:1}),a(e(q),{variant:"outline"},{default:s(()=>{var _;return[c(o(b(((_=d.metrics)==null?void 0:_.emails_enviados)||0))+" enviados ",1)]}),_:1})])]),_:1}),a(e(z),{class:"space-y-3"},{default:s(()=>{var _,p,w,y,R,j,E;return[t("div",kt,[t("div",$t,[r[6]||(r[6]=t("span",{class:"text-muted-foreground"},"Abiertos",-1)),t("span",Ct,o(b(((_=d.metrics)==null?void 0:_.emails_abiertos)||0)),1)]),a(e(se),{value:((p=d.metrics)==null?void 0:p.tasa_apertura)||0,class:"h-2"},null,8,["value"])]),t("div",Et,[t("div",Dt,[r[7]||(r[7]=t("span",{class:"text-muted-foreground"},"Con clicks",-1)),t("span",Rt,o(b(((w=d.metrics)==null?void 0:w.emails_con_click)||0)),1)]),a(e(se),{value:((y=d.metrics)==null?void 0:y.tasa_click)||0,class:"h-2"},null,8,["value"])]),t("div",St,[t("div",null,[r[8]||(r[8]=t("p",{class:"text-xs text-muted-foreground"},"Total clicks",-1)),t("p",jt,o(b(((R=d.metrics)==null?void 0:R.total_clicks)||0)),1)]),t("div",null,[r[9]||(r[9]=t("p",{class:"text-xs text-muted-foreground"},"Clicks/usuario",-1)),t("p",At,o(M.value.clicksPorUsuario.toFixed(1)),1)])]),(((j=d.metrics)==null?void 0:j.tiempo_promedio_apertura)||0)>0?(u(),f("div",Mt,[r[10]||(r[10]=t("p",{class:"text-xs text-muted-foreground"},"Tiempo promedio hasta apertura",-1)),t("p",Lt,o((((E=d.metrics)==null?void 0:E.tiempo_promedio_apertura)||0).toFixed(0))+" min",1)])):x("",!0)]}),_:1})]),_:1}),a(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[t("div",Tt,[a(e(I),{class:"text-base flex items-center gap-2"},{default:s(()=>[a(e(re),{class:"h-4 w-4"}),r[11]||(r[11]=c(" WhatsApp ",-1))]),_:1}),a(e(q),{variant:"outline"},{default:s(()=>{var _;return[c(o(b(((_=d.metrics)==null?void 0:_.whatsapp_enviados)||0))+" enviados ",1)]}),_:1})])]),_:1}),a(e(z),{class:"space-y-3"},{default:s(()=>{var _,p,w,y,R;return[t("div",Ft,[t("div",It,[r[12]||(r[12]=t("span",{class:"text-muted-foreground"},"Entregados",-1)),t("span",zt,o(b(((_=d.metrics)==null?void 0:_.whatsapp_entregados)||0)),1)]),a(e(se),{value:M.value.tasaExitoWhatsApp,class:"h-2"},null,8,["value"])]),t("div",Pt,[t("div",Bt,[r[13]||(r[13]=t("span",{class:"text-muted-foreground"},"Fallidos",-1)),t("span",Ut,o(b(((p=d.metrics)==null?void 0:p.whatsapp_fallidos)||0)),1)]),a(e(se),{value:(((w=d.metrics)==null?void 0:w.whatsapp_enviados)||0)>0?(((y=d.metrics)==null?void 0:y.whatsapp_fallidos)||0)/(((R=d.metrics)==null?void 0:R.whatsapp_enviados)||1)*100:0,class:"h-2"},null,8,["value"])]),t("div",Vt,[t("div",Nt,[r[14]||(r[14]=t("span",{class:"text-sm text-muted-foreground"},"Tasa de 칠xito",-1)),t("span",{class:V(["text-lg font-semibold",g(M.value.tasaExitoWhatsApp,"entrega")])},o(M.value.tasaExitoWhatsApp.toFixed(1))+"% ",3)])])]}),_:1})]),_:1})])):x("",!0),d.showDetails?(u(),k(e(P),{key:1},{default:s(()=>[a(e(F),null,{default:s(()=>[a(e(I),{class:"text-base"},{default:s(()=>[...r[15]||(r[15]=[c("Resumen General",-1)])]),_:1})]),_:1}),a(e(z),null,{default:s(()=>{var _,p,w;return[t("div",qt,[t("div",Ot,[a(e(Ie),{class:"h-8 w-8 text-blue-600"}),t("div",null,[r[16]||(r[16]=t("p",{class:"text-xs text-muted-foreground"},"Destinatarios",-1)),t("p",Wt,o(b(((_=d.metrics)==null?void 0:_.total_destinatarios)||0)),1)])]),t("div",Ht,[a(e(ze),{class:"h-8 w-8 text-green-600"}),t("div",null,[r[17]||(r[17]=t("p",{class:"text-xs text-muted-foreground"},"Enviados",-1)),t("p",Xt,o(b(((p=d.metrics)==null?void 0:p.total_enviados)||0)),1)])]),t("div",Gt,[a(e(fe),{class:"h-8 w-8 text-red-600"}),t("div",null,[r[18]||(r[18]=t("p",{class:"text-xs text-muted-foreground"},"Fallidos",-1)),t("p",Jt,o(b(((w=d.metrics)==null?void 0:w.total_fallidos)||0)),1)])]),t("div",Kt,[a(e(xe),{class:"h-8 w-8 text-purple-600"}),t("div",null,[r[19]||(r[19]=t("p",{class:"text-xs text-muted-foreground"},"Tasa entrega",-1)),t("p",Qt,o(M.value.tasaEntrega.toFixed(1))+"%",1)])])])]}),_:1})]),_:1})):x("",!0)]))}}),Zt={class:"flex justify-between items-center"},ea={class:"space-y-2"},ta={class:"flex justify-between text-sm"},aa={class:"font-medium"},sa={class:"flex justify-between text-xs text-muted-foreground"},la={class:"grid grid-cols-2 gap-4"},oa={class:"space-y-1"},na={class:"flex items-center gap-2"},ia={class:"text-2xl font-bold"},ra={class:"text-xs text-muted-foreground"},da={class:"space-y-1"},ua={class:"flex items-center gap-2"},ca={class:"text-2xl font-bold"},ma={class:"space-y-1"},fa={class:"flex items-center gap-2"},va={class:"text-2xl font-bold"},pa={class:"text-xs text-muted-foreground"},xa={class:"space-y-1"},_a={class:"flex items-center gap-2"},ga={class:"text-2xl font-bold"},ha={key:0,class:"pt-2 border-t"},wa={class:"flex justify-between items-center text-sm"},ya={key:0},ba={class:"ml-2"},ka={key:1},$a={class:"ml-2 font-medium"},Ca={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-md"},Ea={class:"flex items-center gap-2"},Da={class:"text-sm text-red-800"},Ra=ve({__name:"CampanaProgress",props:{progreso:{},total:{},enviados:{},pendientes:{},fallidos:{},estado:{},velocidad:{},tiempoRestante:{},fechaInicio:{}},setup(d){const D=d,i=ee(()=>{let l=0;if(D.progreso!==void 0)l=D.progreso;else{if(D.total===0)return 0;l=Math.round(D.enviados/D.total*100)}return Math.max(0,Math.min(l,100))}),g=ee(()=>D.total===0?0:Math.round(D.fallidos/D.total*100)),M=l=>{if(!l)return"--";if(l<60)return`${Math.round(l)} min`;const r=Math.floor(l/60),_=Math.round(l%60);if(r<24)return`${r}h ${_}m`;const p=Math.floor(r/24),w=r%24;return`${p}d ${w}h`},b=l=>({iniciando:{variant:"default",text:"Iniciando"},enviando:{variant:"default",text:"Enviando"},pausada:{variant:"warning",text:"Pausada"},completada:{variant:"success",text:"Completada"},cancelada:{variant:"destructive",text:"Cancelada"},fallida:{variant:"destructive",text:"Fallida"}})[l]||{variant:"secondary",text:l};return(l,r)=>(u(),k(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[t("div",Zt,[a(e(I),{class:"text-base"},{default:s(()=>[...r[0]||(r[0]=[c("Progreso de Env칤o",-1)])]),_:1}),a(e(q),{variant:b(d.estado).variant},{default:s(()=>[c(o(b(d.estado).text),1)]),_:1},8,["variant"])])]),_:1}),a(e(z),{class:"space-y-4"},{default:s(()=>[t("div",ea,[t("div",ta,[r[1]||(r[1]=t("span",{class:"text-muted-foreground"},"Progreso total",-1)),t("span",aa,o(i.value)+"%",1)]),a(e(se),{"model-value":i.value,class:"h-3"},null,8,["model-value"]),t("div",sa,[t("span",null,o(d.enviados)+" enviados",1),t("span",null,o(d.total)+" total",1)])]),t("div",la,[t("div",oa,[t("div",na,[a(e(ze),{class:"w-4 h-4 text-green-600"}),r[2]||(r[2]=t("span",{class:"text-sm font-medium"},"Enviados",-1))]),t("p",ia,o(d.enviados.toLocaleString()),1),t("p",ra,o(i.value)+"% completado ",1)]),t("div",da,[t("div",ua,[a(e(ne),{class:"w-4 h-4 text-blue-600"}),r[3]||(r[3]=t("span",{class:"text-sm font-medium"},"Pendientes",-1))]),t("p",ca,o(d.pendientes.toLocaleString()),1),r[4]||(r[4]=t("p",{class:"text-xs text-muted-foreground"}," Por enviar ",-1))]),t("div",ma,[t("div",fa,[a(e(fe),{class:"w-4 h-4 text-red-600"}),r[5]||(r[5]=t("span",{class:"text-sm font-medium"},"Fallidos",-1))]),t("p",va,o(d.fallidos.toLocaleString()),1),t("p",pa,o(g.value)+"% del total ",1)]),t("div",xa,[t("div",_a,[a(e(xe),{class:"w-4 h-4 text-purple-600"}),r[6]||(r[6]=t("span",{class:"text-sm font-medium"},"Velocidad",-1))]),t("p",ga,o(d.velocidad?d.velocidad.toFixed(1):"--"),1),r[7]||(r[7]=t("p",{class:"text-xs text-muted-foreground"}," env칤os/min ",-1))])]),d.tiempoRestante||d.fechaInicio?(u(),f("div",ha,[t("div",wa,[d.fechaInicio?(u(),f("div",ya,[r[8]||(r[8]=t("span",{class:"text-muted-foreground"},"Iniciado:",-1)),t("span",ba,o(new Date(d.fechaInicio).toLocaleString("es-CO")),1)])):x("",!0),d.tiempoRestante?(u(),f("div",ka,[r[9]||(r[9]=t("span",{class:"text-muted-foreground"},"Tiempo restante:",-1)),t("span",$a,o(M(d.tiempoRestante)),1)])):x("",!0)])])):x("",!0),g.value>10?(u(),f("div",Ca,[t("div",Ea,[a(e(me),{class:"w-4 h-4 text-red-600"}),t("span",Da," Alta tasa de fallos ("+o(g.value)+"%). Revisa la configuraci칩n de env칤o. ",1)])])):x("",!0)]),_:1})]),_:1}))}}),Sa={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ja={class:"text-sm text-muted-foreground mt-1"},Aa={class:"flex flex-wrap gap-2"},Ma={key:1,class:"text-center py-8 text-muted-foreground"},La={key:2,class:"text-center py-8 text-muted-foreground"},Ta={key:3,class:"overflow-x-auto"},Fa={key:0,class:"space-y-4"},Ia={class:"grid grid-cols-2 gap-4"},za={class:"font-mono text-sm"},Pa={class:"text-sm"},Ba={key:0},Ua={class:"font-mono text-xs bg-muted p-2 rounded"},Va={key:1},Na={key:2},qa={class:"bg-muted p-3 rounded text-xs overflow-auto max-h-[200px]"},Oa=ve({__name:"CampanaLogs",props:{campanaId:{},tipo:{}},setup(d){const D=d,i=A([]),g=A("todos"),M=A(!1),b=A(null),l=A(null),r=A(!1),_=ee(()=>g.value==="todos"?i.value:i.value.filter(h=>h.servicio===g.value)),p=ee(()=>{const h=i.value.length,m=i.value.filter(H=>["enviado","abierto","click"].includes(H.estado)).length,$=i.value.filter(H=>H.estado==="fallido").length,de=i.value.filter(H=>["pendiente","enviando"].includes(H.estado)).length;return{total:h,exitosos:m,fallidos:$,pendientes:de}}),w=async()=>{M.value=!0,b.value=null;try{const h=await fetch(`/admin/campanas/${D.campanaId}/logs`);if(!h.ok)throw new Error("Error al cargar logs");i.value=await h.json()}catch(h){b.value=h.message||"Error desconocido"}finally{M.value=!1}},y=h=>({pendiente:"secondary",enviando:"outline",enviado:"default",abierto:"default",click:"default",fallido:"destructive"})[h]||"secondary",R=h=>({pendiente:ne,enviando:ne,enviado:Ze,abierto:Q,click:Q,fallido:fe})[h]||ne,j=h=>{if(!h)return"-";try{return new Date(h).toLocaleString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return h}},E=h=>{l.value=h,r.value=!0};return Pe(w),(h,m)=>(u(),f(K,null,[a(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[t("div",Sa,[t("div",null,[a(e(I),null,{default:s(()=>[...m[3]||(m[3]=[c("Logs de Env칤o",-1)])]),_:1}),t("p",ja,o(p.value.total)+" registros | "+o(p.value.exitosos)+" exitosos | "+o(p.value.fallidos)+" fallidos ",1)]),t("div",Aa,[d.tipo!=="whatsapp"?(u(),k(e(T),{key:0,variant:g.value==="resend"?"default":"outline",size:"sm",onClick:m[0]||(m[0]=$=>g.value=g.value==="resend"?"todos":"resend")},{default:s(()=>[a(e(ie),{class:"w-4 h-4 mr-1"}),m[4]||(m[4]=c(" Resend ",-1))]),_:1},8,["variant"])):x("",!0),d.tipo!=="email"?(u(),k(e(T),{key:1,variant:g.value==="evolution"?"default":"outline",size:"sm",onClick:m[1]||(m[1]=$=>g.value=g.value==="evolution"?"todos":"evolution")},{default:s(()=>[a(e(re),{class:"w-4 h-4 mr-1"}),m[5]||(m[5]=c(" Evolution ",-1))]),_:1},8,["variant"])):x("",!0),a(e(T),{variant:"ghost",size:"sm",onClick:w,disabled:M.value},{default:s(()=>[a(e(_e),{class:V(["w-4 h-4",{"animate-spin":M.value}])},null,8,["class"])]),_:1},8,["disabled"])])])]),_:1}),a(e(z),null,{default:s(()=>[b.value?(u(),k(e(Re),{key:0,variant:"destructive",class:"mb-4"},{default:s(()=>[a(e(me),{class:"h-4 w-4"}),a(e(Se),null,{default:s(()=>[c(o(b.value),1)]),_:1})]),_:1})):x("",!0),M.value&&i.value.length===0?(u(),f("div",Ma," Cargando logs... ")):_.value.length===0?(u(),f("div",La," No hay logs de env칤o disponibles ")):(u(),f("div",Ta,[a(e(Le),null,{default:s(()=>[a(e(Te),null,{default:s(()=>[a(e(oe),null,{default:s(()=>[a(e(N),{class:"w-[100px]"},{default:s(()=>[...m[6]||(m[6]=[c("Servicio",-1)])]),_:1}),a(e(N),null,{default:s(()=>[...m[7]||(m[7]=[c("Destinatario",-1)])]),_:1}),a(e(N),{class:"w-[100px]"},{default:s(()=>[...m[8]||(m[8]=[c("Estado",-1)])]),_:1}),a(e(N),null,{default:s(()=>[...m[9]||(m[9]=[c("Fecha",-1)])]),_:1}),a(e(N),null,{default:s(()=>[...m[10]||(m[10]=[c("ID Mensaje",-1)])]),_:1}),a(e(N),{class:"w-[80px]"},{default:s(()=>[...m[11]||(m[11]=[c("Acciones",-1)])]),_:1})]),_:1})]),_:1}),a(e(Fe),null,{default:s(()=>[(u(!0),f(K,null,le(_.value,$=>(u(),k(e(oe),{key:$.id},{default:s(()=>[a(e(B),null,{default:s(()=>[a(e(q),{variant:$.servicio==="resend"?"default":"secondary"},{default:s(()=>[(u(),k(Z($.servicio==="resend"?e(ie):e(re)),{class:"w-3 h-3 mr-1"})),c(" "+o($.servicio==="resend"?"Resend":"Evolution"),1)]),_:2},1032,["variant"])]),_:2},1024),a(e(B),{class:"max-w-[200px] truncate",title:$.destinatario},{default:s(()=>[c(o($.destinatario),1)]),_:2},1032,["title"]),a(e(B),null,{default:s(()=>[a(e(q),{variant:y($.estado)},{default:s(()=>[(u(),k(Z(R($.estado)),{class:"w-3 h-3 mr-1"})),c(" "+o($.estado),1)]),_:2},1032,["variant"])]),_:2},1024),a(e(B),{class:"text-sm"},{default:s(()=>[c(o(j($.fecha)),1)]),_:2},1024),a(e(B),{class:"font-mono text-xs max-w-[150px] truncate",title:$.mensaje_id||""},{default:s(()=>[c(o($.mensaje_id||"-"),1)]),_:2},1032,["title"]),a(e(B),null,{default:s(()=>[a(e(T),{variant:"ghost",size:"sm",onClick:de=>E($)},{default:s(()=>[a(e(Q),{class:"w-4 h-4"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))]),_:1})]),_:1}),a(e(Ye),{open:r.value,"onUpdate:open":m[2]||(m[2]=$=>r.value=$)},{default:s(()=>[a(e(Ge),{class:"max-w-2xl"},{default:s(()=>[a(e(Je),null,{default:s(()=>[a(e(Ke),null,{default:s(()=>[...m[12]||(m[12]=[c("Detalles del Env칤o",-1)])]),_:1}),a(e(Qe),null,{default:s(()=>[...m[13]||(m[13]=[c(" Informaci칩n completa del registro de env칤o ",-1)])]),_:1})]),_:1}),l.value?(u(),f("div",Fa,[t("div",Ia,[t("div",null,[m[14]||(m[14]=t("p",{class:"text-sm text-muted-foreground"},"Servicio",-1)),a(e(q),{variant:l.value.servicio==="resend"?"default":"secondary"},{default:s(()=>[c(o(l.value.servicio==="resend"?"Resend":"Evolution API"),1)]),_:1},8,["variant"])]),t("div",null,[m[15]||(m[15]=t("p",{class:"text-sm text-muted-foreground"},"Estado",-1)),a(e(q),{variant:y(l.value.estado)},{default:s(()=>[c(o(l.value.estado),1)]),_:1},8,["variant"])]),t("div",null,[m[16]||(m[16]=t("p",{class:"text-sm text-muted-foreground"},"Destinatario",-1)),t("p",za,o(l.value.destinatario),1)]),t("div",null,[m[17]||(m[17]=t("p",{class:"text-sm text-muted-foreground"},"Fecha de Env칤o",-1)),t("p",Pa,o(j(l.value.fecha)),1)])]),l.value.mensaje_id?(u(),f("div",Ba,[m[18]||(m[18]=t("p",{class:"text-sm text-muted-foreground"},"ID del Mensaje",-1)),t("p",Ua,o(l.value.mensaje_id),1)])):x("",!0),l.value.error?(u(),f("div",Va,[m[19]||(m[19]=t("p",{class:"text-sm text-muted-foreground"},"Error",-1)),a(e(Re),{variant:"destructive"},{default:s(()=>[a(e(me),{class:"h-4 w-4"}),a(e(Se),null,{default:s(()=>[c(o(l.value.error),1)]),_:1})]),_:1})])):x("",!0),l.value.metadata&&Object.keys(l.value.metadata).length>0?(u(),f("div",Na,[m[20]||(m[20]=t("p",{class:"text-sm text-muted-foreground mb-2"},"Metadata",-1)),t("pre",qa,o(JSON.stringify(l.value.metadata,null,2)),1)])):x("",!0)])):x("",!0)]),_:1})]),_:1},8,["open"])],64))}}),Wa={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ha={class:"flex justify-between items-start"},Xa={class:"flex items-center gap-3"},Ga={class:"text-3xl font-bold"},Ja={key:0,class:"flex items-center gap-1 text-xs"},Ka={key:0,class:"text-muted-foreground mt-1"},Qa={class:"flex items-center gap-4 mt-2 text-sm text-muted-foreground"},Ya={class:"flex items-center gap-1"},Za={class:"capitalize"},es={key:0,class:"flex items-center gap-1"},ts={key:1,class:"flex items-center gap-1"},as={class:"flex items-center gap-1 text-xs"},ss={class:"flex gap-2"},ls={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},os={class:"flex justify-between"},ns={class:"flex justify-between"},is={key:0,class:"flex justify-between"},rs={key:1,class:"flex justify-between"},ds={key:2,class:"flex justify-between"},us={key:0},cs={class:"flex items-center gap-2 mb-1"},ms={class:"pl-6 text-sm"},fs={class:"text-muted-foreground"},vs={key:1},ps={class:"flex items-center gap-2 mb-1"},xs={class:"pl-6 text-sm"},_s={class:"flex justify-between items-center"},gs={class:"flex items-center gap-2"},hs={class:"font-medium"},ws={class:"text-sm text-muted-foreground"},ys={key:0,class:"flex items-center gap-1"},bs={key:1,class:"text-muted-foreground"},ks={key:0,class:"flex items-center gap-1"},$s={key:1,class:"text-muted-foreground"},Cs={class:"bg-muted/30 p-4"},Es={key:0,class:"space-y-2"},Ds={class:"text-muted-foreground text-xs"},Rs={key:1,class:"text-sm text-muted-foreground"},Ss={key:0,class:"space-y-2"},js={key:0},As={class:"flex items-center gap-2 text-sm"},Ms={class:"font-medium"},Ls={class:"text-xs text-muted-foreground ml-5"},Ts={class:"truncate"},Fs={key:0},Is={key:1},zs={class:"flex items-center gap-2 text-sm"},Ps={class:"font-medium"},Bs={class:"text-xs text-muted-foreground ml-5"},Us={class:"truncate"},Vs={key:1,class:"text-sm text-muted-foreground"},Ns={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qs={key:0},Os={class:"font-medium"},Ws={key:1},Hs={class:"font-medium"},Xs={key:2},Gs={class:"font-medium"},Js={key:3},Ks={class:"font-medium"},Me=3,io=ve({__name:"Show",props:{campana:{},metricas:{},comparacion:{},tendencias:{},enviosRecientes:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canPause:{type:Boolean},canResume:{type:Boolean},canCancel:{type:Boolean}},setup(d){const D=d,i=A(D.campana),g=A(D.metricas),M=A(D.comparacion),b=A(D.tendencias),l=A(D.enviosRecientes),r=[{title:"Admin",href:"/admin/dashboard"},{title:"Campa침as",href:"/admin/campanas"},{title:i.value.nombre,href:"#"}],_=A("resumen"),p=A(!1);let w=null;const y=A(!0),R=A(5e3),j=A(new Date),E=A([]),h=C=>{const n=E.value.indexOf(C);n>-1?E.value.splice(n,1):E.value.push(C)},m=ee(()=>{const C=g.value.total_destinatarios||1,n=g.value.total_enviados||0,v=Math.round(n/C*100);return Math.min(v,100)}),$=C=>({borrador:"secondary",programada:"outline",enviando:"default",completada:"default",pausada:"warning",cancelada:"destructive"})[C]||"secondary",de=C=>C==="email"?ie:C==="whatsapp"?re:it,H=()=>{ae.post(`/admin/campanas/${i.value.id}/send`,{},{onSuccess:()=>{L.success("Campa침a iniciada exitosamente"),i.value.estado="enviando",ue(),O()},onError:()=>{L.error("Error al iniciar la campa침a")}})},Be=()=>{ae.post(`/admin/campanas/${i.value.id}/pause`,{},{onSuccess:()=>{L.success("Campa침a pausada"),i.value.estado="pausada",O()},onError:()=>{L.error("Error al pausar la campa침a")}})},Ue=()=>{ae.post(`/admin/campanas/${i.value.id}/resume`,{},{onSuccess:()=>{L.success("Campa침a reanudada"),i.value.estado="enviando",ue(),O()},onError:()=>{L.error("Error al reanudar la campa침a")}})},Ve=()=>{confirm("쮼st치s seguro de cancelar esta campa침a? Esta acci칩n no se puede deshacer.")&&ae.post(`/admin/campanas/${i.value.id}/cancel`,{},{onSuccess:()=>{L.success("Campa침a cancelada"),i.value.estado="cancelada",te(),O()},onError:()=>{L.error("Error al cancelar la campa침a")}})},O=async()=>{if(!p.value){p.value=!0;try{const C=await fetch(`/admin/campanas/${i.value.id}/metrics`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const n=await C.json();if(n.success){n.metricas&&(g.value={...g.value,...n.metricas}),n.estado&&(i.value.estado=n.estado),n.progreso,j.value=new Date;const v=n.estado==="completada"&&g.value.total_enviados>=g.value.total_destinatarios,S=n.estado==="cancelada";v||S?(te(),v?L.success("춰Campa침a completada exitosamente! 游꿀"):S&&L.info("Campa침a cancelada. Auto-actualizaci칩n detenida.")):n.estado==="completada"&&m.value<100&&console.warn("[CampanaMetrics] Estado completada pero progreso incompleto, continuando actualizaci칩n...")}}catch(C){console.error("Error refreshing metrics:",C),y.value||L.error("Error al actualizar m칠tricas")}finally{p.value=!1}}},Ne=()=>{ae.post(`/admin/campanas/${i.value.id}/export`,{formato:"excel",incluir_detalles:!0},{onSuccess:()=>{L.success("Reporte exportado exitosamente")},onError:()=>{L.error("Error al exportar el reporte")}})};let X=0;const ue=()=>{w&&clearInterval(w);let C=R.value;i.value.estado==="enviando"?C=2e3:i.value.estado==="programada"&&(C=5e3),w=setInterval(()=>{y.value&&O().catch(n=>{X++,console.error("[AutoRefresh] Error consecutivo",X,"de",Me),X>=Me&&(console.error("[AutoRefresh] Demasiados errores consecutivos, deteniendo auto-refresh"),te(),L.error('Auto-actualizaci칩n detenida por errores. Haz clic en "Auto OFF" para reactivar.'))}).then(()=>{X>0&&(X=0)})},C),y.value=!0,X=0},te=()=>{w&&(clearInterval(w),w=null),y.value=!1,X=0},qe=()=>{y.value?(te(),L.info("Auto-actualizaci칩n detenida")):(ue(),L.success("Auto-actualizaci칩n activada"),O())};return Pe(()=>{["enviando","programada","pausada"].includes(i.value.estado)&&ue(),setTimeout(()=>{O()},1e3)}),He(()=>{te()}),(C,n)=>(u(),k(Oe,{breadcrumbs:r},{default:s(()=>[a(e(Xe),{title:`Campa침a: ${i.value.nombre}`},null,8,["title"]),t("div",Wa,[t("div",Ha,[t("div",null,[t("div",Xa,[t("h1",Ga,o(i.value.nombre),1),a(e(q),{variant:$(i.value.estado),class:"text-sm"},{default:s(()=>[c(o(i.value.estado),1)]),_:1},8,["variant"]),y.value?(u(),f("div",Ja,[...n[1]||(n[1]=[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1),t("span",{class:"text-muted-foreground"},"Actualizando...",-1)])])):x("",!0)]),i.value.descripcion?(u(),f("p",Ka,o(i.value.descripcion),1)):x("",!0),t("div",Qa,[t("div",Ya,[(u(),k(Z(de(i.value.tipo)),{class:"w-4 h-4"})),t("span",Za,o(i.value.tipo),1)]),i.value.segment?(u(),f("div",es,[a(e(Ie),{class:"w-4 h-4"}),t("span",null,o(i.value.segment.name),1)])):x("",!0),i.value.fecha_programada?(u(),f("div",ts,[a(e(et),{class:"w-4 h-4"}),t("span",null,o(i.value.fecha_programada?new Date(i.value.fecha_programada).toLocaleString("es-ES"):"-"),1)])):x("",!0),t("div",as,[a(e(ne),{class:"w-3 h-3"}),t("span",null,"Actualizado: "+o(j.value.toLocaleTimeString("es-ES")),1)])])]),t("div",ss,[a(e(De),{href:"/admin/campanas"},{default:s(()=>[a(e(T),{variant:"outline"},{default:s(()=>[a(e(tt),{class:"w-4 h-4 mr-2"}),n[2]||(n[2]=c(" Volver ",-1))]),_:1})]),_:1}),a(e(T),{onClick:qe,variant:"outline",class:V({"border-green-500":y.value})},{default:s(()=>[a(e(_e),{class:V(["w-4 h-4 mr-2",{"animate-spin":p.value}])},null,8,["class"]),c(" "+o(y.value?"Auto ON":"Auto OFF"),1)]),_:1},8,["class"]),d.canEdit&&i.value.estado==="borrador"?(u(),k(e(De),{key:0,href:`/admin/campanas/${i.value.id}/edit`},{default:s(()=>[a(e(T),{variant:"outline"},{default:s(()=>[a(e(at),{class:"w-4 h-4 mr-2"}),n[3]||(n[3]=c(" Editar ",-1))]),_:1})]),_:1},8,["href"])):x("",!0),i.value.estado==="borrador"?(u(),k(e(T),{key:1,onClick:H,variant:"default"},{default:s(()=>[a(e(je),{class:"w-4 h-4 mr-2"}),n[4]||(n[4]=c(" Iniciar Env칤o ",-1))]),_:1})):x("",!0),d.canPause&&i.value.estado==="enviando"?(u(),k(e(T),{key:2,onClick:Be,variant:"warning"},{default:s(()=>[a(e(st),{class:"w-4 h-4 mr-2"}),n[5]||(n[5]=c(" Pausar ",-1))]),_:1})):x("",!0),d.canResume&&i.value.estado==="pausada"?(u(),k(e(T),{key:3,onClick:Ue,variant:"default"},{default:s(()=>[a(e(je),{class:"w-4 h-4 mr-2"}),n[6]||(n[6]=c(" Reanudar ",-1))]),_:1})):x("",!0),d.canCancel&&["borrador","programada","pausada"].includes(i.value.estado)?(u(),k(e(T),{key:4,onClick:Ve,variant:"destructive"},{default:s(()=>[a(e(fe),{class:"w-4 h-4 mr-2"}),n[7]||(n[7]=c(" Cancelar ",-1))]),_:1})):x("",!0),a(e(T),{onClick:Ne,variant:"outline"},{default:s(()=>[a(e(lt),{class:"w-4 h-4 mr-2"}),n[8]||(n[8]=c(" Exportar ",-1))]),_:1})])]),["enviando","completada","pausada"].includes(i.value.estado)?(u(),k(Ra,{key:0,progreso:m.value,total:g.value.total_destinatarios,enviados:g.value.total_enviados,pendientes:g.value.total_pendientes,fallidos:g.value.total_fallidos,estado:i.value.estado,"fecha-inicio":i.value.fecha_inicio},null,8,["progreso","total","enviados","pendientes","fallidos","estado","fecha-inicio"])):x("",!0),a(Yt,{metrics:g.value,comparison:M.value,tipo:i.value.tipo},null,8,["metrics","comparison","tipo"]),a(e($e),{modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=v=>_.value=v)},{default:s(()=>[a(e(Ce),null,{default:s(()=>[a(e(J),{value:"resumen"},{default:s(()=>[...n[9]||(n[9]=[c("Resumen",-1)])]),_:1}),a(e(J),{value:"actividad"},{default:s(()=>[...n[10]||(n[10]=[c("Actividad Reciente",-1)])]),_:1}),a(e(J),{value:"logs"},{default:s(()=>[...n[11]||(n[11]=[c("Logs",-1)])]),_:1}),b.value&&b.value.length>0?(u(),k(e(J),{key:0,value:"tendencias"},{default:s(()=>[...n[12]||(n[12]=[c(" Tendencias ",-1)])]),_:1})):x("",!0),a(e(J),{value:"configuracion"},{default:s(()=>[...n[13]||(n[13]=[c("Configuraci칩n",-1)])]),_:1})]),_:1}),a(e(Y),{value:"resumen"},{default:s(()=>[t("div",ls,[a(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[a(e(I),null,{default:s(()=>[...n[14]||(n[14]=[c("Informaci칩n de la Campa침a",-1)])]),_:1})]),_:1}),a(e(z),{class:"space-y-3"},{default:s(()=>{var v,S;return[t("div",os,[n[15]||(n[15]=t("span",{class:"text-muted-foreground"},"Creada por:",-1)),t("span",null,o(((v=i.value.created_by)==null?void 0:v.nombre)||((S=i.value.created_by)==null?void 0:S.name)||"Sistema"),1)]),t("div",ns,[n[16]||(n[16]=t("span",{class:"text-muted-foreground"},"Fecha creaci칩n:",-1)),t("span",null,o(new Date(i.value.created_at).toLocaleDateString("es-ES")),1)]),i.value.fecha_inicio?(u(),f("div",is,[n[17]||(n[17]=t("span",{class:"text-muted-foreground"},"Inicio env칤o:",-1)),t("span",null,o(i.value.fecha_inicio?new Date(i.value.fecha_inicio).toLocaleString("es-ES"):"-"),1)])):x("",!0),i.value.fecha_fin?(u(),f("div",rs,[n[18]||(n[18]=t("span",{class:"text-muted-foreground"},"Fin env칤o:",-1)),t("span",null,o(i.value.fecha_fin?new Date(i.value.fecha_fin).toLocaleString("es-ES"):"-"),1)])):x("",!0),g.value.tiempo_promedio_envio?(u(),f("div",ds,[n[19]||(n[19]=t("span",{class:"text-muted-foreground"},"Tiempo promedio:",-1)),t("span",null,o(g.value.tiempo_promedio_envio)+"s por env칤o",1)])):x("",!0)]}),_:1})]),_:1}),a(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[a(e(I),null,{default:s(()=>[...n[20]||(n[20]=[c("Plantillas Utilizadas",-1)])]),_:1})]),_:1}),a(e(z),{class:"space-y-3"},{default:s(()=>[i.value.plantilla_email?(u(),f("div",us,[t("div",cs,[a(e(ie),{class:"w-4 h-4 text-muted-foreground"}),n[21]||(n[21]=t("span",{class:"font-medium"},"Email:",-1))]),t("div",ms,[t("div",null,o(i.value.plantilla_email.nombre),1),t("div",fs," Asunto: "+o(i.value.plantilla_email.asunto),1)])])):x("",!0),i.value.plantilla_whats_app?(u(),f("div",vs,[t("div",ps,[a(e(re),{class:"w-4 h-4 text-muted-foreground"}),n[22]||(n[22]=t("span",{class:"font-medium"},"WhatsApp:",-1))]),t("div",xs,o(i.value.plantilla_whats_app.nombre),1)])):x("",!0)]),_:1})]),_:1})])]),_:1}),a(e(Y),{value:"actividad"},{default:s(()=>[a(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[t("div",_s,[a(e(I),null,{default:s(()=>[...n[23]||(n[23]=[c("Actividad Reciente",-1)])]),_:1}),a(e(T),{onClick:O,variant:"outline",size:"sm",disabled:p.value},{default:s(()=>[a(e(_e),{class:V(["w-4 h-4",{"animate-spin":p.value}])},null,8,["class"])]),_:1},8,["disabled"])])]),_:1}),a(e(z),null,{default:s(()=>[a(e(Le),null,{default:s(()=>[a(e(Te),null,{default:s(()=>[a(e(oe),null,{default:s(()=>[a(e(N),null,{default:s(()=>[...n[24]||(n[24]=[c("Usuario",-1)])]),_:1}),a(e(N),null,{default:s(()=>[...n[25]||(n[25]=[c("Estado",-1)])]),_:1}),a(e(N),null,{default:s(()=>[...n[26]||(n[26]=[c("Fecha Env칤o",-1)])]),_:1}),a(e(N),null,{default:s(()=>[...n[27]||(n[27]=[c("Apertura",-1)])]),_:1}),a(e(N),null,{default:s(()=>[...n[28]||(n[28]=[c("Clicks",-1)])]),_:1})]),_:1})]),_:1}),a(e(Fe),null,{default:s(()=>[(u(!0),f(K,null,le(l.value,v=>(u(),f(K,{key:v.id},[a(e(oe),{onClick:S=>h(v.id),class:"cursor-pointer hover:bg-muted/50 transition-colors"},{default:s(()=>[a(e(B),null,{default:s(()=>{var S,U;return[t("div",gs,[E.value.includes(v.id)?(u(),k(e(nt),{key:1,class:"w-4 h-4"})):(u(),k(e(ot),{key:0,class:"w-4 h-4"})),t("div",null,[t("div",hs,o((S=v.user)==null?void 0:S.nombre),1),t("div",ws,o((U=v.user)==null?void 0:U.email),1)])])]}),_:2},1024),a(e(B),null,{default:s(()=>[a(e(q),{variant:v.estado==="enviado"?"default":"destructive"},{default:s(()=>[c(o(v.estado),1)]),_:2},1032,["variant"])]),_:2},1024),a(e(B),null,{default:s(()=>[c(o(v.fecha_enviado?new Date(v.fecha_enviado).toLocaleString("es-ES"):"-"),1)]),_:2},1024),a(e(B),null,{default:s(()=>[v.fecha_abierto?(u(),f("div",ys,[a(e(Q),{class:"w-3 h-3"}),c(" "+o(new Date(v.fecha_abierto).toLocaleTimeString("es-ES"))+" ",1),v.aperturas_count&&v.aperturas_count>1?(u(),k(e(q),{key:0,variant:"secondary",class:"ml-1"},{default:s(()=>[c(o(v.aperturas_count),1)]),_:2},1024)):x("",!0)])):(u(),f("span",bs,"-"))]),_:2},1024),a(e(B),null,{default:s(()=>[v.fecha_primer_click?(u(),f("div",ks,[a(e(ge),{class:"w-3 h-3"}),c(" "+o(new Date(v.fecha_primer_click).toLocaleTimeString("es-ES"))+" ",1),v.clicks_count&&v.clicks_count>1?(u(),k(e(q),{key:0,variant:"secondary",class:"ml-1"},{default:s(()=>[c(o(v.clicks_count),1)]),_:2},1024)):x("",!0)])):(u(),f("span",$s,"-"))]),_:2},1024)]),_:2},1032,["onClick"]),E.value.includes(v.id)?(u(),k(e(oe),{key:0},{default:s(()=>[a(e(B),{colspan:"6",class:"p-0"},{default:s(()=>[t("div",Cs,[a(e($e),{defaultValue:"aperturas",class:"w-full"},{default:s(()=>[a(e(Ce),{class:"grid w-full max-w-md grid-cols-2"},{default:s(()=>[a(e(J),{value:"aperturas"},{default:s(()=>[a(e(Q),{class:"w-4 h-4 mr-2"}),c(" Aperturas "+o(v.aperturas_count?`(${v.aperturas_count})`:""),1)]),_:2},1024),a(e(J),{value:"clics"},{default:s(()=>[a(e(ge),{class:"w-4 h-4 mr-2"}),c(" Clics "+o(v.clicks_count?`(${v.clicks_count})`:""),1)]),_:2},1024)]),_:2},1024),a(e(Y),{value:"aperturas",class:"mt-4"},{default:s(()=>{var S,U;return[(U=(S=v.metadata)==null?void 0:S.aperturas)!=null&&U.length?(u(),f("div",Es,[n[29]||(n[29]=t("div",{class:"text-sm font-medium mb-2"},"Historial de aperturas:",-1)),(u(!0),f(K,null,le(v.metadata.aperturas,(W,ce)=>(u(),f("div",{key:ce,class:"flex items-center gap-2 text-sm p-2 bg-background rounded"},[a(e(Q),{class:"w-3 h-3 text-muted-foreground"}),t("span",null,o(new Date(W.timestamp).toLocaleString("es-ES")),1),t("span",Ds,o(W.ip),1)]))),128))])):(u(),f("div",Rs," No hay registros de apertura "))]}),_:2},1024),a(e(Y),{value:"clics",class:"mt-4"},{default:s(()=>{var S,U,W,ce,we,ye,be,ke;return[(U=(S=v.metadata)==null?void 0:S.clicks)!=null&&U.length||(ce=(W=v.metadata)==null?void 0:W.clicks_detail)!=null&&ce.length?(u(),f("div",Ss,[n[30]||(n[30]=t("div",{class:"text-sm font-medium mb-2"},"Historial de clics:",-1)),(ye=(we=v.metadata)==null?void 0:we.clicks_detail)!=null&&ye.length?(u(),f("div",js,[(u(!0),f(K,null,le(v.metadata.clicks_detail,(G,pe)=>(u(),f("div",{key:`click-${pe}`,class:"p-2 bg-background rounded space-y-1"},[t("div",As,[a(e(Ae),{class:"w-3 h-3 text-muted-foreground"}),t("span",Ms,o(new Date(G.clicked_at).toLocaleString("es-ES")),1)]),t("div",Ls,[t("div",Ts,"URL: "+o(G.url),1),G.ip?(u(),f("div",Fs,"IP: "+o(G.ip),1)):x("",!0)])]))),128))])):(ke=(be=v.metadata)==null?void 0:be.clicks)!=null&&ke.length?(u(),f("div",Is,[(u(!0),f(K,null,le(v.metadata.clicks,(G,pe)=>(u(),f("div",{key:`click-${pe}`,class:"p-2 bg-background rounded space-y-1"},[t("div",zs,[a(e(Ae),{class:"w-3 h-3 text-muted-foreground"}),t("span",Ps,o(new Date(G.timestamp).toLocaleString("es-ES")),1)]),t("div",Bs,[t("div",Us,"URL: "+o(G.url),1)])]))),128))])):x("",!0)])):(u(),f("div",Vs," No hay registros de clics "))]}),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)):x("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(e(Y),{value:"logs"},{default:s(()=>[a(Oa,{"campana-id":i.value.id,tipo:i.value.tipo},null,8,["campana-id","tipo"])]),_:1}),a(e(Y),{value:"configuracion"},{default:s(()=>[a(e(P),null,{default:s(()=>[a(e(F),null,{default:s(()=>[a(e(I),null,{default:s(()=>[...n[31]||(n[31]=[c("Configuraci칩n de Env칤o",-1)])]),_:1})]),_:1}),a(e(z),null,{default:s(()=>{var v,S,U,W;return[t("div",Ns,[(v=i.value.configuracion)!=null&&v.batch_size_email?(u(),f("div",qs,[n[32]||(n[32]=t("div",{class:"text-sm text-muted-foreground"},"Tama침o de lote (Email)",-1)),t("div",Os,o(i.value.configuracion.batch_size_email)+" emails/lote",1)])):x("",!0),(S=i.value.configuracion)!=null&&S.batch_size_whatsapp?(u(),f("div",Ws,[n[33]||(n[33]=t("div",{class:"text-sm text-muted-foreground"},"Tama침o de lote (WhatsApp)",-1)),t("div",Hs,o(i.value.configuracion.batch_size_whatsapp)+" mensajes/lote",1)])):x("",!0),((U=i.value.configuracion)==null?void 0:U.enable_pixel_tracking)!==void 0?(u(),f("div",Xs,[n[34]||(n[34]=t("div",{class:"text-sm text-muted-foreground"},"Tracking de apertura",-1)),t("div",Gs,o(i.value.configuracion.enable_pixel_tracking?"Habilitado":"Deshabilitado"),1)])):x("",!0),((W=i.value.configuracion)==null?void 0:W.enable_click_tracking)!==void 0?(u(),f("div",Js,[n[35]||(n[35]=t("div",{class:"text-sm text-muted-foreground"},"Tracking de clicks",-1)),t("div",Ks,o(i.value.configuracion.enable_click_tracking?"Habilitado":"Deshabilitado"),1)])):x("",!0)])]}),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}});export{io as default};
