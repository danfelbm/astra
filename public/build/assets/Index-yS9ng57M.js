import{d as I,b as _,e as d,w as s,g as o,j as g,f as e,u as t,t as r,h as n,i as v,F as $,k,P as x,n as N,W as w}from"./app-D8b1iyhG.js";import{_ as E}from"./UserLayout.vue_vue_type_script_setup_true_lang-D3FQmwdK.js";import{_ as y}from"./createLucideIcon-BzCZ4Ux9.js";import{_ as u,c,a as h,b as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-CpubZFQk.js";import{_ as V}from"./index-BFz4Rjr1.js";import{_ as A}from"./Progress.vue_vue_type_script_setup_true_lang-3lBB9Alf.js";import{_ as D,a as F,b as O,c as p,d as T,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-Bmp4aWmy.js";import{t as P}from"./index-DFpoRNc9.js";import{C as W}from"./calendar-C2mN7fi8.js";import{S as q}from"./square-pen-BlhzgUDR.js";import{C as L}from"./check-DAlbwhOo.js";import{f as G,e as H}from"./es-BDPlFIsO.js";import{p as J}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-DfKxWH3N.js";import"./index-9EknitmW.js";import"./floating-ui.vue-D_44iLrk.js";import"./x-Di3hRZd2.js";import"./Input.vue_vue_type_script_setup_true_lang-DEoN5cyd.js";import"./index-_HrGOJG6.js";import"./index-yOcDiT7U.js";import"./shield-CrMFR-sA.js";import"./user-DoEsQuJB.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Clw7uZZX.js";import"./chevron-right-C1p0_YAD.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D5C9pVNC.js";import"./VisuallyHidden-D42UHKy9.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BW9QKckn.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-DXnOW2ZY.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CPkoHE-3.js";import"./circle-alert-BAiY2yAu.js";import"./map-pin-DH233x2C.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cl6UTNVG.js";import"./square-check-big-DrHt1pO1.js";import"./file-text-D-NxJb2x.js";import"./users-bMGn_vPW.js";import"./folder-open-DzYKMiH4.js";import"./index-BPeLIox3.js";const K={class:"py-6"},Q={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},R={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},U={class:"text-2xl font-bold"},X={class:"text-2xl font-bold text-yellow-600"},Y={class:"text-2xl font-bold text-green-600"},Z={class:"text-2xl font-bold text-red-600"},tt={class:"space-y-2"},st={class:"text-sm text-gray-600"},et={class:"flex justify-between"},at={class:"text-sm"},lt={class:"text-gray-500"},it={class:"flex items-center gap-2"},ot={class:"text-sm"},rt={class:"flex gap-1"},Kt=I({__name:"Index",props:{obligaciones:{},estadisticas:{},obligacionesCriticas:{},canComplete:{type:Boolean}},setup(nt){const S=l=>{if(!l)return"Sin fecha";try{return G(J(l),"dd MMM yyyy",{locale:H})}catch{return l}},z=l=>({pendiente:"secondary",en_progreso:"default",cumplida:"success",vencida:"destructive",cancelada:"warning"})[l]||"secondary",M=l=>{const a=prompt("Ingrese el porcentaje de avance (0-100):",String(l.porcentaje_cumplimiento));a!==null&&w.put(route("miembro.mis-obligaciones.actualizar-progreso",l.id),{porcentaje_cumplimiento:parseInt(a)},{onSuccess:()=>P.success("Progreso actualizado")})},B=l=>{confirm("¿Marcar esta obligación como cumplida?")&&w.post(route("miembro.mis-obligaciones.completar",l.id),{},{onSuccess:()=>P.success("Obligación marcada como cumplida")})};return(l,a)=>(d(),_(E,{title:"Mis Obligaciones"},{header:s(()=>[...a[0]||(a[0]=[o("h2",{class:"text-xl font-semibold"},"Mis Obligaciones",-1)])]),default:s(()=>[o("div",K,[o("div",Q,[o("div",R,[e(t(u),null,{default:s(()=>[e(t(c),{class:"pt-6"},{default:s(()=>[o("div",U,r(l.estadisticas.total),1),a[1]||(a[1]=o("p",{class:"text-sm text-gray-600"},"Total Asignadas",-1))]),_:1})]),_:1}),e(t(u),null,{default:s(()=>[e(t(c),{class:"pt-6"},{default:s(()=>[o("div",X,r(l.estadisticas.pendientes),1),a[2]||(a[2]=o("p",{class:"text-sm text-gray-600"},"Pendientes",-1))]),_:1})]),_:1}),e(t(u),null,{default:s(()=>[e(t(c),{class:"pt-6"},{default:s(()=>[o("div",Y,r(l.estadisticas.cumplidas),1),a[3]||(a[3]=o("p",{class:"text-sm text-gray-600"},"Cumplidas",-1))]),_:1})]),_:1}),e(t(u),null,{default:s(()=>[e(t(c),{class:"pt-6"},{default:s(()=>[o("div",Z,r(l.estadisticas.vencidas),1),a[4]||(a[4]=o("p",{class:"text-sm text-gray-600"},"Vencidas",-1))]),_:1})]),_:1})]),l.obligacionesCriticas.length>0?(d(),_(t(u),{key:0,class:"mb-6 border-red-200"},{default:s(()=>[e(t(h),{class:"bg-red-50"},{default:s(()=>[e(t(j),{class:"text-red-800"},{default:s(()=>[...a[5]||(a[5]=[n("⚠️ Obligaciones Críticas",-1)])]),_:1})]),_:1}),e(t(c),{class:"pt-4"},{default:s(()=>[o("div",tt,[(d(!0),v($,null,k(l.obligacionesCriticas,i=>{var m;return d(),v("div",{key:i.id,class:"flex justify-between items-center p-2 bg-red-50 rounded"},[o("div",null,[e(t(x),{href:l.route("miembro.mis-obligaciones.show",i.id),class:"font-medium hover:underline"},{default:s(()=>[n(r(i.titulo),1)]),_:2},1032,["href"]),o("p",st,r((m=i.contrato)==null?void 0:m.nombre),1)]),e(t(V),{variant:"destructive"},{default:s(()=>[n(r(i.dias_restantes!==null&&i.dias_restantes>=0?`${i.dias_restantes} días`:"Vencida"),1)]),_:2},1024)])}),128))])]),_:1})]),_:1})):g("",!0),e(t(u),null,{default:s(()=>[e(t(h),null,{default:s(()=>[o("div",et,[e(t(j),null,{default:s(()=>[...a[6]||(a[6]=[n("Mis Obligaciones",-1)])]),_:1}),e(t(x),{href:l.route("miembro.mis-obligaciones.calendario")},{default:s(()=>[e(t(y),{variant:"outline",size:"sm"},{default:s(()=>[e(t(W),{class:"h-4 w-4 mr-1"}),a[7]||(a[7]=n(" Vista Calendario ",-1))]),_:1})]),_:1},8,["href"])])]),_:1}),e(t(c),null,{default:s(()=>[e(t(D),null,{default:s(()=>[e(t(F),null,{default:s(()=>[e(t(O),null,{default:s(()=>[e(t(p),null,{default:s(()=>[...a[8]||(a[8]=[n("Obligación",-1)])]),_:1}),e(t(p),null,{default:s(()=>[...a[9]||(a[9]=[n("Contrato/Proyecto",-1)])]),_:1}),e(t(p),null,{default:s(()=>[...a[10]||(a[10]=[n("Estado",-1)])]),_:1}),e(t(p),null,{default:s(()=>[...a[11]||(a[11]=[n("Vencimiento",-1)])]),_:1}),e(t(p),null,{default:s(()=>[...a[12]||(a[12]=[n("Progreso",-1)])]),_:1}),e(t(p),null,{default:s(()=>[...a[13]||(a[13]=[n("Acciones",-1)])]),_:1})]),_:1})]),_:1}),e(t(T),null,{default:s(()=>[(d(!0),v($,null,k(l.obligaciones.data,i=>(d(),_(t(O),{key:i.id},{default:s(()=>[e(t(f),null,{default:s(()=>[e(t(x),{href:l.route("miembro.mis-obligaciones.show",i.id),class:"font-medium hover:underline"},{default:s(()=>[n(r(i.titulo),1)]),_:2},1032,["href"])]),_:2},1024),e(t(f),null,{default:s(()=>{var m,b,C;return[o("div",at,[o("p",null,r((m=i.contrato)==null?void 0:m.nombre),1),o("p",lt,r((C=(b=i.contrato)==null?void 0:b.proyecto)==null?void 0:C.nombre),1)])]}),_:2},1024),e(t(f),null,{default:s(()=>[e(t(V),{variant:z(i.estado)},{default:s(()=>[n(r(i.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),null,{default:s(()=>[o("span",{class:N({"text-red-600":i.esta_vencida})},r(S(i.fecha_vencimiento)),3)]),_:2},1024),e(t(f),null,{default:s(()=>[o("div",it,[e(t(A),{value:i.porcentaje_cumplimiento,class:"w-16"},null,8,["value"]),o("span",ot,r(i.porcentaje_cumplimiento)+"%",1)])]),_:2},1024),e(t(f),null,{default:s(()=>[o("div",rt,[i.estado!=="cumplida"&&l.canComplete?(d(),_(t(y),{key:0,size:"sm",variant:"ghost",onClick:m=>M(i)},{default:s(()=>[e(t(q),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):g("",!0),i.estado!=="cumplida"&&l.canComplete?(d(),_(t(y),{key:1,size:"sm",variant:"ghost",onClick:m=>B(i)},{default:s(()=>[e(t(L),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):g("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1}))}});export{Kt as default};
