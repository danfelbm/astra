import{d as F,C as L,k as M,a as u,o as a,b as s,u as e,m as T,e as t,f as d,P as S,g as l,h as I,i as _,n as g,t as m,F as x,r as D,j as N}from"./app-C6dFmb6Y.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-BhD_DfTO.js";import{_ as b}from"./createLucideIcon-BC_5gguO.js";import{_ as y,a as V,b as w,c as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-DHl4MrSq.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bppg-Y45.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-CQ5Z9ZVT.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-CZN-JwC7.js";import{_ as j,a as B,b as A,c as E,d as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-DW8n8Llx.js";import{_ as q}from"./Switch.vue_vue_type_script_setup_true_lang-C7-XPFkX.js";import{_ as H}from"./GeographicSelector.vue_vue_type_script_setup_true_lang-CDKZ0n1J.js";import{A as K}from"./arrow-left-BZgb5z0-.js";import{S as O}from"./save-DGXkronF.js";import"./index-DR2L5NUQ.js";import"./check-DUjLMv1M.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Dm8q9HNQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BNPDwlne.js";import"./VisuallyHidden-DPRAAmXh.js";import"./index-CHVIMObx.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B5vP6ukB.js";import"./users-CZmocKxL.js";import"./index-AYmZnATJ.js";import"./briefcase-BgleaTrU.js";import"./calendar-Co_fIHE6.js";import"./index-BUYdAh09.js";import"./circle-alert-CpwvER2_.js";import"./map-pin-raP53Onp.js";import"./VisuallyHiddenInput-BegMdICL.js";const Q={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},W={class:"flex items-center justify-between"},X={class:"grid gap-4 md:grid-cols-2"},Y={key:0,class:"text-sm text-red-600 mt-1"},Z={key:0,class:"text-sm text-red-600 mt-1"},h={key:0,class:"text-sm text-red-600 mt-1"},ee={key:0,class:"text-sm text-red-600 mt-1"},oe={key:0,class:"text-sm text-red-600 mt-1"},re={class:"grid gap-4 md:grid-cols-2"},se={key:0,class:"text-sm text-red-600 mt-1"},te={key:0,class:"text-sm text-red-600 mt-1"},de={class:"grid gap-4 md:grid-cols-2"},ie={key:0},le={class:"flex flex-col"},ae={key:0,class:"text-xs text-muted-foreground"},ne={key:1,class:"text-xs text-blue-600"},ue={key:0,class:"text-sm text-red-600 mt-1"},me={key:1},pe={class:"p-3 bg-muted rounded-md"},fe={class:"text-sm font-medium"},_e={key:0,class:"text-sm text-red-600 mt-1"},ce={class:"flex items-center space-x-2"},ge={key:0,class:"text-sm text-red-600 mt-2"},ve={class:"flex items-center justify-end space-x-2"},Ke=F({__name:"Edit",props:{user:{},cargos:{},roles:{},canAssignRoles:{type:Boolean}},setup(R){const n=R,G=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"},{title:"Editar Usuario",href:"#"}],r=L({name:n.user.name,email:n.user.email,password:"",password_confirmation:"",role_id:n.user.role_id||null,cargo_id:n.user.cargo_id?n.user.cargo_id.toString():"none",documento_identidad:n.user.documento_identidad||"",telefono:n.user.telefono||"",direccion:n.user.direccion||"",territorio_id:n.user.territorio_id||null,departamento_id:n.user.departamento_id||null,municipio_id:n.user.municipio_id||null,localidad_id:n.user.localidad_id||null,activo:n.user.activo}),C=M({territorio_id:n.user.territorio_id||void 0,departamento_id:n.user.departamento_id||void 0,municipio_id:n.user.municipio_id||void 0,localidad_id:n.user.localidad_id||void 0}),P=p=>{C.value=p,r.territorio_id=p.territorio_id||null,r.departamento_id=p.departamento_id||null,r.municipio_id=p.municipio_id||null,r.localidad_id=p.localidad_id||null},z=()=>{r.put(route("admin.usuarios.update",n.user.id))};return(p,o)=>(a(),u(x,null,[s(e(T),{title:"Editar Usuario"}),s(J,{breadcrumbs:G},{default:t(()=>[d("div",Q,[d("div",W,[o[11]||(o[11]=d("div",null,[d("h1",{class:"text-3xl font-bold tracking-tight"},"Editar Usuario"),d("p",{class:"text-muted-foreground"}," Modifica la información del usuario ")],-1)),s(e(S),{href:p.route("admin.usuarios.index")},{default:t(()=>[s(e(b),{variant:"outline"},{default:t(()=>[s(e(K),{class:"mr-2 h-4 w-4"}),o[10]||(o[10]=l(" Volver "))]),_:1})]),_:1},8,["href"])]),d("form",{onSubmit:I(z,["prevent"]),class:"space-y-6"},[s(e(y),null,{default:t(()=>[s(e(V),null,{default:t(()=>[s(e(w),null,{default:t(()=>o[12]||(o[12]=[l("Información Básica")])),_:1}),s(e(U),null,{default:t(()=>o[13]||(o[13]=[l(" Datos principales del usuario ")])),_:1})]),_:1}),s(e(k),{class:"space-y-4"},{default:t(()=>[d("div",X,[d("div",null,[s(e(c),{for:"name"},{default:t(()=>o[14]||(o[14]=[l("Nombre completo *")])),_:1}),s(e(v),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":o[0]||(o[0]=f=>e(r).name=f),type:"text",placeholder:"Juan Pérez",class:g({"border-red-500":e(r).errors.name})},null,8,["modelValue","class"]),e(r).errors.name?(a(),u("p",Y,m(e(r).errors.name),1)):_("",!0)]),d("div",null,[s(e(c),{for:"email"},{default:t(()=>o[15]||(o[15]=[l("Correo electrónico *")])),_:1}),s(e(v),{id:"email",modelValue:e(r).email,"onUpdate:modelValue":o[1]||(o[1]=f=>e(r).email=f),type:"email",placeholder:"juan@ejemplo.com",class:g({"border-red-500":e(r).errors.email})},null,8,["modelValue","class"]),e(r).errors.email?(a(),u("p",Z,m(e(r).errors.email),1)):_("",!0)]),d("div",null,[s(e(c),{for:"documento_identidad"},{default:t(()=>o[16]||(o[16]=[l("Documento de identidad")])),_:1}),s(e(v),{id:"documento_identidad",modelValue:e(r).documento_identidad,"onUpdate:modelValue":o[2]||(o[2]=f=>e(r).documento_identidad=f),type:"text",placeholder:"12345678",class:g({"border-red-500":e(r).errors.documento_identidad})},null,8,["modelValue","class"]),e(r).errors.documento_identidad?(a(),u("p",h,m(e(r).errors.documento_identidad),1)):_("",!0)]),d("div",null,[s(e(c),{for:"telefono"},{default:t(()=>o[17]||(o[17]=[l("Teléfono")])),_:1}),s(e(v),{id:"telefono",modelValue:e(r).telefono,"onUpdate:modelValue":o[3]||(o[3]=f=>e(r).telefono=f),type:"tel",placeholder:"3001234567",class:g({"border-red-500":e(r).errors.telefono})},null,8,["modelValue","class"]),e(r).errors.telefono?(a(),u("p",ee,m(e(r).errors.telefono),1)):_("",!0)])]),d("div",null,[s(e(c),{for:"direccion"},{default:t(()=>o[18]||(o[18]=[l("Dirección")])),_:1}),s(e(v),{id:"direccion",modelValue:e(r).direccion,"onUpdate:modelValue":o[4]||(o[4]=f=>e(r).direccion=f),type:"text",placeholder:"Calle 123 #45-67",class:g({"border-red-500":e(r).errors.direccion})},null,8,["modelValue","class"]),e(r).errors.direccion?(a(),u("p",oe,m(e(r).errors.direccion),1)):_("",!0)])]),_:1})]),_:1}),s(e(y),null,{default:t(()=>[s(e(V),null,{default:t(()=>[s(e(w),null,{default:t(()=>o[19]||(o[19]=[l("Seguridad")])),_:1}),s(e(U),null,{default:t(()=>o[20]||(o[20]=[l(" Configuración de acceso y contraseña ")])),_:1})]),_:1}),s(e(k),{class:"space-y-4"},{default:t(()=>{var f;return[o[29]||(o[29]=d("div",{class:"p-4 bg-muted rounded-lg mb-4"},[d("p",{class:"text-sm text-muted-foreground"}," Deja los campos de contraseña vacíos si no deseas cambiarla. ")],-1)),d("div",re,[d("div",null,[s(e(c),{for:"password"},{default:t(()=>o[21]||(o[21]=[l("Nueva contraseña")])),_:1}),s(e(v),{id:"password",modelValue:e(r).password,"onUpdate:modelValue":o[5]||(o[5]=i=>e(r).password=i),type:"password",placeholder:"••••••••",class:g({"border-red-500":e(r).errors.password})},null,8,["modelValue","class"]),e(r).errors.password?(a(),u("p",se,m(e(r).errors.password),1)):_("",!0)]),d("div",null,[s(e(c),{for:"password_confirmation"},{default:t(()=>o[22]||(o[22]=[l("Confirmar nueva contraseña")])),_:1}),s(e(v),{id:"password_confirmation",modelValue:e(r).password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=i=>e(r).password_confirmation=i),type:"password",placeholder:"••••••••",class:g({"border-red-500":e(r).errors.password_confirmation})},null,8,["modelValue","class"]),e(r).errors.password_confirmation?(a(),u("p",te,m(e(r).errors.password_confirmation),1)):_("",!0)])]),d("div",de,[p.canAssignRoles?(a(),u("div",ie,[s(e(c),{for:"role_id"},{default:t(()=>o[23]||(o[23]=[l("Rol *")])),_:1}),s(e(j),{modelValue:e(r).role_id,"onUpdate:modelValue":o[7]||(o[7]=i=>e(r).role_id=i)},{default:t(()=>[s(e(B),{class:g({"border-red-500":e(r).errors.role_id})},{default:t(()=>[s(e(A),{placeholder:"Selecciona un rol"})]),_:1},8,["class"]),s(e(E),null,{default:t(()=>[(a(!0),u(x,null,D(p.roles,i=>(a(),N(e($),{key:i.value,value:i.value},{default:t(()=>[d("div",le,[d("span",null,m(i.label),1),i.description?(a(),u("span",ae,m(i.description),1)):_("",!0),i.is_system?(a(),u("span",ne,"(Rol del Sistema)")):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.role_id?(a(),u("p",ue,m(e(r).errors.role_id),1)):_("",!0)])):(a(),u("div",me,[s(e(c),null,{default:t(()=>o[24]||(o[24]=[l("Rol actual")])),_:1}),d("div",pe,[d("p",fe,m(((f=p.roles.find(i=>i.value===e(r).role_id))==null?void 0:f.label)||"Sin rol asignado"),1),o[25]||(o[25]=d("p",{class:"text-xs text-muted-foreground mt-1"}," No tienes permisos para cambiar el rol de este usuario ",-1))])])),d("div",null,[s(e(c),{for:"cargo_id"},{default:t(()=>o[26]||(o[26]=[l("Cargo")])),_:1}),s(e(j),{modelValue:e(r).cargo_id,"onUpdate:modelValue":o[8]||(o[8]=i=>e(r).cargo_id=i)},{default:t(()=>[s(e(B),{class:g({"border-red-500":e(r).errors.cargo_id})},{default:t(()=>[s(e(A),{placeholder:"Selecciona un cargo"})]),_:1},8,["class"]),s(e(E),null,{default:t(()=>[s(e($),{value:"none"},{default:t(()=>o[27]||(o[27]=[l("Sin cargo")])),_:1}),(a(!0),u(x,null,D(p.cargos,i=>(a(),N(e($),{key:i.id,value:i.id.toString()},{default:t(()=>[l(m(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.cargo_id?(a(),u("p",_e,m(e(r).errors.cargo_id),1)):_("",!0)])]),d("div",ce,[s(e(q),{id:"activo",checked:e(r).activo,"onUpdate:checked":o[9]||(o[9]=i=>e(r).activo=i)},null,8,["checked"]),s(e(c),{for:"activo"},{default:t(()=>o[28]||(o[28]=[l("Usuario activo")])),_:1})])]}),_:1})]),_:1}),s(e(y),null,{default:t(()=>[s(e(V),null,{default:t(()=>[s(e(w),null,{default:t(()=>o[30]||(o[30]=[l("Ubicación Geográfica")])),_:1}),s(e(U),null,{default:t(()=>o[31]||(o[31]=[l(" Define la ubicación del usuario (opcional) ")])),_:1})]),_:1}),s(e(k),null,{default:t(()=>[s(H,{"model-value":C.value,"onUpdate:modelValue":P,mode:"single","show-card":!1,title:"",description:""},null,8,["model-value"]),e(r).errors.territorio_id||e(r).errors.departamento_id||e(r).errors.municipio_id||e(r).errors.localidad_id?(a(),u("div",ge,m(e(r).errors.territorio_id||e(r).errors.departamento_id||e(r).errors.municipio_id||e(r).errors.localidad_id),1)):_("",!0)]),_:1})]),_:1}),d("div",ve,[s(e(S),{href:p.route("admin.usuarios.index")},{default:t(()=>[s(e(b),{variant:"outline",type:"button"},{default:t(()=>o[32]||(o[32]=[l(" Cancelar ")])),_:1})]),_:1},8,["href"]),s(e(b),{type:"submit",disabled:e(r).processing},{default:t(()=>[s(e(O),{class:"mr-2 h-4 w-4"}),o[33]||(o[33]=l(" Guardar Cambios "))]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ke as default};
