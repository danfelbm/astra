import{d as W,r as I,c as F,b as p,f as e,w as s,e as t,j as f,g as l,n as k,h as m,t as u,i as g,F as P,k as D,x as oe,m as n,y as ce,M as ue,p as me,q as fe,s as q}from"./app-DOAvpdpy.js";import{_ as ge}from"./UserLayout.vue_vue_type_script_setup_true_lang--ANbz7uA.js";import{_ as w,b as $,a as C,c as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-CHzHcBJD.js";import{c as pe,_ as V}from"./createLucideIcon-B8d5bW74.js";import{_ as be,a as xe,b as O,c as R}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-C-wmbar_.js";import{_ as ve}from"./Input.vue_vue_type_script_setup_true_lang-DpiZrk6F.js";import{e as he,C as ye,_ as Z,a as ee,b as te,c as se,d as S}from"./SelectValue.vue_vue_type_script_setup_true_lang-BXZrnX9E.js";import{_ as we}from"./CardFooter.vue_vue_type_script_setup_true_lang-DLMVhKd1.js";import{_ as H}from"./index-BEwAULqp.js";import{_ as ne}from"./Progress.vue_vue_type_script_setup_true_lang-DUc7kvfq.js";import{_ as _e,b as ke}from"./index-ByelLgwr.js";import{_ as $e,a as Ce}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CVJnMnVh.js";import{L as ae,_ as Ee}from"./EntregablesList.vue_vue_type_script_setup_true_lang-CeCdGuPX.js";import{C as je}from"./calendar-days-BYMTZUD2.js";import{C as L}from"./clock-_CclVdPa.js";import{E as Ve}from"./eye-DPdWlF5i.js";import{P as Me}from"./pen-HbVIwqPe.js";import{P as X}from"./plus-CaIcTwOd.js";import{C as Pe}from"./copy-B-KgybaZ.js";import{T as De}from"./trash-2-U0flC5IV.js";import{f as ie,e as re}from"./es-BDPlFIsO.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as J}from"./CardDescription.vue_vue_type_script_setup_true_lang-DawgNgFL.js";import{C as A}from"./circle-alert-C9j6pIWM.js";import{C as z}from"./circle-check-big-Bp-GPbzd.js";import{T as N}from"./target-6lEdwcHB.js";import{C as K}from"./calendar-CD2D2UbU.js";import{U as Q}from"./user-BCblXEQx.js";import{F as Be}from"./flag-DeUPG4ge.js";import{C as de}from"./circle-x-BwZ4OB4t.js";import{t as G}from"./index-D4UxCdcO.js";import"./useFlashMessages-DpAT9twl.js";import"./index-CmGaHOMg.js";import"./floating-ui.vue-DHJPTVzt.js";import"./x-BDylcitt.js";import"./shield-CPsGM_xd.js";import"./chevron-right-CCRsFGH5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Cep9uJW9.js";import"./VisuallyHidden-BSG4PTdC.js";import"./index-ceuENFtx.js";import"./Label.vue_vue_type_script_setup_true_lang-D3G2L01q.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cxybq1SB.js";import"./map-pin-Bo0BxocW.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-vM-5-Mr4.js";import"./ellipsis-B0rqSLX1.js";import"./usePermissions-Yr1_wdfG.js";import"./square-check-big-DUUgFhS2.js";import"./file-text-D373kHVE.js";import"./users-lrz85sQ8.js";import"./folder-open-1fOQ0rtw.js";import"./milestone-CSq6NUof.js";import"./index-B0zyg-lg.js";import"./RovingFocusItem-ByOgZ4yC.js";import"./utils-B8lOMbxq.js";import"./check-qkM_pq-n.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CZdoME-F.js";import"./StatusChangeModal.vue_vue_type_script_setup_true_lang-CZ2X4Z-Q.js";import"./Switch.vue_vue_type_script_setup_true_lang-71QEUPTl.js";import"./VisuallyHiddenInput-ZIuX-4z0.js";import"./ComentarioContextoInput.vue_vue_type_script_setup_true_lang-BsFE5JFL.js";import"./RichTextEditor-BS_71c2M.js";import"./italic-CCAMh8fV.js";import"./list-3sKdXja_.js";import"./FileUploadField.vue_vue_type_script_setup_true_lang-DUYEWGxD.js";import"./useFileUpload-Dhflcu_G.js";import"./upload-KZqVpSl6.js";import"./file-D4t4Yig_.js";import"./download-SKf2EK9a.js";import"./paperclip-Dxvb9AKd.js";import"./loader-circle-CaHzj4tA.js";import"./square-pen-BlJ2VD3E.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=pe("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),Ue={class:"flex items-center justify-between gap-2"},ze={class:"flex items-center gap-2 min-w-0 flex-1"},He={key:0,class:"text-sm text-muted-foreground line-clamp-2"},Ie={class:"flex items-center justify-between gap-4 text-xs text-muted-foreground"},Fe={class:"flex items-center gap-3"},Le={key:0,class:"flex items-center gap-1"},Ae={key:1,class:"text-gray-300"},Ne={key:2,class:"flex items-center gap-1"},qe={key:0,class:"flex items-center gap-1.5"},Ge={class:"truncate max-w-[100px]"},Oe={class:"flex justify-between items-center text-xs"},Re={class:"font-medium"},Xe={class:"flex items-center justify-between text-xs text-muted-foreground"},Je={key:0,class:"flex items-center gap-1"},Ke={key:1,class:"flex flex-wrap gap-1"},Qe={class:"w-full flex items-center justify-between gap-2"},We={class:"flex items-center gap-1"},Ye={class:"flex items-center gap-1"},Ze={class:"border-t px-4 py-4 bg-muted/30"},et={key:0,class:"mb-4 flex justify-end"},tt={key:2,class:"text-center py-4 text-muted-foreground text-sm"},st=W({__name:"HitoCard",props:{hito:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},expandEntregablesInline:{type:Boolean,default:!1},canCompleteEntregables:{type:Boolean,default:!1},canEditEntregables:{type:Boolean,default:!1}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables","complete-entregable","update-entregable-status","edit-entregable"],setup(a,{emit:E}){const v=a,y=I(!1),b=E,T=()=>{v.expandEntregablesInline?y.value=!y.value:b("view-entregables",v.hito)},U=(o,d)=>{b("complete-entregable",o,d)},j=(o,d,h)=>{b("update-entregable-status",o,d,h)},M=o=>{b("edit-entregable",o,v.hito)},x=F(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[v.hito.estado]||v.hito.estado),i=F(()=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[v.hito.estado]||"bg-gray-400"),r=F(()=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[v.hito.estado]||"secondary"),c=o=>{if(!o)return"";try{const d=typeof o=="string"?new Date(o):o;return ie(d,"dd MMM yyyy",{locale:re})}catch{return""}};return(o,d)=>(n(),p(e(w),{class:"hover:shadow-md transition-shadow duration-200"},{default:s(()=>[t(e(C),{class:k(a.compact?"pb-2 pt-3 px-4":"pb-3")},{default:s(()=>[l("div",Ue,[l("div",ze,[l("div",{class:k([i.value,"w-2 h-2 rounded-full flex-shrink-0"])},null,2),t(e($),{class:k([a.compact?"text-base":"text-lg","font-medium truncate"])},{default:s(()=>[m(u(a.hito.nombre),1)]),_:1},8,["class"])]),t(e(H),{variant:r.value,class:k(a.compact?"text-xs px-2 py-0.5":"text-xs")},{default:s(()=>[m(u(a.hito.estado_label||x.value),1)]),_:1},8,["variant","class"])])]),_:1},8,["class"]),t(e(_),{class:k(a.compact?"pb-2 px-4 space-y-2":"pb-3 space-y-3")},{default:s(()=>{var h;return[a.hito.descripcion&&!a.compact?(n(),g("p",He,u(a.hito.descripcion),1)):f("",!0),l("div",Ie,[l("div",Fe,[a.hito.fecha_inicio?(n(),g("div",Le,[t(e(je),{class:"h-3 w-3"}),l("span",null,u(c(a.hito.fecha_inicio)),1)])):f("",!0),a.hito.fecha_inicio&&a.hito.fecha_fin?(n(),g("span",Ae,"→")):f("",!0),a.hito.fecha_fin?(n(),g("div",Ne,[t(e(Se),{class:"h-3 w-3"}),l("span",null,u(c(a.hito.fecha_fin)),1)])):f("",!0)]),a.hito.responsable?(n(),g("div",qe,[t(e(_e),{class:"h-5 w-5"},{default:s(()=>[t(e(ke),{class:"text-[10px]"},{default:s(()=>{var B,Y;return[m(u((Y=(B=a.hito.responsable.name)==null?void 0:B.charAt(0))==null?void 0:Y.toUpperCase()),1)]}),_:1})]),_:1}),l("span",Ge,u(a.hito.responsable.name),1)])):f("",!0)]),l("div",{class:k(a.compact?"space-y-1":"space-y-2")},[l("div",Oe,[d[8]||(d[8]=l("span",{class:"text-muted-foreground"},"Progreso",-1)),l("span",Re,u(a.hito.porcentaje_completado)+"%",1)]),t(e(ne),{"model-value":a.hito.porcentaje_completado,class:k(a.compact?"h-1.5":"h-2")},null,8,["model-value","class"])],2),l("div",Xe,[l("span",null,u(a.hito.entregables_completados||0)+"/"+u(a.hito.total_entregables||((h=a.hito.entregables)==null?void 0:h.length)||0)+" entregables",1),a.hito.dias_restantes!==null&&a.hito.dias_restantes!==void 0?(n(),g("div",Je,[t(e(L),{class:"h-3 w-3"}),l("span",{class:k({"text-red-500 font-medium":a.hito.dias_restantes<0,"text-orange-500":a.hito.dias_restantes>=0&&a.hito.dias_restantes<=7})},u(a.hito.dias_restantes<0?`Vencido hace ${Math.abs(a.hito.dias_restantes)} días`:`${a.hito.dias_restantes} días`),3)])):f("",!0)]),!a.compact&&a.hito.etiquetas&&a.hito.etiquetas.length>0?(n(),g("div",Ke,[(n(!0),g(P,null,D(a.hito.etiquetas.slice(0,3),B=>(n(),p(e(H),{key:B.id,variant:"outline",class:"text-xs",style:ce({borderColor:B.color||"#94a3b8",color:B.color||"#64748b"})},{default:s(()=>[m(u(B.nombre),1)]),_:2},1032,["style"]))),128)),a.hito.etiquetas.length>3?(n(),p(e(H),{key:0,variant:"outline",class:"text-xs"},{default:s(()=>[m(" +"+u(a.hito.etiquetas.length-3),1)]),_:1})):f("",!0)])):f("",!0)]}),_:1},8,["class"]),a.showActions?(n(),p(e(we),{key:0,class:k(a.compact?"pt-2 pb-3 px-4 border-t":"pt-3 border-t")},{default:s(()=>[l("div",Qe,[l("div",We,[a.expandEntregablesInline?f("",!0):(n(),p(e(V),{key:0,variant:"ghost",size:"sm",onClick:d[0]||(d[0]=h=>o.$emit("view",a.hito)),class:"h-8 px-2"},{default:s(()=>[t(e(Ve),{class:"h-4 w-4"}),d[9]||(d[9]=l("span",{class:"ml-1.5"},"Ver detalles",-1))]),_:1})),t(e(V),{variant:"ghost",size:"sm",onClick:T,class:"h-8 px-2"},{default:s(()=>[t(e(ae),{class:"h-4 w-4"}),d[10]||(d[10]=l("span",{class:"ml-1.5"},"Entregables",-1)),a.expandEntregablesInline?(n(),p(oe(y.value?e(he):e(ye)),{key:0,class:"h-3 w-3 ml-1"})):f("",!0)]),_:1})]),l("div",Ye,[a.canEdit?(n(),p(e(V),{key:0,variant:"ghost",size:"sm",onClick:d[1]||(d[1]=h=>o.$emit("edit",a.hito)),class:"h-8 px-2"},{default:s(()=>[t(e(Me),{class:"h-4 w-4"}),d[11]||(d[11]=l("span",{class:"ml-1.5"},"Editar",-1))]),_:1})):f("",!0),a.canManageDeliverables?(n(),p(e(V),{key:1,variant:"ghost",size:"sm",onClick:d[2]||(d[2]=h=>o.$emit("add-entregable",a.hito)),class:"h-8 px-2"},{default:s(()=>[t(e(X),{class:"h-4 w-4"}),d[12]||(d[12]=l("span",{class:"ml-1.5"},"Añadir",-1))]),_:1})):f("",!0),t(e(V),{variant:"ghost",size:"sm",onClick:d[3]||(d[3]=h=>o.$emit("duplicate",a.hito)),class:"h-8 px-2"},{default:s(()=>[t(e(Pe),{class:"h-4 w-4"}),d[13]||(d[13]=l("span",{class:"ml-1.5"},"Duplicar",-1))]),_:1}),a.canDelete?(n(),p(e(V),{key:2,variant:"ghost",size:"sm",onClick:d[4]||(d[4]=h=>o.$emit("delete",a.hito)),class:"h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50"},{default:s(()=>[t(e(De),{class:"h-4 w-4"}),d[14]||(d[14]=l("span",{class:"ml-1.5"},"Eliminar",-1))]),_:1})):f("",!0)])])]),_:1},8,["class"])):f("",!0),a.expandEntregablesInline?(n(),p(e($e),{key:1,open:y.value,"onUpdate:open":d[7]||(d[7]=h=>y.value=h)},{default:s(()=>[t(e(Ce),null,{default:s(()=>[l("div",Ze,[a.canManageDeliverables?(n(),g("div",et,[t(e(V),{variant:"outline",size:"sm",onClick:d[5]||(d[5]=h=>b("add-entregable",a.hito))},{default:s(()=>[t(e(X),{class:"h-4 w-4 mr-1"}),d[15]||(d[15]=m(" Añadir Entregable ",-1))]),_:1})])):f("",!0),a.hito.entregables&&a.hito.entregables.length>0?(n(),p(Ee,{key:1,entregables:a.hito.entregables,"can-edit":a.canEditEntregables,"can-delete":!1,"can-complete":a.canCompleteEntregables,"view-mode":"list",onComplete:U,onUpdateStatus:j,onEdit:M},null,8,["entregables","can-edit","can-complete"])):(n(),g("div",tt,[t(e(ae),{class:"h-8 w-8 mx-auto mb-2 opacity-50"}),d[17]||(d[17]=l("p",null,"No hay entregables asignados a este hito",-1)),a.canManageDeliverables?(n(),p(e(V),{key:0,variant:"outline",size:"sm",class:"mt-3",onClick:d[6]||(d[6]=h=>b("add-entregable",a.hito))},{default:s(()=>[t(e(X),{class:"h-4 w-4 mr-1"}),d[16]||(d[16]=m(" Crear primer entregable ",-1))]),_:1})):f("",!0)]))])]),_:1})]),_:1},8,["open"])):f("",!0)]),_:1}))}}),le=Te(st,[["__scopeId","data-v-f0d9cf19"]]),at={class:"space-y-8"},lt={class:"relative"},ot={key:0,class:"mb-8"},nt={class:"text-lg font-semibold mb-4 flex items-center gap-2"},it={class:"space-y-4"},rt={class:"flex items-start justify-between"},dt={class:"space-y-1"},ct={key:0,class:"text-sm text-muted-foreground"},ut={key:1},mt={class:"flex items-center justify-between mb-2"},ft={class:"text-sm text-muted-foreground"},gt={class:"flex flex-wrap gap-4 text-sm text-muted-foreground"},pt={class:"flex items-center gap-1"},bt={key:0,class:"flex items-center gap-1"},xt={key:1,class:"mb-8"},vt={class:"text-lg font-semibold mb-4 flex items-center gap-2"},ht={class:"space-y-4"},yt={class:"flex items-start justify-between"},wt={class:"space-y-1"},_t={key:0,class:"text-sm text-muted-foreground"},kt={class:"flex flex-wrap gap-4 text-sm text-muted-foreground"},$t={class:"flex items-center gap-1"},Ct={class:"flex items-center gap-1"},Et={key:0,class:"flex items-center gap-1"},jt={key:1,class:"text-sm text-muted-foreground"},Vt={key:2,class:"mb-8"},Mt={class:"text-lg font-semibold mb-4 flex items-center gap-2"},Pt={class:"space-y-4"},Dt={class:"absolute left-4 w-4 h-4 bg-green-500 rounded-full border-2 border-white shadow-sm"},Tt={class:"flex items-start justify-between"},Bt={class:"space-y-1"},St={class:"flex flex-wrap gap-4 text-sm text-muted-foreground"},Ut={class:"flex items-center gap-1"},zt={class:"flex items-center gap-1"},Ht={key:0,class:"flex items-center gap-1"},It={key:3,class:"text-center py-12"},Ft=W({__name:"HitoTimeline",props:{hitos:{},showProject:{type:Boolean,default:!1},onHitoClick:{}},emits:["hito-click"],setup(a,{emit:E}){const v=a,y=E,b=F(()=>{const r={completados:[],en_progreso:[],pendientes:[],cancelados:[]};return v.hitos.forEach(c=>{switch(c.estado){case"completado":r.completados.push(c);break;case"en_progreso":r.en_progreso.push(c);break;case"pendiente":r.pendientes.push(c);break;case"cancelado":r.cancelados.push(c);break}}),r}),T=r=>({pendiente:"bg-gray-100 text-gray-800 border-gray-300",en_progreso:"bg-blue-100 text-blue-800 border-blue-300",completado:"bg-green-100 text-green-800 border-green-300",cancelado:"bg-red-100 text-red-800 border-red-300"})[r]||"bg-gray-100 text-gray-800",U=r=>{switch(r){case"completado":return z;case"en_progreso":return L;case"pendiente":return A;case"cancelado":return de;default:return N}},j=r=>r?ie(new Date(r),"dd MMM yyyy",{locale:re}):"Sin fecha",M=r=>{if(!r)return null;const c=Math.ceil((new Date(r).getTime()-new Date().getTime())/(1e3*60*60*24));return c<0?`Vencido hace ${Math.abs(c)} días`:c===0?"Vence hoy":c===1?"Vence mañana":`${c} días restantes`},x=r=>{y("hito-click",r),v.onHitoClick&&v.onHitoClick(r)},i=r=>{if(!r.entregables||r.entregables.length===0)return{total:0,completados:0,porcentaje:0};const c=r.entregables.length,o=r.entregables.filter(h=>h.estado==="completado").length,d=Math.round(o/c*100);return{total:c,completados:o,porcentaje:d}};return(r,c)=>(n(),g("div",at,[l("div",lt,[c[11]||(c[11]=l("div",{class:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"},null,-1)),b.value.en_progreso.length>0?(n(),g("div",ot,[l("h3",nt,[t(e(L),{class:"h-5 w-5 text-blue-600"}),c[0]||(c[0]=m(" En Progreso ",-1))]),l("div",it,[(n(!0),g(P,null,D(b.value.en_progreso,o=>(n(),g("div",{key:o.id,class:"relative flex gap-4"},[c[2]||(c[2]=l("div",{class:"absolute left-4 w-4 h-4 bg-blue-500 rounded-full border-2 border-white shadow-sm"},null,-1)),t(e(w),{class:k(["ml-12 flex-1 hover:shadow-lg transition-all cursor-pointer border-l-4",T(o.estado)]),onClick:d=>x(o)},{default:s(()=>[t(e(C),null,{default:s(()=>[l("div",rt,[l("div",dt,[t(e($),{class:"flex items-center gap-2 text-lg"},{default:s(()=>[(n(),p(oe(U(o.estado)),{class:"h-5 w-5"})),m(" "+u(o.nombre),1)]),_:2},1024),a.showProject&&o.proyecto?(n(),p(e(J),{key:0},{default:s(()=>[m(u(o.proyecto.nombre),1)]),_:2},1024)):f("",!0)]),t(e(H),{class:k(T(o.estado)),variant:"outline"},{default:s(()=>[m(u(o.estado),1)]),_:2},1032,["class"])])]),_:2},1024),t(e(_),{class:"space-y-4"},{default:s(()=>{var d;return[o.descripcion?(n(),g("div",ct,u(o.descripcion),1)):f("",!0),o.entregables&&o.entregables.length>0?(n(),g("div",ut,[l("div",mt,[c[1]||(c[1]=l("span",{class:"text-sm font-medium"},"Progreso",-1)),l("span",ft,u(i(o).completados)+"/"+u(i(o).total)+" entregables ",1)]),t(e(ne),{value:i(o).porcentaje,class:"h-2"},null,8,["value"])])):f("",!0),l("div",gt,[l("div",pt,[t(e(K),{class:"h-4 w-4"}),l("span",null,u(j(o.fecha_inicio))+" - "+u(j(o.fecha_fin)),1)]),o.responsable?(n(),g("div",bt,[t(e(Q),{class:"h-4 w-4"}),l("span",null,u(o.responsable.name),1)])):f("",!0),M(o.fecha_fin)?(n(),g("div",{key:1,class:k(["flex items-center gap-1",{"text-red-600":(d=M(o.fecha_fin))==null?void 0:d.includes("Vencido")}])},[t(e(L),{class:"h-4 w-4"}),l("span",null,u(M(o.fecha_fin)),1)],2)):f("",!0)])]}),_:2},1024)]),_:2},1032,["class","onClick"])]))),128))])])):f("",!0),b.value.pendientes.length>0?(n(),g("div",xt,[l("h3",vt,[t(e(A),{class:"h-5 w-5 text-yellow-600"}),c[3]||(c[3]=m(" Pendientes ",-1))]),l("div",ht,[(n(!0),g(P,null,D(b.value.pendientes,o=>(n(),g("div",{key:o.id,class:"relative flex gap-4"},[c[5]||(c[5]=l("div",{class:"absolute left-4 w-4 h-4 bg-yellow-500 rounded-full border-2 border-white shadow-sm"},null,-1)),t(e(w),{class:"ml-12 flex-1 hover:shadow-lg transition-all cursor-pointer border-l-4 border-yellow-300",onClick:d=>x(o)},{default:s(()=>[t(e(C),null,{default:s(()=>[l("div",yt,[l("div",wt,[t(e($),{class:"flex items-center gap-2 text-lg"},{default:s(()=>[t(e(A),{class:"h-5 w-5 text-yellow-600"}),m(" "+u(o.nombre),1)]),_:2},1024),a.showProject&&o.proyecto?(n(),p(e(J),{key:0},{default:s(()=>[m(u(o.proyecto.nombre),1)]),_:2},1024)):f("",!0)]),t(e(H),{variant:"outline",class:"bg-yellow-50"},{default:s(()=>[...c[4]||(c[4]=[m(" Pendiente ",-1)])]),_:1})])]),_:2},1024),t(e(_),{class:"space-y-4"},{default:s(()=>[o.descripcion?(n(),g("div",_t,u(o.descripcion),1)):f("",!0),l("div",kt,[l("div",$t,[t(e(K),{class:"h-4 w-4"}),l("span",null,"Inicio: "+u(j(o.fecha_inicio)),1)]),l("div",Ct,[t(e(Be),{class:"h-4 w-4"}),l("span",null,"Fin: "+u(j(o.fecha_fin)),1)]),o.responsable?(n(),g("div",Et,[t(e(Q),{class:"h-4 w-4"}),l("span",null,u(o.responsable.name),1)])):f("",!0)]),o.entregables&&o.entregables.length>0?(n(),g("div",jt,u(o.entregables.length)+" entregables pendientes ",1)):f("",!0)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])])):f("",!0),b.value.completados.length>0?(n(),g("div",Vt,[l("h3",Mt,[t(e(z),{class:"h-5 w-5 text-green-600"}),c[6]||(c[6]=m(" Completados ",-1))]),l("div",Pt,[(n(!0),g(P,null,D(b.value.completados,o=>(n(),g("div",{key:o.id,class:"relative flex gap-4"},[l("div",Dt,[t(e(z),{class:"h-3 w-3 text-white absolute -top-0.5 -left-0.5"})]),t(e(w),{class:"ml-12 flex-1 hover:shadow-lg transition-all cursor-pointer border-l-4 border-green-300 opacity-75",onClick:d=>x(o)},{default:s(()=>[t(e(C),null,{default:s(()=>[l("div",Tt,[l("div",Bt,[t(e($),{class:"flex items-center gap-2 text-lg"},{default:s(()=>[t(e(z),{class:"h-5 w-5 text-green-600"}),m(" "+u(o.nombre),1)]),_:2},1024),a.showProject&&o.proyecto?(n(),p(e(J),{key:0},{default:s(()=>[m(u(o.proyecto.nombre),1)]),_:2},1024)):f("",!0)]),t(e(H),{variant:"outline",class:"bg-green-50"},{default:s(()=>[...c[7]||(c[7]=[m(" Completado ",-1)])]),_:1})])]),_:2},1024),t(e(_),null,{default:s(()=>[l("div",St,[l("div",Ut,[t(e(z),{class:"h-4 w-4 text-green-600"}),c[8]||(c[8]=l("span",null,"100% completado",-1))]),l("div",zt,[t(e(K),{class:"h-4 w-4"}),l("span",null,"Completado: "+u(j(o.fecha_fin)),1)]),o.responsable?(n(),g("div",Ht,[t(e(Q),{class:"h-4 w-4"}),l("span",null,u(o.responsable.name),1)])):f("",!0)])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])])):f("",!0),a.hitos.length===0?(n(),g("div",It,[t(e(N),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c[9]||(c[9]=l("p",{class:"text-lg font-medium text-muted-foreground"},"No hay hitos disponibles",-1)),c[10]||(c[10]=l("p",{class:"text-sm text-muted-foreground"},"Los hitos aparecerán aquí cuando se creen",-1))])):f("",!0)])]))}}),Lt={class:"space-y-6"},At={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-6"},Nt={class:"text-2xl font-bold"},qt={class:"text-2xl font-bold"},Gt={class:"text-2xl font-bold"},Ot={class:"text-2xl font-bold"},Rt={class:"text-2xl font-bold text-red-600"},Xt={class:"text-2xl font-bold text-orange-600"},Jt={class:"grid gap-4 md:grid-cols-4"},Kt={class:"space-y-4"},Qt={class:"grid gap-4 md:grid-cols-2"},Wt={key:0,class:"flex justify-center"},Yt={class:"flex items-center space-x-2"},ba=W({__name:"Index",props:{hitos:{},filters:{},proyectos:{},estadisticas:{}},setup(a){const E=a;ue();const v=I(E.filters.search||""),y=I(E.filters.estado||"todos"),b=I(E.filters.proyecto||""),T=I("lista"),U=()=>{q.get(route("user.mis-hitos.index"),{search:v.value,estado:y.value!=="todos"?y.value:void 0,proyecto:b.value||void 0},{preserveState:!0,preserveScroll:!0})};me([v,y,b],()=>{U()},{debounce:300});const j=x=>{q.post(`/miembro/mis-hitos/${x.hito_id}/entregables/${x.id}/completar`,{},{preserveScroll:!0,onSuccess:()=>{G.success("Entregable marcado como completado")},onError:()=>{G.error("Error al completar el entregable")}})},M=(x,i)=>{q.put(`/miembro/mis-hitos/${x.hito_id}/entregables/${x.id}/estado`,{estado:i},{preserveScroll:!0,onSuccess:()=>{G.success("Estado del entregable actualizado")},onError:()=>{G.error("Error al actualizar el estado")}})};return F(()=>({pendientes:E.hitos.data.filter(x=>x.estado==="pendiente"),en_progreso:E.hitos.data.filter(x=>x.estado==="en_progreso"),completados:E.hitos.data.filter(x=>x.estado==="completado")})),(x,i)=>(n(),p(ge,null,{default:s(()=>[t(e(fe),{title:"Mis Hitos"}),l("div",Lt,[i[23]||(i[23]=l("div",{class:"flex flex-col gap-4"},[l("h1",{class:"text-2xl font-bold tracking-tight"},"Mis Hitos"),l("p",{class:"text-muted-foreground"}," Gestiona y da seguimiento a los hitos y entregables asignados a ti ")],-1)),l("div",At,[t(e(w),null,{default:s(()=>[t(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e($),{class:"text-sm font-medium"},{default:s(()=>[...i[4]||(i[4]=[m("Total",-1)])]),_:1}),t(e(N),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(_),null,{default:s(()=>[l("div",Nt,u(a.estadisticas.total),1)]),_:1})]),_:1}),t(e(w),null,{default:s(()=>[t(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e($),{class:"text-sm font-medium"},{default:s(()=>[...i[5]||(i[5]=[m("Pendientes",-1)])]),_:1}),t(e(A),{class:"h-4 w-4 text-yellow-600"})]),_:1}),t(e(_),null,{default:s(()=>[l("div",qt,u(a.estadisticas.pendientes),1)]),_:1})]),_:1}),t(e(w),null,{default:s(()=>[t(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e($),{class:"text-sm font-medium"},{default:s(()=>[...i[6]||(i[6]=[m("En Progreso",-1)])]),_:1}),t(e(L),{class:"h-4 w-4 text-blue-600"})]),_:1}),t(e(_),null,{default:s(()=>[l("div",Gt,u(a.estadisticas.en_progreso),1)]),_:1})]),_:1}),t(e(w),null,{default:s(()=>[t(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e($),{class:"text-sm font-medium"},{default:s(()=>[...i[7]||(i[7]=[m("Completados",-1)])]),_:1}),t(e(z),{class:"h-4 w-4 text-green-600"})]),_:1}),t(e(_),null,{default:s(()=>[l("div",Ot,u(a.estadisticas.completados),1)]),_:1})]),_:1}),t(e(w),null,{default:s(()=>[t(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e($),{class:"text-sm font-medium"},{default:s(()=>[...i[8]||(i[8]=[m("Vencidos",-1)])]),_:1}),t(e(de),{class:"h-4 w-4 text-red-600"})]),_:1}),t(e(_),null,{default:s(()=>[l("div",Rt,u(a.estadisticas.vencidos),1)]),_:1})]),_:1}),t(e(w),null,{default:s(()=>[t(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e($),{class:"text-sm font-medium"},{default:s(()=>[...i[9]||(i[9]=[m("Por Vencer",-1)])]),_:1}),t(e(A),{class:"h-4 w-4 text-orange-600"})]),_:1}),t(e(_),null,{default:s(()=>[l("div",Xt,u(a.estadisticas.proximos_vencer),1)]),_:1})]),_:1})]),t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[t(e($),null,{default:s(()=>[...i[10]||(i[10]=[m("Filtros",-1)])]),_:1})]),_:1}),t(e(_),null,{default:s(()=>[l("div",Jt,[l("div",null,[t(e(ve),{modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=r=>v.value=r),placeholder:"Buscar hitos...",class:"w-full"},null,8,["modelValue"])]),t(e(Z),{modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=r=>y.value=r)},{default:s(()=>[t(e(ee),null,{default:s(()=>[t(e(te),{placeholder:"Estado"})]),_:1}),t(e(se),null,{default:s(()=>[t(e(S),{value:"todos"},{default:s(()=>[...i[11]||(i[11]=[m("Todos los estados",-1)])]),_:1}),t(e(S),{value:"pendiente"},{default:s(()=>[...i[12]||(i[12]=[m("Pendiente",-1)])]),_:1}),t(e(S),{value:"en_progreso"},{default:s(()=>[...i[13]||(i[13]=[m("En Progreso",-1)])]),_:1}),t(e(S),{value:"completado"},{default:s(()=>[...i[14]||(i[14]=[m("Completado",-1)])]),_:1}),t(e(S),{value:"cancelado"},{default:s(()=>[...i[15]||(i[15]=[m("Cancelado",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(Z),{modelValue:b.value,"onUpdate:modelValue":i[2]||(i[2]=r=>b.value=r)},{default:s(()=>[t(e(ee),null,{default:s(()=>[t(e(te),{placeholder:"Proyecto"})]),_:1}),t(e(se),null,{default:s(()=>[t(e(S),{value:""},{default:s(()=>[...i[16]||(i[16]=[m("Todos los proyectos",-1)])]),_:1}),(n(!0),g(P,null,D(a.proyectos,r=>(n(),p(e(S),{key:r.id,value:String(r.id)},{default:s(()=>[m(u(r.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(V),{onClick:U,class:"w-full md:w-auto"},{default:s(()=>[...i[17]||(i[17]=[m(" Aplicar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(be),{modelValue:T.value,"onUpdate:modelValue":i[3]||(i[3]=r=>T.value=r),class:"space-y-4"},{default:s(()=>[t(e(xe),null,{default:s(()=>[t(e(O),{value:"lista"},{default:s(()=>[...i[18]||(i[18]=[m("Vista de Lista",-1)])]),_:1}),t(e(O),{value:"tarjetas"},{default:s(()=>[...i[19]||(i[19]=[m("Vista de Tarjetas",-1)])]),_:1}),t(e(O),{value:"timeline"},{default:s(()=>[...i[20]||(i[20]=[m("Timeline",-1)])]),_:1})]),_:1}),t(e(R),{value:"lista",class:"space-y-4"},{default:s(()=>[l("div",Kt,[(n(!0),g(P,null,D(a.hitos.data,r=>(n(),p(le,{key:r.id,hito:r,"show-actions":!0,"expand-entregables-inline":!0,"can-complete-entregables":!0,"can-edit-entregables":!0,onCompleteEntregable:j,onUpdateEntregableStatus:M},null,8,["hito"]))),128))]),a.hitos.data.length===0?(n(),p(e(w),{key:0},{default:s(()=>[t(e(_),{class:"text-center py-8"},{default:s(()=>[t(e(N),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i[21]||(i[21]=l("p",{class:"text-muted-foreground"},"No tienes hitos asignados",-1))]),_:1})]),_:1})):f("",!0)]),_:1}),t(e(R),{value:"tarjetas",class:"space-y-4"},{default:s(()=>[l("div",Qt,[(n(!0),g(P,null,D(a.hitos.data,r=>(n(),p(le,{key:r.id,hito:r,"show-actions":!0,"expand-entregables-inline":!0,"can-complete-entregables":!0,"can-edit-entregables":!0,onCompleteEntregable:j,onUpdateEntregableStatus:M},null,8,["hito"]))),128))]),a.hitos.data.length===0?(n(),p(e(w),{key:0},{default:s(()=>[t(e(_),{class:"text-center py-8"},{default:s(()=>[t(e(N),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i[22]||(i[22]=l("p",{class:"text-muted-foreground"},"No tienes hitos asignados",-1))]),_:1})]),_:1})):f("",!0)]),_:1}),t(e(R),{value:"timeline",class:"space-y-4"},{default:s(()=>[t(Ft,{hitos:a.hitos.data},null,8,["hitos"])]),_:1})]),_:1},8,["modelValue"]),a.hitos.meta&&a.hitos.meta.last_page>1?(n(),g("div",Wt,[l("nav",Yt,[(n(!0),g(P,null,D(a.hitos.links,r=>(n(),p(e(V),{key:r.label,disabled:!r.url,onClick:c=>r.url&&e(q).visit(r.url),variant:r.active?"default":"outline",innerHTML:r.label},null,8,["disabled","onClick","variant","innerHTML"]))),128))])])):f("",!0)])]),_:1}))}});export{ba as default};
