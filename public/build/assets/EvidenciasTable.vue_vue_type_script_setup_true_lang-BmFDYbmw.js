import{d as j,c as I,i as _,b as p,j as $,e,f as t,w as a,F as y,k as v,h as l,t as o,g as f,m as r,v as w,l as E,n as C}from"./app-b8_bfoa9.js";import{_ as A,a as L,b as q,c as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-ChEDhgpu.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-DtsxPWIA.js";import{_ as g}from"./index-Cl6Mk0dD.js";import{_ as F,a as N,b as h,c as i,d as B,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-DcXGUKQu.js";import{a as U,b as M,c as O,d as S}from"./AccordionContent.vue_vue_type_script_setup_true_lang-p6CYN3XY.js";import{I as G}from"./image-CXSfaGjI.js";import{F as H}from"./file-text-DR9j7dm-.js";import{E as J}from"./external-link-6Q0TeQXG.js";import{D as V}from"./download-C4_wDjhP.js";const K={key:0},P={class:"flex items-center justify-between w-full pr-4"},Q={class:"flex items-center gap-3"},R={class:"text-left"},W={class:"font-semibold"},X={class:"text-sm text-gray-500"},Y={class:"flex items-center gap-3"},Z={class:"text-sm text-gray-600"},tt={class:"text-sm"},et=["href"],at={key:1},st={class:"text-sm text-gray-600"},lt={key:0,class:"flex flex-wrap gap-1"},nt={key:1,class:"text-sm text-gray-500"},ot={class:"text-sm"},rt=["href"],dt={class:"text-center"},it={class:"mt-2 text-sm text-gray-600"},ut={class:"text-xs text-gray-500 mt-1"},ht=j({__name:"EvidenciasTable",props:{mode:{},evidencias:{},evidenciasAgrupadas:{},contrato:{},formatDate:{},cardTitle:{default:"Evidencias Asociadas"},cardDescription:{default:"Evidencias cargadas para esta obligación"}},setup(c){const x=c,D=b=>({"bg-yellow-100 text-yellow-800":b==="pendiente","bg-green-100 text-green-800":b==="aprobada","bg-red-100 text-red-800":b==="rechazada"}),k=I(()=>x.mode==="grouped"?x.evidenciasAgrupadas&&x.evidenciasAgrupadas.length>0:x.evidencias&&x.evidencias.length>0);return(b,s)=>c.mode==="grouped"&&k.value?(r(),_("div",K,[e(t(U),{type:"multiple",class:"space-y-4",collapsible:""},{default:a(()=>[(r(!0),_(y,null,v(c.evidenciasAgrupadas,n=>(r(),p(t(M),{key:n.contrato.id,value:`contrato-${n.contrato.id}`,class:"border rounded-lg bg-card"},{default:a(()=>[e(t(O),{class:"px-4 py-3 hover:no-underline hover:bg-gray-50 dark:hover:bg-gray-800 rounded-t-lg"},{default:a(()=>[f("div",P,[f("div",Q,[e(t(H),{class:"h-5 w-5 text-gray-500"}),f("div",R,[f("div",W,o(n.contrato.nombre),1),f("div",X," Contrato #"+o(n.contrato.id),1)])]),f("div",Y,[e(t(g),{variant:"secondary"},{default:a(()=>[l(o(n.evidencias.length)+" evidencia(s) ",1)]),_:2},1024),e(t(w),{href:`/admin/contratos/${n.contrato.id}`,onClick:s[0]||(s[0]=E(()=>{},["stop"])),class:"text-blue-600 hover:text-blue-800 flex items-center gap-1"},{default:a(()=>[s[3]||(s[3]=l(" Ver contrato ",-1)),e(t(J),{class:"h-3 w-3"})]),_:1},8,["href"])])])]),_:2},1024),e(t(S),{class:"px-4 pb-4"},{default:a(()=>[e(t(F),null,{default:a(()=>[e(t(N),null,{default:a(()=>[e(t(h),null,{default:a(()=>[e(t(i),null,{default:a(()=>[...s[4]||(s[4]=[l("Tipo",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[5]||(s[5]=[l("Obligación",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[6]||(s[6]=[l("Descripción",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[7]||(s[7]=[l("Usuario",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[8]||(s[8]=[l("Estado",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[9]||(s[9]=[l("Fecha",-1)])]),_:1}),e(t(i),{class:"text-right"},{default:a(()=>[...s[10]||(s[10]=[l("Acciones",-1)])]),_:1})]),_:1})]),_:1}),e(t(B),null,{default:a(()=>[(r(!0),_(y,null,v(n.evidencias,d=>(r(),p(t(h),{key:d.id,class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[e(t(w),{href:`/admin/contratos/${n.contrato.id}/evidencias/${d.id}`,class:"contents"},{default:a(()=>[e(t(u),null,{default:a(()=>[e(t(g),{variant:"outline"},{default:a(()=>[l(o(d.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),e(t(u),null,{default:a(()=>[l(o(d.obligacion_titulo),1)]),_:2},1024),e(t(u),null,{default:a(()=>[f("span",Z,o(d.descripcion||"-"),1)]),_:2},1024),e(t(u),null,{default:a(()=>{var m;return[f("span",tt,o(((m=d.usuario)==null?void 0:m.name)||"-"),1)]}),_:2},1024),e(t(u),null,{default:a(()=>[e(t(g),{class:C(D(d.estado))},{default:a(()=>[l(o(d.estado),1)]),_:2},1032,["class"])]),_:2},1024),e(t(u),null,{default:a(()=>[l(o(c.formatDate(d.created_at)),1)]),_:2},1024),e(t(u),{class:"text-right"},{default:a(()=>[d.archivo_url?(r(),_("a",{key:0,href:d.archivo_url,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800",onClick:s[1]||(s[1]=E(()=>{},["stop"]))},[e(t(V),{class:"h-4 w-4"})],8,et)):$("",!0)]),_:2},1024)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])):c.mode==="simple"&&k.value?(r(),_("div",at,[e(t(A),null,{default:a(()=>[e(t(L),null,{default:a(()=>[e(t(q),null,{default:a(()=>[l(o(c.cardTitle),1)]),_:1}),e(t(z),null,{default:a(()=>[l(o(c.cardDescription),1)]),_:1})]),_:1}),e(t(T),null,{default:a(()=>[e(t(F),null,{default:a(()=>[e(t(N),null,{default:a(()=>[e(t(h),null,{default:a(()=>[e(t(i),null,{default:a(()=>[...s[11]||(s[11]=[l("Tipo",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[12]||(s[12]=[l("Descripción",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[13]||(s[13]=[l("Entregable",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[14]||(s[14]=[l("Usuario",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[15]||(s[15]=[l("Estado",-1)])]),_:1}),e(t(i),null,{default:a(()=>[...s[16]||(s[16]=[l("Fecha",-1)])]),_:1}),e(t(i),{class:"text-right"},{default:a(()=>[...s[17]||(s[17]=[l("Acciones",-1)])]),_:1})]),_:1})]),_:1}),e(t(B),null,{default:a(()=>[(r(!0),_(y,null,v(c.evidencias,n=>(r(),p(t(h),{key:n.id,class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>{var d;return[e(t(w),{href:`/admin/contratos/${(d=c.contrato)==null?void 0:d.id}/evidencias/${n.id}`,class:"contents"},{default:a(()=>[e(t(u),null,{default:a(()=>[e(t(g),{variant:"outline"},{default:a(()=>[l(o(n.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),e(t(u),null,{default:a(()=>[f("span",st,o(n.descripcion||"-"),1)]),_:2},1024),e(t(u),null,{default:a(()=>[n.entregables&&n.entregables.length>0?(r(),_("div",lt,[(r(!0),_(y,null,v(n.entregables,m=>(r(),p(t(g),{key:m.id,variant:"secondary",class:"text-xs"},{default:a(()=>[l(o(m.nombre),1)]),_:2},1024))),128))])):(r(),_("span",nt,"-"))]),_:2},1024),e(t(u),null,{default:a(()=>{var m;return[f("span",ot,o(((m=n.usuario)==null?void 0:m.name)||"-"),1)]}),_:2},1024),e(t(u),null,{default:a(()=>[e(t(g),{class:C(D(n.estado))},{default:a(()=>[l(o(n.estado),1)]),_:2},1032,["class"])]),_:2},1024),e(t(u),null,{default:a(()=>[l(o(c.formatDate(n.created_at)),1)]),_:2},1024),e(t(u),{class:"text-right"},{default:a(()=>[n.archivo_url?(r(),_("a",{key:0,href:n.archivo_url,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800",onClick:s[2]||(s[2]=E(()=>{},["stop"]))},[e(t(V),{class:"h-4 w-4"})],8,rt)):$("",!0)]),_:2},1024)]),_:2},1032,["href"])]}),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])):k.value?$("",!0):(r(),p(t(A),{key:2},{default:a(()=>[e(t(T),{class:"py-8"},{default:a(()=>[f("div",dt,[e(t(G),{class:"mx-auto h-12 w-12 text-gray-400"}),f("p",it,o(c.mode==="grouped"?"No hay evidencias que coincidan con los filtros":"No hay evidencias asociadas"),1),f("p",ut,o(c.mode==="grouped"?"Intenta ajustar los criterios de búsqueda":"Las evidencias se cargan desde los contratos"),1)])]),_:1})]),_:1}))}});export{ht as _};
