import{d as I,r as E,b as m,e as n,w as t,f as e,g as o,u as a,p as M,i as c,j as u,P as h,h as r,x as q,F as P,k as S,t as d,n as H,W as g}from"./app-CR-2XB3C.js";import{_ as V}from"./index-Bv2D6OQs.js";import{_}from"./createLucideIcon-DpqMcHcs.js";import{_ as B,a as K,b as W,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXc292e6.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-87jkhHIN.js";import{_ as Q,a as R,b as X,c as J,d as C}from"./SelectValue.vue_vue_type_script_setup_true_lang-e9C0UTAB.js";import{_ as O,a as Y,b,c as p,d as Z,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-D40BEwBz.js";import{_ as aa,a as ea,b as ta,c as sa,d as la,e as ia,f as ra,g as oa}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BT87YhiW.js";import{_ as na}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-zKeAec8z.js";import{_ as ma}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BeDoGI8L.js";import{t as y}from"./index-DEPFt58J.js";import{P as da}from"./plus-DafQFHWU.js";import{S as ua}from"./search-BvkZDDxZ.js";import{M as N}from"./mail-mHQkAKOp.js";import{C as fa}from"./circle-check-big-CquAPYhs.js";import{C as ca}from"./circle-x-CwhdX8dP.js";import{U as pa}from"./user-DHtFWwAY.js";import{E as _a}from"./eye-D8pHnRV0.js";import{C as va}from"./copy-RigaIjzr.js";import{S as ga}from"./square-pen-DE73kWOA.js";import{T as ya}from"./trash-2-Ba23kG3g.js";import"./index-B_J_AOJU.js";import"./VisuallyHidden-BWbUvSRY.js";import"./check-COi2Akip.js";import"./floating-ui.vue-BhiDC_BV.js";import"./nullish-CHIgUVhi.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Dfpf6sX3.js";import"./x-BtC0hBQf.js";import"./DialogTrigger-C04ibuWy.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Ert7fISp.js";import"./index-BZs2h2K_.js";import"./index-E07s-QL0.js";import"./shield-4oMICjJq.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang--Zg1QsWs.js";import"./Label.vue_vue_type_script_setup_true_lang-CTFOyKy8.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-y6H-OSrV.js";import"./circle-alert-Ce-R__0b.js";import"./map-pin-CH_1kWrL.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D_zYDN4Z.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D4bt_NVp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-DnobICLq.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DspZ-Okb.js";import"./target-PRmdjiaM.js";import"./users-2q8ym3rK.js";import"./vote-BGunVfqa.js";import"./folder-open-B73Z5LJI.js";import"./send-DrZ9C7tM.js";import"./file-text-bOjPW4fi.js";import"./briefcase-VNV3HxYQ.js";import"./calendar-K2tiWc-j.js";import"./megaphone-B1ul-h89.js";import"./user-check-DqzH6i1N.js";import"./message-square-CKxkeyaY.js";import"./external-link-BksJeFVg.js";import"./panel-left-C66hQ-oC.js";import"./index-CuEHpEfT.js";const $a={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},xa={class:"flex justify-between items-center"},ha={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ca={class:"md:col-span-2"},ba={class:"relative"},ka={class:"font-medium"},wa={key:0,class:"text-sm text-muted-foreground"},Ea={class:"flex items-center gap-2"},Pa={class:"text-sm"},Sa={key:0,class:"text-sm"},Va={key:1,class:"text-sm text-muted-foreground"},Ba={class:"text-sm"},Da={key:0,class:"text-muted-foreground flex items-center gap-1"},Na={class:"flex justify-end gap-1"},Aa={class:"text-muted-foreground"},Fa={key:0,class:"flex justify-center"},Ta={class:"flex gap-1"},Ue=I({__name:"Index",props:{plantillas:{},filters:{},filterFieldsConfig:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(A){const $=A,F=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/campanas"},{title:"Plantillas Email",href:"/admin/campanas/plantillas-email"}];$.filterFieldsConfig;const x=E($.filters.search||""),v=E($.filters.es_activa||"all"),k=()=>{g.get("/admin/campanas/plantillas-email",{search:x.value,es_activa:v.value!=="all"?v.value:void 0},{preserveState:!0,preserveScroll:!0})},T=i=>{g.post(`/admin/campanas/plantillas-email/${i}/duplicate`,{},{onSuccess:()=>{y.success("Plantilla duplicada exitosamente")},onError:()=>{y.error("Error al duplicar la plantilla")}})},j=i=>{g.delete(`/admin/campanas/plantillas-email/${i}`,{onSuccess:()=>{y.success("Plantilla eliminada exitosamente")},onError:()=>{y.error("Error al eliminar la plantilla")}})},z=i=>{g.post(`/admin/campanas/plantillas-email/${i.id}/preview`,{},{onSuccess:s=>{window.open(`data:text/html;charset=utf-8,${encodeURIComponent(s.html)}`,"_blank")}})},L=i=>new Date(i).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),U=i=>(i==null?void 0:i.length)||0;return(i,s)=>(n(),m(ma,{breadcrumbs:F},{default:t(()=>[e(a(M),{title:"Plantillas de Email"}),o("div",$a,[o("div",xa,[s[3]||(s[3]=o("div",null,[o("h1",{class:"text-3xl font-bold"},"Plantillas de Email"),o("p",{class:"text-muted-foreground mt-1"}," Gestiona las plantillas de correo electrónico para tus campañas ")],-1)),i.canCreate?(n(),m(a(h),{key:0,href:"/admin/campanas/plantillas-email/create",class:"inline-flex"},{default:t(()=>[e(a(_),null,{default:t(()=>[e(a(da),{class:"w-4 h-4 mr-2"}),s[2]||(s[2]=r(" Nueva Plantilla ",-1))]),_:1})]),_:1})):u("",!0)]),e(a(B),null,{default:t(()=>[e(a(K),null,{default:t(()=>[e(a(W),null,{default:t(()=>[...s[4]||(s[4]=[r("Filtros",-1)])]),_:1})]),_:1}),e(a(D),null,{default:t(()=>[o("div",ha,[o("div",Ca,[o("div",ba,[e(a(ua),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e(a(G),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=l=>x.value=l),placeholder:"Buscar por nombre, asunto o descripción...",class:"pl-10",onKeyup:q(k,["enter"])},null,8,["modelValue"])])]),e(a(Q),{modelValue:v.value,"onUpdate:modelValue":[s[1]||(s[1]=l=>v.value=l),k]},{default:t(()=>[e(a(R),null,{default:t(()=>[e(a(X),{placeholder:"Estado"})]),_:1}),e(a(J),null,{default:t(()=>[e(a(C),{value:"all"},{default:t(()=>[...s[5]||(s[5]=[r("Todas",-1)])]),_:1}),e(a(C),{value:"1"},{default:t(()=>[...s[6]||(s[6]=[r("Activas",-1)])]),_:1}),e(a(C),{value:"0"},{default:t(()=>[...s[7]||(s[7]=[r("Inactivas",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(a(B),null,{default:t(()=>[e(a(D),{class:"p-0"},{default:t(()=>[e(a(O),null,{default:t(()=>[e(a(Y),null,{default:t(()=>[e(a(b),null,{default:t(()=>[e(a(p),null,{default:t(()=>[...s[8]||(s[8]=[r("Nombre",-1)])]),_:1}),e(a(p),null,{default:t(()=>[...s[9]||(s[9]=[r("Asunto",-1)])]),_:1}),e(a(p),null,{default:t(()=>[...s[10]||(s[10]=[r("Variables",-1)])]),_:1}),e(a(p),null,{default:t(()=>[...s[11]||(s[11]=[r("Campañas",-1)])]),_:1}),e(a(p),null,{default:t(()=>[...s[12]||(s[12]=[r("Estado",-1)])]),_:1}),e(a(p),null,{default:t(()=>[...s[13]||(s[13]=[r("Creado",-1)])]),_:1}),e(a(p),{class:"text-right"},{default:t(()=>[...s[14]||(s[14]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),e(a(Z),null,{default:t(()=>[(n(!0),c(P,null,S(i.plantillas.data,l=>(n(),m(a(b),{key:l.id},{default:t(()=>[e(a(f),{class:"font-medium"},{default:t(()=>[o("div",null,[o("div",ka,d(l.nombre),1),l.descripcion?(n(),c("div",wa,d(l.descripcion),1)):u("",!0)])]),_:2},1024),e(a(f),null,{default:t(()=>[o("div",Ea,[e(a(N),{class:"w-4 h-4 text-muted-foreground"}),o("span",Pa,d(l.asunto),1)])]),_:2},1024),e(a(f),null,{default:t(()=>[e(a(V),{variant:"secondary"},{default:t(()=>[r(d(U(l.variables_usadas))+" variables ",1)]),_:2},1024)]),_:2},1024),e(a(f),null,{default:t(()=>[l.campanas_count&&l.campanas_count>0?(n(),c("span",Sa,d(l.campanas_count)+" campañas ",1)):(n(),c("span",Va," Sin uso "))]),_:2},1024),e(a(f),null,{default:t(()=>[e(a(V),{variant:l.es_activa?"default":"secondary"},{default:t(()=>[l.es_activa?(n(),m(a(fa),{key:0,class:"w-3 h-3 mr-1"})):(n(),m(a(ca),{key:1,class:"w-3 h-3 mr-1"})),r(" "+d(l.es_activa?"Activa":"Inactiva"),1)]),_:2},1032,["variant"])]),_:2},1024),e(a(f),null,{default:t(()=>[o("div",Ba,[o("div",null,d(L(l.created_at)),1),l.creator?(n(),c("div",Da,[e(a(pa),{class:"w-3 h-3"}),r(" "+d(l.creator.nombre),1)])):u("",!0)])]),_:2},1024),e(a(f),{class:"text-right"},{default:t(()=>[o("div",Na,[e(a(_),{variant:"ghost",size:"sm",onClick:w=>z(l),title:"Vista previa"},{default:t(()=>[e(a(_a),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),i.canEdit?(n(),m(a(_),{key:0,variant:"ghost",size:"sm",onClick:w=>T(l.id),title:"Duplicar"},{default:t(()=>[e(a(va),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):u("",!0),i.canEdit?(n(),m(a(h),{key:1,href:`/admin/campanas/plantillas-email/${l.id}/edit`},{default:t(()=>[e(a(_),{variant:"ghost",size:"sm",title:"Editar"},{default:t(()=>[e(a(ga),{class:"w-4 h-4"})]),_:1})]),_:2},1032,["href"])):u("",!0),i.canDelete&&(!l.campanas_count||l.campanas_count===0)?(n(),m(a(aa),{key:2},{default:t(()=>[e(a(na),{asChild:""},{default:t(()=>[e(a(_),{variant:"ghost",size:"sm",title:"Eliminar"},{default:t(()=>[e(a(ya),{class:"w-4 h-4 text-destructive"})]),_:1})]),_:1}),e(a(ea),null,{default:t(()=>[e(a(ta),null,{default:t(()=>[e(a(sa),null,{default:t(()=>[...s[15]||(s[15]=[r("¿Eliminar plantilla?",-1)])]),_:1}),e(a(la),null,{default:t(()=>[r(' Esta acción no se puede deshacer. La plantilla "'+d(l.nombre)+'" será eliminada permanentemente. ',1)]),_:2},1024)]),_:2},1024),e(a(ia),null,{default:t(()=>[e(a(ra),null,{default:t(()=>[...s[16]||(s[16]=[r("Cancelar",-1)])]),_:1}),e(a(oa),{onClick:w=>j(l.id)},{default:t(()=>[...s[17]||(s[17]=[r(" Eliminar ",-1)])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):u("",!0)])]),_:2},1024)]),_:2},1024))),128)),i.plantillas.data.length===0?(n(),m(a(b),{key:0},{default:t(()=>[e(a(f),{colspan:"7",class:"text-center py-8"},{default:t(()=>[o("div",Aa,[e(a(N),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),s[18]||(s[18]=o("p",null,"No se encontraron plantillas de email",-1))])]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),i.plantillas.last_page>1?(n(),c("div",Fa,[o("nav",Ta,[(n(!0),c(P,null,S(i.plantillas.links,l=>(n(),m(a(h),{key:l.label,href:l.url||"#",class:H(["px-3 py-2 text-sm rounded-md",l.active?"bg-primary text-primary-foreground":"bg-background hover:bg-muted",!l.url&&"opacity-50 cursor-not-allowed"]),innerHTML:l.label},null,8,["href","class","innerHTML"]))),128))])])):u("",!0)])]),_:1}))}});export{Ue as default};
