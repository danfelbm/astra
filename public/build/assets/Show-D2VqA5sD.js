import{d as G,c as N,b as p,e as r,w as a,g as o,j as m,f as i,u as t,P as w,h as l,q as D,t as n,i as d,F as z,k as A}from"./app-Cuh3Sov_.js";import{_ as H}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D2gITrzH.js";import{_,a as h,b as g,c as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-BO_pj4R6.js";import{_ as J}from"./CardDescription.vue_vue_type_script_setup_true_lang-DK1a-7Wd.js";import{_ as v}from"./createLucideIcon-zA0T3Uav.js";import{_ as E}from"./index-CKwtzZC0.js";import{_ as I,a as L}from"./index-BJ9KZ8Sq.js";import{F as $}from"./file-CicIYebb.js";import{M as T}from"./music-pIXoKl-Q.js";import{V as K}from"./video-C_3Mu3YX.js";import{I as Q}from"./image-36HU9QMW.js";import{C as j}from"./circle-x-DGeBVLUN.js";import{C as M}from"./circle-check-big-C5D3JqYx.js";import{C as O}from"./clock-DYXX5iiW.js";import{A as W}from"./arrow-left-B8ynimFD.js";import{D as x}from"./download-Dliug-M8.js";import{T as Y}from"./triangle-alert-Dk_vsOp1.js";import{E as P}from"./eye-DIZPcch6.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Ck3BYjW9.js";import"./index-xJJ5v7AV.js";import"./floating-ui.vue-D8y6OT49.js";import"./x-nULAODCc.js";import"./Input.vue_vue_type_script_setup_true_lang-B9pczU8X.js";import"./index-C_dJ9DUh.js";import"./index-DZq_3Nh4.js";import"./shield-BNIcm94c.js";import"./user-BSSffkWN.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CkrI5D4A.js";import"./chevron-right-DfXDTuLV.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DiK3SQkp.js";import"./VisuallyHidden-CFxslfO1.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-YjGMT_BY.js";import"./check-oW6ea94x.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-CWld6NAA.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D0H6BoeW.js";import"./index-CzcgxyNl.js";import"./circle-alert-D1JqI4MG.js";import"./map-pin-BGUg8Lj7.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-BwKpji39.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-mgTj0jgF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-fUwPbfuw.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Ccv6A-0f.js";import"./tag-BFxlRw5b.js";import"./users-DIwLMR5w.js";import"./target-DJoF4epg.js";import"./vote-DJIceSaG.js";import"./folder-open-ZSpYw-au.js";import"./send-CzPe01X7.js";import"./file-text-DbzZv4J2.js";import"./briefcase-RK3w9yvK.js";import"./calendar-BZnSD-bb.js";import"./megaphone-V5gHpq3T.js";import"./user-check-Bld2G4pU.js";import"./clipboard-list-BoVpTxMY.js";import"./mail-CH_htvL0.js";import"./message-square-DpIW0NLT.js";import"./external-link-B0iqJ3NO.js";import"./panel-left-DjH5I4oM.js";import"./index-SC3geNqC.js";const Z={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ee={class:"flex justify-between items-start"},te={class:"flex items-center gap-4 mt-2"},oe={class:"text-muted-foreground"},se={class:"flex gap-2"},ie={key:0},ae={class:"grid gap-6 lg:grid-cols-3"},re={class:"lg:col-span-2 space-y-6"},ne={key:0,class:"ml-2"},de={class:"space-y-4"},le={key:0,class:"space-y-4"},me={key:0,class:"text-center"},ce=["src","alt"],ue={class:"text-sm text-muted-foreground mt-2"},pe={key:1,class:"text-center"},fe=["src"],ve={class:"text-sm text-muted-foreground mt-2"},_e={key:2,class:"flex flex-col items-center gap-4"},he={class:"flex items-center gap-3"},ge={class:"text-left"},ye={class:"font-medium"},be=["src"],xe={key:3,class:"flex items-center gap-4 py-4"},we={class:"flex-1"},ke={class:"font-medium"},Ce={class:"text-sm text-muted-foreground"},$e={key:1,class:"bg-muted/30 rounded-lg p-4"},De={key:0,class:"text-center"},ze=["src","alt"],Ae={key:1,class:"text-center"},Ee=["src"],Te={key:2,class:"flex flex-col items-center gap-4"},Se=["src"],Ve={key:3,class:"flex flex-col items-center gap-4 py-8"},Fe={class:"text-center"},Be={class:"font-medium"},Ne={class:"text-sm text-muted-foreground"},Ie={key:0},Le={key:2,class:"text-center py-8 text-muted-foreground"},je={class:"whitespace-pre-wrap"},Me={class:"space-y-6"},Oe={class:"font-medium"},Pe={key:0,class:"text-sm text-muted-foreground"},Re={key:0},qe={class:"font-medium"},Ue={key:0,class:"text-sm text-muted-foreground mt-1"},Xe={class:"space-y-2"},Ge={class:"font-medium text-sm"},He={class:"text-xs text-muted-foreground"},Je={class:"text-sm"},Ke={class:"text-sm"},Qe={key:0},We={class:"space-y-2 max-h-32 overflow-y-auto"},Ye={class:"truncate flex-1 mr-2"},Ze={key:1},et={class:"text-sm"},tt={key:2},ot={class:"text-sm"},st={class:"text-sm"},it={class:"text-xs text-muted-foreground"},at={class:"text-sm"},rt={key:3},nt={class:"text-sm"},dt={key:0,class:"text-xs text-muted-foreground"},lt={class:"text-sm whitespace-pre-wrap"},go=G({__name:"Show",props:{contrato:{},evidencia:{}},setup(R){const f=R,q=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:f.contrato.nombre,href:`/admin/contratos/${f.contrato.id}`},{title:"Evidencia",href:"#"}],S=N(()=>({imagen:Q,video:K,audio:T,documento:$})[f.evidencia.tipo_evidencia]||$),V=N(()=>({pendiente:{color:"secondary",icon:O,bgClass:"bg-yellow-50",textClass:"text-yellow-800"},aprobada:{color:"success",icon:M,bgClass:"bg-green-50",textClass:"text-green-800"},rechazada:{color:"destructive",icon:j,bgClass:"bg-red-50",textClass:"text-red-800"}})[f.evidencia.estado]||{color:"default",icon:O,bgClass:"bg-gray-50",textClass:"text-gray-800"}),F=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",U=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",b=e=>{const s=e||f.evidencia.archivo_url;s&&window.open(s,"_blank")},X=()=>{var e;((e=f.evidencia.archivos_urls)==null?void 0:e.length)>0?f.evidencia.archivos_urls.forEach((s,k)=>{setTimeout(()=>{window.open(s,"_blank")},k*500)}):f.evidencia.archivo_url&&b()};return(e,s)=>(r(),p(H,{breadcrumbs:q},{default:a(()=>{var k;return[o("div",Z,[o("div",ee,[o("div",null,[i(t(w),{href:`/admin/contratos/${e.contrato.id}`,class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:a(()=>[i(t(W),{class:"w-4 h-4 mr-2"}),s[0]||(s[0]=l(" Volver al Contrato ",-1))]),_:1},8,["href"]),s[1]||(s[1]=o("h2",{class:"text-3xl font-bold tracking-tight"},"Evidencia",-1)),o("div",te,[i(t(E),{variant:V.value.color},{default:a(()=>[(r(),p(D(V.value.icon),{class:"w-3 h-3 mr-1"})),l(" "+n(e.evidencia.estado_label),1)]),_:1},8,["variant"]),i(t(E),{variant:"outline"},{default:a(()=>[(r(),p(D(S.value),{class:"w-3 h-3 mr-1"})),l(" "+n(e.evidencia.tipo_evidencia_label),1)]),_:1}),i(t(E),{variant:"secondary"},{default:a(()=>[l(n(e.evidencia.tiene_multiples_archivos?`${e.evidencia.total_archivos} archivos`:"1 archivo"),1)]),_:1}),o("span",oe," Subida "+n(U(e.evidencia.created_at)),1)])]),o("div",se,[e.evidencia.tiene_multiples_archivos?(r(),p(t(v),{key:0,onClick:X,variant:"outline"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),l(" Descargar Todos ("+n(e.evidencia.total_archivos)+") ",1)]),_:1})):e.evidencia.archivo_url?(r(),p(t(v),{key:1,onClick:b,variant:"outline"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),s[2]||(s[2]=l(" Descargar ",-1))]),_:1})):m("",!0)])]),e.evidencia.estado==="rechazada"?(r(),p(t(I),{key:0,class:"border-red-200 bg-red-50"},{default:a(()=>[i(t(j),{class:"h-4 w-4 text-red-600"}),i(t(L),{class:"text-red-800"},{default:a(()=>[s[3]||(s[3]=l(" Esta evidencia ha sido rechazada. ",-1)),e.evidencia.observaciones_admin?(r(),d("span",ie," Motivo: "+n(e.evidencia.observaciones_admin),1)):m("",!0)]),_:1})]),_:1})):m("",!0),e.evidencia.estado==="aprobada"?(r(),p(t(I),{key:1,class:"border-green-200 bg-green-50"},{default:a(()=>[i(t(M),{class:"h-4 w-4 text-green-600"}),i(t(L),{class:"text-green-800"},{default:a(()=>[...s[4]||(s[4]=[l(" Esta evidencia ha sido aprobada exitosamente. ",-1)])]),_:1})]),_:1})):m("",!0),o("div",ae,[o("div",re,[i(t(_),null,{default:a(()=>[i(t(h),null,{default:a(()=>[i(t(g),{class:"flex items-center gap-2"},{default:a(()=>[(r(),p(D(S.value),{class:"w-5 h-5"})),s[5]||(s[5]=l(" Archivo de Evidencia ",-1))]),_:1}),i(t(J),null,{default:a(()=>[l(n(e.evidencia.archivo_nombre||"Archivo subido")+" ",1),e.evidencia.archivo_size_formatted?(r(),d("span",ne," ("+n(e.evidencia.archivo_size_formatted)+") ",1)):m("",!0)]),_:1})]),_:1}),i(t(y),null,{default:a(()=>{var u;return[o("div",de,[((u=e.evidencia.archivos_info)==null?void 0:u.length)>0?(r(),d("div",le,[(r(!0),d(z,null,A(e.evidencia.archivos_info,(c,C)=>(r(),d("div",{key:c.indice,class:"bg-muted/30 rounded-lg p-4 relative group"},[i(t(v),{onClick:B=>b(c.url),variant:"outline",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},{default:a(()=>[i(t(x),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),e.evidencia.es_imagen?(r(),d("div",me,[o("img",{src:c.url,alt:c.nombre,class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"},null,8,ce),o("p",ue,n(c.nombre),1)])):e.evidencia.es_video?(r(),d("div",pe,[o("video",{src:c.url,controls:"",class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,fe),o("p",ve,n(c.nombre),1)])):e.evidencia.es_audio?(r(),d("div",_e,[o("div",he,[i(t(T),{class:"w-12 h-12 text-muted-foreground"}),o("div",ge,[o("p",ye,n(c.nombre),1),s[6]||(s[6]=o("p",{class:"text-sm text-muted-foreground"},"Archivo de audio",-1))])]),o("audio",{src:c.url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,be)])):(r(),d("div",xe,[i(t($),{class:"w-12 h-12 text-muted-foreground flex-shrink-0"}),o("div",we,[o("p",ke,n(c.nombre),1),o("p",Ce,n(e.evidencia.tipo_evidencia_label),1)]),i(t(v),{onClick:B=>b(c.url),variant:"outline",size:"sm"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),s[7]||(s[7]=l(" Descargar ",-1))]),_:2},1032,["onClick"])]))]))),128))])):e.evidencia.archivo_url?(r(),d("div",$e,[e.evidencia.es_imagen?(r(),d("div",De,[o("img",{src:e.evidencia.archivo_url,alt:e.evidencia.descripcion||"Evidencia",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"},null,8,ze)])):e.evidencia.es_video?(r(),d("div",Ae,[o("video",{src:e.evidencia.archivo_url,controls:"",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,Ee)])):e.evidencia.es_audio?(r(),d("div",Te,[i(t(T),{class:"w-16 h-16 text-muted-foreground"}),o("audio",{src:e.evidencia.archivo_url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Se)])):(r(),d("div",Ve,[i(t($),{class:"w-16 h-16 text-muted-foreground"}),o("div",Fe,[o("p",Be,n(e.evidencia.archivo_nombre),1),o("p",Ne,[l(n(e.evidencia.tipo_evidencia_label)+" ",1),e.evidencia.archivo_size_formatted?(r(),d("span",Ie," • "+n(e.evidencia.archivo_size_formatted),1)):m("",!0)])]),i(t(v),{onClick:b,variant:"outline"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),s[8]||(s[8]=l(" Descargar para ver ",-1))]),_:1})]))])):(r(),d("div",Le,[i(t(Y),{class:"w-12 h-12 mx-auto mb-3"}),s[9]||(s[9]=o("p",null,"No se pudo cargar el archivo",-1))]))])]}),_:1})]),_:1}),e.evidencia.descripcion?(r(),p(t(_),{key:0},{default:a(()=>[i(t(h),null,{default:a(()=>[i(t(g),null,{default:a(()=>[...s[10]||(s[10]=[l("Descripción",-1)])]),_:1})]),_:1}),i(t(y),null,{default:a(()=>[o("p",je,n(e.evidencia.descripcion),1)]),_:1})]),_:1})):m("",!0)]),o("div",Me,[i(t(_),null,{default:a(()=>[i(t(h),null,{default:a(()=>[i(t(g),null,{default:a(()=>[...s[11]||(s[11]=[l("Información del Contrato",-1)])]),_:1})]),_:1}),i(t(y),{class:"space-y-4"},{default:a(()=>[o("div",null,[s[12]||(s[12]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Contrato",-1)),o("p",Oe,n(e.contrato.nombre),1),e.contrato.numero_contrato?(r(),d("p",Pe," # "+n(e.contrato.numero_contrato),1)):m("",!0)]),e.contrato.proyecto?(r(),d("div",Re,[s[13]||(s[13]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Proyecto",-1)),i(t(w),{href:`/admin/proyectos/${e.contrato.proyecto.id}`,class:"text-sm text-primary hover:underline"},{default:a(()=>[l(n(e.contrato.proyecto.nombre),1)]),_:1},8,["href"])])):m("",!0),i(t(v),{href:`/admin/contratos/${e.contrato.id}`,as:t(w),variant:"outline",size:"sm",class:"w-full"},{default:a(()=>[i(t(P),{class:"w-4 h-4 mr-2"}),s[14]||(s[14]=l(" Ver Contrato ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),i(t(_),null,{default:a(()=>[i(t(h),null,{default:a(()=>[i(t(g),null,{default:a(()=>[...s[15]||(s[15]=[l("Obligación Contractual",-1)])]),_:1})]),_:1}),i(t(y),{class:"space-y-4"},{default:a(()=>[o("div",null,[o("p",qe,n(e.evidencia.obligacion.nombre),1),e.evidencia.obligacion.descripcion?(r(),d("p",Ue,n(e.evidencia.obligacion.descripcion),1)):m("",!0)]),i(t(v),{href:`/admin/obligaciones/${e.evidencia.obligacion.id}`,as:t(w),variant:"outline",size:"sm",class:"w-full"},{default:a(()=>[i(t(P),{class:"w-4 h-4 mr-2"}),s[16]||(s[16]=l(" Ver Obligación ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),((k=e.evidencia.entregables)==null?void 0:k.length)>0?(r(),p(t(_),{key:0},{default:a(()=>[i(t(h),null,{default:a(()=>[i(t(g),null,{default:a(()=>[...s[17]||(s[17]=[l("Entregables Asociados",-1)])]),_:1})]),_:1}),i(t(y),null,{default:a(()=>[o("div",Xe,[(r(!0),d(z,null,A(e.evidencia.entregables,u=>(r(),p(t(w),{key:u.id,href:`/admin/proyectos/${u.hito.proyecto.id}/hitos/${u.hito.id}/entregables/${u.id}`,class:"block p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer"},{default:a(()=>[o("p",Ge,n(u.nombre),1),o("p",He,n(u.hito.nombre),1)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})):m("",!0),i(t(_),null,{default:a(()=>[i(t(h),null,{default:a(()=>[i(t(g),null,{default:a(()=>[l(n(e.evidencia.tiene_multiples_archivos?"Detalles de los Archivos":"Detalles del Archivo"),1)]),_:1})]),_:1}),i(t(y),{class:"space-y-3"},{default:a(()=>{var u,c;return[o("div",null,[s[18]||(s[18]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Tipo",-1)),o("p",Je,n(e.evidencia.tipo_evidencia_label),1)]),o("div",null,[s[19]||(s[19]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Cantidad",-1)),o("p",Ke,n(e.evidencia.total_archivos||1)+" archivo(s)",1)]),((u=e.evidencia.archivos_info)==null?void 0:u.length)>0?(r(),d("div",Qe,[s[20]||(s[20]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Archivos",-1)),o("div",We,[(r(!0),d(z,null,A(e.evidencia.archivos_info,C=>(r(),d("div",{key:C.indice,class:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded"},[o("span",Ye,n(C.nombre),1),i(t(v),{onClick:B=>b(C.url),size:"sm",variant:"ghost",class:"h-6 w-6 p-0"},{default:a(()=>[i(t(x),{class:"w-3 h-3"})]),_:2},1032,["onClick"])]))),128))])])):e.evidencia.archivo_size_formatted?(r(),d("div",Ze,[s[21]||(s[21]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Tamaño",-1)),o("p",et,n(e.evidencia.archivo_size_formatted),1)])):m("",!0),(c=e.evidencia.metadata)!=null&&c.mime_type?(r(),d("div",tt,[s[22]||(s[22]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Formato",-1)),o("p",ot,n(e.evidencia.metadata.mime_type),1)])):m("",!0),o("div",null,[s[23]||(s[23]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Subido por",-1)),o("p",st,n(e.evidencia.usuario.name),1),o("p",it,n(e.evidencia.usuario.email),1)]),o("div",null,[s[24]||(s[24]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Fecha de subida",-1)),o("p",at,n(F(e.evidencia.created_at)),1)]),e.evidencia.revisado_at?(r(),d("div",rt,[s[25]||(s[25]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Revisado",-1)),o("p",nt,n(F(e.evidencia.revisado_at)),1),e.evidencia.revisor?(r(),d("p",dt," por "+n(e.evidencia.revisor.name),1)):m("",!0)])):m("",!0)]}),_:1})]),_:1}),e.evidencia.observaciones_admin?(r(),p(t(_),{key:1},{default:a(()=>[i(t(h),null,{default:a(()=>[i(t(g),null,{default:a(()=>[...s[26]||(s[26]=[l("Observaciones de Revisión",-1)])]),_:1})]),_:1}),i(t(y),null,{default:a(()=>[o("p",lt,n(e.evidencia.observaciones_admin),1)]),_:1})]),_:1})):m("",!0)])])])]}),_:1}))}});export{go as default};
