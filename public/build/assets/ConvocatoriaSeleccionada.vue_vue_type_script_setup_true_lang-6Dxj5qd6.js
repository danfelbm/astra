import{_ as k}from"./index-Brs92W4k.js";import{_ as E,a as P,c as B,b as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-s1x9nCrM.js";import{_ as N}from"./CardDescription.vue_vue_type_script_setup_true_lang-CE_rs_Am.js";import{_ as q}from"./Label.vue_vue_type_script_setup_true_lang-D0Skph0a.js";import{_ as K,a as O}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-JofScXil.js";import{a as A,_ as L}from"./index-DF8N9F4o.js";import{_ as V}from"./AlertTitle.vue_vue_type_script_setup_true_lang-JbUwyVwL.js";import{d as G,r as $,c as R,p as T,o as Q,i as f,b as w,j as y,g as e,w as o,e as s,f as t,h as d,t as l,F as W,k as Y,a as X,m as c,n as g,v as Z}from"./app-DxXIIVO7.js";import{C as F}from"./circle-alert-CD9SfZPc.js";import{M as C}from"./map-pin-Cpx803cd.js";import{C as h}from"./calendar-CUL-U_9V.js";import{U as ee}from"./users-CZ_j-bWo.js";import{E as te}from"./external-link-Bn72ppJv.js";import{B as se}from"./briefcase-gbHRAMPw.js";const ae={class:"space-y-4"},re={key:0,class:"text-center py-8"},oe={key:2,class:"space-y-6"},le={key:0},ie={class:"text-sm font-medium text-muted-foreground mb-3"},ne={class:"space-y-3"},de={class:"flex items-start gap-3"},ue={class:"flex-1"},ce={class:"flex items-center justify-between"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},fe={class:"flex items-center gap-2 text-muted-foreground"},pe={class:"flex items-center gap-2 text-muted-foreground"},_e={class:"flex items-center gap-2 text-muted-foreground"},ge={key:0,class:"flex items-center gap-2 text-muted-foreground"},be={class:"mt-3 text-xs text-muted-foreground"},xe={key:1},ve={class:"text-sm font-medium text-muted-foreground mb-3"},ye={class:"space-y-3"},he={class:"flex items-start gap-3"},$e={class:"flex-1"},we={class:"flex items-center justify-between"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},ke={class:"flex items-center gap-2 text-muted-foreground"},Se={class:"flex items-center gap-2 text-muted-foreground"},Ee={class:"flex items-center gap-2 text-muted-foreground"},Pe={class:"mt-3 text-xs text-muted-foreground"},Be={key:4,class:"mt-4 p-3 bg-muted/50 rounded-lg"},Ne={class:"text-sm text-muted-foreground"},nt=G({__name:"ConvocatoriaSelector",props:{modelValue:{},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filtrarPorUbicacion:{type:Boolean,default:!0},showPostulacionWarning:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(b,{emit:m}){var M;const x=b,S=m,p=$([]),v=$(!1),u=$(null),a=$((M=x.modelValue)==null?void 0:M.toString()),H=async()=>{v.value=!0,u.value=null;try{const i=await X.get("/miembro/api/convocatorias/disponibles",{params:{filtrar_ubicacion:x.filtrarPorUbicacion,incluir_futuras:!0}});p.value=i.data}catch(i){u.value="Error al cargar las convocatorias disponibles",console.error("Error cargando convocatorias:",i)}finally{v.value=!1}},_=R(()=>{const i={abiertas:[],futuras:[]};return p.value.forEach(n=>{n.estado_temporal==="abierta"?i.abiertas.push(n):n.estado_temporal==="futura"&&i.futuras.push(n)}),i}),U=R(()=>p.value.find(i=>i.id===Number(a.value)));T(a,i=>{S("update:modelValue",i?Number(i):void 0)}),T(()=>x.modelValue,i=>{a.value=i==null?void 0:i.toString()});const j=i=>new Date(i).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),z=i=>{switch(i){case"abierta":return"bg-green-100 text-green-800";case"futura":return"bg-blue-100 text-blue-800";case"cerrada":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}},D=i=>{switch(i){case"abierta":return"Abierta";case"futura":return"Próxima";case"cerrada":return"Cerrada";default:return"Borrador"}};return Q(()=>{H()}),(i,n)=>(c(),f("div",ae,[v.value?(c(),f("div",re,[...n[1]||(n[1]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},null,-1),e("p",{class:"mt-2 text-sm text-muted-foreground"},"Cargando convocatorias disponibles...",-1)])])):u.value?(c(),w(t(L),{key:1,variant:"destructive"},{default:o(()=>[s(t(F),{class:"h-4 w-4"}),s(t(V),null,{default:o(()=>[...n[2]||(n[2]=[d("Error",-1)])]),_:1}),s(t(A),null,{default:o(()=>[d(l(u.value),1)]),_:1})]),_:1})):p.value.length>0?(c(),f("div",oe,[s(t(K),{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=r=>a.value=r),disabled:b.disabled},{default:o(()=>[_.value.abiertas.length>0?(c(),f("div",le,[e("h4",ie," Convocatorias Abiertas ("+l(_.value.abiertas.length)+") ",1),e("div",ne,[(c(!0),f(W,null,Y(_.value.abiertas,r=>(c(),w(t(E),{key:r.id,class:g(["cursor-pointer hover:shadow-md transition-all duration-200",{"ring-2 ring-primary bg-primary/5 dark:bg-primary/10":a.value===r.id.toString(),"hover:bg-muted/50":a.value!==r.id.toString()}]),onClick:I=>a.value=r.id.toString()},{default:o(()=>[s(t(P),{class:"pb-3"},{default:o(()=>[e("div",de,[s(t(O),{value:r.id.toString(),id:`conv-${r.id}`},null,8,["value","id"]),e("div",ue,[e("div",ce,[s(t(q),{for:`conv-${r.id}`,class:"text-base font-semibold cursor-pointer"},{default:o(()=>[d(l(r.nombre),1)]),_:2},1032,["for"]),s(t(k),{class:g(z(r.estado_temporal))},{default:o(()=>[d(l(D(r.estado_temporal)),1)]),_:2},1032,["class"])]),s(t(N),{class:"mt-1"},{default:o(()=>[d(l(r.descripcion),1)]),_:2},1024)])])]),_:2},1024),s(t(B),{class:"pt-0"},{default:o(()=>[e("div",me,[e("div",fe,[s(t(C),{class:"h-4 w-4"}),e("span",null,l(r.cargo.nombre),1)]),e("div",pe,[s(t(h),{class:"h-4 w-4"}),e("span",null,l(r.periodo_electoral.nombre),1)]),e("div",_e,[s(t(C),{class:"h-4 w-4"}),e("span",null,l(r.ubicacion),1)]),r.numero_postulaciones!==void 0?(c(),f("div",ge,[s(t(ee),{class:"h-4 w-4"}),e("span",null,l(r.numero_postulaciones)+" postulaciones",1)])):y("",!0)]),e("div",be,[n[3]||(n[3]=e("span",{class:"font-medium"},"Cierre:",-1)),d(" "+l(j(r.fecha_cierre)),1)])]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])])):y("",!0),_.value.futuras.length>0?(c(),f("div",xe,[e("h4",ve," Próximas Convocatorias ("+l(_.value.futuras.length)+") ",1),e("div",ye,[(c(!0),f(W,null,Y(_.value.futuras,r=>(c(),w(t(E),{key:r.id,class:g(["cursor-pointer hover:shadow-md transition-all duration-200 opacity-90",{"ring-2 ring-primary bg-primary/5 dark:bg-primary/10":a.value===r.id.toString(),"hover:bg-muted/50":a.value!==r.id.toString()}]),onClick:I=>a.value=r.id.toString()},{default:o(()=>[s(t(P),{class:"pb-3"},{default:o(()=>[e("div",he,[s(t(O),{value:r.id.toString(),id:`conv-${r.id}`},null,8,["value","id"]),e("div",$e,[e("div",we,[s(t(q),{for:`conv-${r.id}`,class:"text-base font-semibold cursor-pointer"},{default:o(()=>[d(l(r.nombre),1)]),_:2},1032,["for"]),s(t(k),{class:g(z(r.estado_temporal))},{default:o(()=>[d(l(D(r.estado_temporal)),1)]),_:2},1032,["class"])]),s(t(N),{class:"mt-1"},{default:o(()=>[d(l(r.descripcion),1)]),_:2},1024)])])]),_:2},1024),s(t(B),{class:"pt-0"},{default:o(()=>[e("div",Ce,[e("div",ke,[s(t(C),{class:"h-4 w-4"}),e("span",null,l(r.cargo.nombre),1)]),e("div",Se,[s(t(h),{class:"h-4 w-4"}),e("span",null,l(r.periodo_electoral.nombre),1)]),e("div",Ee,[s(t(C),{class:"h-4 w-4"}),e("span",null,l(r.ubicacion),1)])]),e("div",Pe,[n[4]||(n[4]=e("span",{class:"font-medium"},"Apertura:",-1)),d(" "+l(j(r.fecha_apertura)),1)])]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])])):y("",!0)]),_:1},8,["modelValue","disabled"])])):(c(),w(t(L),{key:3},{default:o(()=>[s(t(F),{class:"h-4 w-4"}),s(t(V),null,{default:o(()=>[...n[5]||(n[5]=[d("Sin convocatorias disponibles",-1)])]),_:1}),s(t(A),null,{default:o(()=>[...n[6]||(n[6]=[d(" No hay convocatorias disponibles en este momento para tu ubicación. Por favor, intenta más tarde o contacta al administrador. ",-1)])]),_:1})]),_:1})),U.value&&!b.disabled?(c(),f("div",Be,[n[7]||(n[7]=e("p",{class:"text-sm font-medium"},"Convocatoria seleccionada:",-1)),e("p",Ne,l(U.value.nombre),1)])):y("",!0)]))}}),Ae={class:"space-y-4"},Le={class:"mt-2"},Ve={class:"flex items-start justify-between"},Fe={class:"space-y-1"},Ue={class:"flex gap-2"},je={class:"flex items-start gap-2"},ze={class:"text-sm"},De={class:"font-medium text-gray-900 ml-1"},Me={class:"flex items-start gap-2"},qe={class:"text-sm"},Oe={class:"font-medium text-gray-900 ml-1"},Re={class:"flex items-start gap-2"},Te={class:"text-sm"},We={class:"font-medium text-gray-900 ml-1"},Ye={key:0,class:"flex items-start gap-2"},Ge={class:"text-sm"},He={class:"font-medium text-gray-900 ml-1"},dt=G({__name:"ConvocatoriaSeleccionada",props:{postulacion:{}},setup(b){const m=b,x=u=>{switch(u){case"abierta":return"bg-green-100 text-green-800";case"futura":return"bg-blue-100 text-blue-800";case"cerrada":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}},S=u=>{switch(u){case"abierta":return"Abierta";case"futura":return"Próxima";case"cerrada":return"Cerrada";default:return"Borrador"}},p=u=>{switch(u){case"enviada":return"bg-yellow-100 text-yellow-800";case"en_revision":return"bg-blue-100 text-blue-800";case"aceptada":return"bg-green-100 text-green-800";case"rechazada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=u=>{switch(u){case"enviada":return"Enviada";case"en_revision":return"En revisión";case"aceptada":return"Aceptada";case"rechazada":return"Rechazada";default:return u}};return(u,a)=>(c(),f("div",Ae,[s(t(L),{class:"border-blue-200 bg-blue-50"},{default:o(()=>[s(t(F),{class:"h-4 w-4 text-blue-600"}),s(t(V),{class:"text-blue-900"},{default:o(()=>[...a[0]||(a[0]=[d("Convocatoria ya seleccionada",-1)])]),_:1}),s(t(A),{class:"text-blue-800"},{default:o(()=>[a[6]||(a[6]=e("p",null,"Ya has elegido una convocatoria para tu candidatura. La información de tu postulación se muestra a continuación.",-1)),e("p",Le,[a[2]||(a[2]=d(" Si deseas postularte a un cargo distinto, por favor ve al ",-1)),s(t(Z),{href:u.route("user.postulaciones.index"),class:"font-semibold underline hover:text-blue-900 inline-flex items-center gap-1"},{default:o(()=>[a[1]||(a[1]=d(" menú de Postulaciones ",-1)),s(t(te),{class:"h-3 w-3"})]),_:1},8,["href"]),a[3]||(a[3]=d(". Si necesitas ayuda, escríbenos a: ",-1)),a[4]||(a[4]=e("b",null,"soporte@colombiahumana.co",-1)),a[5]||(a[5]=d(". ",-1))])]),_:1})]),_:1}),s(t(E),{class:"border-2 bg-gray-50"},{default:o(()=>[s(t(P),null,{default:o(()=>[e("div",Ve,[e("div",Fe,[s(t(J),{class:"text-lg"},{default:o(()=>[d(l(m.postulacion.convocatoria.nombre),1)]),_:1}),s(t(N),{class:"text-sm"},{default:o(()=>[...a[7]||(a[7]=[d(" Convocatoria seleccionada en tu candidatura ",-1)])]),_:1})]),e("div",Ue,[s(t(k),{class:g([x(m.postulacion.convocatoria.estado_temporal),"text-xs"])},{default:o(()=>[d(l(S(m.postulacion.convocatoria.estado_temporal)),1)]),_:1},8,["class"]),s(t(k),{class:g([p(m.postulacion.estado),"text-xs"])},{default:o(()=>[d(" Postulación "+l(v(m.postulacion.estado)),1)]),_:1},8,["class"])])])]),_:1}),s(t(B),{class:"space-y-3"},{default:o(()=>[e("div",je,[s(t(se),{class:"h-4 w-4 text-gray-500 mt-0.5"}),e("div",ze,[a[8]||(a[8]=e("span",{class:"text-gray-600"},"Cargo:",-1)),e("span",De,l(m.postulacion.convocatoria.cargo),1)])]),e("div",Me,[s(t(h),{class:"h-4 w-4 text-gray-500 mt-0.5"}),e("div",qe,[a[9]||(a[9]=e("span",{class:"text-gray-600"},"Periodo:",-1)),e("span",Oe,l(m.postulacion.convocatoria.periodo),1)])]),e("div",Re,[s(t(h),{class:"h-4 w-4 text-gray-500 mt-0.5"}),e("div",Te,[a[10]||(a[10]=e("span",{class:"text-gray-600"},"Fecha de cierre:",-1)),e("span",We,l(m.postulacion.convocatoria.fecha_cierre),1)])]),m.postulacion.fecha_postulacion?(c(),f("div",Ye,[s(t(h),{class:"h-4 w-4 text-gray-500 mt-0.5"}),e("div",Ge,[a[11]||(a[11]=e("span",{class:"text-gray-600"},"Fecha de tu postulación:",-1)),e("span",He,l(m.postulacion.fecha_postulacion),1)])])):y("",!0),a[12]||(a[12]=e("div",{class:"border-t pt-3 mt-3"},[e("p",{class:"text-xs text-gray-500"}," Esta convocatoria fue seleccionada cuando creaste tu candidatura. No es posible cambiarla desde este formulario para mantener la integridad de tu postulación y su historial de seguimiento. ")],-1))]),_:1})]),_:1})]))}});export{dt as _,nt as a};
