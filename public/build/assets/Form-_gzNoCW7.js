import{d as le,r as k,c as J,m as K,z as ae,i as f,e as p,g as o,f as l,A as oe,B as ne,w as a,u as e,h as d,t as m,j as g,n as D,F,k as N,b as z,C as ie,D as re,p as de,l as ue,W as me}from"./app-BxMQdeji.js";import{c as R,_ as c}from"./createLucideIcon-C-UWYrfi.js";import{a as T,b as A,c as h,_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-BnCOEwdG.js";import{_ as Q}from"./CardDescription.vue_vue_type_script_setup_true_lang-ToL2SzCT.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-BlmtfhYq.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-Cv61jd0z.js";import{_ as pe}from"./Textarea.vue_vue_type_script_setup_true_lang-BmTqlBLA.js";import{_ as ce}from"./Switch.vue_vue_type_script_setup_true_lang-CAm1LBg3.js";import{_ as Y,a as Z}from"./index-BSf8eefq.js";import{_ as fe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CiEBtCld.js";import{u as ve,L as _e,E as be,i as xe}from"./index-CU-RTi5t.js";import{_ as ge}from"./index-BV26-s10.js";import{_ as we,a as ye,b as ee,c as te}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-w_SIyey3.js";import{_ as $e,a as ke,b as he,c as P}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CwQxj27i.js";import{u as Ce,V as Ve}from"./useTemplateVariables-8DaXJXKW.js";import{E as se}from"./eye-12Pg9Ucu.js";import{B as Ee,I as Le}from"./italic-BW6lZhgs.js";import{L as Me}from"./list-CosSxq9a.js";import{I as Pe}from"./image-Bs5_Eheq.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{t as $}from"./index-uuqfgDZR.js";import{A as Te}from"./arrow-left-D5jKR-4B.js";import{M as Ae}from"./mail-DqZLMO2Y.js";import{S as Ie}from"./save-C6yQR3lp.js";import{C as Be}from"./circle-alert----6uGyB.js";import{I as Ue}from"./info-CR7ejUud.js";import"./index-gViH2lvq.js";import"./VisuallyHidden-BU7kxpuH.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-C_cC4TmA.js";import"./check-Df8aIUSG.js";import"./floating-ui.vue-8MwpQwna.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHiddenInput-DFI-nItV.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-HaYR--Vk.js";import"./index-DyBffbvj.js";import"./x-CtZ-Yk1L.js";import"./index-CniBkxSN.js";import"./shield-BWgGyosQ.js";import"./user-y-oKgZ0r.js";import"./chevron-right-Fu6i2V5H.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-XGwxgqGh.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Rc0j_Ts0.js";import"./map-pin-BSO3mLrr.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-vmsnnBVQ.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D23-rq2T.js";import"./chevrons-up-down-3z313Cuu.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CtZNhcn0.js";import"./tag-DPKMgGKR.js";import"./users-CvN1Zex9.js";import"./target-DGdssVnK.js";import"./vote-BLA5af_M.js";import"./folder-open-B7m9IzBm.js";import"./send-oS9jU0xl.js";import"./file-text-BnGFyr0l.js";import"./briefcase-WEKIfwBg.js";import"./calendar-DgdSvpAx.js";import"./megaphone-4hd08Cg7.js";import"./user-check-B_HPyobX.js";import"./message-square-DEtIPXL4.js";import"./external-link-B-I99Qkx.js";import"./panel-left-CpkWwX9C.js";import"./index-De6-LhcB.js";import"./RovingFocusItem-CUafydao.js";import"./utils-CDNySjiA.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=R("Link2Icon",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=R("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=R("RedoIcon",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=R("UndoIcon",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),Fe={class:"space-y-4"},Ne={class:"flex justify-between items-center"},Re={key:0,class:"flex flex-wrap items-center gap-1 border-b bg-muted/30 p-2"},Oe={class:"flex items-center gap-1"},We={class:"flex items-center gap-1"},qe={class:"flex items-center gap-1"},Ge={class:"flex items-center gap-1"},Je={class:"p-4 border min-h-[300px]"},Ke=["innerHTML"],Qe={class:"space-y-4"},Xe={class:"text-sm font-medium mb-2"},Ye={class:"flex flex-wrap gap-2"},Ze={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},et={class:"ml-2 font-medium"},tt={class:"ml-2 font-medium"},lt={class:"ml-2 font-medium"},st={class:"ml-2 font-medium"},at=le({__name:"EmailTemplateEditor",props:{modelValue:{default:""},asunto:{default:""},placeholder:{default:"Escribe el contenido del email..."},variables:{}},emits:["update:modelValue","update:asunto","update:variables"],setup(O,{emit:_}){const v=O,V=_,{variableCategories:r,extractUsedVariables:E,replaceWithExamples:L,estimateLength:W}=Ce(),b=k(!1),I=k(""),w=k(v.asunto),B=k([]),i=ve({content:v.modelValue,extensions:[xe],editorProps:{attributes:{class:"prose prose-sm max-w-none min-h-[300px] p-4 focus:outline-none","data-placeholder":v.placeholder}},onUpdate:({editor:s})=>{const t=s.getHTML();V("update:modelValue",t),M(t)}}),M=s=>{const t=`${w.value} ${s}`,n=E(t);B.value=n,V("update:variables",n)},U=s=>{i.value&&i.value.chain().focus().insertContent(s).run()},H=()=>{const s=window.prompt("URL del enlace:");if(s&&i.value){const t=i.value.state.doc.textBetween(i.value.state.selection.from,i.value.state.selection.to,""),n=`<a href="${s}" class="text-primary underline">${t||s}</a>`;i.value.chain().focus().insertContent(n).run()}},j=()=>{const s=window.prompt("URL de la imagen:");if(s&&i.value){const t=`<img src="${s}" alt="Imagen" style="max-width: 100%;" />`;i.value.chain().focus().insertContent(t).run()}},x=s=>{if(i.value){const t=i.value.state.doc.textBetween(i.value.state.selection.from,i.value.state.selection.to,"");if(t){const n=`<span style="color: ${s}">${t}</span>`;i.value.chain().focus().insertContent(n).run()}}},S=()=>{var s;if(!b.value){const t=((s=i.value)==null?void 0:s.getHTML())||"";I.value=L(t)}b.value=!b.value},u=J(()=>{var n;const s=((n=i.value)==null?void 0:n.getHTML())||"",t=W(s);return{variables:B.value.length,charactersMin:t.min,charactersMax:t.max,charactersAvg:t.avg}});return K(()=>v.modelValue,s=>{i.value&&i.value.getHTML()!==s&&i.value.commands.setContent(s,!1)}),K(w,s=>{var t;V("update:asunto",s),M(((t=i.value)==null?void 0:t.getHTML())||"")}),ae(()=>{var s;(s=i.value)==null||s.destroy()}),(s,t)=>(p(),f("div",Fe,[o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium mb-2"},"Asunto del email",-1)),oe(o("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>w.value=n),type:"text",class:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Asunto del email..."},null,512),[[ne,w.value]])]),l(e(C),null,{default:a(()=>[l(e(T),null,{default:a(()=>[o("div",Ne,[l(e(A),null,{default:a(()=>[...t[15]||(t[15]=[d("Contenido del Email",-1)])]),_:1}),l(e(c),{variant:"outline",size:"sm",onClick:S},{default:a(()=>[l(e(se),{class:"w-4 h-4 mr-2"}),d(" "+m(b.value?"Editar":"Vista previa"),1)]),_:1})])]),_:1}),l(e(h),{class:"p-0"},{default:a(()=>[l(e(we),{modelValue:b.value?"preview":"editor",class:"w-full"},{default:a(()=>[l(e(ye),{class:"grid w-full grid-cols-2"},{default:a(()=>[l(e(ee),{value:"editor",onClick:t[1]||(t[1]=n=>b.value=!1)},{default:a(()=>[...t[16]||(t[16]=[d("Editor",-1)])]),_:1}),l(e(ee),{value:"preview",onClick:t[2]||(t[2]=n=>b.value=!0)},{default:a(()=>[...t[17]||(t[17]=[d("Vista Previa",-1)])]),_:1})]),_:1}),l(e(te),{value:"editor",class:"mt-0"},{default:a(()=>[e(i)?(p(),f("div",Re,[o("div",Oe,[l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:t[3]||(t[3]=n=>e(i).chain().focus().toggleBold().run()),class:D([{"bg-muted":e(i).isActive("bold")},"h-8 w-8 p-0"])},{default:a(()=>[l(e(Ee),{class:"h-4 w-4"})]),_:1},8,["class"]),l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:t[4]||(t[4]=n=>e(i).chain().focus().toggleItalic().run()),class:D([{"bg-muted":e(i).isActive("italic")},"h-8 w-8 p-0"])},{default:a(()=>[l(e(Le),{class:"h-4 w-4"})]),_:1},8,["class"])]),t[23]||(t[23]=o("div",{class:"mx-1 h-6 w-px bg-border"},null,-1)),o("div",We,[l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:t[5]||(t[5]=n=>e(i).chain().focus().toggleBulletList().run()),class:D([{"bg-muted":e(i).isActive("bulletList")},"h-8 w-8 p-0"])},{default:a(()=>[l(e(Me),{class:"h-4 w-4"})]),_:1},8,["class"]),l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:t[6]||(t[6]=n=>e(i).chain().focus().toggleOrderedList().run()),class:D([{"bg-muted":e(i).isActive("orderedList")},"h-8 w-8 p-0"])},{default:a(()=>[l(e(_e),{class:"h-4 w-4"})]),_:1},8,["class"])]),t[24]||(t[24]=o("div",{class:"mx-1 h-6 w-px bg-border"},null,-1)),o("div",qe,[l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:H,class:"h-8 w-8 p-0"},{default:a(()=>[l(e(He),{class:"h-4 w-4"})]),_:1}),l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:j,class:"h-8 w-8 p-0"},{default:a(()=>[l(e(Pe),{class:"h-4 w-4"})]),_:1})]),t[25]||(t[25]=o("div",{class:"mx-1 h-6 w-px bg-border"},null,-1)),l(e($e),null,{default:a(()=>[l(e(ke),{asChild:""},{default:a(()=>[l(e(c),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:a(()=>[l(e(je),{class:"h-4 w-4"})]),_:1})]),_:1}),l(e(he),null,{default:a(()=>[l(e(P),{onClick:t[7]||(t[7]=n=>x("#000000"))},{default:a(()=>[...t[18]||(t[18]=[d("Negro",-1)])]),_:1}),l(e(P),{onClick:t[8]||(t[8]=n=>x("#EF4444"))},{default:a(()=>[...t[19]||(t[19]=[d("Rojo",-1)])]),_:1}),l(e(P),{onClick:t[9]||(t[9]=n=>x("#3B82F6"))},{default:a(()=>[...t[20]||(t[20]=[d("Azul",-1)])]),_:1}),l(e(P),{onClick:t[10]||(t[10]=n=>x("#10B981"))},{default:a(()=>[...t[21]||(t[21]=[d("Verde",-1)])]),_:1}),l(e(P),{onClick:t[11]||(t[11]=n=>x("#F59E0B"))},{default:a(()=>[...t[22]||(t[22]=[d("Naranja",-1)])]),_:1})]),_:1})]),_:1}),t[26]||(t[26]=o("div",{class:"mx-1 h-6 w-px bg-border"},null,-1)),o("div",Ge,[l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:t[12]||(t[12]=n=>e(i).chain().focus().undo().run()),disabled:!e(i).can().undo(),class:"h-8 w-8 p-0"},{default:a(()=>[l(e(De),{class:"h-4 w-4"})]),_:1},8,["disabled"]),l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:t[13]||(t[13]=n=>e(i).chain().focus().redo().run()),disabled:!e(i).can().redo(),class:"h-8 w-8 p-0"},{default:a(()=>[l(e(Se),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):g("",!0),l(e(be),{editor:e(i),class:"min-h-[300px] border-x border-b"},null,8,["editor"])]),_:1}),l(e(te),{value:"preview",class:"mt-0"},{default:a(()=>[o("div",Je,[o("div",{class:"prose prose-sm max-w-none",innerHTML:I.value},null,8,Ke)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(e(C),null,{default:a(()=>[l(e(T),null,{default:a(()=>[l(e(A),{class:"text-base"},{default:a(()=>[...t[27]||(t[27]=[d("Variables Disponibles",-1)])]),_:1})]),_:1}),l(e(h),null,{default:a(()=>[o("div",Qe,[(p(!0),f(F,null,N(e(r),(n,q)=>(p(),f("div",{key:q},[o("h4",Xe,m(n.label),1),o("div",Ye,[(p(!0),f(F,null,N(n.variables,G=>(p(),z(e(ge),{key:G.key,variant:"outline",class:"cursor-pointer hover:bg-accent",onClick:Vt=>U(G.key)},{default:a(()=>[l(e(Ve),{class:"w-3 h-3 mr-1"}),d(" "+m(G.key),1)]),_:2},1032,["onClick"]))),128))])]))),128))])]),_:1})]),_:1}),l(e(C),null,{default:a(()=>[l(e(h),{class:"pt-6"},{default:a(()=>[o("div",Ze,[o("div",null,[t[28]||(t[28]=o("span",{class:"text-muted-foreground"},"Variables usadas:",-1)),o("span",et,m(u.value.variables),1)]),o("div",null,[t[29]||(t[29]=o("span",{class:"text-muted-foreground"},"Caracteres (mín):",-1)),o("span",tt,m(u.value.charactersMin),1)]),o("div",null,[t[30]||(t[30]=o("span",{class:"text-muted-foreground"},"Caracteres (máx):",-1)),o("span",lt,m(u.value.charactersMax),1)]),o("div",null,[t[31]||(t[31]=o("span",{class:"text-muted-foreground"},"Promedio:",-1)),o("span",st,m(u.value.charactersAvg),1)])])]),_:1})]),_:1})]))}}),ot=ze(at,[["__scopeId","data-v-2aec3447"]]),nt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},it={class:"flex justify-between items-center"},rt={class:"text-3xl font-bold"},dt={class:"text-muted-foreground mt-1"},ut={class:"flex gap-2"},mt={class:"list-disc pl-4"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct={key:0,class:"text-sm text-destructive mt-1"},ft={class:"flex items-center space-x-2 mt-2"},vt={key:0,class:"text-sm text-destructive mt-1"},_t={class:"text-sm text-muted-foreground mt-1"},bt={class:"mt-2"},xt={key:0,class:"text-sm text-destructive mt-1"},gt={class:"flex flex-wrap gap-2"},wt={key:1,class:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4"},yt={class:"flex justify-between items-center"},$t={class:"space-y-4"},kt={class:"font-medium"},ht={class:"border rounded-lg p-4 bg-white"},Ct=["innerHTML"],Hl=le({__name:"Form",props:{plantilla:{},variablesDisponibles:{}},setup(O){var M,U,H,j,x,S;const _=O,v=J(()=>{var u;return!!((u=_.plantilla)!=null&&u.id)}),V=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/campanas"},{title:"Plantillas Email",href:"/admin/campanas/plantillas-email"},{title:v.value?"Editar Plantilla":"Nueva Plantilla",href:"#"}],r=ie({nombre:((M=_.plantilla)==null?void 0:M.nombre)||"",descripcion:((U=_.plantilla)==null?void 0:U.descripcion)||"",asunto:((H=_.plantilla)==null?void 0:H.asunto)||"",contenido_html:((j=_.plantilla)==null?void 0:j.contenido_html)||"",contenido_texto:((x=_.plantilla)==null?void 0:x.contenido_texto)||"",es_activa:((S=_.plantilla)==null?void 0:S.es_activa)??!0}),E=k([]),L=k(!1),W=u=>{r.contenido_html=u;const s=document.createElement("div");s.innerHTML=u,r.contenido_texto=s.textContent||s.innerText||""},b=u=>{E.value=u},I=()=>{var u;v.value?r.put(`/admin/campanas/plantillas-email/${(u=_.plantilla)==null?void 0:u.id}`,{onSuccess:()=>{$.success("Plantilla actualizada exitosamente")},onError:s=>{$.error("Error al actualizar la plantilla"),console.error(s)}}):r.post("/admin/campanas/plantillas-email",{onSuccess:()=>{$.success("Plantilla creada exitosamente")},onError:s=>{$.error("Error al crear la plantilla"),console.error(s)}})},w=()=>{L.value=!L.value},B=J(()=>r.nombre&&r.asunto&&r.contenido_html&&!r.processing),i=()=>{var s;const u=prompt("Ingresa el email de destino para la prueba:");u&&me.post(`/admin/campanas/plantillas-email/${((s=_.plantilla)==null?void 0:s.id)||"preview"}/test`,{email:u,...r.data()},{onSuccess:()=>{$.success(`Email de prueba enviado a ${u}`)},onError:()=>{$.error("Error al enviar el email de prueba")}})};return(u,s)=>{const t=re("router-link");return p(),z(fe,{breadcrumbs:V},{default:a(()=>[l(e(de),{title:v.value?"Editar Plantilla Email":"Nueva Plantilla Email"},null,8,["title"]),o("div",nt,[o("form",{onSubmit:ue(I,["prevent"]),class:"space-y-6"},[o("div",it,[o("div",null,[o("h1",rt,m(v.value?"Editar Plantilla":"Nueva Plantilla de Email"),1),o("p",dt,m(v.value?"Modifica los detalles de la plantilla de email":"Crea una nueva plantilla para tus campañas de email"),1)]),o("div",ut,[l(t,{href:"/admin/campanas/plantillas-email"},{default:a(()=>[l(e(c),{type:"button",variant:"outline"},{default:a(()=>[l(e(Te),{class:"w-4 h-4 mr-2"}),s[4]||(s[4]=d(" Cancelar ",-1))]),_:1})]),_:1}),l(e(c),{type:"button",variant:"outline",onClick:w},{default:a(()=>[l(e(se),{class:"w-4 h-4 mr-2"}),s[5]||(s[5]=d(" Vista Previa ",-1))]),_:1}),v.value?(p(),z(e(c),{key:0,type:"button",variant:"outline",onClick:i},{default:a(()=>[l(e(Ae),{class:"w-4 h-4 mr-2"}),s[6]||(s[6]=d(" Enviar Prueba ",-1))]),_:1})):g("",!0),l(e(c),{type:"submit",disabled:!B.value},{default:a(()=>[l(e(Ie),{class:"w-4 h-4 mr-2"}),d(" "+m(v.value?"Actualizar":"Guardar")+" Plantilla ",1)]),_:1},8,["disabled"])])]),Object.keys(e(r).errors).length>0?(p(),z(e(Y),{key:0,variant:"destructive"},{default:a(()=>[l(e(Be),{class:"h-4 w-4"}),l(e(Z),null,{default:a(()=>[o("ul",mt,[(p(!0),f(F,null,N(e(r).errors,(n,q)=>(p(),f("li",{key:q},m(n),1))),128))])]),_:1})]),_:1})):g("",!0),l(e(C),null,{default:a(()=>[l(e(T),null,{default:a(()=>[l(e(A),null,{default:a(()=>[...s[7]||(s[7]=[d("Información Básica",-1)])]),_:1}),l(e(Q),null,{default:a(()=>[...s[8]||(s[8]=[d(" Define el nombre y descripción de la plantilla ",-1)])]),_:1})]),_:1}),l(e(h),{class:"space-y-4"},{default:a(()=>[o("div",pt,[o("div",null,[l(e(y),{htmlFor:"nombre"},{default:a(()=>[...s[9]||(s[9]=[d(" Nombre de la Plantilla ",-1),o("span",{class:"text-destructive"},"*",-1)])]),_:1}),l(e(X),{id:"nombre",modelValue:e(r).nombre,"onUpdate:modelValue":s[0]||(s[0]=n=>e(r).nombre=n),placeholder:"Ej: Bienvenida nuevos usuarios",error:e(r).errors.nombre},null,8,["modelValue","error"]),e(r).errors.nombre?(p(),f("p",ct,m(e(r).errors.nombre),1)):g("",!0)]),o("div",null,[l(e(y),{htmlFor:"es_activa"},{default:a(()=>[...s[10]||(s[10]=[d("Estado",-1)])]),_:1}),o("div",ft,[l(e(ce),{id:"es_activa",modelValue:e(r).es_activa,"onUpdate:modelValue":s[1]||(s[1]=n=>e(r).es_activa=n)},null,8,["modelValue"]),l(e(y),{for:"es_activa",class:"cursor-pointer"},{default:a(()=>[d(m(e(r).es_activa?"Activa":"Inactiva"),1)]),_:1})]),s[11]||(s[11]=o("p",{class:"text-sm text-muted-foreground mt-1"}," Las plantillas inactivas no pueden ser usadas en campañas ",-1))])]),o("div",null,[l(e(y),{htmlFor:"descripcion"},{default:a(()=>[...s[12]||(s[12]=[d("Descripción",-1)])]),_:1}),l(e(pe),{id:"descripcion",modelValue:e(r).descripcion,"onUpdate:modelValue":s[2]||(s[2]=n=>e(r).descripcion=n),placeholder:"Describe el propósito de esta plantilla...",rows:"3"},null,8,["modelValue"])])]),_:1})]),_:1}),l(e(C),null,{default:a(()=>[l(e(T),null,{default:a(()=>[l(e(A),null,{default:a(()=>[...s[13]||(s[13]=[d("Contenido del Email",-1)])]),_:1}),l(e(Q),null,{default:a(()=>[...s[14]||(s[14]=[d(" Define el asunto y el contenido del correo electrónico ",-1)])]),_:1})]),_:1}),l(e(h),{class:"space-y-4"},{default:a(()=>[o("div",null,[l(e(y),{htmlFor:"asunto"},{default:a(()=>[...s[15]||(s[15]=[d(" Asunto del Email ",-1),o("span",{class:"text-destructive"},"*",-1)])]),_:1}),l(e(X),{id:"asunto",modelValue:e(r).asunto,"onUpdate:modelValue":s[3]||(s[3]=n=>e(r).asunto=n),placeholder:"Ej: {{nombre}}, bienvenido a nuestra comunidad",error:e(r).errors.asunto},null,8,["modelValue","error"]),e(r).errors.asunto?(p(),f("p",vt,m(e(r).errors.asunto),1)):g("",!0),o("p",_t," Puedes usar variables como "+m(u.nombre)+", "+m(u.email)+", etc. ",1)]),o("div",null,[l(e(y),null,{default:a(()=>[...s[16]||(s[16]=[d(" Contenido HTML ",-1),o("span",{class:"text-destructive"},"*",-1)])]),_:1}),o("div",bt,[l(ot,{modelValue:e(r).contenido_html,"onUpdate:modelValue":W,"onUpdate:variables":b},null,8,["modelValue"])]),e(r).errors.contenido_html?(p(),f("p",xt,m(e(r).errors.contenido_html),1)):g("",!0)]),E.value.length>0?(p(),z(e(Y),{key:0},{default:a(()=>[l(e(Ue),{class:"h-4 w-4"}),l(e(Z),null,{default:a(()=>[s[17]||(s[17]=o("p",{class:"font-medium mb-2"},"Variables utilizadas en esta plantilla:",-1)),o("div",gt,[(p(!0),f(F,null,N(E.value,n=>(p(),f("code",{key:n,class:"px-2 py-1 bg-muted rounded text-sm"},m(n),1))),128))])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1}),L.value?(p(),f("div",wt,[l(e(C),{class:"w-full max-w-4xl max-h-[90vh] overflow-auto"},{default:a(()=>[l(e(T),null,{default:a(()=>[o("div",yt,[l(e(A),null,{default:a(()=>[...s[18]||(s[18]=[d("Vista Previa del Email",-1)])]),_:1}),l(e(c),{type:"button",variant:"ghost",size:"sm",onClick:w},{default:a(()=>[...s[19]||(s[19]=[d(" ✕ ",-1)])]),_:1})])]),_:1}),l(e(h),null,{default:a(()=>[o("div",$t,[o("div",null,[s[20]||(s[20]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Asunto:",-1)),o("p",kt,m(e(r).asunto||"(Sin asunto)"),1)]),o("div",ht,[o("div",{innerHTML:e(r).contenido_html||"<p>Sin contenido</p>"},null,8,Ct)])])]),_:1})]),_:1})])):g("",!0)],32)])]),_:1})}}});export{Hl as default};
