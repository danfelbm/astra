import{T as F,_ as M}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D-L1__mw.js";import{d as G,b as f,e as n,w as o,f as s,g as l,u as t,p as H,t as u,h as i,P as $,i as m,j as V,F as x,k as y}from"./app-BBR7iRWB.js";import{_ as w}from"./createLucideIcon-B5EYnBBV.js";import{_ as p,a as _,b as g,c}from"./CardTitle.vue_vue_type_script_setup_true_lang-Df_BEBky.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-DpJxbxHg.js";import{_ as v}from"./index-Bv--uN6n.js";import{_ as J,a as K,b as k,c as h}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-32BwSlTT.js";import{_ as O,a as Q,b as U,c as S,d as W,e as P}from"./TableHeader.vue_vue_type_script_setup_true_lang-K__NIF7u.js";import{_ as X,a as Y,b as Z}from"./index-D3Sny6W3.js";import{S as j}from"./shield-CNxds5uh.js";import{S as tt}from"./square-pen-F9GfVP-j.js";import{A as et}from"./arrow-left-C3Xc4OPD.js";import{U as st}from"./users-DNpv9_K8.js";import{L as ot}from"./lock-C0vOX1-7.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-B7JaofnC.js";import"./index-Wzmqg4u0.js";import"./floating-ui.vue-W9d0J7SY.js";import"./x-CitNh9Fo.js";import"./Input.vue_vue_type_script_setup_true_lang-DX3jklP7.js";import"./index-1NBsbJge.js";import"./user-D8jL9AQf.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-By3Ky9D1.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-B7dnXQAG.js";import"./VisuallyHidden-BB4i1zCH.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CNCAVt_-.js";import"./check-CL9FFi2S.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-zQiAXCWb.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CwIn6Xyr.js";import"./index-BnLPdXqF.js";import"./circle-alert-CaejHT2K.js";import"./map-pin-Btzbdn3V.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-BzqmfuLv.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-P_DOWBJg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-BlXhqFL0.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DqdjKj8a.js";import"./vote-D844pkrs.js";import"./send-BHvFfhys.js";import"./file-text-D_F0fl0W.js";import"./briefcase-Bw8Jvim-.js";import"./calendar-Cj1LXAfO.js";import"./megaphone-CHXfPHDU.js";import"./user-check-ClYzcNpd.js";import"./mail-LGXQcoXE.js";import"./message-square-BWh7jAAs.js";import"./external-link-Cjhsob2u.js";import"./panel-left-DeL8JFWu.js";import"./index-CKn4VzvO.js";import"./RovingFocusItem-Dac1RIJb.js";import"./utils-tU1iNCq7.js";const lt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},at={class:"flex items-center justify-between"},it={class:"flex items-center gap-4"},rt={class:"p-3 bg-primary/10 rounded-lg"},nt={class:"text-2xl font-bold tracking-tight"},dt={class:"flex items-center gap-2 mt-1"},ut={class:"flex gap-2"},mt={class:"grid gap-6 md:grid-cols-3"},ft={class:"text-2xl font-bold"},pt={class:"text-2xl font-bold"},_t={class:"text-2xl font-bold"},gt={class:"grid grid-cols-2 gap-4"},ct={class:"text-sm font-mono"},vt={class:"text-sm font-mono"},xt={class:"text-sm"},yt={class:"text-sm"},bt={key:0},$t={class:"text-sm"},wt={key:1},kt={class:"flex flex-wrap gap-2"},ht={key:0,class:"text-center py-8"},St={key:1,class:"space-y-4"},Pt={class:"font-semibold mb-2"},At={class:"flex flex-wrap gap-2"},Ct={key:2,class:"text-center py-8 text-muted-foreground"},Dt={class:"flex items-center gap-3"},Vt={class:"font-medium"},Rt={key:1,class:"text-center py-8 text-muted-foreground"},Ut={key:0,class:"space-y-3"},jt={class:"font-semibold"},Lt={class:"text-sm text-muted-foreground mt-1"},Nt={class:"flex gap-2 mt-2"},Et={key:1,class:"text-center py-8 text-muted-foreground"},Le=G({__name:"Show",props:{role:{},userCount:{}},setup(L){const b=L,N=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"},{title:b.role.display_name,href:"#"}],E=()=>["super_admin","admin","manager","user","end_customer"].includes(b.role.name),B=a=>a.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),A=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),z=()=>{if(!b.role.permissions)return{};const a={};return b.role.permissions.forEach(e=>{const[d,r]=e.split(".");a[d]||(a[d]=[]),a[d].push(r)}),a},T=a=>({users:"Usuarios",votaciones:"Votaciones",convocatorias:"Convocatorias",postulaciones:"Postulaciones",candidaturas:"Candidaturas",reports:"Reportes",settings:"Configuración",dashboard:"Dashboard",profile:"Perfil"})[a]||a,I=a=>({view:"secondary",create:"default",edit:"outline",delete:"destructive",export:"ghost"})[a]||"outline";return(a,e)=>(n(),f(M,{breadcrumbs:N},{default:o(()=>[s(t(H),{title:`Rol: ${a.role.display_name}`},null,8,["title"]),l("div",lt,[l("div",at,[l("div",it,[l("div",rt,[s(t(j),{class:"h-8 w-8 text-primary"})]),l("div",null,[l("h2",nt,u(a.role.display_name),1),l("div",dt,[s(t(v),{variant:"outline"},{default:o(()=>[i(u(a.role.name),1)]),_:1}),E()?(n(),f(t(v),{key:0,variant:"default"},{default:o(()=>[...e[0]||(e[0]=[i("Rol del Sistema",-1)])]),_:1})):(n(),f(t(v),{key:1,variant:"secondary"},{default:o(()=>[...e[1]||(e[1]=[i("Rol Personalizado",-1)])]),_:1}))])])]),l("div",ut,[s(t($),{href:`/admin/roles/${a.role.id}/edit`},{default:o(()=>[s(t(w),null,{default:o(()=>[s(t(tt),{class:"mr-2 h-4 w-4"}),e[2]||(e[2]=i(" Editar ",-1))]),_:1})]),_:1},8,["href"]),s(t($),{href:a.route("admin.roles.index")},{default:o(()=>[s(t(w),{variant:"outline"},{default:o(()=>[s(t(et),{class:"mr-2 h-4 w-4"}),e[3]||(e[3]=i(" Volver ",-1))]),_:1})]),_:1},8,["href"])])]),l("div",mt,[s(t(p),null,{default:o(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(g),{class:"text-sm font-medium"},{default:o(()=>[...e[4]||(e[4]=[i("Usuarios Asignados",-1)])]),_:1}),s(t(st),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(c),null,{default:o(()=>[l("div",ft,u(a.userCount),1),e[5]||(e[5]=l("p",{class:"text-xs text-muted-foreground"},"usuarios con este rol",-1))]),_:1})]),_:1}),s(t(p),null,{default:o(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(g),{class:"text-sm font-medium"},{default:o(()=>[...e[6]||(e[6]=[i("Permisos",-1)])]),_:1}),s(t(ot),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(c),null,{default:o(()=>{var d,r;return[l("div",pt,u((d=a.role.permissions)!=null&&d.includes("*")?"Todos":((r=a.role.permissions)==null?void 0:r.length)||0),1),e[7]||(e[7]=l("p",{class:"text-xs text-muted-foreground"},"permisos asignados",-1))]}),_:1})]),_:1}),s(t(p),null,{default:o(()=>[s(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(g),{class:"text-sm font-medium"},{default:o(()=>[...e[8]||(e[8]=[i("Segmentos",-1)])]),_:1}),s(t(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(c),null,{default:o(()=>{var d;return[l("div",_t,u(((d=a.role.segments)==null?void 0:d.length)||0),1),e[9]||(e[9]=l("p",{class:"text-xs text-muted-foreground"},"segmentos asociados",-1))]}),_:1})]),_:1})]),s(t(J),{defaultValue:"details",class:"space-y-4"},{default:o(()=>[s(t(K),null,{default:o(()=>[s(t(k),{value:"details"},{default:o(()=>[...e[10]||(e[10]=[i("Detalles",-1)])]),_:1}),s(t(k),{value:"permissions"},{default:o(()=>[...e[11]||(e[11]=[i("Permisos",-1)])]),_:1}),s(t(k),{value:"users"},{default:o(()=>[...e[12]||(e[12]=[i("Usuarios",-1)])]),_:1}),s(t(k),{value:"segments"},{default:o(()=>[...e[13]||(e[13]=[i("Segmentos",-1)])]),_:1})]),_:1}),s(t(h),{value:"details"},{default:o(()=>[s(t(p),null,{default:o(()=>[s(t(_),null,{default:o(()=>[s(t(g),null,{default:o(()=>[...e[14]||(e[14]=[i("Información del Rol",-1)])]),_:1})]),_:1}),s(t(c),{class:"space-y-4"},{default:o(()=>{var d;return[l("div",gt,[l("div",null,[e[15]||(e[15]=l("p",{class:"text-sm font-medium text-muted-foreground"},"ID del Rol",-1)),l("p",ct,u(a.role.id),1)]),l("div",null,[e[16]||(e[16]=l("p",{class:"text-sm font-medium text-muted-foreground"},"Nombre Interno",-1)),l("p",vt,u(a.role.name),1)]),l("div",null,[e[17]||(e[17]=l("p",{class:"text-sm font-medium text-muted-foreground"},"Creado",-1)),l("p",xt,u(A(a.role.created_at)),1)]),l("div",null,[e[18]||(e[18]=l("p",{class:"text-sm font-medium text-muted-foreground"},"Última Actualización",-1)),l("p",yt,u(A(a.role.updated_at)),1)])]),a.role.description?(n(),m("div",bt,[e[19]||(e[19]=l("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),l("p",$t,u(a.role.description),1)])):V("",!0),(d=a.role.allowed_modules)!=null&&d.length?(n(),m("div",wt,[e[20]||(e[20]=l("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Módulos Permitidos",-1)),l("div",kt,[(n(!0),m(x,null,y(a.role.allowed_modules,r=>(n(),f(t(v),{key:r,variant:"outline"},{default:o(()=>[i(u(r),1)]),_:2},1024))),128))])])):V("",!0)]}),_:1})]),_:1})]),_:1}),s(t(h),{value:"permissions"},{default:o(()=>[s(t(p),null,{default:o(()=>[s(t(_),null,{default:o(()=>[s(t(g),null,{default:o(()=>[...e[21]||(e[21]=[i("Permisos Asignados",-1)])]),_:1}),s(t(R),null,{default:o(()=>[...e[22]||(e[22]=[i(" Lista detallada de permisos organizados por módulo ",-1)])]),_:1})]),_:1}),s(t(c),null,{default:o(()=>{var d,r;return[(d=a.role.permissions)!=null&&d.includes("*")?(n(),m("div",ht,[s(t(j),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e[23]||(e[23]=l("p",{class:"text-lg font-semibold"},"Acceso Total",-1)),e[24]||(e[24]=l("p",{class:"text-sm text-muted-foreground"},"Este rol tiene todos los permisos del sistema",-1))])):(r=a.role.permissions)!=null&&r.length?(n(),m("div",St,[(n(!0),m(x,null,y(z(),(q,C)=>(n(),m("div",{key:C,class:"border rounded-lg p-4"},[l("h4",Pt,u(T(C)),1),l("div",At,[(n(!0),m(x,null,y(q,D=>(n(),f(t(v),{key:`${C}.${D}`,variant:I(D)},{default:o(()=>[i(u(D),1)]),_:2},1032,["variant"]))),128))])]))),128))])):(n(),m("div",Ct," No hay permisos asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(t(h),{value:"users"},{default:o(()=>[s(t(p),null,{default:o(()=>[s(t(_),null,{default:o(()=>[s(t(g),null,{default:o(()=>[...e[25]||(e[25]=[i("Usuarios con este Rol",-1)])]),_:1}),s(t(R),null,{default:o(()=>[...e[26]||(e[26]=[i(" Lista de usuarios que tienen asignado este rol ",-1)])]),_:1})]),_:1}),s(t(c),null,{default:o(()=>{var d;return[(d=a.role.users)!=null&&d.length?(n(),f(t(O),{key:0},{default:o(()=>[s(t(Q),null,{default:o(()=>[s(t(U),null,{default:o(()=>[s(t(S),null,{default:o(()=>[...e[27]||(e[27]=[i("Usuario",-1)])]),_:1}),s(t(S),null,{default:o(()=>[...e[28]||(e[28]=[i("Email",-1)])]),_:1}),s(t(S),null,{default:o(()=>[...e[29]||(e[29]=[i("Fecha de Asignación",-1)])]),_:1}),s(t(S),{class:"text-right"},{default:o(()=>[...e[30]||(e[30]=[i("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(t(W),null,{default:o(()=>[(n(!0),m(x,null,y(a.role.users,r=>(n(),f(t(U),{key:r.id},{default:o(()=>[s(t(P),null,{default:o(()=>[l("div",Dt,[s(t(X),{class:"h-8 w-8"},{default:o(()=>[r.avatar_url?(n(),f(t(Y),{key:0,src:r.avatar_url,alt:r.name},null,8,["src","alt"])):V("",!0),s(t(Z),null,{default:o(()=>[i(u(B(r.name)),1)]),_:2},1024)]),_:2},1024),l("span",Vt,u(r.name),1)])]),_:2},1024),s(t(P),null,{default:o(()=>[i(u(r.email),1)]),_:2},1024),s(t(P),null,{default:o(()=>[i(u(A(r.created_at)),1)]),_:2},1024),s(t(P),{class:"text-right"},{default:o(()=>[s(t($),{href:`/admin/users/${r.id}`},{default:o(()=>[s(t(w),{size:"sm",variant:"ghost"},{default:o(()=>[...e[31]||(e[31]=[i(" Ver Usuario ",-1)])]),_:1})]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(n(),m("div",Rt," No hay usuarios asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(t(h),{value:"segments"},{default:o(()=>[s(t(p),null,{default:o(()=>[s(t(_),null,{default:o(()=>[s(t(g),null,{default:o(()=>[...e[32]||(e[32]=[i("Segmentos Asociados",-1)])]),_:1}),s(t(R),null,{default:o(()=>[...e[33]||(e[33]=[i(" Segmentos que delimitan el alcance de datos para este rol ",-1)])]),_:1})]),_:1}),s(t(c),null,{default:o(()=>{var d;return[(d=a.role.segments)!=null&&d.length?(n(),m("div",Ut,[(n(!0),m(x,null,y(a.role.segments,r=>(n(),m("div",{key:r.id,class:"flex items-start justify-between p-4 border rounded-lg"},[l("div",null,[l("h4",jt,u(r.name),1),l("p",Lt,u(r.description||"Sin descripción"),1),l("div",Nt,[s(t(v),{variant:"outline"},{default:o(()=>[i(u(r.user_count||0)+" usuarios ",1)]),_:2},1024),s(t(v),{variant:r.is_dynamic?"default":"secondary"},{default:o(()=>[i(u(r.is_dynamic?"Dinámico":"Estático"),1)]),_:2},1032,["variant"])])]),s(t($),{href:`/admin/segments/${r.id}`},{default:o(()=>[s(t(w),{size:"sm",variant:"ghost"},{default:o(()=>[...e[34]||(e[34]=[i(" Ver Segmento ",-1)])]),_:1})]),_:2},1032,["href"])]))),128))])):(n(),m("div",Et," No hay segmentos asociados a este rol "))]}),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}))}});export{Le as default};
