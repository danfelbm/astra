import{d as y,r as c,u as L,c as _,p as E,o as N,b as v,m as f,w as d,e as a,g as l,f as e,q as P,l as h,h as n,i as I,F as k,k as A,t as U,j}from"./app-7xyR-m9k.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-Dxck4ipq.js";import{_ as q}from"./TextLink.vue_vue_type_script_setup_true_lang-DTjge71S.js";import{_ as D}from"./createLucideIcon-BHW7GH2w.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-C-QPGjnN.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-BiVTJ9Rx.js";import{_ as T,a as B,b as M,c as R,d as F}from"./SelectValue.vue_vue_type_script_setup_true_lang-CHqw9Jjt.js";import{_ as S}from"./SPhoneInput.vue_vue_type_script_setup_true_lang-BOWq6rMs.js";import{_ as G}from"./GeographicSelector.vue_vue_type_script_setup_true_lang-DOGNokK7.js";import{_ as Y}from"./AuthLayout.vue_vue_type_script_setup_true_lang-CnCMDHtk.js";import{L as Z}from"./loader-circle-DRNB-GiR.js";import"./index-GgSRogrh.js";import"./VisuallyHidden-nlSwqmSO.js";import"./check-CZAJcmH0.js";import"./floating-ui.vue-D7a9M-CI.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-D57tk1bY.js";import"./index-BbqVYz-X.js";import"./search-Cr873TIO.js";import"./useKbd-kRIii9yh.js";import"./utils-1mOUf2wR.js";import"./VisuallyHiddenInput-BJeveenM.js";import"./chevrons-up-down-BRk5CKI8.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-CReuLQBz.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B_XwzmD4.js";const z={class:"grid gap-6"},H={class:"grid gap-2"},J={class:"grid gap-2"},K={class:"grid gap-2"},O={class:"flex items-center"},Q={class:"grid gap-2"},W={class:"grid gap-2"},X={class:"text-center text-sm text-muted-foreground"},Le=y({__name:"Register",setup(ee){const C=[{value:"CC",label:"CC (Cédula de Ciudadanía)"},{value:"TI",label:"TI (Tarjeta de Identidad)"},{value:"CE",label:"CE (Cédula de Extranjería)"},{value:"PA",label:"PA (Pasaporte)"}],V=c([]);c([]);const o=L({name:"",email:"",tipo_documento:"CC",documento_identidad:"",telefono:"",territorio_id:null,departamento_id:null,municipio_id:null,localidad_id:null}),x=_(()=>o.tipo_documento==="PA"?/^[A-Z0-9]+$/i:/^[0-9]+$/),b=_(()=>o.tipo_documento==="PA"?"text":"numeric"),s=c("");E(()=>o.documento_identidad,r=>{r&&!x.value.test(r)?o.tipo_documento==="PA"?s.value="El pasaporte debe contener solo letras y números":s.value="El documento debe contener solo números":s.value=""});const p=_(()=>o.territorio_id===2),$=r=>{o.territorio_id=r.territorio_id||null,o.territorio_id===2?(o.departamento_id=35,o.localidad_id=null):(o.departamento_id=r.departamento_id||null,o.localidad_id=r.localidad_id||null),o.municipio_id=r.municipio_id||null};N(async()=>{try{const t=await(await fetch("/api/public/geographic/territorios")).json();V.value=t}catch(r){console.error("Error cargando datos geográficos:",r)}});const w=()=>{s.value="",o.post(route("register"))};return(r,t)=>(f(),v(Y,{title:"Crear una cuenta",description:"Ingresa tus datos para crear tu cuenta"},{default:d(()=>[a(e(P),{title:"Registro"}),l("form",{onSubmit:h(w,["prevent"]),class:"flex flex-col gap-6"},[l("div",z,[l("div",H,[a(e(u),{for:"name"},{default:d(()=>[...t[5]||(t[5]=[n("Nombre completo",-1)])]),_:1}),a(e(g),{id:"name",type:"text",required:"",autofocus:"",tabindex:"1",autocomplete:"name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(o).name=i),placeholder:"Nombre completo"},null,8,["modelValue"]),a(m,{message:e(o).errors.name},null,8,["message"])]),l("div",J,[a(e(u),{for:"email"},{default:d(()=>[...t[6]||(t[6]=[n("Correo electrónico",-1)])]),_:1}),a(e(g),{id:"email",type:"email",required:"",tabindex:"2",autocomplete:"email",modelValue:e(o).email,"onUpdate:modelValue":t[1]||(t[1]=i=>e(o).email=i),placeholder:"correo@ejemplo.com"},null,8,["modelValue"]),a(m,{message:e(o).errors.email},null,8,["message"])]),l("div",K,[a(e(u),{for:"documento_identidad"},{default:d(()=>[...t[7]||(t[7]=[n("Número de documento",-1)])]),_:1}),l("div",O,[a(e(T),{modelValue:e(o).tipo_documento,"onUpdate:modelValue":t[2]||(t[2]=i=>e(o).tipo_documento=i),required:""},{default:d(()=>[a(e(B),{id:"tipo_documento",tabindex:"3",class:"rounded-e-none rounded-s-lg w-18"},{default:d(()=>[a(e(M),{placeholder:"CC"})]),_:1}),a(e(R),null,{default:d(()=>[(f(),I(k,null,A(C,i=>a(e(F),{key:i.value,value:i.value},{default:d(()=>[n(U(i.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"]),a(e(g),{id:"documento_identidad",class:"rounded-s-none rounded-e-lg",type:(b.value==="numeric","text"),inputmode:b.value,required:"",tabindex:"4",autocomplete:"off",modelValue:e(o).documento_identidad,"onUpdate:modelValue":t[3]||(t[3]=i=>e(o).documento_identidad=i),placeholder:"Número de documento"},null,8,["type","inputmode","modelValue"])]),a(m,{message:s.value||e(o).errors.documento_identidad||e(o).errors.tipo_documento},null,8,["message"])]),l("div",Q,[a(e(u),{for:"telefono"},{default:d(()=>[...t[8]||(t[8]=[n("Teléfono",-1)])]),_:1}),a(e(S),{modelValue:e(o).telefono,"onUpdate:modelValue":t[4]||(t[4]=i=>e(o).telefono=i)},null,8,["modelValue"]),a(m,{message:e(o).errors.telefono},null,8,["message"])]),l("div",W,[a(G,{modelValue:{territorio_id:e(o).territorio_id,departamento_id:e(o).departamento_id,municipio_id:e(o).municipio_id,localidad_id:e(o).localidad_id},"onUpdate:modelValue":$,mode:"single",showCard:!1,description:"Selecciona tu ubicación",departamentoLabel:p.value?"Circunscripción":"Departamento",municipioLabel:p.value?"País":"Municipio",showLocalidad:!p.value,showDepartamento:!0},null,8,["modelValue","departamentoLabel","municipioLabel","showLocalidad"]),a(m,{message:e(o).errors.territorio_id||e(o).errors.departamento_id||e(o).errors.municipio_id||e(o).errors.localidad_id},null,8,["message"])]),a(e(D),{type:"submit",class:"mt-2 w-full",tabindex:"6",disabled:e(o).processing},{default:d(()=>[e(o).processing?(f(),v(e(Z),{key:0,class:"h-4 w-4 animate-spin"})):j("",!0),t[9]||(t[9]=n(" Crear cuenta ",-1))]),_:1},8,["disabled"])]),l("div",X,[t[11]||(t[11]=n(" ¿Ya tienes una cuenta? ",-1)),a(q,{href:r.route("login"),class:"underline underline-offset-4",tabindex:"7"},{default:d(()=>[...t[10]||(t[10]=[n("Iniciar sesión",-1)])]),_:1},8,["href"])])],32)]),_:1}))}});export{Le as default};
