import{d as G,c as N,b as u,e as r,w as a,g as o,j as m,f as i,u as t,P as C,h as l,q as D,t as n,i as d,F as z,k as A}from"./app-BY-r2Ws5.js";import{_ as H}from"./AdminLayout.vue_vue_type_script_setup_true_lang-rIgIF5sh.js";import{_,a as g,b as h,c as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-CAAlIxJ_.js";import{_ as J}from"./CardDescription.vue_vue_type_script_setup_true_lang-DLnyUN9n.js";import{_ as f}from"./createLucideIcon-CuqvJpoP.js";import{_ as E}from"./index-CKrUXTNa.js";import{_ as I,a as L}from"./index-D0NwpEhz.js";import{F as $}from"./file-CHjkYlt4.js";import{M as T}from"./music-CS6PJptZ.js";import{V as K}from"./video-B7god3FO.js";import{I as Q}from"./image-B5nIph6k.js";import{C as j}from"./circle-x-CA-hmulT.js";import{C as M}from"./circle-check-big-DgoTdA0D.js";import{C as O}from"./clock-6IXxtqd_.js";import{A as W}from"./arrow-left-DI00bHbv.js";import{D as x}from"./download-CnAcELYQ.js";import{T as Y}from"./triangle-alert-DhR_QUwO.js";import{E as P}from"./eye-JtFQHEV4.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-B64SlObz.js";import"./index-DhVu0RGh.js";import"./floating-ui.vue-BpY56mSN.js";import"./x-JNLCp3Uv.js";import"./Input.vue_vue_type_script_setup_true_lang-BnypupD2.js";import"./index-DRWGvvY6.js";import"./index-CGlrNU9S.js";import"./shield-CRuLCvXm.js";import"./user-BgqE1Zkk.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-B0yrlx2o.js";import"./chevron-right-DkYrX6FT.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Cygyc5vA.js";import"./VisuallyHidden-1Cdwj0Pt.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Cpe2WH2y.js";import"./check-BSe6xi77.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-DbHCruY6.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-JI9OXMAX.js";import"./index-DVn_h5FB.js";import"./circle-alert-CgjjeQDT.js";import"./map-pin-CpkBR1pn.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Bpz2XpR4.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DrT1Zyq9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-BsDw64Ix.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CaOGrtW4.js";import"./tag-DiCAiqSs.js";import"./users-BGHM2IRz.js";import"./target-CU7JXj6g.js";import"./vote-CREYfVxf.js";import"./folder-open-Cx_GaOWD.js";import"./send-ujKgtHD2.js";import"./file-text-Bwh_2xGa.js";import"./briefcase-B-mLRrT1.js";import"./calendar-DCUV9fWL.js";import"./megaphone-DSOTNa9p.js";import"./user-check-CrMSCT13.js";import"./clipboard-list-BBWsAed4.js";import"./mail-CpKa4mN-.js";import"./message-square-CN6ebVv9.js";import"./external-link-Ccc-LFWo.js";import"./panel-left-BqYCaI1l.js";import"./index-LUT0GNrN.js";const Z={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ee={class:"flex justify-between items-start"},te={class:"flex items-center gap-4 mt-2"},oe={class:"text-muted-foreground"},se={class:"flex gap-2"},ie={key:0},ae={class:"grid gap-6 lg:grid-cols-3"},re={class:"lg:col-span-2 space-y-6"},ne={key:0,class:"ml-2"},de={class:"space-y-4"},le={key:0,class:"space-y-4"},me={key:0,class:"text-center"},ce=["src","alt"],ue={class:"text-sm text-muted-foreground mt-2"},ve={key:1,class:"text-center"},pe=["src"],fe={class:"text-sm text-muted-foreground mt-2"},_e={key:2,class:"flex flex-col items-center gap-4"},ge={class:"flex items-center gap-3"},he={class:"text-left"},ye={class:"font-medium"},be=["src"],xe={key:3,class:"flex items-center gap-4 py-4"},we={class:"flex-1"},ke={class:"font-medium"},Ce={class:"text-sm text-muted-foreground"},$e={key:1,class:"bg-muted/30 rounded-lg p-4"},De={key:0,class:"text-center"},ze=["src","alt"],Ae={key:1,class:"text-center"},Ee=["src"],Te={key:2,class:"flex flex-col items-center gap-4"},Se=["src"],Ve={key:3,class:"flex flex-col items-center gap-4 py-8"},Fe={class:"text-center"},Be={class:"font-medium"},Ne={class:"text-sm text-muted-foreground"},Ie={key:0},Le={key:2,class:"text-center py-8 text-muted-foreground"},je={class:"whitespace-pre-wrap"},Me={class:"space-y-6"},Oe={class:"font-medium"},Pe={key:0,class:"text-sm text-muted-foreground"},Re={key:0},qe={class:"font-medium"},Ue={key:0,class:"text-sm text-muted-foreground mt-1"},Xe={class:"space-y-2"},Ge={class:"font-medium text-sm"},He={class:"text-xs text-muted-foreground"},Je={class:"text-sm"},Ke={class:"text-sm"},Qe={key:0},We={class:"space-y-2 max-h-32 overflow-y-auto"},Ye={class:"truncate flex-1 mr-2"},Ze={key:1},et={class:"text-sm"},tt={key:2},ot={class:"text-sm"},st={class:"text-sm"},it={class:"text-xs text-muted-foreground"},at={class:"text-sm"},rt={key:3},nt={class:"text-sm"},dt={key:0,class:"text-xs text-muted-foreground"},lt={class:"text-sm whitespace-pre-wrap"},ho=G({__name:"Show",props:{contrato:{},evidencia:{}},setup(R){const p=R,q=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:p.contrato.nombre,href:`/admin/contratos/${p.contrato.id}`},{title:"Evidencia",href:"#"}],S=N(()=>({imagen:Q,video:K,audio:T,documento:$})[p.evidencia.tipo_evidencia]||$),V=N(()=>({pendiente:{color:"secondary",icon:O,bgClass:"bg-yellow-50",textClass:"text-yellow-800"},aprobada:{color:"success",icon:M,bgClass:"bg-green-50",textClass:"text-green-800"},rechazada:{color:"destructive",icon:j,bgClass:"bg-red-50",textClass:"text-red-800"}})[p.evidencia.estado]||{color:"default",icon:O,bgClass:"bg-gray-50",textClass:"text-gray-800"}),F=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",U=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",b=e=>{const s=e||p.evidencia.archivo_url;s&&window.open(s,"_blank")},X=()=>{var e;((e=p.evidencia.archivos_urls)==null?void 0:e.length)>0?p.evidencia.archivos_urls.forEach((s,w)=>{setTimeout(()=>{window.open(s,"_blank")},w*500)}):p.evidencia.archivo_url&&b()};return(e,s)=>(r(),u(H,{breadcrumbs:q},{default:a(()=>{var w;return[o("div",Z,[o("div",ee,[o("div",null,[i(t(C),{href:`/admin/contratos/${e.contrato.id}`,class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:a(()=>[i(t(W),{class:"w-4 h-4 mr-2"}),s[0]||(s[0]=l(" Volver al Contrato ",-1))]),_:1},8,["href"]),s[1]||(s[1]=o("h2",{class:"text-3xl font-bold tracking-tight"},"Evidencia",-1)),o("div",te,[i(t(E),{variant:V.value.color},{default:a(()=>[(r(),u(D(V.value.icon),{class:"w-3 h-3 mr-1"})),l(" "+n(e.evidencia.estado_label),1)]),_:1},8,["variant"]),i(t(E),{variant:"outline"},{default:a(()=>[(r(),u(D(S.value),{class:"w-3 h-3 mr-1"})),l(" "+n(e.evidencia.tipo_evidencia_label),1)]),_:1}),i(t(E),{variant:"secondary"},{default:a(()=>[l(n(e.evidencia.tiene_multiples_archivos?`${e.evidencia.total_archivos} archivos`:"1 archivo"),1)]),_:1}),o("span",oe," Subida "+n(U(e.evidencia.created_at)),1)])]),o("div",se,[e.evidencia.tiene_multiples_archivos?(r(),u(t(f),{key:0,onClick:X,variant:"outline"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),l(" Descargar Todos ("+n(e.evidencia.total_archivos)+") ",1)]),_:1})):e.evidencia.archivo_url?(r(),u(t(f),{key:1,onClick:b,variant:"outline"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),s[2]||(s[2]=l(" Descargar ",-1))]),_:1})):m("",!0)])]),e.evidencia.estado==="rechazada"?(r(),u(t(I),{key:0,class:"border-red-200 bg-red-50"},{default:a(()=>[i(t(j),{class:"h-4 w-4 text-red-600"}),i(t(L),{class:"text-red-800"},{default:a(()=>[s[3]||(s[3]=l(" Esta evidencia ha sido rechazada. ",-1)),e.evidencia.observaciones_admin?(r(),d("span",ie," Motivo: "+n(e.evidencia.observaciones_admin),1)):m("",!0)]),_:1})]),_:1})):m("",!0),e.evidencia.estado==="aprobada"?(r(),u(t(I),{key:1,class:"border-green-200 bg-green-50"},{default:a(()=>[i(t(M),{class:"h-4 w-4 text-green-600"}),i(t(L),{class:"text-green-800"},{default:a(()=>[...s[4]||(s[4]=[l(" Esta evidencia ha sido aprobada exitosamente. ",-1)])]),_:1})]),_:1})):m("",!0),o("div",ae,[o("div",re,[i(t(_),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),{class:"flex items-center gap-2"},{default:a(()=>[(r(),u(D(S.value),{class:"w-5 h-5"})),s[5]||(s[5]=l(" Archivo de Evidencia ",-1))]),_:1}),i(t(J),null,{default:a(()=>[l(n(e.evidencia.archivo_nombre||"Archivo subido")+" ",1),e.evidencia.archivo_size_formatted?(r(),d("span",ne," ("+n(e.evidencia.archivo_size_formatted)+") ",1)):m("",!0)]),_:1})]),_:1}),i(t(y),null,{default:a(()=>{var v;return[o("div",de,[((v=e.evidencia.archivos_info)==null?void 0:v.length)>0?(r(),d("div",le,[(r(!0),d(z,null,A(e.evidencia.archivos_info,(c,k)=>(r(),d("div",{key:c.indice,class:"bg-muted/30 rounded-lg p-4 relative group"},[i(t(f),{onClick:B=>b(c.url),variant:"outline",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},{default:a(()=>[i(t(x),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),e.evidencia.es_imagen?(r(),d("div",me,[o("img",{src:c.url,alt:c.nombre,class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"},null,8,ce),o("p",ue,n(c.nombre),1)])):e.evidencia.es_video?(r(),d("div",ve,[o("video",{src:c.url,controls:"",class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,pe),o("p",fe,n(c.nombre),1)])):e.evidencia.es_audio?(r(),d("div",_e,[o("div",ge,[i(t(T),{class:"w-12 h-12 text-muted-foreground"}),o("div",he,[o("p",ye,n(c.nombre),1),s[6]||(s[6]=o("p",{class:"text-sm text-muted-foreground"},"Archivo de audio",-1))])]),o("audio",{src:c.url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,be)])):(r(),d("div",xe,[i(t($),{class:"w-12 h-12 text-muted-foreground flex-shrink-0"}),o("div",we,[o("p",ke,n(c.nombre),1),o("p",Ce,n(e.evidencia.tipo_evidencia_label),1)]),i(t(f),{onClick:B=>b(c.url),variant:"outline",size:"sm"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),s[7]||(s[7]=l(" Descargar ",-1))]),_:2},1032,["onClick"])]))]))),128))])):e.evidencia.archivo_url?(r(),d("div",$e,[e.evidencia.es_imagen?(r(),d("div",De,[o("img",{src:e.evidencia.archivo_url,alt:e.evidencia.descripcion||"Evidencia",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"},null,8,ze)])):e.evidencia.es_video?(r(),d("div",Ae,[o("video",{src:e.evidencia.archivo_url,controls:"",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,Ee)])):e.evidencia.es_audio?(r(),d("div",Te,[i(t(T),{class:"w-16 h-16 text-muted-foreground"}),o("audio",{src:e.evidencia.archivo_url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Se)])):(r(),d("div",Ve,[i(t($),{class:"w-16 h-16 text-muted-foreground"}),o("div",Fe,[o("p",Be,n(e.evidencia.archivo_nombre),1),o("p",Ne,[l(n(e.evidencia.tipo_evidencia_label)+" ",1),e.evidencia.archivo_size_formatted?(r(),d("span",Ie," • "+n(e.evidencia.archivo_size_formatted),1)):m("",!0)])]),i(t(f),{onClick:b,variant:"outline"},{default:a(()=>[i(t(x),{class:"w-4 h-4 mr-2"}),s[8]||(s[8]=l(" Descargar para ver ",-1))]),_:1})]))])):(r(),d("div",Le,[i(t(Y),{class:"w-12 h-12 mx-auto mb-3"}),s[9]||(s[9]=o("p",null,"No se pudo cargar el archivo",-1))]))])]}),_:1})]),_:1}),e.evidencia.descripcion?(r(),u(t(_),{key:0},{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),null,{default:a(()=>[...s[10]||(s[10]=[l("Descripción",-1)])]),_:1})]),_:1}),i(t(y),null,{default:a(()=>[o("p",je,n(e.evidencia.descripcion),1)]),_:1})]),_:1})):m("",!0)]),o("div",Me,[i(t(_),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),null,{default:a(()=>[...s[11]||(s[11]=[l("Información del Contrato",-1)])]),_:1})]),_:1}),i(t(y),{class:"space-y-4"},{default:a(()=>[o("div",null,[s[12]||(s[12]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Contrato",-1)),o("p",Oe,n(e.contrato.nombre),1),e.contrato.numero_contrato?(r(),d("p",Pe," # "+n(e.contrato.numero_contrato),1)):m("",!0)]),e.contrato.proyecto?(r(),d("div",Re,[s[13]||(s[13]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Proyecto",-1)),i(t(C),{href:`/admin/proyectos/${e.contrato.proyecto.id}`,class:"text-sm text-primary hover:underline"},{default:a(()=>[l(n(e.contrato.proyecto.nombre),1)]),_:1},8,["href"])])):m("",!0),i(t(f),{href:`/admin/contratos/${e.contrato.id}`,as:t(C),variant:"outline",size:"sm",class:"w-full"},{default:a(()=>[i(t(P),{class:"w-4 h-4 mr-2"}),s[14]||(s[14]=l(" Ver Contrato ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),i(t(_),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),null,{default:a(()=>[...s[15]||(s[15]=[l("Obligación Contractual",-1)])]),_:1})]),_:1}),i(t(y),{class:"space-y-4"},{default:a(()=>[o("div",null,[o("p",qe,n(e.evidencia.obligacion.nombre),1),e.evidencia.obligacion.descripcion?(r(),d("p",Ue,n(e.evidencia.obligacion.descripcion),1)):m("",!0)]),i(t(f),{href:`/admin/obligaciones/${e.evidencia.obligacion.id}`,as:t(C),variant:"outline",size:"sm",class:"w-full"},{default:a(()=>[i(t(P),{class:"w-4 h-4 mr-2"}),s[16]||(s[16]=l(" Ver Obligación ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),((w=e.evidencia.entregables)==null?void 0:w.length)>0?(r(),u(t(_),{key:0},{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),null,{default:a(()=>[...s[17]||(s[17]=[l("Entregables Asociados",-1)])]),_:1})]),_:1}),i(t(y),null,{default:a(()=>[o("div",Xe,[(r(!0),d(z,null,A(e.evidencia.entregables,v=>(r(),d("div",{key:v.id,class:"p-3 bg-muted/30 rounded-lg"},[o("p",Ge,n(v.nombre),1),o("p",He,n(v.hito.nombre),1)]))),128))])]),_:1})]),_:1})):m("",!0),i(t(_),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),null,{default:a(()=>[l(n(e.evidencia.tiene_multiples_archivos?"Detalles de los Archivos":"Detalles del Archivo"),1)]),_:1})]),_:1}),i(t(y),{class:"space-y-3"},{default:a(()=>{var v,c;return[o("div",null,[s[18]||(s[18]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Tipo",-1)),o("p",Je,n(e.evidencia.tipo_evidencia_label),1)]),o("div",null,[s[19]||(s[19]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Cantidad",-1)),o("p",Ke,n(e.evidencia.total_archivos||1)+" archivo(s)",1)]),((v=e.evidencia.archivos_info)==null?void 0:v.length)>0?(r(),d("div",Qe,[s[20]||(s[20]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Archivos",-1)),o("div",We,[(r(!0),d(z,null,A(e.evidencia.archivos_info,k=>(r(),d("div",{key:k.indice,class:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded"},[o("span",Ye,n(k.nombre),1),i(t(f),{onClick:B=>b(k.url),size:"sm",variant:"ghost",class:"h-6 w-6 p-0"},{default:a(()=>[i(t(x),{class:"w-3 h-3"})]),_:2},1032,["onClick"])]))),128))])])):e.evidencia.archivo_size_formatted?(r(),d("div",Ze,[s[21]||(s[21]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Tamaño",-1)),o("p",et,n(e.evidencia.archivo_size_formatted),1)])):m("",!0),(c=e.evidencia.metadata)!=null&&c.mime_type?(r(),d("div",tt,[s[22]||(s[22]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Formato",-1)),o("p",ot,n(e.evidencia.metadata.mime_type),1)])):m("",!0),o("div",null,[s[23]||(s[23]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Subido por",-1)),o("p",st,n(e.evidencia.usuario.name),1),o("p",it,n(e.evidencia.usuario.email),1)]),o("div",null,[s[24]||(s[24]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Fecha de subida",-1)),o("p",at,n(F(e.evidencia.created_at)),1)]),e.evidencia.revisado_at?(r(),d("div",rt,[s[25]||(s[25]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Revisado",-1)),o("p",nt,n(F(e.evidencia.revisado_at)),1),e.evidencia.revisor?(r(),d("p",dt," por "+n(e.evidencia.revisor.name),1)):m("",!0)])):m("",!0)]}),_:1})]),_:1}),e.evidencia.observaciones_admin?(r(),u(t(_),{key:1},{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),null,{default:a(()=>[...s[26]||(s[26]=[l("Observaciones de Revisión",-1)])]),_:1})]),_:1}),i(t(y),null,{default:a(()=>[o("p",lt,n(e.evidencia.observaciones_admin),1)]),_:1})]),_:1})):m("",!0)])])])]}),_:1}))}});export{ho as default};
