import{_ as J}from"./AdminLayout.vue_vue_type_script_setup_true_lang-ED78Rhc6.js";import{d as K,r as k,c as O,i as d,e as u,f as t,u as s,p as Q,w as e,g as o,P as V,j as w,t as r,b as g,h as i,F as h,k as $,n as X,W as Y}from"./app-C_5cw02Z.js";import{_ as x}from"./createLucideIcon-C1-ueII9.js";import{_ as f,a as m,b as p,c as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-DAYOzAlV.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-BBLfbRtU.js";import{_ as v}from"./index-CI62N9Wr.js";import{_ as Z,a as ss,b as U,c as b,d as ts,e as y}from"./TableHeader.vue_vue_type_script_setup_true_lang-CM9ejLzC.js";import{_ as es,a as as,b as C,c as j}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-B4-PGocs.js";import{_ as os,a as ls}from"./index-jHDpEhjN.js";import{t as is}from"./index--WSTgxKp.js";import{A as rs}from"./arrow-left-DJtdoHjk.js";import{S as ns}from"./square-pen-BZUUxxSg.js";import{D as us}from"./download-BfrM88cj.js";import{E as M}from"./external-link-Cb7x8dfs.js";import{C as ds}from"./copy-D36xsNSX.js";import{F as A}from"./file-text-lgOJxEf1.js";import{U as F}from"./users-DICVxpIs.js";import{C as fs}from"./calendar-DLVOya8g.js";import{E as ms}from"./eye-lwBYEHXE.js";import{f as ps,e as _s}from"./es-BRx6Co7f.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BrCjHdDD.js";import"./index-BGaiQCRN.js";import"./floating-ui.vue-CALjbug4.js";import"./x-DatYouJm.js";import"./Input.vue_vue_type_script_setup_true_lang-C5gUJesf.js";import"./index-CLU4nd9N.js";import"./index-D5B37hcc.js";import"./shield-Ba4Iz-u6.js";import"./user-DdKvwohc.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-N-mClcNL.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BcNrNItn.js";import"./VisuallyHidden-Cpuq_Xq0.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DDKkZRCS.js";import"./check-DptbupV_.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-CYE62A-C.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CoylmcPy.js";import"./circle-alert-42uxDc8m.js";import"./map-pin-DuTf_XYk.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-NVyhuAa9.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-KuplsxXb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-aiSBZ2hF.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BdTLjYoj.js";import"./vote-Bvqvzywk.js";import"./briefcase-0u9Gc93S.js";import"./megaphone-CzG9SCwz.js";import"./user-check-N1K_MHa5.js";import"./panel-left-CCAcMCiL.js";import"./index-D-782rW0.js";import"./RovingFocusItem-Dxsh8ePB.js";import"./utils-Brnn4e8c.js";const cs={class:"p-6"},vs={class:"mb-6"},bs={class:"flex items-center justify-between mb-4"},ys={class:"flex items-center gap-2"},gs={class:"text-3xl font-bold"},xs={key:0,class:"text-muted-foreground"},ws={class:"flex gap-2"},hs={class:"flex items-center gap-2"},ks={class:"flex items-center gap-2"},$s={class:"bg-gray-100 px-2 py-1 rounded text-sm"},Cs={class:"flex gap-2"},js=["href"],Es={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Ts={class:"text-2xl font-bold"},Rs={class:"text-xs text-muted-foreground"},Vs={class:"text-2xl font-bold"},Ls={class:"text-2xl font-bold"},Us={class:"text-xs text-muted-foreground"},Ms={class:"text-2xl font-bold"},As={class:"space-y-4"},Fs={class:"space-y-2"},Hs={class:"text-sm font-medium"},Ps={class:"text-sm"},Ds={key:0,class:"text-center py-8"},Ns={key:2,class:"mt-4"},Ss={class:"flex items-center justify-center gap-1"},zs=["innerHTML"],Bs={class:"grid gap-6 md:grid-cols-2"},qs={class:"space-y-4"},Ws={class:"flex items-center justify-between"},Is={class:"font-bold"},Gs={class:"flex items-center justify-between"},Js={class:"font-bold"},Ks={class:"flex items-center justify-between"},Os={class:"font-bold"},Qs={class:"flex items-center justify-between"},Xs={class:"font-bold"},Ys={class:"space-y-4"},Zs={class:"flex items-center justify-between"},st={class:"font-bold"},tt={class:"flex items-center justify-between"},et={class:"font-bold"},at={class:"mt-4 pt-4 border-t"},ot={class:"flex items-center justify-between"},lt={class:"font-bold"},oe=K({__name:"Show",props:{formulario:{},respuestas:{}},setup(H){const c=H,P=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Formularios",href:"/admin/formularios"},{title:c.formulario.titulo,href:"#"}],E=k("resumen"),D=k(null),N=k(!1),S=()=>{Y.get(route("admin.formularios.edit",c.formulario.id))},z=()=>{window.location.href=route("admin.formularios.exportar",c.formulario.id)},B=()=>{navigator.clipboard.writeText(c.formulario.url_publica).then(()=>{is.success("URL copiada al portapapeles")})},q=l=>{D.value=l,N.value=!0},W=l=>ps(new Date(l),"d 'de' MMMM 'de' yyyy, HH:mm",{locale:_s}),I=l=>({publico:"Público",autenticado:"Autenticado",con_permiso:"Con Permiso"})[l]||l,G=l=>({borrador:"secondary",publicado:"default",archivado:"outline"})[l]||"secondary",T=O(()=>{const l=c.formulario.estadisticas.usuarios_unicos+c.formulario.estadisticas.visitantes_unicos;return l===0?0:Math.round(c.formulario.estadisticas.visitantes_unicos/l*100)});return(l,a)=>(u(),d(h,null,[t(s(Q),{title:l.formulario.titulo},null,8,["title"]),t(J,{breadcrumbs:P},{default:e(()=>[o("div",cs,[o("div",vs,[o("div",bs,[o("div",ys,[t(s(V),{href:l.route("admin.formularios.index")},{default:e(()=>[t(s(x),{variant:"ghost",size:"sm"},{default:e(()=>[t(s(rs),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),o("div",null,[o("h1",gs,r(l.formulario.titulo),1),l.formulario.descripcion?(u(),d("p",xs,r(l.formulario.descripcion),1)):w("",!0)])]),o("div",ws,[t(s(x),{variant:"outline",onClick:S},{default:e(()=>[t(s(ns),{class:"mr-2 h-4 w-4"}),a[1]||(a[1]=i(" Editar ",-1))]),_:1}),l.formulario.estadisticas.total_respuestas>0?(u(),g(s(x),{key:0,onClick:z},{default:e(()=>[t(s(us),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=i(" Exportar CSV ",-1))]),_:1})):w("",!0)])]),o("div",hs,[t(s(v),{variant:G(l.formulario.estado)},{default:e(()=>[i(r(l.formulario.estado),1)]),_:1},8,["variant"]),t(s(v),{variant:"outline"},{default:e(()=>[i(r(I(l.formulario.tipo_acceso)),1)]),_:1}),l.formulario.categoria?(u(),g(s(v),{key:0,variant:"secondary"},{default:e(()=>[i(r(l.formulario.categoria.nombre),1)]),_:1})):w("",!0),t(s(v),{variant:l.formulario.activo?"default":"destructive"},{default:e(()=>[i(r(l.formulario.activo?"Activo":"Inactivo"),1)]),_:1},8,["variant"])])]),t(s(os),{class:"mb-6"},{default:e(()=>[t(s(ls),{class:"flex items-center justify-between"},{default:e(()=>[o("div",ks,[t(s(M),{class:"h-4 w-4"}),a[3]||(a[3]=o("span",{class:"font-medium"},"URL Pública:",-1)),o("code",$s,r(l.formulario.url_publica),1)]),o("div",Cs,[t(s(x),{variant:"ghost",size:"sm",onClick:B},{default:e(()=>[t(s(ds),{class:"h-4 w-4"})]),_:1}),o("a",{href:l.formulario.url_publica,target:"_blank"},[t(s(x),{variant:"ghost",size:"sm"},{default:e(()=>[t(s(M),{class:"h-4 w-4"})]),_:1})],8,js)])]),_:1})]),_:1}),t(s(es),{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=n=>E.value=n),class:"space-y-6"},{default:e(()=>[t(s(as),null,{default:e(()=>[t(s(C),{value:"resumen"},{default:e(()=>[...a[4]||(a[4]=[i("Resumen",-1)])]),_:1}),t(s(C),{value:"respuestas"},{default:e(()=>[i(" Respuestas ("+r(l.formulario.estadisticas.total_respuestas)+") ",1)]),_:1}),t(s(C),{value:"estadisticas"},{default:e(()=>[...a[5]||(a[5]=[i("Estadísticas",-1)])]),_:1})]),_:1}),t(s(j),{value:"resumen",class:"space-y-6"},{default:e(()=>[o("div",Es,[t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(p),{class:"text-sm font-medium"},{default:e(()=>[...a[6]||(a[6]=[i(" Total Respuestas ",-1)])]),_:1}),t(s(A),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(_),null,{default:e(()=>[o("div",Ts,r(l.formulario.estadisticas.total_respuestas),1),o("p",Rs,r(l.formulario.estadisticas.respuestas_hoy)+" hoy ",1)]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(p),{class:"text-sm font-medium"},{default:e(()=>[...a[7]||(a[7]=[i(" Usuarios Únicos ",-1)])]),_:1}),t(s(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(_),null,{default:e(()=>[o("div",Vs,r(l.formulario.estadisticas.usuarios_unicos),1),a[8]||(a[8]=o("p",{class:"text-xs text-muted-foreground"}," Usuarios registrados ",-1))]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(p),{class:"text-sm font-medium"},{default:e(()=>[...a[9]||(a[9]=[i(" Visitantes ",-1)])]),_:1}),t(s(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(_),null,{default:e(()=>[o("div",Ls,r(l.formulario.estadisticas.visitantes_unicos),1),o("p",Us,r(T.value)+"% del total ",1)]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(p),{class:"text-sm font-medium"},{default:e(()=>[...a[10]||(a[10]=[i(" Esta Semana ",-1)])]),_:1}),t(s(fs),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(_),null,{default:e(()=>[o("div",Ms,r(l.formulario.estadisticas.respuestas_semana),1),a[11]||(a[11]=o("p",{class:"text-xs text-muted-foreground"}," Respuestas ",-1))]),_:1})]),_:1})]),t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(p),null,{default:e(()=>[...a[12]||(a[12]=[i("Configuración del Formulario",-1)])]),_:1}),t(s(L),null,{default:e(()=>[...a[13]||(a[13]=[i(" Estructura y campos del formulario ",-1)])]),_:1})]),_:1}),t(s(_),null,{default:e(()=>[o("div",As,[o("div",null,[a[15]||(a[15]=o("h4",{class:"font-medium mb-2"},"Campos del formulario:",-1)),o("div",Fs,[(u(!0),d(h,null,$(l.formulario.configuracion_campos,(n,R)=>(u(),d("div",{key:n.id,class:"flex items-center gap-2 p-2 bg-gray-50 rounded"},[o("span",Hs,r(R+1)+".",1),o("span",Ps,r(n.title),1),t(s(v),{variant:"outline",class:"text-xs"},{default:e(()=>[i(r(n.type),1)]),_:2},1024),n.required?(u(),g(s(v),{key:0,variant:"destructive",class:"text-xs"},{default:e(()=>[...a[14]||(a[14]=[i(" Requerido ",-1)])]),_:1})):w("",!0)]))),128))])])])]),_:1})]),_:1})]),_:1}),t(s(j),{value:"respuestas",class:"space-y-6"},{default:e(()=>[t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(p),null,{default:e(()=>[...a[16]||(a[16]=[i("Respuestas Recibidas",-1)])]),_:1}),t(s(L),null,{default:e(()=>[...a[17]||(a[17]=[i(" Lista de todas las respuestas enviadas ",-1)])]),_:1})]),_:1}),t(s(_),null,{default:e(()=>[l.respuestas.data.length===0?(u(),d("div",Ds,[t(s(A),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a[18]||(a[18]=o("p",{class:"text-muted-foreground"}," No hay respuestas aún ",-1))])):(u(),g(s(Z),{key:1},{default:e(()=>[t(s(ss),null,{default:e(()=>[t(s(U),null,{default:e(()=>[t(s(b),null,{default:e(()=>[...a[19]||(a[19]=[i("Código",-1)])]),_:1}),t(s(b),null,{default:e(()=>[...a[20]||(a[20]=[i("Nombre",-1)])]),_:1}),t(s(b),null,{default:e(()=>[...a[21]||(a[21]=[i("Email",-1)])]),_:1}),t(s(b),null,{default:e(()=>[...a[22]||(a[22]=[i("Tipo",-1)])]),_:1}),t(s(b),null,{default:e(()=>[...a[23]||(a[23]=[i("Tiempo",-1)])]),_:1}),t(s(b),null,{default:e(()=>[...a[24]||(a[24]=[i("Fecha",-1)])]),_:1}),t(s(b),null,{default:e(()=>[...a[25]||(a[25]=[i("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(s(ts),null,{default:e(()=>[(u(!0),d(h,null,$(l.respuestas.data,n=>(u(),g(s(U),{key:n.id},{default:e(()=>[t(s(y),{class:"font-mono text-xs"},{default:e(()=>[i(r(n.codigo_confirmacion),1)]),_:2},1024),t(s(y),null,{default:e(()=>[i(r(n.nombre),1)]),_:2},1024),t(s(y),null,{default:e(()=>[i(r(n.email||"-"),1)]),_:2},1024),t(s(y),null,{default:e(()=>[t(s(v),{variant:"outline"},{default:e(()=>[i(r(n.es_visitante?"Visitante":"Usuario"),1)]),_:2},1024)]),_:2},1024),t(s(y),null,{default:e(()=>[i(r(n.tiempo_llenado||"-"),1)]),_:2},1024),t(s(y),{class:"text-sm"},{default:e(()=>[i(r(W(n.enviado_en)),1)]),_:2},1024),t(s(y),null,{default:e(()=>[t(s(x),{variant:"ghost",size:"sm",onClick:R=>q(n)},{default:e(()=>[t(s(ms),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),l.respuestas.links&&l.respuestas.links.length>3?(u(),d("div",Ns,[o("nav",Ss,[(u(!0),d(h,null,$(l.respuestas.links,n=>(u(),d(h,{key:n.label},[n.url?(u(),g(s(V),{key:0,href:n.url,class:X(["px-3 py-2 text-sm rounded-md",n.active?"bg-primary text-primary-foreground":"bg-white hover:bg-gray-50 border"]),innerHTML:n.label},null,8,["href","class","innerHTML"])):(u(),d("span",{key:1,class:"px-3 py-2 text-sm text-gray-400",innerHTML:n.label},null,8,zs))],64))),128))])])):w("",!0)]),_:1})]),_:1})]),_:1}),t(s(j),{value:"estadisticas",class:"space-y-6"},{default:e(()=>[o("div",Bs,[t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(p),null,{default:e(()=>[...a[26]||(a[26]=[i("Respuestas por Período",-1)])]),_:1})]),_:1}),t(s(_),null,{default:e(()=>[o("div",qs,[o("div",Ws,[a[27]||(a[27]=o("span",null,"Hoy",-1)),o("span",Is,r(l.formulario.estadisticas.respuestas_hoy),1)]),o("div",Gs,[a[28]||(a[28]=o("span",null,"Esta semana",-1)),o("span",Js,r(l.formulario.estadisticas.respuestas_semana),1)]),o("div",Ks,[a[29]||(a[29]=o("span",null,"Este mes",-1)),o("span",Os,r(l.formulario.estadisticas.respuestas_mes),1)]),o("div",Qs,[a[30]||(a[30]=o("span",null,"Total",-1)),o("span",Xs,r(l.formulario.estadisticas.total_respuestas),1)])])]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(p),null,{default:e(()=>[...a[31]||(a[31]=[i("Tipo de Usuarios",-1)])]),_:1})]),_:1}),t(s(_),null,{default:e(()=>[o("div",Ys,[o("div",Zs,[a[32]||(a[32]=o("span",null,"Usuarios registrados",-1)),o("span",st,r(l.formulario.estadisticas.usuarios_unicos),1)]),o("div",tt,[a[33]||(a[33]=o("span",null,"Visitantes",-1)),o("span",et,r(l.formulario.estadisticas.visitantes_unicos),1)]),o("div",at,[o("div",ot,[a[34]||(a[34]=o("span",null,"% Visitantes",-1)),o("span",lt,r(T.value)+"%",1)])])])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{oe as default};
