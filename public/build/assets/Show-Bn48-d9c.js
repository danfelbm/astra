import{_ as F}from"./AdminLayout.vue_vue_type_script_setup_true_lang-B30diyEW.js";import{d as M,b as p,w as l,e as s,g as o,f as t,q as G,t as u,h as a,m as r,v as w,i as f,j as R,F as y,k as b}from"./app-B0Dy8rKi.js";import{_ as k}from"./createLucideIcon-xrpdt54s.js";import{_,a as c,b as x,c as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-BfMGMCj7.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-wfFOS7Tg.js";import{_ as v}from"./index-BXYOoHn0.js";import{_ as H,a as J,b as h,c as S}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DvdE5wH6.js";import{_ as K,a as O,b as j,c as A,d as Q,e as C}from"./TableHeader.vue_vue_type_script_setup_true_lang-CGiBK8AC.js";import{_ as W,a as X,b as Y}from"./index-BwF5VWwN.js";import{S as L}from"./shield-qWpKl1FA.js";import{S as Z}from"./square-pen-E3B5bnus.js";import{A as tt}from"./arrow-left-DHU31CTw.js";import{U as et}from"./users-BLf_K4wj.js";import{L as st}from"./lock-KHzwz1lJ.js";import{T as lt}from"./target-BB5alG4s.js";import"./useFlashMessages-yn6-i8Xw.js";import"./index-CxRjDcu6.js";import"./floating-ui.vue-CNHy5hvL.js";import"./x-436kEeG1.js";import"./Input.vue_vue_type_script_setup_true_lang-D8Hp4vgl.js";import"./index-DGkMxdGf.js";import"./user-DBmnWwc7.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-5ICDNOri.js";import"./chevron-right-CL72Brng.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BO7OrjmZ.js";import"./VisuallyHidden-DxSInn-M.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DkJUGQDC.js";import"./check-Cf-GKpqy.js";import"./Label.vue_vue_type_script_setup_true_lang-CU8FAIJ9.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cy2v8V6t.js";import"./index-Bgqi0rpw.js";import"./circle-alert-Dkrr0PoB.js";import"./map-pin-DXKoxVta.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DtgYdlF8.js";import"./chevrons-up-down-DXUOC6ow.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B90NpS3k.js";import"./folder-BoXM9L1f.js";import"./vote-BnrnRf8h.js";import"./folder-open-BPPvUoY9.js";import"./send-DbUsvwpO.js";import"./file-text-Dh4nESY8.js";import"./briefcase-CxcIQXSO.js";import"./calendar-DJcLf8Ae.js";import"./megaphone-B6ytzu6a.js";import"./user-check-CI-NP1LQ.js";import"./clipboard-list-CVSvnyXy.js";import"./mail-B5MLu5Su.js";import"./message-square-BSAL19zT.js";import"./external-link-BYYejV6M.js";import"./panel-left-CiOSA-PW.js";import"./index-DDDDmr0x.js";import"./RovingFocusItem-D5q5BBGh.js";import"./utils-7R8MTDx-.js";const ot={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},at={class:"flex items-center justify-between"},it={class:"flex items-center gap-4"},nt={class:"p-3 bg-primary/10 rounded-lg"},rt={class:"text-2xl font-bold tracking-tight"},dt={class:"flex items-center gap-2 mt-1"},ut={class:"flex gap-2"},mt={class:"grid gap-6 md:grid-cols-3"},ft={class:"text-2xl font-bold"},pt={class:"text-2xl font-bold"},_t={class:"text-2xl font-bold"},ct={class:"grid grid-cols-2 gap-4"},xt={class:"text-sm font-mono"},gt={class:"text-sm font-mono"},vt={class:"text-sm"},yt={class:"text-sm"},bt={key:0},$t={class:"text-sm"},wt={key:1},kt={class:"flex flex-wrap gap-2"},ht={key:0,class:"text-center py-8"},St={key:1,class:"space-y-4"},At={class:"font-semibold mb-2"},Ct={class:"flex flex-wrap gap-2"},Dt={key:2,class:"text-center py-8 text-muted-foreground"},Pt={class:"flex items-center gap-3"},Vt={class:"font-medium"},Rt={key:1,class:"text-center py-8 text-muted-foreground"},Ut={key:0,class:"space-y-3"},jt={class:"font-semibold"},Lt={class:"text-sm text-muted-foreground mt-1"},Nt={class:"flex gap-2 mt-2"},Et={key:1,class:"text-center py-8 text-muted-foreground"},Ee=M({__name:"Show",props:{role:{},userCount:{}},setup(n){const $=n,N=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"},{title:$.role.display_name,href:"#"}],E=()=>["super_admin","admin","manager","user","end_customer"].includes($.role.name),B=m=>m.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),D=m=>new Date(m).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),z=()=>{if(!$.role.permissions)return{};const m={};return $.role.permissions.forEach(e=>{const[d,i]=e.split(".");m[d]||(m[d]=[]),m[d].push(i)}),m},T=m=>({users:"Usuarios",votaciones:"Votaciones",convocatorias:"Convocatorias",postulaciones:"Postulaciones",candidaturas:"Candidaturas",reports:"Reportes",settings:"Configuración",dashboard:"Dashboard",profile:"Perfil"})[m]||m,q=m=>({view:"secondary",create:"default",edit:"outline",delete:"destructive",export:"ghost"})[m]||"outline";return(m,e)=>(r(),p(F,{breadcrumbs:N},{default:l(()=>[s(t(G),{title:`Rol: ${n.role.display_name}`},null,8,["title"]),o("div",ot,[o("div",at,[o("div",it,[o("div",nt,[s(t(L),{class:"h-8 w-8 text-primary"})]),o("div",null,[o("h2",rt,u(n.role.display_name),1),o("div",dt,[s(t(v),{variant:"outline"},{default:l(()=>[a(u(n.role.name),1)]),_:1}),E()?(r(),p(t(v),{key:0,variant:"default"},{default:l(()=>[...e[0]||(e[0]=[a("Rol del Sistema",-1)])]),_:1})):(r(),p(t(v),{key:1,variant:"secondary"},{default:l(()=>[...e[1]||(e[1]=[a("Rol Personalizado",-1)])]),_:1}))])])]),o("div",ut,[s(t(w),{href:`/admin/roles/${n.role.id}/edit`},{default:l(()=>[s(t(k),null,{default:l(()=>[s(t(Z),{class:"mr-2 h-4 w-4"}),e[2]||(e[2]=a(" Editar ",-1))]),_:1})]),_:1},8,["href"]),s(t(w),{href:m.route("admin.roles.index")},{default:l(()=>[s(t(k),{variant:"outline"},{default:l(()=>[s(t(tt),{class:"mr-2 h-4 w-4"}),e[3]||(e[3]=a(" Volver ",-1))]),_:1})]),_:1},8,["href"])])]),o("div",mt,[s(t(_),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(t(x),{class:"text-sm font-medium"},{default:l(()=>[...e[4]||(e[4]=[a("Usuarios Asignados",-1)])]),_:1}),s(t(et),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(g),null,{default:l(()=>[o("div",ft,u(n.userCount),1),e[5]||(e[5]=o("p",{class:"text-xs text-muted-foreground"},"usuarios con este rol",-1))]),_:1})]),_:1}),s(t(_),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(t(x),{class:"text-sm font-medium"},{default:l(()=>[...e[6]||(e[6]=[a("Permisos",-1)])]),_:1}),s(t(st),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(g),null,{default:l(()=>{var d,i;return[o("div",pt,u((d=n.role.permissions)!=null&&d.includes("*")?"Todos":((i=n.role.permissions)==null?void 0:i.length)||0),1),e[7]||(e[7]=o("p",{class:"text-xs text-muted-foreground"},"permisos asignados",-1))]}),_:1})]),_:1}),s(t(_),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[s(t(x),{class:"text-sm font-medium"},{default:l(()=>[...e[8]||(e[8]=[a("Segmentos",-1)])]),_:1}),s(t(lt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(g),null,{default:l(()=>{var d;return[o("div",_t,u(((d=n.role.segments)==null?void 0:d.length)||0),1),e[9]||(e[9]=o("p",{class:"text-xs text-muted-foreground"},"segmentos asociados",-1))]}),_:1})]),_:1})]),s(t(H),{defaultValue:"details",class:"space-y-4"},{default:l(()=>[s(t(J),null,{default:l(()=>[s(t(h),{value:"details"},{default:l(()=>[...e[10]||(e[10]=[a("Detalles",-1)])]),_:1}),s(t(h),{value:"permissions"},{default:l(()=>[...e[11]||(e[11]=[a("Permisos",-1)])]),_:1}),s(t(h),{value:"users"},{default:l(()=>[...e[12]||(e[12]=[a("Usuarios",-1)])]),_:1}),s(t(h),{value:"segments"},{default:l(()=>[...e[13]||(e[13]=[a("Segmentos",-1)])]),_:1})]),_:1}),s(t(S),{value:"details"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[14]||(e[14]=[a("Información del Rol",-1)])]),_:1})]),_:1}),s(t(g),{class:"space-y-4"},{default:l(()=>{var d;return[o("div",ct,[o("div",null,[e[15]||(e[15]=o("p",{class:"text-sm font-medium text-muted-foreground"},"ID del Rol",-1)),o("p",xt,u(n.role.id),1)]),o("div",null,[e[16]||(e[16]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Nombre Interno",-1)),o("p",gt,u(n.role.name),1)]),o("div",null,[e[17]||(e[17]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Creado",-1)),o("p",vt,u(D(n.role.created_at)),1)]),o("div",null,[e[18]||(e[18]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Última Actualización",-1)),o("p",yt,u(D(n.role.updated_at)),1)])]),n.role.description?(r(),f("div",bt,[e[19]||(e[19]=o("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),o("p",$t,u(n.role.description),1)])):R("",!0),(d=n.role.allowed_modules)!=null&&d.length?(r(),f("div",wt,[e[20]||(e[20]=o("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Módulos Permitidos",-1)),o("div",kt,[(r(!0),f(y,null,b(n.role.allowed_modules,i=>(r(),p(t(v),{key:i,variant:"outline"},{default:l(()=>[a(u(i),1)]),_:2},1024))),128))])])):R("",!0)]}),_:1})]),_:1})]),_:1}),s(t(S),{value:"permissions"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[21]||(e[21]=[a("Permisos Asignados",-1)])]),_:1}),s(t(U),null,{default:l(()=>[...e[22]||(e[22]=[a(" Lista detallada de permisos organizados por módulo ",-1)])]),_:1})]),_:1}),s(t(g),null,{default:l(()=>{var d,i;return[(d=n.role.permissions)!=null&&d.includes("*")?(r(),f("div",ht,[s(t(L),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e[23]||(e[23]=o("p",{class:"text-lg font-semibold"},"Acceso Total",-1)),e[24]||(e[24]=o("p",{class:"text-sm text-muted-foreground"},"Este rol tiene todos los permisos del sistema",-1))])):(i=n.role.permissions)!=null&&i.length?(r(),f("div",St,[(r(!0),f(y,null,b(z(),(I,P)=>(r(),f("div",{key:P,class:"border rounded-lg p-4"},[o("h4",At,u(T(P)),1),o("div",Ct,[(r(!0),f(y,null,b(I,V=>(r(),p(t(v),{key:`${P}.${V}`,variant:q(V)},{default:l(()=>[a(u(V),1)]),_:2},1032,["variant"]))),128))])]))),128))])):(r(),f("div",Dt," No hay permisos asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(t(S),{value:"users"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[25]||(e[25]=[a("Usuarios con este Rol",-1)])]),_:1}),s(t(U),null,{default:l(()=>[...e[26]||(e[26]=[a(" Lista de usuarios que tienen asignado este rol ",-1)])]),_:1})]),_:1}),s(t(g),null,{default:l(()=>{var d;return[(d=n.role.users)!=null&&d.length?(r(),p(t(K),{key:0},{default:l(()=>[s(t(O),null,{default:l(()=>[s(t(j),null,{default:l(()=>[s(t(A),null,{default:l(()=>[...e[27]||(e[27]=[a("Usuario",-1)])]),_:1}),s(t(A),null,{default:l(()=>[...e[28]||(e[28]=[a("Email",-1)])]),_:1}),s(t(A),null,{default:l(()=>[...e[29]||(e[29]=[a("Fecha de Asignación",-1)])]),_:1}),s(t(A),{class:"text-right"},{default:l(()=>[...e[30]||(e[30]=[a("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(t(Q),null,{default:l(()=>[(r(!0),f(y,null,b(n.role.users,i=>(r(),p(t(j),{key:i.id},{default:l(()=>[s(t(C),null,{default:l(()=>[o("div",Pt,[s(t(W),{class:"h-8 w-8"},{default:l(()=>[i.avatar_url?(r(),p(t(X),{key:0,src:i.avatar_url,alt:i.name},null,8,["src","alt"])):R("",!0),s(t(Y),null,{default:l(()=>[a(u(B(i.name)),1)]),_:2},1024)]),_:2},1024),o("span",Vt,u(i.name),1)])]),_:2},1024),s(t(C),null,{default:l(()=>[a(u(i.email),1)]),_:2},1024),s(t(C),null,{default:l(()=>[a(u(D(i.created_at)),1)]),_:2},1024),s(t(C),{class:"text-right"},{default:l(()=>[s(t(w),{href:`/admin/users/${i.id}`},{default:l(()=>[s(t(k),{size:"sm",variant:"ghost"},{default:l(()=>[...e[31]||(e[31]=[a(" Ver Usuario ",-1)])]),_:1})]),_:1},8,["href"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),f("div",Rt," No hay usuarios asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(t(S),{value:"segments"},{default:l(()=>[s(t(_),null,{default:l(()=>[s(t(c),null,{default:l(()=>[s(t(x),null,{default:l(()=>[...e[32]||(e[32]=[a("Segmentos Asociados",-1)])]),_:1}),s(t(U),null,{default:l(()=>[...e[33]||(e[33]=[a(" Segmentos que delimitan el alcance de datos para este rol ",-1)])]),_:1})]),_:1}),s(t(g),null,{default:l(()=>{var d;return[(d=n.role.segments)!=null&&d.length?(r(),f("div",Ut,[(r(!0),f(y,null,b(n.role.segments,i=>(r(),f("div",{key:i.id,class:"flex items-start justify-between p-4 border rounded-lg"},[o("div",null,[o("h4",jt,u(i.name),1),o("p",Lt,u(i.description||"Sin descripción"),1),o("div",Nt,[s(t(v),{variant:"outline"},{default:l(()=>[a(u(i.user_count||0)+" usuarios ",1)]),_:2},1024),s(t(v),{variant:i.is_dynamic?"default":"secondary"},{default:l(()=>[a(u(i.is_dynamic?"Dinámico":"Estático"),1)]),_:2},1032,["variant"])])]),s(t(w),{href:`/admin/segments/${i.id}`},{default:l(()=>[s(t(k),{size:"sm",variant:"ghost"},{default:l(()=>[...e[34]||(e[34]=[a(" Ver Segmento ",-1)])]),_:1})]),_:1},8,["href"])]))),128))])):(r(),f("div",Et," No hay segmentos asociados a este rol "))]}),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}))}});export{Ee as default};
