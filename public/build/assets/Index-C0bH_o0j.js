import{_ as B}from"./index-CnmuFngV.js";import{c as be,_ as x}from"./createLucideIcon-CXHANoFt.js";import{_ as J,c as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-DjHPkkDU.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-CiERRZLN.js";import{_ as he,a as ye,b as X,c as k,d as ke,e as w}from"./TableHeader.vue_vue_type_script_setup_true_lang-CblYekQc.js";import{a as G,b as Q,c as Y,_ as we}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BO-svRXb.js";import{d as H,a as m,i as b,o as r,f as s,F as L,r as D,j as h,u as t,W as ie,e as a,s as Ce,v as $e,x as Se,y as Ee,k as v,w as Ae,c as je,b as o,m as Ne,g as i,P as Te,t as l,n as Pe}from"./app-CAdZzM_Z.js";import{_ as Me}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-CqKihM1X.js";import{_ as Z,a as ee,b as se,c as te,d as oe,e as ae}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CTiTYt3J.js";import{_ as W}from"./Checkbox.vue_vue_type_script_setup_true_lang-DXQURKDh.js";import{H as qe}from"./index-Dk7v65kc.js";import{M as F}from"./mail-BKI_fhCO.js";import{S as U}from"./send-CS3XvAz1.js";import{S as Fe}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BBCGXacZ.js";import{I as Le}from"./info-CoBvSi_y.js";import{U as Re}from"./user-check-BNwGs4aj.js";import{E as We}from"./eye-BSbpsiAw.js";import{E as Ie}from"./external-link-mZUJsxAi.js";import{C as ne}from"./circle-alert-DJApAxfZ.js";import{M as le}from"./message-square-qaY6C2Dc.js";import"./index-CDPaFMwS.js";import"./Input.vue_vue_type_script_setup_true_lang-mDQ3dGeJ.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-jdsIb6uM.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-cz1j7wvU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-pqFXBp6U.js";import"./chevrons-up-down-Bkqb2MWm.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CaNV7crr.js";import"./users-COCJ8eeW.js";import"./shield-9TfN4vcB.js";import"./vote-Ch3ARerj.js";import"./file-text-CpgbbvpW.js";import"./calendar-DTHAcGLd.js";import"./briefcase-CxOizXu-.js";import"./megaphone-BAaLnDtT.js";import"./panel-left-BRV2vWPf.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DWP3i772.js";import"./VisuallyHidden-C9Q-Dzyf.js";import"./check-D66TnJ1r.js";import"./floating-ui.vue-o9t0Cs1h.js";import"./index-DXvfFGMJ.js";import"./index-isMfZbaw.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-Dvdq-DmD.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-BnnvUan0.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CCNcCODn.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-D5qgQo6A.js";import"./loader-circle-xhoUX24f.js";import"./trash-2-Bq1AllkH.js";import"./plus-C0INzXao.js";import"./search-CdbiSxN2.js";import"./history-k4JRcgR1.js";import"./save-Y7_sM-_y.js";import"./user-DCxajna_.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BJlwZ8Tj.js";import"./map-pin-CpWHgFMG.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=be("UsersRoundIcon",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),Ue={key:0,class:"mt-6 flex justify-center"},De={class:"flex items-center gap-2"},He=["innerHTML"],Oe=H({__name:"Pagination",props:{links:{}},setup(y){const c=f=>({"pagination.previous":"&laquo; Anterior","pagination.next":"Siguiente &raquo;","&laquo; Previous":"&laquo; Anterior","Next &raquo;":"Siguiente &raquo;",Previous:"Anterior",Next:"Siguiente","...":"..."})[f]||f,C=f=>{f&&ie.get(f)};return(f,I)=>f.links&&f.links.length>3?(r(),m("div",Ue,[s("div",De,[(r(!0),m(L,null,D(f.links,g=>(r(),m(L,{key:g.label},[g.url?(r(),h(t(x),{key:0,variant:g.active?"default":"outline",size:"sm",onClick:O=>C(g.url),innerHTML:c(g.label)},null,8,["variant","onClick","innerHTML"])):(r(),m("span",{key:1,class:"px-3 py-1 text-sm text-muted-foreground cursor-not-allowed",innerHTML:c(g.label)},null,8,He))],64))),128))])])):b("",!0)}}),re=H({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(y){const c=y;return(C,f)=>(r(),h(t(qe),$e(Se(c)),{default:a(()=>[Ce(C.$slots,"default")]),_:3},16))}});function Ve(y){if(!y)return"";const c=document.createElement("DIV");return c.innerHTML=y,(c.textContent||c.innerText||"").trim()}const ze={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Je={class:"flex items-center justify-between"},Ke={class:"flex gap-3 items-center"},Xe={key:0,class:"mb-4"},Ge={class:"flex items-start gap-3"},Qe={class:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30"},Ye={class:"flex-1"},Ze={class:"flex items-center gap-2"},es={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},ss={key:0,class:"mt-2 flex flex-wrap gap-2"},ts={class:"font-medium"},os={class:"ml-1 opacity-75"},as={key:0,class:"text-center py-8"},ns={key:1,class:"rounded-md border"},ls={class:"font-medium"},rs={class:"text-sm text-muted-foreground"},is={class:"text-xs text-muted-foreground"},ds={key:0},us={class:"font-medium text-sm"},cs={key:1,class:"text-sm text-muted-foreground"},ms={key:0},fs={class:"text-sm"},ps={class:"text-xs text-muted-foreground"},_s={key:1,class:"text-sm text-muted-foreground"},vs={class:"text-sm"},gs={key:0,class:"max-w-xs space-y-1"},xs={class:"text-sm text-blue-800 dark:text-blue-200 truncate"},bs={class:"flex items-center gap-2"},hs={key:0,class:"text-xs text-muted-foreground"},ys={key:1,class:"text-sm text-muted-foreground"},ks=["href"],ws={class:"space-y-6"},Cs={class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},$s={class:"flex items-center gap-2 mb-3"},Ss={class:"grid grid-cols-2 gap-3 text-sm"},Es={class:"flex justify-between"},As={class:"font-medium text-orange-900"},js={class:"flex justify-between"},Ns={class:"font-medium text-orange-900"},Ts={class:"flex justify-between"},Ps={class:"font-medium text-orange-900"},Ms={class:"flex justify-between"},qs={class:"font-medium text-red-700"},Fs={class:"space-y-4"},Ls={class:"space-y-3"},Rs={class:"flex items-center space-x-3"},Ws={class:"flex items-center gap-2"},Is={class:"text-sm text-muted-foreground ml-1"},Bs={class:"flex items-center space-x-3"},Us={class:"flex items-center gap-2"},Ds={class:"text-sm text-muted-foreground ml-1"},Hs={class:"space-y-6"},Os={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Vs={class:"flex items-center gap-2 mb-3"},zs={class:"grid grid-cols-2 gap-3 text-sm"},Js={class:"flex justify-between"},Ks={class:"font-medium text-blue-900"},Xs={class:"flex justify-between"},Gs={class:"font-medium text-blue-900"},Qs={class:"flex justify-between"},Ys={class:"font-medium text-blue-900"},Zs={class:"flex justify-between"},et={class:"font-medium text-red-700"},st={class:"space-y-4"},tt={class:"space-y-3"},ot={class:"flex items-center space-x-3"},at={class:"flex items-center gap-2"},nt={class:"text-sm text-muted-foreground ml-1"},lt={class:"flex items-center space-x-3"},rt={class:"flex items-center gap-2"},it={class:"text-sm text-muted-foreground ml-1"},mo=H({__name:"Index",props:{candidaturas:{},filters:{},filterFieldsConfig:{},segmentInfo:{}},setup(y){var V,z;const c=y,C=Ee(),f=((V=C.props.auth)==null?void 0:V.permissions)||[],I=((z=C.props.auth)==null?void 0:z.isSuperAdmin)||!1,g=d=>I?!0:f.includes(d)||f.includes("*"),O=[{title:"Admin",href:"/admin/dashboard"},{title:"Candidaturas",href:"#"}],de=v({estado:c.filters.estado||"null",search:c.filters.search||""});Ae(de,d=>{const e=Object.entries(d).reduce((u,[n,q])=>(u[n]=q==="null"?"":q,u),{});ie.get("/admin/candidaturas",e,{preserveState:!0,replace:!0})},{deep:!0});const ue={fields:c.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["user.name","user.email","user.documento_identidad"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},{route:j}=window,ce=je(()=>({quickSearch:c.filters.search||"",rootGroup:c.filters.advanced_filters?JSON.parse(c.filters.advanced_filters):void 0})),me=v("todos"),fe=()=>{var d;if(c.filters.advanced_filters)try{const u=(d=JSON.parse(c.filters.advanced_filters).conditions)==null?void 0:d.find(n=>n.field==="candidaturas.estado"&&n.operator==="equals");if(u)return u.value}catch{}return"todos"};me.value=fe();const N=v(!1),T=v(!1),$=v(!1),S=v(!1),p=v({total_borradores:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),P=v(!1),M=v(!1),E=v(!1),A=v(!1),_=v({total_pendientes:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),pe=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_e=async()=>{try{const e=await(await fetch(j("admin.candidaturas.estadisticas-borradores"))).json();p.value=e,$.value=!1,S.value=!1,N.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas en borrador")}},ve=async()=>{try{E.value=!1,A.value=!1;const e=await(await fetch(j("admin.candidaturas.estadisticas-pendientes"))).json();_.value=e,P.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas pendientes")}},ge=async()=>{var d;if(!E.value&&!A.value){alert("Debes seleccionar al menos un tipo de notificación (email o WhatsApp)");return}M.value=!0;try{const u=await(await fetch(j("admin.candidaturas.enviar-notificaciones"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:E.value,incluir_whatsapp:A.value})})).json();u.success?(P.value=!1,alert(`Notificaciones enviadas exitosamente!

• Candidaturas procesadas: ${u.contadores.total_candidaturas}
• Correos programados: ${u.contadores.emails_enviados}
• WhatsApps programados: ${u.contadores.whatsapps_enviados}
• Errores: ${u.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${u.message}`)}catch(e){console.error("Error enviando notificaciones:",e),alert("Error enviando notificaciones. Por favor intenta de nuevo.")}finally{M.value=!1}},xe=async()=>{var d;if(!$.value&&!S.value){alert("Debes seleccionar al menos un tipo de recordatorio (email o WhatsApp)");return}T.value=!0;try{const u=await(await fetch(j("admin.candidaturas.enviar-recordatorios"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:$.value,incluir_whatsapp:S.value})})).json();u.success?(N.value=!1,alert(`Recordatorios enviados exitosamente!

• Candidaturas procesadas: ${u.contadores.total_candidaturas}
• Correos programados: ${u.contadores.emails_enviados}
• WhatsApps programados: ${u.contadores.whatsapps_enviados}
• Errores: ${u.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${u.message}`)}catch(e){console.error("Error enviando recordatorios:",e),alert("Error enviando recordatorios. Por favor intenta de nuevo.")}finally{T.value=!1}};return(d,e)=>(r(),m(L,null,[o(t(Ne),{title:"Candidaturas"}),o(we,{breadcrumbs:O},{default:a(()=>{var u;return[s("div",ze,[s("div",Je,[e[12]||(e[12]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Candidaturas"),s("p",{class:"text-muted-foreground"}," Revisa y gestiona los perfiles de candidatura de los usuarios ")],-1)),s("div",Ke,[e[11]||(e[11]=s("div",{class:"h-8 w-px bg-border"},null,-1)),g("candidaturas.notificaciones")?(r(),h(t(x),{key:0,onClick:ve,variant:"outline",class:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 hover:border-blue-300"},{default:a(()=>[o(t(F),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=i(" Notificaciones "))]),_:1})):b("",!0),g("candidaturas.recordatorios")?(r(),h(t(x),{key:1,onClick:_e,variant:"outline",class:"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 hover:border-orange-300"},{default:a(()=>[o(t(U),{class:"mr-2 h-4 w-4"}),e[9]||(e[9]=i(" Recordatorios "))]),_:1})):b("",!0),g("candidaturas.configuracion")?(r(),h(t(Te),{key:2,href:"/admin/candidaturas/configuracion"},{default:a(()=>[o(t(x),null,{default:a(()=>[o(t(Fe),{class:"mr-2 h-4 w-4"}),e[10]||(e[10]=i(" Configuración "))]),_:1})]),_:1})):b("",!0)])]),(u=c.segmentInfo)!=null&&u.applied?(r(),m("div",Xe,[o(t(J),{class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:a(()=>[o(t(K),{class:"p-4"},{default:a(()=>[s("div",Ge,[s("div",Qe,[o(t(Be),{class:"h-5 w-5 text-blue-600 dark:text-blue-400"})]),s("div",Ye,[s("div",Ze,[e[14]||(e[14]=s("h3",{class:"font-semibold text-sm text-blue-900 dark:text-blue-100"}," Filtro de Segmento Activo ",-1)),o(t(re),null,{default:a(()=>[o(t(G),null,{default:a(()=>[o(t(Q),null,{default:a(()=>[o(t(Le),{class:"h-4 w-4 text-blue-600 dark:text-blue-400"})]),_:1}),o(t(Y),null,{default:a(()=>e[13]||(e[13]=[s("p",{class:"max-w-xs"}," Tu rol tiene un segmento asignado que filtra automáticamente los datos que puedes ver. Los filtros adicionales se aplicarán sobre este conjunto de datos. ",-1)])),_:1})]),_:1})]),_:1})]),s("p",es,l(c.segmentInfo.message),1),c.segmentInfo.segments.length>0?(r(),m("div",ss,[(r(!0),m(L,null,D(c.segmentInfo.segments,n=>(r(),h(t(B),{key:n.id,variant:"secondary",class:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},{default:a(()=>[s("span",ts,l(n.name),1),s("span",os,"("+l(n.user_count)+" usuarios)",1)]),_:2},1024))),128))])):b("",!0)])])]),_:1})]),_:1})])):b("",!0),o(Me,{config:ue,route:t(j)("admin.candidaturas.index"),"initial-filters":ce.value},null,8,["route","initial-filters"]),o(t(J),null,{default:a(()=>[o(t(K),{class:"pt-6"},{default:a(()=>[d.candidaturas.data.length===0?(r(),m("div",as,[o(t(Re),{class:"mx-auto h-12 w-12 text-muted-foreground"}),e[15]||(e[15]=s("h3",{class:"mt-4 text-lg font-medium"},"No hay candidaturas",-1)),e[16]||(e[16]=s("p",{class:"text-muted-foreground"},"No se encontraron candidaturas con los filtros aplicados.",-1))])):(r(),m("div",ns,[o(t(he),null,{default:a(()=>[o(t(ye),null,{default:a(()=>[o(t(X),null,{default:a(()=>[o(t(k),null,{default:a(()=>e[17]||(e[17]=[i("Usuario")])),_:1}),o(t(k),null,{default:a(()=>e[18]||(e[18]=[i("Convocatoria")])),_:1}),o(t(k),null,{default:a(()=>e[19]||(e[19]=[i("Estado")])),_:1}),o(t(k),null,{default:a(()=>e[20]||(e[20]=[i("Datos Completados")])),_:1}),o(t(k),null,{default:a(()=>e[21]||(e[21]=[i("Actualizado")])),_:1}),o(t(k),null,{default:a(()=>e[22]||(e[22]=[i("Comentarios")])),_:1}),o(t(k),{class:"text-right"},{default:a(()=>e[23]||(e[23]=[i("Acciones")])),_:1})]),_:1})]),_:1}),o(t(ke),null,{default:a(()=>[(r(!0),m(L,null,D(d.candidaturas.data,n=>(r(),h(t(X),{key:n.id},{default:a(()=>[o(t(w),null,{default:a(()=>[s("div",null,[s("p",ls,l(n.usuario.name),1),s("p",rs,l(n.usuario.email),1),s("p",is,l(n.usuario.documento_identidad||"Sin documento"),1)])]),_:2},1024),o(t(w),null,{default:a(()=>[n.convocatoria?(r(),m("div",ds,[s("p",us,l(n.convocatoria.nombre),1)])):(r(),m("span",cs,"Sin convocatoria"))]),_:2},1024),o(t(w),null,{default:a(()=>[o(t(B),{class:Pe(n.estado_color)},{default:a(()=>[i(l(n.estado_label),1)]),_:2},1032,["class"])]),_:2},1024),o(t(w),null,{default:a(()=>[n.total_campos>0?(r(),m("div",ms,[s("p",fs,l(n.campos_llenados)+" / "+l(n.total_campos),1),s("p",ps," ("+l(n.porcentaje_completado)+"%) ",1)])):(r(),m("span",_s,"Sin configuración"))]),_:2},1024),o(t(w),null,{default:a(()=>[s("p",vs,l(pe(n.updated_at)),1)]),_:2},1024),o(t(w),null,{default:a(()=>{var q;return[n.comentario_actual||n.comentarios_admin?(r(),m("div",gs,[s("p",xs,l(t(Ve)(((q=n.comentario_actual)==null?void 0:q.comentario)||n.comentarios_admin||"")),1),s("div",bs,[n.comentario_actual?(r(),m("span",hs,l(n.comentario_actual.fecha_relativa),1)):b("",!0),n.total_comentarios&&n.total_comentarios>1?(r(),h(t(B),{key:1,variant:"secondary",class:"text-xs"},{default:a(()=>[i(" +"+l(n.total_comentarios-1)+" más ",1)]),_:2},1024)):b("",!0)])])):(r(),m("span",ys,"-"))]}),_:2},1024),o(t(w),{class:"text-right"},{default:a(()=>[o(t(re),null,{default:a(()=>[o(t(G),null,{default:a(()=>[o(t(Q),{asChild:""},{default:a(()=>[s("a",{href:`/admin/candidaturas/${n.id}`,target:"_blank",rel:"noopener noreferrer"},[o(t(x),{variant:"outline",size:"sm"},{default:a(()=>[o(t(We),{class:"mr-2 h-4 w-4"}),e[24]||(e[24]=i(" Ver candidatura ")),o(t(Ie),{class:"ml-1 h-3 w-3"})]),_:1})],8,ks)]),_:2},1024),o(t(Y),null,{default:a(()=>e[25]||(e[25]=[s("p",null,"Abrir en nueva ventana",-1)])),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),o(Oe,{links:d.candidaturas.links},null,8,["links"])]),_:1})]),_:1}),o(t(Z),{open:N.value,"onUpdate:open":e[3]||(e[3]=n=>N.value=n)},{default:a(()=>[o(t(ee),{class:"sm:max-w-md"},{default:a(()=>[o(t(se),null,{default:a(()=>[o(t(te),{class:"flex items-center gap-2"},{default:a(()=>[o(t(U),{class:"h-5 w-5 text-orange-600"}),e[26]||(e[26]=i(" Enviar Recordatorios Masivos "))]),_:1}),o(t(oe),null,{default:a(()=>e[27]||(e[27]=[i(" Envía recordatorios por correo y/o WhatsApp a todas las candidaturas en estado borrador. ")])),_:1})]),_:1}),s("div",ws,[s("div",Cs,[s("div",$s,[o(t(ne),{class:"h-5 w-5 text-orange-600"}),e[28]||(e[28]=s("h3",{class:"font-medium text-orange-900"},"Candidaturas en Borrador",-1))]),s("div",Ss,[s("div",Es,[e[29]||(e[29]=s("span",{class:"text-orange-700"},"Total en borrador:",-1)),s("span",As,l(p.value.total_borradores),1)]),s("div",js,[e[30]||(e[30]=s("span",{class:"text-orange-700"},"Con email:",-1)),s("span",Ns,l(p.value.con_email),1)]),s("div",Ts,[e[31]||(e[31]=s("span",{class:"text-orange-700"},"Con teléfono:",-1)),s("span",Ps,l(p.value.con_telefono),1)]),s("div",Ms,[e[32]||(e[32]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",qs,l(Math.max(0,p.value.total_borradores-Math.max(p.value.con_email,p.value.con_telefono))),1)])])]),s("div",Fs,[e[35]||(e[35]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de recordatorio:",-1)),s("div",Ls,[s("div",Rs,[o(t(W),{id:"include-email",checked:$.value,"onUpdate:checked":e[0]||(e[0]=n=>$.value=n),disabled:p.value.con_email===0},null,8,["checked","disabled"]),s("div",Ws,[o(t(F),{class:"h-4 w-4 text-blue-600"}),o(t(R),{for:"include-email",class:"flex-1"},{default:a(()=>[e[33]||(e[33]=i(" Correo electrónico ")),s("span",Is," ("+l(p.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",Bs,[o(t(W),{id:"include-whatsapp",checked:S.value,"onUpdate:checked":e[1]||(e[1]=n=>S.value=n),disabled:p.value.con_telefono===0},null,8,["checked","disabled"]),s("div",Us,[o(t(le),{class:"h-4 w-4 text-green-600"}),o(t(R),{for:"include-whatsapp",class:"flex-1"},{default:a(()=>[e[34]||(e[34]=i(" WhatsApp ")),s("span",Ds," ("+l(p.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[36]||(e[36]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Los mensajes se envían respetando los límites de velocidad configurados"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),o(t(ae),null,{default:a(()=>[o(t(x),{variant:"outline",onClick:e[2]||(e[2]=n=>N.value=!1),disabled:T.value},{default:a(()=>e[37]||(e[37]=[i(" Cancelar ")])),_:1},8,["disabled"]),o(t(x),{onClick:xe,disabled:T.value||p.value.total_borradores===0||!$.value&&!S.value,class:"bg-orange-600 hover:bg-orange-700"},{default:a(()=>[o(t(U),{class:"mr-2 h-4 w-4"}),i(" "+l(T.value?"Enviando...":`Enviar Recordatorios (${p.value.total_borradores})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),o(t(Z),{open:P.value,"onUpdate:open":e[7]||(e[7]=n=>P.value=n)},{default:a(()=>[o(t(ee),{class:"sm:max-w-md"},{default:a(()=>[o(t(se),null,{default:a(()=>[o(t(te),{class:"flex items-center gap-2"},{default:a(()=>[o(t(F),{class:"h-5 w-5 text-blue-600"}),e[38]||(e[38]=i(" Enviar Notificaciones de Estado "))]),_:1}),o(t(oe),null,{default:a(()=>e[39]||(e[39]=[i(" Envía notificaciones por correo y/o WhatsApp a todas las candidaturas en estado pendiente de revisión. ")])),_:1})]),_:1}),s("div",Hs,[s("div",Os,[s("div",Vs,[o(t(ne),{class:"h-5 w-5 text-blue-600"}),e[40]||(e[40]=s("h3",{class:"font-medium text-blue-900"},"Candidaturas Pendientes de Revisión",-1))]),s("div",zs,[s("div",Js,[e[41]||(e[41]=s("span",{class:"text-blue-700"},"Total pendientes:",-1)),s("span",Ks,l(_.value.total_pendientes),1)]),s("div",Xs,[e[42]||(e[42]=s("span",{class:"text-blue-700"},"Con email:",-1)),s("span",Gs,l(_.value.con_email),1)]),s("div",Qs,[e[43]||(e[43]=s("span",{class:"text-blue-700"},"Con teléfono:",-1)),s("span",Ys,l(_.value.con_telefono),1)]),s("div",Zs,[e[44]||(e[44]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",et,l(Math.max(0,_.value.total_pendientes-Math.max(_.value.con_email,_.value.con_telefono))),1)])])]),s("div",st,[e[47]||(e[47]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de notificación:",-1)),s("div",tt,[s("div",ot,[o(t(W),{id:"include-email-notif",checked:E.value,"onUpdate:checked":e[4]||(e[4]=n=>E.value=n),disabled:_.value.con_email===0},null,8,["checked","disabled"]),s("div",at,[o(t(F),{class:"h-4 w-4 text-blue-600"}),o(t(R),{for:"include-email-notif",class:"flex-1"},{default:a(()=>[e[45]||(e[45]=i(" Correo electrónico ")),s("span",nt," ("+l(_.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",lt,[o(t(W),{id:"include-whatsapp-notif",checked:A.value,"onUpdate:checked":e[5]||(e[5]=n=>A.value=n),disabled:_.value.con_telefono===0},null,8,["checked","disabled"]),s("div",rt,[o(t(le),{class:"h-4 w-4 text-green-600"}),o(t(R),{for:"include-whatsapp-notif",class:"flex-1"},{default:a(()=>[e[46]||(e[46]=i(" WhatsApp ")),s("span",it," ("+l(_.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[48]||(e[48]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Se notificará que la candidatura fue recibida exitosamente"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),o(t(ae),null,{default:a(()=>[o(t(x),{variant:"outline",onClick:e[6]||(e[6]=n=>P.value=!1),disabled:M.value},{default:a(()=>e[49]||(e[49]=[i(" Cancelar ")])),_:1},8,["disabled"]),o(t(x),{onClick:ge,disabled:M.value||_.value.total_pendientes===0||!E.value&&!A.value,class:"bg-blue-600 hover:bg-blue-700"},{default:a(()=>[o(t(F),{class:"mr-2 h-4 w-4"}),i(" "+l(M.value?"Enviando...":`Enviar Notificaciones (${_.value.total_pendientes})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1})],64))}});export{mo as default};
