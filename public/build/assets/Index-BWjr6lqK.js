import{_ as I}from"./index-BTD9fiCJ.js";import{c as xe,_ as v}from"./createLucideIcon-DI6U3gwA.js";import{_ as D,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dn6Y_7jM.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-DoPMf_am.js";import{_ as ge,a as be,b as J,c as g,d as he,e as b}from"./TableHeader.vue_vue_type_script_setup_true_lang-Cx28ZkFK.js";import{_ as ye}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CCPW6MDq.js";import{d as ke,M as we,r as _,p as Ce,s as $e,c as Ee,i as m,e as o,f as t,q as Se,w as a,g as s,j as h,b as $,m as u,h as i,v as Ae,t as l,F as W,k as z,n as je}from"./app-B7PnGMAV.js";import{_ as Ne}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-DU2AWNe2.js";import{_ as Me}from"./Pagination.vue_vue_type_script_setup_true_lang-DFKeJNGy.js";import{e as H,_ as K,a as X,b as G,c as Q,d as Y}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Caz8PVl-.js";import{_ as T}from"./Checkbox.vue_vue_type_script_setup_true_lang-CxTKmN-7.js";import{_ as Z,a as ee,b as se}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DLfucYog.js";import{_ as te}from"./TooltipProvider.vue_vue_type_script_setup_true_lang-DqME98U9.js";import{M as F}from"./mail-Dr9oHWOp.js";import{S as U}from"./send-BT9HlZj_.js";import{S as Fe}from"./useFlashMessages-D8oQ7xAJ.js";import{I as Re}from"./info-Bpo3iKcL.js";import{U as Te}from"./user-check-BUYsv34n.js";import{E as qe}from"./eye-D3-WG7cb.js";import{E as Ie}from"./external-link-CjNpfxsJ.js";import{C as oe}from"./circle-alert-DiJEEPwx.js";import{M as ae}from"./message-square-DMKhvwiP.js";import"./index-B5fuxkzl.js";import"./Input.vue_vue_type_script_setup_true_lang-8PRhBqBe.js";import"./index-zcIEMK_p.js";import"./floating-ui.vue-6tmejOIW.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BAQIV-m0.js";import"./chevron-right-BJKzZMx4.js";import"./chevrons-up-down-C55qC9J3.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DBCC99-F.js";import"./folder-Dx3fvsQR.js";import"./users-pLklPB45.js";import"./target-CjPz38v3.js";import"./shield-CyyIK3c5.js";import"./vote-weccJEOZ.js";import"./folder-open-BhmZXeXX.js";import"./file-text-CmH6cCEi.js";import"./briefcase-YhdK0qb2.js";import"./calendar-C6eInWsE.js";import"./megaphone-DKPMsaFq.js";import"./clipboard-list-ClT2fIoC.js";import"./panel-left-ac_SXWd7.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CIqxaMm-.js";import"./VisuallyHidden-DXdD7FDa.js";import"./check-C7H_WJFk.js";import"./index-pWXyAkin.js";import"./index-UPtpLtaq.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-VOU9gGEk.js";import"./DialogTrigger-x63PwZNL.js";import"./useKbd-kRIii9yh.js";import"./chevron-left-C1L4p-pO.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-C5t5baIS.js";import"./es-BDPlFIsO.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-DkxaT2Xn.js";import"./loader-circle-BPKpLMPu.js";import"./x-C1SerbTX.js";import"./trash-2-ufHImNLu.js";import"./plus-BQz4addL.js";import"./search-BSZyVR2q.js";import"./filter-CEQhqhF7.js";import"./history-Dw1mY-HJ.js";import"./save-DWJN5Fps.js";import"./index-Dy_wxwuH.js";import"./user-Dmzg3JAl.js";import"./house-MEKTV7b6.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D0XSn-jc.js";import"./map-pin-B9Y2wyZT.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=xe("UsersRoundIcon",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);function Ue(x){if(!x)return"";const c=document.createElement("DIV");return c.innerHTML=x,(c.textContent||c.innerText||"").trim()}const Le={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Pe={class:"flex items-center justify-between"},Oe={class:"flex gap-3 items-center"},Be={key:0,class:"mb-4"},De={class:"flex items-start gap-3"},Ve={class:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30"},Je={class:"flex-1"},ze={class:"flex items-center gap-2"},He={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},Ke={key:0,class:"mt-2 flex flex-wrap gap-2"},Xe={class:"font-medium"},Ge={class:"ml-1 opacity-75"},Qe={key:0,class:"text-center py-8"},Ye={key:1,class:"rounded-md border"},Ze={class:"font-medium"},es={class:"text-sm text-muted-foreground"},ss={class:"text-xs text-muted-foreground"},ts={key:0},os={class:"font-medium text-sm"},as={key:1,class:"text-sm text-muted-foreground"},ns={key:0},ls={class:"text-sm"},is={class:"text-xs text-muted-foreground"},rs={key:1,class:"text-sm text-muted-foreground"},ds={class:"text-sm"},us={key:0,class:"max-w-xs space-y-1"},cs={class:"text-sm text-blue-800 dark:text-blue-200 truncate"},ms={class:"flex items-center gap-2"},fs={key:0,class:"text-xs text-muted-foreground"},ps={key:1,class:"text-sm text-muted-foreground"},_s=["href"],vs={class:"space-y-6"},xs={class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},gs={class:"flex items-center gap-2 mb-3"},bs={class:"grid grid-cols-2 gap-3 text-sm"},hs={class:"flex justify-between"},ys={class:"font-medium text-orange-900"},ks={class:"flex justify-between"},ws={class:"font-medium text-orange-900"},Cs={class:"flex justify-between"},$s={class:"font-medium text-orange-900"},Es={class:"flex justify-between"},Ss={class:"font-medium text-red-700"},As={class:"space-y-4"},js={class:"space-y-3"},Ns={class:"flex items-center space-x-3"},Ms={class:"flex items-center gap-2"},Fs={class:"text-sm text-muted-foreground ml-1"},Rs={class:"flex items-center space-x-3"},Ts={class:"flex items-center gap-2"},qs={class:"text-sm text-muted-foreground ml-1"},Is={class:"space-y-6"},Ws={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Us={class:"flex items-center gap-2 mb-3"},Ls={class:"grid grid-cols-2 gap-3 text-sm"},Ps={class:"flex justify-between"},Os={class:"font-medium text-blue-900"},Bs={class:"flex justify-between"},Ds={class:"font-medium text-blue-900"},Vs={class:"flex justify-between"},Js={class:"font-medium text-blue-900"},zs={class:"flex justify-between"},Hs={class:"font-medium text-red-700"},Ks={class:"space-y-4"},Xs={class:"space-y-3"},Gs={class:"flex items-center space-x-3"},Qs={class:"flex items-center gap-2"},Ys={class:"text-sm text-muted-foreground ml-1"},Zs={class:"flex items-center space-x-3"},et={class:"flex items-center gap-2"},st={class:"text-sm text-muted-foreground ml-1"},vo=ke({__name:"Index",props:{candidaturas:{},filters:{},filterFieldsConfig:{},segmentInfo:{}},setup(x){var O,B;const c=x,L=we(),P=((O=L.props.auth)==null?void 0:O.permissions)||[],ne=((B=L.props.auth)==null?void 0:B.isSuperAdmin)||!1,q=d=>ne?!0:P.includes(d)||P.includes("*"),le=[{title:"Admin",href:"/admin/dashboard"},{title:"Candidaturas",href:"#"}],ie=_({estado:c.filters.estado||"null",search:c.filters.search||""});Ce(ie,d=>{const e=Object.entries(d).reduce((r,[n,M])=>(r[n]=M==="null"?"":M,r),{});$e.get("/admin/candidaturas",e,{preserveState:!0,replace:!0})},{deep:!0});const re={fields:c.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["user.name","user.email","user.documento_identidad"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},{route:E}=window,de=Ee(()=>({quickSearch:c.filters.search||"",rootGroup:c.filters.advanced_filters?JSON.parse(c.filters.advanced_filters):void 0})),ue=_("todos"),ce=()=>{var d;if(c.filters.advanced_filters)try{const r=(d=JSON.parse(c.filters.advanced_filters).conditions)==null?void 0:d.find(n=>n.field==="candidaturas.estado"&&n.operator==="equals");if(r)return r.value}catch{}return"todos"};ue.value=ce();const S=_(!1),A=_(!1),y=_(!1),k=_(!1),f=_({total_borradores:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),j=_(!1),N=_(!1),w=_(!1),C=_(!1),p=_({total_pendientes:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),me=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),fe=async()=>{try{const e=await(await fetch(E("admin.candidaturas.estadisticas-borradores"))).json();f.value=e,y.value=!1,k.value=!1,S.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas en borrador")}},pe=async()=>{try{w.value=!1,C.value=!1;const e=await(await fetch(E("admin.candidaturas.estadisticas-pendientes"))).json();p.value=e,j.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas pendientes")}},_e=async()=>{var d;if(!w.value&&!C.value){alert("Debes seleccionar al menos un tipo de notificación (email o WhatsApp)");return}N.value=!0;try{const r=await(await fetch(E("admin.candidaturas.enviar-notificaciones"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:w.value,incluir_whatsapp:C.value})})).json();r.success?(j.value=!1,alert(`Notificaciones enviadas exitosamente!

• Candidaturas procesadas: ${r.contadores.total_candidaturas}
• Correos programados: ${r.contadores.emails_enviados}
• WhatsApps programados: ${r.contadores.whatsapps_enviados}
• Errores: ${r.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${r.message}`)}catch(e){console.error("Error enviando notificaciones:",e),alert("Error enviando notificaciones. Por favor intenta de nuevo.")}finally{N.value=!1}},ve=async()=>{var d;if(!y.value&&!k.value){alert("Debes seleccionar al menos un tipo de recordatorio (email o WhatsApp)");return}A.value=!0;try{const r=await(await fetch(E("admin.candidaturas.enviar-recordatorios"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:y.value,incluir_whatsapp:k.value})})).json();r.success?(S.value=!1,alert(`Recordatorios enviados exitosamente!

• Candidaturas procesadas: ${r.contadores.total_candidaturas}
• Correos programados: ${r.contadores.emails_enviados}
• WhatsApps programados: ${r.contadores.whatsapps_enviados}
• Errores: ${r.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${r.message}`)}catch(e){console.error("Error enviando recordatorios:",e),alert("Error enviando recordatorios. Por favor intenta de nuevo.")}finally{A.value=!1}};return(d,e)=>(u(),m(W,null,[o(t(Se),{title:"Candidaturas"}),o(ye,{breadcrumbs:le},{default:a(()=>{var r;return[s("div",Le,[s("div",Pe,[e[12]||(e[12]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Candidaturas"),s("p",{class:"text-muted-foreground"}," Revisa y gestiona los perfiles de candidatura de los usuarios ")],-1)),s("div",Oe,[e[11]||(e[11]=s("div",{class:"h-8 w-px bg-border"},null,-1)),q("candidaturas.notificaciones")?(u(),$(t(v),{key:0,onClick:pe,variant:"outline",class:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 hover:border-blue-300"},{default:a(()=>[o(t(F),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=i(" Notificaciones ",-1))]),_:1})):h("",!0),q("candidaturas.recordatorios")?(u(),$(t(v),{key:1,onClick:fe,variant:"outline",class:"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 hover:border-orange-300"},{default:a(()=>[o(t(U),{class:"mr-2 h-4 w-4"}),e[9]||(e[9]=i(" Recordatorios ",-1))]),_:1})):h("",!0),q("candidaturas.configuracion")?(u(),$(t(Ae),{key:2,href:"/admin/candidaturas/configuracion"},{default:a(()=>[o(t(v),null,{default:a(()=>[o(t(Fe),{class:"mr-2 h-4 w-4"}),e[10]||(e[10]=i(" Configuración ",-1))]),_:1})]),_:1})):h("",!0)])]),(r=c.segmentInfo)!=null&&r.applied?(u(),m("div",Be,[o(t(D),{class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:a(()=>[o(t(V),{class:"p-4"},{default:a(()=>[s("div",De,[s("div",Ve,[o(t(We),{class:"h-5 w-5 text-blue-600 dark:text-blue-400"})]),s("div",Je,[s("div",ze,[e[14]||(e[14]=s("h3",{class:"font-semibold text-sm text-blue-900 dark:text-blue-100"}," Filtro de Segmento Activo ",-1)),o(t(te),null,{default:a(()=>[o(t(Z),null,{default:a(()=>[o(t(ee),null,{default:a(()=>[o(t(Re),{class:"h-4 w-4 text-blue-600 dark:text-blue-400"})]),_:1}),o(t(se),null,{default:a(()=>[...e[13]||(e[13]=[s("p",{class:"max-w-xs"}," Tu rol tiene un segmento asignado que filtra automáticamente los datos que puedes ver. Los filtros adicionales se aplicarán sobre este conjunto de datos. ",-1)])]),_:1})]),_:1})]),_:1})]),s("p",He,l(c.segmentInfo.message),1),c.segmentInfo.segments.length>0?(u(),m("div",Ke,[(u(!0),m(W,null,z(c.segmentInfo.segments,n=>(u(),$(t(I),{key:n.id,variant:"secondary",class:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},{default:a(()=>[s("span",Xe,l(n.name),1),s("span",Ge,"("+l(n.user_count)+" usuarios)",1)]),_:2},1024))),128))])):h("",!0)])])]),_:1})]),_:1})])):h("",!0),o(Ne,{config:re,route:t(E)("admin.candidaturas.index"),"initial-filters":de.value},null,8,["route","initial-filters"]),o(t(D),null,{default:a(()=>[o(t(V),{class:"pt-6"},{default:a(()=>[x.candidaturas.data.length===0?(u(),m("div",Qe,[o(t(Te),{class:"mx-auto h-12 w-12 text-muted-foreground"}),e[15]||(e[15]=s("h3",{class:"mt-4 text-lg font-medium"},"No hay candidaturas",-1)),e[16]||(e[16]=s("p",{class:"text-muted-foreground"},"No se encontraron candidaturas con los filtros aplicados.",-1))])):(u(),m("div",Ye,[o(t(ge),null,{default:a(()=>[o(t(be),null,{default:a(()=>[o(t(J),null,{default:a(()=>[o(t(g),null,{default:a(()=>[...e[17]||(e[17]=[i("Usuario",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[18]||(e[18]=[i("Convocatoria",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[19]||(e[19]=[i("Estado",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[20]||(e[20]=[i("Datos Completados",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[21]||(e[21]=[i("Actualizado",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[22]||(e[22]=[i("Comentarios",-1)])]),_:1}),o(t(g),{class:"text-right"},{default:a(()=>[...e[23]||(e[23]=[i("Acciones",-1)])]),_:1})]),_:1})]),_:1}),o(t(he),null,{default:a(()=>[(u(!0),m(W,null,z(x.candidaturas.data,n=>(u(),$(t(J),{key:n.id},{default:a(()=>[o(t(b),null,{default:a(()=>[s("div",null,[s("p",Ze,l(n.usuario.name),1),s("p",es,l(n.usuario.email),1),s("p",ss,l(n.usuario.documento_identidad||"Sin documento"),1)])]),_:2},1024),o(t(b),null,{default:a(()=>[n.convocatoria?(u(),m("div",ts,[s("p",os,l(n.convocatoria.nombre),1)])):(u(),m("span",as,"Sin convocatoria"))]),_:2},1024),o(t(b),null,{default:a(()=>[o(t(I),{class:je(n.estado_color)},{default:a(()=>[i(l(n.estado_label),1)]),_:2},1032,["class"])]),_:2},1024),o(t(b),null,{default:a(()=>[n.total_campos>0?(u(),m("div",ns,[s("p",ls,l(n.campos_llenados)+" / "+l(n.total_campos),1),s("p",is," ("+l(n.porcentaje_completado)+"%) ",1)])):(u(),m("span",rs,"Sin configuración"))]),_:2},1024),o(t(b),null,{default:a(()=>[s("p",ds,l(me(n.updated_at)),1)]),_:2},1024),o(t(b),null,{default:a(()=>{var M;return[n.comentario_actual||n.comentarios_admin?(u(),m("div",us,[s("p",cs,l(t(Ue)(((M=n.comentario_actual)==null?void 0:M.comentario)||n.comentarios_admin||"")),1),s("div",ms,[n.comentario_actual?(u(),m("span",fs,l(n.comentario_actual.fecha_relativa),1)):h("",!0),n.total_comentarios&&n.total_comentarios>1?(u(),$(t(I),{key:1,variant:"secondary",class:"text-xs"},{default:a(()=>[i(" +"+l(n.total_comentarios-1)+" más ",1)]),_:2},1024)):h("",!0)])])):(u(),m("span",ps,"-"))]}),_:2},1024),o(t(b),{class:"text-right"},{default:a(()=>[o(t(te),null,{default:a(()=>[o(t(Z),null,{default:a(()=>[o(t(ee),{asChild:""},{default:a(()=>[s("a",{href:`/admin/candidaturas/${n.id}`,target:"_blank",rel:"noopener noreferrer"},[o(t(v),{variant:"outline",size:"sm"},{default:a(()=>[o(t(qe),{class:"mr-2 h-4 w-4"}),e[24]||(e[24]=i(" Ver candidatura ",-1)),o(t(Ie),{class:"ml-1 h-3 w-3"})]),_:1})],8,_s)]),_:2},1024),o(t(se),null,{default:a(()=>[...e[25]||(e[25]=[s("p",null,"Abrir en nueva ventana",-1)])]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),o(Me,{links:x.candidaturas.links},null,8,["links"])]),_:1})]),_:1}),o(t(H),{open:S.value,"onUpdate:open":e[3]||(e[3]=n=>S.value=n)},{default:a(()=>[o(t(K),{class:"sm:max-w-md"},{default:a(()=>[o(t(X),null,{default:a(()=>[o(t(G),{class:"flex items-center gap-2"},{default:a(()=>[o(t(U),{class:"h-5 w-5 text-orange-600"}),e[26]||(e[26]=i(" Enviar Recordatorios Masivos ",-1))]),_:1}),o(t(Q),null,{default:a(()=>[...e[27]||(e[27]=[i(" Envía recordatorios por correo y/o WhatsApp a todas las candidaturas en estado borrador. ",-1)])]),_:1})]),_:1}),s("div",vs,[s("div",xs,[s("div",gs,[o(t(oe),{class:"h-5 w-5 text-orange-600"}),e[28]||(e[28]=s("h3",{class:"font-medium text-orange-900"},"Candidaturas en Borrador",-1))]),s("div",bs,[s("div",hs,[e[29]||(e[29]=s("span",{class:"text-orange-700"},"Total en borrador:",-1)),s("span",ys,l(f.value.total_borradores),1)]),s("div",ks,[e[30]||(e[30]=s("span",{class:"text-orange-700"},"Con email:",-1)),s("span",ws,l(f.value.con_email),1)]),s("div",Cs,[e[31]||(e[31]=s("span",{class:"text-orange-700"},"Con teléfono:",-1)),s("span",$s,l(f.value.con_telefono),1)]),s("div",Es,[e[32]||(e[32]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",Ss,l(Math.max(0,f.value.total_borradores-Math.max(f.value.con_email,f.value.con_telefono))),1)])])]),s("div",As,[e[35]||(e[35]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de recordatorio:",-1)),s("div",js,[s("div",Ns,[o(t(T),{id:"include-email",checked:y.value,"onUpdate:checked":e[0]||(e[0]=n=>y.value=n),disabled:f.value.con_email===0},null,8,["checked","disabled"]),s("div",Ms,[o(t(F),{class:"h-4 w-4 text-blue-600"}),o(t(R),{for:"include-email",class:"flex-1"},{default:a(()=>[e[33]||(e[33]=i(" Correo electrónico ",-1)),s("span",Fs," ("+l(f.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",Rs,[o(t(T),{id:"include-whatsapp",checked:k.value,"onUpdate:checked":e[1]||(e[1]=n=>k.value=n),disabled:f.value.con_telefono===0},null,8,["checked","disabled"]),s("div",Ts,[o(t(ae),{class:"h-4 w-4 text-green-600"}),o(t(R),{for:"include-whatsapp",class:"flex-1"},{default:a(()=>[e[34]||(e[34]=i(" WhatsApp ",-1)),s("span",qs," ("+l(f.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[36]||(e[36]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Los mensajes se envían respetando los límites de velocidad configurados"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),o(t(Y),null,{default:a(()=>[o(t(v),{variant:"outline",onClick:e[2]||(e[2]=n=>S.value=!1),disabled:A.value},{default:a(()=>[...e[37]||(e[37]=[i(" Cancelar ",-1)])]),_:1},8,["disabled"]),o(t(v),{onClick:ve,disabled:A.value||f.value.total_borradores===0||!y.value&&!k.value,class:"bg-orange-600 hover:bg-orange-700"},{default:a(()=>[o(t(U),{class:"mr-2 h-4 w-4"}),i(" "+l(A.value?"Enviando...":`Enviar Recordatorios (${f.value.total_borradores})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),o(t(H),{open:j.value,"onUpdate:open":e[7]||(e[7]=n=>j.value=n)},{default:a(()=>[o(t(K),{class:"sm:max-w-md"},{default:a(()=>[o(t(X),null,{default:a(()=>[o(t(G),{class:"flex items-center gap-2"},{default:a(()=>[o(t(F),{class:"h-5 w-5 text-blue-600"}),e[38]||(e[38]=i(" Enviar Notificaciones de Estado ",-1))]),_:1}),o(t(Q),null,{default:a(()=>[...e[39]||(e[39]=[i(" Envía notificaciones por correo y/o WhatsApp a todas las candidaturas en estado pendiente de revisión. ",-1)])]),_:1})]),_:1}),s("div",Is,[s("div",Ws,[s("div",Us,[o(t(oe),{class:"h-5 w-5 text-blue-600"}),e[40]||(e[40]=s("h3",{class:"font-medium text-blue-900"},"Candidaturas Pendientes de Revisión",-1))]),s("div",Ls,[s("div",Ps,[e[41]||(e[41]=s("span",{class:"text-blue-700"},"Total pendientes:",-1)),s("span",Os,l(p.value.total_pendientes),1)]),s("div",Bs,[e[42]||(e[42]=s("span",{class:"text-blue-700"},"Con email:",-1)),s("span",Ds,l(p.value.con_email),1)]),s("div",Vs,[e[43]||(e[43]=s("span",{class:"text-blue-700"},"Con teléfono:",-1)),s("span",Js,l(p.value.con_telefono),1)]),s("div",zs,[e[44]||(e[44]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",Hs,l(Math.max(0,p.value.total_pendientes-Math.max(p.value.con_email,p.value.con_telefono))),1)])])]),s("div",Ks,[e[47]||(e[47]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de notificación:",-1)),s("div",Xs,[s("div",Gs,[o(t(T),{id:"include-email-notif",checked:w.value,"onUpdate:checked":e[4]||(e[4]=n=>w.value=n),disabled:p.value.con_email===0},null,8,["checked","disabled"]),s("div",Qs,[o(t(F),{class:"h-4 w-4 text-blue-600"}),o(t(R),{for:"include-email-notif",class:"flex-1"},{default:a(()=>[e[45]||(e[45]=i(" Correo electrónico ",-1)),s("span",Ys," ("+l(p.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",Zs,[o(t(T),{id:"include-whatsapp-notif",checked:C.value,"onUpdate:checked":e[5]||(e[5]=n=>C.value=n),disabled:p.value.con_telefono===0},null,8,["checked","disabled"]),s("div",et,[o(t(ae),{class:"h-4 w-4 text-green-600"}),o(t(R),{for:"include-whatsapp-notif",class:"flex-1"},{default:a(()=>[e[46]||(e[46]=i(" WhatsApp ",-1)),s("span",st," ("+l(p.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[48]||(e[48]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Se notificará que la candidatura fue recibida exitosamente"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),o(t(Y),null,{default:a(()=>[o(t(v),{variant:"outline",onClick:e[6]||(e[6]=n=>j.value=!1),disabled:N.value},{default:a(()=>[...e[49]||(e[49]=[i(" Cancelar ",-1)])]),_:1},8,["disabled"]),o(t(v),{onClick:_e,disabled:N.value||p.value.total_pendientes===0||!w.value&&!C.value,class:"bg-blue-600 hover:bg-blue-700"},{default:a(()=>[o(t(F),{class:"mr-2 h-4 w-4"}),i(" "+l(N.value?"Enviando...":`Enviar Notificaciones (${p.value.total_pendientes})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1})],64))}});export{vo as default};
