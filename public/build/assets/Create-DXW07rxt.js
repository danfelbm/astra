import{_ as W}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DjfisSTq.js";import{d as H,C as J,r as C,c as K,m as Q,i as d,e as m,f as o,u as l,p as X,w as i,g as s,b as D,j as x,h as r,t as y,F as $,k as B,n as Y,W as Z}from"./app-CbA_dzrH.js";import{_ as U}from"./createLucideIcon-0y3HvBb2.js";import{_,a as c,b as v,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dpl1EP6e.js";import{_ as g}from"./CardDescription.vue_vue_type_script_setup_true_lang-FdnBhRW4.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-Dw2oMjuZ.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-BHOcaT7W.js";import{_ as P}from"./Textarea.vue_vue_type_script_setup_true_lang-DNuak2_2.js";import{_ as j,a as w,b as k,c as E,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-C7VbuHoF.js";import{_ as S}from"./Switch.vue_vue_type_script_setup_true_lang-DIYSDipo.js";import{_ as h,a as ll,b as N,c as q}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-nmj-UEmO.js";import{_ as el,a as ol}from"./index-CMryySum.js";import{D as il}from"./DynamicFormBuilder-Bs1vjmgg.js";import{A as tl}from"./arrow-left-DWk22nOp.js";import{E as al}from"./eye-CuQC-PD5.js";import{S as rl}from"./save-CybCtRtH.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-C4x6rJ8B.js";import"./index-D-PGeZ3t.js";import"./floating-ui.vue-D3EH1Xba.js";import"./x-CxSWfWOJ.js";import"./index-BGfSt6nP.js";import"./shield-yBic2gp-.js";import"./user-BnDczykq.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-H44qAxpr.js";import"./chevron-right-pq_ChJ0s.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-H8FdC1v8.js";import"./VisuallyHidden-BOU54Fpc.js";import"./index-DzUkqZxm.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-fWHHAQt9.js";import"./index-CXCj42Z3.js";import"./circle-alert-CfNQ3Vlu.js";import"./map-pin-B0r5dLQM.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-nF_8TJte.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CPMNIlI6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-B4CsJOKK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BZUuILpY.js";import"./tag-DBRua3DS.js";import"./users-DLZP89St.js";import"./target-B8OPFMH2.js";import"./vote-5ymqB6Fb.js";import"./folder-open-B03CPFE8.js";import"./send-BUC0oswk.js";import"./file-text-DINmkRZl.js";import"./briefcase-BEGziJue.js";import"./calendar-BOFnEXb6.js";import"./megaphone-CDZIxwTF.js";import"./user-check-B3Jm4jmh.js";import"./clipboard-list-wMp9Eq1A.js";import"./mail-I3hCy8Tx.js";import"./message-square-RBI0Tfwc.js";import"./external-link-CKKN5QSr.js";import"./panel-left-ivBXt___.js";import"./index-MuREUf8q.js";import"./check-8t2yOxAa.js";import"./index-DPtKDKxs.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHiddenInput-BL93f7Ht.js";import"./RovingFocusItem-CIXcS1m3.js";import"./utils-D2aazO7p.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-mf8fWrST.js";import"./plus-D-GKCu6A.js";import"./trash-2-di4yGiJv.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-C3DQB5Q7.js";import"./circle-CCE7nO6y.js";import"./grip-vertical-BDhhBhlN.js";import"./git-branch-D5Lhr9_s.js";import"./square-pen-CVrov98_.js";import"./copy-CisGHgxy.js";const sl={class:"p-6"},ul={class:"mb-6 flex items-center justify-between"},nl={class:"flex gap-2"},ml={class:"list-disc list-inside"},dl={key:0,class:"text-sm text-destructive mt-1"},fl={class:"flex items-center justify-between"},pl={class:"space-y-0.5"},_l={key:0,class:"flex items-center justify-between"},cl={class:"space-y-0.5"},vl={class:"grid grid-cols-2 gap-4"},Vl={class:"grid grid-cols-2 gap-4"},gl={class:"flex items-center justify-between"},bl={class:"space-y-0.5"},Ne=H({__name:"Create",props:{categorias:{},convocatorias:{}},setup(T){const I=T,L=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Formularios",href:"/admin/formularios"},{title:"Crear",href:"#"}],t=J({titulo:"",descripcion:"",categoria_id:null,configuracion_campos:[],configuracion_general:{},tipo_acceso:"autenticado",permite_visitantes:!1,requiere_captcha:!0,fecha_inicio:null,fecha_fin:null,limite_respuestas:null,limite_por_usuario:1,emails_notificacion:[],mensaje_confirmacion:"",estado:"borrador",activo:!0}),A=C("informacion"),b=C(""),F=C(!1),M=K(()=>t.titulo&&t.configuracion_campos.length>0&&t.limite_por_usuario>=1),O=()=>{b.value&&(t.emails_notificacion=b.value.split(",").map(n=>n.trim()).filter(n=>n.length>0)),t.post(route("admin.formularios.store"),{preserveScroll:!0,onError:()=>{}})},z=()=>{Z.get(route("admin.formularios.index"))},R=n=>{t.configuracion_campos=n};return Q(()=>t.fecha_inicio,n=>{n&&t.fecha_fin&&n>t.fecha_fin&&(t.fecha_fin=null)}),(n,e)=>(m(),d($,null,[o(l(X),{title:"Crear Formulario"}),o(W,{breadcrumbs:L},{default:i(()=>[s("div",sl,[s("div",ul,[e[19]||(e[19]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Crear Formulario"),s("p",{class:"text-muted-foreground"}," Configura un nuevo formulario dinámico ")],-1)),s("div",nl,[o(l(U),{variant:"outline",onClick:z},{default:i(()=>[o(l(tl),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=r(" Cancelar ",-1))]),_:1}),o(l(U),{onClick:e[0]||(e[0]=a=>F.value=!F.value),variant:"outline"},{default:i(()=>[o(l(al),{class:"mr-2 h-4 w-4"}),r(" "+y(F.value?"Ocultar":"Ver")+" Vista Previa ",1)]),_:1}),o(l(U),{onClick:O,disabled:l(t).processing||!M.value},{default:i(()=>[o(l(rl),{class:"mr-2 h-4 w-4"}),e[18]||(e[18]=r(" Guardar Formulario ",-1))]),_:1},8,["disabled"])])]),l(t).errors&&Object.keys(l(t).errors).length>0?(m(),D(l(el),{key:0,class:"mb-6",variant:"destructive"},{default:i(()=>[o(l(ol),null,{default:i(()=>[s("ul",ml,[(m(!0),d($,null,B(l(t).errors,(a,G)=>(m(),d("li",{key:G},y(a),1))),128))])]),_:1})]),_:1})):x("",!0),o(l(h),{modelValue:A.value,"onUpdate:modelValue":e[16]||(e[16]=a=>A.value=a),class:"space-y-6"},{default:i(()=>[o(l(ll),{class:"grid w-full grid-cols-2"},{default:i(()=>[o(l(N),{value:"informacion"},{default:i(()=>[...e[20]||(e[20]=[r("Información General",-1)])]),_:1}),o(l(N),{value:"formulario"},{default:i(()=>[...e[21]||(e[21]=[r("Constructor de Formulario",-1)])]),_:1})]),_:1}),o(l(q),{value:"informacion",class:"space-y-6"},{default:i(()=>[o(l(_),null,{default:i(()=>[o(l(c),null,{default:i(()=>[o(l(v),null,{default:i(()=>[...e[22]||(e[22]=[r("Información Básica",-1)])]),_:1}),o(l(g),null,{default:i(()=>[...e[23]||(e[23]=[r(" Define los datos principales del formulario ",-1)])]),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[s("div",null,[o(l(u),{htmlFor:"titulo"},{default:i(()=>[...e[24]||(e[24]=[r("Título *",-1)])]),_:1}),o(l(f),{id:"titulo",modelValue:l(t).titulo,"onUpdate:modelValue":e[1]||(e[1]=a=>l(t).titulo=a),placeholder:"Ej: Encuesta de Satisfacción",class:Y({"border-destructive":l(t).errors.titulo})},null,8,["modelValue","class"]),l(t).errors.titulo?(m(),d("p",dl,y(l(t).errors.titulo),1)):x("",!0)]),s("div",null,[o(l(u),{htmlFor:"descripcion"},{default:i(()=>[...e[25]||(e[25]=[r("Descripción",-1)])]),_:1}),o(l(P),{id:"descripcion",modelValue:l(t).descripcion,"onUpdate:modelValue":e[2]||(e[2]=a=>l(t).descripcion=a),placeholder:"Describe el propósito del formulario",rows:"3"},null,8,["modelValue"])]),s("div",null,[o(l(u),{htmlFor:"categoria"},{default:i(()=>[...e[26]||(e[26]=[r("Categoría",-1)])]),_:1}),o(l(j),{modelValue:l(t).categoria_id,"onUpdate:modelValue":e[3]||(e[3]=a=>l(t).categoria_id=a)},{default:i(()=>[o(l(w),{id:"categoria"},{default:i(()=>[o(l(k),{placeholder:"Selecciona una categoría"})]),_:1}),o(l(E),null,{default:i(()=>[(m(!0),d($,null,B(n.categorias,a=>(m(),D(l(p),{key:a.id,value:a.id.toString()},{default:i(()=>[r(y(a.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),o(l(_),null,{default:i(()=>[o(l(c),null,{default:i(()=>[o(l(v),null,{default:i(()=>[...e[27]||(e[27]=[r("Control de Acceso",-1)])]),_:1}),o(l(g),null,{default:i(()=>[...e[28]||(e[28]=[r(" Define quién puede llenar el formulario ",-1)])]),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[s("div",null,[o(l(u),{htmlFor:"tipo_acceso"},{default:i(()=>[...e[29]||(e[29]=[r("Tipo de Acceso",-1)])]),_:1}),o(l(j),{modelValue:l(t).tipo_acceso,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).tipo_acceso=a)},{default:i(()=>[o(l(w),{id:"tipo_acceso"},{default:i(()=>[o(l(k))]),_:1}),o(l(E),null,{default:i(()=>[o(l(p),{value:"publico"},{default:i(()=>[...e[30]||(e[30]=[r("Público",-1)])]),_:1}),o(l(p),{value:"autenticado"},{default:i(()=>[...e[31]||(e[31]=[r("Usuarios Autenticados",-1)])]),_:1}),o(l(p),{value:"con_permiso"},{default:i(()=>[...e[32]||(e[32]=[r("Con Permiso Específico",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",fl,[s("div",pl,[o(l(u),null,{default:i(()=>[...e[33]||(e[33]=[r("Permitir Visitantes",-1)])]),_:1}),e[34]||(e[34]=s("p",{class:"text-sm text-muted-foreground"}," Usuarios no autenticados pueden llenar el formulario ",-1))]),o(l(S),{modelValue:l(t).permite_visitantes,"onUpdate:modelValue":e[5]||(e[5]=a=>l(t).permite_visitantes=a)},null,8,["modelValue"])]),l(t).permite_visitantes?(m(),d("div",_l,[s("div",cl,[o(l(u),null,{default:i(()=>[...e[35]||(e[35]=[r("Requiere Captcha",-1)])]),_:1}),e[36]||(e[36]=s("p",{class:"text-sm text-muted-foreground"}," Protección contra bots para visitantes ",-1))]),o(l(S),{modelValue:l(t).requiere_captcha,"onUpdate:modelValue":e[6]||(e[6]=a=>l(t).requiere_captcha=a)},null,8,["modelValue"])])):x("",!0)]),_:1})]),_:1}),o(l(_),null,{default:i(()=>[o(l(c),null,{default:i(()=>[o(l(v),null,{default:i(()=>[...e[37]||(e[37]=[r("Vigencia y Límites",-1)])]),_:1}),o(l(g),null,{default:i(()=>[...e[38]||(e[38]=[r(" Controla la disponibilidad del formulario ",-1)])]),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[s("div",vl,[s("div",null,[o(l(u),{htmlFor:"fecha_inicio"},{default:i(()=>[...e[39]||(e[39]=[r("Fecha de Inicio",-1)])]),_:1}),o(l(f),{id:"fecha_inicio",type:"datetime-local",modelValue:l(t).fecha_inicio,"onUpdate:modelValue":e[7]||(e[7]=a=>l(t).fecha_inicio=a)},null,8,["modelValue"])]),s("div",null,[o(l(u),{htmlFor:"fecha_fin"},{default:i(()=>[...e[40]||(e[40]=[r("Fecha de Fin",-1)])]),_:1}),o(l(f),{id:"fecha_fin",type:"datetime-local",modelValue:l(t).fecha_fin,"onUpdate:modelValue":e[8]||(e[8]=a=>l(t).fecha_fin=a),min:l(t).fecha_inicio},null,8,["modelValue","min"])])]),s("div",Vl,[s("div",null,[o(l(u),{htmlFor:"limite_respuestas"},{default:i(()=>[...e[41]||(e[41]=[r("Límite Total de Respuestas",-1)])]),_:1}),o(l(f),{id:"limite_respuestas",type:"number",modelValue:l(t).limite_respuestas,"onUpdate:modelValue":e[9]||(e[9]=a=>l(t).limite_respuestas=a),modelModifiers:{number:!0},placeholder:"Sin límite",min:"1"},null,8,["modelValue"])]),s("div",null,[o(l(u),{htmlFor:"limite_por_usuario"},{default:i(()=>[...e[42]||(e[42]=[r("Respuestas por Usuario *",-1)])]),_:1}),o(l(f),{id:"limite_por_usuario",type:"number",modelValue:l(t).limite_por_usuario,"onUpdate:modelValue":e[10]||(e[10]=a=>l(t).limite_por_usuario=a),modelModifiers:{number:!0},min:"1"},null,8,["modelValue"])])])]),_:1})]),_:1}),o(l(_),null,{default:i(()=>[o(l(c),null,{default:i(()=>[o(l(v),null,{default:i(()=>[...e[43]||(e[43]=[r("Configuración Adicional",-1)])]),_:1}),o(l(g),null,{default:i(()=>[...e[44]||(e[44]=[r(" Opciones avanzadas del formulario ",-1)])]),_:1})]),_:1}),o(l(V),{class:"space-y-4"},{default:i(()=>[s("div",null,[o(l(u),{htmlFor:"estado"},{default:i(()=>[...e[45]||(e[45]=[r("Estado Inicial",-1)])]),_:1}),o(l(j),{modelValue:l(t).estado,"onUpdate:modelValue":e[11]||(e[11]=a=>l(t).estado=a)},{default:i(()=>[o(l(w),{id:"estado"},{default:i(()=>[o(l(k))]),_:1}),o(l(E),null,{default:i(()=>[o(l(p),{value:"borrador"},{default:i(()=>[...e[46]||(e[46]=[r("Borrador",-1)])]),_:1}),o(l(p),{value:"publicado"},{default:i(()=>[...e[47]||(e[47]=[r("Publicado",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[o(l(u),{htmlFor:"emails"},{default:i(()=>[...e[48]||(e[48]=[r("Emails de Notificación",-1)])]),_:1}),o(l(f),{id:"emails",modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=a=>b.value=a),placeholder:"email1@ejemplo.com, email2@ejemplo.com"},null,8,["modelValue"]),e[49]||(e[49]=s("p",{class:"text-sm text-muted-foreground mt-1"}," Separa múltiples emails con comas ",-1))]),s("div",null,[o(l(u),{htmlFor:"mensaje"},{default:i(()=>[...e[50]||(e[50]=[r("Mensaje de Confirmación",-1)])]),_:1}),o(l(P),{id:"mensaje",modelValue:l(t).mensaje_confirmacion,"onUpdate:modelValue":e[13]||(e[13]=a=>l(t).mensaje_confirmacion=a),placeholder:"Mensaje personalizado al completar el formulario",rows:"3"},null,8,["modelValue"])]),s("div",gl,[s("div",bl,[o(l(u),null,{default:i(()=>[...e[51]||(e[51]=[r("Formulario Activo",-1)])]),_:1}),e[52]||(e[52]=s("p",{class:"text-sm text-muted-foreground"}," El formulario estará disponible ",-1))]),o(l(S),{modelValue:l(t).activo,"onUpdate:modelValue":e[14]||(e[14]=a=>l(t).activo=a)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),o(l(q),{value:"formulario",class:"space-y-6"},{default:i(()=>[o(l(_),null,{default:i(()=>[o(l(c),null,{default:i(()=>[o(l(v),null,{default:i(()=>[...e[53]||(e[53]=[r("Constructor de Formulario",-1)])]),_:1}),o(l(g),null,{default:i(()=>[...e[54]||(e[54]=[r(" Arrastra y suelta campos para construir tu formulario ",-1)])]),_:1})]),_:1}),o(l(V),null,{default:i(()=>[o(il,{modelValue:l(t).configuracion_campos,"onUpdate:modelValue":[e[15]||(e[15]=a=>l(t).configuracion_campos=a),R],disabled:!1,showEditableOption:!0,"show-convocatoria-config":!0,convocatorias:I.convocatorias||[],context:"formulario"},null,8,["modelValue","convocatorias"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Ne as default};
