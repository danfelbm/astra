import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CHoqJ1Vs.js";import{d as W,u as X,r as $,o as Y,c as Z,p as h,i as p,e as i,f as o,q as oo,w as e,g as s,b as w,j as x,h as r,t as v,m as d,F as C,k as M,n as lo,s as io}from"./app-DN6QmyVA.js";import{_ as E}from"./createLucideIcon-bHN-Vr8r.js";import{_ as V,a as g,b,c as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-CF8Wn-Rb.js";import{_ as F}from"./CardDescription.vue_vue_type_script_setup_true_lang-tXUYC_qK.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-Cls_3VRI.js";import{_ as n}from"./Label.vue_vue_type_script_setup_true_lang-BwFmXIqv.js";import{_ as N}from"./Textarea.vue_vue_type_script_setup_true_lang-BTJJeohk.js";import{_ as k,a as A,b as S,c as D,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-B2Cx1TMz.js";import{_ as P}from"./Switch.vue_vue_type_script_setup_true_lang-Cx_F2U_L.js";import{_ as eo,a as ao,b as T,c as L}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DyKnPcpR.js";import{_ as O,a as R}from"./index-Bq7UKJDk.js";import{D as to}from"./DynamicFormBuilder-yRsVyQgu.js";import{A as ro}from"./arrow-left-Dh2XOgPa.js";import{E as so}from"./eye-Kqm1vJJB.js";import{S as uo}from"./save-Bq3NuywH.js";import"./useFlashMessages-CBs6aChg.js";import"./index-NrU4D0lu.js";import"./floating-ui.vue-CTSZ85Lh.js";import"./x-Cm0qExSY.js";import"./index-D9EymtZh.js";import"./shield-B2_nKIiu.js";import"./user-CwFkxtf0.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BYp6j_hm.js";import"./chevron-right-T26P7ixS.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BwTHlVZ5.js";import"./VisuallyHidden--r213FwR.js";import"./index-Cs5j4r3l.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D65AShpu.js";import"./index-DgF4TGuY.js";import"./circle-alert-Bu4ClAN_.js";import"./map-pin-DfCpEIxd.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Me-jLM3d.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-EfS_-3Lb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-4OFPGav-.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Def9XNBM.js";import"./tag--jnVc7eU.js";import"./users-WMBZV_7W.js";import"./target-D0C8ALTL.js";import"./vote-CpB7URoM.js";import"./folder-open-xJpIHsw6.js";import"./send-DySB3ayg.js";import"./file-text-D4mPBax1.js";import"./briefcase-Ckb63ktQ.js";import"./calendar-DyqJwdM-.js";import"./megaphone-BBE9Y1S6.js";import"./user-check-BPod1YIP.js";import"./clipboard-list-CM2vRH0S.js";import"./mail-DJEwOtRX.js";import"./message-square-D7fp1M5W.js";import"./external-link-BG9mUbSP.js";import"./panel-left-D0FOsElT.js";import"./index-C3ml343d.js";import"./check-DKiVvNo7.js";import"./index-RgZvykRC.js";import"./VisuallyHiddenInput-Cp9pc_Sr.js";import"./RovingFocusItem-D2Fxh2O3.js";import"./utils-npjear8W.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BU0iMVSL.js";import"./plus-CO9XhxJV.js";import"./trash-2-HsKE2Sb3.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-CL_iEmST.js";import"./circle-CQasbBNC.js";import"./grip-vertical-Dhks9J1n.js";import"./git-branch-C8q64_NG.js";import"./square-pen-BfxThS9P.js";import"./copy-B5fTxO_J.js";const no={class:"p-6"},mo={class:"mb-6 flex items-center justify-between"},fo={class:"flex gap-2"},po={class:"list-disc list-inside"},_o={key:0,class:"text-sm text-destructive mt-1"},co={class:"flex items-center justify-between"},vo={class:"space-y-0.5"},Vo={key:0,class:"flex items-center justify-between"},go={class:"space-y-0.5"},bo={class:"grid grid-cols-2 gap-4"},yo={class:"grid grid-cols-2 gap-4"},Fo={class:"flex items-center justify-between"},$o={class:"space-y-0.5"},Nl=W({__name:"Edit",props:{formulario:{},categorias:{},convocatorias:{}},setup(q){const u=q,z=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Formularios",href:"/admin/formularios"},{title:"Editar",href:"#"}],a=X({titulo:u.formulario.titulo,descripcion:u.formulario.descripcion||"",categoria_id:u.formulario.categoria_id||null,configuracion_campos:u.formulario.configuracion_campos||[],configuracion_general:u.formulario.configuracion_general||{},tipo_acceso:u.formulario.tipo_acceso,permite_visitantes:u.formulario.permite_visitantes,requiere_captcha:u.formulario.requiere_captcha,fecha_inicio:u.formulario.fecha_inicio||null,fecha_fin:u.formulario.fecha_fin||null,limite_respuestas:u.formulario.limite_respuestas||null,limite_por_usuario:u.formulario.limite_por_usuario,emails_notificacion:u.formulario.emails_notificacion||[],mensaje_confirmacion:u.formulario.mensaje_confirmacion||"",estado:u.formulario.estado,activo:u.formulario.activo,_method:"PUT"}),B=$("informacion"),c=$(""),U=$(!1),j=$("");Y(()=>{u.formulario.emails_notificacion&&u.formulario.emails_notificacion.length>0&&(c.value=u.formulario.emails_notificacion.join(", ")),j.value=`${window.location.origin}/formularios/${u.formulario.slug}`});const I=Z(()=>a.titulo&&a.configuracion_campos.length>0&&a.limite_por_usuario>=1),G=()=>{c.value?a.emails_notificacion=c.value.split(",").map(m=>m.trim()).filter(m=>m.length>0):a.emails_notificacion=[],a.post(route("admin.formularios.update",u.formulario.id),{preserveScroll:!0,onError:()=>{}})},H=()=>{io.get(route("admin.formularios.index"))},J=m=>{a.configuracion_campos=m};return h(()=>a.fecha_inicio,m=>{m&&a.fecha_fin&&m>a.fecha_fin&&(a.fecha_fin=null)}),(m,l)=>(d(),p(C,null,[i(o(oo),{title:"Editar Formulario"}),i(Q,{breadcrumbs:z},{default:e(()=>[s("div",no,[s("div",mo,[l[19]||(l[19]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Editar Formulario"),s("p",{class:"text-muted-foreground"}," Modifica la configuración del formulario ")],-1)),s("div",fo,[i(o(E),{variant:"outline",onClick:H},{default:e(()=>[i(o(ro),{class:"mr-2 h-4 w-4"}),l[17]||(l[17]=r(" Cancelar ",-1))]),_:1}),i(o(E),{onClick:l[0]||(l[0]=t=>U.value=!U.value),variant:"outline"},{default:e(()=>[i(o(so),{class:"mr-2 h-4 w-4"}),r(" "+v(U.value?"Ocultar":"Ver")+" Vista Previa ",1)]),_:1}),i(o(E),{onClick:G,disabled:o(a).processing||!I.value},{default:e(()=>[i(o(uo),{class:"mr-2 h-4 w-4"}),l[18]||(l[18]=r(" Guardar Cambios ",-1))]),_:1},8,["disabled"])])]),j.value?(d(),w(o(O),{key:0,class:"mb-6"},{default:e(()=>[i(o(R),null,{default:e(()=>[l[20]||(l[20]=s("strong",null,"URL pública:",-1)),r(" "+v(j.value),1)]),_:1})]),_:1})):x("",!0),o(a).errors&&Object.keys(o(a).errors).length>0?(d(),w(o(O),{key:1,class:"mb-6",variant:"destructive"},{default:e(()=>[i(o(R),null,{default:e(()=>[s("ul",po,[(d(!0),p(C,null,M(o(a).errors,(t,K)=>(d(),p("li",{key:K},v(t),1))),128))])]),_:1})]),_:1})):x("",!0),i(o(eo),{modelValue:B.value,"onUpdate:modelValue":l[16]||(l[16]=t=>B.value=t),class:"space-y-6"},{default:e(()=>[i(o(ao),{class:"grid w-full grid-cols-2"},{default:e(()=>[i(o(T),{value:"informacion"},{default:e(()=>[...l[21]||(l[21]=[r("Información General",-1)])]),_:1}),i(o(T),{value:"formulario"},{default:e(()=>[...l[22]||(l[22]=[r("Constructor de Formulario",-1)])]),_:1})]),_:1}),i(o(L),{value:"informacion",class:"space-y-6"},{default:e(()=>[i(o(V),null,{default:e(()=>[i(o(g),null,{default:e(()=>[i(o(b),null,{default:e(()=>[...l[23]||(l[23]=[r("Información Básica",-1)])]),_:1}),i(o(F),null,{default:e(()=>[...l[24]||(l[24]=[r(" Define los datos principales del formulario ",-1)])]),_:1})]),_:1}),i(o(y),{class:"space-y-4"},{default:e(()=>[s("div",null,[i(o(n),{htmlFor:"titulo"},{default:e(()=>[...l[25]||(l[25]=[r("Título *",-1)])]),_:1}),i(o(_),{id:"titulo",modelValue:o(a).titulo,"onUpdate:modelValue":l[1]||(l[1]=t=>o(a).titulo=t),placeholder:"Ej: Encuesta de Satisfacción",class:lo({"border-destructive":o(a).errors.titulo})},null,8,["modelValue","class"]),o(a).errors.titulo?(d(),p("p",_o,v(o(a).errors.titulo),1)):x("",!0)]),s("div",null,[i(o(n),{htmlFor:"descripcion"},{default:e(()=>[...l[26]||(l[26]=[r("Descripción",-1)])]),_:1}),i(o(N),{id:"descripcion",modelValue:o(a).descripcion,"onUpdate:modelValue":l[2]||(l[2]=t=>o(a).descripcion=t),placeholder:"Describe el propósito del formulario",rows:"3"},null,8,["modelValue"])]),s("div",null,[i(o(n),{htmlFor:"categoria"},{default:e(()=>[...l[27]||(l[27]=[r("Categoría",-1)])]),_:1}),i(o(k),{modelValue:o(a).categoria_id,"onUpdate:modelValue":l[3]||(l[3]=t=>o(a).categoria_id=t)},{default:e(()=>[i(o(A),{id:"categoria"},{default:e(()=>[i(o(S),{placeholder:"Selecciona una categoría"})]),_:1}),i(o(D),null,{default:e(()=>[(d(!0),p(C,null,M(q.categorias,t=>(d(),w(o(f),{key:t.id,value:t.id.toString()},{default:e(()=>[r(v(t.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),i(o(V),null,{default:e(()=>[i(o(g),null,{default:e(()=>[i(o(b),null,{default:e(()=>[...l[28]||(l[28]=[r("Control de Acceso",-1)])]),_:1}),i(o(F),null,{default:e(()=>[...l[29]||(l[29]=[r(" Define quién puede llenar el formulario ",-1)])]),_:1})]),_:1}),i(o(y),{class:"space-y-4"},{default:e(()=>[s("div",null,[i(o(n),{htmlFor:"tipo_acceso"},{default:e(()=>[...l[30]||(l[30]=[r("Tipo de Acceso",-1)])]),_:1}),i(o(k),{modelValue:o(a).tipo_acceso,"onUpdate:modelValue":l[4]||(l[4]=t=>o(a).tipo_acceso=t)},{default:e(()=>[i(o(A),{id:"tipo_acceso"},{default:e(()=>[i(o(S))]),_:1}),i(o(D),null,{default:e(()=>[i(o(f),{value:"publico"},{default:e(()=>[...l[31]||(l[31]=[r("Público",-1)])]),_:1}),i(o(f),{value:"autenticado"},{default:e(()=>[...l[32]||(l[32]=[r("Usuarios Autenticados",-1)])]),_:1}),i(o(f),{value:"con_permiso"},{default:e(()=>[...l[33]||(l[33]=[r("Con Permiso Específico",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",co,[s("div",vo,[i(o(n),null,{default:e(()=>[...l[34]||(l[34]=[r("Permitir Visitantes",-1)])]),_:1}),l[35]||(l[35]=s("p",{class:"text-sm text-muted-foreground"}," Usuarios no autenticados pueden llenar el formulario ",-1))]),i(o(P),{modelValue:o(a).permite_visitantes,"onUpdate:modelValue":l[5]||(l[5]=t=>o(a).permite_visitantes=t)},null,8,["modelValue"])]),o(a).permite_visitantes?(d(),p("div",Vo,[s("div",go,[i(o(n),null,{default:e(()=>[...l[36]||(l[36]=[r("Requiere Captcha",-1)])]),_:1}),l[37]||(l[37]=s("p",{class:"text-sm text-muted-foreground"}," Protección contra bots para visitantes ",-1))]),i(o(P),{modelValue:o(a).requiere_captcha,"onUpdate:modelValue":l[6]||(l[6]=t=>o(a).requiere_captcha=t)},null,8,["modelValue"])])):x("",!0)]),_:1})]),_:1}),i(o(V),null,{default:e(()=>[i(o(g),null,{default:e(()=>[i(o(b),null,{default:e(()=>[...l[38]||(l[38]=[r("Vigencia y Límites",-1)])]),_:1}),i(o(F),null,{default:e(()=>[...l[39]||(l[39]=[r(" Controla la disponibilidad del formulario ",-1)])]),_:1})]),_:1}),i(o(y),{class:"space-y-4"},{default:e(()=>[s("div",bo,[s("div",null,[i(o(n),{htmlFor:"fecha_inicio"},{default:e(()=>[...l[40]||(l[40]=[r("Fecha de Inicio",-1)])]),_:1}),i(o(_),{id:"fecha_inicio",type:"datetime-local",modelValue:o(a).fecha_inicio,"onUpdate:modelValue":l[7]||(l[7]=t=>o(a).fecha_inicio=t)},null,8,["modelValue"])]),s("div",null,[i(o(n),{htmlFor:"fecha_fin"},{default:e(()=>[...l[41]||(l[41]=[r("Fecha de Fin",-1)])]),_:1}),i(o(_),{id:"fecha_fin",type:"datetime-local",modelValue:o(a).fecha_fin,"onUpdate:modelValue":l[8]||(l[8]=t=>o(a).fecha_fin=t),min:o(a).fecha_inicio},null,8,["modelValue","min"])])]),s("div",yo,[s("div",null,[i(o(n),{htmlFor:"limite_respuestas"},{default:e(()=>[...l[42]||(l[42]=[r("Límite Total de Respuestas",-1)])]),_:1}),i(o(_),{id:"limite_respuestas",type:"number",modelValue:o(a).limite_respuestas,"onUpdate:modelValue":l[9]||(l[9]=t=>o(a).limite_respuestas=t),modelModifiers:{number:!0},placeholder:"Sin límite",min:"1"},null,8,["modelValue"])]),s("div",null,[i(o(n),{htmlFor:"limite_por_usuario"},{default:e(()=>[...l[43]||(l[43]=[r("Respuestas por Usuario *",-1)])]),_:1}),i(o(_),{id:"limite_por_usuario",type:"number",modelValue:o(a).limite_por_usuario,"onUpdate:modelValue":l[10]||(l[10]=t=>o(a).limite_por_usuario=t),modelModifiers:{number:!0},min:"1"},null,8,["modelValue"])])])]),_:1})]),_:1}),i(o(V),null,{default:e(()=>[i(o(g),null,{default:e(()=>[i(o(b),null,{default:e(()=>[...l[44]||(l[44]=[r("Configuración Adicional",-1)])]),_:1}),i(o(F),null,{default:e(()=>[...l[45]||(l[45]=[r(" Opciones avanzadas del formulario ",-1)])]),_:1})]),_:1}),i(o(y),{class:"space-y-4"},{default:e(()=>[s("div",null,[i(o(n),{htmlFor:"estado"},{default:e(()=>[...l[46]||(l[46]=[r("Estado",-1)])]),_:1}),i(o(k),{modelValue:o(a).estado,"onUpdate:modelValue":l[11]||(l[11]=t=>o(a).estado=t)},{default:e(()=>[i(o(A),{id:"estado"},{default:e(()=>[i(o(S))]),_:1}),i(o(D),null,{default:e(()=>[i(o(f),{value:"borrador"},{default:e(()=>[...l[47]||(l[47]=[r("Borrador",-1)])]),_:1}),i(o(f),{value:"publicado"},{default:e(()=>[...l[48]||(l[48]=[r("Publicado",-1)])]),_:1}),i(o(f),{value:"archivado"},{default:e(()=>[...l[49]||(l[49]=[r("Archivado",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[i(o(n),{htmlFor:"emails"},{default:e(()=>[...l[50]||(l[50]=[r("Emails de Notificación",-1)])]),_:1}),i(o(_),{id:"emails",modelValue:c.value,"onUpdate:modelValue":l[12]||(l[12]=t=>c.value=t),placeholder:"email1@ejemplo.com, email2@ejemplo.com"},null,8,["modelValue"]),l[51]||(l[51]=s("p",{class:"text-sm text-muted-foreground mt-1"}," Separa múltiples emails con comas ",-1))]),s("div",null,[i(o(n),{htmlFor:"mensaje"},{default:e(()=>[...l[52]||(l[52]=[r("Mensaje de Confirmación",-1)])]),_:1}),i(o(N),{id:"mensaje",modelValue:o(a).mensaje_confirmacion,"onUpdate:modelValue":l[13]||(l[13]=t=>o(a).mensaje_confirmacion=t),placeholder:"Mensaje personalizado al completar el formulario",rows:"3"},null,8,["modelValue"])]),s("div",Fo,[s("div",$o,[i(o(n),null,{default:e(()=>[...l[53]||(l[53]=[r("Formulario Activo",-1)])]),_:1}),l[54]||(l[54]=s("p",{class:"text-sm text-muted-foreground"}," El formulario estará disponible ",-1))]),i(o(P),{modelValue:o(a).activo,"onUpdate:modelValue":l[14]||(l[14]=t=>o(a).activo=t)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),i(o(L),{value:"formulario",class:"space-y-6"},{default:e(()=>[i(o(V),null,{default:e(()=>[i(o(g),null,{default:e(()=>[i(o(b),null,{default:e(()=>[...l[55]||(l[55]=[r("Constructor de Formulario",-1)])]),_:1}),i(o(F),null,{default:e(()=>[...l[56]||(l[56]=[r(" Arrastra y suelta campos para construir tu formulario ",-1)])]),_:1})]),_:1}),i(o(y),null,{default:e(()=>[i(to,{modelValue:o(a).configuracion_campos,"onUpdate:modelValue":[l[15]||(l[15]=t=>o(a).configuracion_campos=t),J],disabled:!1,showEditableOption:!0,"show-convocatoria-config":!0,convocatorias:u.convocatorias||[],context:"formulario"},null,8,["modelValue","convocatorias"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Nl as default};
