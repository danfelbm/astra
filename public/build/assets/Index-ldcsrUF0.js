import{_ as D}from"./UserLayout.vue_vue_type_script_setup_true_lang-B2YCzwUM.js";import{d as I,r as C,m as G,c as B,i as v,e as n,F as $,g as m,b as c,j as f,f as s,u as e,w as l,h as u,k as M,t as V,G as O,p as R,n as S,W as L}from"./app-CNsNbJaU.js";import{_ as W}from"./VotacionGrid.vue_vue_type_script_setup_true_lang-CUJD1yRS.js";import{l as X}from"./lodash-BRV03cAB.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-CIE9aHh6.js";import{_}from"./createLucideIcon-BG919Rtc.js";import{_ as U}from"./index-C9GdhwZn.js";import{_ as K}from"./Label.vue_vue_type_script_setup_true_lang-Vr_4JsSA.js";import{_ as Q}from"./Switch.vue_vue_type_script_setup_true_lang-C1RbIemm.js";import{a as j,b as H,c as N,d as w,_ as P}from"./SelectValue.vue_vue_type_script_setup_true_lang-DNb18nEz.js";import{_ as Y,a as Z,b as ee,c as ae,d as se,e as te}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CJLkPl9b.js";import{S as le}from"./search-BqPjSriO.js";import{F as oe}from"./filter-Bul89KM9.js";import{X as E}from"./x-CH24zYz2.js";import{V as re}from"./vote-D2Rn5EGX.js";import{L as ie}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-DQMYh5Gv.js";import{L as ne}from"./list-BchUdMPt.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-jb7cBVQn.js";import"./index-BQvcUEPK.js";import"./index-D5O-6KMg.js";import"./floating-ui.vue-ClLQHvu2.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DxRb9IyH.js";import"./square-check-big-DHgrQgHs.js";import"./user-1QV52cLG.js";import"./file-text-ChTe-w0O.js";import"./users-DVfvVv5k.js";import"./map-pin-BYO7IqQm.js";import"./index-B3OyOhdr.js";import"./index-DDFssNIK.js";import"./circle-alert-DyX8jyra.js";import"./circle-x-CcIIXr3e.js";import"./circle-check-big-Co5bwIN2.js";import"./clock-BgJsSDJK.js";import"./loader-circle-e3mVLjL2.js";import"./calendar-A9Ja9lbB.js";import"./globe-0s17otYY.js";import"./circle-check-Dr7A9FI-.js";import"./refresh-cw-Cv2fAakQ.js";import"./eye-Dp-DTTpt.js";import"./es-nEe0wmoQ.js";import"./index-DokoqITK.js";import"./VisuallyHidden-L6ik1lx4.js";import"./VisuallyHiddenInput-BCiypCoc.js";import"./check-CFzf2JYc.js";import"./nullish-CHIgUVhi.js";import"./shield-D-rurmJa.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-BZnDIsbq.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BlN2t4SW.js";const de={class:"space-y-4"},ue={class:"flex flex-col sm:flex-row gap-3"},me={class:"flex-1"},pe={class:"relative"},ce={class:"flex gap-2"},fe={key:2,class:"flex items-center space-x-2"},ve={key:0,class:"flex flex-wrap gap-2"},_e={class:"space-y-4 py-4"},ge=I({__name:"VotacionFilters",props:{filters:{},categorias:{default:()=>[]},showCategoryFilter:{type:Boolean,default:!0},showStatusFilter:{type:Boolean,default:!0},showPastToggle:{type:Boolean,default:!0},showAdvancedFilters:{type:Boolean,default:!1}},emits:["update"],setup(x,{emit:b}){const k=x,g=b,t=C({...k.filters}),y=C(!1),h=Math.random().toString(36).substr(2,9);G(()=>k.filters,i=>{t.value={...i}},{deep:!0});const F=X.debounce(()=>{o()},300),o=()=>{g("update",{...t.value})},d=()=>{t.value={search:"",categoria_id:null,estado:null,mostrar_pasadas:!1,advanced_filters:null},o()},p=()=>{y.value=!1,o()},T=i=>{i==="advanced_filters"?t.value.advanced_filters=null:t.value[i]=null,o()},q=B(()=>t.value.search||t.value.categoria_id||t.value.estado||t.value.mostrar_pasadas||t.value.advanced_filters),z=B(()=>{let i=0;return t.value.advanced_filters&&(i+=Object.keys(t.value.advanced_filters).length),i}),A=B(()=>{const i=[];if(t.value.search&&i.push({key:"search",label:"Búsqueda",value:t.value.search}),t.value.categoria_id&&k.categorias){const a=k.categorias.find(r=>r.id===t.value.categoria_id);a&&i.push({key:"categoria_id",label:"Categoría",value:a.nombre})}return t.value.estado&&i.push({key:"estado",label:"Estado",value:t.value.estado}),i});return(i,a)=>(n(),v($,null,[m("div",de,[m("div",ue,[m("div",me,[m("div",pe,[s(e(le),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),s(e(J),{modelValue:t.value.search,"onUpdate:modelValue":a[0]||(a[0]=r=>t.value.search=r),onInput:e(F),placeholder:"Buscar votaciones...",class:"pl-10"},null,8,["modelValue","onInput"])])]),m("div",ce,[i.showCategoryFilter&&i.categorias.length>0?(n(),c(e(P),{key:0,modelValue:t.value.categoria_id,"onUpdate:modelValue":[a[1]||(a[1]=r=>t.value.categoria_id=r),o]},{default:l(()=>[s(e(j),{class:"w-[180px]"},{default:l(()=>[s(e(H),{placeholder:"Todas las categorías"})]),_:1}),s(e(N),null,{default:l(()=>[s(e(w),{value:null},{default:l(()=>[...a[7]||(a[7]=[u(" Todas las categorías ",-1)])]),_:1}),(n(!0),v($,null,M(i.categorias,r=>(n(),c(e(w),{key:r.id,value:r.id},{default:l(()=>[u(V(r.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):f("",!0),i.showStatusFilter?(n(),c(e(P),{key:1,modelValue:t.value.estado,"onUpdate:modelValue":[a[2]||(a[2]=r=>t.value.estado=r),o]},{default:l(()=>[s(e(j),{class:"w-[150px]"},{default:l(()=>[s(e(H),{placeholder:"Todos los estados"})]),_:1}),s(e(N),null,{default:l(()=>[s(e(w),{value:null},{default:l(()=>[...a[8]||(a[8]=[u(" Todos los estados ",-1)])]),_:1}),s(e(w),{value:"activa"},{default:l(()=>[...a[9]||(a[9]=[u("Activas",-1)])]),_:1}),s(e(w),{value:"pendiente"},{default:l(()=>[...a[10]||(a[10]=[u("Pendientes",-1)])]),_:1}),s(e(w),{value:"finalizada"},{default:l(()=>[...a[11]||(a[11]=[u("Finalizadas",-1)])]),_:1}),s(e(w),{value:"cancelada"},{default:l(()=>[...a[12]||(a[12]=[u("Canceladas",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])):f("",!0),i.showPastToggle?(n(),v("div",fe,[s(e(Q),{id:"show-past-"+e(h),checked:t.value.mostrar_pasadas,"onUpdate:checked":[a[3]||(a[3]=r=>t.value.mostrar_pasadas=r),o]},null,8,["id","checked"]),s(e(K),{for:"show-past-"+e(h),class:"cursor-pointer"},{default:l(()=>[...a[13]||(a[13]=[u(" Mostrar pasadas ",-1)])]),_:1},8,["for"])])):f("",!0),i.showAdvancedFilters?(n(),c(e(_),{key:3,onClick:a[4]||(a[4]=r=>y.value=!0),variant:"outline",size:"default"},{default:l(()=>[s(e(oe),{class:"h-4 w-4 mr-2"}),a[14]||(a[14]=u(" Filtros ",-1)),z.value>0?(n(),c(e(U),{key:0,class:"ml-2",variant:"secondary"},{default:l(()=>[u(V(z.value),1)]),_:1})):f("",!0)]),_:1})):f("",!0),q.value?(n(),c(e(_),{key:4,onClick:d,variant:"ghost",size:"icon"},{default:l(()=>[s(e(E),{class:"h-4 w-4"})]),_:1})):f("",!0)])]),A.value.length>0?(n(),v("div",ve,[(n(!0),v($,null,M(A.value,r=>(n(),c(e(U),{key:r.key,variant:"secondary",class:"cursor-pointer hover:bg-secondary/80",onClick:Fe=>T(r.key)},{default:l(()=>[u(V(r.label)+": "+V(r.value)+" ",1),s(e(E),{class:"h-3 w-3 ml-1"})]),_:2},1032,["onClick"]))),128))])):f("",!0)]),i.showAdvancedFilters?(n(),c(e(te),{key:0,open:y.value,"onUpdate:open":a[6]||(a[6]=r=>y.value=r)},{default:l(()=>[s(e(Y),{class:"max-w-2xl"},{default:l(()=>[s(e(Z),null,{default:l(()=>[s(e(ee),null,{default:l(()=>[...a[15]||(a[15]=[u("Filtros avanzados",-1)])]),_:1}),s(e(ae),null,{default:l(()=>[...a[16]||(a[16]=[u(" Configura filtros detallados para encontrar las votaciones que buscas. ",-1)])]),_:1})]),_:1}),m("div",_e,[O(i.$slots,"advanced-filters",{filters:t.value})]),s(e(se),null,{default:l(()=>[s(e(_),{onClick:a[5]||(a[5]=r=>y.value=!1),variant:"outline"},{default:l(()=>[...a[17]||(a[17]=[u(" Cancelar ",-1)])]),_:1}),s(e(_),{onClick:p},{default:l(()=>[...a[18]||(a[18]=[u(" Aplicar filtros ",-1)])]),_:1})]),_:1})]),_:3})]),_:3},8,["open"])):f("",!0)],64))}}),ye={class:"space-y-6"},we={class:"flex items-center justify-between"},be={class:"text-2xl font-bold flex items-center gap-2"},ke={class:"flex gap-2"},$e={key:0,class:"flex justify-center mt-6"},he={class:"flex gap-1"},wa=I({__name:"Index",props:{votaciones:{},categorias:{},filters:{},mostrar_pasadas:{type:Boolean},filterFieldsConfig:{},canVote:{type:Boolean},canViewResults:{type:Boolean},canViewOwnVote:{type:Boolean}},setup(x){var F;const b=x,k=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Votaciones",href:"/miembro/votaciones"}],g=C("grid"),{route:t}=window,y=C({search:b.filters.search||"",categoria:((F=b.filters.categoria_id)==null?void 0:F.toString())||"",estado:b.filters.estado||"",mostrar_pasadas:b.mostrar_pasadas||!1}),h=o=>{const d={};o.search&&(d.search=o.search),o.categoria&&(d.categoria_id=o.categoria),o.estado&&(d.estado=o.estado),o.mostrar_pasadas&&(d.mostrar_pasadas=o.mostrar_pasadas),L.get(t("user.votaciones.index"),d,{preserveState:!0,preserveScroll:!0})};return(o,d)=>(n(),v($,null,[s(e(R),{title:"Mis Votaciones"}),s(D,{breadcrumbs:k},{default:l(()=>[m("div",ye,[m("div",we,[m("div",null,[m("h1",be,[s(e(re),{class:"h-7 w-7"}),d[2]||(d[2]=u(" Mis Votaciones ",-1))]),d[3]||(d[3]=m("p",{class:"text-muted-foreground mt-1"}," Participa en las votaciones disponibles para ti ",-1))]),m("div",ke,[s(e(_),{variant:"outline",size:"sm",onClick:d[0]||(d[0]=p=>g.value="grid"),class:S({"bg-accent":g.value==="grid"})},{default:l(()=>[s(e(ie),{class:"h-4 w-4"})]),_:1},8,["class"]),s(e(_),{variant:"outline",size:"sm",onClick:d[1]||(d[1]=p=>g.value="list"),class:S({"bg-accent":g.value==="list"})},{default:l(()=>[s(e(ne),{class:"h-4 w-4"})]),_:1},8,["class"])])]),s(ge,{categorias:o.categorias,"initial-filters":y.value,onFiltersChanged:h},null,8,["categorias","initial-filters"]),s(W,{votaciones:o.votaciones.data,"view-mode":g.value,"can-vote":o.canVote,"can-view-results":o.canViewResults},null,8,["votaciones","view-mode","can-vote","can-view-results"]),o.votaciones.last_page>1?(n(),v("div",$e,[m("nav",he,[(n(!0),v($,null,M(o.votaciones.links,p=>(n(),v($,{key:p.label},[p.url?(n(),c(e(_),{key:0,variant:"outline",size:"sm",class:S({"bg-primary text-primary-foreground":p.active}),onClick:T=>e(L).get(p.url,{},{preserveState:!0,preserveScroll:!0}),innerHTML:p.label},null,8,["class","onClick","innerHTML"])):(n(),c(e(_),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:p.label},null,8,["innerHTML"]))],64))),128))])])):f("",!0)])]),_:1})],64))}});export{wa as default};
