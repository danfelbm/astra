import{T as F,_ as M}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BSAaXFBZ.js";import{d as G,j as f,o as n,e as o,b as s,f as l,u as e,m as H,t as u,g as i,P as $,a as m,i as V,F as x,r as y}from"./app-DLtGX5Qt.js";import{_ as w}from"./createLucideIcon-Dkyf0ol9.js";import{_ as p,a as _,b as g,c}from"./CardTitle.vue_vue_type_script_setup_true_lang-Co41z9Fi.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-DbFs4sm5.js";import{_ as v}from"./index-Dd_mJrj8.js";import{_ as J,a as K,b as k,c as S}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Bb2SrlnQ.js";import{_ as O,a as Q,b as U,c as h,d as W,e as P}from"./TableHeader.vue_vue_type_script_setup_true_lang-lm_PRNa8.js";import{_ as X,a as Y}from"./index-C9obqnHf.js";import{_ as Z}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-CTQpPgri.js";import{S as j}from"./shield-CfmIBwYY.js";import{S as ee}from"./square-pen-BGpnH1Ph.js";import{A as te}from"./arrow-left-r7U85gMs.js";import{U as se}from"./users-DveyALIl.js";import{L as oe}from"./lock-BaANLG3w.js";import"./index-kXO2DGBO.js";import"./floating-ui.vue-BR3vkAxW.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-01xQeA0o.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-UwaVvoXl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BXSN56bN.js";import"./chevrons-up-down-BYf_a4BH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BS5YH57z.js";import"./vote-DqjfNPob.js";import"./file-text-Ct1bDYn7.js";import"./calendar-Qt9nf8nq.js";import"./briefcase-CD3iSsTu.js";import"./megaphone-0WUdA7eo.js";import"./user-check-BdFLmkoN.js";import"./external-link-CNewaM4d.js";import"./panel-left-DDEhyo7S.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D0xGkYSt.js";import"./VisuallyHidden-BoG3gtOX.js";import"./Input.vue_vue_type_script_setup_true_lang-7ZEMGRmn.js";import"./index-BvT5vxZ2.js";import"./PopperContent-BKTEdvgV.js";import"./check-CY0rU9Op.js";import"./nullish-CHIgUVhi.js";import"./index-B-3bJqdI.js";import"./index-VOVChzYe.js";import"./RovingFocusItem-Cbt3xgLf.js";import"./utils-DVLoAl8m.js";import"./x-DatQfog6.js";import"./user-B2Cpm2T0.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CKkCSvH1.js";import"./Label.vue_vue_type_script_setup_true_lang-DlQMMs8Q.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DUV-Q_i-.js";import"./circle-alert-ChcOZlmI.js";import"./map-pin-kb9yj2dv.js";const le={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ae={class:"flex items-center justify-between"},ie={class:"flex items-center gap-4"},re={class:"p-3 bg-primary/10 rounded-lg"},ne={class:"text-2xl font-bold tracking-tight"},de={class:"flex items-center gap-2 mt-1"},ue={class:"flex gap-2"},me={class:"grid gap-6 md:grid-cols-3"},fe={class:"text-2xl font-bold"},pe={class:"text-2xl font-bold"},_e={class:"text-2xl font-bold"},ge={class:"grid grid-cols-2 gap-4"},ce={class:"text-sm font-mono"},ve={class:"text-sm font-mono"},xe={class:"text-sm"},ye={class:"text-sm"},be={key:0},$e={class:"text-sm"},we={key:1},ke={class:"flex flex-wrap gap-2"},Se={key:0,class:"text-center py-8"},he={key:1,class:"space-y-4"},Pe={class:"font-semibold mb-2"},Ae={class:"flex flex-wrap gap-2"},Ce={key:2,class:"text-center py-8 text-muted-foreground"},De={class:"flex items-center gap-3"},Ve={class:"font-medium"},Re={key:1,class:"text-center py-8 text-muted-foreground"},Ue={key:0,class:"space-y-3"},je={class:"font-semibold"},Le={class:"text-sm text-muted-foreground mt-1"},Ne={class:"flex gap-2 mt-2"},Ee={key:1,class:"text-center py-8 text-muted-foreground"},Ut=G({__name:"Show",props:{role:{},userCount:{}},setup(L){const b=L,N=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"},{title:b.role.display_name,href:"#"}],E=()=>["super_admin","admin","manager","user","end_customer"].includes(b.role.name),B=a=>a.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),A=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),z=()=>{if(!b.role.permissions)return{};const a={};return b.role.permissions.forEach(t=>{const[d,r]=t.split(".");a[d]||(a[d]=[]),a[d].push(r)}),a},T=a=>({users:"Usuarios",votaciones:"Votaciones",convocatorias:"Convocatorias",postulaciones:"Postulaciones",candidaturas:"Candidaturas",reports:"Reportes",settings:"Configuración",dashboard:"Dashboard",profile:"Perfil"})[a]||a,I=a=>({view:"secondary",create:"default",edit:"outline",delete:"destructive",export:"ghost"})[a]||"outline";return(a,t)=>(n(),f(M,{breadcrumbs:N},{default:o(()=>[s(e(H),{title:`Rol: ${a.role.display_name}`},null,8,["title"]),l("div",le,[l("div",ae,[l("div",ie,[l("div",re,[s(e(j),{class:"h-8 w-8 text-primary"})]),l("div",null,[l("h2",ne,u(a.role.display_name),1),l("div",de,[s(e(v),{variant:"outline"},{default:o(()=>[i(u(a.role.name),1)]),_:1}),E()?(n(),f(e(v),{key:0,variant:"default"},{default:o(()=>[...t[0]||(t[0]=[i("Rol del Sistema",-1)])]),_:1})):(n(),f(e(v),{key:1,variant:"secondary"},{default:o(()=>[...t[1]||(t[1]=[i("Rol Personalizado",-1)])]),_:1}))])])]),l("div",ue,[s(e($),{href:`/admin/roles/${a.role.id}/edit`},{default:o(()=>[s(e(w),null,{default:o(()=>[s(e(ee),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=i(" Editar ",-1))]),_:1})]),_:1},8,["href"]),s(e($),{href:a.route("admin.roles.index")},{default:o(()=>[s(e(w),{variant:"outline"},{default:o(()=>[s(e(te),{class:"mr-2 h-4 w-4"}),t[3]||(t[3]=i(" Volver ",-1))]),_:1})]),_:1},8,["href"])])]),l("div",me,[s(e(p),null,{default:o(()=>[s(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(g),{class:"text-sm font-medium"},{default:o(()=>[...t[4]||(t[4]=[i("Usuarios Asignados",-1)])]),_:1}),s(e(se),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(c),null,{default:o(()=>[l("div",fe,u(a.userCount),1),t[5]||(t[5]=l("p",{class:"text-xs text-muted-foreground"},"usuarios con este rol",-1))]),_:1})]),_:1}),s(e(p),null,{default:o(()=>[s(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(g),{class:"text-sm font-medium"},{default:o(()=>[...t[6]||(t[6]=[i("Permisos",-1)])]),_:1}),s(e(oe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(c),null,{default:o(()=>{var d,r;return[l("div",pe,u((d=a.role.permissions)!=null&&d.includes("*")?"Todos":((r=a.role.permissions)==null?void 0:r.length)||0),1),t[7]||(t[7]=l("p",{class:"text-xs text-muted-foreground"},"permisos asignados",-1))]}),_:1})]),_:1}),s(e(p),null,{default:o(()=>[s(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(g),{class:"text-sm font-medium"},{default:o(()=>[...t[8]||(t[8]=[i("Segmentos",-1)])]),_:1}),s(e(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(c),null,{default:o(()=>{var d;return[l("div",_e,u(((d=a.role.segments)==null?void 0:d.length)||0),1),t[9]||(t[9]=l("p",{class:"text-xs text-muted-foreground"},"segmentos asociados",-1))]}),_:1})]),_:1})]),s(e(J),{defaultValue:"details",class:"space-y-4"},{default:o(()=>[s(e(K),null,{default:o(()=>[s(e(k),{value:"details"},{default:o(()=>[...t[10]||(t[10]=[i("Detalles",-1)])]),_:1}),s(e(k),{value:"permissions"},{default:o(()=>[...t[11]||(t[11]=[i("Permisos",-1)])]),_:1}),s(e(k),{value:"users"},{default:o(()=>[...t[12]||(t[12]=[i("Usuarios",-1)])]),_:1}),s(e(k),{value:"segments"},{default:o(()=>[...t[13]||(t[13]=[i("Segmentos",-1)])]),_:1})]),_:1}),s(e(S),{value:"details"},{default:o(()=>[s(e(p),null,{default:o(()=>[s(e(_),null,{default:o(()=>[s(e(g),null,{default:o(()=>[...t[14]||(t[14]=[i("Información del Rol",-1)])]),_:1})]),_:1}),s(e(c),{class:"space-y-4"},{default:o(()=>{var d;return[l("div",ge,[l("div",null,[t[15]||(t[15]=l("p",{class:"text-sm font-medium text-muted-foreground"},"ID del Rol",-1)),l("p",ce,u(a.role.id),1)]),l("div",null,[t[16]||(t[16]=l("p",{class:"text-sm font-medium text-muted-foreground"},"Nombre Interno",-1)),l("p",ve,u(a.role.name),1)]),l("div",null,[t[17]||(t[17]=l("p",{class:"text-sm font-medium text-muted-foreground"},"Creado",-1)),l("p",xe,u(A(a.role.created_at)),1)]),l("div",null,[t[18]||(t[18]=l("p",{class:"text-sm font-medium text-muted-foreground"},"Última Actualización",-1)),l("p",ye,u(A(a.role.updated_at)),1)])]),a.role.description?(n(),m("div",be,[t[19]||(t[19]=l("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),l("p",$e,u(a.role.description),1)])):V("",!0),(d=a.role.allowed_modules)!=null&&d.length?(n(),m("div",we,[t[20]||(t[20]=l("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Módulos Permitidos",-1)),l("div",ke,[(n(!0),m(x,null,y(a.role.allowed_modules,r=>(n(),f(e(v),{key:r,variant:"outline"},{default:o(()=>[i(u(r),1)]),_:2},1024))),128))])])):V("",!0)]}),_:1})]),_:1})]),_:1}),s(e(S),{value:"permissions"},{default:o(()=>[s(e(p),null,{default:o(()=>[s(e(_),null,{default:o(()=>[s(e(g),null,{default:o(()=>[...t[21]||(t[21]=[i("Permisos Asignados",-1)])]),_:1}),s(e(R),null,{default:o(()=>[...t[22]||(t[22]=[i(" Lista detallada de permisos organizados por módulo ",-1)])]),_:1})]),_:1}),s(e(c),null,{default:o(()=>{var d,r;return[(d=a.role.permissions)!=null&&d.includes("*")?(n(),m("div",Se,[s(e(j),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),t[23]||(t[23]=l("p",{class:"text-lg font-semibold"},"Acceso Total",-1)),t[24]||(t[24]=l("p",{class:"text-sm text-muted-foreground"},"Este rol tiene todos los permisos del sistema",-1))])):(r=a.role.permissions)!=null&&r.length?(n(),m("div",he,[(n(!0),m(x,null,y(z(),(q,C)=>(n(),m("div",{key:C,class:"border rounded-lg p-4"},[l("h4",Pe,u(T(C)),1),l("div",Ae,[(n(!0),m(x,null,y(q,D=>(n(),f(e(v),{key:`${C}.${D}`,variant:I(D)},{default:o(()=>[i(u(D),1)]),_:2},1032,["variant"]))),128))])]))),128))])):(n(),m("div",Ce," No hay permisos asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(e(S),{value:"users"},{default:o(()=>[s(e(p),null,{default:o(()=>[s(e(_),null,{default:o(()=>[s(e(g),null,{default:o(()=>[...t[25]||(t[25]=[i("Usuarios con este Rol",-1)])]),_:1}),s(e(R),null,{default:o(()=>[...t[26]||(t[26]=[i(" Lista de usuarios que tienen asignado este rol ",-1)])]),_:1})]),_:1}),s(e(c),null,{default:o(()=>{var d;return[(d=a.role.users)!=null&&d.length?(n(),f(e(O),{key:0},{default:o(()=>[s(e(Q),null,{default:o(()=>[s(e(U),null,{default:o(()=>[s(e(h),null,{default:o(()=>[...t[27]||(t[27]=[i("Usuario",-1)])]),_:1}),s(e(h),null,{default:o(()=>[...t[28]||(t[28]=[i("Email",-1)])]),_:1}),s(e(h),null,{default:o(()=>[...t[29]||(t[29]=[i("Fecha de Asignación",-1)])]),_:1}),s(e(h),{class:"text-right"},{default:o(()=>[...t[30]||(t[30]=[i("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(e(W),null,{default:o(()=>[(n(!0),m(x,null,y(a.role.users,r=>(n(),f(e(U),{key:r.id},{default:o(()=>[s(e(P),null,{default:o(()=>[l("div",De,[s(e(X),{class:"h-8 w-8"},{default:o(()=>[r.avatar?(n(),f(e(Z),{key:0,src:r.avatar,alt:r.name},null,8,["src","alt"])):V("",!0),s(e(Y),null,{default:o(()=>[i(u(B(r.name)),1)]),_:2},1024)]),_:2},1024),l("span",Ve,u(r.name),1)])]),_:2},1024),s(e(P),null,{default:o(()=>[i(u(r.email),1)]),_:2},1024),s(e(P),null,{default:o(()=>[i(u(A(r.created_at)),1)]),_:2},1024),s(e(P),{class:"text-right"},{default:o(()=>[s(e($),{href:`/admin/users/${r.id}`},{default:o(()=>[s(e(w),{size:"sm",variant:"ghost"},{default:o(()=>[...t[31]||(t[31]=[i(" Ver Usuario ",-1)])]),_:1})]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(n(),m("div",Re," No hay usuarios asignados a este rol "))]}),_:1})]),_:1})]),_:1}),s(e(S),{value:"segments"},{default:o(()=>[s(e(p),null,{default:o(()=>[s(e(_),null,{default:o(()=>[s(e(g),null,{default:o(()=>[...t[32]||(t[32]=[i("Segmentos Asociados",-1)])]),_:1}),s(e(R),null,{default:o(()=>[...t[33]||(t[33]=[i(" Segmentos que delimitan el alcance de datos para este rol ",-1)])]),_:1})]),_:1}),s(e(c),null,{default:o(()=>{var d;return[(d=a.role.segments)!=null&&d.length?(n(),m("div",Ue,[(n(!0),m(x,null,y(a.role.segments,r=>(n(),m("div",{key:r.id,class:"flex items-start justify-between p-4 border rounded-lg"},[l("div",null,[l("h4",je,u(r.name),1),l("p",Le,u(r.description||"Sin descripción"),1),l("div",Ne,[s(e(v),{variant:"outline"},{default:o(()=>[i(u(r.user_count||0)+" usuarios ",1)]),_:2},1024),s(e(v),{variant:r.is_dynamic?"default":"secondary"},{default:o(()=>[i(u(r.is_dynamic?"Dinámico":"Estático"),1)]),_:2},1032,["variant"])])]),s(e($),{href:`/admin/segments/${r.id}`},{default:o(()=>[s(e(w),{size:"sm",variant:"ghost"},{default:o(()=>[...t[34]||(t[34]=[i(" Ver Segmento ",-1)])]),_:1})]),_:2},1032,["href"])]))),128))])):(n(),m("div",Ee," No hay segmentos asociados a este rol "))]}),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}))}});export{Ut as default};
