import{d as K,c as _,b as u,e as r,w as n,g as s,j as m,f as a,u as o,P as E,h as l,t as i,q as A,i as d,n as O,F as Q,k as W}from"./app-CNcf-zdV.js";import{_ as Y}from"./UserLayout.vue_vue_type_script_setup_true_lang-BhgMeW85.js";import{_ as v,a as g,b as h,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-DhL5ChM3.js";import{_ as y}from"./CardDescription.vue_vue_type_script_setup_true_lang-C68I3fFy.js";import{c as Z,_ as tt}from"./createLucideIcon-DgLLtpTc.js";import{_ as k}from"./index-s_YMJFqv.js";import{_ as ot,a as et,b as w,c as C}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-PuWmj34h.js";import{_ as L,a as U}from"./index-BXNWrcHO.js";import{C as st}from"./circle-x-Dhjrtdk5.js";import{C as R}from"./circle-check-big-CiofKZcV.js";import{F as D}from"./file-text-VjUXoo3d.js";import{U as F}from"./user-DzTPpMzP.js";import{B as at}from"./briefcase-BxQurTMk.js";import{A as nt}from"./arrow-left-qPIiRNis.js";import{D as rt}from"./download-lfq_ZiSa.js";import{T as lt}from"./triangle-alert-BtiCJ_8t.js";import{C as N}from"./clock-Bv_E-7na.js";import{C as j}from"./calendar-DAAYlVnm.js";import{D as it}from"./dollar-sign-BNgseSEg.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D8koaehi.js";import"./index-C53AKuaZ.js";import"./floating-ui.vue-g3wBdaGy.js";import"./x-arLKReWz.js";import"./Input.vue_vue_type_script_setup_true_lang-CXr4ucc6.js";import"./index-BfcJxwg-.js";import"./index-DoUjDw3v.js";import"./shield-Ds2U7D9u.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BBJrNP3L.js";import"./chevron-right-CoIj8tGl.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CS3Y7RjP.js";import"./VisuallyHidden-BMJ7uEAj.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Bt0xndJV.js";import"./check-N9bkD0I5.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-BFduy937.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D-RM_gVc.js";import"./index-UZehIf0x.js";import"./circle-alert-BWYDLxj9.js";import"./map-pin-CODmF8A6.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Bowse19S.js";import"./square-check-big-Bm9Ph3yD.js";import"./users-BCniY5Uo.js";import"./folder-open-Bl1zn-Xz.js";import"./index-DraxJDKZ.js";import"./RovingFocusItem-KgjJr8lb.js";import"./utils-D1nKU7ku.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=Z("BuildingIcon",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),dt={class:"space-y-6"},mt={class:"flex justify-between items-start"},ut={class:"text-3xl font-bold tracking-tight"},ct={class:"flex items-center gap-4 mt-2"},ft={class:"text-muted-foreground"},pt={class:"flex gap-2"},_t={class:"grid gap-6 md:grid-cols-2"},vt={key:0,class:"col-span-2"},gt={class:"mt-1"},ht={class:"text-sm font-medium text-muted-foreground"},bt={class:"mt-1 font-medium"},yt={class:"text-sm font-medium text-muted-foreground"},kt={class:"mt-1 font-medium"},wt={key:1},Ct={class:"text-sm font-medium text-muted-foreground"},Dt={class:"mt-1 font-medium"},xt={key:2},$t={class:"text-sm font-medium text-muted-foreground"},Mt={key:0},It={key:1},Ft={key:2},Nt={class:"grid gap-6 md:grid-cols-2"},St={class:"font-semibold mb-3 flex items-center"},Tt={key:0,class:"space-y-2"},Bt={class:"ml-2"},Pt=["href"],Vt={key:1,class:"text-muted-foreground"},zt={class:"font-semibold mb-3 flex items-center"},Et={key:0,class:"space-y-2"},At={class:"rounded-lg border p-3 bg-blue-50 dark:bg-blue-950/20"},Ot={class:"flex items-start gap-3"},Lt={class:"flex-1"},Ut={class:"flex items-center gap-2 mb-1"},Rt={class:"font-medium"},jt={class:"text-sm text-muted-foreground"},Gt=["href"],qt={key:1,class:"space-y-2"},Xt={key:0},Ht={class:"ml-2"},Jt={key:1},Kt={class:"ml-2"},Qt={key:2},Wt=["href"],Yt={key:3},Zt={class:"ml-2"},to={key:2},oo={class:"space-y-4"},eo={class:"text-sm font-medium text-muted-foreground"},so={class:"mt-1 text-2xl font-bold"},ao={key:0},no={class:"mt-1"},ro={class:"grid gap-4 md:grid-cols-2"},lo={class:"text-sm font-medium text-muted-foreground"},io={key:0,class:"mt-1"},mo={key:1,class:"mt-1"},uo={key:2,class:"mt-1 whitespace-pre-wrap"},co={class:"prose max-w-none"},fo={class:"whitespace-pre-wrap"},re=K({__name:"Show",props:{contrato:{},authPermissions:{}},setup(q){const p=q,X=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"},{title:p.contrato.nombre,href:`/miembro/mis-contratos/${p.contrato.id}`}],S=_(()=>({borrador:{color:"secondary",icon:D},activo:{color:"success",icon:R},finalizado:{color:"default",icon:R},cancelado:{color:"destructive",icon:st}})[p.contrato.estado]||{color:"default",icon:D}),T=_(()=>({servicio:{label:"Servicio",icon:at},obra:{label:"Obra",icon:G},suministro:{label:"Suministro",icon:D},consultoria:{label:"Consultoría",icon:F},otro:{label:"Otro",icon:D}})[p.contrato.tipo]||{label:"Otro",icon:D}),c=_(()=>{if(!p.contrato.fecha_fin||p.contrato.estado!=="activo")return null;const e=new Date,t=new Date(p.contrato.fecha_fin);return Math.ceil((t.getTime()-e.getTime())/(1e3*60*60*24))}),x=_(()=>c.value!==null&&c.value<0),M=_(()=>c.value!==null&&c.value>=0&&c.value<=30),H=_(()=>p.contrato.archivo_pdf&&p.authPermissions.includes("contratos.view_own")),I=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",J=e=>e?new Intl.NumberFormat("es-ES",{style:"currency",currency:p.contrato.moneda||"USD"}).format(e):"-";return(e,t)=>(r(),u(Y,{breadcrumbs:X},{default:n(()=>[s("div",dt,[s("div",mt,[s("div",null,[a(o(E),{href:e.route("user.mis-contratos.index"),class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:n(()=>[a(o(nt),{class:"w-4 h-4 mr-2"}),t[1]||(t[1]=l(" Volver a Mis Contratos ",-1))]),_:1},8,["href"]),s("h2",ut,i(e.contrato.nombre),1),s("div",ct,[a(o(k),{variant:S.value.color},{default:n(()=>[(r(),u(A(S.value.icon),{class:"w-3 h-3 mr-1"})),l(" "+i(e.contrato.estado),1)]),_:1},8,["variant"]),a(o(k),{variant:"outline"},{default:n(()=>[(r(),u(A(T.value.icon),{class:"w-3 h-3 mr-1"})),l(" "+i(T.value.label),1)]),_:1}),s("span",ft,[t[2]||(t[2]=l(" Proyecto: ",-1)),a(o(E),{href:e.route("user.mis-proyectos.show",e.contrato.proyecto.id),class:"font-medium text-foreground hover:underline"},{default:n(()=>[l(i(e.contrato.proyecto.nombre),1)]),_:1},8,["href"])])])]),s("div",pt,[H.value?(r(),u(o(tt),{key:0,onClick:t[0]||(t[0]=$=>e.window.open(e.route("user.mis-contratos.descargar-pdf",e.contrato.id))),variant:"outline"},{default:n(()=>[a(o(rt),{class:"w-4 h-4 mr-2"}),t[3]||(t[3]=l(" Descargar PDF ",-1))]),_:1})):m("",!0)])]),x.value?(r(),u(o(L),{key:0,class:"border-red-200 bg-red-50"},{default:n(()=>[a(o(lt),{class:"h-4 w-4 text-red-600"}),a(o(U),{class:"text-red-800"},{default:n(()=>[l(" Este contrato venció hace "+i(Math.abs(c.value))+" días. ",1)]),_:1})]),_:1})):M.value?(r(),u(o(L),{key:1,class:"border-orange-200 bg-orange-50"},{default:n(()=>[a(o(N),{class:"h-4 w-4 text-orange-600"}),a(o(U),{class:"text-orange-800"},{default:n(()=>[l(" Este contrato vence en "+i(c.value)+" días. ",1)]),_:1})]),_:1})):m("",!0),a(o(ot),{"default-value":"general",class:"space-y-4"},{default:n(()=>{var $;return[a(o(et),null,{default:n(()=>{var f;return[a(o(w),{value:"general"},{default:n(()=>[...t[4]||(t[4]=[l("Información General",-1)])]),_:1}),a(o(w),{value:"partes"},{default:n(()=>[...t[5]||(t[5]=[l("Partes Involucradas",-1)])]),_:1}),a(o(w),{value:"financiera"},{default:n(()=>[...t[6]||(t[6]=[l("Información Financiera",-1)])]),_:1}),((f=e.contrato.campos_personalizados)==null?void 0:f.length)>0?(r(),u(o(w),{key:0,value:"campos"},{default:n(()=>[...t[7]||(t[7]=[l(" Campos Adicionales ",-1)])]),_:1})):m("",!0),e.contrato.observaciones?(r(),u(o(w),{key:1,value:"observaciones"},{default:n(()=>[...t[8]||(t[8]=[l(" Observaciones ",-1)])]),_:1})):m("",!0)]}),_:1}),a(o(C),{value:"general"},{default:n(()=>[a(o(v),null,{default:n(()=>[a(o(g),null,{default:n(()=>[a(o(h),null,{default:n(()=>[...t[9]||(t[9]=[l("Información General",-1)])]),_:1}),a(o(y),null,{default:n(()=>[...t[10]||(t[10]=[l(" Detalles básicos del contrato ",-1)])]),_:1})]),_:1}),a(o(b),{class:"space-y-6"},{default:n(()=>[s("div",_t,[e.contrato.descripcion?(r(),d("div",vt,[t[11]||(t[11]=s("label",{class:"text-sm font-medium text-muted-foreground"}," Descripción ",-1)),s("p",gt,i(e.contrato.descripcion),1)])):m("",!0),s("div",null,[s("label",ht,[a(o(j),{class:"w-4 h-4 inline mr-1"}),t[12]||(t[12]=l(" Fecha de Inicio ",-1))]),s("p",bt,i(I(e.contrato.fecha_inicio)),1)]),s("div",null,[s("label",yt,[a(o(j),{class:"w-4 h-4 inline mr-1"}),t[13]||(t[13]=l(" Fecha de Fin ",-1))]),s("p",kt,i(I(e.contrato.fecha_fin)),1)]),e.contrato.fecha_inicio&&e.contrato.fecha_fin?(r(),d("div",wt,[s("label",Ct,[a(o(N),{class:"w-4 h-4 inline mr-1"}),t[14]||(t[14]=l(" Duración ",-1))]),s("p",Dt,i(Math.ceil((new Date(e.contrato.fecha_fin).getTime()-new Date(e.contrato.fecha_inicio).getTime())/(1e3*60*60*24)))+" días ",1)])):m("",!0),c.value!==null&&e.contrato.estado==="activo"?(r(),d("div",xt,[s("label",$t,[a(o(N),{class:"w-4 h-4 inline mr-1"}),t[15]||(t[15]=l(" Tiempo Restante ",-1))]),s("p",{class:O(["mt-1 font-medium",{"text-red-600":x.value,"text-orange-600":M.value,"text-green-600":!x.value&&!M.value}])},[x.value?(r(),d("span",Mt,"Vencido hace "+i(Math.abs(c.value))+" días",1)):c.value===0?(r(),d("span",It,"Vence hoy")):(r(),d("span",Ft,i(c.value)+" días restantes",1))],2)])):m("",!0)])]),_:1})]),_:1})]),_:1}),a(o(C),{value:"partes"},{default:n(()=>[a(o(v),null,{default:n(()=>[a(o(g),null,{default:n(()=>[a(o(h),null,{default:n(()=>[...t[16]||(t[16]=[l("Partes Involucradas",-1)])]),_:1}),a(o(y),null,{default:n(()=>[...t[17]||(t[17]=[l(" Información de los responsables y contrapartes ",-1)])]),_:1})]),_:1}),a(o(b),{class:"space-y-6"},{default:n(()=>[s("div",Nt,[s("div",null,[s("h4",St,[a(o(F),{class:"w-4 h-4 mr-2"}),t[18]||(t[18]=l(" Responsable Interno ",-1))]),e.contrato.responsable?(r(),d("div",Tt,[s("p",null,[t[19]||(t[19]=s("span",{class:"text-muted-foreground"},"Nombre:",-1)),s("span",Bt,i(e.contrato.responsable.name),1)]),s("p",null,[t[20]||(t[20]=s("span",{class:"text-muted-foreground"},"Email:",-1)),s("a",{href:`mailto:${e.contrato.responsable.email}`,class:"ml-2 text-primary hover:underline"},i(e.contrato.responsable.email),9,Pt)])])):(r(),d("p",Vt," No se ha asignado un responsable "))]),s("div",null,[s("h4",zt,[a(o(G),{class:"w-4 h-4 mr-2"}),t[21]||(t[21]=l(" Contraparte ",-1))]),e.contrato.contraparte_user?(r(),d("div",Et,[s("div",At,[s("div",Ot,[a(o(F),{class:"w-5 h-5 text-blue-600 mt-1"}),s("div",Lt,[s("div",Ut,[s("span",Rt,i(e.contrato.contraparte_user.name),1),a(o(k),{variant:"secondary",class:"text-xs"},{default:n(()=>[...t[22]||(t[22]=[l(" Usuario del Sistema ",-1)])]),_:1})]),s("p",jt,[s("a",{href:`mailto:${e.contrato.contraparte_user.email}`,class:"text-primary hover:underline"},i(e.contrato.contraparte_user.email),9,Gt)])])])])])):e.contrato.contraparte_nombre||e.contrato.contraparte_identificacion||e.contrato.contraparte_email||e.contrato.contraparte_telefono?(r(),d("div",qt,[e.contrato.contraparte_nombre?(r(),d("p",Xt,[t[23]||(t[23]=s("span",{class:"text-muted-foreground"},"Nombre:",-1)),s("span",Ht,i(e.contrato.contraparte_nombre),1)])):m("",!0),e.contrato.contraparte_identificacion?(r(),d("p",Jt,[t[24]||(t[24]=s("span",{class:"text-muted-foreground"},"Identificación:",-1)),s("span",Kt,i(e.contrato.contraparte_identificacion),1)])):m("",!0),e.contrato.contraparte_email?(r(),d("p",Qt,[t[25]||(t[25]=s("span",{class:"text-muted-foreground"},"Email:",-1)),s("a",{href:`mailto:${e.contrato.contraparte_email}`,class:"ml-2 text-primary hover:underline"},i(e.contrato.contraparte_email),9,Wt)])):m("",!0),e.contrato.contraparte_telefono?(r(),d("p",Yt,[t[26]||(t[26]=s("span",{class:"text-muted-foreground"},"Teléfono:",-1)),s("span",Zt,i(e.contrato.contraparte_telefono),1)])):m("",!0)])):(r(),d("div",to,[...t[27]||(t[27]=[s("p",{class:"text-muted-foreground"}," No se ha registrado información de la contraparte ",-1)])]))])])]),_:1})]),_:1})]),_:1}),a(o(C),{value:"financiera"},{default:n(()=>[a(o(v),null,{default:n(()=>[a(o(g),null,{default:n(()=>[a(o(h),null,{default:n(()=>[...t[28]||(t[28]=[l("Información Financiera",-1)])]),_:1}),a(o(y),null,{default:n(()=>[...t[29]||(t[29]=[l(" Detalles económicos del contrato ",-1)])]),_:1})]),_:1}),a(o(b),null,{default:n(()=>[s("div",oo,[s("div",null,[s("label",eo,[a(o(it),{class:"w-4 h-4 inline mr-1"}),t[30]||(t[30]=l(" Monto Total ",-1))]),s("p",so,i(J(e.contrato.monto_total)),1)]),e.contrato.moneda?(r(),d("div",ao,[t[31]||(t[31]=s("label",{class:"text-sm font-medium text-muted-foreground"}," Moneda ",-1)),s("p",no,i(e.contrato.moneda),1)])):m("",!0)])]),_:1})]),_:1})]),_:1}),(($=e.contrato.campos_personalizados)==null?void 0:$.length)>0?(r(),u(o(C),{key:0,value:"campos"},{default:n(()=>[a(o(v),null,{default:n(()=>[a(o(g),null,{default:n(()=>[a(o(h),null,{default:n(()=>[...t[32]||(t[32]=[l("Campos Adicionales",-1)])]),_:1}),a(o(y),null,{default:n(()=>[...t[33]||(t[33]=[l(" Información personalizada del contrato ",-1)])]),_:1})]),_:1}),a(o(b),null,{default:n(()=>[s("div",ro,[(r(!0),d(Q,null,W(e.contrato.campos_personalizados,f=>{var B,P,V,z;return r(),d("div",{key:f.id,class:O({"col-span-2":((B=f.campo)==null?void 0:B.tipo)==="textarea"})},[s("label",lo,i((P=f.campo)==null?void 0:P.nombre),1),((V=f.campo)==null?void 0:V.tipo)==="checkbox"?(r(),d("p",io,[f.valor==="true"?(r(),u(o(k),{key:0,variant:"default"},{default:n(()=>[...t[34]||(t[34]=[l("Sí",-1)])]),_:1})):(r(),u(o(k),{key:1,variant:"secondary"},{default:n(()=>[...t[35]||(t[35]=[l("No",-1)])]),_:1}))])):((z=f.campo)==null?void 0:z.tipo)==="date"?(r(),d("p",mo,i(I(f.valor)),1)):(r(),d("p",uo,i(f.valor||"-"),1))],2)}),128))])]),_:1})]),_:1})]),_:1})):m("",!0),e.contrato.observaciones?(r(),u(o(C),{key:1,value:"observaciones"},{default:n(()=>[a(o(v),null,{default:n(()=>[a(o(g),null,{default:n(()=>[a(o(h),null,{default:n(()=>[...t[36]||(t[36]=[l("Observaciones",-1)])]),_:1}),a(o(y),null,{default:n(()=>[...t[37]||(t[37]=[l(" Notas y comentarios adicionales ",-1)])]),_:1})]),_:1}),a(o(b),null,{default:n(()=>[s("div",co,[s("p",fo,i(e.contrato.observaciones),1)])]),_:1})]),_:1})]),_:1})):m("",!0)]}),_:1})])]),_:1}))}});export{re as default};
