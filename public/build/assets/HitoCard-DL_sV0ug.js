import{c as A,_ as L,a as ne,b as oe}from"./CardTitle.vue_vue_type_script_setup_true_lang-BKQbIxIv.js";import{_ as ie}from"./CardFooter.vue_vue_type_script_setup_true_lang-BvLuY74z.js";import{c as ae,_ as v}from"./createLucideIcon-BKFZEAMr.js";import{_ as E}from"./index-BTqd9uu5.js";import{_ as de}from"./Progress.vue_vue_type_script_setup_true_lang-B6g1flhp.js";import{_ as re,b as ce}from"./index-CoVIatvh.js";import{_ as me,a as ue}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DzA-Y3Rz.js";import{_ as fe,a as he,b as xe,c as ve,d as ge,e as ye,f as pe,g as ke}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-TKIvGI9M.js";import{C as Y}from"./circle-alert-D0T-vetO.js";import{C as j}from"./clock-B6IRpO1k.js";import{C as I}from"./circle-check-big-DtgxHwju.js";import{F as be}from"./file-text-C4S2OaCY.js";import{C as Z}from"./chevron-right-C5FEjMfm.js";import{C as J,e as Ce}from"./SelectValue.vue_vue_type_script_setup_true_lang-CPzRqdqp.js";import{C as ee}from"./calendar-CBP4-HeF.js";import{U as O}from"./user-a47QmXX-.js";import{U as we}from"./users-8PgsKqLy.js";import{S as te}from"./square-pen-BUsu-P7m.js";import{T as N}from"./trash-2-DVSgNwkg.js";import{d as le,r as P,c as H,i as m,j as i,e as a,g as n,h as f,f as e,t as c,F as V,k as T,w as o,b as h,m as s,n as y,x as $e,y as _e}from"./app-LzJk4v1F.js";import{f as K,e as Q}from"./es-BDPlFIsO.js";import{C as Ee}from"./calendar-days-D6dngEed.js";import{E as De}from"./eye-vAGmaq1k.js";import{P as Me}from"./pen-BlnR-eIt.js";import{P as G}from"./plus-DWCZYezT.js";import{C as ze}from"./copy-CEoz_qyD.js";import{_ as je}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=ae("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=ae("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Pe={class:"space-y-6"},Ve={key:0,class:"space-y-6"},Te={key:0},Ue={class:"font-semibold mb-3 flex items-center gap-2"},Se={class:"space-y-2"},Ie={class:"flex items-start justify-between"},Ae={class:"flex-1"},Le={class:"flex items-center gap-2 mb-2"},Ne={class:"font-medium"},He={key:0,class:"ml-8 space-y-3"},qe={key:0,class:"text-sm text-muted-foreground"},Fe={class:"flex flex-wrap gap-4 text-sm"},Re={class:"flex items-center gap-1 text-muted-foreground"},Oe={key:0,class:"flex items-center gap-1 text-muted-foreground"},Ge={key:1,class:"flex items-center gap-2"},Je={class:"flex gap-1"},Ke={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},Qe={key:1},We={class:"font-semibold mb-3 flex items-center gap-2"},Xe={class:"space-y-2"},Ye={class:"flex items-start justify-between"},Ze={class:"flex-1"},et={class:"flex items-center gap-2 mb-2"},tt={class:"font-medium"},st={key:0,class:"ml-8 space-y-3"},at={key:0,class:"text-sm text-muted-foreground"},lt={class:"flex flex-wrap gap-4 text-sm"},nt={class:"flex items-center gap-1 text-muted-foreground"},ot={key:0,class:"flex items-center gap-1 text-muted-foreground"},it={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},dt={key:2},rt={class:"font-semibold mb-3 flex items-center gap-2"},ct={class:"space-y-2"},mt={class:"flex items-start justify-between"},ut={class:"flex-1"},ft={class:"flex items-center gap-2 mb-2"},ht={class:"font-medium line-through text-muted-foreground"},xt={class:"ml-7 space-y-1 text-sm text-muted-foreground"},vt={key:0,class:"flex items-center gap-1"},gt={key:1,class:"flex items-center gap-1"},yt={key:2,class:"italic mt-2"},pt={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},kt={key:3,class:"text-center py-8"},bt=le({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(t,{emit:q}){const p=t,$=q;P([]);const k=P([]),z=P(!1),D=P(null),b=H(()=>({pendientes:p.entregables.filter(u=>u.estado==="pendiente"),en_progreso:p.entregables.filter(u=>u.estado==="en_progreso"),completados:p.entregables.filter(u=>u.estado==="completado"),cancelados:p.entregables.filter(u=>u.estado==="cancelado")})),F=u=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[u]||"bg-gray-100 text-gray-800",U=u=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[u]||"bg-gray-100 text-gray-600",B=u=>u?K(new Date(u),"dd MMM yyyy",{locale:Q}):"Sin fecha",R=u=>u?K(new Date(u),"dd MMM yyyy 'a las' HH:mm",{locale:Q}):"-",_=u=>{if(!u)return null;const r=Math.ceil((new Date(u).getTime()-new Date().getTime())/(1e3*60*60*24));return r<0?`Vencido hace ${Math.abs(r)} días`:r===0?"Vence hoy":r===1?"Vence mañana":`${r} días`},x=u=>{const r=k.value.indexOf(u);r===-1?k.value.push(u):k.value.splice(r,1)},d=u=>k.value.includes(u),g=u=>{$("edit",u)},C=u=>{D.value=u,z.value=!0},S=()=>{D.value&&$("delete",D.value),z.value=!1,D.value=null},W=u=>{$("complete",u)},X=(u,r)=>{$("update-status",u,r)};return(u,r)=>(s(),m("div",Pe,[t.viewMode==="list"?(s(),m("div",Ve,[b.value.pendientes.length>0?(s(),m("div",Te,[n("h3",Ue,[a(e(Y),{class:"h-5 w-5 text-yellow-600"}),f(" Pendientes ("+c(b.value.pendientes.length)+") ",1)]),n("div",Se,[(s(!0),m(V,null,T(b.value.pendientes,l=>(s(),h(e(L),{key:l.id},{default:o(()=>[a(e(A),{class:"p-4"},{default:o(()=>{var M;return[n("div",Ie,[n("div",Ae,[n("div",Le,[a(e(v),{onClick:w=>x(l.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:o(()=>[d(l.id)?(s(),h(e(J),{key:1,class:"h-4 w-4"})):(s(),h(e(Z),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),n("h4",Ne,c(l.nombre),1),a(e(E),{class:y(U(l.prioridad)),variant:"outline"},{default:o(()=>[f(c(l.prioridad),1)]),_:2},1032,["class"]),a(e(E),{class:y(F(l.estado))},{default:o(()=>[f(c(l.estado),1)]),_:2},1032,["class"])]),d(l.id)?(s(),m("div",He,[l.descripcion?(s(),m("p",qe,c(l.descripcion),1)):i("",!0),n("div",Fe,[n("div",Re,[a(e(ee),{class:"h-4 w-4"}),n("span",null,c(B(l.fecha_inicio))+" - "+c(B(l.fecha_fin)),1)]),l.responsable?(s(),m("div",Oe,[a(e(O),{class:"h-4 w-4"}),n("span",null,c(l.responsable.name),1)])):i("",!0),_(l.fecha_fin)?(s(),m("div",{key:1,class:y(["flex items-center gap-1",{"text-red-600":(M=_(l.fecha_fin))==null?void 0:M.includes("Vencido")}])},[a(e(j),{class:"h-4 w-4"}),n("span",null,c(_(l.fecha_fin)),1)],2)):i("",!0)]),l.usuarios&&l.usuarios.length>0?(s(),m("div",Ge,[a(e(we),{class:"h-4 w-4 text-muted-foreground"}),n("div",Je,[(s(!0),m(V,null,T(l.usuarios,w=>(s(),h(e(E),{key:w.id,variant:"secondary"},{default:o(()=>[f(c(w.name),1)]),_:2},1024))),128))])])):i("",!0)])):i("",!0)])]),t.canEdit||t.canDelete||t.canComplete?(s(),m("div",Ke,[t.canComplete?(s(),h(e(v),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:w=>W(l)},{default:o(()=>[a(e(I),{class:"h-3 w-3 mr-1"}),r[1]||(r[1]=f(" Completar ",-1))]),_:1},8,["onClick"])):i("",!0),t.canEdit?(s(),h(e(v),{key:1,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:w=>X(l,"en_progreso")},{default:o(()=>[a(e(j),{class:"h-3 w-3 mr-1"}),r[2]||(r[2]=f(" En progreso ",-1))]),_:1},8,["onClick"])):i("",!0),t.canEdit?(s(),h(e(v),{key:2,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:w=>g(l)},{default:o(()=>[a(e(te),{class:"h-3 w-3 mr-1"}),r[3]||(r[3]=f(" Editar ",-1))]),_:1},8,["onClick"])):i("",!0),t.canDelete?(s(),h(e(v),{key:3,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:w=>C(l)},{default:o(()=>[a(e(N),{class:"h-3 w-3 mr-1"}),r[4]||(r[4]=f(" Eliminar ",-1))]),_:1},8,["onClick"])):i("",!0)])):i("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):i("",!0),b.value.en_progreso.length>0?(s(),m("div",Qe,[n("h3",We,[a(e(j),{class:"h-5 w-5 text-blue-600"}),f(" En Progreso ("+c(b.value.en_progreso.length)+") ",1)]),n("div",Xe,[(s(!0),m(V,null,T(b.value.en_progreso,l=>(s(),h(e(L),{key:l.id,class:"border-l-4 border-l-blue-500"},{default:o(()=>[a(e(A),{class:"p-4"},{default:o(()=>{var M;return[n("div",Ye,[n("div",Ze,[n("div",et,[a(e(v),{onClick:w=>x(l.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:o(()=>[d(l.id)?(s(),h(e(J),{key:1,class:"h-4 w-4"})):(s(),h(e(Z),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),n("h4",tt,c(l.nombre),1),a(e(E),{class:y(U(l.prioridad)),variant:"outline"},{default:o(()=>[f(c(l.prioridad),1)]),_:2},1032,["class"]),a(e(E),{class:"bg-blue-100 text-blue-800"},{default:o(()=>[...r[5]||(r[5]=[f(" En Progreso ",-1)])]),_:1})]),d(l.id)?(s(),m("div",st,[l.descripcion?(s(),m("p",at,c(l.descripcion),1)):i("",!0),n("div",lt,[n("div",nt,[a(e(ee),{class:"h-4 w-4"}),n("span",null,"Fecha límite: "+c(B(l.fecha_fin)),1)]),l.responsable?(s(),m("div",ot,[a(e(O),{class:"h-4 w-4"}),n("span",null,c(l.responsable.name),1)])):i("",!0),_(l.fecha_fin)?(s(),m("div",{key:1,class:y(["flex items-center gap-1",{"text-red-600":(M=_(l.fecha_fin))==null?void 0:M.includes("Vencido")}])},[a(e(j),{class:"h-4 w-4"}),n("span",null,c(_(l.fecha_fin)),1)],2)):i("",!0)])])):i("",!0)])]),t.canEdit||t.canDelete||t.canComplete?(s(),m("div",it,[t.canComplete?(s(),h(e(v),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:w=>W(l)},{default:o(()=>[a(e(I),{class:"h-3 w-3 mr-1"}),r[6]||(r[6]=f(" Completar ",-1))]),_:1},8,["onClick"])):i("",!0),t.canEdit?(s(),h(e(v),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:w=>g(l)},{default:o(()=>[a(e(te),{class:"h-3 w-3 mr-1"}),r[7]||(r[7]=f(" Editar ",-1))]),_:1},8,["onClick"])):i("",!0),t.canDelete?(s(),h(e(v),{key:2,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:w=>C(l)},{default:o(()=>[a(e(N),{class:"h-3 w-3 mr-1"}),r[8]||(r[8]=f(" Eliminar ",-1))]),_:1},8,["onClick"])):i("",!0)])):i("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):i("",!0),b.value.completados.length>0?(s(),m("div",dt,[n("h3",rt,[a(e(I),{class:"h-5 w-5 text-green-600"}),f(" Completados ("+c(b.value.completados.length)+") ",1)]),n("div",ct,[(s(!0),m(V,null,T(b.value.completados,l=>(s(),h(e(L),{key:l.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:o(()=>[a(e(A),{class:"p-4"},{default:o(()=>[n("div",mt,[n("div",ut,[n("div",ft,[a(e(I),{class:"h-5 w-5 text-green-600"}),n("h4",ht,c(l.nombre),1),a(e(E),{class:"bg-green-100 text-green-800"},{default:o(()=>[...r[9]||(r[9]=[f(" Completado ",-1)])]),_:1})]),n("div",xt,[l.completado_at?(s(),m("div",vt,[a(e(j),{class:"h-3 w-3"}),n("span",null,"Completado: "+c(R(l.completado_at)),1)])):i("",!0),l.completado_por_usuario?(s(),m("div",gt,[a(e(O),{class:"h-3 w-3"}),n("span",null,"Por: "+c(l.completado_por_usuario.name),1)])):i("",!0),l.notas_completado?(s(),m("p",yt,' "'+c(l.notas_completado)+'" ',1)):i("",!0)])])]),t.canEdit||t.canDelete?(s(),m("div",pt,[t.canEdit?(s(),h(e(v),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:M=>X(l,"pendiente")},{default:o(()=>[a(e(Y),{class:"h-3 w-3 mr-1"}),r[10]||(r[10]=f(" Reabrir ",-1))]),_:1},8,["onClick"])):i("",!0),t.canDelete?(s(),h(e(v),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:M=>C(l)},{default:o(()=>[a(e(N),{class:"h-3 w-3 mr-1"}),r[11]||(r[11]=f(" Eliminar ",-1))]),_:1},8,["onClick"])):i("",!0)])):i("",!0)]),_:2},1024)]),_:2},1024))),128))])])):i("",!0),t.entregables.length===0?(s(),m("div",kt,[a(e(be),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r[12]||(r[12]=n("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):i("",!0)])):i("",!0),a(e(fe),{open:z.value,"onUpdate:open":r[0]||(r[0]=l=>z.value=l)},{default:o(()=>[a(e(he),null,{default:o(()=>[a(e(xe),null,{default:o(()=>[a(e(ve),null,{default:o(()=>[...r[13]||(r[13]=[f("¿Estás seguro?",-1)])]),_:1}),a(e(ge),null,{default:o(()=>{var l;return[f(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+c((l=D.value)==null?void 0:l.nombre)+'". ',1)]}),_:1})]),_:1}),a(e(ye),null,{default:o(()=>[a(e(pe),null,{default:o(()=>[...r[14]||(r[14]=[f("Cancelar",-1)])]),_:1}),a(e(ke),{onClick:S},{default:o(()=>[...r[15]||(r[15]=[f(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Ct={class:"flex items-center justify-between gap-2"},wt={class:"flex items-center gap-2 min-w-0 flex-1"},$t={key:0,class:"text-sm text-muted-foreground line-clamp-2"},_t={class:"flex items-center justify-between gap-4 text-xs text-muted-foreground"},Et={class:"flex items-center gap-3"},Dt={key:0,class:"flex items-center gap-1"},Mt={key:1,class:"text-gray-300"},zt={key:2,class:"flex items-center gap-1"},jt={key:0,class:"flex items-center gap-1.5"},Bt={class:"truncate max-w-[100px]"},Pt={class:"flex justify-between items-center text-xs"},Vt={class:"font-medium"},Tt={class:"flex items-center justify-between text-xs text-muted-foreground"},Ut={key:0,class:"flex items-center gap-1"},St={key:1,class:"flex flex-wrap gap-1"},It={class:"w-full flex items-center justify-between gap-2"},At={class:"flex items-center gap-1"},Lt={class:"flex items-center gap-1"},Nt={class:"border-t px-4 py-4 bg-muted/30"},Ht={key:0,class:"mb-4 flex justify-end"},qt={key:2,class:"text-center py-4 text-muted-foreground text-sm"},Ft=le({__name:"HitoCard",props:{hito:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},expandEntregablesInline:{type:Boolean,default:!1},canCompleteEntregables:{type:Boolean,default:!1},canEditEntregables:{type:Boolean,default:!1}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables","complete-entregable","update-entregable-status","edit-entregable"],setup(t,{emit:q}){const p=t,$=P(!1),k=q,z=()=>{p.expandEntregablesInline?$.value=!$.value:k("view-entregables",p.hito)},D=x=>{k("complete-entregable",x)},b=(x,d)=>{k("update-entregable-status",x,d)},F=x=>{k("edit-entregable",x,p.hito)},U=H(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[p.hito.estado]||p.hito.estado),B=H(()=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[p.hito.estado]||"bg-gray-400"),R=H(()=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[p.hito.estado]||"secondary"),_=x=>{if(!x)return"";try{const d=typeof x=="string"?new Date(x):x;return K(d,"dd MMM yyyy",{locale:Q})}catch{return""}};return(x,d)=>(s(),h(e(L),{class:"hover:shadow-md transition-shadow duration-200"},{default:o(()=>[a(e(ne),{class:y(t.compact?"pb-2 pt-3 px-4":"pb-3")},{default:o(()=>[n("div",Ct,[n("div",wt,[n("div",{class:y([B.value,"w-2 h-2 rounded-full flex-shrink-0"])},null,2),a(e(oe),{class:y([t.compact?"text-base":"text-lg","font-medium truncate"])},{default:o(()=>[f(c(t.hito.nombre),1)]),_:1},8,["class"])]),a(e(E),{variant:R.value,class:y(t.compact?"text-xs px-2 py-0.5":"text-xs")},{default:o(()=>[f(c(t.hito.estado_label||U.value),1)]),_:1},8,["variant","class"])])]),_:1},8,["class"]),a(e(A),{class:y(t.compact?"pb-2 px-4 space-y-2":"pb-3 space-y-3")},{default:o(()=>{var g;return[t.hito.descripcion&&!t.compact?(s(),m("p",$t,c(t.hito.descripcion),1)):i("",!0),n("div",_t,[n("div",Et,[t.hito.fecha_inicio?(s(),m("div",Dt,[a(e(Ee),{class:"h-3 w-3"}),n("span",null,c(_(t.hito.fecha_inicio)),1)])):i("",!0),t.hito.fecha_inicio&&t.hito.fecha_fin?(s(),m("span",Mt,"→")):i("",!0),t.hito.fecha_fin?(s(),m("div",zt,[a(e(Be),{class:"h-3 w-3"}),n("span",null,c(_(t.hito.fecha_fin)),1)])):i("",!0)]),t.hito.responsable?(s(),m("div",jt,[a(e(re),{class:"h-5 w-5"},{default:o(()=>[a(e(ce),{class:"text-[10px]"},{default:o(()=>{var C,S;return[f(c((S=(C=t.hito.responsable.name)==null?void 0:C.charAt(0))==null?void 0:S.toUpperCase()),1)]}),_:1})]),_:1}),n("span",Bt,c(t.hito.responsable.name),1)])):i("",!0)]),n("div",{class:y(t.compact?"space-y-1":"space-y-2")},[n("div",Pt,[d[8]||(d[8]=n("span",{class:"text-muted-foreground"},"Progreso",-1)),n("span",Vt,c(t.hito.porcentaje_completado)+"%",1)]),a(e(de),{"model-value":t.hito.porcentaje_completado,class:y(t.compact?"h-1.5":"h-2")},null,8,["model-value","class"])],2),n("div",Tt,[n("span",null,c(t.hito.entregables_completados||0)+"/"+c(t.hito.total_entregables||((g=t.hito.entregables)==null?void 0:g.length)||0)+" entregables",1),t.hito.dias_restantes!==null&&t.hito.dias_restantes!==void 0?(s(),m("div",Ut,[a(e(j),{class:"h-3 w-3"}),n("span",{class:y({"text-red-500 font-medium":t.hito.dias_restantes<0,"text-orange-500":t.hito.dias_restantes>=0&&t.hito.dias_restantes<=7})},c(t.hito.dias_restantes<0?`Vencido hace ${Math.abs(t.hito.dias_restantes)} días`:`${t.hito.dias_restantes} días`),3)])):i("",!0)]),!t.compact&&t.hito.etiquetas&&t.hito.etiquetas.length>0?(s(),m("div",St,[(s(!0),m(V,null,T(t.hito.etiquetas.slice(0,3),C=>(s(),h(e(E),{key:C.id,variant:"outline",class:"text-xs",style:_e({borderColor:C.color||"#94a3b8",color:C.color||"#64748b"})},{default:o(()=>[f(c(C.nombre),1)]),_:2},1032,["style"]))),128)),t.hito.etiquetas.length>3?(s(),h(e(E),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>[f(" +"+c(t.hito.etiquetas.length-3),1)]),_:1})):i("",!0)])):i("",!0)]}),_:1},8,["class"]),t.showActions?(s(),h(e(ie),{key:0,class:y(t.compact?"pt-2 pb-3 px-4 border-t":"pt-3 border-t")},{default:o(()=>[n("div",It,[n("div",At,[t.expandEntregablesInline?i("",!0):(s(),h(e(v),{key:0,variant:"ghost",size:"sm",onClick:d[0]||(d[0]=g=>x.$emit("view",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(De),{class:"h-4 w-4"}),d[9]||(d[9]=n("span",{class:"ml-1.5"},"Ver detalles",-1))]),_:1})),a(e(v),{variant:"ghost",size:"sm",onClick:z,class:"h-8 px-2"},{default:o(()=>[a(e(se),{class:"h-4 w-4"}),d[10]||(d[10]=n("span",{class:"ml-1.5"},"Entregables",-1)),t.expandEntregablesInline?(s(),h($e($.value?e(Ce):e(J)),{key:0,class:"h-3 w-3 ml-1"})):i("",!0)]),_:1})]),n("div",Lt,[t.canEdit?(s(),h(e(v),{key:0,variant:"ghost",size:"sm",onClick:d[1]||(d[1]=g=>x.$emit("edit",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(Me),{class:"h-4 w-4"}),d[11]||(d[11]=n("span",{class:"ml-1.5"},"Editar",-1))]),_:1})):i("",!0),t.canManageDeliverables?(s(),h(e(v),{key:1,variant:"ghost",size:"sm",onClick:d[2]||(d[2]=g=>x.$emit("add-entregable",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(G),{class:"h-4 w-4"}),d[12]||(d[12]=n("span",{class:"ml-1.5"},"Añadir",-1))]),_:1})):i("",!0),a(e(v),{variant:"ghost",size:"sm",onClick:d[3]||(d[3]=g=>x.$emit("duplicate",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(ze),{class:"h-4 w-4"}),d[13]||(d[13]=n("span",{class:"ml-1.5"},"Duplicar",-1))]),_:1}),t.canDelete?(s(),h(e(v),{key:2,variant:"ghost",size:"sm",onClick:d[4]||(d[4]=g=>x.$emit("delete",t.hito)),class:"h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50"},{default:o(()=>[a(e(N),{class:"h-4 w-4"}),d[14]||(d[14]=n("span",{class:"ml-1.5"},"Eliminar",-1))]),_:1})):i("",!0)])])]),_:1},8,["class"])):i("",!0),t.expandEntregablesInline?(s(),h(e(me),{key:1,open:$.value,"onUpdate:open":d[7]||(d[7]=g=>$.value=g)},{default:o(()=>[a(e(ue),null,{default:o(()=>[n("div",Nt,[t.canManageDeliverables?(s(),m("div",Ht,[a(e(v),{variant:"outline",size:"sm",onClick:d[5]||(d[5]=g=>k("add-entregable",t.hito))},{default:o(()=>[a(e(G),{class:"h-4 w-4 mr-1"}),d[15]||(d[15]=f(" Añadir Entregable ",-1))]),_:1})])):i("",!0),t.hito.entregables&&t.hito.entregables.length>0?(s(),h(bt,{key:1,entregables:t.hito.entregables,"can-edit":t.canEditEntregables,"can-delete":!1,"can-complete":t.canCompleteEntregables,"view-mode":"list",onComplete:D,onUpdateStatus:b,onEdit:F},null,8,["entregables","can-edit","can-complete"])):(s(),m("div",qt,[a(e(se),{class:"h-8 w-8 mx-auto mb-2 opacity-50"}),d[17]||(d[17]=n("p",null,"No hay entregables asignados a este hito",-1)),t.canManageDeliverables?(s(),h(e(v),{key:0,variant:"outline",size:"sm",class:"mt-3",onClick:d[6]||(d[6]=g=>k("add-entregable",t.hito))},{default:o(()=>[a(e(G),{class:"h-4 w-4 mr-1"}),d[16]||(d[16]=f(" Crear primer entregable ",-1))]),_:1})):i("",!0)]))])]),_:1})]),_:1},8,["open"])):i("",!0)]),_:1}))}}),gs=je(Ft,[["__scopeId","data-v-88d248b6"]]);export{gs as H,se as L};
