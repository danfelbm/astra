import{d as M,k,j as _,o as i,e as s,b as t,f as o,u as e,m as H,P as x,g as n,a as v,i as p,R as K,t as u,F as w,r as P,n as W,W as E}from"./app-BD3MTM58.js";import{d as q,_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-DBe60XPu.js";import{_ as $}from"./createLucideIcon-ws-ojhqG.js";import{_ as R,a as T,b as V,c as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-eH9eZ0b3.js";import{_ as I}from"./CardDescription.vue_vue_type_script_setup_true_lang-DHO4dgla.js";import{_ as O,a as Q,b as y,c as m,d as J,e as d}from"./TableHeader.vue_vue_type_script_setup_true_lang-B9MUxOhn.js";import{_ as b}from"./index-DDOs4BX8.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-4dPJJov-.js";import{_ as Y}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-BMVP7A5c.js";import{_ as Z,a as ee,b as te,c as C}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-ff5IG9It.js";import{P as se}from"./plus-BU8iIQ4G.js";import{U as le}from"./users-CUQRvubh.js";import{E as ae}from"./ellipsis-C9jPJmK3.js";import{E as re}from"./eye-wSy-RHLi.js";import{S as ne}from"./square-pen-taI_Cz3E.js";import{T as oe}from"./trash-2-KUgHUgZu.js";import"./index-Blt3B60n.js";import"./check-Di0hAdCT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DaZYUUcn.js";import"./Label.vue_vue_type_script_setup_true_lang-CqzYP5es.js";import"./index-CeeVXjEe.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CBFnjOpf.js";import"./VisuallyHidden-I5ZB6YL5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BtEd5dZV.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D8eqrWvm.js";import"./index-CUgsP1ga.js";import"./briefcase-BMZqU2EF.js";import"./calendar-CHxGHjFt.js";import"./circle-alert-OKsAybsd.js";import"./map-pin-BEVeS3av.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-CaLjgM8F.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DJO2kGII.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-CIJ4DMw1.js";import"./loader-circle-DWmh85C3.js";import"./search-DSPNRLCC.js";import"./history-DDpRg7Pm.js";import"./save-CkkQSecf.js";const ie={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ue={class:"flex items-center justify-between"},de={class:"flex gap-4"},me={class:"flex-1"},fe={key:0},_e={class:"flex items-center gap-2"},pe={class:"font-semibold"},ce={class:"text-xs text-muted-foreground"},ge={class:"text-sm text-muted-foreground max-w-xs truncate"},xe={class:"flex items-center gap-1"},ve={class:"text-sm"},$e={key:0,class:"flex items-center justify-center space-x-2 mt-6"},he={class:"flex gap-1"},ot=M({__name:"Index",props:{roles:{},segments:{},filters:{},filterFieldsConfig:{},availablePermissions:{}},setup(B){const f=B,D=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"}],h=k(f.filters.search||""),c=k(!1),g=a=>["super_admin","admin","manager","user","end_customer"].includes(a.name),N=a=>!a||a.length===0?"Sin permisos":a.includes("*")?"Todos los permisos":`${a.length} permisos`,U=a=>!a||a.length===0?"Sin usuarios":`${a.length} usuario${a.length!==1?"s":""}`,j=a=>!a||a.length===0?"Sin segmentos":`${a.length} segmento${a.length!==1?"s":""}`,S=()=>{E.get("/admin/roles",{search:h.value},{preserveState:!0,preserveScroll:!0})},z=a=>{confirm(`¿Estás seguro de eliminar el rol "${a.display_name}"?`)&&E.delete(`/admin/roles/${a.id}`)},A=a=>!g(a),L=a=>!g(a)&&(!a.users||a.users.length===0);return(a,l)=>(i(),_(G,{breadcrumbs:D},{default:s(()=>[t(e(H),{title:"Roles y Permisos"}),o("div",ie,[o("div",ue,[l[3]||(l[3]=o("div",null,[o("h2",{class:"text-2xl font-bold tracking-tight"},"Roles y Permisos"),o("p",{class:"text-muted-foreground"}," Gestiona los roles y permisos del sistema ")],-1)),t(e(x),{href:a.route("admin.roles.create")},{default:s(()=>[t(e($),null,{default:s(()=>[t(e(se),{class:"mr-2 h-4 w-4"}),l[2]||(l[2]=n(" Nuevo Rol "))]),_:1})]),_:1},8,["href"])]),t(e(R),null,{default:s(()=>[t(e(T),null,{default:s(()=>[t(e(V),{class:"text-base"},{default:s(()=>l[4]||(l[4]=[n("Filtros")])),_:1})]),_:1}),t(e(F),{class:"space-y-4"},{default:s(()=>[o("div",de,[o("div",me,[t(e(X),{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=r=>h.value=r),placeholder:"Buscar por nombre o descripción...",onKeyup:K(S,["enter"])},null,8,["modelValue"])]),t(e($),{onClick:S,variant:"secondary"},{default:s(()=>l[5]||(l[5]=[n(" Buscar ")])),_:1}),t(e($),{onClick:l[1]||(l[1]=r=>c.value=!c.value),variant:"outline"},{default:s(()=>[n(u(c.value?"Ocultar":"Mostrar")+" Filtros Avanzados ",1)]),_:1})]),c.value?(i(),v("div",fe,[t(Y,{fieldsConfig:a.filterFieldsConfig,baseUrl:"/admin/roles"},null,8,["fieldsConfig"])])):p("",!0)]),_:1})]),_:1}),t(e(R),null,{default:s(()=>[t(e(T),null,{default:s(()=>[t(e(V),null,{default:s(()=>l[6]||(l[6]=[n("Roles del Sistema")])),_:1}),t(e(I),null,{default:s(()=>[n(" Total de "+u(f.roles.total)+" roles registrados ",1)]),_:1})]),_:1}),t(e(F),null,{default:s(()=>[t(e(O),null,{default:s(()=>[t(e(Q),null,{default:s(()=>[t(e(y),null,{default:s(()=>[t(e(m),null,{default:s(()=>l[7]||(l[7]=[n("Rol")])),_:1}),t(e(m),null,{default:s(()=>l[8]||(l[8]=[n("Descripción")])),_:1}),t(e(m),null,{default:s(()=>l[9]||(l[9]=[n("Tipo")])),_:1}),t(e(m),null,{default:s(()=>l[10]||(l[10]=[n("Permisos")])),_:1}),t(e(m),null,{default:s(()=>l[11]||(l[11]=[n("Usuarios")])),_:1}),t(e(m),null,{default:s(()=>l[12]||(l[12]=[n("Segmentos")])),_:1}),t(e(m),{class:"text-right"},{default:s(()=>l[13]||(l[13]=[n("Acciones")])),_:1})]),_:1})]),_:1}),t(e(J),null,{default:s(()=>[(i(!0),v(w,null,P(f.roles.data,r=>(i(),_(e(y),{key:r.id},{default:s(()=>[t(e(d),{class:"font-medium"},{default:s(()=>[o("div",_e,[t(e(q),{class:"h-4 w-4 text-muted-foreground"}),o("div",null,[o("p",pe,u(r.display_name),1),o("p",ce,u(r.name),1)])])]),_:2},1024),t(e(d),null,{default:s(()=>[o("p",ge,u(r.description||"Sin descripción"),1)]),_:2},1024),t(e(d),null,{default:s(()=>[t(e(b),{variant:g(r)?"default":"secondary"},{default:s(()=>[n(u(g(r)?"Sistema":"Personalizado"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(d),null,{default:s(()=>[t(e(b),{variant:"outline"},{default:s(()=>[n(u(N(r.permissions)),1)]),_:2},1024)]),_:2},1024),t(e(d),null,{default:s(()=>[o("div",xe,[t(e(le),{class:"h-4 w-4 text-muted-foreground"}),o("span",ve,u(U(r.users)),1)])]),_:2},1024),t(e(d),null,{default:s(()=>[t(e(b),{variant:"ghost"},{default:s(()=>[n(u(j(r.segments)),1)]),_:2},1024)]),_:2},1024),t(e(d),{class:"text-right"},{default:s(()=>[t(e(Z),null,{default:s(()=>[t(e(ee),{asChild:""},{default:s(()=>[t(e($),{variant:"ghost",size:"icon"},{default:s(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(te),{align:"end"},{default:s(()=>[t(e(x),{href:`/admin/roles/${r.id}`},{default:s(()=>[t(e(C),null,{default:s(()=>[t(e(re),{class:"mr-2 h-4 w-4"}),l[14]||(l[14]=n(" Ver Detalles "))]),_:1})]),_:2},1032,["href"]),A(r)?(i(),_(e(x),{key:0,href:`/admin/roles/${r.id}/edit`},{default:s(()=>[t(e(C),null,{default:s(()=>[t(e(ne),{class:"mr-2 h-4 w-4"}),l[15]||(l[15]=n(" Editar "))]),_:1})]),_:2},1032,["href"])):p("",!0),L(r)?(i(),_(e(C),{key:1,onClick:ye=>z(r),class:"text-destructive"},{default:s(()=>[t(e(oe),{class:"mr-2 h-4 w-4"}),l[16]||(l[16]=n(" Eliminar "))]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),f.roles.data.length===0?(i(),_(e(y),{key:0},{default:s(()=>[t(e(d),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:s(()=>l[17]||(l[17]=[n(" No se encontraron roles ")])),_:1})]),_:1})):p("",!0)]),_:1})]),_:1}),f.roles.last_page>1?(i(),v("div",$e,[o("nav",he,[(i(!0),v(w,null,P(f.roles.links,r=>(i(),_(e(x),{key:r.label,href:r.url,class:W(["px-3 py-2 text-sm rounded-md",r.active?"bg-primary text-primary-foreground":"hover:bg-muted",!r.url&&"opacity-50 cursor-not-allowed"]),innerHTML:r.label,disabled:!r.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):p("",!0)]),_:1})]),_:1})])]),_:1}))}});export{ot as default};
