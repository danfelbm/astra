import{_ as f,a as v,b as x,c as p,j as w,C as D,M as j,i as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bb4ttR9D.js";import{_ as y}from"./AppLogo.vue_vue_type_script_setup_true_lang-DrqDJzr9.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-B3pnbTjs.js";import{_ as E}from"./Separator.vue_vue_type_script_setup_true_lang-C3Bm2iOe.js";import{d as F,k as I,a as c,o as d,b as e,u as t,m as N,e as a,f as s,g as i,t as r,i as _,n as R,F as C,r as z,j as H,W as L}from"./app-DbkfmGRE.js";import{C as h}from"./circle-check-big-Cxe-71oo.js";import{A as P}from"./arrow-left-CqRZXtcX.js";import{H as q}from"./hash-C7boK4zf.js";import{C as W}from"./copy-BfaeECU0.js";import"./index-B_GEekfi.js";import"./VisuallyHidden-Dz0_1hP9.js";const O={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},U={class:"flex items-center justify-between"},G={class:"text-3xl font-bold flex items-center gap-2"},J={class:"space-y-4"},K={key:0,class:"text-muted-foreground"},Q={class:"flex flex-wrap gap-4 text-sm"},X={class:"flex items-center gap-2"},Y={class:"flex items-center gap-2 text-muted-foreground"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"space-y-4"},te={class:"text-lg"},se={class:"text-lg font-mono"},oe={class:"space-y-4"},ae={class:"text-lg font-mono"},ne={class:"flex items-center gap-2 mb-2"},ie={class:"text-xs font-mono bg-muted p-2 rounded flex-1 break-all"},re={class:"flex gap-2"},le={class:"space-y-6"},de={class:"flex items-start justify-between"},ce={class:"flex-1"},ue={key:0,class:"text-red-500"},me={key:0,class:"text-sm text-muted-foreground mt-1"},fe={class:"bg-muted/30 rounded-lg p-4"},pe={class:"text-lg"},_e={class:"flex items-start gap-3"},Te=F({__name:"MiVoto",props:{votacion:{},voto:{}},setup(V){const k=V,$=[{title:"Dashboard",href:"/dashboard"},{title:"Mis Votaciones",href:"/votaciones"},{title:"Mi Voto",href:"#"}],m=I(!1),T=()=>{L.get("/votaciones")},M=async()=>{try{await navigator.clipboard.writeText(k.voto.token_unico),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch(n){console.error("Error al copiar token:",n)}},S=()=>{const n=`/verificar-token/${encodeURIComponent(k.voto.token_unico)}`;window.open(n,"_blank")},g=n=>new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),B=(n,o)=>!o&&o!==0?"Sin respuesta":n.type==="checkbox"?Array.isArray(o)&&o.length>0?o.join(", "):"Sin respuesta":o.toString();return(n,o)=>(d(),c(C,null,[e(t(N),{title:`Mi Voto: ${n.votacion.titulo}`},null,8,["title"]),e(A,{breadcrumbs:$},{default:a(()=>[s("div",O,[s("div",U,[s("div",null,[s("h1",G,[e(t(h),{class:"h-8 w-8 text-green-600"}),o[0]||(o[0]=i(" Mi Voto "))]),o[1]||(o[1]=s("p",{class:"text-muted-foreground"}," Resumen de tu participación en esta votación ",-1))]),e(t(y),{variant:"outline",onClick:T},{default:a(()=>[e(t(P),{class:"mr-2 h-4 w-4"}),o[2]||(o[2]=i(" Volver "))]),_:1})]),e(t(f),null,{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(x),null,{default:a(()=>[i(r(n.votacion.titulo),1)]),_:1})]),_:1}),e(t(p),null,{default:a(()=>[s("div",J,[n.votacion.descripcion?(d(),c("p",K,r(n.votacion.descripcion),1)):_("",!0),s("div",Q,[s("div",X,[e(t(w),{variant:"outline"},{default:a(()=>[i(r(n.votacion.categoria.nombre),1)]),_:1})]),s("div",Y,[e(t(D),{class:"h-4 w-4"}),i(" "+r(g(n.votacion.fecha_inicio))+" - "+r(g(n.votacion.fecha_fin)),1)])])])]),_:1})]),_:1}),e(t(f),null,{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(x),{class:"flex items-center gap-2"},{default:a(()=>[e(t(q),{class:"h-5 w-5"}),o[3]||(o[3]=i(" Información del Voto "))]),_:1})]),_:1}),e(t(p),null,{default:a(()=>[s("div",Z,[s("div",ee,[s("div",null,[e(t(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[4]||(o[4]=[i("Fecha y Hora")])),_:1}),s("p",te,r(g(n.voto.created_at)),1)]),s("div",null,[e(t(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[5]||(o[5]=[i("ID del Voto")])),_:1}),s("p",se,"#"+r(n.voto.id),1)])]),s("div",oe,[s("div",null,[e(t(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[6]||(o[6]=[i("IP Address")])),_:1}),s("p",ae,r(n.voto.ip_address),1)]),s("div",null,[e(t(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[7]||(o[7]=[i("Token de Verificación Firmado")])),_:1}),s("div",ne,[s("p",ie,r(n.voto.token_unico),1),e(t(y),{variant:"outline",size:"sm",onClick:M,class:R({"bg-green-50 border-green-200":m.value})},{default:a(()=>[e(t(W),{class:"h-4 w-4"}),i(" "+r(m.value?"Copiado!":"Copiar"),1)]),_:1},8,["class"])]),o[9]||(o[9]=s("p",{class:"text-xs text-muted-foreground mb-2"}," Token firmado digitalmente que contiene tus respuestas. Verificable públicamente. ",-1)),s("div",re,[e(t(y),{variant:"outline",size:"sm",onClick:S,class:"text-xs"},{default:a(()=>[e(t(j),{class:"h-3 w-3 mr-1"}),o[8]||(o[8]=i(" Verificar Públicamente "))]),_:1})])])])])]),_:1})]),_:1}),e(t(f),null,{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(x),{class:"flex items-center gap-2"},{default:a(()=>[e(t(h),{class:"h-5 w-5"}),o[10]||(o[10]=i(" Mis Respuestas "))]),_:1})]),_:1}),e(t(p),null,{default:a(()=>[s("div",le,[(d(!0),c(C,null,z(n.votacion.formulario_config,(l,b)=>(d(),c("div",{key:l.id,class:"space-y-2"},[s("div",de,[s("div",ce,[e(t(u),{class:"text-base font-medium"},{default:a(()=>[i(r(b+1)+". "+r(l.title)+" ",1),l.required?(d(),c("span",ue,"*")):_("",!0)]),_:2},1024),l.description?(d(),c("p",me,r(l.description),1)):_("",!0)]),e(t(w),{variant:"secondary",class:"ml-4"},{default:a(()=>[i(r(l.type==="text"?"Texto":l.type==="textarea"?"Texto largo":l.type==="select"?"Selección":l.type==="radio"?"Opción única":l.type==="checkbox"?"Múltiple":l.type),1)]),_:2},1024)]),s("div",fe,[s("p",pe,r(B(l,n.voto.respuestas[l.id])),1)]),b<n.votacion.formulario_config.length-1?(d(),H(t(E),{key:0,class:"mt-6"})):_("",!0)]))),128))])]),_:1})]),_:1}),e(t(f),{class:"border-green-200 bg-green-50/50"},{default:a(()=>[e(t(p),{class:"pt-6"},{default:a(()=>[s("div",_e,[e(t(h),{class:"h-5 w-5 text-green-600 mt-0.5"}),o[11]||(o[11]=s("div",null,[s("p",{class:"font-medium text-green-800"},"Voto registrado exitosamente"),s("p",{class:"text-sm text-green-700 mt-1"}," Tu voto ha sido firmado digitalmente y almacenado de forma segura. El token contiene tus respuestas y puede ser verificado públicamente para confirmar la integridad del proceso electoral. ")],-1))])]),_:1})]),_:1})])]),_:1})],64))}});export{Te as default};
