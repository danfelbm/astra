import{_ as T,a as x,O as U,b as h,j as g,c as $,d as G,e as R,f as W,g as q,h as w,i as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyZBe0DF.js";import{d as J,k as K,w as F,a as _,o,b as t,u as e,m as Q,e as a,f as r,j as p,i as v,P as k,g as i,t as u,F as b,r as I,n as N,W as C}from"./app-BwG9KyUw.js";import{c as X,_ as y}from"./AppLogo.vue_vue_type_script_setup_true_lang-CnnbAlVn.js";import{_ as S}from"./CardDescription.vue_vue_type_script_setup_true_lang-zQ-O7XSC.js";import{_ as Y,a as Z,b as V,c,d as ee,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-BGGI17Nv.js";import{a as te}from"./Label.vue_vue_type_script_setup_true_lang-BuuRciV6.js";import{_ as ae}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-H5FY0jEa.js";import{R as se}from"./refresh-cw-BNb3Gi2S.js";import{S as le}from"./square-pen-CW_6AcJK.js";import{T as ne}from"./trash-2-BvwokHmt.js";import"./index-BuW8vOW-.js";import"./VisuallyHidden-BMEMv7t-.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-r_DoECAx.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-BXkC-ZvY.js";import"./loader-circle-DqV2EOIr.js";import"./plus-CKJ3Vhgd.js";import"./search-JDKqhZBn.js";import"./history-DjfJxV0G.js";import"./save-UrS8v0mX.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=X("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),re={class:"flex h-full flex-1 flex-col gap-4 p-4"},oe={class:"flex items-center justify-between"},ue={class:"flex items-center justify-between"},de={class:"flex items-center gap-2"},fe={class:"flex items-center justify-between"},me={class:"text-lg font-semibold"},ce={class:"text-sm text-muted-foreground"},_e={class:"grid gap-4 md:grid-cols-3"},pe={class:"mt-4"},ve={class:"relative overflow-x-auto"},ge={class:"font-medium"},be={key:0,class:"text-xs text-muted-foreground"},ye={class:"text-sm"},Te={class:"text-sm"},xe={class:"text-sm text-muted-foreground"},he={class:"flex items-center justify-end gap-2"},$e={key:0,class:"mt-4 flex justify-center"},we={class:"flex gap-1"},ke=["innerHTML"],qe=J({__name:"Index",props:{tenants:{},filters:{},filterFieldsConfig:{},currentTenant:{}},setup(E){const L=E,M=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tenants",href:"/admin/tenants"}],d=K({search:L.filters.search||"",active:L.filters.active||"all"}),P=()=>{const l={search:d.value.search};d.value.active!=="all"&&(l.active=d.value.active),C.get("/admin/tenants",l,{preserveState:!0,preserveScroll:!0})};let j;F(()=>d.value.search,l=>{clearTimeout(j),j=setTimeout(()=>{P()},500)}),F(()=>d.value.active,()=>{P()});const z=l=>{confirm(`¿Estás seguro de eliminar el tenant "${l.name}"?`)&&C.delete(`/admin/tenants/${l.id}`)},D=l=>{C.post("/admin/tenants/switch",{tenant_id:l})},A=l=>{switch(l){case"basic":return"default";case"professional":return"secondary";case"enterprise":return"destructive";default:return"default"}},B=l=>{switch(l){case"basic":return"Básico";case"professional":return"Profesional";case"enterprise":return"Empresarial";default:return l}};return(l,s)=>(o(),_(b,null,[t(e(Q),{title:"Gestión de Tenants"}),t(O,{breadcrumbs:M},{default:a(()=>[r("div",re,[r("div",oe,[s[3]||(s[3]=r("div",null,[r("h2",{class:"text-3xl font-bold tracking-tight"},"Gestión de Tenants"),r("p",{class:"text-muted-foreground"}," Administra las organizaciones del sistema multi-tenant ")],-1)),t(e(k),{href:l.route("admin.tenants.create")},{default:a(()=>[t(e(y),null,{default:a(()=>[t(e(ie),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=i(" Nuevo Tenant "))]),_:1})]),_:1},8,["href"])]),l.currentTenant?(o(),p(e(T),{key:0},{default:a(()=>[t(e(x),{class:"pb-3"},{default:a(()=>[r("div",ue,[r("div",de,[t(e(U),{class:"h-5 w-5 text-muted-foreground"}),t(e(h),{class:"text-sm font-medium"},{default:a(()=>s[4]||(s[4]=[i("Tenant Actual")])),_:1})]),t(e(g),{variant:l.currentTenant.active?"default":"secondary"},{default:a(()=>[i(u(l.currentTenant.active?"Activo":"Inactivo"),1)]),_:1},8,["variant"])])]),_:1}),t(e($),null,{default:a(()=>[r("div",fe,[r("div",null,[r("p",me,u(l.currentTenant.name),1),r("p",ce,u(l.currentTenant.subdomain)+".votaciones.test",1)]),t(e(g),{variant:A(l.currentTenant.subscription_plan)},{default:a(()=>[i(u(B(l.currentTenant.subscription_plan)),1)]),_:1},8,["variant"])])]),_:1})]),_:1})):v("",!0),t(e(T),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(h),null,{default:a(()=>s[5]||(s[5]=[i("Filtros")])),_:1}),t(e(S),null,{default:a(()=>s[6]||(s[6]=[i("Busca y filtra los tenants del sistema")])),_:1})]),_:1}),t(e($),null,{default:a(()=>[r("div",_e,[t(e(te),{modelValue:d.value.search,"onUpdate:modelValue":s[0]||(s[0]=n=>d.value.search=n),placeholder:"Buscar por nombre o subdominio...",class:"max-w-sm"},null,8,["modelValue"]),t(e(G),{modelValue:d.value.active,"onUpdate:modelValue":s[1]||(s[1]=n=>d.value.active=n)},{default:a(()=>[t(e(R),null,{default:a(()=>[t(e(W),{placeholder:"Estado"})]),_:1}),t(e(q),null,{default:a(()=>[t(e(w),{value:"all"},{default:a(()=>s[7]||(s[7]=[i("Todos")])),_:1}),t(e(w),{value:"true"},{default:a(()=>s[8]||(s[8]=[i("Activos")])),_:1}),t(e(w),{value:"false"},{default:a(()=>s[9]||(s[9]=[i("Inactivos")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",pe,[t(ae,{"filter-fields-config":l.filterFieldsConfig,"base-route":"/admin/tenants"},null,8,["filter-fields-config"])])]),_:1})]),_:1}),t(e(T),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(h),null,{default:a(()=>s[10]||(s[10]=[i("Lista de Tenants")])),_:1}),t(e(S),null,{default:a(()=>[i(u(l.tenants.meta.total)+" tenant(s) encontrado(s) ",1)]),_:1})]),_:1}),t(e($),null,{default:a(()=>[r("div",ve,[t(e(Y),null,{default:a(()=>[t(e(Z),null,{default:a(()=>[t(e(V),null,{default:a(()=>[t(e(c),null,{default:a(()=>s[11]||(s[11]=[i("ID")])),_:1}),t(e(c),null,{default:a(()=>s[12]||(s[12]=[i("Nombre")])),_:1}),t(e(c),null,{default:a(()=>s[13]||(s[13]=[i("Subdominio")])),_:1}),t(e(c),null,{default:a(()=>s[14]||(s[14]=[i("Plan")])),_:1}),t(e(c),null,{default:a(()=>s[15]||(s[15]=[i("Estado")])),_:1}),t(e(c),null,{default:a(()=>s[16]||(s[16]=[i("Usuarios")])),_:1}),t(e(c),null,{default:a(()=>s[17]||(s[17]=[i("Creado")])),_:1}),t(e(c),{class:"text-right"},{default:a(()=>s[18]||(s[18]=[i("Acciones")])),_:1})]),_:1})]),_:1}),t(e(ee),null,{default:a(()=>[(o(!0),_(b,null,I(l.tenants.data,n=>(o(),p(e(V),{key:n.id},{default:a(()=>[t(e(f),{class:"font-medium"},{default:a(()=>[i(u(n.id),1)]),_:2},1024),t(e(f),null,{default:a(()=>{var m;return[r("div",null,[r("p",ge,u(n.name),1),n.id===((m=l.currentTenant)==null?void 0:m.id)?(o(),_("p",be," (Actual) ")):v("",!0)])]}),_:2},1024),t(e(f),null,{default:a(()=>[r("code",ye,u(n.subdomain),1)]),_:2},1024),t(e(f),null,{default:a(()=>[t(e(g),{variant:A(n.subscription_plan)},{default:a(()=>[i(u(B(n.subscription_plan)),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(f),null,{default:a(()=>[t(e(g),{variant:n.active?"default":"secondary"},{default:a(()=>[i(u(n.active?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(f),null,{default:a(()=>{var m;return[r("span",Te,u(((m=n.limits)==null?void 0:m.max_users)||"∞"),1)]}),_:2},1024),t(e(f),null,{default:a(()=>[r("span",xe,u(new Date(n.created_at).toLocaleDateString()),1)]),_:2},1024),t(e(f),{class:"text-right"},{default:a(()=>{var m;return[r("div",he,[n.id!==((m=l.currentTenant)==null?void 0:m.id)?(o(),p(e(y),{key:0,onClick:H=>D(n.id),size:"sm",variant:"outline",title:"Cambiar a este tenant"},{default:a(()=>[t(e(se),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):v("",!0),t(e(k),{href:`/admin/tenants/${n.id}/edit`},{default:a(()=>[t(e(y),{size:"sm",variant:"outline"},{default:a(()=>[t(e(le),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),t(e(y),{onClick:H=>z(n),size:"sm",variant:"outline",disabled:n.id===1,title:"Eliminar tenant"},{default:a(()=>[t(e(ne),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])])]}),_:2},1024)]),_:2},1024))),128)),l.tenants.data.length===0?(o(),p(e(V),{key:0},{default:a(()=>[t(e(f),{colspan:"8",class:"text-center text-muted-foreground"},{default:a(()=>s[19]||(s[19]=[i(" No se encontraron tenants ")])),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),l.tenants.links.length>3?(o(),_("div",$e,[r("nav",we,[(o(!0),_(b,null,I(l.tenants.links,n=>(o(),_(b,{key:n.label},[n.url?(o(),p(e(k),{key:0,href:n.url,class:N(["px-3 py-1 text-sm rounded-md",n.active?"bg-primary text-primary-foreground":"hover:bg-muted"]),innerHTML:n.label},null,8,["href","class","innerHTML"])):(o(),_("span",{key:1,class:N(["px-3 py-1 text-sm rounded-md text-muted-foreground"]),innerHTML:n.label},null,8,ke))],64))),128))])])):v("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{qe as default};
