import{_ as Ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DVhxtwsQ.js";import{d as ye,r as I,c as De,i as c,e as i,j as f,f as t,g as a,h as n,u as e,t as u,F as S,k as q,w as s,b as p,n as z,p as ze,P as Pe,s as Me,W as B}from"./app-BFCRP-hu.js";import{c as y,_ as h,a as k,b as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-C6Pf_Uif.js";import{_ as ee}from"./CardDescription.vue_vue_type_script_setup_true_lang-C5iYxevR.js";import{_ as w}from"./createLucideIcon-B48W5HGR.js";import{_ as v}from"./index-C4A356_A.js";import{_ as je}from"./Progress.vue_vue_type_script_setup_true_lang-CmiRJl8o.js";import{_ as Se,a as Ne,b as te,c as se}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-KlWRsGd7.js";import{_ as he,a as ve,b as be,c as $e,d as ke,e as xe,f as we,g as Ce}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DCHtr6n6.js";import{_ as Te}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-BP9UJR62.js";import{t as F}from"./index-D4Jmcyj5.js";import{_ as oe,a as ae,b as le,d as ie,e as R,c as E}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bk1MyGsx.js";import{C as fe}from"./circle-alert-Crqw8R8y.js";import{C as U}from"./clock-PhaHEFle.js";import{C as G}from"./circle-check-big-uen-VRRD.js";import{F as de}from"./file-text-BNtX5jn7.js";import{C as ce}from"./chevron-right-jEjsThLi.js";import{C as pe}from"./SelectValue.vue_vue_type_script_setup_true_lang-D4BkPhEO.js";import{C as re}from"./calendar-_r6_tYhJ.js";import{U as J}from"./user-B1UdYhgU.js";import{U as Ve}from"./users-D4nlGR3z.js";import{E as ne}from"./ellipsis-p-U2_drz.js";import{S as ue}from"./square-pen-DEMoq68S.js";import{T as K}from"./trash-2-8yxMJPAD.js";import{f as Q,e as X}from"./es-BDPlFIsO.js";import{A as He}from"./arrow-left-BiabW1KV.js";import{C as Ae}from"./copy-BNnrXPXq.js";import{T as Be}from"./target-BG-rBVrT.js";import{T as Fe}from"./tag-BD_pJCyF.js";import{P as _e}from"./plus-DUQ5nN3r.js";import{p as ge}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-IDczqvjz.js";import"./index-BV8EXJV5.js";import"./floating-ui.vue-r1jh_cyr.js";import"./x-CO2t7227.js";import"./Input.vue_vue_type_script_setup_true_lang-BArk2Dro.js";import"./index-D4t36AHs.js";import"./index-7Cc0L9l5.js";import"./shield-CJLgSpbM.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-it7-95jd.js";import"./VisuallyHidden-DtgZKa-V.js";import"./Label.vue_vue_type_script_setup_true_lang-BSsD_nCa.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-dTZ0TTmN.js";import"./map-pin-96AKVoID.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Bn4JBZsL.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-Dy-9tXTd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-B5X7TeC-.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C1tM4KQo.js";import"./vote-CRb2uBrD.js";import"./folder-open-CdHVd2oB.js";import"./send-B06MTMiq.js";import"./briefcase-DvfVQ7DM.js";import"./megaphone-Dd-rvhjG.js";import"./user-check-CmuxQ_fm.js";import"./clipboard-list-BbsP5NSE.js";import"./mail-C7hV_ozf.js";import"./message-square-2Ae9CC_o.js";import"./external-link-DVqz8Mr1.js";import"./panel-left-BSTwYg9i.js";import"./check-50anzA7W.js";import"./index-BZv-jeFa.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-DIFJgx_h.js";import"./utils-DHSP7tfB.js";import"./DialogTrigger-CH2BMsCR.js";const Re={class:"space-y-6"},Ue={key:0,class:"space-y-6"},qe={key:0},Ie={class:"font-semibold mb-3 flex items-center gap-2"},Le={class:"space-y-2"},Oe={class:"flex items-start justify-between"},We={class:"flex-1"},Ge={class:"flex items-center gap-2 mb-2"},Je={class:"font-medium"},Ke={key:0,class:"ml-8 space-y-3"},Qe={key:0,class:"text-sm text-muted-foreground"},Xe={class:"flex flex-wrap gap-4 text-sm"},Ye={class:"flex items-center gap-1 text-muted-foreground"},Ze={key:0,class:"flex items-center gap-1 text-muted-foreground"},et={key:1,class:"flex items-center gap-2"},tt={class:"flex gap-1"},st={key:1},ot={class:"font-semibold mb-3 flex items-center gap-2"},at={class:"space-y-2"},lt={class:"flex items-start justify-between"},it={class:"flex-1"},nt={class:"flex items-center gap-2 mb-2"},dt={class:"font-medium"},rt={key:0,class:"ml-8 space-y-3"},ut={key:0,class:"text-sm text-muted-foreground"},mt={class:"flex flex-wrap gap-4 text-sm"},ft={class:"flex items-center gap-1 text-muted-foreground"},ct={key:0,class:"flex items-center gap-1 text-muted-foreground"},pt={key:2},_t={class:"font-semibold mb-3 flex items-center gap-2"},gt={class:"space-y-2"},yt={class:"flex items-start justify-between"},ht={class:"flex-1"},vt={class:"flex items-center gap-2 mb-2"},bt={class:"font-medium line-through text-muted-foreground"},$t={class:"ml-7 space-y-1 text-sm text-muted-foreground"},kt={key:0,class:"flex items-center gap-1"},xt={key:1,class:"flex items-center gap-1"},wt={key:2,class:"italic mt-2"},Ct={key:3,class:"text-center py-8"},Et=ye({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(Y,{emit:g}){const N=Y,P=g;I([]);const T=I([]),V=I(!1),M=I(null),b=De(()=>({pendientes:N.entregables.filter(r=>r.estado==="pendiente"),en_progreso:N.entregables.filter(r=>r.estado==="en_progreso"),completados:N.entregables.filter(r=>r.estado==="completado"),cancelados:N.entregables.filter(r=>r.estado==="cancelado")})),Z=r=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800",L=r=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-600",H=r=>r?Q(new Date(r),"dd MMM yyyy",{locale:X}):"Sin fecha",A=r=>r?Q(new Date(r),"dd MMM yyyy 'a las' HH:mm",{locale:X}):"-",C=r=>{if(!r)return null;const m=Math.ceil((new Date(r).getTime()-new Date().getTime())/(1e3*60*60*24));return m<0?`Vencido hace ${Math.abs(m)} días`:m===0?"Vence hoy":m===1?"Vence mañana":`${m} días`},O=r=>{const m=T.value.indexOf(r);m===-1?T.value.push(r):T.value.splice(m,1)},l=r=>T.value.includes(r),o=r=>{P("edit",r)},_=r=>{M.value=r,V.value=!0},D=()=>{M.value&&P("delete",M.value),V.value=!1,M.value=null},W=r=>{P("complete",r)},me=(r,m)=>{P("update-status",r,m)};return(r,m)=>(i(),c("div",Re,[r.viewMode==="list"?(i(),c("div",Ue,[b.value.pendientes.length>0?(i(),c("div",qe,[a("h3",Ie,[t(e(fe),{class:"h-5 w-5 text-yellow-600"}),n(" Pendientes ("+u(b.value.pendientes.length)+") ",1)]),a("div",Le,[(i(!0),c(S,null,q(b.value.pendientes,d=>(i(),p(e(h),{key:d.id},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>{var j;return[a("div",Oe,[a("div",We,[a("div",Ge,[t(e(w),{onClick:$=>O(d.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[l(d.id)?(i(),p(e(pe),{key:1,class:"h-4 w-4"})):(i(),p(e(ce),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),a("h4",Je,u(d.nombre),1),t(e(v),{class:z(L(d.prioridad)),variant:"outline"},{default:s(()=>[n(u(d.prioridad),1)]),_:2},1032,["class"]),t(e(v),{class:z(Z(d.estado))},{default:s(()=>[n(u(d.estado),1)]),_:2},1032,["class"])]),l(d.id)?(i(),c("div",Ke,[d.descripcion?(i(),c("p",Qe,u(d.descripcion),1)):f("",!0),a("div",Xe,[a("div",Ye,[t(e(re),{class:"h-4 w-4"}),a("span",null,u(H(d.fecha_inicio))+" - "+u(H(d.fecha_fin)),1)]),d.responsable?(i(),c("div",Ze,[t(e(J),{class:"h-4 w-4"}),a("span",null,u(d.responsable.name),1)])):f("",!0),C(d.fecha_fin)?(i(),c("div",{key:1,class:z(["flex items-center gap-1",{"text-red-600":(j=C(d.fecha_fin))==null?void 0:j.includes("Vencido")}])},[t(e(U),{class:"h-4 w-4"}),a("span",null,u(C(d.fecha_fin)),1)],2)):f("",!0)]),d.usuarios&&d.usuarios.length>0?(i(),c("div",et,[t(e(Ve),{class:"h-4 w-4 text-muted-foreground"}),a("div",tt,[(i(!0),c(S,null,q(d.usuarios,$=>(i(),p(e(v),{key:$.id,variant:"secondary"},{default:s(()=>[n(u($.name),1)]),_:2},1024))),128))])])):f("",!0)])):f("",!0)]),r.canEdit||r.canDelete||r.canComplete?(i(),p(e(oe),{key:0},{default:s(()=>[t(e(ae),{asChild:""},{default:s(()=>[t(e(w),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ne),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(le),{align:"end"},{default:s(()=>[t(e(ie),null,{default:s(()=>[...m[1]||(m[1]=[n("Acciones",-1)])]),_:1}),t(e(R)),r.canComplete?(i(),p(e(E),{key:0,onClick:$=>W(d)},{default:s(()=>[t(e(G),{class:"h-4 w-4 mr-2"}),m[2]||(m[2]=n(" Marcar como completado ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canEdit?(i(),p(e(E),{key:1,onClick:$=>me(d,"en_progreso")},{default:s(()=>[t(e(U),{class:"h-4 w-4 mr-2"}),m[3]||(m[3]=n(" Marcar en progreso ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canEdit?(i(),p(e(E),{key:2,onClick:$=>o(d)},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),m[4]||(m[4]=n(" Editar ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canDelete?(i(),p(e(R),{key:3})):f("",!0),r.canDelete?(i(),p(e(E),{key:4,onClick:$=>_(d),class:"text-red-600"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),m[5]||(m[5]=n(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):f("",!0),b.value.en_progreso.length>0?(i(),c("div",st,[a("h3",ot,[t(e(U),{class:"h-5 w-5 text-blue-600"}),n(" En Progreso ("+u(b.value.en_progreso.length)+") ",1)]),a("div",at,[(i(!0),c(S,null,q(b.value.en_progreso,d=>(i(),p(e(h),{key:d.id,class:"border-l-4 border-l-blue-500"},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>{var j;return[a("div",lt,[a("div",it,[a("div",nt,[t(e(w),{onClick:$=>O(d.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[l(d.id)?(i(),p(e(pe),{key:1,class:"h-4 w-4"})):(i(),p(e(ce),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),a("h4",dt,u(d.nombre),1),t(e(v),{class:z(L(d.prioridad)),variant:"outline"},{default:s(()=>[n(u(d.prioridad),1)]),_:2},1032,["class"]),t(e(v),{class:"bg-blue-100 text-blue-800"},{default:s(()=>[...m[6]||(m[6]=[n(" En Progreso ",-1)])]),_:1})]),l(d.id)?(i(),c("div",rt,[d.descripcion?(i(),c("p",ut,u(d.descripcion),1)):f("",!0),a("div",mt,[a("div",ft,[t(e(re),{class:"h-4 w-4"}),a("span",null,"Fecha límite: "+u(H(d.fecha_fin)),1)]),d.responsable?(i(),c("div",ct,[t(e(J),{class:"h-4 w-4"}),a("span",null,u(d.responsable.name),1)])):f("",!0),C(d.fecha_fin)?(i(),c("div",{key:1,class:z(["flex items-center gap-1",{"text-red-600":(j=C(d.fecha_fin))==null?void 0:j.includes("Vencido")}])},[t(e(U),{class:"h-4 w-4"}),a("span",null,u(C(d.fecha_fin)),1)],2)):f("",!0)])])):f("",!0)]),r.canEdit||r.canDelete||r.canComplete?(i(),p(e(oe),{key:0},{default:s(()=>[t(e(ae),{asChild:""},{default:s(()=>[t(e(w),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ne),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(le),{align:"end"},{default:s(()=>[t(e(ie),null,{default:s(()=>[...m[7]||(m[7]=[n("Acciones",-1)])]),_:1}),t(e(R)),r.canComplete?(i(),p(e(E),{key:0,onClick:$=>W(d)},{default:s(()=>[t(e(G),{class:"h-4 w-4 mr-2"}),m[8]||(m[8]=n(" Marcar como completado ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canEdit?(i(),p(e(E),{key:1,onClick:$=>o(d)},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),m[9]||(m[9]=n(" Editar ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canDelete?(i(),p(e(R),{key:2})):f("",!0),r.canDelete?(i(),p(e(E),{key:3,onClick:$=>_(d),class:"text-red-600"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),m[10]||(m[10]=n(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):f("",!0),b.value.completados.length>0?(i(),c("div",pt,[a("h3",_t,[t(e(G),{class:"h-5 w-5 text-green-600"}),n(" Completados ("+u(b.value.completados.length)+") ",1)]),a("div",gt,[(i(!0),c(S,null,q(b.value.completados,d=>(i(),p(e(h),{key:d.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>[a("div",yt,[a("div",ht,[a("div",vt,[t(e(G),{class:"h-5 w-5 text-green-600"}),a("h4",bt,u(d.nombre),1),t(e(v),{class:"bg-green-100 text-green-800"},{default:s(()=>[...m[11]||(m[11]=[n(" Completado ",-1)])]),_:1})]),a("div",$t,[d.completado_at?(i(),c("div",kt,[t(e(U),{class:"h-3 w-3"}),a("span",null,"Completado: "+u(A(d.completado_at)),1)])):f("",!0),d.completado_por_usuario?(i(),c("div",xt,[t(e(J),{class:"h-3 w-3"}),a("span",null,"Por: "+u(d.completado_por_usuario.name),1)])):f("",!0),d.notas_completado?(i(),c("p",wt,' "'+u(d.notas_completado)+'" ',1)):f("",!0)])]),r.canEdit||r.canDelete?(i(),p(e(oe),{key:0},{default:s(()=>[t(e(ae),{asChild:""},{default:s(()=>[t(e(w),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ne),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(le),{align:"end"},{default:s(()=>[t(e(ie),null,{default:s(()=>[...m[12]||(m[12]=[n("Acciones",-1)])]),_:1}),t(e(R)),r.canEdit?(i(),p(e(E),{key:0,onClick:j=>me(d,"pendiente")},{default:s(()=>[t(e(fe),{class:"h-4 w-4 mr-2"}),m[13]||(m[13]=n(" Reabrir ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canDelete?(i(),p(e(R),{key:1})):f("",!0),r.canDelete?(i(),p(e(E),{key:2,onClick:j=>_(d),class:"text-red-600"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),m[14]||(m[14]=n(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]),_:2},1024)]),_:2},1024))),128))])])):f("",!0),r.entregables.length===0?(i(),c("div",Ct,[t(e(de),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),m[15]||(m[15]=a("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):f("",!0)])):f("",!0),t(e(he),{open:V.value,"onUpdate:open":m[0]||(m[0]=d=>V.value=d)},{default:s(()=>[t(e(ve),null,{default:s(()=>[t(e(be),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...m[16]||(m[16]=[n("¿Estás seguro?",-1)])]),_:1}),t(e(ke),null,{default:s(()=>{var d;return[n(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+u((d=M.value)==null?void 0:d.nombre)+'". ',1)]}),_:1})]),_:1}),t(e(xe),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...m[17]||(m[17]=[n("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:D},{default:s(()=>[...m[18]||(m[18]=[n(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Dt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},zt={class:"flex items-center justify-between"},Pt={class:"text-2xl font-bold"},Mt={class:"text-muted-foreground"},jt={class:"flex items-center gap-2"},St={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Nt={class:"text-2xl font-bold"},Tt={class:"text-2xl font-bold"},Vt={class:"text-xs text-muted-foreground"},Ht={class:"text-sm font-medium"},At={class:"text-sm font-medium"},Bt={key:0,class:"text-xs text-muted-foreground"},Ft={key:0},Rt={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Ut={class:"grid gap-4 md:grid-cols-2"},qt={class:"text-sm text-muted-foreground"},It={class:"text-sm text-muted-foreground"},Lt={class:"text-sm text-muted-foreground"},Ot={class:"space-y-2"},Wt={class:"flex items-center justify-between text-sm"},Gt={class:"flex items-center justify-between text-sm"},Jt={class:"flex items-center justify-between text-sm"},Kt={class:"flex items-center gap-2"},Qt={class:"flex flex-wrap gap-2"},Xt={class:"space-y-3"},Yt={key:0},Zt={class:"text-sm text-muted-foreground"},es={key:1},ts={class:"grid gap-4 md:grid-cols-2"},ss={class:"font-semibold mb-1"},os={key:0,class:"text-red-500"},as={class:"text-sm text-muted-foreground"},ls={key:0,class:"text-xs text-muted-foreground mt-1"},is={key:0,class:"text-center py-4"},ns={class:"grid gap-4 md:grid-cols-2 text-sm"},ds={class:"font-medium"},rs={class:"font-medium"},us={key:0},ms={class:"font-medium"},fs={key:1},cs={class:"font-medium"},ps={class:"flex justify-between items-center"},zo=ye({__name:"Show",props:{hito:{},proyecto:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageEntregables:{type:Boolean},estadisticas:{},camposPersonalizados:{},valoresCamposPersonalizados:{}},setup(Y){const g=Y,N=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:g.proyecto.nombre,href:`/admin/proyectos/${g.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${g.proyecto.id}/hitos`},{title:g.hito.nombre,href:"#"}],P=I("detalles"),T=()=>{B.visit(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/edit`)},V=()=>{B.delete(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}`,{onSuccess:()=>{F.success("Hito eliminado exitosamente")},onError:()=>{F.error("Error al eliminar el hito")}})},M=()=>{B.post(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/duplicar`,{},{onSuccess:()=>{F.success("Hito duplicado exitosamente")},onError:()=>{F.error("Error al duplicar el hito")}})},b=()=>{B.visit(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/entregables/create`)},Z=l=>{B.visit(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/entregables/${l.id}/edit`)},L=l=>{B.delete(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/entregables/${l.id}`,{onSuccess:()=>{F.success("Entregable eliminado exitosamente")},onError:()=>{F.error("Error al eliminar el entregable")}})},H=l=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",A=l=>l?Q(ge(l),"dd MMM yyyy",{locale:X}):"No definida",C=l=>l?Q(ge(l),"dd MMM yyyy 'a las' HH:mm",{locale:X}):"No definida",O=(l,o)=>{var _;if(o==null||o==="")return"No especificado";switch(l.tipo){case"date":return A(o);case"checkbox":return o?"Sí":"No";case"select":case"radio":const D=(_=l.opciones)==null?void 0:_.find(W=>W.value===o);return(D==null?void 0:D.label)||o;default:return o}};return(l,o)=>(i(),c(S,null,[t(e(ze),{title:`Hito: ${l.hito.nombre}`},null,8,["title"]),t(Ee,{breadcrumbs:N},{default:s(()=>[a("div",Dt,[a("div",zt,[a("div",null,[a("h1",Pt,u(l.hito.nombre),1),a("p",Mt,"Proyecto: "+u(l.proyecto.nombre),1)]),a("div",jt,[t(e(Pe),{href:`/admin/proyectos/${l.proyecto.id}/hitos`},{default:s(()=>[t(e(w),{variant:"outline",size:"sm"},{default:s(()=>[t(e(He),{class:"h-4 w-4 mr-2"}),o[1]||(o[1]=n(" Volver ",-1))]),_:1})]),_:1},8,["href"]),l.canEdit?(i(),p(e(w),{key:0,onClick:T,size:"sm",variant:"outline"},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),o[2]||(o[2]=n(" Editar ",-1))]),_:1})):f("",!0),t(e(w),{onClick:M,size:"sm",variant:"outline"},{default:s(()=>[t(e(Ae),{class:"h-4 w-4 mr-2"}),o[3]||(o[3]=n(" Duplicar ",-1))]),_:1}),l.canDelete?(i(),p(e(he),{key:1},{default:s(()=>[t(e(Te),{asChild:""},{default:s(()=>[t(e(w),{variant:"destructive",size:"sm"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),o[4]||(o[4]=n(" Eliminar ",-1))]),_:1})]),_:1}),t(e(ve),null,{default:s(()=>[t(e(be),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...o[5]||(o[5]=[n("¿Estás seguro?",-1)])]),_:1}),t(e(ke),null,{default:s(()=>[...o[6]||(o[6]=[n(" Esta acción no se puede deshacer. Se eliminará permanentemente el hito y todos sus entregables asociados. ",-1)])]),_:1})]),_:1}),t(e(xe),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...o[7]||(o[7]=[n("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:V},{default:s(()=>[...o[8]||(o[8]=[n(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0)])]),a("div",St,[t(e(h),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(x),{class:"text-sm font-medium"},{default:s(()=>[...o[9]||(o[9]=[n("Estado",-1)])]),_:1}),t(e(Be),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[t(e(v),{class:z([H(l.hito.estado),"mt-1"])},{default:s(()=>[n(u(l.hito.estado),1)]),_:1},8,["class"])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(x),{class:"text-sm font-medium"},{default:s(()=>[...o[10]||(o[10]=[n("Progreso",-1)])]),_:1}),t(e(U),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Nt,u(l.hito.porcentaje_completado)+"%",1),t(e(je),{value:l.hito.porcentaje_completado,class:"mt-2 h-1"},null,8,["value"])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(x),{class:"text-sm font-medium"},{default:s(()=>[...o[11]||(o[11]=[n("Entregables",-1)])]),_:1}),t(e(de),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Tt,u(l.estadisticas.total_entregables),1),a("p",Vt,u(l.estadisticas.entregables_completados)+" completados ",1)]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(x),{class:"text-sm font-medium"},{default:s(()=>[...o[12]||(o[12]=[n("Fecha Fin",-1)])]),_:1}),t(e(re),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Ht,u(A(l.hito.fecha_fin)),1),l.estadisticas.dias_restantes!==null?(i(),c("p",{key:0,class:z(["text-xs",l.estadisticas.esta_vencido?"text-red-600":"text-muted-foreground"])},u(l.estadisticas.esta_vencido?`Vencido hace ${Math.abs(l.estadisticas.dias_restantes)} días`:`${l.estadisticas.dias_restantes} días restantes`),3)):f("",!0)]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(x),{class:"text-sm font-medium"},{default:s(()=>[...o[13]||(o[13]=[n("Responsable",-1)])]),_:1}),t(e(J),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>{var _;return[a("div",At,u(((_=l.hito.responsable)==null?void 0:_.name)||"Sin asignar"),1),l.hito.responsable?(i(),c("p",Bt,u(l.hito.responsable.email),1)):f("",!0)]}),_:1})]),_:1})]),t(e(Se),{modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=_=>P.value=_),class:"flex-1"},{default:s(()=>[t(e(Ne),null,{default:s(()=>[t(e(te),{value:"detalles"},{default:s(()=>[...o[14]||(o[14]=[n("Detalles",-1)])]),_:1}),t(e(te),{value:"entregables"},{default:s(()=>[o[15]||(o[15]=n(" Entregables ",-1)),t(e(v),{variant:"secondary",class:"ml-2"},{default:s(()=>[n(u(l.estadisticas.total_entregables),1)]),_:1})]),_:1}),t(e(te),{value:"actividad"},{default:s(()=>[...o[16]||(o[16]=[n("Actividad",-1)])]),_:1})]),_:1}),t(e(se),{value:"detalles",class:"space-y-4"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(x),null,{default:s(()=>[...o[17]||(o[17]=[n("Información General",-1)])]),_:1})]),_:1}),t(e(y),{class:"space-y-4"},{default:s(()=>[l.hito.descripcion?(i(),c("div",Ft,[o[18]||(o[18]=a("h3",{class:"font-semibold mb-2"},"Descripción",-1)),a("p",Rt,u(l.hito.descripcion),1)])):f("",!0),a("div",Ut,[a("div",null,[o[19]||(o[19]=a("h3",{class:"font-semibold mb-2"},"Fecha de Inicio",-1)),a("p",qt,u(A(l.hito.fecha_inicio)),1)]),a("div",null,[o[20]||(o[20]=a("h3",{class:"font-semibold mb-2"},"Fecha de Fin",-1)),a("p",It,u(A(l.hito.fecha_fin)),1)]),a("div",null,[o[21]||(o[21]=a("h3",{class:"font-semibold mb-2"},"Orden",-1)),a("p",Lt,u(l.hito.orden),1)]),a("div",null,[o[22]||(o[22]=a("h3",{class:"font-semibold mb-2"},"Estado",-1)),t(e(v),{class:z(H(l.hito.estado))},{default:s(()=>[n(u(l.hito.estado),1)]),_:1},8,["class"])])]),a("div",null,[o[26]||(o[26]=a("h3",{class:"font-semibold mb-2"},"Resumen de Entregables",-1)),a("div",Ot,[a("div",Wt,[o[23]||(o[23]=a("span",{class:"text-muted-foreground"},"Pendientes",-1)),t(e(v),{variant:"outline"},{default:s(()=>[n(u(l.estadisticas.entregables_pendientes),1)]),_:1})]),a("div",Gt,[o[24]||(o[24]=a("span",{class:"text-muted-foreground"},"En Progreso",-1)),t(e(v),{variant:"outline",class:"bg-blue-50"},{default:s(()=>[n(u(l.estadisticas.entregables_en_progreso),1)]),_:1})]),a("div",Jt,[o[25]||(o[25]=a("span",{class:"text-muted-foreground"},"Completados",-1)),t(e(v),{variant:"outline",class:"bg-green-50"},{default:s(()=>[n(u(l.estadisticas.entregables_completados),1)]),_:1})])])])]),_:1})]),_:1}),l.hito.etiquetas&&l.hito.etiquetas.length>0?(i(),p(e(h),{key:0},{default:s(()=>[t(e(k),null,{default:s(()=>[a("div",Kt,[t(e(Fe),{class:"h-5 w-5"}),t(e(x),null,{default:s(()=>[...o[27]||(o[27]=[n("Etiquetas",-1)])]),_:1})]),t(e(ee),null,{default:s(()=>[...o[28]||(o[28]=[n(" Etiquetas asignadas a este hito para su organización y categorización ",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Qt,[(i(!0),c(S,null,q(l.hito.etiquetas,_=>(i(),p(e(v),{key:_.id,variant:"outline",class:"px-3 py-1.5",style:Me({borderColor:_.color||"#94a3b8",color:_.color||"#64748b",backgroundColor:`${_.color}15`||"#f1f5f9"})},{default:s(()=>[n(u(_.nombre),1)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})):f("",!0),l.hito.parent_id||l.hito.ruta_completa?(i(),p(e(h),{key:1},{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(x),null,{default:s(()=>[...o[29]||(o[29]=[n("Jerarquía",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Xt,[l.hito.ruta_completa?(i(),c("div",Yt,[o[30]||(o[30]=a("h3",{class:"font-semibold mb-2"},"Ruta Completa",-1)),a("p",Zt,u(l.hito.ruta_completa),1)])):f("",!0),l.hito.nivel!==void 0?(i(),c("div",es,[o[31]||(o[31]=a("h3",{class:"font-semibold mb-2"},"Nivel",-1)),t(e(v),{variant:"outline"},{default:s(()=>[n("Nivel "+u(l.hito.nivel),1)]),_:1})])):f("",!0)])]),_:1})]),_:1})):f("",!0),l.camposPersonalizados&&l.camposPersonalizados.length>0?(i(),p(e(h),{key:2},{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(x),null,{default:s(()=>[...o[32]||(o[32]=[n("Campos Personalizados",-1)])]),_:1}),t(e(ee),null,{default:s(()=>[...o[33]||(o[33]=[n(" Información adicional específica del hito ",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",ts,[(i(!0),c(S,null,q(l.camposPersonalizados,_=>{var D;return i(),c("div",{key:_.id},[a("h3",ss,[n(u(_.nombre)+" ",1),_.es_requerido?(i(),c("span",os,"*")):f("",!0)]),a("p",as,u(O(_,(D=l.valoresCamposPersonalizados)==null?void 0:D[_.id])),1),_.descripcion?(i(),c("p",ls,u(_.descripcion),1)):f("",!0)])}),128))]),!l.camposPersonalizados||l.camposPersonalizados.length===0?(i(),c("div",is,[...o[34]||(o[34]=[a("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):f("",!0)]),_:1})]),_:1})):f("",!0),t(e(h),null,{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(x),null,{default:s(()=>[...o[35]||(o[35]=[n("Información del Sistema",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",ns,[a("div",null,[o[36]||(o[36]=a("span",{class:"text-muted-foreground"},"Creado el:",-1)),a("p",ds,u(C(l.hito.created_at)),1)]),a("div",null,[o[37]||(o[37]=a("span",{class:"text-muted-foreground"},"Última actualización:",-1)),a("p",rs,u(C(l.hito.updated_at)),1)]),l.hito.created_by_usuario?(i(),c("div",us,[o[38]||(o[38]=a("span",{class:"text-muted-foreground"},"Creado por:",-1)),a("p",ms,u(l.hito.created_by_usuario.name),1)])):f("",!0),l.hito.updated_by_usuario?(i(),c("div",fs,[o[39]||(o[39]=a("span",{class:"text-muted-foreground"},"Actualizado por:",-1)),a("p",cs,u(l.hito.updated_by_usuario.name),1)])):f("",!0)])]),_:1})]),_:1})]),_:1}),t(e(se),{value:"entregables",class:"space-y-4"},{default:s(()=>[a("div",ps,[o[41]||(o[41]=a("h2",{class:"text-lg font-semibold"},"Lista de Entregables",-1)),l.canManageEntregables?(i(),p(e(w),{key:0,onClick:b,size:"sm"},{default:s(()=>[t(e(_e),{class:"h-4 w-4 mr-2"}),o[40]||(o[40]=n(" Nuevo Entregable ",-1))]),_:1})):f("",!0)]),t(Et,{entregables:l.hito.entregables||[],"can-edit":l.canManageEntregables,"can-delete":l.canManageEntregables,onEdit:Z,onDelete:L},null,8,["entregables","can-edit","can-delete"]),!l.hito.entregables||l.hito.entregables.length===0?(i(),p(e(h),{key:0},{default:s(()=>[t(e(y),{class:"text-center py-8"},{default:s(()=>[t(e(de),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o[43]||(o[43]=a("p",{class:"text-muted-foreground mb-4"},"No hay entregables asignados a este hito",-1)),l.canManageEntregables?(i(),p(e(w),{key:0,onClick:b,variant:"outline"},{default:s(()=>[t(e(_e),{class:"h-4 w-4 mr-2"}),o[42]||(o[42]=n(" Crear Primer Entregable ",-1))]),_:1})):f("",!0)]),_:1})]),_:1})):f("",!0)]),_:1}),t(e(se),{value:"actividad",class:"space-y-4"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(e(k),null,{default:s(()=>[t(e(x),null,{default:s(()=>[...o[44]||(o[44]=[n("Historial de Actividad",-1)])]),_:1}),t(e(ee),null,{default:s(()=>[...o[45]||(o[45]=[n(" Registro de cambios y actividades relacionadas con este hito ",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[...o[46]||(o[46]=[a("p",{class:"text-sm text-muted-foreground text-center py-8"}," El historial de actividad estará disponible próximamente ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{zo as default};
