import{c as L,_ as A,a as le,b as ne}from"./CardTitle.vue_vue_type_script_setup_true_lang-OwOEBs8M.js";import{_ as oe}from"./CardFooter.vue_vue_type_script_setup_true_lang-DaSJG_3N.js";import{c as te,_ as v}from"./createLucideIcon-Bj9weYht.js";import{_}from"./index-f7SqgxNn.js";import{_ as ie}from"./Progress.vue_vue_type_script_setup_true_lang-C8TT2R7Q.js";import{_ as de,b as ce}from"./index-B54BU_ZZ.js";import{_ as re,a as me}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DMdkPSlK.js";import{_ as ue,a as fe,b as he,c as xe,d as ve,e as pe,f as ge,g as ye}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-4Qq-ybUx.js";import{C as W}from"./circle-alert-DhhtPsnj.js";import{C as B}from"./clock-34rfDKXk.js";import{C as I}from"./circle-check-big-CnRIUBT2.js";import{F as ke}from"./file-text-1kAlZt4Y.js";import{C as X}from"./chevron-right-DhhVm4Ee.js";import{C as O,e as be}from"./SelectValue.vue_vue_type_script_setup_true_lang-CIcJOHl6.js";import{C as Y}from"./calendar-BUe8AnBF.js";import{U as R}from"./user-CKog2yqC.js";import{U as Ce}from"./users-DNb8eNGW.js";import{S as Z}from"./square-pen-CizrplLz.js";import{T as N}from"./trash-2-DNFUx84f.js";import{d as se,r as P,c as H,i as u,j as d,e as a,g as n,h,f as e,t as c,F as V,k as T,w as o,b as f,m as s,n as g,x as we,y as _e}from"./app-ByMz8MwQ.js";import{f as G,e as J}from"./es-BDPlFIsO.js";import{C as $e}from"./calendar-days-vCWZj8MV.js";import{E as Ee}from"./eye-B0J9w22h.js";import{P as De}from"./pen-BpFh3ZrF.js";import{P as Me}from"./plus-CKnPAnZm.js";import{C as ze}from"./copy-bVXuK5qI.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=te("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=te("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Pe={class:"space-y-6"},Ve={key:0,class:"space-y-6"},Te={key:0},Ue={class:"font-semibold mb-3 flex items-center gap-2"},Se={class:"space-y-2"},Ie={class:"flex items-start justify-between"},Le={class:"flex-1"},Ae={class:"flex items-center gap-2 mb-2"},Ne={class:"font-medium"},He={key:0,class:"ml-8 space-y-3"},qe={key:0,class:"text-sm text-muted-foreground"},Fe={class:"flex flex-wrap gap-4 text-sm"},Re={class:"flex items-center gap-1 text-muted-foreground"},Oe={key:0,class:"flex items-center gap-1 text-muted-foreground"},Ge={key:1,class:"flex items-center gap-2"},Je={class:"flex gap-1"},Ke={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},Qe={key:1},We={class:"font-semibold mb-3 flex items-center gap-2"},Xe={class:"space-y-2"},Ye={class:"flex items-start justify-between"},Ze={class:"flex-1"},et={class:"flex items-center gap-2 mb-2"},tt={class:"font-medium"},st={key:0,class:"ml-8 space-y-3"},at={key:0,class:"text-sm text-muted-foreground"},lt={class:"flex flex-wrap gap-4 text-sm"},nt={class:"flex items-center gap-1 text-muted-foreground"},ot={key:0,class:"flex items-center gap-1 text-muted-foreground"},it={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},dt={key:2},ct={class:"font-semibold mb-3 flex items-center gap-2"},rt={class:"space-y-2"},mt={class:"flex items-start justify-between"},ut={class:"flex-1"},ft={class:"flex items-center gap-2 mb-2"},ht={class:"font-medium line-through text-muted-foreground"},xt={class:"ml-7 space-y-1 text-sm text-muted-foreground"},vt={key:0,class:"flex items-center gap-1"},pt={key:1,class:"flex items-center gap-1"},gt={key:2,class:"italic mt-2"},yt={key:0,class:"flex items-center gap-1 mt-3 pt-3 border-t"},kt={key:3,class:"text-center py-8"},bt=se({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(t,{emit:q}){const y=t,C=q;P([]);const $=P([]),M=P(!1),E=P(null),k=H(()=>({pendientes:y.entregables.filter(m=>m.estado==="pendiente"),en_progreso:y.entregables.filter(m=>m.estado==="en_progreso"),completados:y.entregables.filter(m=>m.estado==="completado"),cancelados:y.entregables.filter(m=>m.estado==="cancelado")})),F=m=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-800",U=m=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-600",j=m=>m?G(new Date(m),"dd MMM yyyy",{locale:J}):"Sin fecha",S=m=>m?G(new Date(m),"dd MMM yyyy 'a las' HH:mm",{locale:J}):"-",x=m=>{if(!m)return null;const i=Math.ceil((new Date(m).getTime()-new Date().getTime())/(1e3*60*60*24));return i<0?`Vencido hace ${Math.abs(i)} días`:i===0?"Vence hoy":i===1?"Vence mañana":`${i} días`},r=m=>{const i=$.value.indexOf(m);i===-1?$.value.push(m):$.value.splice(i,1)},p=m=>$.value.includes(m),w=m=>{C("edit",m)},z=m=>{E.value=m,M.value=!0},ae=()=>{E.value&&C("delete",E.value),M.value=!1,E.value=null},K=m=>{C("complete",m)},Q=(m,i)=>{C("update-status",m,i)};return(m,i)=>(s(),u("div",Pe,[t.viewMode==="list"?(s(),u("div",Ve,[k.value.pendientes.length>0?(s(),u("div",Te,[n("h3",Ue,[a(e(W),{class:"h-5 w-5 text-yellow-600"}),h(" Pendientes ("+c(k.value.pendientes.length)+") ",1)]),n("div",Se,[(s(!0),u(V,null,T(k.value.pendientes,l=>(s(),f(e(A),{key:l.id},{default:o(()=>[a(e(L),{class:"p-4"},{default:o(()=>{var D;return[n("div",Ie,[n("div",Le,[n("div",Ae,[a(e(v),{onClick:b=>r(l.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:o(()=>[p(l.id)?(s(),f(e(O),{key:1,class:"h-4 w-4"})):(s(),f(e(X),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),n("h4",Ne,c(l.nombre),1),a(e(_),{class:g(U(l.prioridad)),variant:"outline"},{default:o(()=>[h(c(l.prioridad),1)]),_:2},1032,["class"]),a(e(_),{class:g(F(l.estado))},{default:o(()=>[h(c(l.estado),1)]),_:2},1032,["class"])]),p(l.id)?(s(),u("div",He,[l.descripcion?(s(),u("p",qe,c(l.descripcion),1)):d("",!0),n("div",Fe,[n("div",Re,[a(e(Y),{class:"h-4 w-4"}),n("span",null,c(j(l.fecha_inicio))+" - "+c(j(l.fecha_fin)),1)]),l.responsable?(s(),u("div",Oe,[a(e(R),{class:"h-4 w-4"}),n("span",null,c(l.responsable.name),1)])):d("",!0),x(l.fecha_fin)?(s(),u("div",{key:1,class:g(["flex items-center gap-1",{"text-red-600":(D=x(l.fecha_fin))==null?void 0:D.includes("Vencido")}])},[a(e(B),{class:"h-4 w-4"}),n("span",null,c(x(l.fecha_fin)),1)],2)):d("",!0)]),l.usuarios&&l.usuarios.length>0?(s(),u("div",Ge,[a(e(Ce),{class:"h-4 w-4 text-muted-foreground"}),n("div",Je,[(s(!0),u(V,null,T(l.usuarios,b=>(s(),f(e(_),{key:b.id,variant:"secondary"},{default:o(()=>[h(c(b.name),1)]),_:2},1024))),128))])])):d("",!0)])):d("",!0)])]),t.canEdit||t.canDelete||t.canComplete?(s(),u("div",Ke,[t.canComplete?(s(),f(e(v),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:b=>K(l)},{default:o(()=>[a(e(I),{class:"h-3 w-3 mr-1"}),i[1]||(i[1]=h(" Completar ",-1))]),_:1},8,["onClick"])):d("",!0),t.canEdit?(s(),f(e(v),{key:1,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:b=>Q(l,"en_progreso")},{default:o(()=>[a(e(B),{class:"h-3 w-3 mr-1"}),i[2]||(i[2]=h(" En progreso ",-1))]),_:1},8,["onClick"])):d("",!0),t.canEdit?(s(),f(e(v),{key:2,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:b=>w(l)},{default:o(()=>[a(e(Z),{class:"h-3 w-3 mr-1"}),i[3]||(i[3]=h(" Editar ",-1))]),_:1},8,["onClick"])):d("",!0),t.canDelete?(s(),f(e(v),{key:3,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:b=>z(l)},{default:o(()=>[a(e(N),{class:"h-3 w-3 mr-1"}),i[4]||(i[4]=h(" Eliminar ",-1))]),_:1},8,["onClick"])):d("",!0)])):d("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):d("",!0),k.value.en_progreso.length>0?(s(),u("div",Qe,[n("h3",We,[a(e(B),{class:"h-5 w-5 text-blue-600"}),h(" En Progreso ("+c(k.value.en_progreso.length)+") ",1)]),n("div",Xe,[(s(!0),u(V,null,T(k.value.en_progreso,l=>(s(),f(e(A),{key:l.id,class:"border-l-4 border-l-blue-500"},{default:o(()=>[a(e(L),{class:"p-4"},{default:o(()=>{var D;return[n("div",Ye,[n("div",Ze,[n("div",et,[a(e(v),{onClick:b=>r(l.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:o(()=>[p(l.id)?(s(),f(e(O),{key:1,class:"h-4 w-4"})):(s(),f(e(X),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),n("h4",tt,c(l.nombre),1),a(e(_),{class:g(U(l.prioridad)),variant:"outline"},{default:o(()=>[h(c(l.prioridad),1)]),_:2},1032,["class"]),a(e(_),{class:"bg-blue-100 text-blue-800"},{default:o(()=>[...i[5]||(i[5]=[h(" En Progreso ",-1)])]),_:1})]),p(l.id)?(s(),u("div",st,[l.descripcion?(s(),u("p",at,c(l.descripcion),1)):d("",!0),n("div",lt,[n("div",nt,[a(e(Y),{class:"h-4 w-4"}),n("span",null,"Fecha límite: "+c(j(l.fecha_fin)),1)]),l.responsable?(s(),u("div",ot,[a(e(R),{class:"h-4 w-4"}),n("span",null,c(l.responsable.name),1)])):d("",!0),x(l.fecha_fin)?(s(),u("div",{key:1,class:g(["flex items-center gap-1",{"text-red-600":(D=x(l.fecha_fin))==null?void 0:D.includes("Vencido")}])},[a(e(B),{class:"h-4 w-4"}),n("span",null,c(x(l.fecha_fin)),1)],2)):d("",!0)])])):d("",!0)])]),t.canEdit||t.canDelete||t.canComplete?(s(),u("div",it,[t.canComplete?(s(),f(e(v),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:b=>K(l)},{default:o(()=>[a(e(I),{class:"h-3 w-3 mr-1"}),i[6]||(i[6]=h(" Completar ",-1))]),_:1},8,["onClick"])):d("",!0),t.canEdit?(s(),f(e(v),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:b=>w(l)},{default:o(()=>[a(e(Z),{class:"h-3 w-3 mr-1"}),i[7]||(i[7]=h(" Editar ",-1))]),_:1},8,["onClick"])):d("",!0),t.canDelete?(s(),f(e(v),{key:2,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:b=>z(l)},{default:o(()=>[a(e(N),{class:"h-3 w-3 mr-1"}),i[8]||(i[8]=h(" Eliminar ",-1))]),_:1},8,["onClick"])):d("",!0)])):d("",!0)]}),_:2},1024)]),_:2},1024))),128))])])):d("",!0),k.value.completados.length>0?(s(),u("div",dt,[n("h3",ct,[a(e(I),{class:"h-5 w-5 text-green-600"}),h(" Completados ("+c(k.value.completados.length)+") ",1)]),n("div",rt,[(s(!0),u(V,null,T(k.value.completados,l=>(s(),f(e(A),{key:l.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:o(()=>[a(e(L),{class:"p-4"},{default:o(()=>[n("div",mt,[n("div",ut,[n("div",ft,[a(e(I),{class:"h-5 w-5 text-green-600"}),n("h4",ht,c(l.nombre),1),a(e(_),{class:"bg-green-100 text-green-800"},{default:o(()=>[...i[9]||(i[9]=[h(" Completado ",-1)])]),_:1})]),n("div",xt,[l.completado_at?(s(),u("div",vt,[a(e(B),{class:"h-3 w-3"}),n("span",null,"Completado: "+c(S(l.completado_at)),1)])):d("",!0),l.completado_por_usuario?(s(),u("div",pt,[a(e(R),{class:"h-3 w-3"}),n("span",null,"Por: "+c(l.completado_por_usuario.name),1)])):d("",!0),l.notas_completado?(s(),u("p",gt,' "'+c(l.notas_completado)+'" ',1)):d("",!0)])])]),t.canEdit||t.canDelete?(s(),u("div",yt,[t.canEdit?(s(),f(e(v),{key:0,variant:"outline",size:"sm",class:"h-7 text-xs",onClick:D=>Q(l,"pendiente")},{default:o(()=>[a(e(W),{class:"h-3 w-3 mr-1"}),i[10]||(i[10]=h(" Reabrir ",-1))]),_:1},8,["onClick"])):d("",!0),t.canDelete?(s(),f(e(v),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",onClick:D=>z(l)},{default:o(()=>[a(e(N),{class:"h-3 w-3 mr-1"}),i[11]||(i[11]=h(" Eliminar ",-1))]),_:1},8,["onClick"])):d("",!0)])):d("",!0)]),_:2},1024)]),_:2},1024))),128))])])):d("",!0),t.entregables.length===0?(s(),u("div",kt,[a(e(ke),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i[12]||(i[12]=n("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):d("",!0)])):d("",!0),a(e(ue),{open:M.value,"onUpdate:open":i[0]||(i[0]=l=>M.value=l)},{default:o(()=>[a(e(fe),null,{default:o(()=>[a(e(he),null,{default:o(()=>[a(e(xe),null,{default:o(()=>[...i[13]||(i[13]=[h("¿Estás seguro?",-1)])]),_:1}),a(e(ve),null,{default:o(()=>{var l;return[h(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+c((l=E.value)==null?void 0:l.nombre)+'". ',1)]}),_:1})]),_:1}),a(e(pe),null,{default:o(()=>[a(e(ge),null,{default:o(()=>[...i[14]||(i[14]=[h("Cancelar",-1)])]),_:1}),a(e(ye),{onClick:ae},{default:o(()=>[...i[15]||(i[15]=[h(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Ct={class:"flex items-center justify-between gap-2"},wt={class:"flex items-center gap-2 min-w-0 flex-1"},_t={key:0,class:"text-sm text-muted-foreground line-clamp-2"},$t={class:"flex items-center justify-between gap-4 text-xs text-muted-foreground"},Et={class:"flex items-center gap-3"},Dt={key:0,class:"flex items-center gap-1"},Mt={key:1,class:"text-gray-300"},zt={key:2,class:"flex items-center gap-1"},Bt={key:0,class:"flex items-center gap-1.5"},jt={class:"truncate max-w-[100px]"},Pt={class:"flex justify-between items-center text-xs"},Vt={class:"font-medium"},Tt={class:"flex items-center justify-between text-xs text-muted-foreground"},Ut={key:0,class:"flex items-center gap-1"},St={key:1,class:"flex flex-wrap gap-1"},It={class:"w-full flex items-center justify-between gap-2"},Lt={class:"flex items-center gap-1"},At={class:"flex items-center gap-1"},Nt={class:"border-t px-4 py-4 bg-muted/30"},Ht={key:1,class:"text-center py-4 text-muted-foreground text-sm"},qt=se({__name:"HitoCard",props:{hito:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},expandEntregablesInline:{type:Boolean,default:!1},canCompleteEntregables:{type:Boolean,default:!1},canEditEntregables:{type:Boolean,default:!1}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables","complete-entregable","update-entregable-status"],setup(t,{emit:q}){const y=t,C=P(!1),$=q,M=()=>{y.expandEntregablesInline?C.value=!C.value:$("view-entregables",y.hito)},E=x=>{$("complete-entregable",x)},k=(x,r)=>{$("update-entregable-status",x,r)},F=H(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[y.hito.estado]||y.hito.estado),U=H(()=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[y.hito.estado]||"bg-gray-400"),j=H(()=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[y.hito.estado]||"secondary"),S=x=>{if(!x)return"";try{const r=typeof x=="string"?new Date(x):x;return G(r,"dd MMM yyyy",{locale:J})}catch{return""}};return(x,r)=>(s(),f(e(A),{class:"hover:shadow-md transition-shadow duration-200"},{default:o(()=>[a(e(le),{class:g(t.compact?"pb-2 pt-3 px-4":"pb-3")},{default:o(()=>[n("div",Ct,[n("div",wt,[n("div",{class:g([U.value,"w-2 h-2 rounded-full flex-shrink-0"])},null,2),a(e(ne),{class:g([t.compact?"text-base":"text-lg","font-medium truncate"])},{default:o(()=>[h(c(t.hito.nombre),1)]),_:1},8,["class"])]),a(e(_),{variant:j.value,class:g(t.compact?"text-xs px-2 py-0.5":"text-xs")},{default:o(()=>[h(c(t.hito.estado_label||F.value),1)]),_:1},8,["variant","class"])])]),_:1},8,["class"]),a(e(L),{class:g(t.compact?"pb-2 px-4 space-y-2":"pb-3 space-y-3")},{default:o(()=>{var p;return[t.hito.descripcion&&!t.compact?(s(),u("p",_t,c(t.hito.descripcion),1)):d("",!0),n("div",$t,[n("div",Et,[t.hito.fecha_inicio?(s(),u("div",Dt,[a(e($e),{class:"h-3 w-3"}),n("span",null,c(S(t.hito.fecha_inicio)),1)])):d("",!0),t.hito.fecha_inicio&&t.hito.fecha_fin?(s(),u("span",Mt,"→")):d("",!0),t.hito.fecha_fin?(s(),u("div",zt,[a(e(je),{class:"h-3 w-3"}),n("span",null,c(S(t.hito.fecha_fin)),1)])):d("",!0)]),t.hito.responsable?(s(),u("div",Bt,[a(e(de),{class:"h-5 w-5"},{default:o(()=>[a(e(ce),{class:"text-[10px]"},{default:o(()=>{var w,z;return[h(c((z=(w=t.hito.responsable.name)==null?void 0:w.charAt(0))==null?void 0:z.toUpperCase()),1)]}),_:1})]),_:1}),n("span",jt,c(t.hito.responsable.name),1)])):d("",!0)]),n("div",{class:g(t.compact?"space-y-1":"space-y-2")},[n("div",Pt,[r[6]||(r[6]=n("span",{class:"text-muted-foreground"},"Progreso",-1)),n("span",Vt,c(t.hito.porcentaje_completado)+"%",1)]),a(e(ie),{"model-value":t.hito.porcentaje_completado,class:g(t.compact?"h-1.5":"h-2")},null,8,["model-value","class"])],2),n("div",Tt,[n("span",null,c(t.hito.entregables_completados||0)+"/"+c(t.hito.total_entregables||((p=t.hito.entregables)==null?void 0:p.length)||0)+" entregables",1),t.hito.dias_restantes!==null&&t.hito.dias_restantes!==void 0?(s(),u("div",Ut,[a(e(B),{class:"h-3 w-3"}),n("span",{class:g({"text-red-500 font-medium":t.hito.dias_restantes<0,"text-orange-500":t.hito.dias_restantes>=0&&t.hito.dias_restantes<=7})},c(t.hito.dias_restantes<0?`Vencido hace ${Math.abs(t.hito.dias_restantes)} días`:`${t.hito.dias_restantes} días`),3)])):d("",!0)]),!t.compact&&t.hito.etiquetas&&t.hito.etiquetas.length>0?(s(),u("div",St,[(s(!0),u(V,null,T(t.hito.etiquetas.slice(0,3),w=>(s(),f(e(_),{key:w.id,variant:"outline",class:"text-xs",style:_e({borderColor:w.color||"#94a3b8",color:w.color||"#64748b"})},{default:o(()=>[h(c(w.nombre),1)]),_:2},1032,["style"]))),128)),t.hito.etiquetas.length>3?(s(),f(e(_),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>[h(" +"+c(t.hito.etiquetas.length-3),1)]),_:1})):d("",!0)])):d("",!0)]}),_:1},8,["class"]),t.showActions?(s(),f(e(oe),{key:0,class:g(t.compact?"pt-2 pb-3 px-4 border-t":"pt-3 border-t")},{default:o(()=>[n("div",It,[n("div",Lt,[t.expandEntregablesInline?d("",!0):(s(),f(e(v),{key:0,variant:"ghost",size:"sm",onClick:r[0]||(r[0]=p=>x.$emit("view",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(Ee),{class:"h-4 w-4"}),r[7]||(r[7]=n("span",{class:"ml-1.5"},"Ver detalles",-1))]),_:1})),a(e(v),{variant:"ghost",size:"sm",onClick:M,class:"h-8 px-2"},{default:o(()=>[a(e(ee),{class:"h-4 w-4"}),r[8]||(r[8]=n("span",{class:"ml-1.5"},"Entregables",-1)),t.expandEntregablesInline?(s(),f(we(C.value?e(be):e(O)),{key:0,class:"h-3 w-3 ml-1"})):d("",!0)]),_:1})]),n("div",At,[t.canEdit?(s(),f(e(v),{key:0,variant:"ghost",size:"sm",onClick:r[1]||(r[1]=p=>x.$emit("edit",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(De),{class:"h-4 w-4"}),r[9]||(r[9]=n("span",{class:"ml-1.5"},"Editar",-1))]),_:1})):d("",!0),t.canManageDeliverables?(s(),f(e(v),{key:1,variant:"ghost",size:"sm",onClick:r[2]||(r[2]=p=>x.$emit("add-entregable",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(Me),{class:"h-4 w-4"}),r[10]||(r[10]=n("span",{class:"ml-1.5"},"Añadir",-1))]),_:1})):d("",!0),a(e(v),{variant:"ghost",size:"sm",onClick:r[3]||(r[3]=p=>x.$emit("duplicate",t.hito)),class:"h-8 px-2"},{default:o(()=>[a(e(ze),{class:"h-4 w-4"}),r[11]||(r[11]=n("span",{class:"ml-1.5"},"Duplicar",-1))]),_:1}),t.canDelete?(s(),f(e(v),{key:2,variant:"ghost",size:"sm",onClick:r[4]||(r[4]=p=>x.$emit("delete",t.hito)),class:"h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50"},{default:o(()=>[a(e(N),{class:"h-4 w-4"}),r[12]||(r[12]=n("span",{class:"ml-1.5"},"Eliminar",-1))]),_:1})):d("",!0)])])]),_:1},8,["class"])):d("",!0),t.expandEntregablesInline?(s(),f(e(re),{key:1,open:C.value,"onUpdate:open":r[5]||(r[5]=p=>C.value=p)},{default:o(()=>[a(e(me),null,{default:o(()=>[n("div",Nt,[t.hito.entregables&&t.hito.entregables.length>0?(s(),f(bt,{key:0,entregables:t.hito.entregables,"can-edit":t.canEditEntregables,"can-delete":!1,"can-complete":t.canCompleteEntregables,"view-mode":"list",onComplete:E,onUpdateStatus:k},null,8,["entregables","can-edit","can-complete"])):(s(),u("div",Ht,[a(e(ee),{class:"h-8 w-8 mx-auto mb-2 opacity-50"}),r[13]||(r[13]=n("p",null,"No hay entregables asignados a este hito",-1))]))])]),_:1})]),_:1},8,["open"])):d("",!0)]),_:1}))}}),vs=Be(qt,[["__scopeId","data-v-627de49c"]]);export{vs as H,ee as L};
