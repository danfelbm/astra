import{d as j,r as N,c as M,b as v,w as o,g as n,j as S,e,i,J as q,f as t,A as H,m as l,F as p,k as g,t as u,ay as K,h as r,v as B,s as x,n as G}from"./app-B9TOPmlt.js";import{_ as I}from"./UserLayout.vue_vue_type_script_setup_true_lang-C_ni9xDD.js";import{_,a as b,b as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-8JbMmZ0-.js";import{_ as h}from"./CardDescription.vue_vue_type_script_setup_true_lang-S9Day0Vc.js";import{_ as J}from"./createLucideIcon-DpBiCm_n.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-CvNMbvGN.js";import{_ as O,a as Q,b as k,c as w}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-JlMm7mrA.js";import{_ as A,a as L}from"./index-C3rdOr2P.js";import{_ as C}from"./ContratoCard.vue_vue_type_script_setup_true_lang-DZeSBciU.js";import{S as R}from"./search-C3SA702q.js";import{F as W}from"./filter-DsNHb0Ff.js";import{T as Y}from"./triangle-alert-dSXCfNsR.js";import{C as Z}from"./clock-CZ3tr_0q.js";import{F as P}from"./file-text-Crx8E7OL.js";import{C as D}from"./circle-check-big-BiHvKdw5.js";import{C as tt}from"./circle-x-BiIsKjEr.js";import"./useFlashMessages-w2rvDQtt.js";import"./index-DkWnUc8Q.js";import"./floating-ui.vue-BEixnLxp.js";import"./x-Cei9FK_W.js";import"./index-pQLg4C2_.js";import"./shield-Dn7CuH8Q.js";import"./user-Da-HkZ5M.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-sawyMmTN.js";import"./chevron-right-_4nRJ_uY.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-ByW9z0kj.js";import"./VisuallyHidden-Bi-0hazS.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D3EwhHq3.js";import"./index-FFvcsDEl.js";import"./check-CcWYkizm.js";import"./Label.vue_vue_type_script_setup_true_lang-B_9lqbQW.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Ca09oUOe.js";import"./index-BTjg3Nao.js";import"./circle-alert-DS5qv-mP.js";import"./map-pin-DmiZTikP.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ucYiIJj7.js";import"./ellipsis-IeOhOcSX.js";import"./usePermissions-Ob0tXupV.js";import"./square-check-big-BLiS-z23.js";import"./users-B0NsgXmm.js";import"./folder-open-CTk950sb.js";import"./index-DHeDABhg.js";import"./RovingFocusItem-UMGvH3Ea.js";import"./utils-C5vilUL6.js";import"./index-BX3b2fLA.js";import"./calendar-DorXl5Ec.js";import"./dollar-sign-D5QXxQil.js";import"./eye-Cd-dDIQG.js";import"./square-pen-DWYcAYyB.js";const et={class:"space-y-6"},st={class:"flex flex-col gap-4"},ot={class:"flex flex-col md:flex-row gap-4"},at={class:"flex-1 relative"},lt=["value"],rt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-6"},it={key:0,class:"text-center py-12"},dt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},nt={key:0,class:"text-center py-12"},ut={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ct={key:0,class:"text-center py-12"},mt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ft={key:0,class:"text-center py-12"},vt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},pt={key:0,class:"text-center py-12"},gt={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},xt={key:2,class:"flex justify-center mt-6"},_t={class:"flex gap-2"},ve=j({__name:"Index",props:{contratos:{},filtros:{},estadisticas:{},proyectos:{},authPermissions:{}},setup(d){const f=d,E=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"}],T=N(f.filtros.search||""),$=N(f.filtros.estado||"todos"),F=N(f.filtros.proyecto_id||0);M(()=>f.authPermissions.includes("contratos.view_own"));const c=M(()=>({todos:f.contratos.data,activos:f.contratos.data.filter(s=>s.estado==="activo"),finalizados:f.contratos.data.filter(s=>s.estado==="finalizado"),borradores:f.contratos.data.filter(s=>s.estado==="borrador"),cancelados:f.contratos.data.filter(s=>s.estado==="cancelado")})),V=()=>{x.get(route("user.mis-contratos.index"),{search:T.value,estado:$.value!=="todos"?$.value:void 0,proyecto_id:F.value||void 0},{preserveState:!0,preserveScroll:!0})},U=m=>{$.value=m,V()};return(m,s)=>(l(),v(I,{breadcrumbs:E},{default:o(()=>[n("div",et,[n("div",st,[s[4]||(s[4]=n("div",null,[n("h2",{class:"text-3xl font-bold tracking-tight"},"Mis Contratos"),n("p",{class:"text-muted-foreground mt-2"}," Gestiona y consulta los contratos de tus proyectos ")],-1)),n("div",ot,[n("div",at,[e(t(R),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e(t(X),{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=a=>T.value=a),placeholder:"Buscar contratos...",class:"pl-10",onKeyup:H(V,["enter"])},null,8,["modelValue"])]),q(n("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>F.value=a),onChange:V,class:"px-3 py-2 border border-input rounded-md bg-background"},[s[2]||(s[2]=n("option",{value:0},"Todos los proyectos",-1)),(l(!0),i(p,null,g(d.proyectos,a=>(l(),i("option",{key:a.id,value:a.id},u(a.nombre),9,lt))),128))],544),[[K,F.value]]),e(t(J),{onClick:V},{default:o(()=>[e(t(W),{class:"w-4 h-4 mr-2"}),s[3]||(s[3]=r(" Filtrar ",-1))]),_:1})])]),n("div",rt,[e(t(_),null,{default:o(()=>[e(t(b),{class:"pb-3"},{default:o(()=>[e(t(h),null,{default:o(()=>[...s[5]||(s[5]=[r("Total",-1)])]),_:1}),e(t(y),{class:"text-2xl"},{default:o(()=>[r(u(d.estadisticas.total),1)]),_:1})]),_:1})]),_:1}),e(t(_),null,{default:o(()=>[e(t(b),{class:"pb-3"},{default:o(()=>[e(t(h),null,{default:o(()=>[...s[6]||(s[6]=[r("Activos",-1)])]),_:1}),e(t(y),{class:"text-2xl text-green-600"},{default:o(()=>[r(u(d.estadisticas.activos),1)]),_:1})]),_:1})]),_:1}),e(t(_),null,{default:o(()=>[e(t(b),{class:"pb-3"},{default:o(()=>[e(t(h),null,{default:o(()=>[...s[7]||(s[7]=[r("Finalizados",-1)])]),_:1}),e(t(y),{class:"text-2xl text-blue-600"},{default:o(()=>[r(u(d.estadisticas.finalizados),1)]),_:1})]),_:1})]),_:1}),e(t(_),null,{default:o(()=>[e(t(b),{class:"pb-3"},{default:o(()=>[e(t(h),null,{default:o(()=>[...s[8]||(s[8]=[r("Vencidos",-1)])]),_:1}),e(t(y),{class:"text-2xl text-red-600"},{default:o(()=>[r(u(d.estadisticas.vencidos),1)]),_:1})]),_:1})]),_:1}),e(t(_),null,{default:o(()=>[e(t(b),{class:"pb-3"},{default:o(()=>[e(t(h),null,{default:o(()=>[...s[9]||(s[9]=[r("Por Vencer",-1)])]),_:1}),e(t(y),{class:"text-2xl text-orange-600"},{default:o(()=>[r(u(d.estadisticas.proximos_vencer),1)]),_:1})]),_:1})]),_:1}),e(t(_),null,{default:o(()=>[e(t(b),{class:"pb-3"},{default:o(()=>[e(t(h),null,{default:o(()=>[...s[10]||(s[10]=[r("Monto Total",-1)])]),_:1}),e(t(y),{class:"text-xl"},{default:o(()=>{var a;return[r(" $"+u(((a=d.estadisticas.monto_total)==null?void 0:a.toLocaleString())||0),1)]}),_:1})]),_:1})]),_:1})]),d.estadisticas.vencidos>0?(l(),v(t(A),{key:0,class:"border-red-200 bg-red-50"},{default:o(()=>[e(t(Y),{class:"h-4 w-4 text-red-600"}),e(t(L),{class:"text-red-800"},{default:o(()=>[r(" Tienes "+u(d.estadisticas.vencidos)+" contrato(s) vencido(s) que requieren atención. ",1),e(t(B),{href:m.route("user.mis-contratos.vencidos"),class:"font-medium underline ml-2"},{default:o(()=>[...s[11]||(s[11]=[r(" Ver contratos vencidos ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):S("",!0),d.estadisticas.proximos_vencer>0?(l(),v(t(A),{key:1,class:"border-orange-200 bg-orange-50"},{default:o(()=>[e(t(Z),{class:"h-4 w-4 text-orange-600"}),e(t(L),{class:"text-orange-800"},{default:o(()=>[r(u(d.estadisticas.proximos_vencer)+" contrato(s) vencerán en los próximos 30 días. ",1),e(t(B),{href:m.route("user.mis-contratos.proximos-vencer"),class:"font-medium underline ml-2"},{default:o(()=>[...s[12]||(s[12]=[r(" Ver próximos a vencer ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):S("",!0),e(t(O),{"default-value":$.value,"onUpdate:modelValue":U},{default:o(()=>[e(t(Q),{class:"grid w-full grid-cols-5"},{default:o(()=>[e(t(k),{value:"todos"},{default:o(()=>[r(" Todos ("+u(c.value.todos.length)+") ",1)]),_:1}),e(t(k),{value:"activos"},{default:o(()=>[r(" Activos ("+u(c.value.activos.length)+") ",1)]),_:1}),e(t(k),{value:"finalizados"},{default:o(()=>[r(" Finalizados ("+u(c.value.finalizados.length)+") ",1)]),_:1}),e(t(k),{value:"borradores"},{default:o(()=>[r(" Borradores ("+u(c.value.borradores.length)+") ",1)]),_:1}),e(t(k),{value:"cancelados"},{default:o(()=>[r(" Cancelados ("+u(c.value.cancelados.length)+") ",1)]),_:1})]),_:1}),e(t(w),{value:"todos",class:"mt-6"},{default:o(()=>[d.contratos.data.length===0?(l(),i("div",it,[e(t(P),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[13]||(s[13]=n("p",{class:"text-muted-foreground"}," No tienes contratos asignados ",-1))])):(l(),i("div",dt,[(l(!0),i(p,null,g(d.contratos.data,a=>(l(),v(C,{key:a.id,contrato:a,"show-actions":!1,onClick:z=>t(x).visit(m.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),e(t(w),{value:"activos",class:"mt-6"},{default:o(()=>[c.value.activos.length===0?(l(),i("div",nt,[e(t(D),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[14]||(s[14]=n("p",{class:"text-muted-foreground"}," No hay contratos activos ",-1))])):(l(),i("div",ut,[(l(!0),i(p,null,g(c.value.activos,a=>(l(),v(C,{key:a.id,contrato:a,"show-actions":!1,onClick:z=>t(x).visit(m.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),e(t(w),{value:"finalizados",class:"mt-6"},{default:o(()=>[c.value.finalizados.length===0?(l(),i("div",ct,[e(t(D),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[15]||(s[15]=n("p",{class:"text-muted-foreground"}," No hay contratos finalizados ",-1))])):(l(),i("div",mt,[(l(!0),i(p,null,g(c.value.finalizados,a=>(l(),v(C,{key:a.id,contrato:a,"show-actions":!1,onClick:z=>t(x).visit(m.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),e(t(w),{value:"borradores",class:"mt-6"},{default:o(()=>[c.value.borradores.length===0?(l(),i("div",ft,[e(t(P),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[16]||(s[16]=n("p",{class:"text-muted-foreground"}," No hay contratos en borrador ",-1))])):(l(),i("div",vt,[(l(!0),i(p,null,g(c.value.borradores,a=>(l(),v(C,{key:a.id,contrato:a,"show-actions":!1,onClick:z=>t(x).visit(m.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1}),e(t(w),{value:"cancelados",class:"mt-6"},{default:o(()=>[c.value.cancelados.length===0?(l(),i("div",pt,[e(t(tt),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[17]||(s[17]=n("p",{class:"text-muted-foreground"}," No hay contratos cancelados ",-1))])):(l(),i("div",gt,[(l(!0),i(p,null,g(c.value.cancelados,a=>(l(),v(C,{key:a.id,contrato:a,"show-actions":!1,onClick:z=>t(x).visit(m.route("user.mis-contratos.show",a.id))},null,8,["contrato","onClick"]))),128))]))]),_:1})]),_:1},8,["default-value"]),d.contratos.links&&d.contratos.links.length>3?(l(),i("div",xt,[n("nav",_t,[(l(!0),i(p,null,g(d.contratos.links,a=>(l(),v(t(B),{key:a.label,href:a.url,class:G(["px-3 py-2 rounded-md text-sm",a.active?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"]),innerHTML:a.label,"preserve-state":"","preserve-scroll":""},null,8,["href","class","innerHTML"]))),128))])])):S("",!0)])]),_:1}))}});export{ve as default};
