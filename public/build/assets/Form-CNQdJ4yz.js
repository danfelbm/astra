import{d as Oe,r as N,c as g,C as Le,m as Me,o as Pe,y as Re,i as f,e as l,f as u,u as a,p as Ge,w as p,g as m,b as v,j as b,t as _,W as Ye,h as x,l as We,T as He,F as w,k as U,n as $,A as Ke,an as Je,a2 as Qe,I as Xe}from"./app-Cuh3Sov_.js";import{_ as F}from"./createLucideIcon-zA0T3Uav.js";import{_ as ge,a as ye,b as xe,c as he}from"./CardTitle.vue_vue_type_script_setup_true_lang-BO_pj4R6.js";import{_ as Ze}from"./Checkbox.vue_vue_type_script_setup_true_lang-CQG0ePZ7.js";import{_ as j}from"./Input.vue_vue_type_script_setup_true_lang-B9pczU8X.js";import{_ as O}from"./Label.vue_vue_type_script_setup_true_lang-CWld6NAA.js";import{_ as Ie}from"./Progress.vue_vue_type_script_setup_true_lang-C63NX-Y6.js";import{_ as ea,a as aa,b as ta,c as ra,d as ia}from"./SelectValue.vue_vue_type_script_setup_true_lang-YjGMT_BY.js";import{_ as sa}from"./Textarea.vue_vue_type_script_setup_true_lang-B6gqa_Wi.js";import{u as oa,_ as da}from"./FileUploadField.vue_vue_type_script_setup_true_lang-BfZBXMDI.js";import{_ as la,a as na}from"./ConvocatoriaSeleccionada.vue_vue_type_script_setup_true_lang-CukLsmf9.js";import{u as ua,_ as ca,a as fa,b as ma}from"./useConditionalFields-CawVtDc1.js";import{_ as pa}from"./UserLayout.vue_vue_type_script_setup_true_lang-yxuIhtW6.js";import{u as _a}from"./useAutoSave-CYVvnv5p.js";import{t as y}from"./index-CzcgxyNl.js";import{A as va}from"./arrow-left-B8ynimFD.js";import{C as L}from"./clock-DYXX5iiW.js";import{C as ke}from"./circle-check-big-C5D3JqYx.js";import{C as M}from"./circle-alert-D1JqI4MG.js";import{U as ba}from"./user-BSSffkWN.js";import{P as ga}from"./panel-left-DjH5I4oM.js";import{S as ya}from"./save-BpaOCZNE.js";import{_ as xa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-xJJ5v7AV.js";import"./floating-ui.vue-D8y6OT49.js";import"./check-oW6ea94x.js";import"./index-C_dJ9DUh.js";import"./VisuallyHidden-CFxslfO1.js";import"./nullish-CHIgUVhi.js";import"./upload-BZF4hqVj.js";import"./file-CicIYebb.js";import"./eye-DIZPcch6.js";import"./download-Dliug-M8.js";import"./x-nULAODCc.js";import"./index-CKwtzZC0.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-DK1a-7Wd.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-CKFUjlq7.js";import"./RovingFocusItem-CPzJB03m.js";import"./utils-CAxuaYpa.js";import"./VisuallyHiddenInput-BN4v02eS.js";import"./circle-Ci07Zp6q.js";import"./index-BJ9KZ8Sq.js";import"./AlertTitle.vue_vue_type_script_setup_true_lang-CHcR_UhB.js";import"./map-pin-BGUg8Lj7.js";import"./calendar-BZnSD-bb.js";import"./users-DIwLMR5w.js";import"./external-link-B0iqJ3NO.js";import"./briefcase-RK3w9yvK.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DiK3SQkp.js";import"./plus-Bq_lt-mj.js";import"./grip-vertical-COmohiGO.js";import"./trash-2-BCQleSAT.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Ck3BYjW9.js";import"./index-DZq_3Nh4.js";import"./shield-BNIcm94c.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CkrI5D4A.js";import"./chevron-right-DfXDTuLV.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-D0H6BoeW.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Ccv6A-0f.js";import"./square-check-big-fgxyXAH6.js";import"./file-text-DbzZv4J2.js";import"./folder-open-ZSpYw-au.js";import"./index-SC3geNqC.js";import"./debounce-BMmXVQ06.js";const ha={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 pb-24"},ka={class:"flex items-center justify-between"},Ca={class:"text-3xl font-bold"},wa={class:"text-muted-foreground"},Va={key:0,class:"flex items-center justify-end gap-2 text-sm text-muted-foreground"},$a={key:0,class:"flex items-center gap-1.5"},Aa={key:1,class:"flex items-center gap-1.5"},Sa={key:2,class:"flex items-center gap-1.5 text-amber-600"},Ea={key:3,class:"flex items-center gap-1.5"},Ua=["innerHTML"],Fa={key:0,class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},qa={class:"flex items-start gap-3"},Ta={class:"text-sm text-blue-800"},Ba={key:0,class:"mt-1 text-blue-600"},za={key:0,class:"text-red-500"},Da={key:0,class:"text-sm text-muted-foreground"},Na={key:6,class:"space-y-2"},ja=["id","name","value","onUpdate:modelValue"],Oa={key:7,class:"space-y-2"},La={key:8},Ma={key:9},Pa={key:2,class:"text-red-500 text-sm mt-1"},Ra={key:10},Ga={key:11},Ya={key:12},Wa={key:13,class:"text-sm text-destructive"},Ha={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},Ka={class:"text-red-800 text-sm"},Ja={key:0,class:"fixed bottom-0 left-0 right-0 z-50 px-2 sm:px-4 pb-2 sm:pb-4"},Qa={class:"mx-auto max-w-7xl"},Xa={class:"backdrop-blur-lg bg-tertiary-60 dark:bg-gray-900/80 border border-gray-200/50 dark:border-gray-700/50 rounded-xl sm:rounded-2xl shadow-2xl p-3 sm:p-4"},Za={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4"},Ia={class:"hidden sm:flex items-center"},et={class:"flex-1 sm:max-w-xs lg:max-w-sm mx-0 sm:mx-4"},at={class:"flex items-center gap-3"},tt={class:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap font-medium"},rt={class:"flex items-center gap-2 sm:gap-3"},it={class:"ml-2 whitespace-nowrap"},st=Oe({__name:"Form",props:{candidatura:{},configuracion_campos:{},is_editing:{type:Boolean},postulacion_existente:{},canCreateOwn:{type:Boolean},canEditOwn:{type:Boolean}},setup(Ce){var K,J;const n=Ce,we=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mi Candidatura",href:"/miembro/candidaturas"},{title:n.is_editing?"Editar":"Crear",href:"#"}],{uploadFiles:P}=oa(),h=N({});g(()=>{var c;if(!n.is_editing||!((c=n.candidatura)!=null&&c.formulario_data))return!1;const t=Object.keys(n.candidatura.formulario_data),i=n.configuracion_campos.map(e=>e.id),r=t.some(e=>!i.includes(e)),o=n.configuracion_campos.some(e=>e.required&&!n.candidatura.formulario_data[e.id]);return r||o});const s=Le((()=>{var i;const t={};return n.configuracion_campos.forEach(r=>{r.type==="checkbox"?t[r.id]=[]:r.type==="file"?t[r.id]=[]:r.type==="convocatoria"?t[r.id]=void 0:r.type==="disclaimer"?t[r.id]=null:r.type==="repeater"?t[r.id]=[]:r.type==="datepicker"?t[r.id]=null:t[r.id]=""}),(i=n.candidatura)!=null&&i.formulario_data&&(Object.assign(t,n.candidatura.formulario_data),n.configuracion_campos.forEach(r=>{r.type==="file"&&t[r.id]&&(Array.isArray(t[r.id])||(t[r.id]=[t[r.id]]))})),{formulario_data:t}})()),Ve=N(n.configuracion_campos),R=g(()=>s.formulario_data),{visibleFields:G,clearHiddenFieldValues:$e}=ua(Ve,R);Me(G,()=>{$e()});const{state:Ae,isSaving:A,hasSaved:Se,hasError:q,saveNow:Ee,startWatching:T,stopAutoSave:Y,restoreDraft:Ue,clearLocalStorage:B}=_a(R,{url:"/miembro/candidaturas/autosave",resourceId:((K=n.candidatura)==null?void 0:K.id)||null,resourceIdField:"candidatura_id",debounceTime:3e3,showNotifications:!0,useLocalStorage:!0,localStorageKey:`candidatura_draft_${((J=n.candidatura)==null?void 0:J.id)||"new"}`});let V=null;Pe(()=>{const t=["borrador","rechazado"];if(!n.candidatura||t.includes(n.candidatura.estado)){if(!n.is_editing){const r=Ue();r&&r.formulario_data&&(y.info("Borrador recuperado",{description:"Se encontró un borrador guardado localmente. Se ha restaurado automáticamente.",action:{label:"Descartar",onClick:()=>{B(),s.reset(),y.success("Borrador descartado")}},duration:5e3}),Object.assign(s.formulario_data,r.formulario_data))}V=T()}}),Re(()=>{V&&V(),Y()});const Fe=async()=>{if(A.value){y.warning("Ya se está guardando...");return}await Ee(),q.value||y.success("Borrador guardado manualmente")},qe=g(()=>S.value.map(r=>{var e;if(!r.required)return{campo:r.id,valid:!0};const o=s.formulario_data[r.id];let c=!1;if(r.type==="checkbox")c=Array.isArray(o)&&o.length>0;else if(r.type==="file")(Array.isArray(o)&&o.length>0||h.value[r.id]&&h.value[r.id].length>0)&&(c=!0);else if(r.type==="convocatoria")c=o!=null&&o!=="";else if(r.type==="disclaimer")c=o&&o.accepted===!0;else if(r.type==="repeater"){const E=((e=r.repeaterConfig)==null?void 0:e.minItems)||0;c=Array.isArray(o)&&o.length>=E}else r.type==="datepicker"?c=o!=null&&o!=="":c=o&&o.toString().trim()!=="";return!c&&r.required,{campo:r.id,valid:c}}).every(r=>r.valid)),z=g(()=>{const t=S.value.length;let i=0;return S.value.forEach(r=>{const o=s.formulario_data[r.id];let c=!1;r.type==="checkbox"?c=Array.isArray(o)&&o.length>0:r.type==="file"?c=Array.isArray(o)&&o.length>0||h.value[r.id]&&h.value[r.id].length>0:r.type==="convocatoria"?c=o!=null&&o!=="":r.type==="disclaimer"?c=o&&o.accepted===!0:r.type==="repeater"?c=Array.isArray(o)&&o.length>0:r.type==="datepicker"?c=o!=null&&o!=="":c=o&&o.toString().trim()!=="",c&&i++}),{llenos:i,total:t,porcentaje:t>0?Math.round(i/t*100):0}}),W=g(()=>n.is_editing?"Editar Candidatura":"Crear Candidatura"),Te=g(()=>{var t,i;return s.processing?"Guardando...":n.is_editing?((t=n.candidatura)==null?void 0:t.estado)==="rechazado"?"Reenviar Candidatura":((i=n.candidatura)==null?void 0:i.estado)==="aprobado"?"Solicitar Revisión":"Enviar Candidatura":"Crear Candidatura"}),Be=g(()=>{var t,i;return!n.is_editing||n.postulacion_existente&&["borrador","rechazado"].includes(((t=n.candidatura)==null?void 0:t.estado)||"")?!1:!!["pendiente","aprobado"].includes(((i=n.candidatura)==null?void 0:i.estado)||"")}),S=g(()=>{var i;let t=[...G.value];return Be.value&&(t=t.filter(r=>r.type!=="convocatoria")),n.is_editing&&((i=n.candidatura)==null?void 0:i.estado)==="aprobado"&&(t=t.filter(r=>r.editable===!0)),t}),ze=g(()=>{var r;if(!n.is_editing||!n.candidatura)return!1;let t=!1;if(["pendiente","aprobado"].includes(n.candidatura.estado)&&(t=n.configuracion_campos.some(o=>o.type==="convocatoria")),((r=n.candidatura)==null?void 0:r.estado)==="aprobado"){const o=n.configuracion_campos.some(c=>!c.editable&&c.type!=="convocatoria");return t||o}return t}),k=N({}),De=async(t,i)=>{if(h.value[t]=i,i&&i.length>0)try{const o=(await P(i,{module:"candidaturas",fieldId:t,onProgress:(c,e)=>{k.value[t]&&k.value[t].uploadProgress.set(c,e)}})).map(c=>c.path);Array.isArray(s.formulario_data[t]),s.formulario_data[t]=o,h.value[t]=[],setTimeout(()=>{k.value[t]&&k.value[t].uploadProgress.clear()},1500),y.success("✅ Archivos subidos correctamente",{duration:2e3})}catch(r){console.error("Error al subir archivos:",r),k.value[t]&&(i.forEach(o=>{k.value[t].uploadErrors.set(o.name,"Error al subir el archivo")}),k.value[t].uploadProgress.clear()),y.error("❌ Error al subir archivos",{description:"Por favor, intente nuevamente",duration:3e3})}else s.formulario_data[t]=[]},H=async()=>{for(const[i,r]of Object.entries(h.value))if(r&&r.length>0)try{y.info("Subiendo archivos pendientes...",{duration:2e3});const o=await P(r,{module:"candidaturas",fieldId:i});s.formulario_data[i]=o.map(c=>c.path),h.value[i]=[]}catch(o){console.error("Error al subir archivos:",o),y.error("Error al subir archivos pendientes",{description:"No se pudo completar el envío",duration:3e3});return}const t={...s.formulario_data};n.configuracion_campos.forEach(i=>{const r=t[i.id];i.required||(r===""||r===void 0||Array.isArray(r)&&r.length===0&&i.type!=="checkbox"&&i.type!=="file")&&(t[i.id]=null)}),s.formulario_data=t,Y(),n.is_editing?s.put(`/miembro/candidaturas/${n.candidatura.id}`,{onSuccess:()=>{B(),y.success("Candidatura actualizada exitosamente")},onError:i=>{console.error("Errores de validación:",i),(!n.candidatura||["borrador","rechazado"].includes(n.candidatura.estado))&&(V=T())}}):s.post("/miembro/candidaturas",{onSuccess:()=>{B(),y.success("Candidatura creada exitosamente")},onError:i=>{console.error("Errores de validación:",i),V=T()}})},C=t=>!!s.errors[`formulario_data.${t}`],Ne=g(()=>!n.candidatura||["borrador","rechazado"].includes(n.candidatura.estado)),je=()=>{const t=document.querySelector('[data-sidebar="trigger"]');t&&t.click()};return(t,i)=>(l(),f(w,null,[u(a(Ge),{title:W.value},null,8,["title"]),u(pa,{breadcrumbs:we},{default:p(()=>{var r,o;return[m("div",ha,[m("div",ka,[m("div",null,[m("h1",Ca,_(W.value),1),m("p",wa,_(t.is_editing?"Actualiza la información de tu candidatura":"Completa tu perfil de candidatura para participar en convocatorias"),1)]),u(a(F),{variant:"outline",onClick:i[0]||(i[0]=c=>a(Ye).visit("/miembro/candidaturas"))},{default:p(()=>[u(a(va),{class:"mr-2 h-4 w-4"}),i[1]||(i[1]=x(" Volver ",-1))]),_:1})]),!t.candidatura||["borrador","rechazado"].includes(t.candidatura.estado)?(l(),f("div",Va,[a(A)?(l(),f("div",$a,[u(a(L),{class:"h-4 w-4 animate-spin"}),i[2]||(i[2]=m("span",null,"Guardando automáticamente...",-1))])):a(Se)&&!a(q)?(l(),f("div",Aa,[u(a(ke),{class:"h-4 w-4 text-green-600"}),m("span",null,"Guardado automáticamente a las "+_((r=a(Ae).lastSaved)==null?void 0:r.toLocaleTimeString()),1)])):a(q)?(l(),f("div",Sa,[u(a(M),{class:"h-4 w-4"}),i[3]||(i[3]=m("span",null,"Guardado localmente (sin conexión)",-1))])):(l(),f("div",Ea,[u(a(L),{class:"h-4 w-4"}),i[4]||(i[4]=m("span",null,"Autoguardado activado",-1))]))])):b("",!0),t.is_editing&&((o=t.candidatura)!=null&&o.comentarios_admin)?(l(),v(a(ge),{key:1,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:p(()=>[u(a(ye),null,{default:p(()=>[u(a(xe),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:p(()=>[u(a(M),{class:"h-5 w-5"}),i[5]||(i[5]=x(" Comentarios de la comisión ",-1))]),_:1})]),_:1}),u(a(he),null,{default:p(()=>[m("div",{class:"text-blue-700 dark:text-blue-300 prose prose-sm max-w-none",innerHTML:t.candidatura.comentarios_admin},null,8,Ua)]),_:1})]),_:1})):b("",!0),u(a(ge),null,{default:p(()=>[u(a(ye),null,{default:p(()=>[u(a(xe),{class:"flex items-center gap-2"},{default:p(()=>[u(a(ba),{class:"h-5 w-5"}),i[6]||(i[6]=x(" Información de Candidatura ",-1))]),_:1})]),_:1}),u(a(he),null,{default:p(()=>{var c;return[m("form",{onSubmit:We(H,["prevent"]),class:"space-y-6"},[t.is_editing&&((c=t.candidatura)==null?void 0:c.estado)==="aprobado"?(l(),f("div",Fa,[m("div",qa,[u(a(M),{class:"h-5 w-5 text-blue-600 mt-0.5"}),m("div",Ta,[i[7]||(i[7]=m("p",{class:"font-medium"},"Candidatura Aprobada - Edición Limitada",-1)),i[8]||(i[8]=m("p",{class:"mt-1"},"Solo puedes editar los campos marcados como editables. Al hacer cambios, tu candidatura volverá a revisión administrativa.",-1)),ze.value?(l(),f("p",Ba," Algunos campos están ocultos porque no son editables en candidaturas aprobadas o no pueden modificarse después del envío. ")):b("",!0)])])])):b("",!0),u(He,{name:"fade-field",tag:"div",class:"space-y-6"},{default:p(()=>[(l(!0),f(w,null,U(S.value,e=>{var E,Q,X,Z,I,ee,ae,te,re,ie,se,oe,de,le,ne,ue,ce,fe,me,pe,_e,ve;return l(),f("div",{key:e.id,class:"space-y-2"},[u(a(O),{for:e.id,class:"flex items-center gap-1"},{default:p(()=>[x(_(e.title)+" ",1),e.required?(l(),f("span",za,"*")):b("",!0)]),_:2},1032,["for"]),e.description?(l(),f("p",Da,_(e.description),1)):b("",!0),e.type==="text"||e.type==="email"?(l(),v(a(j),{key:1,id:e.id,type:e.type,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,placeholder:e.placeholder||"",class:$({"border-destructive":C(e.id)})},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","class"])):e.type==="textarea"?(l(),v(a(sa),{key:2,id:e.id,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,placeholder:e.placeholder||"",rows:4,class:$({"border-destructive":C(e.id)})},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"])):e.type==="number"?(l(),v(a(j),{key:3,id:e.id,type:"number",modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,placeholder:e.placeholder||"",class:$({"border-destructive":C(e.id)})},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"])):e.type==="date"?(l(),v(a(j),{key:4,id:e.id,type:"date",modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,class:$({"border-destructive":C(e.id)})},null,8,["id","modelValue","onUpdate:modelValue","class"])):e.type==="select"?(l(),v(a(ea),{key:5,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d},{default:p(()=>[u(a(aa),{class:$({"border-destructive":C(e.id)})},{default:p(()=>[u(a(ta),{placeholder:e.placeholder||"Seleccionar..."},null,8,["placeholder"])]),_:2},1032,["class"]),u(a(ra),null,{default:p(()=>[(l(!0),f(w,null,U(e.options,d=>(l(),v(a(ia),{key:d,value:d},{default:p(()=>[x(_(d),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.type==="radio"?(l(),f("div",Na,[(l(!0),f(w,null,U(e.options,d=>(l(),f("div",{key:d,class:"flex items-center space-x-2"},[Ke(m("input",{id:`${e.id}_${d}`,name:e.id,type:"radio",value:d,"onUpdate:modelValue":D=>a(s).formulario_data[e.id]=D,class:"h-4 w-4 text-primary focus:ring-primary border-gray-300"},null,8,ja),[[Je,a(s).formulario_data[e.id]]]),u(a(O),{for:`${e.id}_${d}`,class:"text-sm font-normal"},{default:p(()=>[x(_(d),1)]),_:2},1032,["for"])]))),128))])):e.type==="checkbox"?(l(),f("div",Oa,[(l(!0),f(w,null,U(e.options,d=>(l(),f("div",{key:d,class:"flex items-center space-x-2"},[u(a(Ze),{id:`${e.id}_${d}`,checked:a(s).formulario_data[e.id].includes(d),"onUpdate:checked":D=>{if(D)a(s).formulario_data[e.id].includes(d)||a(s).formulario_data[e.id].push(d);else{const be=a(s).formulario_data[e.id].indexOf(d);be>-1&&a(s).formulario_data[e.id].splice(be,1)}}},null,8,["id","checked","onUpdate:checked"]),u(a(O),{for:`${e.id}_${d}`,class:"text-sm font-normal"},{default:p(()=>[x(_(d),1)]),_:2},1032,["for"])]))),128))])):e.type==="file"?(l(),f("div",La,[u(da,{ref_for:!0,ref:d=>k.value[e.id]=d,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,onFilesSelected:d=>De(e.id,d),label:"",description:"",required:e.required,multiple:((E=e.fileConfig)==null?void 0:E.multiple)||!1,"max-files":((Q=e.fileConfig)==null?void 0:Q.maxFiles)||5,"max-file-size":((X=e.fileConfig)==null?void 0:X.maxFileSize)||10,accept:((Z=e.fileConfig)==null?void 0:Z.accept)||".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",error:a(s).errors[`formulario_data.${e.id}`],disabled:a(s).processing,module:"candidaturas","field-id":e.id,"auto-upload":!1},null,8,["modelValue","onUpdate:modelValue","onFilesSelected","required","multiple","max-files","max-file-size","accept","error","disabled","field-id"])])):e.type==="convocatoria"?(l(),f("div",Ma,[t.postulacion_existente&&["borrador","rechazado"].includes(((I=t.candidatura)==null?void 0:I.estado)||"")?(l(),v(la,{key:0,postulacion:t.postulacion_existente},null,8,["postulacion"])):(l(),v(na,{key:1,modelValue:a(s).formulario_data[e.id],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,required:e.required,disabled:a(s).processing||t.is_editing&&((ee=t.candidatura)==null?void 0:ee.estado)!=="borrador","filtrar-por-ubicacion":((ae=e.convocatoriaConfig)==null?void 0:ae.filtrarPorUbicacion)??!0,"show-postulacion-warning":!0},null,8,["modelValue","onUpdate:modelValue","required","disabled","filtrar-por-ubicacion"])),C(e.id)&&!t.postulacion_existente?(l(),f("div",Pa,_(a(s).errors[`formulario_data.${e.id}`]),1)):b("",!0)])):e.type==="datepicker"?(l(),f("div",Ra,[u(ca,{"model-value":a(s).formulario_data[e.id]||null,"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,label:"",description:"",required:e.required,disabled:a(s).processing,error:a(s).errors[`formulario_data.${e.id}`],"min-date":(te=e.datepickerConfig)==null?void 0:te.minDate,"max-date":(re=e.datepickerConfig)==null?void 0:re.maxDate,format:((ie=e.datepickerConfig)==null?void 0:ie.format)||"DD/MM/YYYY","allow-past-dates":((se=e.datepickerConfig)==null?void 0:se.allowPastDates)??!0,"allow-future-dates":((oe=e.datepickerConfig)==null?void 0:oe.allowFutureDates)??!0},null,8,["model-value","onUpdate:modelValue","required","disabled","error","min-date","max-date","format","allow-past-dates","allow-future-dates"])])):e.type==="disclaimer"?(l(),f("div",Ga,[u(fa,{"model-value":a(s).formulario_data[e.id]||null,"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,label:"",description:"",required:e.required,disabled:a(s).processing,error:a(s).errors[`formulario_data.${e.id}`],"disclaimer-text":((de=e.disclaimerConfig)==null?void 0:de.disclaimerText)||"","modal-title":((le=e.disclaimerConfig)==null?void 0:le.modalTitle)||"Términos y Condiciones","accept-button-text":((ne=e.disclaimerConfig)==null?void 0:ne.acceptButtonText)||"Acepto","decline-button-text":((ue=e.disclaimerConfig)==null?void 0:ue.declineButtonText)||"No acepto"},null,8,["model-value","onUpdate:modelValue","required","disabled","error","disclaimer-text","modal-title","accept-button-text","decline-button-text"])])):e.type==="repeater"?(l(),f("div",Ya,[u(ma,{"model-value":a(s).formulario_data[e.id]||[],"onUpdate:modelValue":d=>a(s).formulario_data[e.id]=d,label:"",description:"",required:e.required,disabled:a(s).processing,error:a(s).errors[`formulario_data.${e.id}`],"min-items":((ce=e.repeaterConfig)==null?void 0:ce.minItems)||0,"max-items":((fe=e.repeaterConfig)==null?void 0:fe.maxItems)||10,"item-name":((me=e.repeaterConfig)==null?void 0:me.itemName)||"Elemento","add-button-text":((pe=e.repeaterConfig)==null?void 0:pe.addButtonText)||"Agregar elemento","remove-button-text":((_e=e.repeaterConfig)==null?void 0:_e.removeButtonText)||"Eliminar",fields:((ve=e.repeaterConfig)==null?void 0:ve.fields)||[]},null,8,["model-value","onUpdate:modelValue","required","disabled","error","min-items","max-items","item-name","add-button-text","remove-button-text","fields"])])):b("",!0),C(e.id)?(l(),f("p",Wa,_(a(s).errors[`formulario_data.${e.id}`]),1)):b("",!0)])}),128))]),_:1}),a(s).errors.general?(l(),f("div",Ha,[m("p",Ka,_(a(s).errors.general),1)])):b("",!0),i[9]||(i[9]=m("div",{class:"h-4"},null,-1))],32)]}),_:1})]),_:1})]),(l(),v(Qe,{to:"body"},[u(Xe,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"translate-y-4 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-4 opacity-0"},{default:p(()=>[(l(),f("div",Ja,[m("div",Qa,[m("div",Xa,[m("div",Za,[m("div",Ia,[u(a(F),{variant:"outline",type:"button",onClick:je,class:"backdrop-blur-sm flex-shrink-0 text-xs sm:text-sm py-2 px-3"},{default:p(()=>[u(a(ga),{class:"h-4 w-4"}),i[10]||(i[10]=m("span",{class:"ml-2"},"Ocultar sidebar",-1))]),_:1})]),m("div",et,[m("div",at,[u(a(Ie),{modelValue:z.value.porcentaje,class:"flex-1"},null,8,["modelValue"]),m("span",tt,_(z.value.llenos)+" / "+_(z.value.total),1)]),i[11]||(i[11]=m("p",{class:"text-xs text-muted-foreground mt-1 text-center hidden sm:block"}," Campos completados ",-1))]),m("div",rt,[Ne.value?(l(),v(a(F),{key:0,onClick:Fe,disabled:a(A),variant:"outline",class:"backdrop-blur-sm flex-1 sm:flex-none text-xs sm:text-sm py-2 px-3"},{default:p(()=>[a(A)?(l(),f(w,{key:0},[u(a(L),{class:"mr-2 h-4 w-4 animate-spin"}),i[12]||(i[12]=x(" Guardando... ",-1))],64)):(l(),f(w,{key:1},[u(a(ya),{class:"mr-2 h-4 w-4"}),i[13]||(i[13]=x(" Guardar borrador ",-1))],64))]),_:1},8,["disabled"])):b("",!0),u(a(F),{onClick:H,disabled:!qe.value||a(s).processing,class:"bg-green-600 hover:bg-green-700 text-white border-green-600 hover:border-green-700 disabled:bg-gray-400 disabled:border-gray-400 flex-1 sm:flex-none text-xs sm:text-sm py-2 px-3"},{default:p(()=>[u(a(ke),{class:"h-4 w-4"}),m("span",it,_(Te.value),1)]),_:1},8,["disabled"])])])])])]))]),_:1})]))]}),_:1})],64))}}),br=xa(st,[["__scopeId","data-v-97e229ea"]]);export{br as default};
