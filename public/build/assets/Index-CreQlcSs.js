import{d as M,r as F,c as P,i as u,e as s,f as t,q as z,w as a,g as r,b as f,j as v,A,h as i,m as l,F as x,k as b,t as c,s as w,x as E,n as R}from"./app-B8Leig_z.js";import{_ as H}from"./UserLayout.vue_vue_type_script_setup_true_lang-RvFzN-mC.js";import{_ as k,c as C,a as K,b as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bj2AuJoS.js";import{_ as Y}from"./CardDescription.vue_vue_type_script_setup_true_lang-CdHQfaux.js";import{c as G,_ as h}from"./createLucideIcon-Dm0g44SE.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-B9IHbkaP.js";import{_ as O,a as Q,b as W,c as X,d as V}from"./SelectValue.vue_vue_type_script_setup_true_lang-BJ-5ga6D.js";import{_ as B}from"./index-imQRw12Y.js";import{S}from"./search-qM3di0-M.js";import{C as D}from"./clock-DPKg19Z9.js";import{I as Z}from"./info-CEJMBpPN.js";import{A as ee}from"./arrow-right-DldgDhCv.js";import{F as N}from"./file-text-DVHLEgbr.js";import{C as te}from"./circle-check-big-BoK3x6Sv.js";import"./useFlashMessages-D2bFn_Yt.js";import"./index-DL0OT4Mk.js";import"./floating-ui.vue-CQofBm9y.js";import"./x-Dy8ipvOg.js";import"./index-GSdve6pu.js";import"./shield-DcyyXMUP.js";import"./user-DruSjyx2.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CfCilMrb.js";import"./chevron-right-CqJhKBG5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D-wOyATw.js";import"./VisuallyHidden-ktv_IADa.js";import"./index-Dp9YbdbO.js";import"./Label.vue_vue_type_script_setup_true_lang-DJZhaO5x.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-C-rwavoj.js";import"./index-CmyijCQU.js";import"./circle-alert-DcfBnw__.js";import"./map-pin-C731mVPw.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D-bXPuyx.js";import"./ellipsis-DkuTZgen.js";import"./usePermissions-DQTXK3di.js";import"./square-check-big-FtQCqO_U.js";import"./users-D5BmQ679.js";import"./folder-open-kOkXakOG.js";import"./milestone-B4nUepng.js";import"./index-C-ySCFgw.js";import"./check-CIcJqD5z.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=G("FilePenIcon",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),ae={class:"p-6"},oe={class:"flex flex-col md:flex-row gap-4"},le={class:"flex-1"},re={class:"relative"},ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"flex items-start justify-between"},de={class:"flex-1"},ce={class:"space-y-3"},ue={key:0,class:"flex items-center gap-2"},me={class:"flex items-center gap-2"},fe={key:1,class:"text-sm text-muted-foreground"},pe={key:2,class:"text-sm text-muted-foreground"},_e={class:"mt-4 pt-4 border-t"},ve={class:"text-muted-foreground text-center max-w-md"},he={key:2,class:"mt-6 flex justify-center gap-2"},ot=M({__name:"Index",props:{formularios:{},categorias:{},filters:{},canViewPublic:{type:Boolean},canFillPublic:{type:Boolean}},setup(p){const y=p,T=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Formularios",href:"#"}],_=F(y.filters.search||""),n=F(y.filters.categoria||"all"),I=P(()=>y.formularios.data.length>0),g=()=>{w.get(route("user.formularios.index"),{search:_.value||void 0,categoria:n.value==="all"?void 0:n.value},{preserveState:!0,preserveScroll:!0})},L=d=>{n.value=d,g()},$=()=>{_.value="",n.value="all",g()},m=d=>{if(d.usuario_ha_respondido)return{texto:"Completado",color:"success",icon:te};if(d.tiene_borrador)return{texto:"Borrador guardado",color:"warning",icon:se};if(d.fecha_fin){const o=Math.ceil((new Date(d.fecha_fin).getTime()-new Date().getTime())/864e5);if(o<=3&&o>0)return{texto:`Cierra en ${o} días`,color:"destructive",icon:D}}return{texto:"Disponible",color:"default",icon:N}},j=d=>new Date(d).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return(d,o)=>(l(),u(x,null,[s(t(z),{title:"Formularios"}),s(H,{breadcrumbs:T},{default:a(()=>[r("div",ae,[o[7]||(o[7]=r("div",{class:"mb-6"},[r("h1",{class:"text-3xl font-bold"},"Formularios Disponibles"),r("p",{class:"text-muted-foreground"}," Completa los formularios que están disponibles para ti ")],-1)),s(t(k),{class:"mb-6"},{default:a(()=>[s(t(C),{class:"pt-6"},{default:a(()=>[r("div",oe,[r("div",le,[r("div",re,[s(t(S),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s(t(J),{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e),placeholder:"Buscar formularios...",class:"pl-10",onKeyup:A(g,["enter"])},null,8,["modelValue"])])]),s(t(O),{modelValue:n.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>n.value=e),L]},{default:a(()=>[s(t(Q),{class:"w-full md:w-[200px]"},{default:a(()=>[s(t(W),{placeholder:"Todas las categorías"})]),_:1}),s(t(X),null,{default:a(()=>[s(t(V),{value:"all"},{default:a(()=>[...o[2]||(o[2]=[i("Todas las categorías",-1)])]),_:1}),(l(!0),u(x,null,b(p.categorias,e=>(l(),f(t(V),{key:e.id,value:e.id.toString()},{default:a(()=>[i(c(e.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(t(h),{onClick:g,variant:"default"},{default:a(()=>[s(t(S),{class:"mr-2 h-4 w-4"}),o[3]||(o[3]=i(" Buscar ",-1))]),_:1}),_.value||n.value&&n.value!=="all"?(l(),f(t(h),{key:0,onClick:$,variant:"outline"},{default:a(()=>[...o[4]||(o[4]=[i(" Limpiar ",-1)])]),_:1})):v("",!0)])]),_:1})]),_:1}),I.value?(l(),u("div",ie,[(l(!0),u(x,null,b(p.formularios.data,e=>(l(),f(t(k),{key:e.id,class:"hover:shadow-lg transition-shadow cursor-pointer",onClick:q=>t(w).visit(d.route("formularios.show",e.slug))},{default:a(()=>[s(t(K),null,{default:a(()=>[r("div",ne,[r("div",de,[s(t(U),{class:"line-clamp-2"},{default:a(()=>[i(c(e.titulo),1)]),_:2},1024),e.descripcion?(l(),f(t(Y),{key:0,class:"mt-2 line-clamp-2"},{default:a(()=>[i(c(e.descripcion),1)]),_:2},1024)):v("",!0)]),(l(),f(E(m(e).icon),{class:R(["h-5 w-5 ml-2",m(e).color==="success"?"text-green-600":m(e).color==="warning"?"text-yellow-600":m(e).color==="destructive"?"text-red-600":"text-muted-foreground"])},null,8,["class"]))])]),_:2},1024),s(t(C),null,{default:a(()=>[r("div",ce,[e.categoria?(l(),u("div",ue,[s(t(B),{variant:"secondary"},{default:a(()=>[i(c(e.categoria.nombre),1)]),_:2},1024)])):v("",!0),r("div",me,[s(t(B),{variant:m(e).color==="success"?"default":m(e).color==="warning"?"secondary":m(e).color==="destructive"?"destructive":"outline"},{default:a(()=>[i(c(m(e).texto),1)]),_:2},1032,["variant"])]),e.fecha_fin?(l(),u("div",fe,[s(t(D),{class:"inline h-3 w-3 mr-1"}),i(" Cierra el "+c(j(e.fecha_fin)),1)])):v("",!0),e.limite_respuestas?(l(),u("div",pe,[s(t(Z),{class:"inline h-3 w-3 mr-1"}),i(" "+c(e.respuestas_count||0)+" / "+c(e.limite_respuestas)+" respuestas ",1)])):v("",!0)]),r("div",_e,[s(t(h),{variant:"ghost",class:"w-full",disabled:e.usuario_ha_respondido},{default:a(()=>[i(c(e.usuario_ha_respondido?"Ya respondido":e.tiene_borrador?"Continuar":"Responder")+" ",1),s(t(ee),{class:"ml-2 h-4 w-4"})]),_:2},1032,["disabled"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(l(),f(t(k),{key:1},{default:a(()=>[s(t(C),{class:"flex flex-col items-center justify-center py-12"},{default:a(()=>[s(t(N),{class:"h-12 w-12 text-muted-foreground mb-4"}),o[6]||(o[6]=r("h3",{class:"text-lg font-semibold mb-2"},"No hay formularios disponibles",-1)),r("p",ve,c(_.value||n.value&&n.value!=="all"?"No se encontraron formularios con los filtros aplicados.":"No hay formularios disponibles en este momento. Vuelve más tarde."),1),_.value||n.value&&n.value!=="all"?(l(),f(t(h),{key:0,onClick:$,class:"mt-4",variant:"outline"},{default:a(()=>[...o[5]||(o[5]=[i(" Limpiar filtros ",-1)])]),_:1})):v("",!0)]),_:1})]),_:1})),p.formularios.last_page>1?(l(),u("div",he,[(l(!0),u(x,null,b(p.formularios.last_page,e=>(l(),f(t(h),{key:e,variant:e===p.formularios.current_page?"default":"outline",size:"sm",onClick:q=>t(w).get(d.route("user.formularios.index"),{...p.filters,page:e},{preserveState:!0})},{default:a(()=>[i(c(e),1)]),_:2},1032,["variant","onClick"]))),128))])):v("",!0)])]),_:1})],64))}});export{ot as default};
