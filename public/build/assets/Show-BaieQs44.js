import{d as K,c as E,P as Q,b as f,w as o,g as s,j as m,e as a,f as i,v as $,h as c,m as n,x as T,t as d,i as r,F as z,k as A,s as W}from"./app-CS8sR3Ia.js";import{_ as Y}from"./UserLayout.vue_vue_type_script_setup_true_lang-Bx0KTW3l.js";import{_,a as b,b as y,c as p}from"./CardTitle.vue_vue_type_script_setup_true_lang-DwQGgR-i.js";import{_ as Z}from"./CardDescription.vue_vue_type_script_setup_true_lang--xnBMO_F.js";import{_ as g}from"./createLucideIcon-I1BaLUp8.js";import{_ as S}from"./index-Djk0n9d2.js";import{_ as j,a as I}from"./index-DccwBZ24.js";import{F as D}from"./file-KJqU4aah.js";import{M as V}from"./music-D-z08EQQ.js";import{V as ee}from"./video-BP4v23OX.js";import{I as te}from"./image-Bj50BatA.js";import{C as O}from"./circle-x-CgQ6cgW0.js";import{C as P}from"./circle-check-big-kYXZ969j.js";import{C as q}from"./clock-DZR65FQf.js";import{A as ie}from"./arrow-left-BcHW3_D6.js";import{D as w}from"./download-Daf3vbWe.js";import{S as se}from"./square-pen-BMc1oxZr.js";import{T as ae}from"./trash-2-D72TYpus.js";import{T as oe}from"./triangle-alert-6xE6p5tN.js";import{E as ne}from"./eye-BA_ANM1P.js";import"./useFlashMessages-CGHchmlU.js";import"./index-DsJMsIiX.js";import"./floating-ui.vue-B4Sl8fl7.js";import"./x-q00K5dxI.js";import"./Input.vue_vue_type_script_setup_true_lang-svj3mOHO.js";import"./index-ZFT_VlnI.js";import"./index-BCNCE9eK.js";import"./shield-CnvlMiR6.js";import"./user-CwMJLfNw.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Co-SHXYC.js";import"./chevron-right-BpVk5ZHm.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BoXFSDzP.js";import"./VisuallyHidden-po5CMIgp.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Brl8Pxle.js";import"./check-CjPNigNd.js";import"./Label.vue_vue_type_script_setup_true_lang-XXG1Zo-0.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BSygq9BA.js";import"./index-CLyZuKah.js";import"./circle-alert-DqdhPVID.js";import"./map-pin-DLGpmXj-.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DNnzuve3.js";import"./ellipsis-BHs0eveI.js";import"./usePermissions-DTgklUNZ.js";import"./square-check-big-Dgv6UfZ4.js";import"./file-text-w6e7k9Cu.js";import"./users-CoAr_cTZ.js";import"./folder-open-D29eHzBa.js";import"./milestone-f_jeEZdN.js";import"./index-6GXH-qdy.js";const de={class:"space-y-6"},re={class:"flex justify-between items-start"},le={class:"flex items-center gap-4 mt-2"},ce={class:"text-muted-foreground"},me={class:"flex gap-2"},ue={key:0},ve={class:"grid gap-6 lg:grid-cols-3"},fe={class:"lg:col-span-2 space-y-6"},he={key:0,class:"ml-2"},ge={class:"space-y-4"},xe={key:0,class:"space-y-4"},_e={key:0,class:"text-center"},be=["src","alt"],ye={class:"text-sm text-muted-foreground mt-2"},pe={key:1,class:"text-center"},we=["src"],ke={class:"text-sm text-muted-foreground mt-2"},Ce={key:2,class:"flex flex-col items-center gap-4"},Ee={class:"flex items-center gap-3"},De={class:"text-left"},$e={class:"font-medium"},Te=["src"],ze={key:3,class:"flex items-center gap-4 py-4"},Ae={class:"flex-1"},Se={class:"font-medium"},Ve={class:"text-sm text-muted-foreground"},Fe={key:1,class:"bg-muted/30 rounded-lg p-4"},Be={key:0,class:"text-center"},Ne=["src","alt"],Le={key:1,class:"text-center"},Me=["src"],je={key:2,class:"flex flex-col items-center gap-4"},Ie=["src"],Oe={key:3,class:"flex flex-col items-center gap-4 py-8"},Pe={class:"text-center"},qe={class:"font-medium"},Re={class:"text-sm text-muted-foreground"},Ue={key:0},Xe={key:2,class:"text-center py-8 text-muted-foreground"},Ge={class:"whitespace-pre-wrap"},He={class:"space-y-6"},Je={class:"font-medium"},Ke={key:0,class:"text-sm text-muted-foreground mt-1"},Qe={class:"space-y-2"},We={class:"font-medium text-sm"},Ye={class:"text-xs text-muted-foreground"},Ze={class:"text-sm"},et={class:"text-sm"},tt={key:0},it={class:"space-y-2 max-h-32 overflow-y-auto"},st={class:"truncate flex-1 mr-2"},at={key:1},ot={class:"text-sm"},nt={key:2},dt={class:"text-sm"},rt={class:"text-sm"},lt={class:"text-sm"},ct={key:3},mt={class:"text-sm"},ut={key:0,class:"text-xs text-muted-foreground"},vt={class:"text-sm whitespace-pre-wrap"},li=K({__name:"Show",props:{contrato:{},evidencia:{}},setup(e){const u=e,R=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"},{title:u.contrato.nombre,href:`/miembro/mis-contratos/${u.contrato.id}`},{title:"Evidencias",href:`/miembro/mis-contratos/${u.contrato.id}/evidencias`},{title:"Ver Evidencia",href:"#"}],F=E(()=>({imagen:te,video:ee,audio:V,documento:D})[u.evidencia.tipo_evidencia]||D),B=E(()=>({pendiente:{color:"secondary",icon:q,bgClass:"bg-yellow-50",textClass:"text-yellow-800"},aprobada:{color:"success",icon:P,bgClass:"bg-green-50",textClass:"text-green-800"},rechazada:{color:"destructive",icon:O,bgClass:"bg-red-50",textClass:"text-red-800"}})[u.evidencia.estado]||{color:"default",icon:q,bgClass:"bg-gray-50",textClass:"text-gray-800"}),N=Q(),U=E(()=>{var l,t;return u.evidencia.estado==="pendiente"&&u.evidencia.user_id===((t=(l=N.props.auth)==null?void 0:l.user)==null?void 0:t.id)}),X=E(()=>{var l,t;return u.evidencia.estado==="pendiente"&&u.evidencia.user_id===((t=(l=N.props.auth)==null?void 0:l.user)==null?void 0:t.id)}),L=l=>l?new Date(l).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",G=l=>l?new Date(l).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",H=()=>{confirm("¿Estás seguro de que deseas eliminar esta evidencia? Esta acción no se puede deshacer.")&&W.delete(route("user.mis-contratos.evidencias.destroy",[u.contrato.id,u.evidencia.id]))},x=l=>{const t=l||u.evidencia.archivo_url;t&&window.open(t,"_blank")},J=()=>{var l;((l=u.evidencia.archivos_urls)==null?void 0:l.length)>0?u.evidencia.archivos_urls.forEach((t,k)=>{setTimeout(()=>{window.open(t,"_blank")},k*500)}):u.evidencia.archivo_url&&x()};return(l,t)=>(n(),f(Y,{breadcrumbs:R},{default:o(()=>{var k;return[s("div",de,[s("div",re,[s("div",null,[a(i($),{href:l.route("user.mis-contratos.evidencias.index",e.contrato.id),class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:o(()=>[a(i(ie),{class:"w-4 h-4 mr-2"}),t[0]||(t[0]=c(" Volver a Evidencias ",-1))]),_:1},8,["href"]),t[1]||(t[1]=s("h2",{class:"text-3xl font-bold tracking-tight"},"Ver Evidencia",-1)),s("div",le,[a(i(S),{variant:B.value.color},{default:o(()=>[(n(),f(T(B.value.icon),{class:"w-3 h-3 mr-1"})),c(" "+d(e.evidencia.estado_label),1)]),_:1},8,["variant"]),a(i(S),{variant:"outline"},{default:o(()=>[(n(),f(T(F.value),{class:"w-3 h-3 mr-1"})),c(" "+d(e.evidencia.tipo_evidencia_label),1)]),_:1}),a(i(S),{variant:"secondary"},{default:o(()=>[c(d(e.evidencia.tiene_multiples_archivos?`${e.evidencia.total_archivos} archivos`:"1 archivo"),1)]),_:1}),s("span",ce," Subida "+d(G(e.evidencia.created_at)),1)])]),s("div",me,[e.evidencia.tiene_multiples_archivos?(n(),f(i(g),{key:0,onClick:J,variant:"outline"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),c(" Descargar Todos ("+d(e.evidencia.total_archivos)+") ",1)]),_:1})):e.evidencia.archivo_url?(n(),f(i(g),{key:1,onClick:x,variant:"outline"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),t[2]||(t[2]=c(" Descargar ",-1))]),_:1})):m("",!0),U.value?(n(),f(i(g),{key:2,href:l.route("user.mis-contratos.evidencias.edit",[e.contrato.id,e.evidencia.id]),as:i($),variant:"outline"},{default:o(()=>[a(i(se),{class:"w-4 h-4 mr-2"}),t[3]||(t[3]=c(" Editar ",-1))]),_:1},8,["href","as"])):m("",!0),X.value?(n(),f(i(g),{key:3,onClick:H,variant:"destructive"},{default:o(()=>[a(i(ae),{class:"w-4 h-4 mr-2"}),t[4]||(t[4]=c(" Eliminar ",-1))]),_:1})):m("",!0)])]),e.evidencia.estado==="rechazada"?(n(),f(i(j),{key:0,class:"border-red-200 bg-red-50"},{default:o(()=>[a(i(O),{class:"h-4 w-4 text-red-600"}),a(i(I),{class:"text-red-800"},{default:o(()=>[t[5]||(t[5]=c(" Esta evidencia ha sido rechazada. ",-1)),e.evidencia.observaciones_admin?(n(),r("span",ue," Motivo: "+d(e.evidencia.observaciones_admin),1)):m("",!0)]),_:1})]),_:1})):m("",!0),e.evidencia.estado==="aprobada"?(n(),f(i(j),{key:1,class:"border-green-200 bg-green-50"},{default:o(()=>[a(i(P),{class:"h-4 w-4 text-green-600"}),a(i(I),{class:"text-green-800"},{default:o(()=>[...t[6]||(t[6]=[c(" Esta evidencia ha sido aprobada exitosamente. ",-1)])]),_:1})]),_:1})):m("",!0),s("div",ve,[s("div",fe,[a(i(_),null,{default:o(()=>[a(i(b),null,{default:o(()=>[a(i(y),{class:"flex items-center gap-2"},{default:o(()=>[(n(),f(T(F.value),{class:"w-5 h-5"})),t[7]||(t[7]=c(" Archivo de Evidencia ",-1))]),_:1}),a(i(Z),null,{default:o(()=>[c(d(e.evidencia.archivo_nombre||"Archivo subido")+" ",1),e.evidencia.archivo_size_formatted?(n(),r("span",he," ("+d(e.evidencia.archivo_size_formatted)+") ",1)):m("",!0)]),_:1})]),_:1}),a(i(p),null,{default:o(()=>{var h;return[s("div",ge,[((h=e.evidencia.archivos_info)==null?void 0:h.length)>0?(n(),r("div",xe,[(n(!0),r(z,null,A(e.evidencia.archivos_info,(v,C)=>(n(),r("div",{key:v.indice,class:"bg-muted/30 rounded-lg p-4 relative group"},[a(i(g),{onClick:M=>x(v.url),variant:"outline",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},{default:o(()=>[a(i(w),{class:"w-4 h-4"})]),_:1},8,["onClick"]),e.evidencia.es_imagen?(n(),r("div",_e,[s("img",{src:v.url,alt:v.nombre,class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"},null,8,be),s("p",ye,d(v.nombre),1)])):e.evidencia.es_video?(n(),r("div",pe,[s("video",{src:v.url,controls:"",class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,we),s("p",ke,d(v.nombre),1)])):e.evidencia.es_audio?(n(),r("div",Ce,[s("div",Ee,[a(i(V),{class:"w-12 h-12 text-muted-foreground"}),s("div",De,[s("p",$e,d(v.nombre),1),t[8]||(t[8]=s("p",{class:"text-sm text-muted-foreground"},"Archivo de audio",-1))])]),s("audio",{src:v.url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Te)])):(n(),r("div",ze,[a(i(D),{class:"w-12 h-12 text-muted-foreground flex-shrink-0"}),s("div",Ae,[s("p",Se,d(v.nombre),1),s("p",Ve,d(e.evidencia.tipo_evidencia_label),1)]),a(i(g),{onClick:M=>x(v.url),variant:"outline",size:"sm"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),t[9]||(t[9]=c(" Descargar ",-1))]),_:1},8,["onClick"])]))]))),128))])):e.evidencia.archivo_url?(n(),r("div",Fe,[e.evidencia.es_imagen?(n(),r("div",Be,[s("img",{src:e.evidencia.archivo_url,alt:e.evidencia.descripcion||"Evidencia",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"},null,8,Ne)])):e.evidencia.es_video?(n(),r("div",Le,[s("video",{src:e.evidencia.archivo_url,controls:"",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,Me)])):e.evidencia.es_audio?(n(),r("div",je,[a(i(V),{class:"w-16 h-16 text-muted-foreground"}),s("audio",{src:e.evidencia.archivo_url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Ie)])):(n(),r("div",Oe,[a(i(D),{class:"w-16 h-16 text-muted-foreground"}),s("div",Pe,[s("p",qe,d(e.evidencia.archivo_nombre),1),s("p",Re,[c(d(e.evidencia.tipo_evidencia_label)+" ",1),e.evidencia.archivo_size_formatted?(n(),r("span",Ue," • "+d(e.evidencia.archivo_size_formatted),1)):m("",!0)])]),a(i(g),{onClick:x,variant:"outline"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),t[10]||(t[10]=c(" Descargar para ver ",-1))]),_:1})]))])):(n(),r("div",Xe,[a(i(oe),{class:"w-12 h-12 mx-auto mb-3"}),t[11]||(t[11]=s("p",null,"No se pudo cargar el archivo",-1))]))])]}),_:1})]),_:1}),e.evidencia.descripcion?(n(),f(i(_),{key:0},{default:o(()=>[a(i(b),null,{default:o(()=>[a(i(y),null,{default:o(()=>[...t[12]||(t[12]=[c("Descripción",-1)])]),_:1})]),_:1}),a(i(p),null,{default:o(()=>[s("p",Ge,d(e.evidencia.descripcion),1)]),_:1})]),_:1})):m("",!0)]),s("div",He,[a(i(_),null,{default:o(()=>[a(i(b),null,{default:o(()=>[a(i(y),null,{default:o(()=>[...t[13]||(t[13]=[c("Obligación Contractual",-1)])]),_:1})]),_:1}),a(i(p),{class:"space-y-4"},{default:o(()=>[s("div",null,[s("p",Je,d(e.evidencia.obligacion.nombre),1),e.evidencia.obligacion.descripcion?(n(),r("p",Ke,d(e.evidencia.obligacion.descripcion),1)):m("",!0)]),a(i(g),{href:l.route("user.mis-obligaciones.show",e.evidencia.obligacion.id),as:i($),variant:"outline",size:"sm"},{default:o(()=>[a(i(ne),{class:"w-4 h-4 mr-2"}),t[14]||(t[14]=c(" Ver Obligación ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),((k=e.evidencia.entregables)==null?void 0:k.length)>0?(n(),f(i(_),{key:0},{default:o(()=>[a(i(b),null,{default:o(()=>[a(i(y),null,{default:o(()=>[...t[15]||(t[15]=[c("Entregables Asociados",-1)])]),_:1})]),_:1}),a(i(p),null,{default:o(()=>[s("div",Qe,[(n(!0),r(z,null,A(e.evidencia.entregables,h=>(n(),r("div",{key:h.id,class:"p-3 bg-muted/30 rounded-lg"},[s("p",We,d(h.nombre),1),s("p",Ye,d(h.hito),1)]))),128))])]),_:1})]),_:1})):m("",!0),a(i(_),null,{default:o(()=>[a(i(b),null,{default:o(()=>[a(i(y),null,{default:o(()=>[c(d(e.evidencia.tiene_multiples_archivos?"Detalles de los Archivos":"Detalles del Archivo"),1)]),_:1})]),_:1}),a(i(p),{class:"space-y-3"},{default:o(()=>{var h,v;return[s("div",null,[t[16]||(t[16]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Tipo",-1)),s("p",Ze,d(e.evidencia.tipo_evidencia_label),1)]),s("div",null,[t[17]||(t[17]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Cantidad",-1)),s("p",et,d(e.evidencia.total_archivos||1)+" archivo(s)",1)]),((h=e.evidencia.archivos_info)==null?void 0:h.length)>0?(n(),r("div",tt,[t[18]||(t[18]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Archivos",-1)),s("div",it,[(n(!0),r(z,null,A(e.evidencia.archivos_info,C=>(n(),r("div",{key:C.indice,class:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded"},[s("span",st,d(C.nombre),1),a(i(g),{onClick:M=>x(C.url),size:"sm",variant:"ghost",class:"h-6 w-6 p-0"},{default:o(()=>[a(i(w),{class:"w-3 h-3"})]),_:1},8,["onClick"])]))),128))])])):e.evidencia.archivo_size_formatted?(n(),r("div",at,[t[19]||(t[19]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Tamaño",-1)),s("p",ot,d(e.evidencia.archivo_size_formatted),1)])):m("",!0),(v=e.evidencia.metadata)!=null&&v.mime_type?(n(),r("div",nt,[t[20]||(t[20]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Formato",-1)),s("p",dt,d(e.evidencia.metadata.mime_type),1)])):m("",!0),s("div",null,[t[21]||(t[21]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Subido por",-1)),s("p",rt,d(e.evidencia.usuario.name),1)]),s("div",null,[t[22]||(t[22]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Fecha de subida",-1)),s("p",lt,d(L(e.evidencia.created_at)),1)]),e.evidencia.revisado_at?(n(),r("div",ct,[t[23]||(t[23]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Revisado",-1)),s("p",mt,d(L(e.evidencia.revisado_at)),1),e.evidencia.revisor?(n(),r("p",ut," por "+d(e.evidencia.revisor.name),1)):m("",!0)])):m("",!0)]}),_:1})]),_:1}),e.evidencia.observaciones_admin?(n(),f(i(_),{key:1},{default:o(()=>[a(i(b),null,{default:o(()=>[a(i(y),null,{default:o(()=>[...t[24]||(t[24]=[c("Observaciones de Revisión",-1)])]),_:1})]),_:1}),a(i(p),null,{default:o(()=>[s("p",vt,d(e.evidencia.observaciones_admin),1)]),_:1})]),_:1})):m("",!0)])])])]}),_:1}))}});export{li as default};
