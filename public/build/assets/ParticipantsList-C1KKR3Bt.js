import{_ as S}from"./createLucideIcon-OHRJE1Ds.js";import{a as B,b as M,c as q,_ as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-DQ55kv9d.js";import{_ as E}from"./CardDescription.vue_vue_type_script_setup_true_lang-CegnwAc3.js";import{_ as V,a as D,b as w,c as f,d as I,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-BhEcC6xr.js";import{a as T,_ as U}from"./index-D7c6PDkM.js";import{_ as G}from"./AlertTitle.vue_vue_type_script_setup_true_lang-CLkZce-n.js";import{_ as Q,C as R}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-CwQxazFq.js";import{d as H,k as _,c as J,p as K,a as c,o as u,b as t,f as i,u as e,m as O,t as r,i as y,e as s,g as o,j as L,F as W,r as X,q as Y}from"./app-BUS28tLp.js";import{u as Z}from"./useGeographicFilters-DXI3BBIE.js";import{C as aa}from"./calendar-Ch2dru1q.js";import{M as ea}from"./map-pin-C9RieICn.js";import{I as ta}from"./info-CrVT-Lac.js";import{U as sa}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BLSI5LZy.js";import{S as ia}from"./search-Zx7bxW7M.js";import{C as la}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-COXjFu87.js";import{f as oa,e as ra}from"./es-DfN3vIXC.js";import"./Input.vue_vue_type_script_setup_true_lang-B8eH3urq.js";import"./index--jdE-Xg7.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-VKEn_ww1.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-7lbUs277.js";import"./VisuallyHidden-CBkcvgqC.js";import"./check-bJOwcb3O.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DWT0Ri3H.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-C4LHgj_Y.js";import"./loader-circle-Cut8FZ1o.js";import"./trash-2-CQKFRrSa.js";import"./plus-DcXpOfb6.js";import"./history-Yy6xEnmg.js";import"./save-DVkxjMYO.js";import"./index-DQnOdRa7.js";const na={class:"min-h-screen bg-gray-50"},da={class:"bg-white shadow-sm border-b"},pa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ua={class:"flex flex-col gap-4"},ma={class:"text-2xl font-bold text-gray-900"},ca={class:"flex flex-wrap gap-4 text-sm text-gray-600"},fa={class:"flex items-center gap-1"},_a={key:0,class:"flex items-center gap-1"},ga={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},va={class:"flex items-center justify-between"},ba={class:"mb-4"},xa={key:0,class:"flex justify-center py-8"},wa={key:1},ya={class:"flex flex-col items-center gap-2 text-muted-foreground"},$a={key:0,class:"flex items-center justify-between mt-4"},Ca={class:"text-sm text-muted-foreground"},ha={class:"flex items-center space-x-2"},Fa={class:"text-sm"},te=H({__name:"ParticipantsList",props:{asamblea:{},filterFieldsConfig:{}},setup(j){const $=j,v=_([]),n=_({current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}),b=_(!1),C=_({}),h=_($.filterFieldsConfig||[]),F=Z({prefix:"users.",endpoints:{territorios:`${window.location.origin}/api/public/geographic/territorios`,departamentos:`${window.location.origin}/api/public/geographic/departamentos`,municipios:`${window.location.origin}/api/public/geographic/municipios`,localidades:`${window.location.origin}/api/public/geographic/localidades`}}),A=J(()=>({fields:[...h.value||[],...F.generateFilterFields()],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre o cédula...",quickSearchFields:["users.name","users.documento_identidad"],maxNestingLevel:1,allowSaveFilters:!1})),k=l=>l?oa(new Date(l),"PPP",{locale:ra}):"",x=async(l={},a=1)=>{var d;b.value=!0;try{const g={...l,page:a},p=await Y.get(`/api/asambleas/${$.asamblea.id}/participantes-publico`,{params:g});v.value=p.data.participantes.data,n.value={current_page:p.data.participantes.current_page,last_page:p.data.participantes.last_page,per_page:p.data.participantes.per_page,total:p.data.participantes.total,from:p.data.participantes.from,to:p.data.participantes.to},p.data.filterFieldsConfig&&(h.value=p.data.filterFieldsConfig)}catch(g){console.error("Error cargando participantes:",g),((d=g.response)==null?void 0:d.status)===404&&(window.location.href="/")}finally{b.value=!1}},P=l=>{C.value=l,x(l,1)},N=l=>{x(C.value,l)};return K(async()=>{await F.initialize(),x()}),(l,a)=>(u(),c("div",null,[t(e(O),{title:`Participantes - ${l.asamblea.nombre}`},null,8,["title"]),i("div",na,[i("div",da,[i("div",pa,[i("div",ua,[i("h1",ma,r(l.asamblea.nombre),1),i("div",ca,[i("div",fa,[t(e(aa),{class:"h-4 w-4"}),i("span",null,r(k(l.asamblea.fecha_inicio))+" - "+r(k(l.asamblea.fecha_fin)),1)]),l.asamblea.lugar?(u(),c("div",_a,[t(e(ea),{class:"h-4 w-4"}),i("span",null,r(l.asamblea.ubicacion_completa),1)])):y("",!0)])])])]),i("div",ga,[t(e(U),{class:"mb-6"},{default:s(()=>[t(e(ta),{class:"h-4 w-4"}),t(e(G),null,{default:s(()=>a[3]||(a[3]=[o("Consulta Pública de Participantes")])),_:1}),t(e(T),null,{default:s(()=>a[4]||(a[4]=[o(" Esta es una vista pública de los participantes registrados en la asamblea. La información mostrada es limitada para proteger la privacidad de los participantes. ")])),_:1})]),_:1}),t(e(z),null,{default:s(()=>[t(e(B),null,{default:s(()=>[i("div",va,[i("div",null,[t(e(M),null,{default:s(()=>[t(e(sa),{class:"inline-block mr-2 h-5 w-5"}),a[5]||(a[5]=o(" Lista de Participantes "))]),_:1}),t(e(E),null,{default:s(()=>[o(r(n.value.total)+" participantes registrados ",1)]),_:1})])])]),_:1}),t(e(q),null,{default:s(()=>[i("div",ba,[t(Q,{config:A.value,onApply:P,onClear:a[0]||(a[0]=d=>P({}))},null,8,["config"])]),b.value?(u(),c("div",xa,a[6]||(a[6]=[i("div",{class:"text-muted-foreground"},"Cargando participantes...",-1)]))):(u(),c("div",wa,[t(e(V),null,{default:s(()=>[t(e(D),null,{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(f),null,{default:s(()=>a[7]||(a[7]=[o("Nombre")])),_:1}),t(e(f),null,{default:s(()=>a[8]||(a[8]=[o("Territorio")])),_:1}),t(e(f),null,{default:s(()=>a[9]||(a[9]=[o("Departamento")])),_:1}),t(e(f),null,{default:s(()=>a[10]||(a[10]=[o("Municipio")])),_:1}),t(e(f),null,{default:s(()=>a[11]||(a[11]=[o("Localidad")])),_:1})]),_:1})]),_:1}),t(e(I),null,{default:s(()=>[(u(!0),c(W,null,X(v.value,d=>(u(),L(e(w),{key:d.id},{default:s(()=>[t(e(m),{class:"font-medium"},{default:s(()=>[o(r(d.name),1)]),_:2},1024),t(e(m),null,{default:s(()=>[o(r(d.territorio_nombre||"N/A"),1)]),_:2},1024),t(e(m),null,{default:s(()=>[o(r(d.departamento_nombre||"N/A"),1)]),_:2},1024),t(e(m),null,{default:s(()=>[o(r(d.municipio_nombre||"N/A"),1)]),_:2},1024),t(e(m),null,{default:s(()=>[o(r(d.localidad_nombre||"N/A"),1)]),_:2},1024)]),_:2},1024))),128)),v.value.length===0?(u(),L(e(w),{key:0},{default:s(()=>[t(e(m),{colspan:5,class:"text-center py-8"},{default:s(()=>[i("div",ya,[t(e(ia),{class:"h-8 w-8"}),a[12]||(a[12]=i("p",null,"No se encontraron participantes",-1)),a[13]||(a[13]=i("p",{class:"text-sm"},"Intenta ajustar los filtros de búsqueda",-1))])]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1}),n.value.last_page>1?(u(),c("div",$a,[i("div",Ca," Mostrando "+r(n.value.from)+" a "+r(n.value.to)+" de "+r(n.value.total)+" resultados ",1),i("div",ha,[t(e(S),{variant:"outline",size:"sm",disabled:n.value.current_page===1,onClick:a[1]||(a[1]=d=>N(n.value.current_page-1))},{default:s(()=>[t(e(R),{class:"h-4 w-4"}),a[14]||(a[14]=o(" Anterior "))]),_:1},8,["disabled"]),i("div",Fa," Página "+r(n.value.current_page)+" de "+r(n.value.last_page),1),t(e(S),{variant:"outline",size:"sm",disabled:n.value.current_page===n.value.last_page,onClick:a[2]||(a[2]=d=>N(n.value.current_page+1))},{default:s(()=>[a[15]||(a[15]=o(" Siguiente ")),t(e(la),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):y("",!0)]))]),_:1})]),_:1}),a[16]||(a[16]=i("div",{class:"mt-6 text-center text-sm text-gray-500"},[i("p",null,"Esta información es de carácter público y está sujeta a las políticas de privacidad."),i("p",{class:"mt-1"}," Para más información sobre la asamblea, contacte a la organización. ")],-1))])])]))}});export{te as default};
