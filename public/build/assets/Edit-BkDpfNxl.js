import{d as J,C as K,a as _,o as f,b as s,u as t,m as Q,e as o,f as a,j as V,i as c,t as d,g as i,P,h as X,F as $,r as j,W as Y}from"./app-B9oe9ImA.js";import{V as h,_ as tt}from"./AppLayout.vue_vue_type_script_setup_true_lang-DLXGtStv.js";import{_ as C}from"./createLucideIcon-CLq2BVfu.js";import{_ as x,a as g,b as v,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-DgM8RJG1.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-dXO2Wfns.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-DWzoeGnJ.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-CtLC-sW5.js";import{_ as B,a as D,b as F,c as N,d as G}from"./SelectValue.vue_vue_type_script_setup_true_lang-BiY3JUK5.js";import{_ as et}from"./Switch.vue_vue_type_script_setup_true_lang-3zzVHmAM.js";import{_ as st,a as ot,b as z,c as U}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-CzXiu7SJ.js";import{_ as I,a as O}from"./index-Gu6L08O4.js";import{A as at}from"./arrow-left-3pOiautM.js";import{U as lt}from"./users-kYWDkDNW.js";import{F as it}from"./index-C0iMcfV8.js";import{C as q}from"./circle-alert-BjH3iak5.js";import{S as nt}from"./save-C5x1W0Cy.js";import"./index-DN9fbs94.js";import"./check-CZfszT4n.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CYBR5bwA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-0SRoMqWy.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bon-09Vn.js";import"./VisuallyHidden-BYD5CROF.js";import"./index-CfM7hPFq.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-8-xwWO0D.js";import"./briefcase-r86ghe6h.js";import"./calendar-DkYzcNSx.js";import"./index-DES6noyB.js";import"./map-pin-BrcH0nii.js";import"./VisuallyHiddenInput-DrATIdIi.js";import"./RovingFocusItem-Bf-8-CIU.js";import"./utils-DfpcOQ3A.js";const dt={class:"flex h-full flex-1 flex-col gap-4 p-4"},rt={class:"flex items-center justify-between"},ut={class:"text-muted-foreground"},mt={class:"flex gap-2"},ft={class:"grid gap-4 md:grid-cols-3"},pt={class:"text-2xl font-bold"},_t={class:"text-xs text-muted-foreground"},ct={class:"text-2xl font-bold"},xt={class:"text-xs text-muted-foreground"},gt={class:"text-2xl font-bold"},vt={class:"text-xs text-muted-foreground"},bt={class:"grid gap-4 md:grid-cols-2"},yt={class:"space-y-2"},Vt={key:0,class:"text-sm text-red-500"},Ct={class:"space-y-2"},$t={class:"flex"},wt={key:0,class:"text-sm text-red-500"},zt={class:"space-y-2"},Ut={key:0,class:"text-sm text-red-500"},kt={class:"space-y-2"},St={class:"flex items-center space-x-2"},Et={class:"mt-4 rounded-lg bg-muted p-4"},At={class:"grid gap-2 text-sm"},Lt={class:"ml-2"},Tt={class:"ml-2"},Mt={class:"ml-2"},Pt={class:"grid gap-4 md:grid-cols-2"},jt={class:"space-y-2"},Bt={class:"space-y-2"},Dt={class:"flex gap-2"},Ft={class:"space-y-2"},Nt={class:"space-y-2"},Gt={class:"grid gap-4 md:grid-cols-3"},It={class:"space-y-2"},Ot={class:"text-xs text-muted-foreground"},qt={class:"space-y-2"},Rt={class:"text-xs text-muted-foreground"},Wt={class:"space-y-2"},Zt={class:"text-xs text-muted-foreground"},Ht={class:"mt-6 flex justify-end gap-4"},Ue=J({__name:"Edit",props:{tenant:{},subscriptionPlans:{},timezones:{},userCount:{},votacionCount:{},convocatoriaCount:{}},setup(R){var k,S,E,A,L,T,M;const u=R,W=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tenants",href:"/admin/tenants"},{title:`Editar: ${u.tenant.name}`,href:"#"}],l=K({name:u.tenant.name,subdomain:u.tenant.subdomain,subscription_plan:u.tenant.subscription_plan,active:u.tenant.active,settings:{logo:((k=u.tenant.settings)==null?void 0:k.logo)||"",primary_color:((S=u.tenant.settings)==null?void 0:S.primary_color)||"#3B82F6",otp_expiration:((E=u.tenant.settings)==null?void 0:E.otp_expiration)||10,timezone:((A=u.tenant.settings)==null?void 0:A.timezone)||"America/Bogota"},limits:{max_users:((L=u.tenant.limits)==null?void 0:L.max_users)||null,max_votaciones:((T=u.tenant.limits)==null?void 0:T.max_votaciones)||null,max_convocatorias:((M=u.tenant.limits)==null?void 0:M.max_convocatorias)||null}}),Z=()=>{l.put(`/admin/tenants/${u.tenant.id}`,{preserveScroll:!0})},H=()=>{confirm(`¿Estás seguro de eliminar el tenant "${u.tenant.name}"? Esta acción no se puede deshacer.`)&&Y.delete(`/admin/tenants/${u.tenant.id}`)};return(r,e)=>(f(),_($,null,[s(t(Q),{title:`Editar Tenant: ${r.tenant.name}`},null,8,["title"]),s(tt,{breadcrumbs:W},{default:o(()=>[a("div",dt,[a("div",rt,[a("div",null,[e[12]||(e[12]=a("h2",{class:"text-3xl font-bold tracking-tight"},"Editar Tenant",-1)),a("p",ut," Modifica la configuración de "+d(r.tenant.name),1)]),a("div",mt,[r.tenant.id!==1?(f(),V(t(C),{key:0,onClick:H,variant:"destructive",disabled:r.userCount>0},{default:o(()=>e[13]||(e[13]=[i(" Eliminar Tenant ")])),_:1},8,["disabled"])):c("",!0),s(t(P),{href:r.route("admin.tenants.index")},{default:o(()=>[s(t(C),{variant:"outline"},{default:o(()=>[s(t(at),{class:"mr-2 h-4 w-4"}),e[14]||(e[14]=i(" Volver "))]),_:1})]),_:1},8,["href"])])]),a("div",ft,[s(t(x),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>e[15]||(e[15]=[i("Usuarios")])),_:1}),s(t(lt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[a("div",pt,d(r.userCount),1),a("p",_t,d(t(l).limits.max_users?`de ${t(l).limits.max_users} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(t(x),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>e[16]||(e[16]=[i("Votaciones")])),_:1}),s(t(h),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[a("div",ct,d(r.votacionCount),1),a("p",xt,d(t(l).limits.max_votaciones?`de ${t(l).limits.max_votaciones} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(t(x),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>e[17]||(e[17]=[i("Convocatorias")])),_:1}),s(t(it),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[a("div",gt,d(r.convocatoriaCount),1),a("p",vt,d(t(l).limits.max_convocatorias?`de ${t(l).limits.max_convocatorias} máximo`:"Sin límite"),1)]),_:1})]),_:1})]),r.tenant.id===1?(f(),V(t(I),{key:0},{default:o(()=>[s(t(q),{class:"h-4 w-4"}),s(t(O),null,{default:o(()=>e[18]||(e[18]=[i(" Este es el tenant principal del sistema. Algunas opciones pueden estar limitadas. ")])),_:1})]),_:1})):c("",!0),a("form",{onSubmit:X(Z,["prevent"])},[s(t(st),{"default-value":"general",class:"w-full"},{default:o(()=>[s(t(ot),{class:"grid w-full grid-cols-3"},{default:o(()=>[s(t(z),{value:"general"},{default:o(()=>e[19]||(e[19]=[i("Información General")])),_:1}),s(t(z),{value:"settings"},{default:o(()=>e[20]||(e[20]=[i("Configuración")])),_:1}),s(t(z),{value:"limits"},{default:o(()=>e[21]||(e[21]=[i("Límites y Cuotas")])),_:1})]),_:1}),s(t(U),{value:"general"},{default:o(()=>[s(t(x),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>e[22]||(e[22]=[i("Información General")])),_:1}),s(t(w),null,{default:o(()=>e[23]||(e[23]=[i(" Datos básicos de la organización ")])),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[a("div",bt,[a("div",yt,[s(t(m),{for:"name"},{default:o(()=>e[24]||(e[24]=[i("Nombre de la Organización *")])),_:1}),s(t(p),{id:"name",modelValue:t(l).name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(l).name=n),placeholder:"Mi Organización",required:""},null,8,["modelValue"]),t(l).errors.name?(f(),_("p",Vt,d(t(l).errors.name),1)):c("",!0)]),a("div",Ct,[s(t(m),{for:"subdomain"},{default:o(()=>e[25]||(e[25]=[i("Subdominio *")])),_:1}),a("div",$t,[s(t(p),{id:"subdomain",modelValue:t(l).subdomain,"onUpdate:modelValue":e[1]||(e[1]=n=>t(l).subdomain=n),placeholder:"mi-organizacion",pattern:"[a-z0-9-]+",required:"",class:"rounded-r-none"},null,8,["modelValue"]),e[26]||(e[26]=a("span",{class:"inline-flex items-center rounded-r-md border border-l-0 border-input bg-muted px-3 text-sm text-muted-foreground"}," .votaciones.test ",-1))]),e[27]||(e[27]=a("p",{class:"text-xs text-muted-foreground"}," Solo letras minúsculas, números y guiones ",-1)),t(l).errors.subdomain?(f(),_("p",wt,d(t(l).errors.subdomain),1)):c("",!0)]),a("div",zt,[s(t(m),{for:"subscription_plan"},{default:o(()=>e[28]||(e[28]=[i("Plan de Suscripción *")])),_:1}),s(t(B),{modelValue:t(l).subscription_plan,"onUpdate:modelValue":e[2]||(e[2]=n=>t(l).subscription_plan=n)},{default:o(()=>[s(t(D),{id:"subscription_plan"},{default:o(()=>[s(t(F))]),_:1}),s(t(N),null,{default:o(()=>[(f(!0),_($,null,j(r.subscriptionPlans,(n,y)=>(f(),V(t(G),{key:y,value:y},{default:o(()=>[i(d(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(l).errors.subscription_plan?(f(),_("p",Ut,d(t(l).errors.subscription_plan),1)):c("",!0)]),a("div",kt,[s(t(m),{for:"active"},{default:o(()=>e[29]||(e[29]=[i("Estado")])),_:1}),a("div",St,[s(t(et),{id:"active",checked:t(l).active,"onUpdate:checked":e[3]||(e[3]=n=>t(l).active=n)},null,8,["checked"]),s(t(m),{for:"active",class:"font-normal"},{default:o(()=>[i(d(t(l).active?"Activo":"Inactivo"),1)]),_:1})]),e[30]||(e[30]=a("p",{class:"text-xs text-muted-foreground"}," Los tenants inactivos no pueden acceder al sistema ",-1))])]),a("div",Et,[a("div",At,[a("div",null,[e[31]||(e[31]=a("span",{class:"font-medium"},"ID del Tenant:",-1)),a("span",Lt,d(r.tenant.id),1)]),a("div",null,[e[32]||(e[32]=a("span",{class:"font-medium"},"Creado:",-1)),a("span",Tt,d(new Date(r.tenant.created_at).toLocaleString()),1)]),a("div",null,[e[33]||(e[33]=a("span",{class:"font-medium"},"Última actualización:",-1)),a("span",Mt,d(new Date(r.tenant.updated_at).toLocaleString()),1)])])])]),_:1})]),_:1})]),_:1}),s(t(U),{value:"settings"},{default:o(()=>[s(t(x),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>e[34]||(e[34]=[i("Configuración del Sistema")])),_:1}),s(t(w),null,{default:o(()=>e[35]||(e[35]=[i(" Personalización y configuraciones específicas ")])),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[a("div",Pt,[a("div",jt,[s(t(m),{for:"logo"},{default:o(()=>e[36]||(e[36]=[i("URL del Logo")])),_:1}),s(t(p),{id:"logo",modelValue:t(l).settings.logo,"onUpdate:modelValue":e[4]||(e[4]=n=>t(l).settings.logo=n),placeholder:"https://ejemplo.com/logo.png",type:"url"},null,8,["modelValue"]),e[37]||(e[37]=a("p",{class:"text-xs text-muted-foreground"}," URL de la imagen del logo de la organización ",-1))]),a("div",Bt,[s(t(m),{for:"primary_color"},{default:o(()=>e[38]||(e[38]=[i("Color Primario")])),_:1}),a("div",Dt,[s(t(p),{id:"primary_color",modelValue:t(l).settings.primary_color,"onUpdate:modelValue":e[5]||(e[5]=n=>t(l).settings.primary_color=n),placeholder:"#3B82F6",pattern:"#[0-9A-Fa-f]{6}"},null,8,["modelValue"]),s(t(p),{type:"color",modelValue:t(l).settings.primary_color,"onUpdate:modelValue":e[6]||(e[6]=n=>t(l).settings.primary_color=n),class:"w-12 p-1"},null,8,["modelValue"])]),e[39]||(e[39]=a("p",{class:"text-xs text-muted-foreground"}," Color principal de la interfaz ",-1))]),a("div",Ft,[s(t(m),{for:"otp_expiration"},{default:o(()=>e[40]||(e[40]=[i("Expiración OTP (minutos)")])),_:1}),s(t(p),{id:"otp_expiration",modelValue:t(l).settings.otp_expiration,"onUpdate:modelValue":e[7]||(e[7]=n=>t(l).settings.otp_expiration=n),modelModifiers:{number:!0},type:"number",min:"5",max:"60",placeholder:"10"},null,8,["modelValue"]),e[41]||(e[41]=a("p",{class:"text-xs text-muted-foreground"}," Tiempo de validez del código OTP (5-60 minutos) ",-1))]),a("div",Nt,[s(t(m),{for:"timezone"},{default:o(()=>e[42]||(e[42]=[i("Zona Horaria")])),_:1}),s(t(B),{modelValue:t(l).settings.timezone,"onUpdate:modelValue":e[8]||(e[8]=n=>t(l).settings.timezone=n)},{default:o(()=>[s(t(D),{id:"timezone"},{default:o(()=>[s(t(F))]),_:1}),s(t(N),null,{default:o(()=>[(f(!0),_($,null,j(r.timezones,(n,y)=>(f(),V(t(G),{key:y,value:y},{default:o(()=>[i(d(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[43]||(e[43]=a("p",{class:"text-xs text-muted-foreground"}," Zona horaria por defecto para votaciones ",-1))])])]),_:1})]),_:1})]),_:1}),s(t(U),{value:"limits"},{default:o(()=>[s(t(x),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>e[44]||(e[44]=[i("Límites y Cuotas")])),_:1}),s(t(w),null,{default:o(()=>e[45]||(e[45]=[i(" Define los límites de recursos para esta organización ")])),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[a("div",Gt,[a("div",It,[s(t(m),{for:"max_users"},{default:o(()=>e[46]||(e[46]=[i("Usuarios Máximos")])),_:1}),s(t(p),{id:"max_users",modelValue:t(l).limits.max_users,"onUpdate:modelValue":e[9]||(e[9]=n=>t(l).limits.max_users=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Ot," Actual: "+d(r.userCount)+" usuarios ",1)]),a("div",qt,[s(t(m),{for:"max_votaciones"},{default:o(()=>e[47]||(e[47]=[i("Votaciones Máximas")])),_:1}),s(t(p),{id:"max_votaciones",modelValue:t(l).limits.max_votaciones,"onUpdate:modelValue":e[10]||(e[10]=n=>t(l).limits.max_votaciones=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Rt," Actual: "+d(r.votacionCount)+" votaciones ",1)]),a("div",Wt,[s(t(m),{for:"max_convocatorias"},{default:o(()=>e[48]||(e[48]=[i("Convocatorias Máximas")])),_:1}),s(t(p),{id:"max_convocatorias",modelValue:t(l).limits.max_convocatorias,"onUpdate:modelValue":e[11]||(e[11]=n=>t(l).limits.max_convocatorias=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Zt," Actual: "+d(r.convocatoriaCount)+" convocatorias ",1)])]),r.userCount>(t(l).limits.max_users||0)&&t(l).limits.max_users?(f(),V(t(I),{key:0},{default:o(()=>[s(t(q),{class:"h-4 w-4"}),s(t(O),null,{default:o(()=>e[49]||(e[49]=[i(" El número actual de usuarios excede el límite establecido. ")])),_:1})]),_:1})):c("",!0),e[50]||(e[50]=a("div",{class:"rounded-lg bg-muted p-4"},[a("p",{class:"text-sm text-muted-foreground"},[a("strong",null,"Nota:"),i(" Los límites se aplican según el plan de suscripción. Un valor vacío significa que no hay límite establecido para ese recurso. ")])],-1))]),_:1})]),_:1})]),_:1})]),_:1}),a("div",Ht,[s(t(P),{href:r.route("admin.tenants.index")},{default:o(()=>[s(t(C),{type:"button",variant:"outline"},{default:o(()=>e[51]||(e[51]=[i(" Cancelar ")])),_:1})]),_:1},8,["href"]),s(t(C),{type:"submit",disabled:t(l).processing},{default:o(()=>[s(t(nt),{class:"mr-2 h-4 w-4"}),i(" "+d(t(l).processing?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ue as default};
