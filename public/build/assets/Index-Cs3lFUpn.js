import{d as I,b as x,w as e,g as i,j as v,e as s,f as t,t as o,m,h as n,i as g,F as k,k as w,v as y,n as N,s as h}from"./app-DE5myA8s.js";import{_ as E}from"./UserLayout.vue_vue_type_script_setup_true_lang-D598xxFx.js";import{_ as C}from"./createLucideIcon-D0F8u7OI.js";import{_ as c,c as f,a as j,b as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-B2LYPx5G.js";import{_ as S}from"./index-ND6YvCgc.js";import{_ as A}from"./Progress.vue_vue_type_script_setup_true_lang-DG3SBReY.js";import{_ as D,a as F,b as M,c as p,d as T,e as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-C3c-rmry.js";import{C as q}from"./calendar-Brt5wRWj.js";import{S as L}from"./square-pen-CbX22wEz.js";import{C as G}from"./check-B7lYvRTa.js";import{f as H,e as J}from"./es-BDPlFIsO.js";import{p as K}from"./parseISO-DFjB8F03.js";import"./useFlashMessages-F18rkVds.js";import"./index-CzWYTHIb.js";import"./floating-ui.vue-CHVMOV8V.js";import"./x-CN5kjM63.js";import"./Input.vue_vue_type_script_setup_true_lang-D2mUVJSA.js";import"./index-CdJXEUih.js";import"./index-BdNXrDI1.js";import"./shield-CGBjl8Xv.js";import"./user-DoH3zMqC.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Hrtozy2L.js";import"./chevron-right-DmqzUo3n.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DWUofd7o.js";import"./VisuallyHidden-DxFZ0SRD.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-4hvE1hg_.js";import"./Label.vue_vue_type_script_setup_true_lang-Bl2UUPEw.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-B74jzTbT.js";import"./index-XuT1lgcA.js";import"./circle-alert-DEgW0MIB.js";import"./map-pin-B-GNxe5_.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DpeQk-Vq.js";import"./ellipsis-DxzzOFJE.js";import"./usePermissions-DfvqjUc1.js";import"./square-check-big-DeKPHsG0.js";import"./file-text-C16y7GNx.js";import"./users-DbPZzaLh.js";import"./folder-open-C0TAXTrS.js";import"./milestone-i0Bmbv0J.js";import"./index-DYZieqWc.js";const Q={class:"py-6"},R={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},U={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},W={class:"text-2xl font-bold"},X={class:"text-2xl font-bold text-yellow-600"},Y={class:"text-2xl font-bold text-green-600"},Z={class:"text-2xl font-bold text-red-600"},tt={class:"space-y-2"},et={class:"text-sm text-gray-600"},st={class:"flex justify-between"},at={class:"text-sm"},lt={class:"text-gray-500"},it={class:"flex items-center gap-2"},rt={class:"text-sm"},ot={class:"flex gap-1"},Rt=I({__name:"Index",props:{obligaciones:{},estadisticas:{},obligacionesCriticas:{},canComplete:{type:Boolean}},setup(d){const O=r=>{if(!r)return"Sin fecha";try{return H(K(r),"dd MMM yyyy",{locale:J})}catch{return r}},z=r=>({pendiente:"secondary",en_progreso:"default",cumplida:"success",vencida:"destructive",cancelada:"warning"})[r]||"secondary",B=r=>{const a=prompt("Ingrese el porcentaje de avance (0-100):",String(r.porcentaje_cumplimiento));a!==null&&h.put(route("miembro.mis-obligaciones.actualizar-progreso",r.id),{porcentaje_cumplimiento:parseInt(a)},{preserveScroll:!0})},P=r=>{confirm("¿Marcar esta obligación como cumplida?")&&h.post(route("miembro.mis-obligaciones.completar",r.id),{},{preserveScroll:!0})};return(r,a)=>(m(),x(E,{title:"Mis Obligaciones"},{header:e(()=>[...a[0]||(a[0]=[i("h2",{class:"text-xl font-semibold"},"Mis Obligaciones",-1)])]),default:e(()=>[i("div",Q,[i("div",R,[i("div",U,[s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",W,o(d.estadisticas.total),1),a[1]||(a[1]=i("p",{class:"text-sm text-gray-600"},"Total Asignadas",-1))]),_:1})]),_:1}),s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",X,o(d.estadisticas.pendientes),1),a[2]||(a[2]=i("p",{class:"text-sm text-gray-600"},"Pendientes",-1))]),_:1})]),_:1}),s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",Y,o(d.estadisticas.cumplidas),1),a[3]||(a[3]=i("p",{class:"text-sm text-gray-600"},"Cumplidas",-1))]),_:1})]),_:1}),s(t(c),null,{default:e(()=>[s(t(f),{class:"pt-6"},{default:e(()=>[i("div",Z,o(d.estadisticas.vencidas),1),a[4]||(a[4]=i("p",{class:"text-sm text-gray-600"},"Vencidas",-1))]),_:1})]),_:1})]),d.obligacionesCriticas.length>0?(m(),x(t(c),{key:0,class:"mb-6 border-red-200"},{default:e(()=>[s(t(j),{class:"bg-red-50"},{default:e(()=>[s(t(V),{class:"text-red-800"},{default:e(()=>[...a[5]||(a[5]=[n("⚠️ Obligaciones Críticas",-1)])]),_:1})]),_:1}),s(t(f),{class:"pt-4"},{default:e(()=>[i("div",tt,[(m(!0),g(k,null,w(d.obligacionesCriticas,l=>{var u;return m(),g("div",{key:l.id,class:"flex justify-between items-center p-2 bg-red-50 rounded"},[i("div",null,[s(t(y),{href:r.route("miembro.mis-obligaciones.show",l.id),class:"font-medium hover:underline"},{default:e(()=>[n(o(l.titulo),1)]),_:2},1032,["href"]),i("p",et,o((u=l.contrato)==null?void 0:u.nombre),1)]),s(t(S),{variant:"destructive"},{default:e(()=>[n(o(l.dias_restantes!==null&&l.dias_restantes>=0?`${l.dias_restantes} días`:"Vencida"),1)]),_:2},1024)])}),128))])]),_:1})]),_:1})):v("",!0),s(t(c),null,{default:e(()=>[s(t(j),null,{default:e(()=>[i("div",st,[s(t(V),null,{default:e(()=>[...a[6]||(a[6]=[n("Mis Obligaciones",-1)])]),_:1}),s(t(y),{href:r.route("miembro.mis-obligaciones.calendario")},{default:e(()=>[s(t(C),{variant:"outline",size:"sm"},{default:e(()=>[s(t(q),{class:"h-4 w-4 mr-1"}),a[7]||(a[7]=n(" Vista Calendario ",-1))]),_:1})]),_:1},8,["href"])])]),_:1}),s(t(f),null,{default:e(()=>[s(t(D),null,{default:e(()=>[s(t(F),null,{default:e(()=>[s(t(M),null,{default:e(()=>[s(t(p),null,{default:e(()=>[...a[8]||(a[8]=[n("Obligación",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[9]||(a[9]=[n("Contrato/Proyecto",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[10]||(a[10]=[n("Estado",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[11]||(a[11]=[n("Vencimiento",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[12]||(a[12]=[n("Progreso",-1)])]),_:1}),s(t(p),null,{default:e(()=>[...a[13]||(a[13]=[n("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(t(T),null,{default:e(()=>[(m(!0),g(k,null,w(d.obligaciones.data,l=>(m(),x(t(M),{key:l.id},{default:e(()=>[s(t(_),null,{default:e(()=>[s(t(y),{href:r.route("miembro.mis-obligaciones.show",l.id),class:"font-medium hover:underline"},{default:e(()=>[n(o(l.titulo),1)]),_:2},1032,["href"])]),_:2},1024),s(t(_),null,{default:e(()=>{var u,b,$;return[i("div",at,[i("p",null,o((u=l.contrato)==null?void 0:u.nombre),1),i("p",lt,o(($=(b=l.contrato)==null?void 0:b.proyecto)==null?void 0:$.nombre),1)])]}),_:2},1024),s(t(_),null,{default:e(()=>[s(t(S),{variant:z(l.estado)},{default:e(()=>[n(o(l.estado_label),1)]),_:2},1032,["variant"])]),_:2},1024),s(t(_),null,{default:e(()=>[i("span",{class:N({"text-red-600":l.esta_vencida})},o(O(l.fecha_vencimiento)),3)]),_:2},1024),s(t(_),null,{default:e(()=>[i("div",it,[s(t(A),{value:l.porcentaje_cumplimiento,class:"w-16"},null,8,["value"]),i("span",rt,o(l.porcentaje_cumplimiento)+"%",1)])]),_:2},1024),s(t(_),null,{default:e(()=>[i("div",ot,[l.estado!=="cumplida"&&d.canComplete?(m(),x(t(C),{key:0,size:"sm",variant:"ghost",onClick:u=>B(l)},{default:e(()=>[s(t(L),{class:"h-4 w-4"})]),_:1},8,["onClick"])):v("",!0),l.estado!=="cumplida"&&d.canComplete?(m(),x(t(C),{key:1,size:"sm",variant:"ghost",onClick:u=>P(l)},{default:e(()=>[s(t(G),{class:"h-4 w-4"})]),_:1},8,["onClick"])):v("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1}))}});export{Rt as default};
