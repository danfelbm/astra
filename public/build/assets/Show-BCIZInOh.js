import{d as ue,c as x,r as Q,i as m,e as d,f as s,u as e,p as fe,w as a,g as o,t as i,b as g,j as p,P as S,h as r,n as U,F as E,k as N,s as me,l as W}from"./app-BFCRP-hu.js";import{_ as ce}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DVhxtwsQ.js";import{_ as b,a as $,c as v,b as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-C6Pf_Uif.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-C5iYxevR.js";import{c as pe,_ as X}from"./createLucideIcon-B48W5HGR.js";import{_ as P}from"./index-C4A356_A.js";import{_ as _e}from"./Progress.vue_vue_type_script_setup_true_lang-CmiRJl8o.js";import{_ as B,a as R,b as O}from"./index-7Cc0L9l5.js";import{_ as ge,a as be,b as q,c as L}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-KlWRsGd7.js";import{_ as ve,a as ye}from"./index-BDFzzg4B.js";import{_ as he,a as xe,b as Z,c as M,d as $e,e as V}from"./TableHeader.vue_vue_type_script_setup_true_lang-DQXCVN5r.js";import{_ as ke,a as we,b as Ce,c as ze}from"./AccordionContent.vue_vue_type_script_setup_true_lang-D9TSTnjV.js";import{_ as Ee}from"./EvidenciaFilters.vue_vue_type_script_setup_true_lang-7y5M8Ap_.js";import{n as Pe,d as Me,f as ee,e as te}from"./es-BDPlFIsO.js";import{A as Ve}from"./arrow-left-BiabW1KV.js";import{S as Ae}from"./square-pen-DEMoq68S.js";import{F as Ne}from"./flag-KNsaGE_a.js";import{C as Fe}from"./clock-PhaHEFle.js";import{F as se}from"./file-text-BNtX5jn7.js";import{U as je}from"./users-D4nlGR3z.js";import{I as Y}from"./image-Dsh-YO9f.js";import{C as ae}from"./calendar-_r6_tYhJ.js";import{C as Ie}from"./circle-alert-Crqw8R8y.js";import{T as De}from"./tag-BD_pJCyF.js";import{E as Se}from"./external-link-DVqz8Mr1.js";import{D as qe}from"./download-CHCWIUuH.js";import{p as le}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-IDczqvjz.js";import"./index-BV8EXJV5.js";import"./floating-ui.vue-r1jh_cyr.js";import"./x-CO2t7227.js";import"./Input.vue_vue_type_script_setup_true_lang-BArk2Dro.js";import"./index-D4t36AHs.js";import"./shield-CJLgSpbM.js";import"./user-B1UdYhgU.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bk1MyGsx.js";import"./chevron-right-jEjsThLi.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-it7-95jd.js";import"./VisuallyHidden-DtgZKa-V.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D4BkPhEO.js";import"./check-50anzA7W.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-BSsD_nCa.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-dTZ0TTmN.js";import"./index-D4Jmcyj5.js";import"./map-pin-96AKVoID.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Bn4JBZsL.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-Dy-9tXTd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-B5X7TeC-.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C1tM4KQo.js";import"./target-BG-rBVrT.js";import"./vote-CRb2uBrD.js";import"./folder-open-CdHVd2oB.js";import"./send-B06MTMiq.js";import"./briefcase-DvfVQ7DM.js";import"./megaphone-Dd-rvhjG.js";import"./user-check-CmuxQ_fm.js";import"./clipboard-list-BbsP5NSE.js";import"./mail-C7hV_ozf.js";import"./message-square-2Ae9CC_o.js";import"./panel-left-BSTwYg9i.js";import"./index-BZv-jeFa.js";import"./RovingFocusItem-DIFJgx_h.js";import"./utils-DHSP7tfB.js";import"./useArrowNavigation-B5rxJs06.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=pe("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function He(y,f,h){const[k,A]=Pe(h==null?void 0:h.in,y,f),c=oe(k,A),j=Math.abs(Me(k,A));k.setDate(k.getDate()-c*j);const H=+(oe(k,A)===-c),I=c*(j-H);return I===0?0:I}function oe(y,f){const h=y.getFullYear()-f.getFullYear()||y.getMonth()-f.getMonth()||y.getDate()-f.getDate()||y.getHours()-f.getHours()||y.getMinutes()-f.getMinutes()||y.getSeconds()-f.getSeconds()||y.getMilliseconds()-f.getMilliseconds();return h<0?-1:h>0?1:h}const Te={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ue={class:"flex items-center justify-between"},Be={class:"text-3xl font-bold"},Re={class:"text-muted-foreground mt-2"},Oe={class:"flex gap-2"},Ye={class:"grid gap-4 md:grid-cols-4"},Ge={class:"flex items-center gap-2"},Je={class:"font-medium capitalize"},Ke={class:"space-y-2"},Qe={class:"flex justify-between"},We={class:"text-2xl font-bold"},Xe={key:0,class:"flex items-center gap-2"},Ze={class:"font-medium"},et={key:1,class:"text-muted-foreground"},tt={key:0},st={class:"text-sm"},at={class:"grid gap-4 md:grid-cols-2"},lt={class:"flex items-center gap-2"},ot={class:"flex items-center gap-2"},nt={key:1},rt={class:"border-t pt-4"},it={class:"grid gap-2 text-sm"},dt={class:"flex justify-between"},ut={class:"flex justify-between"},ft={class:"flex justify-between"},mt={class:"grid gap-4 md:grid-cols-2"},ct={class:"text-sm font-medium text-muted-foreground mb-1"},pt={key:0,class:"text-red-500"},_t={class:"text-sm"},gt={key:0,class:"text-xs text-muted-foreground mt-1"},bt={key:0,class:"text-center py-4"},vt={class:"flex items-center gap-2"},yt={class:"flex flex-wrap gap-2"},ht={key:0,class:"flex items-center gap-3"},xt={class:"font-medium"},$t={class:"text-sm text-muted-foreground"},kt={key:1,class:"text-muted-foreground"},wt={key:0,class:"space-y-3"},Ct={class:"flex items-center gap-3"},zt={class:"font-medium"},Et={class:"text-sm text-muted-foreground"},Pt={key:1,class:"text-muted-foreground"},Mt={key:1},Vt={class:"flex items-center justify-between w-full pr-4"},At={class:"flex items-center gap-3"},Nt={class:"text-left"},Ft={class:"font-semibold"},jt={class:"text-sm text-gray-500"},It={class:"flex items-center gap-3"},Dt={class:"text-sm text-gray-600"},St={class:"text-sm"},qt=["href"],Lt={class:"text-center"},Ht={class:"text-center"},Tt={key:0,class:"space-y-4"},Ut={class:"flex-1"},Bt={class:"text-sm"},Rt={class:"font-medium"},Ot={class:"text-xs text-muted-foreground mt-1"},Yt={key:1,class:"text-muted-foreground"},oa=ue({__name:"Show",props:{proyecto:{},hito:{},entregable:{},usuariosAsignados:{},actividades:{},camposPersonalizados:{},valoresCamposPersonalizados:{},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(y){const f=y,h=x(()=>f.usuariosAsignados||[]),k=x(()=>f.actividades||[]),A=Q("detalles"),c=Q({contrato_id:null,fecha_inicio:null,fecha_fin:null,tipo:null,estado:null,usuario_id:null}),j=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:f.proyecto.nombre,href:`/admin/proyectos/${f.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${f.proyecto.id}/hitos`},{title:f.hito.nombre,href:`/admin/proyectos/${f.proyecto.id}/hitos/${f.hito.id}`},{title:"Entregables",href:`/admin/proyectos/${f.proyecto.id}/hitos/${f.hito.id}/entregables`},{title:f.entregable.nombre}],H=x(()=>({pendiente:"secondary",en_progreso:"default",completado:"outline",cancelado:"destructive"})[f.entregable.estado]||"default"),I=x(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[f.entregable.estado]||f.entregable.estado),ne=x(()=>({baja:"text-blue-500",media:"text-yellow-500",alta:"text-red-500"})[f.entregable.prioridad]||""),_=x(()=>f.entregable.fecha_fin?He(new Date(f.entregable.fecha_fin),new Date):null);x(()=>{if(f.entregable.estado==="completado")return"Completado";if(f.entregable.estado==="cancelado")return"Cancelado";if(_.value!==null){if(_.value<0)return"Vencido";if(_.value===0)return"Vence hoy";if(_.value<=3)return"Por vencer"}return"En curso"});const D=l=>l?ee(le(l),"d 'de' MMMM 'de' yyyy",{locale:te}):"No definida",T=l=>ee(le(l),"d MMM yyyy 'a las' HH:mm",{locale:te}),re=(l,t)=>{var n;if(t==null||t==="")return"No especificado";switch(l.tipo){case"date":return D(t);case"checkbox":return t?"Sí":"No";case"select":case"radio":const u=(n=l.opciones)==null?void 0:n.find(z=>z.value===t);return(u==null?void 0:u.label)||t;default:return t}},C=x(()=>f.entregable.evidencias||[]),ie=x(()=>{const l=new Map;return C.value.forEach(t=>{var n;if((n=t.obligacion)!=null&&n.contrato){const u=t.obligacion.contrato;l.has(u.id)||l.set(u.id,{id:u.id,nombre:u.nombre})}}),Array.from(l.values())}),de=x(()=>{let l=C.value;return c.value.contrato_id&&(l=l.filter(t=>{var n;return((n=t.obligacion)==null?void 0:n.contrato_id)===c.value.contrato_id})),c.value.tipo&&(l=l.filter(t=>t.tipo_evidencia===c.value.tipo)),c.value.estado&&(l=l.filter(t=>t.estado===c.value.estado)),c.value.usuario_id&&(l=l.filter(t=>{var n;return((n=t.usuario)==null?void 0:n.id)===c.value.usuario_id})),(c.value.fecha_inicio||c.value.fecha_fin)&&(l=l.filter(t=>{const n=new Date(t.created_at);if(c.value.fecha_inicio){const u=new Date(c.value.fecha_inicio);if(n<u)return!1}if(c.value.fecha_fin){const u=new Date(c.value.fecha_fin);if(u.setHours(23,59,59,999),n>u)return!1}return!0})),l}),G=x(()=>{const l={};return de.value.forEach(t=>{var n;if((n=t.obligacion)!=null&&n.contrato){const u=t.obligacion.contrato.id;l[u]||(l[u]={contrato:t.obligacion.contrato,evidencias:[]}),l[u].evidencias.push({...t,obligacion_titulo:t.obligacion.titulo})}}),Object.values(l)});return(l,t)=>(d(),m(E,null,[s(e(fe),{title:`Entregable - ${l.entregable.nombre}`},null,8,["title"]),s(ce,{breadcrumbs:j},{default:a(()=>[o("div",Te,[o("div",Ue,[o("div",null,[o("h1",Be,i(l.entregable.nombre),1),o("p",Re,' Entregable del hito "'+i(l.hito.nombre)+'" ',1)]),o("div",Oe,[s(e(S),{href:`/admin/proyectos/${l.proyecto.id}/hitos/${l.hito.id}/entregables`},{default:a(()=>[s(e(X),{variant:"outline",size:"sm"},{default:a(()=>[s(e(Ve),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=r(" Volver ",-1))]),_:1})]),_:1},8,["href"]),l.canEdit?(d(),g(e(S),{key:0,href:`/admin/proyectos/${l.proyecto.id}/hitos/${l.hito.id}/entregables/${l.entregable.id}/edit`},{default:a(()=>[s(e(X),{variant:"outline",size:"sm"},{default:a(()=>[s(e(Ae),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=r(" Editar ",-1))]),_:1})]),_:1},8,["href"])):p("",!0)])]),o("div",Ye,[s(e(b),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[6]||(t[6]=[r("Estado",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[s(e(P),{variant:H.value,class:"text-sm"},{default:a(()=>[r(i(I.value),1)]),_:1},8,["variant"])]),_:1})]),_:1}),s(e(b),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[7]||(t[7]=[r("Prioridad",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[o("div",Ge,[s(e(Ne),{class:U(["h-4 w-4",ne.value])},null,8,["class"]),o("span",Je,i(l.entregable.prioridad),1)])]),_:1})]),_:1}),s(e(b),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[8]||(t[8]=[r("Progreso",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[o("div",Ke,[o("div",Qe,[o("span",We,i(l.entregable.porcentaje_completado)+"%",1)]),s(e(_e),{"model-value":l.entregable.porcentaje_completado},null,8,["model-value"])])]),_:1})]),_:1}),s(e(b),null,{default:a(()=>[s(e($),{class:"pb-2"},{default:a(()=>[s(e(w),null,{default:a(()=>[...t[9]||(t[9]=[r("Tiempo Restante",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[_.value!==null?(d(),m("div",Xe,[s(e(Fe),{class:U(["h-4 w-4",{"text-red-500":_.value<0,"text-yellow-500":_.value>=0&&_.value<=3,"text-green-500":_.value>3}])},null,8,["class"]),o("span",Ze,i(_.value<0?`Vencido hace ${Math.abs(_.value)} días`:_.value===0?"Vence hoy":`${_.value} días`),1)])):(d(),m("span",et,"Sin fecha límite"))]),_:1})]),_:1})]),s(e(ge),{modelValue:A.value,"onUpdate:modelValue":t[3]||(t[3]=n=>A.value=n),class:"flex-1"},{default:a(()=>[s(e(be),null,{default:a(()=>[s(e(q),{value:"detalles"},{default:a(()=>[s(e(se),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=r(" Detalles ",-1))]),_:1}),s(e(q),{value:"equipo"},{default:a(()=>[s(e(je),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=r(" Equipo ",-1))]),_:1}),s(e(q),{value:"evidencias"},{default:a(()=>[s(e(Y),{class:"h-4 w-4 mr-2"}),t[12]||(t[12]=r(" Evidencias ",-1)),C.value.length>0?(d(),g(e(P),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:a(()=>[r(i(C.value.length),1)]),_:1})):p("",!0)]),_:1}),s(e(q),{value:"actividad"},{default:a(()=>[s(e(Le),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=r(" Actividad ",-1))]),_:1})]),_:1}),s(e(L),{value:"detalles",class:"space-y-4"},{default:a(()=>[s(e(b),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[14]||(t[14]=[r("Información General",-1)])]),_:1})]),_:1}),s(e(v),{class:"space-y-4"},{default:a(()=>[l.entregable.descripcion?(d(),m("div",tt,[t[15]||(t[15]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),o("p",st,i(l.entregable.descripcion),1)])):p("",!0),o("div",at,[o("div",null,[t[16]||(t[16]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Inicio",-1)),o("div",lt,[s(e(ae),{class:"h-4 w-4"}),o("span",null,i(D(l.entregable.fecha_inicio)),1)])]),o("div",null,[t[17]||(t[17]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Fecha de Fin",-1)),o("div",ot,[s(e(ae),{class:"h-4 w-4"}),o("span",null,i(D(l.entregable.fecha_fin)),1)])])]),l.entregable.notas?(d(),m("div",nt,[t[18]||(t[18]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Notas",-1)),s(e(ve),null,{default:a(()=>[s(e(Ie),{class:"h-4 w-4"}),s(e(ye),null,{default:a(()=>[r(i(l.entregable.notas),1)]),_:1})]),_:1})])):p("",!0),o("div",rt,[t[22]||(t[22]=o("h4",{class:"text-sm font-medium text-muted-foreground mb-2"},"Metadatos",-1)),o("div",it,[o("div",dt,[t[19]||(t[19]=o("span",{class:"text-muted-foreground"},"Creado:",-1)),o("span",null,i(T(l.entregable.created_at)),1)]),o("div",ut,[t[20]||(t[20]=o("span",{class:"text-muted-foreground"},"Última actualización:",-1)),o("span",null,i(T(l.entregable.updated_at)),1)]),o("div",ft,[t[21]||(t[21]=o("span",{class:"text-muted-foreground"},"Orden de visualización:",-1)),o("span",null,i(l.entregable.orden),1)])])])]),_:1})]),_:1}),l.camposPersonalizados&&l.camposPersonalizados.length>0?(d(),g(e(b),{key:0},{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[23]||(t[23]=[r("Campos Personalizados",-1)])]),_:1}),s(e(w),null,{default:a(()=>[...t[24]||(t[24]=[r(" Información adicional específica del entregable ",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[o("div",mt,[(d(!0),m(E,null,N(l.camposPersonalizados,n=>{var u;return d(),m("div",{key:n.id},[o("h4",ct,[r(i(n.nombre)+" ",1),n.es_requerido?(d(),m("span",pt,"*")):p("",!0)]),o("p",_t,i(re(n,(u=l.valoresCamposPersonalizados)==null?void 0:u[n.id])),1),n.descripcion?(d(),m("p",gt,i(n.descripcion),1)):p("",!0)])}),128))]),!l.camposPersonalizados||l.camposPersonalizados.length===0?(d(),m("div",bt,[...t[25]||(t[25]=[o("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):p("",!0)]),_:1})]),_:1})):p("",!0),l.entregable.etiquetas&&l.entregable.etiquetas.length>0?(d(),g(e(b),{key:1},{default:a(()=>[s(e($),null,{default:a(()=>[o("div",vt,[s(e(De),{class:"h-5 w-5"}),s(e(F),null,{default:a(()=>[...t[26]||(t[26]=[r("Etiquetas",-1)])]),_:1})]),s(e(w),null,{default:a(()=>[...t[27]||(t[27]=[r(" Etiquetas asignadas a este entregable para su organización y categorización ",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[o("div",yt,[(d(!0),m(E,null,N(l.entregable.etiquetas,n=>(d(),g(e(P),{key:n.id,variant:"outline",class:"px-3 py-1.5",style:me({borderColor:n.color||"#94a3b8",color:n.color||"#64748b",backgroundColor:`${n.color}15`||"#f1f5f9"})},{default:a(()=>[r(i(n.nombre),1)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})):p("",!0)]),_:1}),s(e(L),{value:"equipo",class:"space-y-4"},{default:a(()=>[s(e(b),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[28]||(t[28]=[r("Responsable Principal",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[l.entregable.responsable?(d(),m("div",ht,[s(e(B),{class:"h-10 w-10"},{default:a(()=>[l.entregable.responsable.avatar?(d(),g(e(R),{key:0,src:l.entregable.responsable.avatar},null,8,["src"])):p("",!0),s(e(O),null,{default:a(()=>[r(i(l.entregable.responsable.name.substring(0,2).toUpperCase()),1)]),_:1})]),_:1}),o("div",null,[o("p",xt,i(l.entregable.responsable.name),1),o("p",$t,i(l.entregable.responsable.email),1)])])):(d(),m("p",kt,"No hay responsable asignado"))]),_:1})]),_:1}),s(e(b),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[29]||(t[29]=[r("Colaboradores",-1)])]),_:1}),s(e(w),null,{default:a(()=>[r(i(h.value.length)+" usuarios asignados ",1)]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[h.value.length>0?(d(),m("div",wt,[(d(!0),m(E,null,N(h.value,n=>(d(),m("div",{key:n.user_id,class:"flex items-center justify-between p-3 bg-muted rounded-lg"},[o("div",Ct,[s(e(B),{class:"h-8 w-8"},{default:a(()=>[n.user.avatar?(d(),g(e(R),{key:0,src:n.user.avatar},null,8,["src"])):p("",!0),s(e(O),null,{default:a(()=>[r(i(n.user.name.substring(0,2).toUpperCase()),1)]),_:2},1024)]),_:2},1024),o("div",null,[o("p",zt,i(n.user.name),1),o("p",Et,i(n.user.email),1)])]),s(e(P),{variant:"outline"},{default:a(()=>[r(i(n.rol),1)]),_:2},1024)]))),128))])):(d(),m("p",Pt,"No hay colaboradores asignados"))]),_:1})]),_:1})]),_:1}),s(e(L),{value:"evidencias",class:"space-y-4 mt-6"},{default:a(()=>[C.value.length>0?(d(),g(Ee,{key:0,modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=n=>c.value=n),contratos:ie.value,evidencias:C.value},null,8,["modelValue","contratos","evidencias"])):p("",!0),G.value.length>0?(d(),m("div",Mt,[s(e(ke),{type:"multiple",class:"space-y-4",collapsible:""},{default:a(()=>[(d(!0),m(E,null,N(G.value,n=>(d(),g(e(we),{key:n.contrato.id,value:`contrato-${n.contrato.id}`,class:"border rounded-lg bg-card"},{default:a(()=>[s(e(Ce),{class:"px-4 py-3 hover:no-underline hover:bg-gray-50 dark:hover:bg-gray-800 rounded-t-lg"},{default:a(()=>[o("div",Vt,[o("div",At,[s(e(se),{class:"h-5 w-5 text-gray-500"}),o("div",Nt,[o("div",Ft,i(n.contrato.nombre),1),o("div",jt," Contrato #"+i(n.contrato.id),1)])]),o("div",It,[s(e(P),{variant:"secondary"},{default:a(()=>[r(i(n.evidencias.length)+" evidencia(s) ",1)]),_:2},1024),s(e(S),{href:`/admin/contratos/${n.contrato.id}`,onClick:t[1]||(t[1]=W(()=>{},["stop"])),class:"text-blue-600 hover:text-blue-800 flex items-center gap-1"},{default:a(()=>[t[30]||(t[30]=r(" Ver contrato ",-1)),s(e(Se),{class:"h-3 w-3"})]),_:2},1032,["href"])])])]),_:2},1024),s(e(ze),{class:"px-4 pb-4"},{default:a(()=>[s(e(he),null,{default:a(()=>[s(e(xe),null,{default:a(()=>[s(e(Z),null,{default:a(()=>[s(e(M),null,{default:a(()=>[...t[31]||(t[31]=[r("Tipo",-1)])]),_:1}),s(e(M),null,{default:a(()=>[...t[32]||(t[32]=[r("Obligación",-1)])]),_:1}),s(e(M),null,{default:a(()=>[...t[33]||(t[33]=[r("Descripción",-1)])]),_:1}),s(e(M),null,{default:a(()=>[...t[34]||(t[34]=[r("Usuario",-1)])]),_:1}),s(e(M),null,{default:a(()=>[...t[35]||(t[35]=[r("Estado",-1)])]),_:1}),s(e(M),null,{default:a(()=>[...t[36]||(t[36]=[r("Fecha",-1)])]),_:1}),s(e(M),{class:"text-right"},{default:a(()=>[...t[37]||(t[37]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(e($e),null,{default:a(()=>[(d(!0),m(E,null,N(n.evidencias,u=>(d(),g(e(Z),{key:u.id,class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[s(e(S),{href:`/admin/contratos/${n.contrato.id}/evidencias/${u.id}`,class:"contents"},{default:a(()=>[s(e(V),null,{default:a(()=>[s(e(P),{variant:"outline"},{default:a(()=>[r(i(u.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),s(e(V),null,{default:a(()=>[r(i(u.obligacion_titulo),1)]),_:2},1024),s(e(V),null,{default:a(()=>[o("span",Dt,i(u.descripcion||"-"),1)]),_:2},1024),s(e(V),null,{default:a(()=>{var z;return[o("span",St,i(((z=u.usuario)==null?void 0:z.name)||"-"),1)]}),_:2},1024),s(e(V),null,{default:a(()=>[s(e(P),{class:U({"bg-yellow-100 text-yellow-800":u.estado==="pendiente","bg-green-100 text-green-800":u.estado==="aprobada","bg-red-100 text-red-800":u.estado==="rechazada"})},{default:a(()=>[r(i(u.estado),1)]),_:2},1032,["class"])]),_:2},1024),s(e(V),null,{default:a(()=>[r(i(D(u.created_at)),1)]),_:2},1024),s(e(V),{class:"text-right"},{default:a(()=>[u.archivo_url?(d(),m("a",{key:0,href:u.archivo_url,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800",onClick:t[2]||(t[2]=W(()=>{},["stop"]))},[s(e(qe),{class:"h-4 w-4"})],8,qt)):p("",!0)]),_:2},1024)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])):C.value.length===0?(d(),g(e(b),{key:2},{default:a(()=>[s(e(v),{class:"py-8"},{default:a(()=>[o("div",Lt,[s(e(Y),{class:"mx-auto h-12 w-12 text-gray-400"}),t[38]||(t[38]=o("p",{class:"mt-2 text-sm text-gray-600"},"No hay evidencias asociadas",-1)),t[39]||(t[39]=o("p",{class:"text-xs text-gray-500 mt-1"},"Las evidencias se asocian desde los contratos",-1))])]),_:1})]),_:1})):(d(),g(e(b),{key:3},{default:a(()=>[s(e(v),{class:"py-8"},{default:a(()=>[o("div",Ht,[s(e(Y),{class:"mx-auto h-12 w-12 text-gray-400"}),t[40]||(t[40]=o("p",{class:"mt-2 text-sm text-gray-600"},"No hay evidencias que coincidan con los filtros",-1)),t[41]||(t[41]=o("p",{class:"text-xs text-gray-500 mt-1"},"Intenta ajustar los criterios de búsqueda",-1))])]),_:1})]),_:1}))]),_:1}),s(e(L),{value:"actividad",class:"space-y-4"},{default:a(()=>[s(e(b),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(F),null,{default:a(()=>[...t[42]||(t[42]=[r("Historial de Actividad",-1)])]),_:1}),s(e(w),null,{default:a(()=>[...t[43]||(t[43]=[r(" Registro de cambios y eventos del entregable ",-1)])]),_:1})]),_:1}),s(e(v),null,{default:a(()=>[k.value.length>0?(d(),m("div",Tt,[(d(!0),m(E,null,N(k.value,n=>{var u;return d(),m("div",{key:n.id,class:"flex gap-3 pb-4 border-b last:border-0"},[s(e(B),{class:"h-8 w-8"},{default:a(()=>{var z;return[(z=n.causer)!=null&&z.avatar?(d(),g(e(R),{key:0,src:n.causer.avatar},null,8,["src"])):p("",!0),s(e(O),null,{default:a(()=>{var J,K;return[r(i(((K=(J=n.causer)==null?void 0:J.name)==null?void 0:K.substring(0,2).toUpperCase())||"SI"),1)]}),_:2},1024)]}),_:2},1024),o("div",Ut,[o("p",Bt,[o("span",Rt,i(((u=n.causer)==null?void 0:u.name)||"Sistema"),1),r(" "+i(n.description),1)]),o("p",Ot,i(T(n.created_at)),1)])])}),128))])):(d(),m("p",Yt,"No hay actividad registrada"))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{oa as default};
