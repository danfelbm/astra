import{_ as B,C as K}from"./index-CNv5LlCp.js";import{c as xe,_ as x}from"./createLucideIcon-DJvARB-q.js";import{_ as X,c as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-B_XBvMGg.js";import{_ as W}from"./Label.vue_vue_type_script_setup_true_lang-COc88-V1.js";import{_ as be,a as ye,b as Q,c as k,d as he,e as w}from"./TableHeader.vue_vue_type_script_setup_true_lang-D69yI9Fd.js";import{S as ke,a as Y,b as Z,c as ee,U as we,_ as Ce}from"./AppLayout.vue_vue_type_script_setup_true_lang-CkV93eRM.js";import{d as H,a as m,i as b,o as r,f as s,F as L,r as D,j as y,u as t,W as de,e as o,s as $e,v as Se,x as Ee,y as Ae,k as v,w as je,b as a,m as Ne,g as i,P as Te,t as l,n as Pe}from"./app-Dz3ixXIz.js";import{_ as Me}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-BN9afo3V.js";import{_ as se,a as te,b as ae,c as oe,d as ne,e as le}from"./DialogTitle.vue_vue_type_script_setup_true_lang-2yHR_n_V.js";import{_ as F}from"./Checkbox.vue_vue_type_script_setup_true_lang-DcZCPgd6.js";import{H as Ve}from"./index-BOiXewDQ.js";import{M as q}from"./mail-mWrG82TD.js";import{S as U}from"./send-DaVkSisZ.js";import{I as qe}from"./info-BQAfTVb_.js";import{E as Le}from"./eye-BXVUI1Rp.js";import{E as Re}from"./external-link-DcUSMiCj.js";import{M as re}from"./message-square-BmMKbazr.js";import"./Input.vue_vue_type_script_setup_true_lang-5wns8fOn.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-o18L5IZN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CL6UcR-y.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-B7RX3EcW.js";import"./VisuallyHidden-DzPDbuKW.js";import"./check-BdfcYRKF.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BvYTiVJy.js";import"./index-BcFl43Gn.js";import"./calendar-BY0KMpjj.js";import"./map-pin-N6S9PH39.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-CpPp_xjW.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DPH7ymyl.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-nMs81MJL.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-CZpWltKH.js";import"./loader-circle-Z7yxosuO.js";import"./trash-2-DsBT4BwU.js";import"./plus-DUvCCtwf.js";import"./search-hCg_ZYiQ.js";import"./history-DDn4Yntz.js";import"./save-TFqXn0Mr.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=xe("UsersRoundIcon",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),Fe={key:0,class:"mt-6 flex justify-center"},Ie={class:"flex items-center gap-2"},Be=["innerHTML"],Ue=H({__name:"Pagination",props:{links:{}},setup(h){const c=f=>({"pagination.previous":"&laquo; Anterior","pagination.next":"Siguiente &raquo;","&laquo; Previous":"&laquo; Anterior","Next &raquo;":"Siguiente &raquo;",Previous:"Anterior",Next:"Siguiente","...":"..."})[f]||f,C=f=>{f&&de.get(f)};return(f,I)=>f.links&&f.links.length>3?(r(),m("div",Fe,[s("div",Ie,[(r(!0),m(L,null,D(f.links,g=>(r(),m(L,{key:g.label},[g.url?(r(),y(t(x),{key:0,variant:g.active?"default":"outline",size:"sm",onClick:O=>C(g.url),innerHTML:c(g.label)},null,8,["variant","onClick","innerHTML"])):(r(),m("span",{key:1,class:"px-3 py-1 text-sm text-muted-foreground cursor-not-allowed",innerHTML:c(g.label)},null,8,Be))],64))),128))])])):b("",!0)}}),ie=H({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(h){const c=h;return(C,f)=>(r(),y(t(Ve),Se(Ee(c)),{default:o(()=>[$e(C.$slots,"default")]),_:3},16))}});function De(h){if(!h)return"";const c=document.createElement("DIV");return c.innerHTML=h,(c.textContent||c.innerText||"").trim()}const He={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Oe={class:"flex items-center justify-between"},ze={class:"flex gap-3 items-center"},Je={key:0,class:"mb-4"},Ke={class:"flex items-start gap-3"},Xe={class:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30"},Ge={class:"flex-1"},Qe={class:"flex items-center gap-2"},Ye={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},Ze={key:0,class:"mt-2 flex flex-wrap gap-2"},es={class:"font-medium"},ss={class:"ml-1 opacity-75"},ts={key:0,class:"text-center py-8"},as={key:1,class:"rounded-md border"},os={class:"font-medium"},ns={class:"text-sm text-muted-foreground"},ls={class:"text-xs text-muted-foreground"},rs={key:0},is={class:"font-medium text-sm"},ds={key:1,class:"text-sm text-muted-foreground"},us={key:0},cs={class:"text-sm"},ms={class:"text-xs text-muted-foreground"},fs={key:1,class:"text-sm text-muted-foreground"},ps={class:"text-sm"},_s={key:0,class:"max-w-xs space-y-1"},vs={class:"text-sm text-blue-800 dark:text-blue-200 truncate"},gs={class:"flex items-center gap-2"},xs={key:0,class:"text-xs text-muted-foreground"},bs={key:1,class:"text-sm text-muted-foreground"},ys=["href"],hs={class:"space-y-6"},ks={class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},ws={class:"flex items-center gap-2 mb-3"},Cs={class:"grid grid-cols-2 gap-3 text-sm"},$s={class:"flex justify-between"},Ss={class:"font-medium text-orange-900"},Es={class:"flex justify-between"},As={class:"font-medium text-orange-900"},js={class:"flex justify-between"},Ns={class:"font-medium text-orange-900"},Ts={class:"flex justify-between"},Ps={class:"font-medium text-red-700"},Ms={class:"space-y-4"},Vs={class:"space-y-3"},qs={class:"flex items-center space-x-3"},Ls={class:"flex items-center gap-2"},Rs={class:"text-sm text-muted-foreground ml-1"},Ws={class:"flex items-center space-x-3"},Fs={class:"flex items-center gap-2"},Is={class:"text-sm text-muted-foreground ml-1"},Bs={class:"space-y-6"},Us={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ds={class:"flex items-center gap-2 mb-3"},Hs={class:"grid grid-cols-2 gap-3 text-sm"},Os={class:"flex justify-between"},zs={class:"font-medium text-blue-900"},Js={class:"flex justify-between"},Ks={class:"font-medium text-blue-900"},Xs={class:"flex justify-between"},Gs={class:"font-medium text-blue-900"},Qs={class:"flex justify-between"},Ys={class:"font-medium text-red-700"},Zs={class:"space-y-4"},et={class:"space-y-3"},st={class:"flex items-center space-x-3"},tt={class:"flex items-center gap-2"},at={class:"text-sm text-muted-foreground ml-1"},ot={class:"flex items-center space-x-3"},nt={class:"flex items-center gap-2"},lt={class:"text-sm text-muted-foreground ml-1"},zt=H({__name:"Index",props:{candidaturas:{},filters:{},filterFieldsConfig:{},segmentInfo:{}},setup(h){var z,J;const c=h,C=Ae(),f=((z=C.props.auth)==null?void 0:z.permissions)||[],I=((J=C.props.auth)==null?void 0:J.isSuperAdmin)||!1,g=d=>I?!0:f.includes(d)||f.includes("*"),O=[{title:"Admin",href:"/admin/dashboard"},{title:"Candidaturas",href:"#"}],R=v({estado:c.filters.estado||"null",search:c.filters.search||""});je(R,d=>{const e=Object.entries(d).reduce((u,[n,V])=>(u[n]=V==="null"?"":V,u),{});de.get("/admin/candidaturas",e,{preserveState:!0,replace:!0})},{deep:!0});const ue={fields:c.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["user.name","user.email","user.documento_identidad"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},{route:$}=window,ce=v("todos"),me=()=>{var d;if(c.filters.advanced_filters)try{const u=(d=JSON.parse(c.filters.advanced_filters).conditions)==null?void 0:d.find(n=>n.field==="candidaturas.estado"&&n.operator==="equals");if(u)return u.value}catch{}return"todos"};ce.value=me();const S=v(!1),E=v(!1),A=v(!0),j=v(!0),p=v({total_borradores:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),N=v(!1),T=v(!1),P=v(!0),M=v(!0),_=v({total_pendientes:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),fe=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),pe=async()=>{try{const e=await(await fetch($("admin.candidaturas.estadisticas-borradores"))).json();p.value=e,S.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas en borrador")}},_e=async()=>{try{const e=await(await fetch($("admin.candidaturas.estadisticas-pendientes"))).json();_.value=e,N.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas pendientes")}},ve=async()=>{var d;if(!P.value&&!M.value){alert("Debes seleccionar al menos un tipo de notificación (email o WhatsApp)");return}T.value=!0;try{const u=await(await fetch($("admin.candidaturas.enviar-notificaciones"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:P.value,incluir_whatsapp:M.value})})).json();u.success?(N.value=!1,alert(`Notificaciones enviadas exitosamente!

• Candidaturas procesadas: ${u.contadores.total_candidaturas}
• Correos programados: ${u.contadores.emails_enviados}
• WhatsApps programados: ${u.contadores.whatsapps_enviados}
• Errores: ${u.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${u.message}`)}catch(e){console.error("Error enviando notificaciones:",e),alert("Error enviando notificaciones. Por favor intenta de nuevo.")}finally{T.value=!1}},ge=async()=>{var d;if(!A.value&&!j.value){alert("Debes seleccionar al menos un tipo de recordatorio (email o WhatsApp)");return}E.value=!0;try{const u=await(await fetch($("admin.candidaturas.enviar-recordatorios"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:A.value,incluir_whatsapp:j.value})})).json();u.success?(S.value=!1,alert(`Recordatorios enviados exitosamente!

• Candidaturas procesadas: ${u.contadores.total_candidaturas}
• Correos programados: ${u.contadores.emails_enviados}
• WhatsApps programados: ${u.contadores.whatsapps_enviados}
• Errores: ${u.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${u.message}`)}catch(e){console.error("Error enviando recordatorios:",e),alert("Error enviando recordatorios. Por favor intenta de nuevo.")}finally{E.value=!1}};return(d,e)=>(r(),m(L,null,[a(t(Ne),{title:"Candidaturas"}),a(Ce,{breadcrumbs:O},{default:o(()=>{var u;return[s("div",He,[s("div",Oe,[e[12]||(e[12]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Candidaturas"),s("p",{class:"text-muted-foreground"}," Revisa y gestiona los perfiles de candidatura de los usuarios ")],-1)),s("div",ze,[e[11]||(e[11]=s("div",{class:"h-8 w-px bg-border"},null,-1)),g("candidaturas.notificaciones")?(r(),y(t(x),{key:0,onClick:_e,variant:"outline",class:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 hover:border-blue-300"},{default:o(()=>[a(t(q),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=i(" Notificaciones "))]),_:1})):b("",!0),g("candidaturas.recordatorios")?(r(),y(t(x),{key:1,onClick:pe,variant:"outline",class:"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 hover:border-orange-300"},{default:o(()=>[a(t(U),{class:"mr-2 h-4 w-4"}),e[9]||(e[9]=i(" Recordatorios "))]),_:1})):b("",!0),g("candidaturas.configuracion")?(r(),y(t(Te),{key:2,href:"/admin/candidaturas/configuracion"},{default:o(()=>[a(t(x),null,{default:o(()=>[a(t(ke),{class:"mr-2 h-4 w-4"}),e[10]||(e[10]=i(" Configuración "))]),_:1})]),_:1})):b("",!0)])]),(u=c.segmentInfo)!=null&&u.applied?(r(),m("div",Je,[a(t(X),{class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:o(()=>[a(t(G),{class:"p-4"},{default:o(()=>[s("div",Ke,[s("div",Xe,[a(t(We),{class:"h-5 w-5 text-blue-600 dark:text-blue-400"})]),s("div",Ge,[s("div",Qe,[e[14]||(e[14]=s("h3",{class:"font-semibold text-sm text-blue-900 dark:text-blue-100"}," Filtro de Segmento Activo ",-1)),a(t(ie),null,{default:o(()=>[a(t(Y),null,{default:o(()=>[a(t(Z),null,{default:o(()=>[a(t(qe),{class:"h-4 w-4 text-blue-600 dark:text-blue-400"})]),_:1}),a(t(ee),null,{default:o(()=>e[13]||(e[13]=[s("p",{class:"max-w-xs"}," Tu rol tiene un segmento asignado que filtra automáticamente los datos que puedes ver. Los filtros adicionales se aplicarán sobre este conjunto de datos. ",-1)])),_:1})]),_:1})]),_:1})]),s("p",Ye,l(c.segmentInfo.message),1),c.segmentInfo.segments.length>0?(r(),m("div",Ze,[(r(!0),m(L,null,D(c.segmentInfo.segments,n=>(r(),y(t(B),{key:n.id,variant:"secondary",class:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},{default:o(()=>[s("span",es,l(n.name),1),s("span",ss,"("+l(n.user_count)+" usuarios)",1)]),_:2},1024))),128))])):b("",!0)])])]),_:1})]),_:1})])):b("",!0),a(Me,{config:ue,route:t($)("admin.candidaturas.index"),"initial-filters":{quickSearch:R.value.search,rootGroup:R.value.advanced_filters?JSON.parse(R.value.advanced_filters):void 0}},null,8,["route","initial-filters"]),a(t(X),null,{default:o(()=>[a(t(G),{class:"pt-6"},{default:o(()=>[d.candidaturas.data.length===0?(r(),m("div",ts,[a(t(we),{class:"mx-auto h-12 w-12 text-muted-foreground"}),e[15]||(e[15]=s("h3",{class:"mt-4 text-lg font-medium"},"No hay candidaturas",-1)),e[16]||(e[16]=s("p",{class:"text-muted-foreground"},"No se encontraron candidaturas con los filtros aplicados.",-1))])):(r(),m("div",as,[a(t(be),null,{default:o(()=>[a(t(ye),null,{default:o(()=>[a(t(Q),null,{default:o(()=>[a(t(k),null,{default:o(()=>e[17]||(e[17]=[i("Usuario")])),_:1}),a(t(k),null,{default:o(()=>e[18]||(e[18]=[i("Convocatoria")])),_:1}),a(t(k),null,{default:o(()=>e[19]||(e[19]=[i("Estado")])),_:1}),a(t(k),null,{default:o(()=>e[20]||(e[20]=[i("Datos Completados")])),_:1}),a(t(k),null,{default:o(()=>e[21]||(e[21]=[i("Actualizado")])),_:1}),a(t(k),null,{default:o(()=>e[22]||(e[22]=[i("Comentarios")])),_:1}),a(t(k),{class:"text-right"},{default:o(()=>e[23]||(e[23]=[i("Acciones")])),_:1})]),_:1})]),_:1}),a(t(he),null,{default:o(()=>[(r(!0),m(L,null,D(d.candidaturas.data,n=>(r(),y(t(Q),{key:n.id},{default:o(()=>[a(t(w),null,{default:o(()=>[s("div",null,[s("p",os,l(n.usuario.name),1),s("p",ns,l(n.usuario.email),1),s("p",ls,l(n.usuario.documento_identidad||"Sin documento"),1)])]),_:2},1024),a(t(w),null,{default:o(()=>[n.convocatoria?(r(),m("div",rs,[s("p",is,l(n.convocatoria.nombre),1)])):(r(),m("span",ds,"Sin convocatoria"))]),_:2},1024),a(t(w),null,{default:o(()=>[a(t(B),{class:Pe(n.estado_color)},{default:o(()=>[i(l(n.estado_label),1)]),_:2},1032,["class"])]),_:2},1024),a(t(w),null,{default:o(()=>[n.total_campos>0?(r(),m("div",us,[s("p",cs,l(n.campos_llenados)+" / "+l(n.total_campos),1),s("p",ms," ("+l(n.porcentaje_completado)+"%) ",1)])):(r(),m("span",fs,"Sin configuración"))]),_:2},1024),a(t(w),null,{default:o(()=>[s("p",ps,l(fe(n.updated_at)),1)]),_:2},1024),a(t(w),null,{default:o(()=>{var V;return[n.comentario_actual||n.comentarios_admin?(r(),m("div",_s,[s("p",vs,l(t(De)(((V=n.comentario_actual)==null?void 0:V.comentario)||n.comentarios_admin||"")),1),s("div",gs,[n.comentario_actual?(r(),m("span",xs,l(n.comentario_actual.fecha_relativa),1)):b("",!0),n.total_comentarios&&n.total_comentarios>1?(r(),y(t(B),{key:1,variant:"secondary",class:"text-xs"},{default:o(()=>[i(" +"+l(n.total_comentarios-1)+" más ",1)]),_:2},1024)):b("",!0)])])):(r(),m("span",bs,"-"))]}),_:2},1024),a(t(w),{class:"text-right"},{default:o(()=>[a(t(ie),null,{default:o(()=>[a(t(Y),null,{default:o(()=>[a(t(Z),{asChild:""},{default:o(()=>[s("a",{href:`/admin/candidaturas/${n.id}`,target:"_blank",rel:"noopener noreferrer"},[a(t(x),{variant:"outline",size:"sm"},{default:o(()=>[a(t(Le),{class:"mr-2 h-4 w-4"}),e[24]||(e[24]=i(" Ver candidatura ")),a(t(Re),{class:"ml-1 h-3 w-3"})]),_:1})],8,ys)]),_:2},1024),a(t(ee),null,{default:o(()=>e[25]||(e[25]=[s("p",null,"Abrir en nueva ventana",-1)])),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),a(Ue,{links:d.candidaturas.links},null,8,["links"])]),_:1})]),_:1}),a(t(se),{open:S.value,"onUpdate:open":e[3]||(e[3]=n=>S.value=n)},{default:o(()=>[a(t(te),{class:"sm:max-w-md"},{default:o(()=>[a(t(ae),null,{default:o(()=>[a(t(oe),{class:"flex items-center gap-2"},{default:o(()=>[a(t(U),{class:"h-5 w-5 text-orange-600"}),e[26]||(e[26]=i(" Enviar Recordatorios Masivos "))]),_:1}),a(t(ne),null,{default:o(()=>e[27]||(e[27]=[i(" Envía recordatorios por correo y/o WhatsApp a todas las candidaturas en estado borrador. ")])),_:1})]),_:1}),s("div",hs,[s("div",ks,[s("div",ws,[a(t(K),{class:"h-5 w-5 text-orange-600"}),e[28]||(e[28]=s("h3",{class:"font-medium text-orange-900"},"Candidaturas en Borrador",-1))]),s("div",Cs,[s("div",$s,[e[29]||(e[29]=s("span",{class:"text-orange-700"},"Total en borrador:",-1)),s("span",Ss,l(p.value.total_borradores),1)]),s("div",Es,[e[30]||(e[30]=s("span",{class:"text-orange-700"},"Con email:",-1)),s("span",As,l(p.value.con_email),1)]),s("div",js,[e[31]||(e[31]=s("span",{class:"text-orange-700"},"Con teléfono:",-1)),s("span",Ns,l(p.value.con_telefono),1)]),s("div",Ts,[e[32]||(e[32]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",Ps,l(Math.max(0,p.value.total_borradores-Math.max(p.value.con_email,p.value.con_telefono))),1)])])]),s("div",Ms,[e[35]||(e[35]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de recordatorio:",-1)),s("div",Vs,[s("div",qs,[a(t(F),{id:"include-email",modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=n=>A.value=n),disabled:p.value.con_email===0},null,8,["modelValue","disabled"]),s("div",Ls,[a(t(q),{class:"h-4 w-4 text-blue-600"}),a(t(W),{for:"include-email",class:"flex-1"},{default:o(()=>[e[33]||(e[33]=i(" Correo electrónico ")),s("span",Rs," ("+l(p.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",Ws,[a(t(F),{id:"include-whatsapp",modelValue:j.value,"onUpdate:modelValue":e[1]||(e[1]=n=>j.value=n),disabled:p.value.con_telefono===0},null,8,["modelValue","disabled"]),s("div",Fs,[a(t(re),{class:"h-4 w-4 text-green-600"}),a(t(W),{for:"include-whatsapp",class:"flex-1"},{default:o(()=>[e[34]||(e[34]=i(" WhatsApp ")),s("span",Is," ("+l(p.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[36]||(e[36]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Los mensajes se envían respetando los límites de velocidad configurados"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),a(t(le),null,{default:o(()=>[a(t(x),{variant:"outline",onClick:e[2]||(e[2]=n=>S.value=!1),disabled:E.value},{default:o(()=>e[37]||(e[37]=[i(" Cancelar ")])),_:1},8,["disabled"]),a(t(x),{onClick:ge,disabled:E.value||p.value.total_borradores===0||!A.value&&!j.value,class:"bg-orange-600 hover:bg-orange-700"},{default:o(()=>[a(t(U),{class:"mr-2 h-4 w-4"}),i(" "+l(E.value?"Enviando...":`Enviar Recordatorios (${p.value.total_borradores})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),a(t(se),{open:N.value,"onUpdate:open":e[7]||(e[7]=n=>N.value=n)},{default:o(()=>[a(t(te),{class:"sm:max-w-md"},{default:o(()=>[a(t(ae),null,{default:o(()=>[a(t(oe),{class:"flex items-center gap-2"},{default:o(()=>[a(t(q),{class:"h-5 w-5 text-blue-600"}),e[38]||(e[38]=i(" Enviar Notificaciones de Estado "))]),_:1}),a(t(ne),null,{default:o(()=>e[39]||(e[39]=[i(" Envía notificaciones por correo y/o WhatsApp a todas las candidaturas en estado pendiente de revisión. ")])),_:1})]),_:1}),s("div",Bs,[s("div",Us,[s("div",Ds,[a(t(K),{class:"h-5 w-5 text-blue-600"}),e[40]||(e[40]=s("h3",{class:"font-medium text-blue-900"},"Candidaturas Pendientes de Revisión",-1))]),s("div",Hs,[s("div",Os,[e[41]||(e[41]=s("span",{class:"text-blue-700"},"Total pendientes:",-1)),s("span",zs,l(_.value.total_pendientes),1)]),s("div",Js,[e[42]||(e[42]=s("span",{class:"text-blue-700"},"Con email:",-1)),s("span",Ks,l(_.value.con_email),1)]),s("div",Xs,[e[43]||(e[43]=s("span",{class:"text-blue-700"},"Con teléfono:",-1)),s("span",Gs,l(_.value.con_telefono),1)]),s("div",Qs,[e[44]||(e[44]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",Ys,l(Math.max(0,_.value.total_pendientes-Math.max(_.value.con_email,_.value.con_telefono))),1)])])]),s("div",Zs,[e[47]||(e[47]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de notificación:",-1)),s("div",et,[s("div",st,[a(t(F),{id:"include-email-notif",modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=n=>P.value=n),disabled:_.value.con_email===0},null,8,["modelValue","disabled"]),s("div",tt,[a(t(q),{class:"h-4 w-4 text-blue-600"}),a(t(W),{for:"include-email-notif",class:"flex-1"},{default:o(()=>[e[45]||(e[45]=i(" Correo electrónico ")),s("span",at," ("+l(_.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",ot,[a(t(F),{id:"include-whatsapp-notif",modelValue:M.value,"onUpdate:modelValue":e[5]||(e[5]=n=>M.value=n),disabled:_.value.con_telefono===0},null,8,["modelValue","disabled"]),s("div",nt,[a(t(re),{class:"h-4 w-4 text-green-600"}),a(t(W),{for:"include-whatsapp-notif",class:"flex-1"},{default:o(()=>[e[46]||(e[46]=i(" WhatsApp ")),s("span",lt," ("+l(_.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[48]||(e[48]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Se notificará que la candidatura fue recibida exitosamente"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),a(t(le),null,{default:o(()=>[a(t(x),{variant:"outline",onClick:e[6]||(e[6]=n=>N.value=!1),disabled:T.value},{default:o(()=>e[49]||(e[49]=[i(" Cancelar ")])),_:1},8,["disabled"]),a(t(x),{onClick:ve,disabled:T.value||_.value.total_pendientes===0||!P.value&&!M.value,class:"bg-blue-600 hover:bg-blue-700"},{default:o(()=>[a(t(q),{class:"mr-2 h-4 w-4"}),i(" "+l(T.value?"Enviando...":`Enviar Notificaciones (${_.value.total_pendientes})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1})],64))}});export{zt as default};
