import{d as j,r as H,c as C,i as n,e as i,f as e,u as a,p as z,w as d,g as s,b as h,j as c,M as B,W as q,h as l,P as y,n as S,t as o,F as D,k as N,Q as P,q as F}from"./app-DiTimFRW.js";import{_ as $}from"./index-B3yR8zRW.js";import{_}from"./createLucideIcon-Dk3zluZI.js";import{_ as m,c as f,a as b,b as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-Do8VxmPU.js";import{_ as O}from"./Label.vue_vue_type_script_setup_true_lang-4iKq4xxO.js";import{_ as T}from"./UserLayout.vue_vue_type_script_setup_true_lang-CguWVpgr.js";import{_ as U}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-DXfVdIQF.js";import{A as W}from"./arrow-left-BAAHIbfO.js";import{S as k}from"./square-pen-C0PlqwCm.js";import{M as I}from"./message-square-CC-2hdEw.js";import{U as Q}from"./user-CUHyzddX.js";import{C as R}from"./clock-D_txVMHF.js";import{H as G}from"./history-gkSXVp9r.js";import{e as J,C as K}from"./SelectValue.vue_vue_type_script_setup_true_lang-BMVrxUBm.js";import"./index-C21nUFg-.js";import"./Input.vue_vue_type_script_setup_true_lang-DV6Pygaj.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-CxRmp7hj.js";import"./index-DxL_b2wa.js";import"./floating-ui.vue-D_og6XPx.js";import"./x-B8GY1MI9.js";import"./index-DFMQtHIN.js";import"./shield-OXelDVUT.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DkvdjrY7.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DUoOhpVe.js";import"./VisuallyHidden-DXFAgcH_.js";import"./PopperContent-B6hdrYo4.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-lBNHpRAr.js";import"./index-EWMIzLdg.js";import"./circle-alert-DDbs2Nt7.js";import"./map-pin-BvqPixGK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D4VxpJOB.js";import"./square-check-big-DDoqWsQW.js";import"./file-text-C-sOenCV.js";import"./users-CFfVU7pw.js";import"./index-BI0ShkNY.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Bmoh90Oq.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BA1MX_Wx.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-B6CqGrF9.js";import"./eye-B_Z8OHgz.js";import"./check-BJ_4A3-M.js";import"./nullish-CHIgUVhi.js";const X={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Y={class:"flex items-center justify-between"},Z={class:"flex gap-2"},tt={class:"flex items-center justify-between"},at={class:"flex items-center gap-4"},et={class:"flex items-center gap-2"},st={class:"text-sm text-muted-foreground"},rt={class:"text-right text-sm text-muted-foreground"},dt={key:0},it=["innerHTML"],ot={key:0,class:"text-center py-8"},nt={key:1,class:"space-y-6"},lt={class:"grid gap-2 md:grid-cols-3"},ut={class:"md:col-span-1"},ct={key:0,class:"text-red-500"},mt={key:0,class:"text-xs text-muted-foreground mt-1"},ft={class:"md:col-span-2"},pt={class:"min-h-[2rem] flex items-center"},_t={class:"text-muted-foreground"},bt={class:"mb-4"},gt={class:"grid gap-4 md:grid-cols-3"},ht={class:"flex items-center gap-2"},xt={class:"text-xs text-muted-foreground"},vt={key:0,class:"text-xs text-green-600 dark:text-green-400"},yt={key:1,class:"text-xs text-orange-600 dark:text-orange-400"},kt={key:2,class:"text-xs text-blue-600 dark:text-blue-400"},wt={key:0},Ct={key:1,class:"text-center"},St={key:2,class:"text-center"},Dt={class:"text-xs space-y-1"},$t={class:"font-medium"},At={class:"font-medium"},Et={key:0},Lt={class:"font-medium"},ha=j({__name:"Show",props:{candidatura:{},configuracion_campos:{},canEditOwn:{type:Boolean},canViewPublic:{type:Boolean}},setup(A){const x=A,E=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mi Candidatura",href:"/miembro/candidaturas"},{title:"Ver Candidatura",href:"#"}],p=H(!1),v=C(()=>x.candidatura.estado==="borrador"||x.candidatura.estado==="rechazado"),L=C(()=>!!x.candidatura.comentarios_admin),V=()=>{p.value=!p.value},M=(r,t)=>{if(!t)return"No especificado";if(r.type==="checkbox")return Array.isArray(t)?t.join(", "):t;if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}/.test(t))try{return new Date(t).toLocaleDateString("es-ES")}catch{return t}return Array.isArray(t)?t.join(", "):typeof t=="number"?t.toString():String(t)},w=r=>new Date(r).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(r,t)=>(i(),n(D,null,[e(a(z),{title:"Mi Candidatura"}),e(T,{breadcrumbs:E},{default:d(()=>[s("div",X,[s("div",Y,[t[3]||(t[3]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Vista detallada de tu perfil de candidatura ")],-1)),s("div",Z,[e(a(_),{variant:"outline",onClick:t[0]||(t[0]=u=>a(q).visit("/miembro/candidaturas"))},{default:d(()=>[e(a(W),{class:"mr-2 h-4 w-4"}),t[1]||(t[1]=l(" Volver ",-1))]),_:1}),v.value?(i(),h(a(y),{key:0,href:`/miembro/candidaturas/${r.candidatura.id}/edit`},{default:d(()=>[e(a(_),null,{default:d(()=>[e(a(k),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=l(" Editar ",-1))]),_:1})]),_:1},8,["href"])):c("",!0)])]),e(a(m),null,{default:d(()=>[e(a(f),{class:"p-6"},{default:d(()=>[s("div",tt,[s("div",at,[s("div",et,[e(a($),{class:S([r.candidatura.estado_color,"text-sm"])},{default:d(()=>[l(o(r.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",st," Versión "+o(r.candidatura.version),1)])]),s("div",rt,[s("p",null,"Creada: "+o(w(r.candidatura.created_at)),1),s("p",null,"Actualizada: "+o(w(r.candidatura.updated_at)),1),r.candidatura.fecha_aprobacion?(i(),n("p",dt," Aprobada: "+o(r.candidatura.fecha_aprobacion),1)):c("",!0)])])]),_:1})]),_:1}),L.value?(i(),h(a(m),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:d(()=>[e(a(b),null,{default:d(()=>[e(a(g),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:d(()=>[e(a(I),{class:"h-5 w-5"}),t[4]||(t[4]=l(" Comentarios de la comisión ",-1))]),_:1})]),_:1}),e(a(f),null,{default:d(()=>[s("div",{class:"text-blue-700 dark:text-blue-300 prose prose-sm max-w-none",innerHTML:r.candidatura.comentarios_admin},null,8,it)]),_:1})]),_:1})):c("",!0),e(a(m),null,{default:d(()=>[e(a(b),null,{default:d(()=>[e(a(g),{class:"flex items-center gap-2"},{default:d(()=>[e(a(Q),{class:"h-5 w-5"}),t[5]||(t[5]=l(" Información de Candidatura ",-1))]),_:1})]),_:1}),e(a(f),null,{default:d(()=>[!r.candidatura.formulario_data||Object.keys(r.candidatura.formulario_data).length===0?(i(),n("div",ot,[e(a(R),{class:"mx-auto h-12 w-12 text-yellow-500"}),t[7]||(t[7]=s("h3",{class:"mt-4 text-lg font-medium"},"Candidatura vacía",-1)),t[8]||(t[8]=s("p",{class:"text-muted-foreground mb-4"},"Aún no has completado tu perfil de candidatura.",-1)),v.value?(i(),h(a(y),{key:0,href:`/miembro/candidaturas/${r.candidatura.id}/edit`},{default:d(()=>[e(a(_),null,{default:d(()=>[e(a(k),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=l(" Completar Candidatura ",-1))]),_:1})]),_:1},8,["href"])):c("",!0)])):(i(),n("div",nt,[(i(!0),n(D,null,N(r.configuracion_campos,u=>(i(),n("div",{key:u.id,class:"border-b pb-4 last:border-b-0"},[s("div",lt,[s("div",ut,[e(a(O),{class:"text-sm font-medium flex items-center gap-1"},{default:d(()=>[l(o(u.title)+" ",1),u.required?(i(),n("span",ct,"*")):c("",!0)]),_:2},1024),u.description?(i(),n("p",mt,o(u.description),1)):c("",!0)]),s("div",ft,[s("div",pt,[s("p",_t,o(M(u,r.candidatura.formulario_data[u.id])),1)])])])]))),128))]))]),_:1})]),_:1}),B(s("div",bt,[e(U,{"candidatura-id":r.candidatura.id,"version-actual":r.candidatura.version,"is-admin":!1},null,8,["candidatura-id","version-actual"])],512),[[P,p.value]]),s("div",gt,[e(a(m),{class:"h-fit"},{default:d(()=>[e(a(b),{class:"pb-3"},{default:d(()=>[e(a(g),{class:"text-base"},{default:d(()=>[...t[9]||(t[9]=[l("Estado",-1)])]),_:1})]),_:1}),e(a(f),{class:"space-y-2"},{default:d(()=>[s("div",ht,[e(a($),{class:S([r.candidatura.estado_color,"text-xs"])},{default:d(()=>[l(o(r.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",xt,"v"+o(r.candidatura.version),1)]),r.candidatura.estado==="aprobado"?(i(),n("div",vt," ✓ Lista para convocatorias ")):r.candidatura.estado==="rechazado"?(i(),n("div",yt," Requiere corrección ")):(i(),n("div",kt,o(r.candidatura.formulario_data&&Object.keys(r.candidatura.formulario_data).length>0?"En revisión":"Pendiente de completar"),1))]),_:1})]),_:1}),e(a(m),{class:"h-fit"},{default:d(()=>[e(a(b),{class:"pb-3"},{default:d(()=>[e(a(g),{class:"text-base"},{default:d(()=>[...t[10]||(t[10]=[l("Acciones",-1)])]),_:1})]),_:1}),e(a(f),{class:"space-y-2"},{default:d(()=>[e(a(_),{onClick:V,variant:"outline",class:"w-full"},{default:d(()=>[e(a(G),{class:"mr-2 h-4 w-4"}),l(" "+o(p.value?"Ocultar":"Mostrar")+" Historial de Cambios ",1),(i(),h(F(p.value?a(J):a(K)),{class:"ml-auto h-4 w-4"}))]),_:1}),v.value?(i(),n("div",wt,[e(a(y),{href:`/miembro/candidaturas/${r.candidatura.id}/edit`},{default:d(()=>[e(a(_),{class:"w-full"},{default:d(()=>[e(a(k),{class:"mr-2 h-4 w-4"}),l(" "+o(r.candidatura.estado==="rechazado"?"Corregir":"Editar"),1)]),_:1})]),_:1},8,["href"])])):r.candidatura.estado==="aprobado"?(i(),n("div",Ct,[...t[11]||(t[11]=[s("p",{class:"text-xs text-green-600 dark:text-green-400 font-medium"}," ✓ Lista para usar ",-1)])])):(i(),n("div",St,[...t[12]||(t[12]=[s("p",{class:"text-xs text-blue-600 dark:text-blue-400 font-medium"}," ⏳ En revisión ",-1)])]))]),_:1})]),_:1}),e(a(m),{class:"h-fit"},{default:d(()=>[e(a(b),{class:"pb-3"},{default:d(()=>[e(a(g),{class:"text-base"},{default:d(()=>[...t[13]||(t[13]=[l("Configuración actual",-1)])]),_:1})]),_:1}),e(a(f),{class:"space-y-2"},{default:d(()=>[s("div",Dt,[s("div",null,[t[14]||(t[14]=s("span",{class:"text-muted-foreground"},"Creada:",-1)),s("p",$t,o(new Date(r.candidatura.created_at).toLocaleDateString("es-ES")),1)]),s("div",null,[t[15]||(t[15]=s("span",{class:"text-muted-foreground"},"Actualizada:",-1)),s("p",At,o(new Date(r.candidatura.updated_at).toLocaleDateString("es-ES")),1)]),r.candidatura.fecha_aprobacion?(i(),n("div",Et,[t[16]||(t[16]=s("span",{class:"text-muted-foreground"},"Aprobada:",-1)),s("p",Lt,o(r.candidatura.fecha_aprobacion),1)])):c("",!0)])]),_:1})]),_:1})])])]),_:1})],64))}});export{ha as default};
