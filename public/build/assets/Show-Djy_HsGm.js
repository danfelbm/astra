import{_ as Ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BAX2dDyG.js";import{d as ye,r as q,c as De,i as c,e as i,j as f,f as t,g as a,h as d,u as e,t as m,F as U,k as I,w as s,b as p,n as P,p as Pe,P as Me,W as A}from"./app-Dt2sukkq.js";import{c as y,_ as h,a as x,b as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3D16Ztn.js";import{_ as me}from"./CardDescription.vue_vue_type_script_setup_true_lang-CpG721w4.js";import{_ as k}from"./createLucideIcon-ADYiFz1p.js";import{_ as v}from"./index-DZUQ23bj.js";import{_ as ze}from"./Progress.vue_vue_type_script_setup_true_lang-DLCooW4I.js";import{_ as je,a as Se,b as ee,c as te}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BouWFRCo.js";import{_ as he,a as ve,b as be,c as $e,d as ke,e as xe,f as we,g as Ce}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Ce92_hjD.js";import{_ as Ne}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-B1SuRhlz.js";import{t as B}from"./index-CTkeagVR.js";import{_ as se,a as oe,b as ae,d as le,e as F,c as E}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Ch_KWbnG.js";import{C as fe}from"./circle-alert-Bny28mZr.js";import{C as R}from"./clock-CqEtmu8F.js";import{C as G}from"./circle-check-big-BTA6O6qg.js";import{F as ne}from"./file-text-CrhgvIVS.js";import{C as ce}from"./chevron-right-CkT1ue1I.js";import{C as pe}from"./SelectValue.vue_vue_type_script_setup_true_lang-XTf0O-lR.js";import{C as de}from"./calendar-CJYt0g6k.js";import{U as J}from"./user-Ca0ja34E.js";import{U as Ve}from"./users-ARKz5o5z.js";import{E as ie}from"./ellipsis-CYCkV2Pa.js";import{S as re}from"./square-pen-CgZnJT5s.js";import{T as K}from"./trash-2-Dt0_aFzc.js";import{f as Q,e as X}from"./es-BDPlFIsO.js";import{A as He}from"./arrow-left-CcnTTf_x.js";import{C as Te}from"./copy-YTl1p__t.js";import{T as Ae}from"./target-BlHWusLl.js";import{P as _e}from"./plus-C-zod1mM.js";import{p as ge}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Dk5ovgNn.js";import"./index-DYtBqwXi.js";import"./floating-ui.vue-DhUnkJfc.js";import"./x-BpcUsJXn.js";import"./Input.vue_vue_type_script_setup_true_lang-B3JXaiF3.js";import"./index-YHYyGAco.js";import"./index-C_zthh-d.js";import"./shield-Cyievtug.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-V01rVzxA.js";import"./VisuallyHidden-H3fpmsLx.js";import"./Label.vue_vue_type_script_setup_true_lang-DCZhrf2e.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CwNj20AO.js";import"./map-pin-D1rtVCPc.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-TmplCPgM.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BlnKZeFr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-CLsbi7q1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BcP5joWp.js";import"./tag-euMStffd.js";import"./vote-D-ho2Upj.js";import"./folder-open-BwpEZUDw.js";import"./send-D6GePUDU.js";import"./briefcase-CdnBkwVO.js";import"./megaphone-BWKT3hAA.js";import"./user-check-Cjdi1Rn1.js";import"./clipboard-list-DeVxPgd5.js";import"./mail-Cjqn3QRK.js";import"./message-square-CtTij58U.js";import"./external-link-GRGCmSzE.js";import"./panel-left-CvMlf3oX.js";import"./check-DzU-qwfx.js";import"./index-C5GM-A1h.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-BUHtT0jY.js";import"./utils-CveDOlSQ.js";import"./DialogTrigger-C_fC64hN.js";const Be={class:"space-y-6"},Fe={key:0,class:"space-y-6"},Re={key:0},Ue={class:"font-semibold mb-3 flex items-center gap-2"},qe={class:"space-y-2"},Ie={class:"flex items-start justify-between"},Le={class:"flex-1"},Oe={class:"flex items-center gap-2 mb-2"},We={class:"font-medium"},Ge={key:0,class:"ml-8 space-y-3"},Je={key:0,class:"text-sm text-muted-foreground"},Ke={class:"flex flex-wrap gap-4 text-sm"},Qe={class:"flex items-center gap-1 text-muted-foreground"},Xe={key:0,class:"flex items-center gap-1 text-muted-foreground"},Ye={key:1,class:"flex items-center gap-2"},Ze={class:"flex gap-1"},et={key:1},tt={class:"font-semibold mb-3 flex items-center gap-2"},st={class:"space-y-2"},ot={class:"flex items-start justify-between"},at={class:"flex-1"},lt={class:"flex items-center gap-2 mb-2"},it={class:"font-medium"},nt={key:0,class:"ml-8 space-y-3"},dt={key:0,class:"text-sm text-muted-foreground"},rt={class:"flex flex-wrap gap-4 text-sm"},ut={class:"flex items-center gap-1 text-muted-foreground"},mt={key:0,class:"flex items-center gap-1 text-muted-foreground"},ft={key:2},ct={class:"font-semibold mb-3 flex items-center gap-2"},pt={class:"space-y-2"},_t={class:"flex items-start justify-between"},gt={class:"flex-1"},yt={class:"flex items-center gap-2 mb-2"},ht={class:"font-medium line-through text-muted-foreground"},vt={class:"ml-7 space-y-1 text-sm text-muted-foreground"},bt={key:0,class:"flex items-center gap-1"},$t={key:1,class:"flex items-center gap-1"},kt={key:2,class:"italic mt-2"},xt={key:3,class:"text-center py-8"},wt=ye({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(Y,{emit:g}){const S=Y,M=g;q([]);const N=q([]),V=q(!1),z=q(null),b=De(()=>({pendientes:S.entregables.filter(r=>r.estado==="pendiente"),en_progreso:S.entregables.filter(r=>r.estado==="en_progreso"),completados:S.entregables.filter(r=>r.estado==="completado"),cancelados:S.entregables.filter(r=>r.estado==="cancelado")})),Z=r=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800",L=r=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-600",H=r=>r?Q(new Date(r),"dd MMM yyyy",{locale:X}):"Sin fecha",T=r=>r?Q(new Date(r),"dd MMM yyyy 'a las' HH:mm",{locale:X}):"-",C=r=>{if(!r)return null;const u=Math.ceil((new Date(r).getTime()-new Date().getTime())/(1e3*60*60*24));return u<0?`Vencido hace ${Math.abs(u)} días`:u===0?"Vence hoy":u===1?"Vence mañana":`${u} días`},O=r=>{const u=N.value.indexOf(r);u===-1?N.value.push(r):N.value.splice(u,1)},l=r=>N.value.includes(r),o=r=>{M("edit",r)},_=r=>{z.value=r,V.value=!0},D=()=>{z.value&&M("delete",z.value),V.value=!1,z.value=null},W=r=>{M("complete",r)},ue=(r,u)=>{M("update-status",r,u)};return(r,u)=>(i(),c("div",Be,[r.viewMode==="list"?(i(),c("div",Fe,[b.value.pendientes.length>0?(i(),c("div",Re,[a("h3",Ue,[t(e(fe),{class:"h-5 w-5 text-yellow-600"}),d(" Pendientes ("+m(b.value.pendientes.length)+") ",1)]),a("div",qe,[(i(!0),c(U,null,I(b.value.pendientes,n=>(i(),p(e(h),{key:n.id},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>{var j;return[a("div",Ie,[a("div",Le,[a("div",Oe,[t(e(k),{onClick:$=>O(n.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[l(n.id)?(i(),p(e(pe),{key:1,class:"h-4 w-4"})):(i(),p(e(ce),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),a("h4",We,m(n.nombre),1),t(e(v),{class:P(L(n.prioridad)),variant:"outline"},{default:s(()=>[d(m(n.prioridad),1)]),_:2},1032,["class"]),t(e(v),{class:P(Z(n.estado))},{default:s(()=>[d(m(n.estado),1)]),_:2},1032,["class"])]),l(n.id)?(i(),c("div",Ge,[n.descripcion?(i(),c("p",Je,m(n.descripcion),1)):f("",!0),a("div",Ke,[a("div",Qe,[t(e(de),{class:"h-4 w-4"}),a("span",null,m(H(n.fecha_inicio))+" - "+m(H(n.fecha_fin)),1)]),n.responsable?(i(),c("div",Xe,[t(e(J),{class:"h-4 w-4"}),a("span",null,m(n.responsable.name),1)])):f("",!0),C(n.fecha_fin)?(i(),c("div",{key:1,class:P(["flex items-center gap-1",{"text-red-600":(j=C(n.fecha_fin))==null?void 0:j.includes("Vencido")}])},[t(e(R),{class:"h-4 w-4"}),a("span",null,m(C(n.fecha_fin)),1)],2)):f("",!0)]),n.usuarios&&n.usuarios.length>0?(i(),c("div",Ye,[t(e(Ve),{class:"h-4 w-4 text-muted-foreground"}),a("div",Ze,[(i(!0),c(U,null,I(n.usuarios,$=>(i(),p(e(v),{key:$.id,variant:"secondary"},{default:s(()=>[d(m($.name),1)]),_:2},1024))),128))])])):f("",!0)])):f("",!0)]),r.canEdit||r.canDelete||r.canComplete?(i(),p(e(se),{key:0},{default:s(()=>[t(e(oe),{asChild:""},{default:s(()=>[t(e(k),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ie),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(ae),{align:"end"},{default:s(()=>[t(e(le),null,{default:s(()=>[...u[1]||(u[1]=[d("Acciones",-1)])]),_:1}),t(e(F)),r.canComplete?(i(),p(e(E),{key:0,onClick:$=>W(n)},{default:s(()=>[t(e(G),{class:"h-4 w-4 mr-2"}),u[2]||(u[2]=d(" Marcar como completado ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canEdit?(i(),p(e(E),{key:1,onClick:$=>ue(n,"en_progreso")},{default:s(()=>[t(e(R),{class:"h-4 w-4 mr-2"}),u[3]||(u[3]=d(" Marcar en progreso ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canEdit?(i(),p(e(E),{key:2,onClick:$=>o(n)},{default:s(()=>[t(e(re),{class:"h-4 w-4 mr-2"}),u[4]||(u[4]=d(" Editar ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canDelete?(i(),p(e(F),{key:3})):f("",!0),r.canDelete?(i(),p(e(E),{key:4,onClick:$=>_(n),class:"text-red-600"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),u[5]||(u[5]=d(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):f("",!0),b.value.en_progreso.length>0?(i(),c("div",et,[a("h3",tt,[t(e(R),{class:"h-5 w-5 text-blue-600"}),d(" En Progreso ("+m(b.value.en_progreso.length)+") ",1)]),a("div",st,[(i(!0),c(U,null,I(b.value.en_progreso,n=>(i(),p(e(h),{key:n.id,class:"border-l-4 border-l-blue-500"},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>{var j;return[a("div",ot,[a("div",at,[a("div",lt,[t(e(k),{onClick:$=>O(n.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[l(n.id)?(i(),p(e(pe),{key:1,class:"h-4 w-4"})):(i(),p(e(ce),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),a("h4",it,m(n.nombre),1),t(e(v),{class:P(L(n.prioridad)),variant:"outline"},{default:s(()=>[d(m(n.prioridad),1)]),_:2},1032,["class"]),t(e(v),{class:"bg-blue-100 text-blue-800"},{default:s(()=>[...u[6]||(u[6]=[d(" En Progreso ",-1)])]),_:1})]),l(n.id)?(i(),c("div",nt,[n.descripcion?(i(),c("p",dt,m(n.descripcion),1)):f("",!0),a("div",rt,[a("div",ut,[t(e(de),{class:"h-4 w-4"}),a("span",null,"Fecha límite: "+m(H(n.fecha_fin)),1)]),n.responsable?(i(),c("div",mt,[t(e(J),{class:"h-4 w-4"}),a("span",null,m(n.responsable.name),1)])):f("",!0),C(n.fecha_fin)?(i(),c("div",{key:1,class:P(["flex items-center gap-1",{"text-red-600":(j=C(n.fecha_fin))==null?void 0:j.includes("Vencido")}])},[t(e(R),{class:"h-4 w-4"}),a("span",null,m(C(n.fecha_fin)),1)],2)):f("",!0)])])):f("",!0)]),r.canEdit||r.canDelete||r.canComplete?(i(),p(e(se),{key:0},{default:s(()=>[t(e(oe),{asChild:""},{default:s(()=>[t(e(k),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ie),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(ae),{align:"end"},{default:s(()=>[t(e(le),null,{default:s(()=>[...u[7]||(u[7]=[d("Acciones",-1)])]),_:1}),t(e(F)),r.canComplete?(i(),p(e(E),{key:0,onClick:$=>W(n)},{default:s(()=>[t(e(G),{class:"h-4 w-4 mr-2"}),u[8]||(u[8]=d(" Marcar como completado ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canEdit?(i(),p(e(E),{key:1,onClick:$=>o(n)},{default:s(()=>[t(e(re),{class:"h-4 w-4 mr-2"}),u[9]||(u[9]=d(" Editar ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canDelete?(i(),p(e(F),{key:2})):f("",!0),r.canDelete?(i(),p(e(E),{key:3,onClick:$=>_(n),class:"text-red-600"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),u[10]||(u[10]=d(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):f("",!0),b.value.completados.length>0?(i(),c("div",ft,[a("h3",ct,[t(e(G),{class:"h-5 w-5 text-green-600"}),d(" Completados ("+m(b.value.completados.length)+") ",1)]),a("div",pt,[(i(!0),c(U,null,I(b.value.completados,n=>(i(),p(e(h),{key:n.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>[a("div",_t,[a("div",gt,[a("div",yt,[t(e(G),{class:"h-5 w-5 text-green-600"}),a("h4",ht,m(n.nombre),1),t(e(v),{class:"bg-green-100 text-green-800"},{default:s(()=>[...u[11]||(u[11]=[d(" Completado ",-1)])]),_:1})]),a("div",vt,[n.completado_at?(i(),c("div",bt,[t(e(R),{class:"h-3 w-3"}),a("span",null,"Completado: "+m(T(n.completado_at)),1)])):f("",!0),n.completado_por_usuario?(i(),c("div",$t,[t(e(J),{class:"h-3 w-3"}),a("span",null,"Por: "+m(n.completado_por_usuario.name),1)])):f("",!0),n.notas_completado?(i(),c("p",kt,' "'+m(n.notas_completado)+'" ',1)):f("",!0)])]),r.canEdit||r.canDelete?(i(),p(e(se),{key:0},{default:s(()=>[t(e(oe),{asChild:""},{default:s(()=>[t(e(k),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ie),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(ae),{align:"end"},{default:s(()=>[t(e(le),null,{default:s(()=>[...u[12]||(u[12]=[d("Acciones",-1)])]),_:1}),t(e(F)),r.canEdit?(i(),p(e(E),{key:0,onClick:j=>ue(n,"pendiente")},{default:s(()=>[t(e(fe),{class:"h-4 w-4 mr-2"}),u[13]||(u[13]=d(" Reabrir ",-1))]),_:2},1032,["onClick"])):f("",!0),r.canDelete?(i(),p(e(F),{key:1})):f("",!0),r.canDelete?(i(),p(e(E),{key:2,onClick:j=>_(n),class:"text-red-600"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),u[14]||(u[14]=d(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]),_:2},1024)]),_:2},1024))),128))])])):f("",!0),r.entregables.length===0?(i(),c("div",xt,[t(e(ne),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),u[15]||(u[15]=a("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):f("",!0)])):f("",!0),t(e(he),{open:V.value,"onUpdate:open":u[0]||(u[0]=n=>V.value=n)},{default:s(()=>[t(e(ve),null,{default:s(()=>[t(e(be),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...u[16]||(u[16]=[d("¿Estás seguro?",-1)])]),_:1}),t(e(ke),null,{default:s(()=>{var n;return[d(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+m((n=z.value)==null?void 0:n.nombre)+'". ',1)]}),_:1})]),_:1}),t(e(xe),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...u[17]||(u[17]=[d("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:D},{default:s(()=>[...u[18]||(u[18]=[d(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Ct={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Et={class:"flex items-center justify-between"},Dt={class:"text-2xl font-bold"},Pt={class:"text-muted-foreground"},Mt={class:"flex items-center gap-2"},zt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},jt={class:"text-2xl font-bold"},St={class:"text-2xl font-bold"},Nt={class:"text-xs text-muted-foreground"},Vt={class:"text-sm font-medium"},Ht={class:"text-sm font-medium"},Tt={key:0,class:"text-xs text-muted-foreground"},At={key:0},Bt={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Ft={class:"grid gap-4 md:grid-cols-2"},Rt={class:"text-sm text-muted-foreground"},Ut={class:"text-sm text-muted-foreground"},qt={class:"text-sm text-muted-foreground"},It={class:"space-y-2"},Lt={class:"flex items-center justify-between text-sm"},Ot={class:"flex items-center justify-between text-sm"},Wt={class:"flex items-center justify-between text-sm"},Gt={class:"space-y-3"},Jt={key:0},Kt={class:"text-sm text-muted-foreground"},Qt={key:1},Xt={class:"grid gap-4 md:grid-cols-2"},Yt={class:"font-semibold mb-1"},Zt={key:0,class:"text-red-500"},es={class:"text-sm text-muted-foreground"},ts={key:0,class:"text-xs text-muted-foreground mt-1"},ss={key:0,class:"text-center py-4"},os={class:"grid gap-4 md:grid-cols-2 text-sm"},as={class:"font-medium"},ls={class:"font-medium"},is={key:0},ns={class:"font-medium"},ds={key:1},rs={class:"font-medium"},us={class:"flex justify-between items-center"},wo=ye({__name:"Show",props:{hito:{},proyecto:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageEntregables:{type:Boolean},estadisticas:{},camposPersonalizados:{},valoresCamposPersonalizados:{}},setup(Y){const g=Y,S=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:g.proyecto.nombre,href:`/admin/proyectos/${g.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${g.proyecto.id}/hitos`},{title:g.hito.nombre,href:"#"}],M=q("detalles"),N=()=>{A.visit(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/edit`)},V=()=>{A.delete(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}`,{onSuccess:()=>{B.success("Hito eliminado exitosamente")},onError:()=>{B.error("Error al eliminar el hito")}})},z=()=>{A.post(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/duplicar`,{},{onSuccess:()=>{B.success("Hito duplicado exitosamente")},onError:()=>{B.error("Error al duplicar el hito")}})},b=()=>{A.visit(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/entregables/create`)},Z=l=>{A.visit(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/entregables/${l.id}/edit`)},L=l=>{A.delete(`/admin/proyectos/${g.proyecto.id}/hitos/${g.hito.id}/entregables/${l.id}`,{onSuccess:()=>{B.success("Entregable eliminado exitosamente")},onError:()=>{B.error("Error al eliminar el entregable")}})},H=l=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",T=l=>l?Q(ge(l),"dd MMM yyyy",{locale:X}):"No definida",C=l=>l?Q(ge(l),"dd MMM yyyy 'a las' HH:mm",{locale:X}):"No definida",O=(l,o)=>{var _;if(o==null||o==="")return"No especificado";switch(l.tipo){case"date":return T(o);case"checkbox":return o?"Sí":"No";case"select":case"radio":const D=(_=l.opciones)==null?void 0:_.find(W=>W.value===o);return(D==null?void 0:D.label)||o;default:return o}};return(l,o)=>(i(),c(U,null,[t(e(Pe),{title:`Hito: ${l.hito.nombre}`},null,8,["title"]),t(Ee,{breadcrumbs:S},{default:s(()=>[a("div",Ct,[a("div",Et,[a("div",null,[a("h1",Dt,m(l.hito.nombre),1),a("p",Pt,"Proyecto: "+m(l.proyecto.nombre),1)]),a("div",Mt,[t(e(Me),{href:`/admin/proyectos/${l.proyecto.id}/hitos`},{default:s(()=>[t(e(k),{variant:"outline",size:"sm"},{default:s(()=>[t(e(He),{class:"h-4 w-4 mr-2"}),o[1]||(o[1]=d(" Volver ",-1))]),_:1})]),_:1},8,["href"]),l.canEdit?(i(),p(e(k),{key:0,onClick:N,size:"sm",variant:"outline"},{default:s(()=>[t(e(re),{class:"h-4 w-4 mr-2"}),o[2]||(o[2]=d(" Editar ",-1))]),_:1})):f("",!0),t(e(k),{onClick:z,size:"sm",variant:"outline"},{default:s(()=>[t(e(Te),{class:"h-4 w-4 mr-2"}),o[3]||(o[3]=d(" Duplicar ",-1))]),_:1}),l.canDelete?(i(),p(e(he),{key:1},{default:s(()=>[t(e(Ne),{asChild:""},{default:s(()=>[t(e(k),{variant:"destructive",size:"sm"},{default:s(()=>[t(e(K),{class:"h-4 w-4 mr-2"}),o[4]||(o[4]=d(" Eliminar ",-1))]),_:1})]),_:1}),t(e(ve),null,{default:s(()=>[t(e(be),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...o[5]||(o[5]=[d("¿Estás seguro?",-1)])]),_:1}),t(e(ke),null,{default:s(()=>[...o[6]||(o[6]=[d(" Esta acción no se puede deshacer. Se eliminará permanentemente el hito y todos sus entregables asociados. ",-1)])]),_:1})]),_:1}),t(e(xe),null,{default:s(()=>[t(e(we),null,{default:s(()=>[...o[7]||(o[7]=[d("Cancelar",-1)])]),_:1}),t(e(Ce),{onClick:V},{default:s(()=>[...o[8]||(o[8]=[d(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0)])]),a("div",zt,[t(e(h),null,{default:s(()=>[t(e(x),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...o[9]||(o[9]=[d("Estado",-1)])]),_:1}),t(e(Ae),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[t(e(v),{class:P([H(l.hito.estado),"mt-1"])},{default:s(()=>[d(m(l.hito.estado),1)]),_:1},8,["class"])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(x),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...o[10]||(o[10]=[d("Progreso",-1)])]),_:1}),t(e(R),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",jt,m(l.hito.porcentaje_completado)+"%",1),t(e(ze),{value:l.hito.porcentaje_completado,class:"mt-2 h-1"},null,8,["value"])]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(x),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...o[11]||(o[11]=[d("Entregables",-1)])]),_:1}),t(e(ne),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",St,m(l.estadisticas.total_entregables),1),a("p",Nt,m(l.estadisticas.entregables_completados)+" completados ",1)]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(x),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...o[12]||(o[12]=[d("Fecha Fin",-1)])]),_:1}),t(e(de),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Vt,m(T(l.hito.fecha_fin)),1),l.estadisticas.dias_restantes!==null?(i(),c("p",{key:0,class:P(["text-xs",l.estadisticas.esta_vencido?"text-red-600":"text-muted-foreground"])},m(l.estadisticas.esta_vencido?`Vencido hace ${Math.abs(l.estadisticas.dias_restantes)} días`:`${l.estadisticas.dias_restantes} días restantes`),3)):f("",!0)]),_:1})]),_:1}),t(e(h),null,{default:s(()=>[t(e(x),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(w),{class:"text-sm font-medium"},{default:s(()=>[...o[13]||(o[13]=[d("Responsable",-1)])]),_:1}),t(e(J),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>{var _;return[a("div",Ht,m(((_=l.hito.responsable)==null?void 0:_.name)||"Sin asignar"),1),l.hito.responsable?(i(),c("p",Tt,m(l.hito.responsable.email),1)):f("",!0)]}),_:1})]),_:1})]),t(e(je),{modelValue:M.value,"onUpdate:modelValue":o[0]||(o[0]=_=>M.value=_),class:"flex-1"},{default:s(()=>[t(e(Se),null,{default:s(()=>[t(e(ee),{value:"detalles"},{default:s(()=>[...o[14]||(o[14]=[d("Detalles",-1)])]),_:1}),t(e(ee),{value:"entregables"},{default:s(()=>[o[15]||(o[15]=d(" Entregables ",-1)),t(e(v),{variant:"secondary",class:"ml-2"},{default:s(()=>[d(m(l.estadisticas.total_entregables),1)]),_:1})]),_:1}),t(e(ee),{value:"actividad"},{default:s(()=>[...o[16]||(o[16]=[d("Actividad",-1)])]),_:1})]),_:1}),t(e(te),{value:"detalles",class:"space-y-4"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(e(x),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...o[17]||(o[17]=[d("Información General",-1)])]),_:1})]),_:1}),t(e(y),{class:"space-y-4"},{default:s(()=>[l.hito.descripcion?(i(),c("div",At,[o[18]||(o[18]=a("h3",{class:"font-semibold mb-2"},"Descripción",-1)),a("p",Bt,m(l.hito.descripcion),1)])):f("",!0),a("div",Ft,[a("div",null,[o[19]||(o[19]=a("h3",{class:"font-semibold mb-2"},"Fecha de Inicio",-1)),a("p",Rt,m(T(l.hito.fecha_inicio)),1)]),a("div",null,[o[20]||(o[20]=a("h3",{class:"font-semibold mb-2"},"Fecha de Fin",-1)),a("p",Ut,m(T(l.hito.fecha_fin)),1)]),a("div",null,[o[21]||(o[21]=a("h3",{class:"font-semibold mb-2"},"Orden",-1)),a("p",qt,m(l.hito.orden),1)]),a("div",null,[o[22]||(o[22]=a("h3",{class:"font-semibold mb-2"},"Estado",-1)),t(e(v),{class:P(H(l.hito.estado))},{default:s(()=>[d(m(l.hito.estado),1)]),_:1},8,["class"])])]),a("div",null,[o[26]||(o[26]=a("h3",{class:"font-semibold mb-2"},"Resumen de Entregables",-1)),a("div",It,[a("div",Lt,[o[23]||(o[23]=a("span",{class:"text-muted-foreground"},"Pendientes",-1)),t(e(v),{variant:"outline"},{default:s(()=>[d(m(l.estadisticas.entregables_pendientes),1)]),_:1})]),a("div",Ot,[o[24]||(o[24]=a("span",{class:"text-muted-foreground"},"En Progreso",-1)),t(e(v),{variant:"outline",class:"bg-blue-50"},{default:s(()=>[d(m(l.estadisticas.entregables_en_progreso),1)]),_:1})]),a("div",Wt,[o[25]||(o[25]=a("span",{class:"text-muted-foreground"},"Completados",-1)),t(e(v),{variant:"outline",class:"bg-green-50"},{default:s(()=>[d(m(l.estadisticas.entregables_completados),1)]),_:1})])])])]),_:1})]),_:1}),l.hito.parent_id||l.hito.ruta_completa?(i(),p(e(h),{key:0},{default:s(()=>[t(e(x),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...o[27]||(o[27]=[d("Jerarquía",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Gt,[l.hito.ruta_completa?(i(),c("div",Jt,[o[28]||(o[28]=a("h3",{class:"font-semibold mb-2"},"Ruta Completa",-1)),a("p",Kt,m(l.hito.ruta_completa),1)])):f("",!0),l.hito.nivel!==void 0?(i(),c("div",Qt,[o[29]||(o[29]=a("h3",{class:"font-semibold mb-2"},"Nivel",-1)),t(e(v),{variant:"outline"},{default:s(()=>[d("Nivel "+m(l.hito.nivel),1)]),_:1})])):f("",!0)])]),_:1})]),_:1})):f("",!0),l.camposPersonalizados&&l.camposPersonalizados.length>0?(i(),p(e(h),{key:1},{default:s(()=>[t(e(x),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...o[30]||(o[30]=[d("Campos Personalizados",-1)])]),_:1}),t(e(me),null,{default:s(()=>[...o[31]||(o[31]=[d(" Información adicional específica del hito ",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Xt,[(i(!0),c(U,null,I(l.camposPersonalizados,_=>{var D;return i(),c("div",{key:_.id},[a("h3",Yt,[d(m(_.nombre)+" ",1),_.es_requerido?(i(),c("span",Zt,"*")):f("",!0)]),a("p",es,m(O(_,(D=l.valoresCamposPersonalizados)==null?void 0:D[_.id])),1),_.descripcion?(i(),c("p",ts,m(_.descripcion),1)):f("",!0)])}),128))]),!l.camposPersonalizados||l.camposPersonalizados.length===0?(i(),c("div",ss,[...o[32]||(o[32]=[a("p",{class:"text-sm text-muted-foreground"},"No hay campos personalizados configurados",-1)])])):f("",!0)]),_:1})]),_:1})):f("",!0),t(e(h),null,{default:s(()=>[t(e(x),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...o[33]||(o[33]=[d("Información del Sistema",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",os,[a("div",null,[o[34]||(o[34]=a("span",{class:"text-muted-foreground"},"Creado el:",-1)),a("p",as,m(C(l.hito.created_at)),1)]),a("div",null,[o[35]||(o[35]=a("span",{class:"text-muted-foreground"},"Última actualización:",-1)),a("p",ls,m(C(l.hito.updated_at)),1)]),l.hito.created_by_usuario?(i(),c("div",is,[o[36]||(o[36]=a("span",{class:"text-muted-foreground"},"Creado por:",-1)),a("p",ns,m(l.hito.created_by_usuario.name),1)])):f("",!0),l.hito.updated_by_usuario?(i(),c("div",ds,[o[37]||(o[37]=a("span",{class:"text-muted-foreground"},"Actualizado por:",-1)),a("p",rs,m(l.hito.updated_by_usuario.name),1)])):f("",!0)])]),_:1})]),_:1})]),_:1}),t(e(te),{value:"entregables",class:"space-y-4"},{default:s(()=>[a("div",us,[o[39]||(o[39]=a("h2",{class:"text-lg font-semibold"},"Lista de Entregables",-1)),l.canManageEntregables?(i(),p(e(k),{key:0,onClick:b,size:"sm"},{default:s(()=>[t(e(_e),{class:"h-4 w-4 mr-2"}),o[38]||(o[38]=d(" Nuevo Entregable ",-1))]),_:1})):f("",!0)]),t(wt,{entregables:l.hito.entregables||[],"can-edit":l.canManageEntregables,"can-delete":l.canManageEntregables,onEdit:Z,onDelete:L},null,8,["entregables","can-edit","can-delete"]),!l.hito.entregables||l.hito.entregables.length===0?(i(),p(e(h),{key:0},{default:s(()=>[t(e(y),{class:"text-center py-8"},{default:s(()=>[t(e(ne),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o[41]||(o[41]=a("p",{class:"text-muted-foreground mb-4"},"No hay entregables asignados a este hito",-1)),l.canManageEntregables?(i(),p(e(k),{key:0,onClick:b,variant:"outline"},{default:s(()=>[t(e(_e),{class:"h-4 w-4 mr-2"}),o[40]||(o[40]=d(" Crear Primer Entregable ",-1))]),_:1})):f("",!0)]),_:1})]),_:1})):f("",!0)]),_:1}),t(e(te),{value:"actividad",class:"space-y-4"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(e(x),null,{default:s(()=>[t(e(w),null,{default:s(()=>[...o[42]||(o[42]=[d("Historial de Actividad",-1)])]),_:1}),t(e(me),null,{default:s(()=>[...o[43]||(o[43]=[d(" Registro de cambios y actividades relacionadas con este hito ",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[...o[44]||(o[44]=[a("p",{class:"text-sm text-muted-foreground text-center py-8"}," El historial de actividad estará disponible próximamente ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{wo as default};
