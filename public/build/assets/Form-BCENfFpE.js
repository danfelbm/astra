import{d as de,C as ne,c as x,w as q,a as f,o as n,b as o,u as e,m as ue,e as r,f as t,t as m,g as s,h as me,i as c,n as b,F as S,r as k,j as $,W as fe}from"./app-Df_XpEAt.js";import{_ as j}from"./AppLogo.vue_vue_type_script_setup_true_lang-Cm9O2wcI.js";import{_ as U,a as w}from"./CardContent.vue_vue_type_script_setup_true_lang-DpvJI9u6.js";import{_ as h}from"./CardDescription.vue_vue_type_script_setup_true_lang-BctLpHuq.js";import{_ as A,a as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-BppcWH6e.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-DXtBxhay.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-DlOvwav0.js";import{_ as pe}from"./Textarea.vue_vue_type_script_setup_true_lang-aEyqqkP7.js";import{_ as v,a as g,b as V,c as y,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-BqZRPH_d.js";import{_ as ce}from"./Switch.vue_vue_type_script_setup_true_lang-B3wd-JHM.js";import{_ as ae}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-D1dOFirS.js";import{_ as _e}from"./AppLayout.vue_vue_type_script_setup_true_lang-C_K_7soM.js";import{A as be}from"./arrow-left-akQJVDR5.js";import{S as ve}from"./save-56wtP7ud.js";import"./index-CrGlExaQ.js";import"./useForwardExpose-DiGKx0L3.js";import"./usePrimitiveElement-CIANssro.js";import"./createContext-BXwDQvZJ.js";import"./Collection-D8NNtd7R.js";import"./useNonce-DmGZhgD0.js";import"./chevron-up-CHg7eWXV.js";import"./handleAndDispatchCustomEvent-CYpUamdb.js";import"./index-B1pkzvRA.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-D498Wec-.js";import"./VisuallyHidden-wBwWBqQZ.js";import"./VisuallyHiddenInput-Do627rsB.js";const ge={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ve={class:"flex items-center justify-between"},ye={class:"text-3xl font-bold"},xe={class:"text-muted-foreground"},Se={class:"grid gap-4 md:grid-cols-2"},ke={class:"space-y-2"},$e={key:0,class:"text-sm text-red-500"},Ue={class:"space-y-2"},we={key:0,class:"text-sm text-red-500"},he={class:"space-y-2"},Ae={key:0,class:"text-sm text-red-500"},Ce={key:0,class:"grid gap-4 md:grid-cols-2"},Ee={class:"space-y-2"},Fe={key:0,class:"text-sm text-red-500"},De={class:"space-y-2"},Ne={key:0,class:"text-sm text-red-500"},qe={class:"grid gap-4 md:grid-cols-2"},je={class:"space-y-2"},Le={key:0,class:"text-sm text-red-500"},ze={key:1,class:"text-sm text-red-500"},Me={class:"space-y-2"},Be={key:0,class:"text-sm text-red-500"},Ie={key:1,class:"text-sm text-red-500"},He={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Oe={class:"space-y-2"},Te={class:"space-y-2"},Ge={class:"space-y-2"},Pe={class:"space-y-2"},We={class:"space-y-2"},Qe={key:0,class:"text-sm text-red-500"},Re={class:"grid gap-4 md:grid-cols-2"},Je={class:"space-y-2"},Ke={key:0,class:"text-sm text-red-500"},Xe={class:"flex items-center space-x-2 pt-8"},Ye={class:"flex justify-end gap-4"},wa=de({__name:"Form",props:{asamblea:{},territorios:{},departamentos:{},municipios:{},localidades:{}},setup(le){var z,M,B,I,H,O,T,G,P,W,Q,R,J,K,X,Y,Z,ee;const u=le,oe=[{title:"Admin",href:"/admin/dashboard"},{title:"Asambleas",href:"/admin/asambleas"},{title:u.asamblea?"Editar":"Nueva",href:"#"}],{route:F}=window,l=ne({nombre:((z=u.asamblea)==null?void 0:z.nombre)||"",descripcion:((M=u.asamblea)==null?void 0:M.descripcion)||"",tipo:((B=u.asamblea)==null?void 0:B.tipo)||"ordinaria",estado:((I=u.asamblea)==null?void 0:I.estado)||"programada",fecha_inicio:((H=u.asamblea)==null?void 0:H.fecha_inicio)||"",fecha_fin:((O=u.asamblea)==null?void 0:O.fecha_fin)||"",territorio_id:((G=(T=u.asamblea)==null?void 0:T.territorio_id)==null?void 0:G.toString())||null,departamento_id:((W=(P=u.asamblea)==null?void 0:P.departamento_id)==null?void 0:W.toString())||null,municipio_id:((R=(Q=u.asamblea)==null?void 0:Q.municipio_id)==null?void 0:R.toString())||null,localidad_id:((K=(J=u.asamblea)==null?void 0:J.localidad_id)==null?void 0:K.toString())||null,lugar:((X=u.asamblea)==null?void 0:X.lugar)||"",quorum_minimo:((Y=u.asamblea)==null?void 0:Y.quorum_minimo)||null,activo:((Z=u.asamblea)==null?void 0:Z.activo)??!0,acta_url:((ee=u.asamblea)==null?void 0:ee.acta_url)||""}),D=x(()=>l.fecha_inicio&&new Date(l.fecha_inicio)<new Date?"La fecha de inicio debe ser posterior a la fecha actual":""),N=x(()=>{if(!l.fecha_fin||!l.fecha_inicio)return"";const d=new Date(l.fecha_fin),a=new Date(l.fecha_inicio);return d<=a?"La fecha de fin debe ser posterior a la fecha de inicio":""}),re=x(()=>l.territorio_id?u.departamentos.filter(d=>d.territorio_id===Number(l.territorio_id)):[]),ie=x(()=>l.departamento_id?u.municipios.filter(d=>d.departamento_id===Number(l.departamento_id)):[]),se=x(()=>l.municipio_id?u.localidades.filter(d=>d.municipio_id===Number(l.municipio_id)):[]);q(()=>l.territorio_id,(d,a)=>{d!==a&&(l.departamento_id=null,l.municipio_id=null,l.localidad_id=null)}),q(()=>l.departamento_id,(d,a)=>{d!==a&&(l.municipio_id=null,l.localidad_id=null)}),q(()=>l.municipio_id,(d,a)=>{d!==a&&(l.localidad_id=null)});const te=()=>{u.asamblea?l.put(F("admin.asambleas.update",u.asamblea.id),{preserveScroll:!0,onError:()=>{}}):l.post(F("admin.asambleas.store"),{preserveScroll:!0,onError:()=>{}})},L=()=>{fe.visit(F("admin.asambleas.index"))};return(d,a)=>(n(),f(S,null,[o(e(ue),{title:d.asamblea?"Editar Asamblea":"Nueva Asamblea"},null,8,["title"]),o(_e,{breadcrumbs:oe},{default:r(()=>[t("div",ge,[t("div",Ve,[t("div",null,[t("h1",ye,m(d.asamblea?"Editar Asamblea":"Nueva Asamblea"),1),t("p",xe,m(d.asamblea?"Modifica los datos de la asamblea":"Completa los datos para crear una nueva asamblea"),1)]),o(e(j),{variant:"outline",onClick:L},{default:r(()=>[o(e(be),{class:"mr-2 h-4 w-4"}),a[14]||(a[14]=s(" Volver "))]),_:1})]),t("form",{onSubmit:me(te,["prevent"]),class:"space-y-6"},[o(e(U),null,{default:r(()=>[o(e(A),null,{default:r(()=>[o(e(C),null,{default:r(()=>a[15]||(a[15]=[s("Información General")])),_:1}),o(e(h),null,{default:r(()=>a[16]||(a[16]=[s(" Datos básicos de la asamblea ")])),_:1})]),_:1}),o(e(w),{class:"space-y-4"},{default:r(()=>[t("div",Se,[t("div",ke,[o(e(p),{for:"nombre"},{default:r(()=>a[17]||(a[17]=[s("Nombre *")])),_:1}),o(e(E),{id:"nombre",modelValue:e(l).nombre,"onUpdate:modelValue":a[0]||(a[0]=i=>e(l).nombre=i),placeholder:"Ej: Asamblea General Ordinaria 2024",class:b({"border-red-500":e(l).errors.nombre})},null,8,["modelValue","class"]),e(l).errors.nombre?(n(),f("span",$e,m(e(l).errors.nombre),1)):c("",!0)]),t("div",Ue,[o(e(p),{for:"tipo"},{default:r(()=>a[18]||(a[18]=[s("Tipo *")])),_:1}),o(e(v),{modelValue:e(l).tipo,"onUpdate:modelValue":a[1]||(a[1]=i=>e(l).tipo=i)},{default:r(()=>[o(e(g),{class:b({"border-red-500":e(l).errors.tipo})},{default:r(()=>[o(e(V),{placeholder:"Selecciona el tipo"})]),_:1},8,["class"]),o(e(y),null,{default:r(()=>[o(e(_),{value:"ordinaria"},{default:r(()=>a[19]||(a[19]=[s("Ordinaria")])),_:1}),o(e(_),{value:"extraordinaria"},{default:r(()=>a[20]||(a[20]=[s("Extraordinaria")])),_:1})]),_:1})]),_:1},8,["modelValue"]),e(l).errors.tipo?(n(),f("span",we,m(e(l).errors.tipo),1)):c("",!0)])]),t("div",he,[o(e(p),{for:"descripcion"},{default:r(()=>a[21]||(a[21]=[s("Descripción")])),_:1}),o(e(pe),{id:"descripcion",modelValue:e(l).descripcion,"onUpdate:modelValue":a[2]||(a[2]=i=>e(l).descripcion=i),placeholder:"Describe el propósito y agenda de la asamblea...",rows:"3",class:b({"border-red-500":e(l).errors.descripcion})},null,8,["modelValue","class"]),e(l).errors.descripcion?(n(),f("span",Ae,m(e(l).errors.descripcion),1)):c("",!0)]),d.asamblea?(n(),f("div",Ce,[t("div",Ee,[o(e(p),{for:"estado"},{default:r(()=>a[22]||(a[22]=[s("Estado")])),_:1}),o(e(v),{modelValue:e(l).estado,"onUpdate:modelValue":a[3]||(a[3]=i=>e(l).estado=i)},{default:r(()=>[o(e(g),{class:b({"border-red-500":e(l).errors.estado})},{default:r(()=>[o(e(V),{placeholder:"Selecciona el estado"})]),_:1},8,["class"]),o(e(y),null,{default:r(()=>[o(e(_),{value:"programada"},{default:r(()=>a[23]||(a[23]=[s("Programada")])),_:1}),o(e(_),{value:"en_curso"},{default:r(()=>a[24]||(a[24]=[s("En Curso")])),_:1}),o(e(_),{value:"finalizada"},{default:r(()=>a[25]||(a[25]=[s("Finalizada")])),_:1}),o(e(_),{value:"cancelada"},{default:r(()=>a[26]||(a[26]=[s("Cancelada")])),_:1})]),_:1})]),_:1},8,["modelValue"]),e(l).errors.estado?(n(),f("span",Fe,m(e(l).errors.estado),1)):c("",!0)]),t("div",De,[o(e(p),{for:"acta_url"},{default:r(()=>a[27]||(a[27]=[s("URL del Acta")])),_:1}),o(e(E),{id:"acta_url",modelValue:e(l).acta_url,"onUpdate:modelValue":a[4]||(a[4]=i=>e(l).acta_url=i),placeholder:"https://ejemplo.com/acta.pdf",class:b({"border-red-500":e(l).errors.acta_url})},null,8,["modelValue","class"]),e(l).errors.acta_url?(n(),f("span",Ne,m(e(l).errors.acta_url),1)):c("",!0)])])):c("",!0)]),_:1})]),_:1}),o(e(U),null,{default:r(()=>[o(e(A),null,{default:r(()=>[o(e(C),null,{default:r(()=>a[28]||(a[28]=[s("Fechas y Horarios")])),_:1}),o(e(h),null,{default:r(()=>a[29]||(a[29]=[s(" Define cuándo se realizará la asamblea ")])),_:1})]),_:1}),o(e(w),{class:"space-y-4"},{default:r(()=>[t("div",qe,[t("div",je,[o(e(p),{for:"fecha_inicio"},{default:r(()=>a[30]||(a[30]=[s("Fecha y Hora de Inicio *")])),_:1}),o(e(ae),{modelValue:e(l).fecha_inicio,"onUpdate:modelValue":a[5]||(a[5]=i=>e(l).fecha_inicio=i),placeholder:"Seleccionar fecha y hora de inicio",class:b({"border-red-500":e(l).errors.fecha_inicio||D.value})},null,8,["modelValue","class"]),D.value?(n(),f("span",Le,m(D.value),1)):e(l).errors.fecha_inicio?(n(),f("span",ze,m(e(l).errors.fecha_inicio),1)):c("",!0)]),t("div",Me,[o(e(p),{for:"fecha_fin"},{default:r(()=>a[31]||(a[31]=[s("Fecha y Hora de Fin *")])),_:1}),o(e(ae),{modelValue:e(l).fecha_fin,"onUpdate:modelValue":a[6]||(a[6]=i=>e(l).fecha_fin=i),placeholder:"Seleccionar fecha y hora de fin",class:b({"border-red-500":e(l).errors.fecha_fin||N.value})},null,8,["modelValue","class"]),N.value?(n(),f("span",Be,m(N.value),1)):e(l).errors.fecha_fin?(n(),f("span",Ie,m(e(l).errors.fecha_fin),1)):c("",!0)])])]),_:1})]),_:1}),o(e(U),null,{default:r(()=>[o(e(A),null,{default:r(()=>[o(e(C),null,{default:r(()=>a[32]||(a[32]=[s("Ubicación")])),_:1}),o(e(h),null,{default:r(()=>a[33]||(a[33]=[s(" Define dónde se realizará la asamblea ")])),_:1})]),_:1}),o(e(w),{class:"space-y-4"},{default:r(()=>[t("div",He,[t("div",Oe,[o(e(p),{for:"territorio"},{default:r(()=>a[34]||(a[34]=[s("Territorio")])),_:1}),o(e(v),{modelValue:e(l).territorio_id,"onUpdate:modelValue":a[7]||(a[7]=i=>e(l).territorio_id=i)},{default:r(()=>[o(e(g),null,{default:r(()=>[o(e(V),{placeholder:"Selecciona territorio (opcional)"})]),_:1}),o(e(y),null,{default:r(()=>[(n(!0),f(S,null,k(d.territorios,i=>(n(),$(e(_),{key:i.id,value:i.id.toString()},{default:r(()=>[s(m(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),t("div",Te,[o(e(p),{for:"departamento"},{default:r(()=>a[35]||(a[35]=[s("Departamento")])),_:1}),o(e(v),{modelValue:e(l).departamento_id,"onUpdate:modelValue":a[8]||(a[8]=i=>e(l).departamento_id=i),disabled:!e(l).territorio_id},{default:r(()=>[o(e(g),null,{default:r(()=>[o(e(V),{placeholder:"Selecciona departamento (opcional)"})]),_:1}),o(e(y),null,{default:r(()=>[(n(!0),f(S,null,k(re.value,i=>(n(),$(e(_),{key:i.id,value:i.id.toString()},{default:r(()=>[s(m(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),t("div",Ge,[o(e(p),{for:"municipio"},{default:r(()=>a[36]||(a[36]=[s("Municipio")])),_:1}),o(e(v),{modelValue:e(l).municipio_id,"onUpdate:modelValue":a[9]||(a[9]=i=>e(l).municipio_id=i),disabled:!e(l).departamento_id},{default:r(()=>[o(e(g),null,{default:r(()=>[o(e(V),{placeholder:"Selecciona municipio (opcional)"})]),_:1}),o(e(y),null,{default:r(()=>[(n(!0),f(S,null,k(ie.value,i=>(n(),$(e(_),{key:i.id,value:i.id.toString()},{default:r(()=>[s(m(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),t("div",Pe,[o(e(p),{for:"localidad"},{default:r(()=>a[37]||(a[37]=[s("Localidad")])),_:1}),o(e(v),{modelValue:e(l).localidad_id,"onUpdate:modelValue":a[10]||(a[10]=i=>e(l).localidad_id=i),disabled:!e(l).municipio_id},{default:r(()=>[o(e(g),null,{default:r(()=>[o(e(V),{placeholder:"Selecciona localidad (opcional)"})]),_:1}),o(e(y),null,{default:r(()=>[(n(!0),f(S,null,k(se.value,i=>(n(),$(e(_),{key:i.id,value:i.id.toString()},{default:r(()=>[s(m(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),t("div",We,[o(e(p),{for:"lugar"},{default:r(()=>a[38]||(a[38]=[s("Dirección o Lugar")])),_:1}),o(e(E),{id:"lugar",modelValue:e(l).lugar,"onUpdate:modelValue":a[11]||(a[11]=i=>e(l).lugar=i),placeholder:"Ej: Salón Principal, Calle 123 #45-67",class:b({"border-red-500":e(l).errors.lugar})},null,8,["modelValue","class"]),e(l).errors.lugar?(n(),f("span",Qe,m(e(l).errors.lugar),1)):c("",!0)])]),_:1})]),_:1}),o(e(U),null,{default:r(()=>[o(e(A),null,{default:r(()=>[o(e(C),null,{default:r(()=>a[39]||(a[39]=[s("Configuración")])),_:1}),o(e(h),null,{default:r(()=>a[40]||(a[40]=[s(" Opciones adicionales de la asamblea ")])),_:1})]),_:1}),o(e(w),{class:"space-y-4"},{default:r(()=>[t("div",Re,[t("div",Je,[o(e(p),{for:"quorum_minimo"},{default:r(()=>a[41]||(a[41]=[s("Quórum Mínimo")])),_:1}),o(e(E),{id:"quorum_minimo",modelValue:e(l).quorum_minimo,"onUpdate:modelValue":a[12]||(a[12]=i=>e(l).quorum_minimo=i),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"Ej: 50",class:b({"border-red-500":e(l).errors.quorum_minimo})},null,8,["modelValue","class"]),e(l).errors.quorum_minimo?(n(),f("span",Ke,m(e(l).errors.quorum_minimo),1)):c("",!0),a[42]||(a[42]=t("p",{class:"text-sm text-muted-foreground"}," Número mínimo de asistentes requeridos ",-1))]),t("div",Xe,[o(e(ce),{id:"activo",modelValue:e(l).activo,"onUpdate:modelValue":a[13]||(a[13]=i=>e(l).activo=i)},null,8,["modelValue"]),o(e(p),{for:"activo",class:"cursor-pointer"},{default:r(()=>a[43]||(a[43]=[s(" Asamblea Activa ")])),_:1})])])]),_:1})]),_:1}),t("div",Ye,[o(e(j),{type:"button",variant:"outline",onClick:L},{default:r(()=>a[44]||(a[44]=[s(" Cancelar ")])),_:1}),o(e(j),{type:"submit",disabled:e(l).processing},{default:r(()=>[o(e(ve),{class:"mr-2 h-4 w-4"}),s(" "+m(d.asamblea?"Actualizar":"Crear")+" Asamblea ",1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{wa as default};
