import{d as q,c as P,r as E,i as k,e as o,f as e,q as I,w as i,g as r,j as H,t as d,b as w,v as D,h as m,m as p,n as y,A as F,F as A,k as J,s as x}from"./app-DOAvpdpy.js";import{_ as K}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D9tk40Ze.js";import{_ as g,c as h}from"./CardTitle.vue_vue_type_script_setup_true_lang-CHzHcBJD.js";import{c as Q,_ as c}from"./createLucideIcon-B8d5bW74.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-DpiZrk6F.js";import{_ as G}from"./HitosDashboard.vue_vue_type_script_setup_true_lang-B_3aqQbZ.js";import{t as M}from"./index-D4UxCdcO.js";import{A as O}from"./arrow-left-IvdYDnHe.js";import{P as R}from"./plus-CaIcTwOd.js";import{S as W}from"./search-BiD4ugt-.js";import{L as X}from"./list-3sKdXja_.js";import"./useFlashMessages-DpAT9twl.js";import"./index-CmGaHOMg.js";import"./floating-ui.vue-DHJPTVzt.js";import"./x-BDylcitt.js";import"./index-ByelLgwr.js";import"./shield-CPsGM_xd.js";import"./user-BCblXEQx.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CVJnMnVh.js";import"./chevron-right-CCRsFGH5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Cep9uJW9.js";import"./VisuallyHidden-BSG4PTdC.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BXZrnX9E.js";import"./index-ceuENFtx.js";import"./check-qkM_pq-n.js";import"./Label.vue_vue_type_script_setup_true_lang-D3G2L01q.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cxybq1SB.js";import"./circle-alert-C9j6pIWM.js";import"./map-pin-Bo0BxocW.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-ehaQzMDU.js";import"./chevrons-up-down-sU9lYEz6.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-vM-5-Mr4.js";import"./tag-DfZyNgGs.js";import"./users-lrz85sQ8.js";import"./target-6lEdwcHB.js";import"./vote-d-PWMwPO.js";import"./folder-open-1fOQ0rtw.js";import"./send-VqVT7m78.js";import"./file-text-D373kHVE.js";import"./briefcase-uiBroSEx.js";import"./calendar-CD2D2UbU.js";import"./megaphone-CVBqqCSC.js";import"./user-check-CAi1ivNh.js";import"./clipboard-list-De5Ng5v1.js";import"./mail-CNihFBrW.js";import"./message-square-JJ7kxV2X.js";import"./external-link-fEEnYwkp.js";import"./panel-left-DMAuoSSS.js";import"./index-BEwAULqp.js";import"./index-B0zyg-lg.js";import"./Progress.vue_vue_type_script_setup_true_lang-DUc7kvfq.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-C60H2ZU2.js";import"./Separator.vue_vue_type_script_setup_true_lang-DlxX-RUz.js";import"./EntregablesList.vue_vue_type_script_setup_true_lang-CeCdGuPX.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CZdoME-F.js";import"./StatusChangeModal.vue_vue_type_script_setup_true_lang-CZ2X4Z-Q.js";import"./Switch.vue_vue_type_script_setup_true_lang-71QEUPTl.js";import"./VisuallyHiddenInput-ZIuX-4z0.js";import"./ComentarioContextoInput.vue_vue_type_script_setup_true_lang-BsFE5JFL.js";import"./RichTextEditor-BS_71c2M.js";import"./italic-CCAMh8fV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FileUploadField.vue_vue_type_script_setup_true_lang-DUYEWGxD.js";import"./useFileUpload-Dhflcu_G.js";import"./upload-KZqVpSl6.js";import"./file-D4t4Yig_.js";import"./eye-DPdWlF5i.js";import"./download-SKf2EK9a.js";import"./paperclip-Dxvb9AKd.js";import"./circle-x-BwZ4OB4t.js";import"./clock-_CclVdPa.js";import"./circle-check-big-Bp-GPbzd.js";import"./loader-circle-CaHzj4tA.js";import"./square-pen-BlJ2VD3E.js";import"./trash-2-U0flC5IV.js";import"./es-BDPlFIsO.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=Q("NetworkIcon",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Z={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},tt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},et={class:"text-sm text-muted-foreground mt-1"},ot={class:"flex items-center gap-2"},it={key:0,class:"grid grid-cols-2 md:grid-cols-5 gap-4"},rt={class:"text-2xl font-bold"},st={class:"text-2xl font-bold text-gray-500"},at={class:"text-2xl font-bold text-blue-500"},lt={class:"text-2xl font-bold text-green-500"},nt={class:"flex flex-col sm:flex-row gap-2"},dt={class:"flex-1"},mt={class:"relative"},pt={class:"flex gap-2"},ct={key:1,class:"flex justify-center gap-2 mt-4"},Ne=q({__name:"Index",props:{proyecto:{},hitos:{},filters:{},estadisticas:{},timeline:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageDeliverables:{type:Boolean}},setup(s){var z,B;const l=s,u=P(()=>Array.isArray(l.hitos)?{data:l.hitos,current_page:1,last_page:1,per_page:l.hitos.length,total:l.hitos.length}:l.hitos),C=E(((z=l.filters)==null?void 0:z.search)||""),f=E(((B=l.filters)==null?void 0:B.estado)||""),v=E(!1);P(()=>{if(!v.value)return u.value.data;const n=u.value.data.filter(a=>!a.parent_id),t=(a,_=0)=>u.value.data.filter($=>$.parent_id===a).flatMap($=>[{...$,_nivel:_},...t($.id,_+1)]);return n.flatMap(a=>[{...a,_nivel:0},...t(a.id,1)])});const N=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:l.proyecto.nombre,href:`/admin/proyectos/${l.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${l.proyecto.id}/hitos`}],S=n=>{x.visit(`/admin/proyectos/${l.proyecto.id}/hitos/${n.id}`)},T=n=>{x.visit(`/admin/proyectos/${l.proyecto.id}/hitos/${n.id}/edit`)},L=n=>{confirm(`¿Estás seguro de eliminar el hito "${n.nombre}"?`)&&x.delete(`/admin/proyectos/${l.proyecto.id}/hitos/${n.id}`,{onSuccess:()=>{M.success("Hito eliminado exitosamente")},onError:()=>{M.error("Error al eliminar el hito")}})},j=n=>{x.visit(`/admin/proyectos/${l.proyecto.id}/hitos/${n.id}/entregables/create`)},V=()=>{x.get(`/admin/proyectos/${l.proyecto.id}/hitos`,{search:C.value,estado:f.value},{preserveState:!0,preserveScroll:!0})},b=n=>{f.value=n,V()};return(n,t)=>(p(),k(A,null,[o(e(I),{title:`Hitos - ${s.proyecto.nombre}`},null,8,["title"]),o(K,{breadcrumbs:N},{default:i(()=>[r("div",Z,[r("div",tt,[r("div",null,[t[6]||(t[6]=r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Hitos del Proyecto ",-1)),r("p",et,d(s.proyecto.nombre),1)]),r("div",ot,[o(e(D),{href:`/admin/proyectos/${s.proyecto.id}`},{default:i(()=>[o(e(c),{variant:"outline",size:"sm"},{default:i(()=>[o(e(O),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=m(" Volver al Proyecto ",-1))]),_:1})]),_:1},8,["href"]),s.canCreate?(p(),w(e(D),{key:0,href:`/admin/proyectos/${s.proyecto.id}/hitos/create`},{default:i(()=>[o(e(c),{size:"sm"},{default:i(()=>[o(e(R),{class:"h-4 w-4 mr-2"}),t[8]||(t[8]=m(" Nuevo Hito ",-1))]),_:1})]),_:1},8,["href"])):H("",!0)])]),s.estadisticas?(p(),k("div",it,[o(e(g),null,{default:i(()=>[o(e(h),{class:"p-4"},{default:i(()=>[r("p",rt,d(s.estadisticas.total),1),t[9]||(t[9]=r("p",{class:"text-xs text-muted-foreground"},"Total",-1))]),_:1})]),_:1}),o(e(g),null,{default:i(()=>[o(e(h),{class:"p-4"},{default:i(()=>[r("p",st,d(s.estadisticas.pendientes),1),t[10]||(t[10]=r("p",{class:"text-xs text-muted-foreground"},"Pendientes",-1))]),_:1})]),_:1}),o(e(g),null,{default:i(()=>[o(e(h),{class:"p-4"},{default:i(()=>[r("p",at,d(s.estadisticas.en_progreso),1),t[11]||(t[11]=r("p",{class:"text-xs text-muted-foreground"},"En Progreso",-1))]),_:1})]),_:1}),o(e(g),null,{default:i(()=>[o(e(h),{class:"p-4"},{default:i(()=>[r("p",lt,d(s.estadisticas.completados),1),t[12]||(t[12]=r("p",{class:"text-xs text-muted-foreground"},"Completados",-1))]),_:1})]),_:1}),o(e(g),null,{default:i(()=>[o(e(h),{class:"p-4"},{default:i(()=>[r("p",{class:y(["text-2xl font-bold",{"text-red-500":s.estadisticas.vencidos>0}])},d(s.estadisticas.vencidos),3),t[13]||(t[13]=r("p",{class:"text-xs text-muted-foreground"},"Vencidos",-1))]),_:1})]),_:1})])):H("",!0),r("div",nt,[r("div",dt,[r("div",mt,[o(e(W),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o(e(U),{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),placeholder:"Buscar hitos...",class:"pl-9",onKeyup:F(V,["enter"])},null,8,["modelValue"])])]),r("div",pt,[o(e(c),{variant:"outline",size:"sm",class:y({"bg-primary text-primary-foreground":v.value}),onClick:t[1]||(t[1]=a=>v.value=!v.value),title:"Cambiar vista"},{default:i(()=>[v.value?(p(),w(e(Y),{key:0,class:"h-4 w-4 mr-2"})):(p(),w(e(X),{key:1,class:"h-4 w-4 mr-2"})),m(" "+d(v.value?"Jerárquica":"Plana"),1)]),_:1},8,["class"]),o(e(c),{variant:"outline",size:"sm",class:y({"bg-primary text-primary-foreground":f.value===""}),onClick:t[2]||(t[2]=a=>b(""))},{default:i(()=>[...t[14]||(t[14]=[m(" Todos ",-1)])]),_:1},8,["class"]),o(e(c),{variant:"outline",size:"sm",class:y({"bg-primary text-primary-foreground":f.value==="pendiente"}),onClick:t[3]||(t[3]=a=>b("pendiente"))},{default:i(()=>[...t[15]||(t[15]=[m(" Pendientes ",-1)])]),_:1},8,["class"]),o(e(c),{variant:"outline",size:"sm",class:y({"bg-primary text-primary-foreground":f.value==="en_progreso"}),onClick:t[4]||(t[4]=a=>b("en_progreso"))},{default:i(()=>[...t[16]||(t[16]=[m(" En Progreso ",-1)])]),_:1},8,["class"]),o(e(c),{variant:"outline",size:"sm",class:y({"bg-primary text-primary-foreground":f.value==="completado"}),onClick:t[5]||(t[5]=a=>b("completado"))},{default:i(()=>[...t[17]||(t[17]=[m(" Completados ",-1)])]),_:1},8,["class"])])]),o(G,{hitos:u.value.data,"proyecto-id":s.proyecto.id,"can-edit":s.canEdit,"can-delete":s.canDelete,"can-manage-deliverables":s.canManageDeliverables,"can-complete":s.canManageDeliverables,"base-url":"/admin/proyectos",onViewHito:S,onEditHito:T,onDeleteHito:L,onAddEntregable:j},null,8,["hitos","proyecto-id","can-edit","can-delete","can-manage-deliverables","can-complete"]),u.value.last_page>1?(p(),k("div",ct,[(p(!0),k(A,null,J(u.value.last_page,a=>(p(),w(e(c),{key:a,variant:a===u.value.current_page?"default":"outline",size:"sm",onClick:_=>e(x).visit(`/admin/proyectos/${s.proyecto.id}/hitos?page=${a}`)},{default:i(()=>[m(d(a),1)]),_:2},1032,["variant","onClick"]))),128))])):H("",!0)])]),_:1})],64))}});export{Ne as default};
