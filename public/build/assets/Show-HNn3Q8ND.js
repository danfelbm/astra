import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cq5mfOW4.js";import{d as K,k,c as O,a as d,o as u,b as t,u as s,m as Q,e,f as l,P as V,i as w,t as r,j as g,g as i,F as h,r as $,n as X,W as Y}from"./app-FophTVsO.js";import{_ as x}from"./createLucideIcon-CHeVMHi8.js";import{_ as f,a as m,b as _,F as L,c as p,t as Z}from"./index-2Ti3DxcF.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bh5bZLwH.js";import{e as v,U as M,C as ss}from"./DialogTitle.vue_vue_type_script_setup_true_lang-JexKqqtw.js";import{_ as ts,a as es,b as A,c as b,d as as,e as y}from"./TableHeader.vue_vue_type_script_setup_true_lang-BHK6A0d6.js";import{_ as ls,a as os,b as C,c as j}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DMjZuzgX.js";import{_ as is,a as rs}from"./index-XF5TwXGU.js";import{A as ns}from"./arrow-left-d7tlA2Vi.js";import{S as us}from"./square-pen-BCoBY3PN.js";import{D as ds}from"./download-BZhBhNTC.js";import{E as F}from"./external-link-BqZDcEL8.js";import{C as fs}from"./copy-Bgrj1z4G.js";import{E as ms}from"./eye-D5BqkS3z.js";import{f as _s,e as ps}from"./es-DfN3vIXC.js";import"./Label.vue_vue_type_script_setup_true_lang-PlVbeQe9.js";import"./index-BRADHTGK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C9djwUpv.js";import"./VisuallyHidden-DhRULVXc.js";import"./RovingFocusItem-D9yjQZEF.js";const cs={class:"p-6"},vs={class:"mb-6"},bs={class:"flex items-center justify-between mb-4"},ys={class:"flex items-center gap-2"},gs={class:"text-3xl font-bold"},xs={key:0,class:"text-muted-foreground"},ws={class:"flex gap-2"},hs={class:"flex items-center gap-2"},ks={class:"flex items-center gap-2"},$s={class:"bg-gray-100 px-2 py-1 rounded text-sm"},Cs={class:"flex gap-2"},js=["href"],Es={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Ts={class:"text-2xl font-bold"},Rs={class:"text-xs text-muted-foreground"},Vs={class:"text-2xl font-bold"},Ls={class:"text-2xl font-bold"},Us={class:"text-xs text-muted-foreground"},Ms={class:"text-2xl font-bold"},As={class:"space-y-4"},Fs={class:"space-y-2"},Hs={class:"text-sm font-medium"},Ps={class:"text-sm"},Ds={key:0,class:"text-center py-8"},Ns={key:2,class:"mt-4"},Ss={class:"flex items-center justify-center gap-1"},zs=["innerHTML"],Bs={class:"grid gap-6 md:grid-cols-2"},qs={class:"space-y-4"},Ws={class:"flex items-center justify-between"},Is={class:"font-bold"},Gs={class:"flex items-center justify-between"},Js={class:"font-bold"},Ks={class:"flex items-center justify-between"},Os={class:"font-bold"},Qs={class:"flex items-center justify-between"},Xs={class:"font-bold"},Ys={class:"space-y-4"},Zs={class:"flex items-center justify-between"},st={class:"font-bold"},tt={class:"flex items-center justify-between"},et={class:"font-bold"},at={class:"mt-4 pt-4 border-t"},lt={class:"flex items-center justify-between"},ot={class:"font-bold"},Et=K({__name:"Show",props:{formulario:{},respuestas:{}},setup(H){const c=H,P=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Formularios",href:"/admin/formularios"},{title:c.formulario.titulo,href:"#"}],E=k("resumen"),D=k(null),N=k(!1),S=()=>{Y.get(route("admin.formularios.edit",c.formulario.id))},z=()=>{window.location.href=route("admin.formularios.exportar",c.formulario.id)},B=()=>{navigator.clipboard.writeText(c.formulario.url_publica).then(()=>{Z.success("URL copiada al portapapeles")})},q=o=>{D.value=o,N.value=!0},W=o=>_s(new Date(o),"d 'de' MMMM 'de' yyyy, HH:mm",{locale:ps}),I=o=>({publico:"Público",autenticado:"Autenticado",con_permiso:"Con Permiso"})[o]||o,G=o=>({borrador:"secondary",publicado:"default",archivado:"outline"})[o]||"secondary",T=O(()=>{const o=c.formulario.estadisticas.usuarios_unicos+c.formulario.estadisticas.visitantes_unicos;return o===0?0:Math.round(c.formulario.estadisticas.visitantes_unicos/o*100)});return(o,a)=>(u(),d(h,null,[t(s(Q),{title:o.formulario.titulo},null,8,["title"]),t(J,{breadcrumbs:P},{default:e(()=>[l("div",cs,[l("div",vs,[l("div",bs,[l("div",ys,[t(s(V),{href:o.route("admin.formularios.index")},{default:e(()=>[t(s(x),{variant:"ghost",size:"sm"},{default:e(()=>[t(s(ns),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),l("div",null,[l("h1",gs,r(o.formulario.titulo),1),o.formulario.descripcion?(u(),d("p",xs,r(o.formulario.descripcion),1)):w("",!0)])]),l("div",ws,[t(s(x),{variant:"outline",onClick:S},{default:e(()=>[t(s(us),{class:"mr-2 h-4 w-4"}),a[1]||(a[1]=i(" Editar "))]),_:1}),o.formulario.estadisticas.total_respuestas>0?(u(),g(s(x),{key:0,onClick:z},{default:e(()=>[t(s(ds),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=i(" Exportar CSV "))]),_:1})):w("",!0)])]),l("div",hs,[t(s(v),{variant:G(o.formulario.estado)},{default:e(()=>[i(r(o.formulario.estado),1)]),_:1},8,["variant"]),t(s(v),{variant:"outline"},{default:e(()=>[i(r(I(o.formulario.tipo_acceso)),1)]),_:1}),o.formulario.categoria?(u(),g(s(v),{key:0,variant:"secondary"},{default:e(()=>[i(r(o.formulario.categoria.nombre),1)]),_:1})):w("",!0),t(s(v),{variant:o.formulario.activo?"default":"destructive"},{default:e(()=>[i(r(o.formulario.activo?"Activo":"Inactivo"),1)]),_:1},8,["variant"])])]),t(s(is),{class:"mb-6"},{default:e(()=>[t(s(rs),{class:"flex items-center justify-between"},{default:e(()=>[l("div",ks,[t(s(F),{class:"h-4 w-4"}),a[3]||(a[3]=l("span",{class:"font-medium"},"URL Pública:",-1)),l("code",$s,r(o.formulario.url_publica),1)]),l("div",Cs,[t(s(x),{variant:"ghost",size:"sm",onClick:B},{default:e(()=>[t(s(fs),{class:"h-4 w-4"})]),_:1}),l("a",{href:o.formulario.url_publica,target:"_blank"},[t(s(x),{variant:"ghost",size:"sm"},{default:e(()=>[t(s(F),{class:"h-4 w-4"})]),_:1})],8,js)])]),_:1})]),_:1}),t(s(ls),{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=n=>E.value=n),class:"space-y-6"},{default:e(()=>[t(s(os),null,{default:e(()=>[t(s(C),{value:"resumen"},{default:e(()=>a[4]||(a[4]=[i("Resumen")])),_:1}),t(s(C),{value:"respuestas"},{default:e(()=>[i(" Respuestas ("+r(o.formulario.estadisticas.total_respuestas)+") ",1)]),_:1}),t(s(C),{value:"estadisticas"},{default:e(()=>a[5]||(a[5]=[i("Estadísticas")])),_:1})]),_:1}),t(s(j),{value:"resumen",class:"space-y-6"},{default:e(()=>[l("div",Es,[t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(_),{class:"text-sm font-medium"},{default:e(()=>a[6]||(a[6]=[i(" Total Respuestas ")])),_:1}),t(s(L),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(p),null,{default:e(()=>[l("div",Ts,r(o.formulario.estadisticas.total_respuestas),1),l("p",Rs,r(o.formulario.estadisticas.respuestas_hoy)+" hoy ",1)]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(_),{class:"text-sm font-medium"},{default:e(()=>a[7]||(a[7]=[i(" Usuarios Únicos ")])),_:1}),t(s(M),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(p),null,{default:e(()=>[l("div",Vs,r(o.formulario.estadisticas.usuarios_unicos),1),a[8]||(a[8]=l("p",{class:"text-xs text-muted-foreground"}," Usuarios registrados ",-1))]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(_),{class:"text-sm font-medium"},{default:e(()=>a[9]||(a[9]=[i(" Visitantes ")])),_:1}),t(s(M),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(p),null,{default:e(()=>[l("div",Ls,r(o.formulario.estadisticas.visitantes_unicos),1),l("p",Us,r(T.value)+"% del total ",1)]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:e(()=>[t(s(_),{class:"text-sm font-medium"},{default:e(()=>a[10]||(a[10]=[i(" Esta Semana ")])),_:1}),t(s(ss),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(s(p),null,{default:e(()=>[l("div",Ms,r(o.formulario.estadisticas.respuestas_semana),1),a[11]||(a[11]=l("p",{class:"text-xs text-muted-foreground"}," Respuestas ",-1))]),_:1})]),_:1})]),t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(_),null,{default:e(()=>a[12]||(a[12]=[i("Configuración del Formulario")])),_:1}),t(s(U),null,{default:e(()=>a[13]||(a[13]=[i(" Estructura y campos del formulario ")])),_:1})]),_:1}),t(s(p),null,{default:e(()=>[l("div",As,[l("div",null,[a[15]||(a[15]=l("h4",{class:"font-medium mb-2"},"Campos del formulario:",-1)),l("div",Fs,[(u(!0),d(h,null,$(o.formulario.configuracion_campos,(n,R)=>(u(),d("div",{key:n.id,class:"flex items-center gap-2 p-2 bg-gray-50 rounded"},[l("span",Hs,r(R+1)+".",1),l("span",Ps,r(n.title),1),t(s(v),{variant:"outline",class:"text-xs"},{default:e(()=>[i(r(n.type),1)]),_:2},1024),n.required?(u(),g(s(v),{key:0,variant:"destructive",class:"text-xs"},{default:e(()=>a[14]||(a[14]=[i(" Requerido ")])),_:1})):w("",!0)]))),128))])])])]),_:1})]),_:1})]),_:1}),t(s(j),{value:"respuestas",class:"space-y-6"},{default:e(()=>[t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(_),null,{default:e(()=>a[16]||(a[16]=[i("Respuestas Recibidas")])),_:1}),t(s(U),null,{default:e(()=>a[17]||(a[17]=[i(" Lista de todas las respuestas enviadas ")])),_:1})]),_:1}),t(s(p),null,{default:e(()=>[o.respuestas.data.length===0?(u(),d("div",Ds,[t(s(L),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a[18]||(a[18]=l("p",{class:"text-muted-foreground"}," No hay respuestas aún ",-1))])):(u(),g(s(ts),{key:1},{default:e(()=>[t(s(es),null,{default:e(()=>[t(s(A),null,{default:e(()=>[t(s(b),null,{default:e(()=>a[19]||(a[19]=[i("Código")])),_:1}),t(s(b),null,{default:e(()=>a[20]||(a[20]=[i("Nombre")])),_:1}),t(s(b),null,{default:e(()=>a[21]||(a[21]=[i("Email")])),_:1}),t(s(b),null,{default:e(()=>a[22]||(a[22]=[i("Tipo")])),_:1}),t(s(b),null,{default:e(()=>a[23]||(a[23]=[i("Tiempo")])),_:1}),t(s(b),null,{default:e(()=>a[24]||(a[24]=[i("Fecha")])),_:1}),t(s(b),null,{default:e(()=>a[25]||(a[25]=[i("Acciones")])),_:1})]),_:1})]),_:1}),t(s(as),null,{default:e(()=>[(u(!0),d(h,null,$(o.respuestas.data,n=>(u(),g(s(A),{key:n.id},{default:e(()=>[t(s(y),{class:"font-mono text-xs"},{default:e(()=>[i(r(n.codigo_confirmacion),1)]),_:2},1024),t(s(y),null,{default:e(()=>[i(r(n.nombre),1)]),_:2},1024),t(s(y),null,{default:e(()=>[i(r(n.email||"-"),1)]),_:2},1024),t(s(y),null,{default:e(()=>[t(s(v),{variant:"outline"},{default:e(()=>[i(r(n.es_visitante?"Visitante":"Usuario"),1)]),_:2},1024)]),_:2},1024),t(s(y),null,{default:e(()=>[i(r(n.tiempo_llenado||"-"),1)]),_:2},1024),t(s(y),{class:"text-sm"},{default:e(()=>[i(r(W(n.enviado_en)),1)]),_:2},1024),t(s(y),null,{default:e(()=>[t(s(x),{variant:"ghost",size:"sm",onClick:R=>q(n)},{default:e(()=>[t(s(ms),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),o.respuestas.links&&o.respuestas.links.length>3?(u(),d("div",Ns,[l("nav",Ss,[(u(!0),d(h,null,$(o.respuestas.links,n=>(u(),d(h,{key:n.label},[n.url?(u(),g(s(V),{key:0,href:n.url,class:X(["px-3 py-2 text-sm rounded-md",n.active?"bg-primary text-primary-foreground":"bg-white hover:bg-gray-50 border"]),innerHTML:n.label},null,8,["href","class","innerHTML"])):(u(),d("span",{key:1,class:"px-3 py-2 text-sm text-gray-400",innerHTML:n.label},null,8,zs))],64))),128))])])):w("",!0)]),_:1})]),_:1})]),_:1}),t(s(j),{value:"estadisticas",class:"space-y-6"},{default:e(()=>[l("div",Bs,[t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(_),null,{default:e(()=>a[26]||(a[26]=[i("Respuestas por Período")])),_:1})]),_:1}),t(s(p),null,{default:e(()=>[l("div",qs,[l("div",Ws,[a[27]||(a[27]=l("span",null,"Hoy",-1)),l("span",Is,r(o.formulario.estadisticas.respuestas_hoy),1)]),l("div",Gs,[a[28]||(a[28]=l("span",null,"Esta semana",-1)),l("span",Js,r(o.formulario.estadisticas.respuestas_semana),1)]),l("div",Ks,[a[29]||(a[29]=l("span",null,"Este mes",-1)),l("span",Os,r(o.formulario.estadisticas.respuestas_mes),1)]),l("div",Qs,[a[30]||(a[30]=l("span",null,"Total",-1)),l("span",Xs,r(o.formulario.estadisticas.total_respuestas),1)])])]),_:1})]),_:1}),t(s(f),null,{default:e(()=>[t(s(m),null,{default:e(()=>[t(s(_),null,{default:e(()=>a[31]||(a[31]=[i("Tipo de Usuarios")])),_:1})]),_:1}),t(s(p),null,{default:e(()=>[l("div",Ys,[l("div",Zs,[a[32]||(a[32]=l("span",null,"Usuarios registrados",-1)),l("span",st,r(o.formulario.estadisticas.usuarios_unicos),1)]),l("div",tt,[a[33]||(a[33]=l("span",null,"Visitantes",-1)),l("span",et,r(o.formulario.estadisticas.visitantes_unicos),1)]),l("div",at,[l("div",lt,[a[34]||(a[34]=l("span",null,"% Visitantes",-1)),l("span",ot,r(T.value)+"%",1)])])])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Et as default};
