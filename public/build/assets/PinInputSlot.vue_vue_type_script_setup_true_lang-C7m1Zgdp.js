import{a as T,c as G,u as H,g as U,d as X,b as K}from"./VisuallyHidden-C-vWMVD8.js";import{P as N,a as R}from"./createLucideIcon-D4eqIL-7.js";import{d as w,a6 as J,c as f,r as L,p as j,b as q,w as C,M as E,e as Q,f as l,$ as k,m as I,o as W,B as Y,A as D,X as Z}from"./app-DT0SERA6.js";import{r as S}from"./index-BkdycJFx.js";import{u as ee}from"./useArrowNavigation-B5rxJs06.js";import{u as te,a as ae}from"./Input.vue_vue_type_script_setup_true_lang-DYhXX8kY.js";import{V as le}from"./VisuallyHiddenInput-ngAWrU2n.js";const[oe,ne]=G("PinInputRoot");var se=w({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(d,{emit:o}){const t=d,n=o,{mask:i,otp:p,placeholder:h,type:B,disabled:y,dir:g}=J(t),{forwardRef:$}=te(),b=T(g),c=ae(t,"modelValue",n,{defaultValue:t.defaultValue??[],passive:t.modelValue===void 0}),_=f(()=>Array.isArray(c.value)?[...c.value]:[]),v=L(new Set);function A(r){v.value.add(r)}const M=f(()=>t.type==="number"),V=f(()=>_.value.filter(m=>!!m||M.value&&m===0).length===v.value.size);return j(c,()=>{V.value&&n("complete",c.value)},{deep:!0}),ne({modelValue:c,currentModelValue:_,mask:i,otp:p,placeholder:h,type:B,dir:b,disabled:y,isCompleted:V,inputElements:v,onInputElementChange:A,isNumericMode:M}),(r,m)=>(I(),q(l(N),k(r.$attrs,{ref:l($),dir:l(b),"data-complete":V.value?"":void 0,"data-disabled":l(y)?"":void 0}),{default:C(()=>[E(r.$slots,"default",{modelValue:l(c)}),Q(le,{id:r.id,as:"input",feature:"focusable",tabindex:"-1",value:_.value.join(""),name:r.name??"",disabled:l(y),required:r.required,onFocus:m[0]||(m[0]=P=>{var e,a;return(a=(e=Array.from(v.value))==null?void 0:e[0])==null?void 0:a.focus()})},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),re=se,ue=w({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(d){const o=d,t=oe(),n=f(()=>Array.from(t.inputElements.value)),i=f(()=>t.currentModelValue.value[o.index]),p=f(()=>o.disabled||t.disabled.value),h=f(()=>t.otp.value),B=f(()=>t.mask.value),{primitiveElement:y,currentElement:g}=H();function $(e){var u;const a=e.target;if((((u=e.data)==null?void 0:u.length)??0)>1){r(a.value);return}if(t.isNumericMode.value&&!/^\d*$/.test(a.value)){a.value=a.value.replace(/\D/g,"");return}a.value=e.data??"",P(o.index,a.value);const s=n.value[o.index+1];s&&s.focus()}function b(){const e=g.value;Z(()=>{e&&!e.value&&(e.placeholder=t.placeholder.value)})}function c(e){ee(e,U(),void 0,{itemsArray:n.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:t.dir.value})}function _(e){if(e.preventDefault(),e.target.value)P(o.index,"");else{const u=n.value[o.index-1];u&&(u.focus(),P(o.index-1,""))}}function v(e){e.key==="Delete"&&(e.preventDefault(),P(o.index,""))}function A(e){const a=e.target;a.setSelectionRange(1,1),a.value||(a.placeholder="")}function M(e){b()}function V(e){e.preventDefault();const a=e.clipboardData;if(!a)return;const s=a.getData("text");r(s)}function r(e){var F;const a=[...t.currentModelValue.value],s=e.length>=n.value.length?0:o.index,u=Math.min(s+e.length,n.value.length);for(let x=s;x<u;x++){const O=n.value[x],z=e[x-s];t.isNumericMode.value&&!/^\d*$/.test(z)||(a[x]=z,O.focus())}t.modelValue.value=a,(F=n.value[u])==null||F.focus()}function m(e){let a=e.length-1;for(;a>=0&&e[a]==="";)e.pop(),a--;return e}function P(e,a){const s=[...t.currentModelValue.value];if(t.isNumericMode.value){const u=+a;a===""||isNaN(u)?delete s[e]:s[e]=u}else s[e]=a;t.modelValue.value=m(s)}return j(i,()=>{i.value||b()}),W(()=>{t.onInputElementChange(g.value)}),Y(()=>{var e;(e=t.inputElements)==null||e.value.delete(g.value)}),(e,a)=>(I(),q(l(N),{ref_key:"primitiveElement",ref:y,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:h.value?"one-time-code":"false",type:B.value?"password":"text",inputmode:l(t).isNumericMode.value?"numeric":"text",pattern:l(t).isNumericMode.value?"[0-9]*":void 0,placeholder:l(t).placeholder.value,value:i.value,disabled:p.value,"data-disabled":p.value?"":void 0,"data-complete":l(t).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${n.value.length}`,onInput:a[0]||(a[0]=s=>$(s)),onKeydown:[D(c,["left","right","up","down","home","end"]),D(_,["backspace"]),D(v,["delete"])],onFocus:A,onBlur:M,onPaste:V},{default:C(()=>[E(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ie=ue;const ye=w({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(d,{emit:o}){const t=d,n=o,i=S(t,"class"),p=X(i,n);return(h,B)=>(I(),q(l(re),k({"data-slot":"pin-input"},l(p),{class:l(R)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",t.class)}),{default:C(()=>[E(h.$slots,"default")]),_:3},16,["class"]))}}),ge=w({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(d){const o=d,t=S(o,"class"),n=K(t);return(i,p)=>(I(),q(l(N),k({"data-slot":"pin-input-group"},l(n),{class:l(R)("flex items-center",o.class)}),{default:C(()=>[E(i.$slots,"default")]),_:3},16,["class"]))}}),be=w({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(d){const o=d,t=S(o,"class"),n=K(t);return(i,p)=>(I(),q(l(ie),k({"data-slot":"pin-input-slot"},l(n),{inputmode:"numeric",class:l(R)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",o.class)}),null,16,["class"]))}});export{ye as _,ge as a,be as b};
