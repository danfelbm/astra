import{a as D,b as j,c as B,_ as p}from"./CardTitle.vue_vue_type_script_setup_true_lang-BGyo0yeJ.js";import{_ as P}from"./CardFooter.vue_vue_type_script_setup_true_lang-COPGalJF.js";import{c as $,_ as g}from"./createLucideIcon-Bgm72SpE.js";import{_ as b}from"./index-DCaFXfvI.js";import{_ as V}from"./Progress.vue_vue_type_script_setup_true_lang-BYSMcPUC.js";import{_ as z,b as L}from"./index-DJ86uzda.js";import{_ as T,a as A,b as I,e as y,d as N}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-736Vx309.js";import{E as q}from"./ellipsis-D3jtFnbV.js";import{P as H}from"./pen-4_x-oGLO.js";import{P as F}from"./plus-Cdk1dADm.js";import{C as S}from"./copy-DuChgs6v.js";import{T as _}from"./trash-2-HQzTGKqd.js";import{C as O}from"./calendar-days-B2NdkSWP.js";import{C as U}from"./clock-C1riKzWv.js";import{E as G}from"./eye-BETTZgr0.js";import{d as J,c as v,b as f,w as i,e as a,j as o,f as t,g as l,n as w,h as m,t as c,i as h,F as K,k as Q,m as n,y as R}from"./app-Cps90vG2.js";import{f as W,e as X}from"./es-BDPlFIsO.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=$("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=$("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),te={class:"flex items-center justify-between"},se={class:"flex items-center space-x-3"},ae={class:"flex items-center space-x-2"},ie={key:0,class:"text-sm text-muted-foreground mb-3 line-clamp-2"},ne={key:1,class:"flex items-center space-x-4 text-sm text-muted-foreground mb-3"},oe={key:0,class:"flex items-center"},le={key:1,class:"flex items-center"},re={key:2,class:"flex items-center space-x-2 mb-3"},de={class:"text-sm text-muted-foreground"},ce={key:3,class:"flex flex-wrap gap-1 mb-3"},me={class:"space-y-2"},fe={class:"flex justify-between items-center text-xs"},he={class:"font-medium"},ue={key:4,class:"mt-3 flex items-center justify-between text-xs text-muted-foreground"},ye={class:"flex items-center space-x-3"},ge={key:0,class:"flex items-center"},be={class:"w-full flex justify-between"},ve=J({__name:"HitoCard",props:{hito:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageDeliverables:{type:Boolean},showActions:{type:Boolean}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables"],setup(e){const u=e,C=v(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[u.hito.estado]||u.hito.estado),E=v(()=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[u.hito.estado]||"bg-gray-400"),M=v(()=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[u.hito.estado]||"secondary"),x=r=>{if(!r)return"";try{const s=typeof r=="string"?new Date(r):r;return W(s,"dd MMM yyyy",{locale:X})}catch{return""}};return(r,s)=>(n(),f(t(p),{class:"hover:shadow-lg transition-shadow duration-200"},{default:i(()=>[a(t(D),{class:"pb-3"},{default:i(()=>[l("div",te,[l("div",se,[l("div",{class:w([E.value,"w-2 h-2 rounded-full"])},null,2),a(t(j),{class:"text-lg font-medium"},{default:i(()=>[m(c(e.hito.nombre),1)]),_:1})]),l("div",ae,[a(t(b),{variant:M.value,class:"text-xs"},{default:i(()=>[m(c(e.hito.estado_label||C.value),1)]),_:1},8,["variant"]),e.canEdit||e.canDelete?(n(),f(t(T),{key:0},{default:i(()=>[a(t(A),{asChild:""},{default:i(()=>[a(t(g),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:i(()=>[a(t(q),{class:"h-4 w-4"})]),_:1})]),_:1}),a(t(I),{align:"end"},{default:i(()=>[e.canEdit?(n(),f(t(y),{key:0,onClick:s[0]||(s[0]=d=>r.$emit("edit",e.hito))},{default:i(()=>[a(t(H),{class:"mr-2 h-4 w-4"}),s[6]||(s[6]=m(" Editar ",-1))]),_:1})):o("",!0),e.canManageDeliverables?(n(),f(t(y),{key:1,onClick:s[1]||(s[1]=d=>r.$emit("add-entregable",e.hito))},{default:i(()=>[a(t(F),{class:"mr-2 h-4 w-4"}),s[7]||(s[7]=m(" Añadir Entregable ",-1))]),_:1})):o("",!0),a(t(y),{onClick:s[2]||(s[2]=d=>r.$emit("duplicate",e.hito))},{default:i(()=>[a(t(S),{class:"mr-2 h-4 w-4"}),s[8]||(s[8]=m(" Duplicar ",-1))]),_:1}),e.canDelete?(n(),f(t(N),{key:2})):o("",!0),e.canDelete?(n(),f(t(y),{key:3,onClick:s[3]||(s[3]=d=>r.$emit("delete",e.hito)),class:"text-red-600"},{default:i(()=>[a(t(_),{class:"mr-2 h-4 w-4"}),s[9]||(s[9]=m(" Eliminar ",-1))]),_:1})):o("",!0)]),_:1})]),_:1})):o("",!0)])])]),_:1}),a(t(B),{class:"pb-3"},{default:i(()=>[e.hito.descripcion?(n(),h("p",ie,c(e.hito.descripcion),1)):o("",!0),e.hito.fecha_inicio||e.hito.fecha_fin?(n(),h("div",ne,[e.hito.fecha_inicio?(n(),h("div",oe,[a(t(O),{class:"mr-1 h-3 w-3"}),l("span",null,c(x(e.hito.fecha_inicio)),1)])):o("",!0),e.hito.fecha_fin?(n(),h("div",le,[a(t(Z),{class:"mr-1 h-3 w-3"}),l("span",null,c(x(e.hito.fecha_fin)),1)])):o("",!0)])):o("",!0),e.hito.responsable?(n(),h("div",re,[a(t(z),{class:"h-6 w-6"},{default:i(()=>[a(t(L),{class:"text-xs"},{default:i(()=>{var d,k;return[m(c((k=(d=e.hito.responsable.name)==null?void 0:d.charAt(0))==null?void 0:k.toUpperCase()),1)]}),_:1})]),_:1}),l("span",de,c(e.hito.responsable.name),1)])):o("",!0),e.hito.etiquetas&&e.hito.etiquetas.length>0?(n(),h("div",ce,[(n(!0),h(K,null,Q(e.hito.etiquetas.slice(0,3),d=>(n(),f(t(b),{key:d.id,variant:"outline",class:"text-xs",style:R({borderColor:d.color||"#94a3b8",color:d.color||"#64748b"})},{default:i(()=>[m(c(d.nombre),1)]),_:2},1032,["style"]))),128)),e.hito.etiquetas.length>3?(n(),f(t(b),{key:0,variant:"outline",class:"text-xs"},{default:i(()=>[m(" +"+c(e.hito.etiquetas.length-3),1)]),_:1})):o("",!0)])):o("",!0),l("div",me,[l("div",fe,[s[10]||(s[10]=l("span",{class:"text-muted-foreground"},"Progreso",-1)),l("span",he,c(e.hito.porcentaje_completado)+"%",1)]),a(t(V),{"model-value":e.hito.porcentaje_completado,class:"h-2"},null,8,["model-value"])]),e.hito.entregables&&e.hito.entregables.length>0?(n(),h("div",ue,[l("div",ye,[l("span",null,c(e.hito.entregables_completados||0)+"/"+c(e.hito.total_entregables||e.hito.entregables.length)+" entregables",1)]),e.hito.dias_restantes!==null?(n(),h("div",ge,[a(t(U),{class:"mr-1 h-3 w-3"}),l("span",{class:w({"text-red-500":e.hito.dias_restantes<0,"text-orange-500":e.hito.dias_restantes<=7})},c(e.hito.dias_restantes<0?`Vencido hace ${Math.abs(e.hito.dias_restantes)} días`:`${e.hito.dias_restantes} días restantes`),3)])):o("",!0)])):o("",!0)]),_:1}),e.showActions?(n(),f(t(P),{key:0,class:"pt-3 border-t"},{default:i(()=>[l("div",be,[a(t(g),{variant:"ghost",size:"sm",onClick:s[4]||(s[4]=d=>r.$emit("view",e.hito))},{default:i(()=>[a(t(G),{class:"mr-2 h-4 w-4"}),s[11]||(s[11]=m(" Ver detalles ",-1))]),_:1}),a(t(g),{variant:"outline",size:"sm",onClick:s[5]||(s[5]=d=>r.$emit("view-entregables",e.hito))},{default:i(()=>[a(t(ee),{class:"mr-2 h-4 w-4"}),s[12]||(s[12]=m(" Entregables ",-1))]),_:1})])]),_:1})):o("",!0)]),_:1}))}}),Ne=Y(ve,[["__scopeId","data-v-d03e6b61"]]);export{Ne as H,ee as L};
