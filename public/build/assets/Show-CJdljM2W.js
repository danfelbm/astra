import{_ as F}from"./UserLayout.vue_vue_type_script_setup_true_lang-DqOXASY0.js";import{d as G,r as v,p as J,s as P,c as K,i as u,e as a,f as t,q as O,w as s,g as i,b as c,j as f,v as j,h as n,t as m,m as l,F as h,k as V}from"./app-B19RVYzd.js";import{_ as x,a as S,b as E,c as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dc3V5pfF.js";import{_ as D}from"./CardDescription.vue_vue_type_script_setup_true_lang-FW340nAa.js";import{_ as U}from"./createLucideIcon-aszt4L0l.js";import{_ as b}from"./index-CgfHMgFe.js";import{_ as Q,a as W,b as $,c as k}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Dj_ewFkz.js";import{_ as B,a as C,b as H}from"./index-ul6aP6b-.js";import{_ as X}from"./ContratoCard.vue_vue_type_script_setup_true_lang-R6P9gPFp.js";import{H as Y}from"./HitoCard-CHMUUkm1.js";import{M as N,_ as Z,a as ee,b as te}from"./ProyectoInfoCard.vue_vue_type_script_setup_true_lang-BREJJIDw.js";import{_ as oe}from"./CamposPersonalizadosDisplay.vue_vue_type_script_setup_true_lang-DRc-mQ4s.js";import{A as ae}from"./arrow-left-BOtkYih0.js";import{S as se}from"./square-pen-D1RuF-5c.js";import{I as re}from"./info-BVel4wbp.js";import{U as ie}from"./users-B0la7xmv.js";import{I as le}from"./image-wtAZQM3R.js";import"./useFlashMessages-8uiPkdNy.js";import"./index-u4lOWVOq.js";import"./floating-ui.vue-DkzHPyyf.js";import"./x-CYDg_Qo_.js";import"./Input.vue_vue_type_script_setup_true_lang-BIXwy42n.js";import"./index-vuRTfX1v.js";import"./shield-819HTas1.js";import"./user-UHjTmfMS.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BDHkTvUL.js";import"./chevron-right-CUflTZxm.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-C-SCRv_l.js";import"./VisuallyHidden-BXwTHt-D.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BwQkxbgk.js";import"./check-1krMyBsy.js";import"./Label.vue_vue_type_script_setup_true_lang-DVEtY4GE.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Bth9MiIU.js";import"./index-SvB4RLMK.js";import"./circle-alert-BQG79paC.js";import"./map-pin-BJ49Q8es.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CK2L_aVQ.js";import"./ellipsis-BPn1HKrH.js";import"./usePermissions-CyJDOpYx.js";import"./square-check-big-DVC2YlqL.js";import"./file-text-BosQ8-3v.js";import"./folder-open-BoBvE1SO.js";import"./index-D735jDtf.js";import"./RovingFocusItem-D1SWI2Qg.js";import"./utils-DN22hGA3.js";import"./calendar-CI360gJJ.js";import"./dollar-sign-4YaPFVEO.js";import"./eye-62yXpoOT.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-pahWGF0E.js";import"./Progress.vue_vue_type_script_setup_true_lang-Bvl6XuN7.js";import"./calendar-days-D03BsS9B.js";import"./clock-C4sDejwG.js";import"./pen-IE2IFo-6.js";import"./plus-CTO6Jf3N.js";import"./copy-DAeKxnag.js";import"./trash-2-qkAwQibM.js";import"./es-BDPlFIsO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-B3D4lYO5.js";import"./AccordionContent.vue_vue_type_script_setup_true_lang-D3mCD8lu.js";import"./useArrowNavigation-B5rxJs06.js";import"./Textarea.vue_vue_type_script_setup_true_lang-CKpMpYLb.js";import"./external-link-Dmsf_nh0.js";import"./download-BcVW4Vy1.js";import"./circle-check-big-C2GRjElW.js";import"./circle-play-CXctsNtn.js";import"./target-BL77mcJI.js";import"./flag-OvUI504p.js";import"./parseISO-DFjB8F03.js";const ne={class:"flex h-full flex-1 flex-col rounded-xl p-4"},de={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},me={class:"flex items-center gap-4"},ce={class:"text-2xl font-bold text-gray-900 dark:text-white"},ue={key:0,class:"text-gray-600 dark:text-gray-400 mt-1"},fe={class:"space-y-4"},pe={class:"pb-4 border-b"},ye={key:0,class:"flex items-center gap-3"},ge={class:"font-medium"},ve={class:"text-sm text-gray-500"},be={key:1,class:"text-gray-500"},he={key:0},xe={class:"space-y-2"},we={class:"flex-1"},$e={class:"text-sm font-medium"},ke={class:"text-xs text-gray-500"},_e={key:1},Pe={class:"space-y-3"},Ve={class:"space-y-6"},Se={class:"text-center"},Ft=G({__name:"Show",props:{proyecto:{},totales:{},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(o){const p=o,z=["general","usuarios","evidencias","hitos"],_=v((()=>{const e=new URLSearchParams(window.location.search).get("tab");return e&&z.includes(e)?e:"general"})());J(_,d=>{const e=`/miembro/mis-proyectos/${p.proyecto.id}?tab=${d}`;P.get(e,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const M=K(()=>{var e,r;const d=(e=p.proyecto.responsable)==null?void 0:e.id;return((r=p.proyecto.responsable)==null?void 0:r.id)===d?!0:p.proyecto.participantes?p.proyecto.participantes.some(y=>{var g;return((g=y.pivot)==null?void 0:g.rol)==="gestor"}):!1});v(!1),v(!1),v(!1),v(!1);const L=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),R=d=>{if(!d)return null;const e=Math.ceil((new Date(d).getTime()-new Date().getTime())/(1e3*60*60*24));return e<0?{texto:`Vencido hace ${Math.abs(e)} días`,urgente:!0}:e===0?{texto:"Vence hoy",urgente:!0}:e===1?{texto:"Vence mañana",urgente:!0}:e<=7?{texto:`${e} días restantes`,urgente:!0}:{texto:`${e} días restantes`,urgente:!1}};p.proyecto.fecha_fin&&R(p.proyecto.fecha_fin);const I=d=>d.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),q=d=>{P.visit(`/miembro/mis-hitos/${d.id}`)},A=d=>{P.visit(`/miembro/mis-hitos/${d.id}`)};return(d,e)=>(l(),u(h,null,[a(t(O),{title:`Mi Proyecto: ${o.proyecto.nombre}`},null,8,["title"]),a(F,null,{default:s(()=>[i("div",ne,[i("div",de,[i("div",me,[a(t(j),{href:"/miembro/mis-proyectos"},{default:s(()=>[a(t(U),{variant:"ghost",size:"sm"},{default:s(()=>[a(t(ae),{class:"mr-2 h-4 w-4"}),e[1]||(e[1]=n(" Volver ",-1))]),_:1})]),_:1}),i("div",null,[i("h1",ce,m(o.proyecto.nombre),1),o.proyecto.descripcion?(l(),u("p",ue,m(o.proyecto.descripcion),1)):f("",!0)])]),o.canEdit?(l(),c(t(j),{key:0,href:`/miembro/mis-proyectos/${o.proyecto.id}/edit`},{default:s(()=>[a(t(U),null,{default:s(()=>[a(t(se),{class:"mr-2 h-4 w-4"}),e[2]||(e[2]=n(" Editar Proyecto ",-1))]),_:1})]),_:1},8,["href"])):f("",!0)]),a(t(Q),{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=r=>_.value=r),class:"w-full"},{default:s(()=>[a(t(W),{class:"grid w-full grid-cols-4"},{default:s(()=>[a(t($),{value:"general"},{default:s(()=>[a(t(re),{class:"mr-2 h-4 w-4"}),e[3]||(e[3]=n(" General ",-1))]),_:1}),a(t($),{value:"hitos"},{default:s(()=>{var r;return[a(t(N),{class:"mr-2 h-4 w-4"}),e[4]||(e[4]=n(" Hitos y Entregables ",-1)),(r=o.totales)!=null&&r.hitos?(l(),c(t(b),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:s(()=>[n(m(o.totales.hitos),1)]),_:1})):f("",!0)]}),_:1}),a(t($),{value:"usuarios"},{default:s(()=>{var r,y;return[a(t(ie),{class:"mr-2 h-4 w-4"}),e[5]||(e[5]=n(" Personas ",-1)),(r=o.totales)!=null&&r.usuarios||(y=o.totales)!=null&&y.contratos?(l(),c(t(b),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:s(()=>{var g,T;return[n(m((((g=o.totales)==null?void 0:g.usuarios)||0)+(((T=o.totales)==null?void 0:T.contratos)||0)),1)]}),_:1})):f("",!0)]}),_:1}),a(t($),{value:"evidencias"},{default:s(()=>{var r;return[a(t(le),{class:"mr-2 h-4 w-4"}),e[6]||(e[6]=n(" Evidencias ",-1)),(r=o.totales)!=null&&r.evidencias?(l(),c(t(b),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:s(()=>[n(m(o.totales.evidencias),1)]),_:1})):f("",!0)]}),_:1})]),_:1}),a(t(k),{value:"general",class:"space-y-4 mt-6"},{default:s(()=>[a(Z,{responsable:o.proyecto.responsable,creador:o.proyecto.creador,"created-at":o.proyecto.created_at,"updated-at":o.proyecto.updated_at},null,8,["responsable","creador","created-at","updated-at"]),a(ee,{estado:o.proyecto.estado,"estado-label":o.proyecto.estado_label,prioridad:o.proyecto.prioridad,"prioridad-label":o.proyecto.prioridad_label,"porcentaje-completado":o.proyecto.porcentaje_completado,"fecha-inicio":o.proyecto.fecha_inicio,"fecha-fin":o.proyecto.fecha_fin,"duracion-dias":o.proyecto.duracion_dias},null,8,["estado","estado-label","prioridad","prioridad-label","porcentaje-completado","fecha-inicio","fecha-fin","duracion-dias"]),o.proyecto.campos_personalizados&&o.proyecto.campos_personalizados.length>0?(l(),c(oe,{key:0,valores:o.proyecto.campos_personalizados,titulo:"Información Adicional"},null,8,["valores"])):f("",!0)]),_:1}),a(t(k),{value:"usuarios",class:"space-y-4 mt-6"},{default:s(()=>[a(t(x),null,{default:s(()=>[a(t(S),null,{default:s(()=>[a(t(E),null,{default:s(()=>[...e[7]||(e[7]=[n("Usuarios del Proyecto",-1)])]),_:1}),a(t(D),null,{default:s(()=>[...e[8]||(e[8]=[n(" Personas asignadas y colaborando en este proyecto ",-1)])]),_:1})]),_:1}),a(t(w),null,{default:s(()=>[i("div",fe,[i("div",pe,[e[10]||(e[10]=i("h4",{class:"text-sm font-medium mb-3"},"Responsable del Proyecto",-1)),o.proyecto.responsable?(l(),u("div",ye,[a(t(B),{class:"h-10 w-10"},{default:s(()=>[a(t(C),{src:o.proyecto.responsable.avatar},null,8,["src"]),a(t(H),null,{default:s(()=>[n(m(I(o.proyecto.responsable.name)),1)]),_:1})]),_:1}),i("div",null,[i("p",ge,m(o.proyecto.responsable.name),1),i("p",ve,m(o.proyecto.responsable.email),1)]),a(t(b),{class:"ml-auto"},{default:s(()=>[...e[9]||(e[9]=[n("Responsable",-1)])]),_:1})])):(l(),u("p",be,"Sin responsable asignado"))]),o.proyecto.participantes&&o.proyecto.participantes.length>0?(l(),u("div",he,[e[11]||(e[11]=i("h4",{class:"text-sm font-medium mb-3"},"Participantes",-1)),i("div",xe,[(l(!0),u(h,null,V(o.proyecto.participantes,r=>{var y;return l(),u("div",{key:r.id,class:"flex items-center gap-3 p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800"},[a(t(B),{class:"h-8 w-8"},{default:s(()=>[a(t(C),{src:r.avatar},null,8,["src"]),a(t(H),null,{default:s(()=>[n(m(I(r.name)),1)]),_:2},1024)]),_:2},1024),i("div",we,[i("p",$e,m(r.name),1),i("p",ke,m(r.email),1)]),(y=r.pivot)!=null&&y.rol?(l(),c(t(b),{key:0,variant:"outline",class:"text-xs"},{default:s(()=>[n(m(r.pivot.rol),1)]),_:2},1024)):f("",!0)])}),128))])])):(l(),u("div",_e,[...e[12]||(e[12]=[i("p",{class:"text-gray-500 text-center py-4"},"No hay participantes adicionales",-1)])]))])]),_:1})]),_:1}),o.proyecto.contratos&&o.proyecto.contratos.length>0?(l(),c(t(x),{key:0,class:"mt-6"},{default:s(()=>[a(t(S),null,{default:s(()=>[a(t(E),null,{default:s(()=>[...e[13]||(e[13]=[n("Contratos del Proyecto",-1)])]),_:1}),a(t(D),null,{default:s(()=>[...e[14]||(e[14]=[n(" Haz clic en cualquier contrato para ver sus detalles ",-1)])]),_:1})]),_:1}),a(t(w),null,{default:s(()=>[i("div",Pe,[(l(!0),u(h,null,V(o.proyecto.contratos,r=>(l(),c(X,{key:r.id,contrato:r,"show-proyecto":!1,"show-actions":!1,"view-mode":"user",compact:""},null,8,["contrato"]))),128))])]),_:1})]),_:1})):f("",!0)]),_:1}),a(t(k),{value:"evidencias",class:"space-y-4 mt-6"},{default:s(()=>[a(te,{contratos:o.proyecto.contratos||[],"proyecto-id":o.proyecto.id,modo:"user","puede-gestionar-estado":M.value,"format-date":L},null,8,["contratos","proyecto-id","puede-gestionar-estado"])]),_:1}),a(t(k),{value:"hitos",class:"space-y-4 mt-6"},{default:s(()=>[o.proyecto.hitos&&o.proyecto.hitos.length>0?(l(),c(t(x),{key:0},{default:s(()=>[a(t(S),null,{default:s(()=>[a(t(E),null,{default:s(()=>[...e[15]||(e[15]=[n("Hitos y Entregables",-1)])]),_:1}),a(t(D),null,{default:s(()=>[...e[16]||(e[16]=[n(" Seguimiento de los hitos y entregables del proyecto ",-1)])]),_:1})]),_:1}),a(t(w),null,{default:s(()=>[i("div",Ve,[(l(!0),u(h,null,V(o.proyecto.hitos,r=>(l(),c(Y,{key:r.id,hito:r,"show-entregables":!0,"show-actions":!0,onView:q,onViewEntregables:A},null,8,["hito"]))),128))])]),_:1})]),_:1})):(l(),c(t(x),{key:1},{default:s(()=>[a(t(w),{class:"py-8"},{default:s(()=>[i("div",Se,[a(t(N),{class:"mx-auto h-12 w-12 text-gray-400"}),e[17]||(e[17]=i("p",{class:"mt-2 text-sm text-gray-600"},"No hay hitos definidos",-1))])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Ft as default};
