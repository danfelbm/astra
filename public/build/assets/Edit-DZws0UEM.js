import{d as Ve,u as Ce,r as k,c as V,b as g,w as o,g as i,e as a,j as c,t as m,m as u,f as e,h as d,l as we,i as p,n as H,F as U,k as E,s as Ue}from"./app-D3uL80DL.js";import{_ as Ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-5b8sApI_.js";import{_ as S,a as z,b as A,c as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-qn2XrUlO.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-DxN2cRJp.js";import{_ as h}from"./createLucideIcon-BrIWJaVK.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-uaeWT7ys.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-gGRu1ZPZ.js";import{_ as re}from"./Textarea.vue_vue_type_script_setup_true_lang-CFsXNmGr.js";import{_ as M,a as T,b as L,c as X,d as G}from"./SelectValue.vue_vue_type_script_setup_true_lang-BOihT4Gi.js";import{_ as Se,a as ie}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-AQp3DE-T.js";import{_ as J}from"./index-oixONa7Y.js";import{_ as K,a as O,b as Q}from"./index-bPeRYsmi.js";import{_ as ne,a as de}from"./index-Qvoyh9nE.js";import{_ as ue}from"./AddUsersModal.vue_vue_type_script_setup_true_lang-CZ7z4err.js";import{_ as ze}from"./CamposPersonalizadosForm.vue_vue_type_script_setup_true_lang-MgQqbrk7.js";import{E as Ae}from"./EtiquetaSelector-B5ktQF1r.js";import{u as qe}from"./useToast-CQ2HDH3p.js";import{C as De}from"./circle-check-big-DAa-ZeGI.js";import{F as Pe}from"./flag-7MApIWOX.js";import{X as me}from"./x-BzM2ne4W.js";import{U as pe}from"./user-plus-DxCNeUMI.js";import{T as je}from"./tag-BE3jt4iA.js";import{C as Re}from"./circle-alert-k0Ae0_nD.js";import{A as Fe}from"./arrow-left-B6BcXQnN.js";import{S as Be}from"./save-BfTWmqzN.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BznyTpGx.js";import"./index-TDmGTbds.js";import"./floating-ui.vue-BNjM7QfA.js";import"./shield-B6xROWvg.js";import"./user-CWm-7GfG.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-oX-V50Fz.js";import"./chevron-right-Dr7PM1oh.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BH87WPyf.js";import"./VisuallyHidden-C1r3Vs3T.js";import"./index-Co0N6nza.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CMVjCFVi.js";import"./index-B0qEHdwE.js";import"./map-pin-D30VnEkT.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D6KXfYdF.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-Di9ublVQ.js";import"./chevrons-up-down-MvU5-ZU8.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C247yu8_.js";import"./users-DQdQrWqw.js";import"./target-oXTbk5NL.js";import"./vote-BVQT8UmH.js";import"./folder-open-8K0iuanW.js";import"./send-DuzmAr6j.js";import"./file-text-DcJUgIfz.js";import"./briefcase-BEuFNtLg.js";import"./calendar-CDRuCcQt.js";import"./megaphone-NaazjYw7.js";import"./user-check-DUScA6Vz.js";import"./clipboard-list-DWwYfDFn.js";import"./mail-TC-dEBUZ.js";import"./message-square-C2LYB39K.js";import"./external-link-fPhA16MY.js";import"./panel-left-uN3Ol8Pl.js";import"./check-BgfrpJ3m.js";import"./index-dOclHMU_.js";import"./RovingFocusItem-ByMnhA07.js";import"./utils-Br8-RYzW.js";import"./VisuallyHiddenInput-DZUA9VZv.js";import"./circle-_8hYjrZ-.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-D75gecXx.js";import"./search-BXL9qeIH.js";import"./loader-circle-C49th0rO.js";import"./chevron-left-CHTG65PF.js";import"./CampoPersonalizadoInput.vue_vue_type_script_setup_true_lang-LIOmybRr.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BH6AUmpH.js";import"./TabsTrigger.vue_vue_type_script_setup_true_lang-DyhNKN5y.js";import"./index-Bjt9oCqj.js";import"./useKbd-kRIii9yh.js";import"./useEtiquetaHierarchy-Bbixf3DF.js";import"./list-BdV2-Xd-.js";import"./tree-pine-ivYGHfFV.js";import"./plus-D-R--w-I.js";import"./zap-CvTlzA1l.js";import"./layers-DDC6xzf7.js";import"./trending-up-DSKbwzfh.js";import"./award-DnZFa3SG.js";import"./hash-Dcrv1ENn.js";const He={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ie={class:"text-muted-foreground mt-2"},Me={class:"grid gap-4 md:grid-cols-3"},Te={class:"font-medium"},Le={class:"font-medium"},Xe={key:0,class:"text-sm text-red-600 mt-1"},Ge={key:0,class:"text-sm text-red-600 mt-1"},Je={class:"grid gap-4 md:grid-cols-2"},Ke={class:"flex items-center gap-2"},Oe={class:"grid gap-4 md:grid-cols-2"},Qe={key:0,class:"text-sm text-red-600 mt-1"},We={key:0,class:"text-sm text-red-600 mt-1"},Ye={class:"space-y-2"},Ze={key:0,class:"p-3 bg-muted rounded-lg flex items-center justify-between"},es={class:"flex items-center gap-2"},ss={class:"font-medium"},as={class:"text-sm text-muted-foreground"},os={key:0,class:"text-sm text-red-600 mt-1"},ts={class:"flex items-center justify-between mb-2"},ls={key:0,class:"space-y-2 mt-3"},rs={class:"flex items-center gap-2"},is={class:"font-medium"},ns={class:"text-sm text-muted-foreground"},ds={key:1,class:"text-sm text-muted-foreground mt-3"},us={key:2,class:"space-y-4 p-4 border rounded-lg"},ms={class:"grid gap-4 md:grid-cols-3"},ps={class:"flex items-center space-x-2"},cs={class:"flex items-center space-x-2"},fs={key:0,class:"space-y-2"},bs={class:"flex items-center gap-2"},_s={class:"text-sm font-medium"},gs={class:"list-disc pl-4"},vs={class:"flex justify-end gap-2"},ys=Ve({__name:"Edit",props:{proyecto:{},hito:{},entregable:{},usuarios:{},usuariosAsignados:{},camposPersonalizados:{},valoresCamposPersonalizados:{},categorias:{},estados:{},prioridades:{},roles:{}},setup(f){var ee,se,ae;const n=f,{toast:R}=qe(),l=Ce({nombre:n.entregable.nombre||"",descripcion:n.entregable.descripcion||"",fecha_inicio:n.entregable.fecha_inicio||"",fecha_fin:n.entregable.fecha_fin||"",estado:n.entregable.estado||"pendiente",prioridad:n.entregable.prioridad||"media",responsable_id:n.entregable.responsable_id,usuarios_asignados:n.usuariosAsignados||[],campos_personalizados:n.valoresCamposPersonalizados||{},etiquetas:((ee=n.entregable.etiquetas)==null?void 0:ee.map(r=>r.id))??[],orden:n.entregable.orden||1,notas:""}),ce=k(!1),$=k(null),j=k("colaborador"),F=k(!1),B=k(!1),{route:W}=window,b=k(null),_=k(new Map);if(n.usuarios.forEach(r=>_.value.set(r.id,r)),n.entregable.responsable_id){const r=n.usuarios.find(s=>s.id===n.entregable.responsable_id);if(r)b.value=r;else{const s=n.entregable;b.value={id:n.entregable.responsable_id,name:((se=s.responsable)==null?void 0:se.name)||`Usuario #${n.entregable.responsable_id}`,email:((ae=s.responsable)==null?void 0:ae.email)||""},_.value.set(n.entregable.responsable_id,b.value)}}n.usuariosAsignados.forEach(r=>{var s,t,v;_.value.has(r.user_id)||_.value.set(r.user_id,{id:((s=r.user)==null?void 0:s.id)||r.user_id,name:((t=r.user)==null?void 0:t.name)||`Usuario #${r.user_id}`,email:((v=r.user)==null?void 0:v.email)||""})});const fe=V(()=>[{name:"rol",label:"Rol",type:"select",options:[{value:"colaborador",label:"Colaborador"},{value:"revisor",label:"Revisor"}],value:"colaborador",required:!0}]),be=V(()=>{const r=l.usuarios_asignados.map(s=>s.user_id);return l.responsable_id&&r.push(l.responsable_id),r}),_e=r=>{if(r.userIds.length>0){const s=r.userIds[0];l.responsable_id=s,_.value.has(s)?b.value=_.value.get(s)||null:(b.value={id:s,name:`Usuario seleccionado (ID: ${s})`,email:"Se actualizará al guardar"},_.value.set(s,b.value))}},ge=r=>{r.userIds.forEach(s=>{l.usuarios_asignados.some(v=>v.user_id===s)||(l.usuarios_asignados.push({user_id:s,rol:r.extraData.rol||"colaborador"}),_.value.has(s)||_.value.set(s,{id:s,name:`Usuario #${s}`,email:"Pendiente de actualizar"}))})},ve=V(()=>[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:n.proyecto.nombre,href:`/admin/proyectos/${n.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${n.proyecto.id}/hitos`},{title:n.hito.nombre,href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}`},{title:"Entregables",href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`},{title:"Editar Entregable"}]),ye=()=>{const r={...l.data(),usuarios:l.usuarios_asignados};delete r.usuarios_asignados,l.transform(()=>r).put(`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables/${n.entregable.id}`,{onSuccess:()=>{R.success("Entregable actualizado correctamente")},onError:()=>{R.error("Error al actualizar el entregable")}})},xe=()=>{Ue.get(`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`)},he=()=>{if(!$.value)return;if(l.usuarios_asignados.some(s=>s.user_id===$.value)){R.warning("Este usuario ya está asignado");return}l.usuarios_asignados.push({user_id:$.value,rol:j.value}),$.value=null,j.value="colaborador"},Y=r=>{const s=l.usuarios_asignados.findIndex(t=>t.user_id===r);s>-1&&l.usuarios_asignados.splice(s,1)},x=r=>_.value.has(r)?_.value.get(r):n.usuarios.find(s=>s.id===r),$e=V(()=>{const r=l.usuarios_asignados.map(s=>s.user_id);return l.responsable_id&&r.push(l.responsable_id),n.usuarios.filter(s=>!r.includes(s.id))}),N=V(()=>{const r=[];return l.nombre||r.push("El nombre es requerido"),l.nombre.length>255&&r.push("El nombre no puede exceder 255 caracteres"),l.fecha_inicio&&l.fecha_fin&&new Date(l.fecha_inicio)>new Date(l.fecha_fin)&&r.push("La fecha de inicio no puede ser posterior a la fecha de fin"),l.responsable_id||r.push("Debe asignar un responsable"),r}),ke=V(()=>N.value.length===0&&!l.processing),Z=V(()=>{var r;if(n.entregable.estado==="completado"&&n.entregable.completado_at){const s=new Date(n.entregable.completado_at).toLocaleDateString("es-ES"),t=((r=n.entregable.completado_por)==null?void 0:r.name)||"Usuario desconocido";return`Completado el ${s} por ${t}`}return null});return(r,s)=>(u(),g(Ee,{breadcrumbs:ve.value},{default:o(()=>[i("div",He,[i("div",null,[s[16]||(s[16]=i("h2",{class:"text-3xl font-bold tracking-tight"},"Editar Entregable",-1)),i("p",Ie,' Modificar el entregable "'+m(f.entregable.nombre)+'" ',1)]),Z.value?(u(),g(e(ne),{key:0,class:"bg-green-50 dark:bg-green-900/20 border-green-200"},{default:o(()=>[a(e(De),{class:"h-4 w-4 text-green-600"}),a(e(de),{class:"text-green-800 dark:text-green-200"},{default:o(()=>[d(m(Z.value),1)]),_:1})]),_:1})):c("",!0),a(e(S),null,{default:o(()=>[a(e(z),null,{default:o(()=>[a(e(A),{class:"text-base"},{default:o(()=>[...s[17]||(s[17]=[d("Información del Hito",-1)])]),_:1})]),_:1}),a(e(q),null,{default:o(()=>[i("div",Me,[i("div",null,[s[18]||(s[18]=i("p",{class:"text-sm text-muted-foreground"},"Hito",-1)),i("p",Te,m(f.hito.nombre),1)]),i("div",null,[s[19]||(s[19]=i("p",{class:"text-sm text-muted-foreground"},"Estado del Hito",-1)),a(e(J),null,{default:o(()=>[d(m(f.hito.estado_label||f.hito.estado),1)]),_:1})]),i("div",null,[s[20]||(s[20]=i("p",{class:"text-sm text-muted-foreground"},"Progreso del Hito",-1)),i("p",Le,m(f.hito.porcentaje_completado||0)+"%",1)])])]),_:1})]),_:1}),i("form",{onSubmit:we(ye,["prevent"]),class:"space-y-4"},[a(e(S),null,{default:o(()=>[a(e(z),null,{default:o(()=>[a(e(A),null,{default:o(()=>[...s[21]||(s[21]=[d("Información Básica",-1)])]),_:1}),a(e(P),null,{default:o(()=>[...s[22]||(s[22]=[d(" Datos principales del entregable ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:o(()=>[i("div",null,[a(e(y),{for:"nombre",class:"required"},{default:o(()=>[...s[23]||(s[23]=[d(" Nombre del entregable ",-1)])]),_:1}),a(e(I),{id:"nombre",modelValue:e(l).nombre,"onUpdate:modelValue":s[0]||(s[0]=t=>e(l).nombre=t),placeholder:"Ej: Documento de diseño técnico",class:H({"border-red-500":e(l).errors.nombre})},null,8,["modelValue","class"]),e(l).errors.nombre?(u(),p("p",Xe,m(e(l).errors.nombre),1)):c("",!0)]),i("div",null,[a(e(y),{for:"descripcion"},{default:o(()=>[...s[24]||(s[24]=[d(" Descripción ",-1)])]),_:1}),a(e(re),{id:"descripcion",modelValue:e(l).descripcion,"onUpdate:modelValue":s[1]||(s[1]=t=>e(l).descripcion=t),placeholder:"Describe el entregable y sus objetivos...",rows:"4",class:H({"border-red-500":e(l).errors.descripcion})},null,8,["modelValue","class"]),e(l).errors.descripcion?(u(),p("p",Ge,m(e(l).errors.descripcion),1)):c("",!0)]),i("div",Je,[i("div",null,[a(e(y),{for:"estado"},{default:o(()=>[...s[25]||(s[25]=[d(" Estado ",-1)])]),_:1}),a(e(M),{modelValue:e(l).estado,"onUpdate:modelValue":s[2]||(s[2]=t=>e(l).estado=t)},{default:o(()=>[a(e(T),null,{default:o(()=>[a(e(L),{placeholder:"Seleccionar estado"})]),_:1}),a(e(X),null,{default:o(()=>[(u(!0),p(U,null,E(f.estados,t=>(u(),g(e(G),{key:t.value,value:t.value},{default:o(()=>[d(m(t.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[a(e(y),{for:"prioridad"},{default:o(()=>[...s[26]||(s[26]=[d(" Prioridad ",-1)])]),_:1}),a(e(M),{modelValue:e(l).prioridad,"onUpdate:modelValue":s[3]||(s[3]=t=>e(l).prioridad=t)},{default:o(()=>[a(e(T),null,{default:o(()=>[a(e(L),{placeholder:"Seleccionar prioridad"})]),_:1}),a(e(X),null,{default:o(()=>[(u(!0),p(U,null,E(f.prioridades,t=>(u(),g(e(G),{key:t.value,value:t.value},{default:o(()=>[i("div",Ke,[a(e(Pe),{class:H(["h-4 w-4",{"text-blue-500":t.value==="baja","text-yellow-500":t.value==="media","text-red-500":t.value==="alta"}])},null,8,["class"]),d(" "+m(t.label),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1}),a(e(S),null,{default:o(()=>[a(e(z),null,{default:o(()=>[a(e(A),null,{default:o(()=>[...s[27]||(s[27]=[d("Fechas",-1)])]),_:1}),a(e(P),null,{default:o(()=>[...s[28]||(s[28]=[d(" Define el período de ejecución del entregable ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:o(()=>[i("div",Oe,[i("div",null,[a(e(y),{for:"fecha_inicio"},{default:o(()=>[...s[29]||(s[29]=[d(" Fecha de inicio ",-1)])]),_:1}),a(e(I),{id:"fecha_inicio",modelValue:e(l).fecha_inicio,"onUpdate:modelValue":s[4]||(s[4]=t=>e(l).fecha_inicio=t),type:"date",disabled:e(l).processing},null,8,["modelValue","disabled"]),e(l).errors.fecha_inicio?(u(),p("p",Qe,m(e(l).errors.fecha_inicio),1)):c("",!0)]),i("div",null,[a(e(y),{for:"fecha_fin"},{default:o(()=>[...s[30]||(s[30]=[d(" Fecha de fin ",-1)])]),_:1}),a(e(I),{id:"fecha_fin",modelValue:e(l).fecha_fin,"onUpdate:modelValue":s[5]||(s[5]=t=>e(l).fecha_fin=t),type:"date",disabled:e(l).processing},null,8,["modelValue","disabled"]),e(l).errors.fecha_fin?(u(),p("p",We,m(e(l).errors.fecha_fin),1)):c("",!0)])])]),_:1})]),_:1}),a(e(S),null,{default:o(()=>[a(e(z),null,{default:o(()=>[a(e(A),null,{default:o(()=>[...s[31]||(s[31]=[d("Asignación",-1)])]),_:1}),a(e(P),null,{default:o(()=>[...s[32]||(s[32]=[d(" Asigna un responsable y colaboradores al entregable ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:o(()=>[i("div",null,[a(e(y),{for:"responsable",class:"required"},{default:o(()=>[...s[33]||(s[33]=[d(" Responsable principal ",-1)])]),_:1}),i("div",Ye,[b.value?(u(),p("div",Ze,[i("div",es,[a(e(K),{class:"h-8 w-8"},{default:o(()=>[b.value.avatar?(u(),g(e(O),{key:0,src:b.value.avatar},null,8,["src"])):c("",!0),a(e(Q),null,{default:o(()=>[d(m(b.value.name.substring(0,2).toUpperCase()),1)]),_:1})]),_:1}),i("div",null,[i("p",ss,m(b.value.name),1),i("p",as,m(b.value.email),1)])]),a(e(h),{type:"button",variant:"ghost",size:"sm",onClick:s[6]||(s[6]=t=>{e(l).responsable_id=null,b.value=null})},{default:o(()=>[a(e(me),{class:"h-4 w-4"})]),_:1})])):c("",!0),a(e(h),{type:"button",variant:"outline",onClick:s[7]||(s[7]=t=>F.value=!0),class:"w-full"},{default:o(()=>[a(e(pe),{class:"h-4 w-4 mr-2"}),d(" "+m(b.value?"Cambiar Responsable":"Seleccionar Responsable"),1)]),_:1})]),e(l).errors.responsable_id?(u(),p("p",os,m(e(l).errors.responsable_id),1)):c("",!0)]),i("div",null,[i("div",ts,[a(e(y),null,{default:o(()=>[...s[34]||(s[34]=[d(" Colaboradores adicionales ",-1)])]),_:1}),a(e(h),{type:"button",variant:"outline",size:"sm",onClick:s[8]||(s[8]=t=>B.value=!0)},{default:o(()=>[a(e(pe),{class:"mr-2 h-4 w-4"}),s[35]||(s[35]=d(" Agregar colaboradores ",-1))]),_:1})]),e(l).usuarios_asignados.length>0?(u(),p("div",ls,[(u(!0),p(U,null,E(e(l).usuarios_asignados,t=>{var v,C;return u(),p("div",{key:t.user_id,class:"p-3 bg-muted rounded-lg flex items-center justify-between"},[i("div",rs,[a(e(K),{class:"h-8 w-8"},{default:o(()=>{var w,D;return[(w=x(t.user_id))!=null&&w.avatar?(u(),g(e(O),{key:0,src:(D=x(t.user_id))==null?void 0:D.avatar},null,8,["src"])):c("",!0),a(e(Q),null,{default:o(()=>{var oe,te,le;return[d(m(((le=(te=(oe=x(t.user_id))==null?void 0:oe.name)==null?void 0:te.substring(0,2))==null?void 0:le.toUpperCase())||"US"),1)]}),_:2},1024)]}),_:2},1024),i("div",null,[i("p",is,m(((v=x(t.user_id))==null?void 0:v.name)||`Usuario #${t.user_id}`),1),i("p",ns,m(((C=x(t.user_id))==null?void 0:C.email)||""),1)]),a(e(J),{variant:"outline"},{default:o(()=>[d(m(t.rol),1)]),_:2},1024)]),a(e(h),{type:"button",variant:"ghost",size:"sm",onClick:w=>Y(t.user_id)},{default:o(()=>[a(e(me),{class:"h-4 w-4"})]),_:1},8,["onClick"])])}),128))])):(u(),p("div",ds," No hay colaboradores asignados ")),ce.value?(u(),p("div",us,[i("div",ms,[a(e(M),{modelValue:$.value,"onUpdate:modelValue":s[9]||(s[9]=t=>$.value=t)},{default:o(()=>[a(e(T),null,{default:o(()=>[a(e(L),{placeholder:"Seleccionar usuario"})]),_:1}),a(e(X),null,{default:o(()=>[(u(!0),p(U,null,E($e.value,t=>(u(),g(e(G),{key:t.id,value:t.id},{default:o(()=>[d(m(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),a(e(Se),{modelValue:j.value,"onUpdate:modelValue":s[10]||(s[10]=t=>j.value=t),class:"flex gap-4"},{default:o(()=>[i("div",ps,[a(e(ie),{value:"colaborador",id:"colaborador"}),a(e(y),{for:"colaborador"},{default:o(()=>[...s[36]||(s[36]=[d("Colaborador",-1)])]),_:1})]),i("div",cs,[a(e(ie),{value:"revisor",id:"revisor"}),a(e(y),{for:"revisor"},{default:o(()=>[...s[37]||(s[37]=[d("Revisor",-1)])]),_:1})])]),_:1},8,["modelValue"]),a(e(h),{type:"button",onClick:he,disabled:!$.value},{default:o(()=>[...s[38]||(s[38]=[d(" Agregar ",-1)])]),_:1},8,["disabled"])]),e(l).usuarios_asignados.length>0?(u(),p("div",fs,[s[40]||(s[40]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Usuarios asignados:",-1)),(u(!0),p(U,null,E(e(l).usuarios_asignados,t=>{var v;return u(),p("div",{key:t.user_id,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded"},[i("div",bs,[a(e(K),{class:"h-6 w-6"},{default:o(()=>{var C,w;return[(C=x(t.user_id))!=null&&C.avatar?(u(),g(e(O),{key:0,src:(w=x(t.user_id))==null?void 0:w.avatar},null,8,["src"])):c("",!0),a(e(Q),null,{default:o(()=>{var D;return[d(m((D=x(t.user_id))==null?void 0:D.name.substring(0,2).toUpperCase()),1)]}),_:2},1024)]}),_:2},1024),i("span",_s,m((v=x(t.user_id))==null?void 0:v.name),1),a(e(J),{variant:"outline"},{default:o(()=>[d(m(t.rol),1)]),_:2},1024)]),a(e(h),{type:"button",variant:"ghost",size:"sm",onClick:C=>Y(t.user_id)},{default:o(()=>[...s[39]||(s[39]=[d(" Remover ",-1)])]),_:1},8,["onClick"])])}),128))])):c("",!0)])):c("",!0)])]),_:1})]),_:1}),a(e(S),null,{default:o(()=>[a(e(z),null,{default:o(()=>[a(e(A),null,{default:o(()=>[...s[41]||(s[41]=[d("Notas de actualización",-1)])]),_:1}),a(e(P),null,{default:o(()=>[...s[42]||(s[42]=[d(" Describe los cambios realizados (opcional) ",-1)])]),_:1})]),_:1}),a(e(q),null,{default:o(()=>[a(e(re),{modelValue:e(l).notas,"onUpdate:modelValue":s[11]||(s[11]=t=>e(l).notas=t),placeholder:"Notas sobre los cambios realizados...",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1}),f.camposPersonalizados&&f.camposPersonalizados.length>0?(u(),g(ze,{key:0,campos:f.camposPersonalizados,valores:e(l).campos_personalizados,errors:e(l).errors,onUpdate:s[12]||(s[12]=t=>e(l).campos_personalizados=t)},null,8,["campos","valores","errors"])):c("",!0),f.categorias&&f.categorias.length>0?(u(),g(e(S),{key:1},{default:o(()=>[a(e(z),null,{default:o(()=>[a(e(A),{class:"flex items-center gap-2"},{default:o(()=>[a(e(je),{class:"h-5 w-5"}),s[43]||(s[43]=d(" Etiquetas ",-1))]),_:1}),a(e(P),null,{default:o(()=>[...s[44]||(s[44]=[d(" Asigna etiquetas para categorizar y organizar este entregable ",-1)])]),_:1})]),_:1}),a(e(q),null,{default:o(()=>[a(Ae,{modelValue:e(l).etiquetas,"onUpdate:modelValue":s[13]||(s[13]=t=>e(l).etiquetas=t),categorias:f.categorias,"max-etiquetas":10,placeholder:"Seleccionar etiquetas para el entregable...",description:"Puedes asignar hasta 10 etiquetas"},null,8,["modelValue","categorias"])]),_:1})]),_:1})):c("",!0),N.value.length>0?(u(),g(e(ne),{key:2,variant:"destructive"},{default:o(()=>[a(e(Re),{class:"h-4 w-4"}),a(e(de),null,{default:o(()=>[i("ul",gs,[(u(!0),p(U,null,E(N.value,t=>(u(),p("li",{key:t},m(t),1))),128))])]),_:1})]),_:1})):c("",!0),i("div",vs,[a(e(h),{type:"button",variant:"outline",onClick:xe},{default:o(()=>[a(e(Fe),{class:"mr-2 h-4 w-4"}),s[45]||(s[45]=d(" Cancelar ",-1))]),_:1}),a(e(h),{type:"submit",disabled:!ke.value},{default:o(()=>[a(e(Be),{class:"mr-2 h-4 w-4"}),d(" "+m(e(l).processing?"Actualizando...":"Actualizar Entregable"),1)]),_:1},8,["disabled"])])],32)]),a(ue,{modelValue:F.value,"onUpdate:modelValue":s[14]||(s[14]=t=>F.value=t),title:"Seleccionar Responsable Principal",description:"Selecciona el usuario que ser\\u00e1 el responsable principal del entregable","search-endpoint":e(W)("admin.proyectos.search-users"),"excluded-ids":e(l).responsable_id?[e(l).responsable_id]:[],"max-selection":1,"submit-button-text":"Seleccionar Responsable","search-placeholder":"Buscar por nombre, email, documento o tel\\u00e9fono...",onSubmit:_e},null,8,["modelValue","search-endpoint","excluded-ids"]),a(ue,{modelValue:B.value,"onUpdate:modelValue":s[15]||(s[15]=t=>B.value=t),title:"Agregar Colaboradores",description:"Selecciona los usuarios que colaborar\\u00e1n en este entregable","search-endpoint":e(W)("admin.proyectos.search-users"),"excluded-ids":be.value,"extra-fields":fe.value,"submit-button-text":"Agregar Colaboradores","search-placeholder":"Buscar por nombre, email, documento o tel\\u00e9fono...",onSubmit:ge},null,8,["modelValue","search-endpoint","excluded-ids","extra-fields"])]),_:1},8,["breadcrumbs"]))}}),Ka=Ne(ys,[["__scopeId","data-v-d9027d60"]]);export{Ka as default};
