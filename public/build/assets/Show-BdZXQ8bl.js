import{d as G,c as I,b as v,w as a,g as i,j as c,e as s,f as t,v as k,h as l,m as n,x as z,t as d,i as r,F as A,k as E}from"./app-Cps90vG2.js";import{_ as H}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CRO4CR7J.js";import{_ as g,a as _,b as y,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-BGyo0yeJ.js";import{_ as J}from"./CardDescription.vue_vue_type_script_setup_true_lang-C4UwkfkC.js";import{_ as h}from"./createLucideIcon-Bgm72SpE.js";import{_ as T}from"./index-DCaFXfvI.js";import{_ as L,a as j}from"./index-pJUGBGGR.js";import{F as D}from"./file-U_N-C6-0.js";import{M as S}from"./music-CZAntZSp.js";import{V as K}from"./video-C8LbtENB.js";import{I as Q}from"./image-wdueEMG0.js";import{C as M}from"./circle-x-CgZ2_u7j.js";import{C as O}from"./circle-check-big-578n03r3.js";import{C as R}from"./clock-C1riKzWv.js";import{A as W}from"./arrow-left-OC4YZDed.js";import{D as w}from"./download-Cvxor3vb.js";import{T as Y}from"./triangle-alert-BwGN2kuG.js";import{E as P}from"./eye-BETTZgr0.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-WVtEzzjR.js";import"./index-C8esdNXe.js";import"./floating-ui.vue-BvQrjiy0.js";import"./x-DubltOEj.js";import"./Input.vue_vue_type_script_setup_true_lang-DrNZHE03.js";import"./index-BWN4Gq02.js";import"./index-DJ86uzda.js";import"./shield-oZ6Gn0Zg.js";import"./user-CuQaavI3.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-736Vx309.js";import"./chevron-right-SnT3IiIz.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DdRXkgOA.js";import"./VisuallyHidden-DcEyuFH6.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BFKDaOuW.js";import"./check-sChBcA8x.js";import"./Label.vue_vue_type_script_setup_true_lang-BhEm3-la.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BLVYDUmA.js";import"./index-BoOlVPqa.js";import"./circle-alert-DWRzB4qn.js";import"./map-pin-COMQfJXb.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-B1u3EtG8.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DYGhjVPm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-BhyLWXf2.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ska8rz1v.js";import"./tag-C6AypVfl.js";import"./users-DhPw4U0m.js";import"./target-BmLeIdFc.js";import"./vote-BqFBh6gp.js";import"./folder-open-Bxf7NdBH.js";import"./send-BVGWuvqd.js";import"./file-text-C2ve5AKf.js";import"./briefcase-_bCdG8-w.js";import"./calendar-ix5cF6z0.js";import"./megaphone-BtrUQ1hy.js";import"./user-check-J5_GqRsJ.js";import"./clipboard-list-AgzzqwtV.js";import"./mail-DkuJfTt6.js";import"./message-square-B5j_iapi.js";import"./external-link-C3J8C0aI.js";import"./panel-left-EiU9s9sA.js";import"./index-Bu3MKtdn.js";const Z={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ee={class:"flex justify-between items-start"},te={class:"flex items-center gap-4 mt-2"},ie={class:"text-muted-foreground"},oe={class:"flex gap-2"},se={key:0},ae={class:"grid gap-6 lg:grid-cols-3"},ne={class:"lg:col-span-2 space-y-6"},de={key:0,class:"ml-2"},re={class:"space-y-4"},le={key:0,class:"space-y-4"},ce={key:0,class:"text-center"},me=["src","alt"],ue={class:"text-sm text-muted-foreground mt-2"},fe={key:1,class:"text-center"},ve=["src"],xe={class:"text-sm text-muted-foreground mt-2"},he={key:2,class:"flex flex-col items-center gap-4"},ge={class:"flex items-center gap-3"},_e={class:"text-left"},ye={class:"font-medium"},be=["src"],pe={key:3,class:"flex items-center gap-4 py-4"},we={class:"flex-1"},ke={class:"font-medium"},Ce={class:"text-sm text-muted-foreground"},$e={key:1,class:"bg-muted/30 rounded-lg p-4"},De={key:0,class:"text-center"},ze=["src","alt"],Ae={key:1,class:"text-center"},Ee=["src"],Te={key:2,class:"flex flex-col items-center gap-4"},Se=["src"],Ve={key:3,class:"flex flex-col items-center gap-4 py-8"},Fe={class:"text-center"},Be={class:"font-medium"},Ne={class:"text-sm text-muted-foreground"},Ie={key:0},Le={key:2,class:"text-center py-8 text-muted-foreground"},je={class:"whitespace-pre-wrap"},Me={class:"space-y-6"},Oe={class:"font-medium"},Re={key:0,class:"text-sm text-muted-foreground"},Pe={key:0},Ue={class:"font-medium"},Xe={key:0,class:"text-sm text-muted-foreground mt-1"},qe={class:"space-y-2"},Ge={class:"font-medium text-sm"},He={class:"text-xs text-muted-foreground"},Je={class:"text-sm"},Ke={class:"text-sm"},Qe={key:0},We={class:"space-y-2 max-h-32 overflow-y-auto"},Ye={class:"truncate flex-1 mr-2"},Ze={key:1},et={class:"text-sm"},tt={key:2},it={class:"text-sm"},ot={class:"text-sm"},st={class:"text-xs text-muted-foreground"},at={class:"text-sm"},nt={key:3},dt={class:"text-sm"},rt={key:0,class:"text-xs text-muted-foreground"},lt={class:"text-sm whitespace-pre-wrap"},hi=G({__name:"Show",props:{contrato:{},evidencia:{}},setup(e){const x=e,U=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:x.contrato.nombre,href:`/admin/contratos/${x.contrato.id}`},{title:"Evidencia",href:"#"}],V=I(()=>({imagen:Q,video:K,audio:S,documento:D})[x.evidencia.tipo_evidencia]||D),F=I(()=>({pendiente:{color:"secondary",icon:R,bgClass:"bg-yellow-50",textClass:"text-yellow-800"},aprobada:{color:"success",icon:O,bgClass:"bg-green-50",textClass:"text-green-800"},rechazada:{color:"destructive",icon:M,bgClass:"bg-red-50",textClass:"text-red-800"}})[x.evidencia.estado]||{color:"default",icon:R,bgClass:"bg-gray-50",textClass:"text-gray-800"}),B=u=>u?new Date(u).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",X=u=>u?new Date(u).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",p=u=>{const o=u||x.evidencia.archivo_url;o&&window.open(o,"_blank")},q=()=>{var u;((u=x.evidencia.archivos_urls)==null?void 0:u.length)>0?x.evidencia.archivos_urls.forEach((o,C)=>{setTimeout(()=>{window.open(o,"_blank")},C*500)}):x.evidencia.archivo_url&&p()};return(u,o)=>(n(),v(H,{breadcrumbs:U},{default:a(()=>{var C;return[i("div",Z,[i("div",ee,[i("div",null,[s(t(k),{href:`/admin/contratos/${e.contrato.id}`,class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:a(()=>[s(t(W),{class:"w-4 h-4 mr-2"}),o[0]||(o[0]=l(" Volver al Contrato ",-1))]),_:1},8,["href"]),o[1]||(o[1]=i("h2",{class:"text-3xl font-bold tracking-tight"},"Evidencia",-1)),i("div",te,[s(t(T),{variant:F.value.color},{default:a(()=>[(n(),v(z(F.value.icon),{class:"w-3 h-3 mr-1"})),l(" "+d(e.evidencia.estado_label),1)]),_:1},8,["variant"]),s(t(T),{variant:"outline"},{default:a(()=>[(n(),v(z(V.value),{class:"w-3 h-3 mr-1"})),l(" "+d(e.evidencia.tipo_evidencia_label),1)]),_:1}),s(t(T),{variant:"secondary"},{default:a(()=>[l(d(e.evidencia.tiene_multiples_archivos?`${e.evidencia.total_archivos} archivos`:"1 archivo"),1)]),_:1}),i("span",ie," Subida "+d(X(e.evidencia.created_at)),1)])]),i("div",oe,[e.evidencia.tiene_multiples_archivos?(n(),v(t(h),{key:0,onClick:q,variant:"outline"},{default:a(()=>[s(t(w),{class:"w-4 h-4 mr-2"}),l(" Descargar Todos ("+d(e.evidencia.total_archivos)+") ",1)]),_:1})):e.evidencia.archivo_url?(n(),v(t(h),{key:1,onClick:p,variant:"outline"},{default:a(()=>[s(t(w),{class:"w-4 h-4 mr-2"}),o[2]||(o[2]=l(" Descargar ",-1))]),_:1})):c("",!0)])]),e.evidencia.estado==="rechazada"?(n(),v(t(L),{key:0,class:"border-red-200 bg-red-50"},{default:a(()=>[s(t(M),{class:"h-4 w-4 text-red-600"}),s(t(j),{class:"text-red-800"},{default:a(()=>[o[3]||(o[3]=l(" Esta evidencia ha sido rechazada. ",-1)),e.evidencia.observaciones_admin?(n(),r("span",se," Motivo: "+d(e.evidencia.observaciones_admin),1)):c("",!0)]),_:1})]),_:1})):c("",!0),e.evidencia.estado==="aprobada"?(n(),v(t(L),{key:1,class:"border-green-200 bg-green-50"},{default:a(()=>[s(t(O),{class:"h-4 w-4 text-green-600"}),s(t(j),{class:"text-green-800"},{default:a(()=>[...o[4]||(o[4]=[l(" Esta evidencia ha sido aprobada exitosamente. ",-1)])]),_:1})]),_:1})):c("",!0),i("div",ae,[i("div",ne,[s(t(g),null,{default:a(()=>[s(t(_),null,{default:a(()=>[s(t(y),{class:"flex items-center gap-2"},{default:a(()=>[(n(),v(z(V.value),{class:"w-5 h-5"})),o[5]||(o[5]=l(" Archivo de Evidencia ",-1))]),_:1}),s(t(J),null,{default:a(()=>[l(d(e.evidencia.archivo_nombre||"Archivo subido")+" ",1),e.evidencia.archivo_size_formatted?(n(),r("span",de," ("+d(e.evidencia.archivo_size_formatted)+") ",1)):c("",!0)]),_:1})]),_:1}),s(t(b),null,{default:a(()=>{var f;return[i("div",re,[((f=e.evidencia.archivos_info)==null?void 0:f.length)>0?(n(),r("div",le,[(n(!0),r(A,null,E(e.evidencia.archivos_info,(m,$)=>(n(),r("div",{key:m.indice,class:"bg-muted/30 rounded-lg p-4 relative group"},[s(t(h),{onClick:N=>p(m.url),variant:"outline",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},{default:a(()=>[s(t(w),{class:"w-4 h-4"})]),_:1},8,["onClick"]),e.evidencia.es_imagen?(n(),r("div",ce,[i("img",{src:m.url,alt:m.nombre,class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"},null,8,me),i("p",ue,d(m.nombre),1)])):e.evidencia.es_video?(n(),r("div",fe,[i("video",{src:m.url,controls:"",class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,ve),i("p",xe,d(m.nombre),1)])):e.evidencia.es_audio?(n(),r("div",he,[i("div",ge,[s(t(S),{class:"w-12 h-12 text-muted-foreground"}),i("div",_e,[i("p",ye,d(m.nombre),1),o[6]||(o[6]=i("p",{class:"text-sm text-muted-foreground"},"Archivo de audio",-1))])]),i("audio",{src:m.url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,be)])):(n(),r("div",pe,[s(t(D),{class:"w-12 h-12 text-muted-foreground flex-shrink-0"}),i("div",we,[i("p",ke,d(m.nombre),1),i("p",Ce,d(e.evidencia.tipo_evidencia_label),1)]),s(t(h),{onClick:N=>p(m.url),variant:"outline",size:"sm"},{default:a(()=>[s(t(w),{class:"w-4 h-4 mr-2"}),o[7]||(o[7]=l(" Descargar ",-1))]),_:1},8,["onClick"])]))]))),128))])):e.evidencia.archivo_url?(n(),r("div",$e,[e.evidencia.es_imagen?(n(),r("div",De,[i("img",{src:e.evidencia.archivo_url,alt:e.evidencia.descripcion||"Evidencia",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"},null,8,ze)])):e.evidencia.es_video?(n(),r("div",Ae,[i("video",{src:e.evidencia.archivo_url,controls:"",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,Ee)])):e.evidencia.es_audio?(n(),r("div",Te,[s(t(S),{class:"w-16 h-16 text-muted-foreground"}),i("audio",{src:e.evidencia.archivo_url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Se)])):(n(),r("div",Ve,[s(t(D),{class:"w-16 h-16 text-muted-foreground"}),i("div",Fe,[i("p",Be,d(e.evidencia.archivo_nombre),1),i("p",Ne,[l(d(e.evidencia.tipo_evidencia_label)+" ",1),e.evidencia.archivo_size_formatted?(n(),r("span",Ie," • "+d(e.evidencia.archivo_size_formatted),1)):c("",!0)])]),s(t(h),{onClick:p,variant:"outline"},{default:a(()=>[s(t(w),{class:"w-4 h-4 mr-2"}),o[8]||(o[8]=l(" Descargar para ver ",-1))]),_:1})]))])):(n(),r("div",Le,[s(t(Y),{class:"w-12 h-12 mx-auto mb-3"}),o[9]||(o[9]=i("p",null,"No se pudo cargar el archivo",-1))]))])]}),_:1})]),_:1}),e.evidencia.descripcion?(n(),v(t(g),{key:0},{default:a(()=>[s(t(_),null,{default:a(()=>[s(t(y),null,{default:a(()=>[...o[10]||(o[10]=[l("Descripción",-1)])]),_:1})]),_:1}),s(t(b),null,{default:a(()=>[i("p",je,d(e.evidencia.descripcion),1)]),_:1})]),_:1})):c("",!0)]),i("div",Me,[s(t(g),null,{default:a(()=>[s(t(_),null,{default:a(()=>[s(t(y),null,{default:a(()=>[...o[11]||(o[11]=[l("Información del Contrato",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:a(()=>[i("div",null,[o[12]||(o[12]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Contrato",-1)),i("p",Oe,d(e.contrato.nombre),1),e.contrato.numero_contrato?(n(),r("p",Re," # "+d(e.contrato.numero_contrato),1)):c("",!0)]),e.contrato.proyecto?(n(),r("div",Pe,[o[13]||(o[13]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Proyecto",-1)),s(t(k),{href:`/admin/proyectos/${e.contrato.proyecto.id}`,class:"text-sm text-primary hover:underline"},{default:a(()=>[l(d(e.contrato.proyecto.nombre),1)]),_:1},8,["href"])])):c("",!0),s(t(h),{href:`/admin/contratos/${e.contrato.id}`,as:t(k),variant:"outline",size:"sm",class:"w-full"},{default:a(()=>[s(t(P),{class:"w-4 h-4 mr-2"}),o[14]||(o[14]=l(" Ver Contrato ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),s(t(g),null,{default:a(()=>[s(t(_),null,{default:a(()=>[s(t(y),null,{default:a(()=>[...o[15]||(o[15]=[l("Obligación Contractual",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:a(()=>[i("div",null,[i("p",Ue,d(e.evidencia.obligacion.nombre),1),e.evidencia.obligacion.descripcion?(n(),r("p",Xe,d(e.evidencia.obligacion.descripcion),1)):c("",!0)]),s(t(h),{href:`/admin/obligaciones/${e.evidencia.obligacion.id}`,as:t(k),variant:"outline",size:"sm",class:"w-full"},{default:a(()=>[s(t(P),{class:"w-4 h-4 mr-2"}),o[16]||(o[16]=l(" Ver Obligación ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),((C=e.evidencia.entregables)==null?void 0:C.length)>0?(n(),v(t(g),{key:0},{default:a(()=>[s(t(_),null,{default:a(()=>[s(t(y),null,{default:a(()=>[...o[17]||(o[17]=[l("Entregables Asociados",-1)])]),_:1})]),_:1}),s(t(b),null,{default:a(()=>[i("div",qe,[(n(!0),r(A,null,E(e.evidencia.entregables,f=>(n(),v(t(k),{key:f.id,href:`/admin/proyectos/${f.hito.proyecto.id}/hitos/${f.hito.id}/entregables/${f.id}`,class:"block p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer"},{default:a(()=>[i("p",Ge,d(f.nombre),1),i("p",He,d(f.hito.nombre),1)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})):c("",!0),s(t(g),null,{default:a(()=>[s(t(_),null,{default:a(()=>[s(t(y),null,{default:a(()=>[l(d(e.evidencia.tiene_multiples_archivos?"Detalles de los Archivos":"Detalles del Archivo"),1)]),_:1})]),_:1}),s(t(b),{class:"space-y-3"},{default:a(()=>{var f,m;return[i("div",null,[o[18]||(o[18]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Tipo",-1)),i("p",Je,d(e.evidencia.tipo_evidencia_label),1)]),i("div",null,[o[19]||(o[19]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Cantidad",-1)),i("p",Ke,d(e.evidencia.total_archivos||1)+" archivo(s)",1)]),((f=e.evidencia.archivos_info)==null?void 0:f.length)>0?(n(),r("div",Qe,[o[20]||(o[20]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Archivos",-1)),i("div",We,[(n(!0),r(A,null,E(e.evidencia.archivos_info,$=>(n(),r("div",{key:$.indice,class:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded"},[i("span",Ye,d($.nombre),1),s(t(h),{onClick:N=>p($.url),size:"sm",variant:"ghost",class:"h-6 w-6 p-0"},{default:a(()=>[s(t(w),{class:"w-3 h-3"})]),_:1},8,["onClick"])]))),128))])])):e.evidencia.archivo_size_formatted?(n(),r("div",Ze,[o[21]||(o[21]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Tamaño",-1)),i("p",et,d(e.evidencia.archivo_size_formatted),1)])):c("",!0),(m=e.evidencia.metadata)!=null&&m.mime_type?(n(),r("div",tt,[o[22]||(o[22]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Formato",-1)),i("p",it,d(e.evidencia.metadata.mime_type),1)])):c("",!0),i("div",null,[o[23]||(o[23]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Subido por",-1)),i("p",ot,d(e.evidencia.usuario.name),1),i("p",st,d(e.evidencia.usuario.email),1)]),i("div",null,[o[24]||(o[24]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Fecha de subida",-1)),i("p",at,d(B(e.evidencia.created_at)),1)]),e.evidencia.revisado_at?(n(),r("div",nt,[o[25]||(o[25]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Revisado",-1)),i("p",dt,d(B(e.evidencia.revisado_at)),1),e.evidencia.revisor?(n(),r("p",rt," por "+d(e.evidencia.revisor.name),1)):c("",!0)])):c("",!0)]}),_:1})]),_:1}),e.evidencia.observaciones_admin?(n(),v(t(g),{key:1},{default:a(()=>[s(t(_),null,{default:a(()=>[s(t(y),null,{default:a(()=>[...o[26]||(o[26]=[l("Observaciones de Revisión",-1)])]),_:1})]),_:1}),s(t(b),null,{default:a(()=>[i("p",lt,d(e.evidencia.observaciones_admin),1)]),_:1})]),_:1})):c("",!0)])])])]}),_:1}))}});export{hi as default};
