import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dz6BU1WZ.js";import{d as Z,c as ee,r as V,m as I,i as g,e as d,f as t,u as e,p as te,w as a,g as i,j as k,P as F,h as r,F as $,k as P,b as f,t as u,n as j,q as se,W as w}from"./app-p-SM0Ops.js";import{_ as B,c as H}from"./CardTitle.vue_vue_type_script_setup_true_lang-DozlB1PY.js";import{c as ae,_ as c}from"./createLucideIcon-MIg_mF3D.js";import{_ as oe}from"./Input.vue_vue_type_script_setup_true_lang-K4vq7am0.js";import{_ as z}from"./index-CYyE4abP.js";import{_ as le}from"./Switch.vue_vue_type_script_setup_true_lang-B2FgU3JM.js";import{_ as re,a as ie,b as L,c as _,d as ne,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-BRMd8scN.js";import{_ as U,a as A,b as D,c as R,d as h,k as de,C as pe}from"./SelectValue.vue_vue_type_script_setup_true_lang-DmzPrX3Z.js";import{t as S}from"./index-BhJRJLQS.js";import{P as ue}from"./plus-BIpQAtiE.js";import{S as me}from"./search-nFjyMy1p.js";import{S as fe}from"./square-pen-BWVg_XIm.js";import{T as ce}from"./trash-2-DCkletDg.js";import{F as _e}from"./file-0yfd6vMY.js";import{S as ve}from"./square-check-big-pTcUOAFU.js";import{L as ge}from"./list-C-bdkpgU.js";import{F as xe}from"./file-text-jtWGolJY.js";import{C as ye}from"./calendar-BUpz3t_q.js";import{H as be}from"./hash-DpHSFTEj.js";import{T as Ce}from"./type-r98XgQie.js";import{S as ke}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-V1RlDTXZ.js";import"./index-CV2_GSGp.js";import"./floating-ui.vue-BUomiQTN.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DUTBsYNH.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CR-w-QPj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-BbAT6tF1.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-IihS8Mqq.js";import"./chevrons-up-down-DBABEqEn.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DSG5kKOT.js";import"./tag-CxhrnRvl.js";import"./users-CkPSsqjA.js";import"./target-BcAOpLLG.js";import"./shield-DhBDny61.js";import"./vote-CVUS9BZZ.js";import"./folder-open-CCLrFQyu.js";import"./send-DdhYBIuO.js";import"./briefcase-BnY2GosT.js";import"./megaphone-5qsXSNwm.js";import"./user-check-BjIqumpS.js";import"./mail-DTHbsAgc.js";import"./message-square-DNZUf9k0.js";import"./external-link-CtMP5nJn.js";import"./panel-left-LG19zA78.js";import"./check-BZs3ZfEg.js";import"./index-B7vJyW42.js";import"./index-v7Q0x2oQ.js";import"./VisuallyHidden-xAPYqC-I.js";import"./VisuallyHiddenInput-CylejRDg.js";import"./nullish-CHIgUVhi.js";import"./x-DIIigy9X.js";import"./index-B8ZQ7oBZ.js";import"./user-DA3oYWTo.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BGm8qVny.js";import"./Label.vue_vue_type_script_setup_true_lang-DP74BK5K.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-RRitD80w.js";import"./circle-alert-B1uyACGR.js";import"./map-pin-Bfx6LXpH.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ae("RadioIcon",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),he={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Se={class:"flex items-center justify-between"},we={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ze={class:"relative"},Te={class:"flex items-center gap-1"},Ve={class:"text-sm text-gray-500"},Fe={class:"font-medium"},Pe={key:0,class:"text-xs text-gray-500"},Le={class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},Me={class:"flex flex-wrap gap-1"},Ne={class:"flex justify-end gap-2"},qe={key:0,class:"flex justify-center gap-2"},Ee={class:"text-center text-sm text-gray-500"},At=Z({__name:"Index",props:{campos:{},filters:{},tiposCampo:{},tipos:{},entidadesDisponibles:{}},setup(O){const v=O,M=ee(()=>v.tiposCampo||v.tipos||{}),N=M,W=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Campos Personalizados",href:"/admin/campos-personalizados"}],y=V(v.filters.search||""),b=V(v.filters.tipo||""),x=V(v.filters.activo!==void 0?String(v.filters.activo):""),T=()=>{const l={search:y.value,tipo:b.value};x.value!==""&&(l.activo=x.value==="1"),w.get("/admin/campos-personalizados",l,{preserveState:!0,preserveScroll:!0})};let q;I(y,()=>{clearTimeout(q),q=setTimeout(()=>{T()},500)}),I([b,x],()=>{T()});const G=l=>{confirm(`¿Estás seguro de eliminar el campo "${l.nombre}"?

Esto eliminará también todos los valores asociados en los proyectos.`)&&w.delete(`/admin/campos-personalizados/${l.id}`,{preserveScroll:!0,onSuccess:()=>{S.success("Campo personalizado eliminado exitosamente")},onError:()=>{S.error("No se puede eliminar el campo porque tiene valores asociados")}})},J=(l,s)=>{w.patch(`/admin/campos-personalizados/${l.id}/toggle-activo`,{activo:s},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{S.success(`Campo ${s?"activado":"desactivado"} exitosamente`)},onError:()=>{S.error("Error al cambiar el estado del campo")}})},E=(l,s)=>{const o=v.campos.data,p=o.findIndex(n=>n.id===l.id);if(s==="up"&&p>0||s==="down"&&p<o.length-1){const n=s==="up"?p-1:p+1,C=o.map(X=>X.id);[C[p],C[n]]=[C[n],C[p]],w.post("/admin/campos-personalizados/reordenar",{orden:C},{preserveScroll:!0,onSuccess:()=>{S.success("Orden actualizado")}})}},K=l=>({text:Ce,number:be,date:ye,textarea:xe,select:ge,checkbox:ve,radio:$e,file:_e})[l]||ke,Q=l=>({text:"bg-blue-100 text-blue-800",number:"bg-purple-100 text-purple-800",date:"bg-green-100 text-green-800",textarea:"bg-yellow-100 text-yellow-800",select:"bg-orange-100 text-orange-800",checkbox:"bg-pink-100 text-pink-800",radio:"bg-indigo-100 text-indigo-800",file:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800";return(l,s)=>(d(),g($,null,[t(e(te),{title:"Campos Personalizados"}),t(Y,{breadcrumbs:W},{default:a(()=>[i("div",he,[i("div",Se,[s[5]||(s[5]=i("div",null,[i("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Campos Personalizados "),i("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Define campos adicionales para los proyectos ")],-1)),t(e(F),{href:"/admin/campos-personalizados/create"},{default:a(()=>[t(e(c),null,{default:a(()=>[t(e(ue),{class:"mr-2 h-4 w-4"}),s[4]||(s[4]=r(" Nuevo Campo ",-1))]),_:1})]),_:1})]),t(e(B),null,{default:a(()=>[t(e(H),{class:"p-4"},{default:a(()=>[i("div",we,[i("div",ze,[t(e(me),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(oe),{modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=o=>y.value=o),type:"text",placeholder:"Buscar campos...",class:"pl-10"},null,8,["modelValue"])]),t(e(U),{modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=o=>b.value=o)},{default:a(()=>[t(e(A),null,{default:a(()=>[t(e(D),{placeholder:"Todos los tipos"})]),_:1}),t(e(R),null,{default:a(()=>[t(e(h),{value:"all"},{default:a(()=>[...s[6]||(s[6]=[r("Todos los tipos",-1)])]),_:1}),(d(!0),g($,null,P(e(N),(o,p)=>(d(),f(e(h),{key:p,value:p},{default:a(()=>[r(u(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(U),{modelValue:x.value,"onUpdate:modelValue":s[2]||(s[2]=o=>x.value=o)},{default:a(()=>[t(e(A),null,{default:a(()=>[t(e(D),{placeholder:"Todos los estados"})]),_:1}),t(e(R),null,{default:a(()=>[t(e(h),{value:"all"},{default:a(()=>[...s[7]||(s[7]=[r("Todos los estados",-1)])]),_:1}),t(e(h),{value:"1"},{default:a(()=>[...s[8]||(s[8]=[r("Activos",-1)])]),_:1}),t(e(h),{value:"0"},{default:a(()=>[...s[9]||(s[9]=[r("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(c),{variant:"outline",onClick:s[3]||(s[3]=o=>{y.value="",b.value="",x.value="",T()})},{default:a(()=>[...s[10]||(s[10]=[r(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(B),null,{default:a(()=>[t(e(H),{class:"p-0"},{default:a(()=>[t(e(re),null,{default:a(()=>[t(e(ie),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(_),{class:"w-12"},{default:a(()=>[...s[11]||(s[11]=[r("Orden",-1)])]),_:1}),t(e(_),null,{default:a(()=>[...s[12]||(s[12]=[r("Campo",-1)])]),_:1}),t(e(_),null,{default:a(()=>[...s[13]||(s[13]=[r("Slug",-1)])]),_:1}),t(e(_),null,{default:a(()=>[...s[14]||(s[14]=[r("Tipo",-1)])]),_:1}),t(e(_),null,{default:a(()=>[...s[15]||(s[15]=[r("Aplicar a",-1)])]),_:1}),t(e(_),{class:"text-center"},{default:a(()=>[...s[16]||(s[16]=[r("Requerido",-1)])]),_:1}),t(e(_),{class:"text-center"},{default:a(()=>[...s[17]||(s[17]=[r("Estado",-1)])]),_:1}),t(e(_),{class:"text-right"},{default:a(()=>[...s[18]||(s[18]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(ne),null,{default:a(()=>[(d(!0),g($,null,P(l.campos.data,(o,p)=>(d(),f(e(L),{key:o.id},{default:a(()=>[t(e(m),null,{default:a(()=>[i("div",Te,[t(e(c),{variant:"ghost",size:"sm",disabled:p===0,onClick:n=>E(o,"up")},{default:a(()=>[t(e(de),{class:"h-3 w-3"})]),_:2},1032,["disabled","onClick"]),i("span",Ve,u(o.orden),1),t(e(c),{variant:"ghost",size:"sm",disabled:p===l.campos.data.length-1,onClick:n=>E(o,"down")},{default:a(()=>[t(e(pe),{class:"h-3 w-3"})]),_:2},1032,["disabled","onClick"])])]),_:2},1024),t(e(m),null,{default:a(()=>[i("div",null,[i("p",Fe,u(o.nombre),1),o.descripcion?(d(),g("p",Pe,u(o.descripcion),1)):k("",!0)])]),_:2},1024),t(e(m),null,{default:a(()=>[i("code",Le,u(o.slug),1)]),_:2},1024),t(e(m),null,{default:a(()=>[t(e(z),{class:j([Q(o.tipo),"flex items-center gap-1 w-fit"])},{default:a(()=>{var n;return[(d(),f(se(K(o.tipo)),{class:"h-3 w-3"})),r(" "+u(((n=M.value||e(N))==null?void 0:n[o.tipo])||o.tipo),1)]}),_:2},1032,["class"])]),_:2},1024),t(e(m),null,{default:a(()=>{var n;return[i("div",Me,[!o.aplicar_para||o.aplicar_para.length===0||o.aplicar_para.includes("proyectos")?(d(),f(e(z),{key:0,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[19]||(s[19]=[r(" Proyectos ",-1)])]),_:1})):k("",!0),(n=o.aplicar_para)!=null&&n.includes("contratos")?(d(),f(e(z),{key:1,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[20]||(s[20]=[r(" Contratos ",-1)])]),_:1})):k("",!0)])]}),_:2},1024),t(e(m),{class:"text-center"},{default:a(()=>[t(e(z),{class:j(o.es_requerido?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")},{default:a(()=>[r(u(o.es_requerido?"Sí":"No"),1)]),_:2},1032,["class"])]),_:2},1024),t(e(m),{class:"text-center"},{default:a(()=>[t(e(le),{"model-value":o.activo,"onUpdate:modelValue":n=>J(o,n)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),t(e(m),{class:"text-right"},{default:a(()=>[i("div",Ne,[t(e(F),{href:`/admin/campos-personalizados/${o.id}/edit`},{default:a(()=>[t(e(c),{variant:"outline",size:"sm"},{default:a(()=>[t(e(fe),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),t(e(c),{variant:"destructive",size:"sm",onClick:n=>G(o)},{default:a(()=>[t(e(ce),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),l.campos.data.length===0?(d(),f(e(L),{key:0},{default:a(()=>[t(e(m),{colspan:"7",class:"text-center py-8"},{default:a(()=>[...s[21]||(s[21]=[i("p",{class:"text-gray-500"},"No se encontraron campos personalizados",-1)])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l.campos.last_page>1?(d(),g("div",qe,[(d(!0),g($,null,P(l.campos.links,o=>(d(),g($,{key:o.label},[o.url?(d(),f(e(F),{key:0,href:o.url,"preserve-state":"","preserve-scroll":""},{default:a(()=>[t(e(c),{variant:o.active?"default":"outline",size:"sm",innerHTML:o.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(d(),f(e(c),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:o.label},null,8,["innerHTML"]))],64))),128))])):k("",!0),i("div",Ee," Mostrando "+u(l.campos.data.length)+" de "+u(l.campos.total)+" campos ",1)])]),_:1})],64))}});export{At as default};
