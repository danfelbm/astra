import{c as pe,_ as M}from"./createLucideIcon-BA6_5T5D.js";import{a as oe,b as se,c as ee,_ as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-BrPStMNy.js";import{_ as K}from"./Checkbox.vue_vue_type_script_setup_true_lang-CSRjqAzd.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-DO9Up2O_.js";import{_ as $}from"./Label.vue_vue_type_script_setup_true_lang-CZcR4vXO.js";import{_ as z,a as R,b as L,c as G,d as j,k as fe,C as ve}from"./SelectValue.vue_vue_type_script_setup_true_lang-DqiXJPuJ.js";import{_ as ne}from"./Textarea.vue_vue_type_script_setup_true_lang-CBfJ0VNu.js";import{_ as H}from"./index-DrlmzGiQ.js";import{P as Z}from"./plus-C4--oSuq.js";import{T as de}from"./trash-2-Btv8_eeX.js";import{d as W,i as x,e as r,g as o,f as a,u as l,w as s,h as n,j as V,F as N,k as Y,c as U,t as _,b as A,r as O,o as be,S as te,m as ae,q as re,K as ge}from"./app-B1G_J44z.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as me,a as le}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-DNxZcQzR.js";import{G as xe}from"./grip-vertical-DZOFxrYl.js";import{_ as ye}from"./CardDescription.vue_vue_type_script_setup_true_lang-CG97qo9A.js";import{C as _e}from"./circle-alert-DyErMS_l.js";import{E as ce}from"./eye-BThIOa4U.js";import{X as Ce}from"./x-Cx8rnUeq.js";import{G as ke}from"./git-branch-DszE3bk3.js";import{S as $e}from"./square-pen-CcGSqJMh.js";import{C as Ve}from"./copy-CQvDueY1.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=pe("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Fe={class:"space-y-4"},he={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},De={class:"flex items-center justify-between"},Te={class:"font-medium flex items-center gap-2"},Se={class:"space-y-2"},Ae={key:0,class:"text-center py-4"},Ee=W({__name:"SelectFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","add-option","remove-option"],setup(E,{emit:B}){const C=E,y=B,d=(i,u)=>{const e=[...C.modelValue||[]];e[i]=u,y("update:modelValue",e)};return(i,u)=>(r(),x("div",Fe,[o("div",he,[o("div",De,[o("h4",Te,[a(l(H),{variant:"secondary",class:"text-xs"},{default:s(()=>[...u[1]||(u[1]=[n("Opciones de Selección",-1)])]),_:1})]),a(l(M),{type:"button",variant:"outline",size:"sm",onClick:u[0]||(u[0]=e=>y("add-option")),disabled:i.disabled},{default:s(()=>[a(l(Z),{class:"mr-2 h-3 w-3"}),u[2]||(u[2]=n(" Agregar Opción ",-1))]),_:1},8,["disabled"])]),o("div",Se,[(r(!0),x(N,null,Y(i.modelValue,(e,t)=>(r(),x("div",{key:t,class:"flex items-center space-x-2"},[a(l(q),{"model-value":e,"onUpdate:modelValue":c=>d(t,c),placeholder:`Opción ${t+1}`,class:"flex-1",disabled:i.disabled},null,8,["model-value","onUpdate:modelValue","placeholder","disabled"]),a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:c=>y("remove-option",t),disabled:i.disabled,class:"h-9 w-9 p-0 text-destructive hover:text-destructive"},{default:s(()=>[a(l(de),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])]))),128)),!i.modelValue||i.modelValue.length===0?(r(),x("div",Ae,[...u[3]||(u[3]=[o("p",{class:"text-sm text-muted-foreground"},' No hay opciones agregadas. Haz clic en "Agregar Opción" para comenzar. ',-1)])])):V("",!0)])])]))}}),Be=Q(Ee,[["__scopeId","data-v-f6b2331e"]]),Ue={class:"space-y-4"},Pe={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},Me={class:"font-medium flex items-center gap-2"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"flex items-center space-x-2 mt-1"},Ne={key:0},je={class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},Ye={class:"text-sm text-muted-foreground"},Oe=W({__name:"FileFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=U({get:()=>C.modelValue||{multiple:!1,maxFiles:5,maxFileSize:10,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"},set:u=>y("update:modelValue",u)}),i=(u,e)=>{y("update:modelValue",{...d.value,[u]:e})};return(u,e)=>(r(),x("div",Ue,[o("div",Pe,[o("h4",Me,[a(l(H),{variant:"secondary",class:"text-xs"},{default:s(()=>[...e[4]||(e[4]=[n("Configuración de Archivo",-1)])]),_:1})]),o("div",Ie,[o("div",null,[a(l($),null,{default:s(()=>[...e[5]||(e[5]=[n("Archivos múltiples",-1)])]),_:1}),o("div",qe,[a(l(K),{checked:d.value.multiple,"onUpdate:checked":e[0]||(e[0]=t=>i("multiple",t)),disabled:u.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...e[6]||(e[6]=[n("Permitir múltiples archivos",-1)])]),_:1})])]),d.value.multiple?(r(),x("div",Ne,[a(l($),null,{default:s(()=>[...e[7]||(e[7]=[n("Máximo de archivos",-1)])]),_:1}),a(l(q),{type:"number","model-value":d.value.maxFiles,"onUpdate:modelValue":e[1]||(e[1]=t=>i("maxFiles",Number(t))),min:"1",max:"20",placeholder:"5",disabled:u.disabled},null,8,["model-value","disabled"]),e[8]||(e[8]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Entre 1 y 20 archivos ",-1))])):V("",!0),o("div",null,[a(l($),null,{default:s(()=>[...e[9]||(e[9]=[n("Tamaño máximo por archivo (MB)",-1)])]),_:1}),a(l(q),{type:"number","model-value":d.value.maxFileSize,"onUpdate:modelValue":e[2]||(e[2]=t=>i("maxFileSize",Number(t))),min:"1",max:"100",placeholder:"10",disabled:u.disabled},null,8,["model-value","disabled"]),e[10]||(e[10]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Entre 1 y 100 MB ",-1))]),o("div",null,[a(l($),null,{default:s(()=>[...e[11]||(e[11]=[n("Tipos de archivo permitidos",-1)])]),_:1}),a(l(q),{"model-value":d.value.accept,"onUpdate:modelValue":e[3]||(e[3]=t=>i("accept",t)),placeholder:".pdf,.doc,.docx,.jpg,.jpeg,.png",disabled:u.disabled},null,8,["model-value","disabled"]),e[12]||(e[12]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Separados por comas, ej: .pdf,.jpg,.doc ",-1))])]),o("div",je,[o("p",Ye,[e[13]||(e[13]=o("strong",null,"Resumen:",-1)),n(" "+_(d.value.multiple?`Hasta ${d.value.maxFiles} archivos`:"Un solo archivo")+" de máximo "+_(d.value.maxFileSize)+"MB cada uno. ",1),e[14]||(e[14]=o("br",null,null,-1)),n(" Formatos: "+_(d.value.accept),1)])])])]))}}),ze=Q(Oe,[["__scopeId","data-v-89ef78c7"]]),Re={class:"space-y-4"},Le={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},Ge={class:"font-medium flex items-center gap-2"},We={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},He={class:"md:col-span-2"},Qe={class:"space-y-2"},Ke={class:"flex items-center space-x-2"},Xe={class:"flex items-center space-x-2"},Ze={class:"space-y-3"},Je={class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},el={class:"text-sm text-muted-foreground"},ll={key:0},al=W({__name:"DatePickerFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=[{value:"DD/MM/YYYY",label:"DD/MM/YYYY (31/12/2024)"},{value:"MM/DD/YYYY",label:"MM/DD/YYYY (12/31/2024)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (2024-12-31)"},{value:"DD-MM-YYYY",label:"DD-MM-YYYY (31-12-2024)"}],i=U({get:()=>C.modelValue||{minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0},set:c=>y("update:modelValue",c)}),u=(c,f)=>{y("update:modelValue",{...i.value,[c]:f})},e=c=>{if(!c)return"";if(c.match(/^\d{4}-\d{2}-\d{2}$/))return c;try{return new Date(c).toISOString().split("T")[0]}catch{return""}},t=(c,f)=>{u(c,f||void 0)};return(c,f)=>(r(),x("div",Re,[o("div",Le,[o("h4",Ge,[a(l(H),{variant:"secondary",class:"text-xs"},{default:s(()=>[...f[5]||(f[5]=[n("Configuración de Fecha",-1)])]),_:1})]),o("div",We,[o("div",He,[a(l($),null,{default:s(()=>[...f[6]||(f[6]=[n("Formato de fecha",-1)])]),_:1}),a(l(z),{"model-value":i.value.format,"onUpdate:modelValue":f[0]||(f[0]=F=>u("format",F)),disabled:c.disabled},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona formato"})]),_:1}),a(l(G),null,{default:s(()=>[(r(),x(N,null,Y(d,F=>a(l(j),{key:F.value,value:F.value},{default:s(()=>[n(_(F.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","disabled"])]),o("div",null,[a(l($),{class:"text-sm font-medium mb-3 block"},{default:s(()=>[...f[7]||(f[7]=[n("Restricciones temporales",-1)])]),_:1}),o("div",Qe,[o("div",Ke,[a(l(K),{checked:i.value.allowPastDates,"onUpdate:checked":f[1]||(f[1]=F=>u("allowPastDates",F)),disabled:c.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...f[8]||(f[8]=[n("Permitir fechas pasadas",-1)])]),_:1})]),o("div",Xe,[a(l(K),{checked:i.value.allowFutureDates,"onUpdate:checked":f[2]||(f[2]=F=>u("allowFutureDates",F)),disabled:c.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...f[9]||(f[9]=[n("Permitir fechas futuras",-1)])]),_:1})])])]),o("div",Ze,[a(l($),{class:"text-sm font-medium"},{default:s(()=>[...f[10]||(f[10]=[n("Rango de fechas (opcional)",-1)])]),_:1}),o("div",null,[a(l($),{class:"text-xs text-muted-foreground"},{default:s(()=>[...f[11]||(f[11]=[n("Fecha mínima",-1)])]),_:1}),a(l(q),{type:"date","model-value":e(i.value.minDate),"onUpdate:modelValue":f[3]||(f[3]=F=>t("minDate",F)),disabled:c.disabled},null,8,["model-value","disabled"])]),o("div",null,[a(l($),{class:"text-xs text-muted-foreground"},{default:s(()=>[...f[12]||(f[12]=[n("Fecha máxima",-1)])]),_:1}),a(l(q),{type:"date","model-value":e(i.value.maxDate),"onUpdate:modelValue":f[4]||(f[4]=F=>t("maxDate",F)),disabled:c.disabled},null,8,["model-value","disabled"])])])]),o("div",Je,[o("p",el,[f[14]||(f[14]=o("strong",null,"Resumen:",-1)),n(" Formato: "+_(i.value.format)+". "+_(i.value.allowPastDates&&i.value.allowFutureDates?"Sin restricciones temporales.":"")+" "+_(i.value.allowPastDates&&!i.value.allowFutureDates?"Solo fechas pasadas y actuales.":"")+" "+_(!i.value.allowPastDates&&i.value.allowFutureDates?"Solo fechas futuras y actuales.":"")+" "+_(!i.value.allowPastDates&&!i.value.allowFutureDates?"Solo fecha actual.":"")+" ",1),i.value.minDate||i.value.maxDate?(r(),x("span",ll,[f[13]||(f[13]=o("br",null,null,-1)),n(" Rango: "+_(i.value.minDate?e(i.value.minDate):"...")+" - "+_(i.value.maxDate?e(i.value.maxDate):"..."),1)])):V("",!0)])])])]))}}),tl=Q(al,[["__scopeId","data-v-57c427db"]]),ol={class:"space-y-4"},sl={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},dl={class:"font-medium flex items-center gap-2"},il={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nl={key:0,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},rl={class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},ul={class:"text-sm text-muted-foreground"},ml={key:0},cl=W({__name:"NumberFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=[{value:0,label:"0 (números enteros)"},{value:1,label:"1 decimal"},{value:2,label:"2 decimales"},{value:3,label:"3 decimales"},{value:4,label:"4 decimales"}],i=U({get:()=>C.modelValue||{min:void 0,max:void 0,step:1,decimals:0},set:t=>y("update:modelValue",t)}),u=(t,c)=>{(t==="min"||t==="max")&&c===""&&(c=void 0),t==="step"&&(c===""||c<0)&&(c=1),t==="decimals"&&(c===""||c<0)&&(c=0),y("update:modelValue",{...i.value,[t]:c===""||c===null?void 0:Number(c)})},e=U(()=>{const{min:t,max:c}=i.value;return t!==void 0&&c!==void 0?t<=c:!0});return(t,c)=>(r(),x("div",ol,[o("div",sl,[o("h4",dl,[a(l(H),{variant:"secondary",class:"text-xs"},{default:s(()=>[...c[4]||(c[4]=[n("Configuración Numérica",-1)])]),_:1})]),o("div",il,[o("div",null,[a(l($),null,{default:s(()=>[...c[5]||(c[5]=[n("Valor mínimo (opcional)",-1)])]),_:1}),a(l(q),{type:"number","model-value":i.value.min,"onUpdate:modelValue":c[0]||(c[0]=f=>u("min",f)),placeholder:"Sin límite",disabled:t.disabled},null,8,["model-value","disabled"]),c[6]||(c[6]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Dejar vacío para sin límite mínimo ",-1))]),o("div",null,[a(l($),null,{default:s(()=>[...c[7]||(c[7]=[n("Valor máximo (opcional)",-1)])]),_:1}),a(l(q),{type:"number","model-value":i.value.max,"onUpdate:modelValue":c[1]||(c[1]=f=>u("max",f)),placeholder:"Sin límite",disabled:t.disabled},null,8,["model-value","disabled"]),c[8]||(c[8]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Dejar vacío para sin límite máximo ",-1))]),o("div",null,[a(l($),null,{default:s(()=>[...c[9]||(c[9]=[n("Incremento (step)",-1)])]),_:1}),a(l(q),{type:"number","model-value":i.value.step,"onUpdate:modelValue":c[2]||(c[2]=f=>u("step",f)),min:"0.01",step:"0.01",placeholder:"1",disabled:t.disabled},null,8,["model-value","disabled"]),c[10]||(c[10]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Valor de incremento para los botones +/- ",-1))]),o("div",null,[a(l($),null,{default:s(()=>[...c[11]||(c[11]=[n("Decimales permitidos",-1)])]),_:1}),a(l(z),{"model-value":String(i.value.decimals),"onUpdate:modelValue":c[3]||(c[3]=f=>u("decimals",Number(f))),disabled:t.disabled},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona decimales"})]),_:1}),a(l(G),null,{default:s(()=>[(r(),x(N,null,Y(d,f=>a(l(j),{key:f.value,value:String(f.value)},{default:s(()=>[n(_(f.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","disabled"])])]),e.value?V("",!0):(r(),x("div",nl,[...c[12]||(c[12]=[o("p",{class:"text-sm text-destructive"}," ⚠️ El valor mínimo no puede ser mayor al valor máximo ",-1)])])),o("div",rl,[o("p",ul,[c[14]||(c[14]=o("strong",null,"Resumen:",-1)),n(" "+_(i.value.decimals===0?"Números enteros":`Hasta ${i.value.decimals} decimal${i.value.decimals===1?"":"es"}`)+". Incremento de "+_(i.value.step||1)+". ",1),i.value.min!==void 0||i.value.max!==void 0?(r(),x("span",ml,[c[13]||(c[13]=o("br",null,null,-1)),n(" Rango: "+_(i.value.min!==void 0?i.value.min:"...")+" - "+_(i.value.max!==void 0?i.value.max:"..."),1)])):V("",!0)])])])]))}}),pl=Q(cl,[["__scopeId","data-v-293a52a2"]]),fl={class:"space-y-4"},vl={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},bl={class:"font-medium flex items-center gap-2"},gl={class:"space-y-4"},xl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yl={class:"md:col-span-2"},_l={key:0,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},Cl={key:1,class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},kl={class:"text-sm text-muted-foreground"},$l={key:2,class:"mt-2 p-2 bg-background border border-border rounded text-xs"},Vl={class:"text-muted-foreground"},wl={key:0},Fl=W({__name:"DisclaimerFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=U({get:()=>C.modelValue||{disclaimerText:"",modalTitle:"Términos y Condiciones",acceptButtonText:"Acepto",declineButtonText:"No acepto"},set:e=>y("update:modelValue",e)}),i=(e,t)=>{y("update:modelValue",{...d.value,[e]:t})},u=U(()=>{var e;return((e=d.value.disclaimerText)==null?void 0:e.trim().length)>0});return(e,t)=>{var c;return r(),x("div",fl,[o("div",vl,[o("h4",bl,[a(l(H),{variant:"secondary",class:"text-xs"},{default:s(()=>[...t[4]||(t[4]=[n("Configuración de Disclaimer",-1)])]),_:1})]),o("div",gl,[o("div",null,[a(l($),null,{default:s(()=>[...t[5]||(t[5]=[n("Texto del disclaimer *",-1)])]),_:1}),a(l(ne),{"model-value":d.value.disclaimerText,"onUpdate:modelValue":t[0]||(t[0]=f=>i("disclaimerText",f)),placeholder:"Ingresa aquí los términos y condiciones, política de privacidad, o el texto legal que los usuarios deben aceptar...",rows:"6",class:"min-h-[120px]",disabled:e.disabled},null,8,["model-value","disabled"]),t[6]||(t[6]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Este texto se mostrará en un modal cuando el usuario haga clic en el campo ",-1))]),o("div",xl,[o("div",null,[a(l($),null,{default:s(()=>[...t[7]||(t[7]=[n("Título del modal",-1)])]),_:1}),a(l(q),{"model-value":d.value.modalTitle,"onUpdate:modelValue":t[1]||(t[1]=f=>i("modalTitle",f)),placeholder:"Términos y Condiciones",disabled:e.disabled},null,8,["model-value","disabled"])]),o("div",null,[a(l($),null,{default:s(()=>[...t[8]||(t[8]=[n("Texto botón aceptar",-1)])]),_:1}),a(l(q),{"model-value":d.value.acceptButtonText,"onUpdate:modelValue":t[2]||(t[2]=f=>i("acceptButtonText",f)),placeholder:"Acepto",disabled:e.disabled},null,8,["model-value","disabled"])]),o("div",yl,[a(l($),null,{default:s(()=>[...t[9]||(t[9]=[n("Texto botón rechazar",-1)])]),_:1}),a(l(q),{"model-value":d.value.declineButtonText,"onUpdate:modelValue":t[3]||(t[3]=f=>i("declineButtonText",f)),placeholder:"No acepto",disabled:e.disabled},null,8,["model-value","disabled"])])])]),u.value?V("",!0):(r(),x("div",_l,[...t[10]||(t[10]=[o("p",{class:"text-sm text-destructive"}," ⚠️ El texto del disclaimer es requerido ",-1)])])),u.value?(r(),x("div",Cl,[o("p",kl,[t[11]||(t[11]=o("strong",null,"Resumen:",-1)),n(' Modal "'+_(d.value.modalTitle)+'" con '+_((c=d.value.disclaimerText)==null?void 0:c.length)+" caracteres. ",1),t[12]||(t[12]=o("br",null,null,-1)),n(' Botones: "'+_(d.value.acceptButtonText)+'" / "'+_(d.value.declineButtonText)+'" ',1)])])):V("",!0),d.value.disclaimerText&&d.value.disclaimerText.length>100?(r(),x("div",$l,[t[13]||(t[13]=o("strong",{class:"block mb-1"},"Vista previa del texto:",-1)),o("p",Vl,[n(_(d.value.disclaimerText.substring(0,150))+" ",1),d.value.disclaimerText.length>150?(r(),x("span",wl,"...")):V("",!0)])])):V("",!0)])])}}}),hl=Q(Fl,[["__scopeId","data-v-ce66ffa2"]]),Dl={class:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800 space-y-4"},Tl={key:0,class:"mb-4"},Sl={class:"flex flex-col"},Al={key:0,class:"text-xs text-muted-foreground"},El={key:0},Bl={key:1,class:"mb-4 p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-md"},Ul={class:"flex items-center space-x-2 mb-3"},Pl={class:"flex items-center space-x-2"},Ml={class:"mt-4 space-y-2"},Il={class:"space-y-2"},ql={class:"flex items-start space-x-2"},Nl={class:"flex items-start space-x-2"},jl={class:"flex items-start space-x-2"},Yl={class:"mt-4 space-y-2"},Ol={class:"space-y-2"},zl={class:"flex items-start space-x-2"},Rl={class:"flex items-start space-x-2"},Ll=W({__name:"ConvocatoriaFieldConfig",props:{modelValue:{},convocatorias:{default:()=>[]},disabled:{type:Boolean}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=U({get:()=>C.modelValue||{convocatoria_id:void 0,multiple:!1,mostrarVotoBlanco:!0,ordenCandidatos:"aleatorio",vistaPreferida:"lista"},set:u=>y("update:modelValue",u)}),i=(u,e)=>{y("update:modelValue",{...d.value,[u]:e})};return(u,e)=>(r(),x("div",Dl,[e[17]||(e[17]=o("h4",{class:"font-medium text-green-900 dark:text-green-100 mb-3"},"Selección de Convocatoria para Votación",-1)),e[18]||(e[18]=o("p",{class:"text-sm text-green-700 dark:text-green-300 mb-4"}," Selecciona UNA convocatoria específica. Los usuarios con postulaciones APROBADAS a esta convocatoria aparecerán como opciones de voto. ",-1)),u.convocatorias&&u.convocatorias.length>0?(r(),x("div",Tl,[a(l($),null,{default:s(()=>[...e[5]||(e[5]=[n("Convocatoria *",-1)])]),_:1}),a(l(z),{"model-value":d.value.convocatoria_id?d.value.convocatoria_id.toString():void 0,"onUpdate:modelValue":e[0]||(e[0]=t=>i("convocatoria_id",t?Number(t):void 0)),disabled:u.disabled},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona una convocatoria"})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(u.convocatorias,t=>(r(),A(l(j),{key:t.id,value:t.id.toString()},{default:s(()=>[o("div",Sl,[o("span",null,_(t.nombre),1),t.cargo?(r(),x("span",Al,[n(_(t.cargo.ruta_jerarquica||t.cargo.nombre)+" ",1),t.periodo_electoral?(r(),x("span",El," - "+_(t.periodo_electoral.nombre),1)):V("",!0)])):V("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),e[6]||(e[6]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Se mostrarán los candidatos con postulaciones aprobadas a esta convocatoria ",-1))])):(r(),x("div",Bl,[...e[7]||(e[7]=[o("p",{class:"text-sm text-amber-800 dark:text-amber-200"}," No hay convocatorias con postulaciones aprobadas disponibles. Asegúrate de que existan convocatorias con al menos una postulación aprobada. ",-1)])])),o("div",Ul,[a(l(K),{id:"conv_multiple",checked:d.value.multiple,"onUpdate:checked":e[1]||(e[1]=t=>i("multiple",t)),disabled:u.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...e[8]||(e[8]=[n(" Permitir selección múltiple ",-1),o("span",{class:"text-muted-foreground block text-xs"}," Los votantes podrán seleccionar varios candidatos ",-1)])]),_:1})]),o("div",Pl,[a(l(K),{id:"conv_voto_blanco",checked:d.value.mostrarVotoBlanco,"onUpdate:checked":e[2]||(e[2]=t=>i("mostrarVotoBlanco",t)),disabled:u.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...e[9]||(e[9]=[n(" ¿Deseas mostrar Voto en Blanco? ",-1),o("span",{class:"text-muted-foreground block text-xs"},' Agrega la opción "Voto en blanco" para los votantes ',-1)])]),_:1})]),o("div",Ml,[a(l($),{class:"text-sm font-medium"},{default:s(()=>[...e[10]||(e[10]=[n("Orden de candidatos",-1)])]),_:1}),a(l(me),{"model-value":d.value.ordenCandidatos,"onUpdate:modelValue":e[3]||(e[3]=t=>i("ordenCandidatos",t)),disabled:u.disabled},{default:s(()=>[o("div",Il,[o("div",ql,[a(l(le),{value:"aleatorio",id:"orden_aleatorio"}),a(l($),{for:"orden_aleatorio",class:"text-sm font-normal cursor-pointer"},{default:s(()=>[...e[11]||(e[11]=[o("div",null,[n(" Aleatorio por sesión "),o("span",{class:"text-xs text-muted-foreground block"}," Recomendado para equidad electoral - cada votante ve un orden diferente ")],-1)])]),_:1})]),o("div",Nl,[a(l(le),{value:"alfabetico",id:"orden_alfabetico"}),a(l($),{for:"orden_alfabetico",class:"text-sm font-normal cursor-pointer"},{default:s(()=>[...e[12]||(e[12]=[o("div",null,[n(" Alfabético por nombre "),o("span",{class:"text-xs text-muted-foreground block"}," Orden predecible y consistente para todos los votantes ")],-1)])]),_:1})]),o("div",jl,[a(l(le),{value:"fecha_postulacion",id:"orden_fecha"}),a(l($),{for:"orden_fecha",class:"text-sm font-normal cursor-pointer"},{default:s(()=>[...e[13]||(e[13]=[o("div",null,[n(" Por fecha de postulación "),o("span",{class:"text-xs text-muted-foreground block"}," Más recientes primero - refleja actividad reciente ")],-1)])]),_:1})])])]),_:1},8,["model-value","disabled"])]),o("div",Yl,[a(l($),{class:"text-sm font-medium"},{default:s(()=>[...e[14]||(e[14]=[n("Vista de presentación",-1)])]),_:1}),a(l(me),{"model-value":d.value.vistaPreferida,"onUpdate:modelValue":e[4]||(e[4]=t=>i("vistaPreferida",t)),disabled:u.disabled},{default:s(()=>[o("div",Ol,[o("div",zl,[a(l(le),{value:"lista",id:"vista_lista"}),a(l($),{for:"vista_lista",class:"text-sm font-normal cursor-pointer"},{default:s(()=>[...e[15]||(e[15]=[o("div",null,[n(" Vista en lista "),o("span",{class:"text-xs text-muted-foreground block"}," Lista vertical tradicional - ocupa menos espacio ")],-1)])]),_:1})]),o("div",Rl,[a(l(le),{value:"cards",id:"vista_cards"}),a(l($),{for:"vista_cards",class:"text-sm font-normal cursor-pointer"},{default:s(()=>[...e[16]||(e[16]=[o("div",null,[n(" Vista en tarjetas "),o("span",{class:"text-xs text-muted-foreground block"}," Tarjetas visuales en grid - más atractivo visualmente ")],-1)])]),_:1})])])]),_:1},8,["model-value","disabled"])])]))}}),Gl=Q(Ll,[["__scopeId","data-v-0b0898f8"]]),Wl={class:"text-sm text-muted-foreground"},Hl={class:"text-xs text-muted-foreground mt-1"},Ql={key:0},Kl={class:"text-xs text-muted-foreground mt-1"},Xl={key:1},Zl={class:"text-xs text-muted-foreground mt-1"},Jl={key:2},ea={class:"text-xs text-muted-foreground mt-1"},la=W({__name:"GeographicRestrictions",props:{modelValue:{default:()=>({territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[]})},disabled:{type:Boolean,default:!1},title:{default:"Restricciones Geográficas (Opcional)"},description:{default:"Selecciona las regiones donde estará disponible. Si no seleccionas nada, estará disponible para todos."}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=O([]),i=O([]),u=O([]),e=O([]),t=O(!1),c=async()=>{try{t.value=!0;const v=await fetch("/admin/geographic/territorios");d.value=await v.json()}catch(v){console.error("Error loading territorios:",v)}finally{t.value=!1}},f=async v=>{if(!v.length){i.value=[];return}try{t.value=!0;const b=await fetch(`/admin/geographic/departamentos?territorio_ids=${v.join(",")}`);i.value=await b.json()}catch(b){console.error("Error loading departamentos:",b)}finally{t.value=!1}},F=async v=>{if(!v.length){u.value=[];return}try{t.value=!0;const b=await fetch(`/admin/geographic/municipios?departamento_ids=${v.join(",")}`);u.value=await b.json()}catch(b){console.error("Error loading municipios:",b)}finally{t.value=!1}},k=async v=>{if(!v.length){e.value=[];return}try{t.value=!0;const b=await fetch(`/admin/geographic/localidades?municipio_ids=${v.join(",")}`);e.value=await b.json()}catch(b){console.error("Error loading localidades:",b)}finally{t.value=!1}},S=(v,b)=>{var D,p,m,T;const w=Array.isArray(v)?v.map(Number).filter(Boolean):v?[Number(v)].filter(Boolean):[],P={territorios_ids:((D=C.modelValue)==null?void 0:D.territorios_ids)||[],departamentos_ids:((p=C.modelValue)==null?void 0:p.departamentos_ids)||[],municipios_ids:((m=C.modelValue)==null?void 0:m.municipios_ids)||[],localidades_ids:((T=C.modelValue)==null?void 0:T.localidades_ids)||[],...C.modelValue};P[b]=w,b==="territorios_ids"?(P.departamentos_ids=[],P.municipios_ids=[],P.localidades_ids=[],te(()=>f(w))):b==="departamentos_ids"?(P.municipios_ids=[],P.localidades_ids=[],te(()=>F(w))):b==="municipios_ids"&&(P.localidades_ids=[],te(()=>k(w))),y("update:modelValue",P)};return be(async()=>{var v,b,w,P,D,p;await c(),(b=(v=C.modelValue)==null?void 0:v.territorios_ids)!=null&&b.length&&await f(C.modelValue.territorios_ids),(P=(w=C.modelValue)==null?void 0:w.departamentos_ids)!=null&&P.length&&await F(C.modelValue.departamentos_ids),(p=(D=C.modelValue)==null?void 0:D.municipios_ids)!=null&&p.length&&await k(C.modelValue.municipios_ids)}),(v,b)=>(r(),A(l(J),{class:"border-dashed"},{default:s(()=>[a(l(oe),null,{default:s(()=>[a(l(se),{class:"text-base"},{default:s(()=>[n(_(v.title),1)]),_:1}),o("p",Wl,_(v.description),1)]),_:1}),a(l(ee),{class:"space-y-4"},{default:s(()=>{var w,P,D,p,m,T,g;return[o("div",null,[a(l($),null,{default:s(()=>[...b[4]||(b[4]=[n("Territorios",-1)])]),_:1}),a(l(z),{"model-value":(((w=C.modelValue)==null?void 0:w.territorios_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":b[0]||(b[0]=h=>S(h,"territorios_ids")),multiple:"",disabled:v.disabled||t.value},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Seleccionar territorios..."})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(d.value,h=>(r(),A(l(j),{key:h.id,value:h.id.toString()},{default:s(()=>[n(_(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",Hl,_(C.modelValue.territorios_ids.length)+" territorio(s) seleccionado(s) ",1)]),i.value.length>0?(r(),x("div",Ql,[a(l($),null,{default:s(()=>[...b[5]||(b[5]=[n("Departamentos",-1)])]),_:1}),a(l(z),{"model-value":(((P=C.modelValue)==null?void 0:P.departamentos_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":b[1]||(b[1]=h=>S(h,"departamentos_ids")),multiple:"",disabled:v.disabled||t.value},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Seleccionar departamentos..."})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(i.value,h=>(r(),A(l(j),{key:h.id,value:h.id.toString()},{default:s(()=>[n(_(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",Kl,_((((D=C.modelValue)==null?void 0:D.departamentos_ids)||[]).length)+" departamento(s) seleccionado(s) ",1)])):V("",!0),u.value.length>0?(r(),x("div",Xl,[a(l($),null,{default:s(()=>[...b[6]||(b[6]=[n("Municipios",-1)])]),_:1}),a(l(z),{"model-value":(((p=C.modelValue)==null?void 0:p.municipios_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":b[2]||(b[2]=h=>S(h,"municipios_ids")),multiple:"",disabled:v.disabled||t.value},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Seleccionar municipios..."})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(u.value,h=>(r(),A(l(j),{key:h.id,value:h.id.toString()},{default:s(()=>[n(_(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",Zl,_((((m=C.modelValue)==null?void 0:m.municipios_ids)||[]).length)+" municipio(s) seleccionado(s) ",1)])):V("",!0),e.value.length>0?(r(),x("div",Jl,[a(l($),null,{default:s(()=>[...b[7]||(b[7]=[n("Localidades",-1)])]),_:1}),a(l(z),{"model-value":(((T=C.modelValue)==null?void 0:T.localidades_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":b[3]||(b[3]=h=>S(h,"localidades_ids")),multiple:"",disabled:v.disabled||t.value},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Seleccionar localidades..."})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(e.value,h=>(r(),A(l(j),{key:h.id,value:h.id.toString()},{default:s(()=>[n(_(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",ea,_((((g=C.modelValue)==null?void 0:g.localidades_ids)||[]).length)+" localidad(es) seleccionada(s) ",1)])):V("",!0)]}),_:1})]),_:1}))}}),aa={class:"space-y-4"},ta={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},oa={key:0,class:"font-medium flex items-center gap-2"},sa={key:1,class:"space-y-4"},da={class:"flex flex-col"},ia={class:"font-medium"},na={key:0,class:"text-xs text-muted-foreground"},ra={class:"flex flex-col"},ua={class:"font-medium"},ma={class:"text-xs text-muted-foreground"},ca={class:"space-y-4"},pa={class:"space-y-2"},fa={class:"flex items-center space-x-2"},va={class:"flex items-center space-x-2"},ba={key:2,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},ga={key:3,class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},xa={class:"text-sm text-muted-foreground"},ya={key:0},_a={key:1},Ca={key:2},ka={key:3},$a={key:4},Va={key:5},wa={key:6},Fa=W({__name:"PerfilCandidaturaFieldConfig",props:{modelValue:{},cargos:{default:()=>[]},periodosElectorales:{default:()=>[]},context:{default:"convocatoria"},disabled:{type:Boolean}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=U({get:()=>C.modelValue||{cargo_id:void 0,periodo_electoral_id:void 0,territorio_id:void 0,departamento_id:void 0,municipio_id:void 0,localidad_id:void 0,territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[],multiple:!1,mostrarVotoBlanco:!0},set:F=>y("update:modelValue",F)}),i=(F,k)=>{y("update:modelValue",{...d.value,[F]:k})},u=U({get:()=>({territorio_id:d.value.territorio_id,departamento_id:d.value.departamento_id,municipio_id:d.value.municipio_id,localidad_id:d.value.localidad_id,territorios_ids:d.value.territorios_ids||[],departamentos_ids:d.value.departamentos_ids||[],municipios_ids:d.value.municipios_ids||[],localidades_ids:d.value.localidades_ids||[]}),set:F=>{y("update:modelValue",{...d.value,territorio_id:F.territorio_id,departamento_id:F.departamento_id,municipio_id:F.municipio_id,localidad_id:F.localidad_id,territorios_ids:F.territorios_ids,departamentos_ids:F.departamentos_ids,municipios_ids:F.municipios_ids,localidades_ids:F.localidades_ids})}}),e=U(()=>!d.value.cargo_id||d.value.cargo_id==="all"?null:C.cargos.find(F=>F.id===d.value.cargo_id)),t=U(()=>!d.value.periodo_electoral_id||d.value.periodo_electoral_id==="all"?null:C.periodosElectorales.find(F=>F.id===d.value.periodo_electoral_id)),c=U(()=>d.value.cargo_id!==void 0||d.value.periodo_electoral_id!==void 0),f=U(()=>C.context==="votacion"||C.context==="formulario");return(F,k)=>(r(),x("div",aa,[o("div",ta,[f.value?(r(),x("h4",oa,[a(l(H),{variant:"secondary",class:"text-xs"},{default:s(()=>[...k[5]||(k[5]=[n("Configuración de Perfil de Candidatura",-1)])]),_:1})])):V("",!0),f.value?(r(),x("div",sa,[o("div",null,[a(l($),null,{default:s(()=>[...k[6]||(k[6]=[n("Cargo",-1)])]),_:1}),a(l(z),{"model-value":d.value.cargo_id?String(d.value.cargo_id):void 0,"onUpdate:modelValue":k[0]||(k[0]=S=>i("cargo_id",S==="all"?"all":S?Number(S):void 0)),disabled:F.disabled},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona un cargo"})]),_:1}),a(l(G),null,{default:s(()=>[a(l(j),{value:"all"},{default:s(()=>[...k[7]||(k[7]=[o("span",{class:"font-medium"},"Todos los cargos",-1)])]),_:1}),(r(!0),x(N,null,Y(F.cargos,S=>(r(),A(l(j),{key:S.id,value:String(S.id)},{default:s(()=>[o("div",da,[o("span",ia,_(S.nombre),1),S.ruta_jerarquica?(r(),x("span",na,_(S.ruta_jerarquica),1)):V("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"])]),o("div",null,[a(l($),null,{default:s(()=>[...k[8]||(k[8]=[n("Período Electoral",-1)])]),_:1}),a(l(z),{"model-value":d.value.periodo_electoral_id?String(d.value.periodo_electoral_id):void 0,"onUpdate:modelValue":k[1]||(k[1]=S=>i("periodo_electoral_id",S==="all"?"all":S?Number(S):void 0)),disabled:F.disabled},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona un período"})]),_:1}),a(l(G),null,{default:s(()=>[a(l(j),{value:"all"},{default:s(()=>[...k[9]||(k[9]=[o("span",{class:"font-medium"},"Todos los períodos",-1)])]),_:1}),(r(!0),x(N,null,Y(F.periodosElectorales,S=>(r(),A(l(j),{key:S.id,value:String(S.id)},{default:s(()=>[o("div",ra,[o("span",ua,_(S.nombre),1),o("span",ma,_(new Date(S.fecha_inicio).toLocaleDateString())+" - "+_(new Date(S.fecha_fin).toLocaleDateString()),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"])]),o("div",ca,[o("div",null,[a(l($),{class:"text-sm font-medium mb-3 block"},{default:s(()=>[...k[10]||(k[10]=[n("Opciones de votación",-1)])]),_:1}),o("div",pa,[o("div",fa,[a(l(K),{checked:d.value.multiple,"onUpdate:checked":k[2]||(k[2]=S=>i("multiple",S)),disabled:F.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...k[11]||(k[11]=[n("Permitir selección múltiple de candidatos",-1)])]),_:1})]),o("div",va,[a(l(K),{checked:d.value.mostrarVotoBlanco,"onUpdate:checked":k[3]||(k[3]=S=>i("mostrarVotoBlanco",S)),disabled:F.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...k[12]||(k[12]=[n("Mostrar opción de voto en blanco",-1)])]),_:1})])])]),o("div",null,[a(l($),{class:"text-sm font-medium mb-3 block"},{default:s(()=>[...k[13]||(k[13]=[n("Restricciones Geográficas (opcional)",-1)])]),_:1}),k[14]||(k[14]=o("p",{class:"text-xs text-muted-foreground mb-3"}," Limita los candidatos mostrados según ubicación geográfica ",-1)),a(la,{modelValue:u.value,"onUpdate:modelValue":k[4]||(k[4]=S=>u.value=S),disabled:F.disabled},null,8,["modelValue","disabled"])])])])):V("",!0),f.value&&!c.value?(r(),x("div",ba,[...k[15]||(k[15]=[o("p",{class:"text-sm text-destructive"}," ⚠️ Debes seleccionar al menos un cargo o período electoral ",-1)])])):V("",!0),f.value&&c.value?(r(),x("div",ga,[o("p",xa,[k[20]||(k[20]=o("strong",null,"Configuración:",-1)),k[21]||(k[21]=o("br",null,null,-1)),e.value?(r(),x("span",ya,[k[16]||(k[16]=o("strong",null,"Cargo:",-1)),n(" "+_(e.value.ruta_jerarquica||e.value.nombre),1)])):d.value.cargo_id==="all"?(r(),x("span",_a,[...k[17]||(k[17]=[o("strong",null,"Cargo:",-1),n(" Todos los cargos ",-1)])])):V("",!0),d.value.cargo_id?(r(),x("br",Ca)):V("",!0),t.value?(r(),x("span",ka,[k[18]||(k[18]=o("strong",null,"Período:",-1)),n(" "+_(t.value.nombre),1)])):d.value.periodo_electoral_id==="all"?(r(),x("span",$a,[...k[19]||(k[19]=[o("strong",null,"Período:",-1),n(" Todos los períodos ",-1)])])):V("",!0),f.value?(r(),x("br",Va)):V("",!0),f.value?(r(),x("span",wa,_(d.value.multiple?"Selección múltiple":"Selección única")+", "+_(d.value.mostrarVotoBlanco?"con":"sin")+" voto en blanco ",1)):V("",!0)])])):V("",!0)])]))}}),ha=Q(Fa,[["__scopeId","data-v-1458e9b1"]]),Da={class:"space-y-4"},Ta={key:0,class:"space-y-2"},Sa={class:"space-y-2"},Aa={class:"flex items-center justify-between"},Ea={class:"flex items-center gap-2 flex-1"},Ba={class:"flex-1"},Ua={class:"flex items-center gap-2"},Pa={class:"font-medium text-sm"},Ma={class:"text-xs text-muted-foreground"},Ia={key:0,class:"text-xs text-red-500"},qa={key:0,class:"text-xs text-muted-foreground mt-1"},Na={class:"flex items-center gap-1"},ja={key:1,class:"text-center py-4 text-sm text-muted-foreground dark:text-muted-foreground"},Ya={class:"flex items-center justify-between"},Oa={class:"text-sm font-semibold"},za={key:0},Ra={key:1},La={class:"flex items-center space-x-2"},Ga={class:"flex justify-end gap-2"},Wa=W({__name:"RepeaterBuilder",props:{modelValue:{}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=[{value:"text",label:"Texto corto"},{value:"number",label:"Campo numérico"},{value:"email",label:"Correo electrónico"},{value:"date",label:"Fecha"},{value:"textarea",label:"Texto largo"},{value:"select",label:"Lista desplegable"},{value:"datepicker",label:"Selector de fecha avanzado"}],i=O(C.modelValue||[]),u=O({id:"",type:"text",title:"",description:"",required:!1,options:[],placeholder:""}),e=O(!1),t=O(null);ae(()=>C.modelValue,p=>{i.value=p||[]}),ae(i,p=>{y("update:modelValue",p)},{deep:!0});const c=()=>{u.value={id:"",type:"text",title:"",description:"",required:!1,options:[],placeholder:""},e.value=!1,t.value=null},f=()=>`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,F=()=>{if(!u.value.title){alert("Por favor ingresa un título para el campo");return}u.value.id||(u.value.id=f());const p={id:u.value.id,type:u.value.type,title:u.value.title,description:u.value.description||void 0,required:u.value.required,placeholder:u.value.placeholder||void 0};u.value.type==="select"&&u.value.options&&u.value.options.length>0&&(p.options=u.value.options),u.value.type==="number"&&(p.numberConfig={min:void 0,max:void 0,step:1,decimals:0}),u.value.type==="datepicker"&&(p.datepickerConfig={minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0}),t.value!==null?i.value[t.value]=p:i.value.push(p),c()},k=p=>{const m=i.value[p];u.value={...m,options:m.options||[]},t.value=p,e.value=!0},S=p=>{confirm("¿Estás seguro de eliminar este campo?")&&i.value.splice(p,1)},v=p=>{if(p>0){const m=i.value[p];i.value[p]=i.value[p-1],i.value[p-1]=m}},b=p=>{if(p<i.value.length-1){const m=i.value[p];i.value[p]=i.value[p+1],i.value[p+1]=m}},w=O("");ae(w,p=>{u.value.type==="select"&&(u.value.options=p.split(`
`).map(m=>m.trim()).filter(m=>m!==""))}),ae(()=>t.value,p=>{var m;p!==null&&((m=i.value[p])!=null&&m.options)?w.value=i.value[p].options.join(`
`):w.value=""});const P=U(()=>u.value.type==="select"),D=p=>{const m=d.find(T=>T.value===p);return m?m.label:p};return(p,m)=>(r(),x("div",Da,[i.value.length>0?(r(),x("div",Ta,[a(l($),{class:"text-sm font-medium"},{default:s(()=>[...m[7]||(m[7]=[n("Subcampos configurados:",-1)])]),_:1}),o("div",Sa,[(r(!0),x(N,null,Y(i.value,(T,g)=>(r(),A(l(J),{key:T.id,class:"relative"},{default:s(()=>[a(l(ee),{class:"p-3"},{default:s(()=>[o("div",Aa,[o("div",Ea,[a(l(xe),{class:"h-4 w-4 text-muted-foreground"}),o("div",Ba,[o("div",Ua,[o("span",Pa,_(T.title),1),o("span",Ma,"("+_(D(T.type))+")",1),T.required?(r(),x("span",Ia,"*Requerido")):V("",!0)]),T.description?(r(),x("p",qa,_(T.description),1)):V("",!0)])]),o("div",Na,[a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>v(g),disabled:g===0,class:"h-8 w-8 p-0"},{default:s(()=>[a(l(fe),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>b(g),disabled:g===i.value.length-1,class:"h-8 w-8 p-0"},{default:s(()=>[a(l(ve),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>k(g),class:"h-8 px-2"},{default:s(()=>[...m[8]||(m[8]=[n(" Editar ",-1)])]),_:2},1032,["onClick"]),a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>S(g),class:"h-8 w-8 p-0"},{default:s(()=>[a(l(de),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))])])):(r(),x("div",ja," No hay subcampos configurados. Agrega al menos un campo. ")),e.value?(r(),A(l(J),{key:2,class:"border-primary dark:border-primary"},{default:s(()=>[a(l(oe),{class:"pb-3"},{default:s(()=>[o("div",Ya,[o("h4",Oa,_(t.value!==null?"Editar":"Agregar")+" Subcampo ",1),a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:c,class:"h-8 w-8 p-0"},{default:s(()=>[...m[9]||(m[9]=[n(" × ",-1)])]),_:1})])]),_:1}),a(l(ee),{class:"space-y-4"},{default:s(()=>[o("div",null,[a(l($),{for:"field-type"},{default:s(()=>[...m[10]||(m[10]=[n("Tipo de campo *",-1)])]),_:1}),a(l(z),{modelValue:u.value.type,"onUpdate:modelValue":m[0]||(m[0]=T=>u.value.type=T)},{default:s(()=>[a(l(R),{id:"field-type"},{default:s(()=>[a(l(L))]),_:1}),a(l(G),null,{default:s(()=>[(r(),x(N,null,Y(d,T=>a(l(j),{key:T.value,value:T.value},{default:s(()=>[n(_(T.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[a(l($),{for:"field-title"},{default:s(()=>[...m[11]||(m[11]=[n("Título del campo *",-1)])]),_:1}),a(l(q),{id:"field-title",modelValue:u.value.title,"onUpdate:modelValue":m[1]||(m[1]=T=>u.value.title=T),placeholder:"Ej: Nombre completo"},null,8,["modelValue"])]),o("div",null,[a(l($),{for:"field-description"},{default:s(()=>[...m[12]||(m[12]=[n("Descripción (opcional)",-1)])]),_:1}),a(l(q),{id:"field-description",modelValue:u.value.description,"onUpdate:modelValue":m[2]||(m[2]=T=>u.value.description=T),placeholder:"Texto de ayuda para el usuario"},null,8,["modelValue"])]),["text","number","email","textarea"].includes(u.value.type)?(r(),x("div",za,[a(l($),{for:"field-placeholder"},{default:s(()=>[...m[13]||(m[13]=[n("Placeholder (opcional)",-1)])]),_:1}),a(l(q),{id:"field-placeholder",modelValue:u.value.placeholder,"onUpdate:modelValue":m[3]||(m[3]=T=>u.value.placeholder=T),placeholder:"Texto que aparece cuando el campo está vacío"},null,8,["modelValue"])])):V("",!0),P.value?(r(),x("div",Ra,[a(l($),{for:"field-options"},{default:s(()=>[...m[14]||(m[14]=[n("Opciones (una por línea) *",-1)])]),_:1}),a(l(ne),{id:"field-options",modelValue:w.value,"onUpdate:modelValue":m[4]||(m[4]=T=>w.value=T),placeholder:`Opción 1
Opción 2
Opción 3`,rows:"4"},null,8,["modelValue"])])):V("",!0),o("div",La,[a(l(K),{id:"field-required",checked:u.value.required,"onUpdate:checked":m[5]||(m[5]=T=>u.value.required=T)},null,8,["checked"]),a(l($),{for:"field-required",class:"text-sm font-normal"},{default:s(()=>[...m[15]||(m[15]=[n(" Campo requerido ",-1)])]),_:1})]),o("div",Ga,[a(l(M),{type:"button",variant:"outline",size:"sm",onClick:c},{default:s(()=>[...m[16]||(m[16]=[n(" Cancelar ",-1)])]),_:1}),a(l(M),{type:"button",size:"sm",onClick:F},{default:s(()=>[n(_(t.value!==null?"Actualizar":"Agregar")+" Campo ",1)]),_:1})])]),_:1})]),_:1})):V("",!0),e.value?V("",!0):(r(),A(l(M),{key:3,type:"button",variant:"outline",size:"sm",onClick:m[6]||(m[6]=T=>e.value=!0),class:"w-full"},{default:s(()=>[a(l(Z),{class:"h-4 w-4 mr-2"}),m[17]||(m[17]=n(" Agregar Subcampo ",-1))]),_:1}))]))}}),Ha={class:"space-y-4"},Qa={class:"p-4 bg-cyan-50 dark:bg-cyan-950/20 rounded-lg border border-cyan-200 dark:border-cyan-800 space-y-4"},Ka={class:"font-medium text-cyan-900 dark:text-cyan-100 mb-3 flex items-center gap-2"},Xa={class:"space-y-4"},Za={key:0,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},Ja={key:1,class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},et={class:"text-sm text-muted-foreground"},lt={key:0},at=W({__name:"RepeaterFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=U({get:()=>C.modelValue||{minItems:0,maxItems:10,itemName:"Elemento",addButtonText:"Agregar elemento",removeButtonText:"Eliminar",fields:[]},set:e=>y("update:modelValue",e)}),i=(e,t)=>{y("update:modelValue",{...d.value,[e]:t})},u=U(()=>{const e=d.value;return e.minItems!==void 0&&e.maxItems!==void 0?e.minItems<=e.maxItems:!0});return(e,t)=>{var c;return r(),x("div",Ha,[o("div",Qa,[o("h4",Ka,[a(l(H),{variant:"secondary",class:"text-xs"},{default:s(()=>[...t[6]||(t[6]=[n("Configuración del Repetidor",-1)])]),_:1})]),t[20]||(t[20]=o("p",{class:"text-sm text-cyan-700 dark:text-cyan-300 mb-4"}," Define los subcampos y límites del repetidor. Los usuarios podrán agregar múltiples instancias de estos campos. ",-1)),o("div",Xa,[o("div",null,[a(l($),null,{default:s(()=>[...t[7]||(t[7]=[n("Número mínimo de elementos",-1)])]),_:1}),a(l(q),{type:"number","model-value":d.value.minItems,"onUpdate:modelValue":t[0]||(t[0]=f=>i("minItems",Number(f))),min:"0",max:"50",disabled:e.disabled},null,8,["model-value","disabled"]),t[8]||(t[8]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Cantidad mínima de elementos que debe tener el usuario ",-1))]),o("div",null,[a(l($),null,{default:s(()=>[...t[9]||(t[9]=[n("Número máximo de elementos",-1)])]),_:1}),a(l(q),{type:"number","model-value":d.value.maxItems,"onUpdate:modelValue":t[1]||(t[1]=f=>i("maxItems",Number(f))),min:"1",max:"50",disabled:e.disabled},null,8,["model-value","disabled"]),t[10]||(t[10]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Cantidad máxima de elementos que puede agregar el usuario ",-1))]),o("div",null,[a(l($),null,{default:s(()=>[...t[11]||(t[11]=[n("Nombre del elemento",-1)])]),_:1}),a(l(q),{"model-value":d.value.itemName,"onUpdate:modelValue":t[2]||(t[2]=f=>i("itemName",f)),placeholder:"Elemento",disabled:e.disabled},null,8,["model-value","disabled"]),t[12]||(t[12]=o("p",{class:"text-xs text-muted-foreground mt-1"},' Cómo se llamará cada instancia (ej: "Referencia", "Experiencia", "Documento") ',-1))]),o("div",null,[a(l($),null,{default:s(()=>[...t[13]||(t[13]=[n("Texto del botón agregar",-1)])]),_:1}),a(l(q),{"model-value":d.value.addButtonText,"onUpdate:modelValue":t[3]||(t[3]=f=>i("addButtonText",f)),placeholder:"Agregar elemento",disabled:e.disabled},null,8,["model-value","disabled"])]),o("div",null,[a(l($),null,{default:s(()=>[...t[14]||(t[14]=[n("Texto del botón eliminar",-1)])]),_:1}),a(l(q),{"model-value":d.value.removeButtonText,"onUpdate:modelValue":t[4]||(t[4]=f=>i("removeButtonText",f)),placeholder:"Eliminar",disabled:e.disabled},null,8,["model-value","disabled"])]),o("div",null,[a(l($),{class:"text-sm font-medium mb-2"},{default:s(()=>[...t[15]||(t[15]=[n("Configuración de subcampos",-1)])]),_:1}),t[16]||(t[16]=o("p",{class:"text-xs text-muted-foreground mb-3"}," Define los campos que se repetirán dentro del repetidor. ",-1)),a(Wa,{"model-value":d.value.fields,"onUpdate:modelValue":t[5]||(t[5]=f=>i("fields",f)),disabled:e.disabled},null,8,["model-value","disabled"])])]),u.value?V("",!0):(r(),x("div",Za,[...t[17]||(t[17]=[o("p",{class:"text-sm text-destructive"}," ⚠️ El número mínimo no puede ser mayor al máximo ",-1)])])),u.value?(r(),x("div",Ja,[o("p",et,[t[19]||(t[19]=o("strong",null,"Resumen:",-1)),n(" Entre "+_(d.value.minItems)+" y "+_(d.value.maxItems)+" "+_((c=d.value.itemName)==null?void 0:c.toLowerCase())+"s. ",1),d.value.fields&&d.value.fields.length>0?(r(),x("span",lt,[t[18]||(t[18]=o("br",null,null,-1)),n(" "+_(d.value.fields.length)+" subcampo"+_(d.value.fields.length===1?"":"s")+" configurado"+_(d.value.fields.length===1?"":"s")+". ",1)])):V("",!0)])])):V("",!0)])])}}}),tt=Q(at,[["__scopeId","data-v-72c1c85d"]]),ot={class:"flex items-center space-x-2"},st={key:0,class:"space-y-4"},dt={key:0,class:"p-4 bg-amber-100 dark:bg-amber-950/50 border border-amber-300 dark:border-amber-700 rounded-lg"},it={class:"flex items-start gap-2"},nt={class:"space-y-3"},rt={key:0},ut={key:1,class:"text-xs text-muted-foreground mt-1"},mt={class:"flex justify-end"},ct={key:0,class:"mt-4"},pt={class:"flex items-center justify-between mb-2"},ft={key:0,class:"p-3 bg-gray-100 dark:bg-gray-800/50 rounded-lg"},vt={class:"text-sm font-medium text-gray-900 dark:text-gray-100 mt-1"},bt=W({__name:"ConditionalFieldConfig",props:{modelValue:{default:()=>({enabled:!1,showWhen:"all",conditions:[]})},fields:{},currentFieldId:{}},emits:["update:modelValue"],setup(E,{emit:B}){const C=E,y=B,d=U({get(){var D,p,m;return{enabled:((D=C.modelValue)==null?void 0:D.enabled)||!1,showWhen:((p=C.modelValue)==null?void 0:p.showWhen)||"all",conditions:((m=C.modelValue)==null?void 0:m.conditions)||[]}},set(D){y("update:modelValue",D)}}),i=D=>{d.value={...d.value,...D}},u=U(()=>C.fields.filter(D=>D.id===C.currentFieldId?!1:["select","radio","checkbox"].includes(D.type))),e=[{value:"equals",label:"Es igual a"},{value:"not_equals",label:"No es igual a"},{value:"contains",label:"Contiene"},{value:"not_contains",label:"No contiene"},{value:"is_empty",label:"Está vacío"},{value:"is_not_empty",label:"No está vacío"}],t=()=>{const D={fieldId:"",operator:"equals",value:""},p=[...d.value.conditions,D];i({conditions:p})},c=D=>{const p=d.value.conditions.filter((m,T)=>T!==D);i({conditions:p})},f=D=>{const p=C.fields.find(m=>m.id===D);return p?p.options||[]:[]},F=D=>{const p=C.fields.find(m=>m.id===D);return(p==null?void 0:p.title)||D},k=D=>!["is_empty","is_not_empty"].includes(D),S=(D,p)=>{const m=[...d.value.conditions];m[D]={...m[D],value:p},i({conditions:m})},v=(D,p)=>{const m=[...d.value.conditions];m[D]={...m[D],fieldId:p,value:""},i({conditions:m})},b=(D,p)=>{const m=[...d.value.conditions];m[D]={...m[D],operator:p,value:k(p)?m[D].value:void 0},i({conditions:m})},w=U(()=>{if(!d.value.enabled||d.value.conditions.length===0)return"Sin condiciones configuradas";const D=d.value.showWhen==="all"?" Y ":" O ";return d.value.conditions.map(m=>{var I;const T=F(m.fieldId),g=((I=e.find(X=>X.value===m.operator))==null?void 0:I.label)||m.operator;if(!k(m.operator))return`"${T}" ${g}`;const h=Array.isArray(m.value)?m.value.join(", "):m.value||"[valor]";return`"${T}" ${g} "${h}"`}).join(D)}),P=O(!1);return(D,p)=>(r(),A(l(J),{class:"border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-950/50"},{default:s(()=>[a(l(oe),null,{default:s(()=>[a(l(se),{class:"text-orange-900 dark:text-orange-100 flex items-center justify-between"},{default:s(()=>[p[3]||(p[3]=o("span",null,"Configuración Condicional",-1)),d.value.enabled?(r(),A(l(H),{key:0,variant:"secondary",class:"bg-orange-100 dark:bg-orange-900/50"},{default:s(()=>[n(_(d.value.conditions.length)+" condicion"+_(d.value.conditions.length!==1?"es":""),1)]),_:1})):V("",!0)]),_:1}),a(l(ye),{class:"text-orange-700 dark:text-orange-300"},{default:s(()=>[...p[4]||(p[4]=[n(" Define cuándo debe mostrarse este campo basándose en valores de otros campos ",-1)])]),_:1})]),_:1}),a(l(ee),{class:"space-y-4"},{default:s(()=>[o("div",ot,[a(l(K),{id:"enable_conditions",checked:d.value.enabled,"onUpdate:checked":p[0]||(p[0]=m=>i({enabled:m}))},null,8,["checked"]),a(l($),{for:"enable_conditions",class:"text-sm font-medium"},{default:s(()=>[...p[5]||(p[5]=[n(" Hacer este campo condicional ",-1),o("span",{class:"text-muted-foreground block text-xs"}," El campo solo se mostrará cuando se cumplan las condiciones definidas ",-1)])]),_:1})]),d.value.enabled?(r(),x("div",st,[u.value.length===0?(r(),x("div",dt,[o("div",it,[a(l(_e),{class:"h-5 w-5 text-amber-600 mt-0.5"}),p[6]||(p[6]=o("div",{class:"text-sm text-amber-800 dark:text-amber-200"},[o("p",{class:"font-medium"},"No hay campos disponibles para condiciones"),o("p",{class:"mt-1"},'Agrega campos de tipo "Lista desplegable", "Opción múltiple" o "Casillas de verificación" antes de configurar condiciones.')],-1))])])):(r(),x(N,{key:1},[o("div",null,[a(l($),null,{default:s(()=>[...p[7]||(p[7]=[n("Mostrar este campo cuando:",-1)])]),_:1}),a(l(z),{"model-value":d.value.showWhen,"onUpdate:modelValue":p[1]||(p[1]=m=>i({showWhen:m}))},{default:s(()=>[a(l(R),{class:"w-full"},{default:s(()=>[a(l(L))]),_:1}),a(l(G),null,{default:s(()=>[a(l(j),{value:"all"},{default:s(()=>[...p[8]||(p[8]=[n(" Se cumplan TODAS las condiciones (AND) ",-1)])]),_:1}),a(l(j),{value:"any"},{default:s(()=>[...p[9]||(p[9]=[n(" Se cumpla ALGUNA condición (OR) ",-1)])]),_:1})]),_:1})]),_:1},8,["model-value"])]),o("div",nt,[(r(!0),x(N,null,Y(d.value.conditions,(m,T)=>(r(),x("div",{key:T,class:"p-3 bg-white dark:bg-gray-800/50 border dark:border-gray-700 rounded-lg space-y-3"},[o("div",null,[a(l($),{class:"text-xs"},{default:s(()=>[...p[10]||(p[10]=[n("Campo a evaluar",-1)])]),_:1}),a(l(z),{"model-value":m.fieldId,"onUpdate:modelValue":g=>v(T,g)},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona un campo"})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(u.value,g=>(r(),A(l(j),{key:g.id,value:g.id},{default:s(()=>[n(_(g.title)+" ",1),a(l(H),{variant:"outline",class:"ml-2 text-xs"},{default:s(()=>[n(_(g.type),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"])]),o("div",null,[a(l($),{class:"text-xs"},{default:s(()=>[...p[11]||(p[11]=[n("Operador",-1)])]),_:1}),a(l(z),{"model-value":m.operator,"onUpdate:modelValue":g=>b(T,g)},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L))]),_:1}),a(l(G),null,{default:s(()=>[(r(),x(N,null,Y(e,g=>a(l(j),{key:g.value,value:g.value},{default:s(()=>[n(_(g.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"])]),k(m.operator)&&m.fieldId?(r(),x("div",rt,[a(l($),{class:"text-xs"},{default:s(()=>[...p[12]||(p[12]=[n("Valor",-1)])]),_:1}),f(m.fieldId).length>0?(r(),A(l(z),{key:0,"model-value":m.value,"onUpdate:modelValue":g=>S(T,g)},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona un valor"})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(f(m.fieldId),g=>(r(),A(l(j),{key:g,value:g},{default:s(()=>[n(_(g),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue"])):(r(),x("p",ut," El campo seleccionado no tiene opciones definidas "))])):V("",!0),o("div",mt,[a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:g=>c(T),class:"text-destructive"},{default:s(()=>[a(l(de),{class:"h-4 w-4 mr-1"}),p[13]||(p[13]=n(" Eliminar condición ",-1))]),_:2},1032,["onClick"])])]))),128)),a(l(M),{type:"button",variant:"outline",size:"sm",onClick:t,class:"w-full"},{default:s(()=>[a(l(Z),{class:"h-4 w-4 mr-2"}),p[14]||(p[14]=n(" Agregar condición ",-1))]),_:1})]),d.value.conditions.length>0?(r(),x("div",ct,[o("div",pt,[a(l($),{class:"text-xs"},{default:s(()=>[...p[15]||(p[15]=[n("Vista previa de la regla:",-1)])]),_:1}),a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:p[2]||(p[2]=m=>P.value=!P.value)},{default:s(()=>[(r(),A(re(P.value?l(we):l(ce)),{class:"h-4 w-4 mr-1"})),n(" "+_(P.value?"Ocultar":"Mostrar"),1)]),_:1})]),P.value?(r(),x("div",ft,[p[16]||(p[16]=o("p",{class:"text-sm text-gray-700 dark:text-gray-300"}," Este campo se mostrará cuando: ",-1)),o("p",vt,_(w.value),1)])):V("",!0)])):V("",!0)],64))])):V("",!0)]),_:1})]),_:1}))}}),ie=[{value:"text",label:"Texto corto"},{value:"textarea",label:"Texto largo"},{value:"number",label:"Campo numérico"},{value:"email",label:"Correo electrónico"},{value:"date",label:"Fecha (HTML5)"},{value:"select",label:"Lista desplegable"},{value:"radio",label:"Opción múltiple"},{value:"checkbox",label:"Casillas de verificación"},{value:"file",label:"Archivo"},{value:"datepicker",label:"Selector de fecha"},{value:"disclaimer",label:"Aceptar disclaimer"},{value:"repeater",label:"Repetidor"},{value:"perfil_candidatura",label:"Perfil de Candidatura"},{value:"convocatoria",label:"Elegir Convocatoria"}],yo=[{value:"America/Bogota",label:"Colombia (GMT-5) - America/Bogota"},{value:"America/Mexico_City",label:"México (GMT-6) - America/Mexico_City"},{value:"America/Buenos_Aires",label:"Argentina (GMT-3) - America/Buenos_Aires"},{value:"America/Sao_Paulo",label:"Brasil (GMT-3) - America/Sao_Paulo"},{value:"America/Santiago",label:"Chile (GMT-3) - America/Santiago"},{value:"America/Lima",label:"Perú (GMT-5) - America/Lima"},{value:"America/Caracas",label:"Venezuela (GMT-4) - America/Caracas"},{value:"America/La_Paz",label:"Bolivia (GMT-4) - America/La_Paz"},{value:"America/Quito",label:"Ecuador (GMT-5) - America/Quito"},{value:"America/Panama",label:"Panamá (GMT-5) - America/Panama"},{value:"America/Costa_Rica",label:"Costa Rica (GMT-6) - America/Costa_Rica"},{value:"America/Guatemala",label:"Guatemala (GMT-6) - America/Guatemala"},{value:"America/Montevideo",label:"Uruguay (GMT-3) - America/Montevideo"},{value:"America/Asuncion",label:"Paraguay (GMT-3) - America/Asuncion"}];function gt(){const E=y=>{var i,u;const d=[];if((i=y.title)!=null&&i.trim()||d.push({field:"title",message:"El título del campo es requerido"}),["select","radio","checkbox"].includes(y.type||"")&&(!y.options||y.options.length===0?d.push({field:"options",message:"Los campos de selección deben tener al menos una opción"}):y.options.filter((t,c)=>!t.trim()).length>0&&d.push({field:"options",message:"Todas las opciones deben tener texto"})),y.type==="perfil_candidatura"&&y.perfilCandidaturaConfig){const e=y.perfilCandidaturaConfig;!e.cargo_id&&!e.periodo_electoral_id&&d.push({field:"perfilCandidaturaConfig",message:"Debe seleccionar al menos un cargo o período electoral"})}if(y.type==="convocatoria"&&y.convocatoriaConfig&&(y.convocatoriaConfig.convocatoria_id||d.push({field:"convocatoriaConfig",message:"Debe seleccionar una convocatoria"})),y.type==="file"&&y.fileConfig){const e=y.fileConfig;e.maxFileSize&&(e.maxFileSize<1||e.maxFileSize>100)&&d.push({field:"fileConfig",message:"El tamaño máximo debe estar entre 1 y 100 MB"}),e.maxFiles&&(e.maxFiles<1||e.maxFiles>20)&&d.push({field:"fileConfig",message:"El número máximo de archivos debe estar entre 1 y 20"})}if(y.type==="disclaimer"&&y.disclaimerConfig&&((u=y.disclaimerConfig.disclaimerText)!=null&&u.trim()||d.push({field:"disclaimerConfig",message:"El texto del disclaimer es requerido"})),y.type==="number"&&y.numberConfig){const e=y.numberConfig;e.min!==void 0&&e.max!==void 0&&e.min>e.max&&d.push({field:"numberConfig",message:"El valor mínimo no puede ser mayor al máximo"}),e.decimals!==void 0&&(e.decimals<0||e.decimals>10)&&d.push({field:"numberConfig",message:"Los decimales deben estar entre 0 y 10"})}if(y.type==="repeater"&&y.repeaterConfig){const e=y.repeaterConfig;e.minItems!==void 0&&e.maxItems!==void 0&&e.minItems>e.maxItems&&d.push({field:"repeaterConfig",message:"El mínimo de elementos no puede ser mayor al máximo"})}return d};return{validateField:E,isFieldValid:y=>E(y).length===0,getFirstError:y=>{const d=E(y);return d.length>0?d[0].message:null}}}const xt={class:"flex items-center justify-between"},yt={class:"flex items-center gap-2"},_t={class:"flex items-center space-x-2 mt-2"},Ct={key:0,class:"flex items-center space-x-2 mt-2"},kt={class:"flex items-center gap-2 pt-4"},$t=W({__name:"FieldForm",props:{mode:{},field:{},disabled:{type:Boolean,default:!1},showEditableOption:{type:Boolean,default:!1},showPerfilCandidaturaConfig:{type:Boolean,default:!1},showConvocatoriaConfig:{type:Boolean,default:!1},cargos:{default:()=>[]},periodosElectorales:{default:()=>[]},convocatorias:{default:()=>[]},context:{default:"convocatoria"},availableFields:{default:()=>[]}},emits:["save","cancel"],setup(E,{emit:B}){const C=E,y=B,{isFieldValid:d,getFirstError:i}=gt(),u=()=>({id:`field_${Date.now()}`,type:"text",title:"",description:"",required:!1,options:[],editable:!1,conditionalConfig:{enabled:!1,showWhen:"all",conditions:[]},convocatoriaConfig:{convocatoria_id:void 0,multiple:!1,mostrarVotoBlanco:!0,ordenCandidatos:"aleatorio",vistaPreferida:"lista"},perfilCandidaturaConfig:{cargo_id:void 0,periodo_electoral_id:void 0,territorio_id:void 0,departamento_id:void 0,municipio_id:void 0,localidad_id:void 0,territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[],multiple:!1,mostrarVotoBlanco:!0},fileConfig:{multiple:!1,maxFiles:5,maxFileSize:10,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"},datepickerConfig:{minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0},disclaimerConfig:{disclaimerText:"",modalTitle:"Términos y Condiciones",acceptButtonText:"Acepto",declineButtonText:"No acepto"},repeaterConfig:{minItems:0,maxItems:10,itemName:"Elemento",addButtonText:"Agregar elemento",removeButtonText:"Eliminar",fields:[]},numberConfig:{min:void 0,max:void 0,step:1,decimals:0}}),e=ge(C.mode==="edit"&&C.field?{...C.field}:u()),t=U(()=>C.mode==="create"?"Añadir Nuevo Campo":"Editar Campo"),c=U(()=>C.mode==="create"?"Añadir Campo":"Guardar Cambios"),f=()=>{e.options||(e.options=[]),e.options.push("")},F=v=>{var b;(b=e.options)==null||b.splice(v,1)},k=v=>{if(v&&(v.preventDefault(),v.stopPropagation()),console.log("FieldForm handleSave called with:",e),!d(e)){const b=i(e);console.error("Validation error:",b),alert(`Error de validación: ${b}`);return}y("save",{...e})},S=v=>{v&&(v.preventDefault(),v.stopPropagation()),console.log("FieldForm handleCancel called"),y("cancel")};return(v,b)=>(r(),A(l(J),{class:"mb-4","data-form-type":v.mode==="create"?"new-field":"edit-field"},{default:s(()=>[a(l(oe),{class:"pb-3"},{default:s(()=>[o("div",xt,[a(l(se),{class:"text-lg"},{default:s(()=>[n(_(t.value),1)]),_:1}),a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:b[0]||(b[0]=w=>S(w)),class:"h-8 w-8 p-0"},{default:s(()=>[a(l(Ce),{class:"h-4 w-4"})]),_:1})])]),_:1}),a(l(ee),{class:"space-y-4"},{default:s(()=>[o("div",null,[a(l($),null,{default:s(()=>[...b[17]||(b[17]=[n("Tipo de Campo *",-1)])]),_:1}),a(l(z),{modelValue:e.type,"onUpdate:modelValue":b[1]||(b[1]=w=>e.type=w),disabled:v.disabled},{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(L),{placeholder:"Selecciona el tipo de campo"})]),_:1}),a(l(G),null,{default:s(()=>[(r(!0),x(N,null,Y(l(ie),w=>(r(),A(l(j),{key:w.value,value:w.value},{default:s(()=>[o("div",yt,[(r(),A(re(w.icon),{class:"h-4 w-4"})),o("span",null,_(w.label),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),o("div",_t,[a(l(K),{id:"field_required",checked:e.required,"onUpdate:checked":b[2]||(b[2]=w=>e.required=w),disabled:v.disabled},null,8,["checked","disabled"]),a(l($),{for:"field_required",class:"text-sm"},{default:s(()=>[...b[18]||(b[18]=[n("Campo requerido",-1)])]),_:1})]),v.showEditableOption?(r(),x("div",Ct,[a(l(K),{id:"field_editable",checked:e.editable,"onUpdate:checked":b[3]||(b[3]=w=>e.editable=w),disabled:v.disabled},null,8,["checked","disabled"]),a(l($),{class:"text-sm"},{default:s(()=>[...b[19]||(b[19]=[n(" Campo editable en candidaturas aprobadas ",-1),o("span",{class:"text-muted-foreground block text-xs"}," Los usuarios podrán editar este campo incluso con candidatura aprobada ",-1)])]),_:1})])):V("",!0)]),o("div",null,[a(l($),null,{default:s(()=>[...b[20]||(b[20]=[n("Título del Campo *",-1)])]),_:1}),a(l(q),{modelValue:e.title,"onUpdate:modelValue":b[4]||(b[4]=w=>e.title=w),placeholder:"Ej: ¿Cuál es tu candidato preferido?",disabled:v.disabled},null,8,["modelValue","disabled"])]),o("div",null,[a(l($),null,{default:s(()=>[...b[21]||(b[21]=[n("Descripción (opcional)",-1)])]),_:1}),a(l(ne),{modelValue:e.description,"onUpdate:modelValue":b[5]||(b[5]=w=>e.description=w),placeholder:"Descripción adicional del campo",rows:"2",disabled:v.disabled},null,8,["modelValue","disabled"])]),["select","radio","checkbox"].includes(e.type)?(r(),A(Be,{key:0,modelValue:e.options,"onUpdate:modelValue":b[6]||(b[6]=w=>e.options=w),disabled:v.disabled,onAddOption:f,onRemoveOption:F},null,8,["modelValue","disabled"])):V("",!0),e.type==="file"?(r(),A(ze,{key:1,modelValue:e.fileConfig,"onUpdate:modelValue":b[7]||(b[7]=w=>e.fileConfig=w),disabled:v.disabled},null,8,["modelValue","disabled"])):V("",!0),e.type==="number"?(r(),A(pl,{key:2,modelValue:e.numberConfig,"onUpdate:modelValue":b[8]||(b[8]=w=>e.numberConfig=w),disabled:v.disabled},null,8,["modelValue","disabled"])):V("",!0),e.type==="datepicker"?(r(),A(tl,{key:3,modelValue:e.datepickerConfig,"onUpdate:modelValue":b[9]||(b[9]=w=>e.datepickerConfig=w),disabled:v.disabled},null,8,["modelValue","disabled"])):V("",!0),e.type==="disclaimer"?(r(),A(hl,{key:4,modelValue:e.disclaimerConfig,"onUpdate:modelValue":b[10]||(b[10]=w=>e.disclaimerConfig=w),disabled:v.disabled},null,8,["modelValue","disabled"])):V("",!0),e.type==="repeater"?(r(),A(tt,{key:5,modelValue:e.repeaterConfig,"onUpdate:modelValue":b[11]||(b[11]=w=>e.repeaterConfig=w),disabled:v.disabled},null,8,["modelValue","disabled"])):V("",!0),e.type==="convocatoria"&&v.showConvocatoriaConfig&&e.convocatoriaConfig?(r(),A(Gl,{key:6,modelValue:e.convocatoriaConfig,"onUpdate:modelValue":b[12]||(b[12]=w=>e.convocatoriaConfig=w),convocatorias:v.convocatorias,disabled:v.disabled},null,8,["modelValue","convocatorias","disabled"])):V("",!0),e.type==="perfil_candidatura"?(r(),A(ha,{key:7,modelValue:e.perfilCandidaturaConfig,"onUpdate:modelValue":b[13]||(b[13]=w=>e.perfilCandidaturaConfig=w),cargos:v.cargos,"periodos-electorales":v.periodosElectorales,context:v.context,disabled:v.disabled},null,8,["modelValue","cargos","periodos-electorales","context","disabled"])):V("",!0),e.conditionalConfig?(r(),A(bt,{key:8,modelValue:e.conditionalConfig,"onUpdate:modelValue":b[14]||(b[14]=w=>e.conditionalConfig=w),fields:v.availableFields,disabled:v.disabled},null,8,["modelValue","fields","disabled"])):V("",!0),o("div",kt,[a(l(M),{type:"button",onClick:b[15]||(b[15]=w=>k(w)),disabled:v.disabled},{default:s(()=>[n(_(c.value),1)]),_:1},8,["disabled"]),a(l(M),{type:"button",variant:"outline",onClick:b[16]||(b[16]=w=>S(w))},{default:s(()=>[...b[22]||(b[22]=[n(" Cancelar ",-1)])]),_:1})])]),_:1})]),_:1},8,["data-form-type"]))}}),Vt=Q($t,[["__scopeId","data-v-81d869f8"]]),wt={class:"flex items-start justify-between gap-3"},Ft={class:"flex-1 min-w-0"},ht={class:"flex items-start gap-2 mb-2"},Dt={class:"flex-1 min-w-0"},Tt={class:"flex items-center gap-2 mb-1"},St={class:"text-sm font-medium truncate"},At={key:0,class:"text-xs text-muted-foreground mb-2 line-clamp-2"},Et={key:1,class:"text-xs text-muted-foreground"},Bt={class:"flex items-center gap-1 mt-2"},Ut={class:"flex items-center gap-1"},Pt=W({__name:"FieldPreview",props:{field:{},index:{},disabled:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},canDuplicate:{type:Boolean,default:!0}},emits:["edit","delete","duplicate","preview"],setup(E,{emit:B}){const C=E,y=B,d=U(()=>ie.find(e=>e.value===C.field.type)||ie[0]),i=U(()=>{var c,f,F,k,S;const e=C.field,t=[];switch(e.required&&t.push("Requerido"),e.editable&&t.push("Editable"),e.type){case"select":case"radio":case"checkbox":(c=e.options)!=null&&c.length&&t.push(`${e.options.length} opciones`);break;case"file":if(e.fileConfig){const v=e.fileConfig;v.multiple?t.push(`Hasta ${v.maxFiles} archivos`):t.push("Un archivo"),t.push(`Máx ${v.maxFileSize}MB`)}break;case"number":if(e.numberConfig){const v=e.numberConfig;(v.min!==void 0||v.max!==void 0)&&t.push(`Rango: ${v.min??"..."} - ${v.max??"..."}`),v.decimals>0&&t.push(`${v.decimals} decimales`)}break;case"datepicker":if(e.datepickerConfig){const v=e.datepickerConfig;t.push(`Formato: ${v.format}`),!v.allowPastDates&&v.allowFutureDates?t.push("Solo futuras"):v.allowPastDates&&!v.allowFutureDates&&t.push("Solo pasadas")}break;case"convocatoria":if(e.convocatoriaConfig){const v=e.convocatoriaConfig;v.multiple&&t.push("Voto múltiple"),v.mostrarVotoBlanco&&t.push("Con voto blanco")}break;case"perfil_candidatura":if(e.perfilCandidaturaConfig){const v=e.perfilCandidaturaConfig;v.multiple&&t.push("Selección múltiple"),v.mostrarVotoBlanco&&t.push("Con voto blanco")}break;case"repeater":if(e.repeaterConfig){const v=e.repeaterConfig;t.push(`${v.minItems}-${v.maxItems} elementos`),(f=v.fields)!=null&&f.length&&t.push(`${v.fields.length} subcampos`)}break;case"disclaimer":if((F=e.disclaimerConfig)!=null&&F.disclaimerText){const v=e.disclaimerConfig.disclaimerText.length;t.push(`${v} caracteres`)}break}return(k=e.conditionalConfig)!=null&&k.enabled&&((S=e.conditionalConfig.conditions)==null?void 0:S.length)>0&&t.push(`${e.conditionalConfig.conditions.length} condiciones`),t.join(" • ")}),u=U(()=>({text:"default",textarea:"default",select:"secondary",radio:"secondary",checkbox:"secondary",file:"outline",datepicker:"outline",number:"outline",disclaimer:"destructive",repeater:"default",convocatoria:"default",perfil_candidatura:"default"})[C.field.type]||"default");return(e,t)=>(r(),A(l(J),{class:"group hover:shadow-md transition-shadow duration-200",id:`field-preview-${e.index}`},{default:s(()=>[a(l(ee),{class:"p-4"},{default:s(()=>{var c;return[o("div",wt,[o("div",Ft,[o("div",ht,[(r(),A(re(d.value.icon),{class:"h-4 w-4 mt-1 text-muted-foreground flex-shrink-0"})),o("div",Dt,[o("div",Tt,[o("h4",St,_(e.field.title||"Campo sin título"),1),a(l(H),{variant:u.value,class:"text-xs"},{default:s(()=>[n(_(d.value.label),1)]),_:1},8,["variant"])]),e.field.description?(r(),x("p",At,_(e.field.description),1)):V("",!0),i.value?(r(),x("p",Et,_(i.value),1)):V("",!0)])]),o("div",Bt,[(c=e.field.conditionalConfig)!=null&&c.enabled?(r(),A(l(H),{key:0,variant:"outline",class:"text-xs"},{default:s(()=>[a(l(ke),{class:"mr-1 h-3 w-3"}),t[4]||(t[4]=n(" Condicional ",-1))]),_:1})):V("",!0)])]),o("div",Ut,[a(l(M),{type:"button",variant:"ghost",size:"sm",onClick:t[0]||(t[0]=f=>y("preview",e.field)),disabled:e.disabled,class:"h-8 w-8 p-0",title:"Previsualizar campo"},{default:s(()=>[a(l(ce),{class:"h-3 w-3"})]),_:1},8,["disabled"]),e.canEdit?(r(),A(l(M),{key:0,type:"button",variant:"ghost",size:"sm",onClick:t[1]||(t[1]=f=>y("edit",e.index)),disabled:e.disabled,class:"h-8 w-8 p-0",title:"Editar campo"},{default:s(()=>[a(l($e),{class:"h-3 w-3"})]),_:1},8,["disabled"])):V("",!0),e.canDuplicate?(r(),A(l(M),{key:1,type:"button",variant:"ghost",size:"sm",onClick:t[2]||(t[2]=f=>y("duplicate",e.field)),disabled:e.disabled,class:"h-8 w-8 p-0",title:"Duplicar campo"},{default:s(()=>[a(l(Ve),{class:"h-3 w-3"})]),_:1},8,["disabled"])):V("",!0),e.canDelete?(r(),A(l(M),{key:2,type:"button",variant:"ghost",size:"sm",onClick:t[3]||(t[3]=f=>y("delete",e.index)),disabled:e.disabled,class:"h-8 w-8 p-0 text-destructive hover:text-destructive",title:"Eliminar campo"},{default:s(()=>[a(l(de),{class:"h-3 w-3"})]),_:1},8,["disabled"])):V("",!0)])])]}),_:1})]),_:1},8,["id"]))}}),Mt=Q(Pt,[["__scopeId","data-v-1dacbda7"]]),It={class:"space-y-4"},qt={class:"flex items-center justify-between"},Nt={class:"text-sm text-muted-foreground"},jt={class:"flex items-center gap-4 mt-3"},Yt={class:"space-y-3"},Ot={key:0,class:"text-center py-12"},zt={class:"mx-auto w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mb-4"},Rt={key:0,class:"flex items-center justify-between pt-4 border-t"},Lt={class:"text-sm text-muted-foreground"},Gt={class:"flex items-center gap-2"},Wt=W({__name:"FieldList",props:{fields:{},disabled:{type:Boolean,default:!1},canAddFields:{type:Boolean,default:!0},canEditFields:{type:Boolean,default:!0},canDeleteFields:{type:Boolean,default:!0},title:{default:"Campos del Formulario"},description:{default:"Gestiona los campos que aparecerán en el formulario"}},emits:["add-field","edit-field","delete-field","duplicate-field","preview-field"],setup(E,{emit:B}){const C=E,y=B,d=U(()=>{const e=C.fields.length,t=C.fields.filter(f=>f.required).length,c=C.fields.filter(f=>{var F;return(F=f.conditionalConfig)==null?void 0:F.enabled}).length;return{total:e,required:t,conditional:c,optional:e-t}}),i=e=>{y("duplicate-field",e)},u=e=>{y("delete-field",e)};return(e,t)=>(r(),x("div",It,[a(l(J),null,{default:s(()=>[a(l(oe),null,{default:s(()=>[o("div",qt,[o("div",null,[a(l(se),{class:"text-lg"},{default:s(()=>[n(_(e.title),1)]),_:1}),o("p",Nt,_(e.description),1)]),e.canAddFields?(r(),A(l(M),{key:0,type:"button",onClick:t[0]||(t[0]=c=>y("add-field")),disabled:e.disabled,class:"gap-2"},{default:s(()=>[a(l(Z),{class:"h-4 w-4"}),t[4]||(t[4]=n(" Añadir Campo ",-1))]),_:1},8,["disabled"])):V("",!0)]),o("div",jt,[a(l(H),{variant:"outline"},{default:s(()=>[n(" Total: "+_(d.value.total),1)]),_:1}),d.value.required>0?(r(),A(l(H),{key:0,variant:"default"},{default:s(()=>[n(" Requeridos: "+_(d.value.required),1)]),_:1})):V("",!0),d.value.conditional>0?(r(),A(l(H),{key:1,variant:"secondary"},{default:s(()=>[n(" Condicionales: "+_(d.value.conditional),1)]),_:1})):V("",!0)])]),_:1})]),_:1}),o("div",Yt,[e.fields.length===0?(r(),x("div",Ot,[o("div",zt,[a(l(Z),{class:"h-8 w-8 text-muted-foreground"})]),t[6]||(t[6]=o("h3",{class:"text-lg font-medium text-muted-foreground mb-2"}," No hay campos agregados ",-1)),t[7]||(t[7]=o("p",{class:"text-sm text-muted-foreground mb-4"}," Comienza agregando el primer campo a tu formulario ",-1)),e.canAddFields?(r(),A(l(M),{key:0,type:"button",onClick:t[1]||(t[1]=c=>y("add-field")),disabled:e.disabled},{default:s(()=>[a(l(Z),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=n(" Añadir Primer Campo ",-1))]),_:1},8,["disabled"])):V("",!0)])):V("",!0),(r(!0),x(N,null,Y(e.fields,(c,f)=>(r(),x("div",{key:c.id,class:"relative"},[a(Mt,{field:c,index:f,disabled:e.disabled,"can-edit":e.canEditFields,"can-delete":e.canDeleteFields,"can-duplicate":e.canAddFields,onEdit:F=>y("edit-field",f),onDelete:u,onDuplicate:i,onPreview:t[2]||(t[2]=F=>y("preview-field",F))},null,8,["field","index","disabled","can-edit","can-delete","can-duplicate","onEdit"])]))),128))]),e.fields.length>0?(r(),x("div",Rt,[o("div",Lt,_(d.value.total)+" campo"+_(d.value.total===1?"":"s")+" en total ",1),o("div",Gt,[e.canAddFields?(r(),A(l(M),{key:0,type:"button",variant:"outline",size:"sm",onClick:t[3]||(t[3]=c=>y("add-field")),disabled:e.disabled},{default:s(()=>[a(l(Z),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=n(" Añadir Campo ",-1))]),_:1},8,["disabled"])):V("",!0)])])):V("",!0)]))}}),Ht=Q(Wt,[["__scopeId","data-v-3b2237ae"]]),Qt={class:"space-y-6"},Kt=W({__name:"DynamicFormBuilder",props:{modelValue:{},disabled:{type:Boolean,default:!1},title:{default:"Constructor de Formulario"},description:{default:"Agrega los campos que aparecerán en el formulario"},showEditableOption:{type:Boolean,default:!1},showPerfilCandidaturaConfig:{type:Boolean,default:!1},cargos:{default:()=>[]},periodosElectorales:{default:()=>[]},showConvocatoriaConfig:{type:Boolean,default:!1},convocatorias:{default:()=>[]},context:{default:"convocatoria"}},emits:["update:modelValue"],setup(E,{expose:B,emit:C}){const y=E,d=C,i=O([...y.modelValue]),u=O(!1),e=O(null),t=O("create"),c=O(void 0),f=g=>{i.value.splice(g,1),S()},F=()=>i.value.length>0,k=O(!1);ae(()=>y.modelValue,g=>{k.value||(k.value=!0,i.value=[...g],te(()=>{k.value=!1}))},{immediate:!0});const S=()=>{k.value||d("update:modelValue",[...i.value])},v=g=>{g&&(g.preventDefault(),g.stopPropagation()),console.log("handleAddField called"),t.value="create",c.value=void 0,e.value=null,u.value=!0,T(!0)},b=(g,h)=>{h&&(h.preventDefault(),h.stopPropagation()),console.log("handleEditField called with index:",g);const I=i.value[g];I&&(c.value={...I},t.value="edit",e.value=g,u.value=!0,T(!1,g))},w=async(g,h)=>{h&&(h.preventDefault(),h.stopPropagation());const I=i.value[g];if(!I)return;confirm(`¿Estás seguro de eliminar el campo "${I.title||"Sin título"}"?

Esta acción no se puede deshacer.`)&&(f(g),console.log("Field deleted:",I.title),e.value===g?m():e.value!==null&&e.value>g&&(e.value=e.value-1))},P=(g,h)=>{h&&(h.preventDefault(),h.stopPropagation());const I={...g,id:`field_${Date.now()}`,title:`${g.title} (Copia)`};console.log("Duplicating field:",{original:g.title,duplicate:I.title}),i.value.push(I),S()},D=(g,h)=>{var ue;h&&(h.preventDefault(),h.stopPropagation());const I={text:"Campo de texto",textarea:"Área de texto",select:"Lista desplegable",radio:"Opción múltiple",checkbox:"Casillas de verificación",file:"Subida de archivo",datepicker:"Selector de fecha",number:"Campo numérico",disclaimer:"Términos y condiciones",repeater:"Campo repetible",convocatoria:"Selector de convocatoria",perfil_candidatura:"Perfil de candidatura"};let X=`📋 VISTA PREVIA DEL CAMPO

`;X+=`Título: ${g.title||"Sin título"}
`,X+=`Tipo: ${I[g.type]||g.type}
`,X+=`Requerido: ${g.required?"Sí":"No"}
`,g.description&&(X+=`Descripción: ${g.description}
`),g.options&&g.options.length>0&&(X+=`Opciones: ${g.options.join(", ")}
`),(ue=g.conditionalConfig)!=null&&ue.enabled&&(X+=`Campo condicional: Sí (${g.conditionalConfig.conditions.length} condiciones)
`),alert(X)},p=g=>{console.log("Saving field:",{mode:t.value,field:g,editingIndex:e.value}),t.value==="edit"&&e.value!==null?(i.value[e.value]={...g},console.log("Field edited successfully")):(i.value.push({...g}),console.log("Field added successfully")),S(),m()},m=g=>{g&&(g.preventDefault(),g.stopPropagation()),console.log("handleCancelForm called"),u.value=!1,e.value=null,c.value=void 0,t.value="create"},T=async(g=!1,h)=>{try{await te(),setTimeout(()=>{let I=null;g?I=document.querySelector('[data-form-type="new-field"]'):h!==void 0&&(I=document.querySelector('[data-form-type="edit-field"]')),I&&typeof I.scrollIntoView=="function"&&I.scrollIntoView({behavior:"smooth",block:"center"})},150)}catch(I){console.warn("Error en auto-scroll:",I)}};return B({canSave:F,fields:i}),(g,h)=>(r(),x("div",Qt,[u.value?(r(),A(Vt,{key:0,mode:t.value,field:c.value,disabled:g.disabled,"show-editable-option":g.showEditableOption,"show-perfil-candidatura-config":g.showPerfilCandidaturaConfig,"show-convocatoria-config":g.showConvocatoriaConfig,cargos:g.cargos,"periodos-electorales":g.periodosElectorales,convocatorias:g.convocatorias,context:g.context,"available-fields":i.value,onSave:p,onCancel:m},null,8,["mode","field","disabled","show-editable-option","show-perfil-candidatura-config","show-convocatoria-config","cargos","periodos-electorales","convocatorias","context","available-fields"])):V("",!0),a(Ht,{fields:i.value,disabled:g.disabled,"can-add-fields":!g.disabled,"can-edit-fields":!g.disabled,"can-delete-fields":!g.disabled,title:g.title,description:g.description,onAddField:v,onEditField:b,onDeleteField:w,onDuplicateField:P,onPreviewField:D},null,8,["fields","disabled","can-add-fields","can-edit-fields","can-delete-fields","title","description"])]))}}),_o=Q(Kt,[["__scopeId","data-v-43b5c0d0"]]);export{_o as D,yo as L,la as _};
