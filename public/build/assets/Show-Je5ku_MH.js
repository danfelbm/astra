import{d as nt,r as rt,c as F,b as f,w as n,g as o,j as d,e as s,f as e,v as x,h as i,t as l,n as B,m as r,x as it,i as m,y as lt,F as T,k as A,s as O,M as dt}from"./app-B8jLIquf.js";import{B as ct,_ as ut}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Ds5Yb68h.js";import{_ as b,a as h,b as p,c as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-CwvDUtJA.js";import{_ as mt}from"./CardDescription.vue_vue_type_script_setup_true_lang-DQU_0X32.js";import{_ as g}from"./createLucideIcon-CoRxGeMz.js";import{_ as w}from"./index-CI4aGeLr.js";import{_ as ft,a as gt,b as C,c as z}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Cwgl2Cjw.js";import{_ as M,a as U}from"./index-p_mdT28X.js";import{u as vt}from"./useToast-dIdmubGi.js";import{C as xt}from"./circle-x-CAUBJXAE.js";import{C as R}from"./circle-check-big-DL6IK3Z8.js";import{F as G}from"./file-text-BxT36rHH.js";import{A as yt}from"./arrow-left-CZ17viy3.js";import{D as bt}from"./download-Do-dgtjd.js";import{C as ht}from"./copy-Da2qgKTo.js";import{S as pt}from"./square-pen-BQ7Rr2bB.js";import{T as kt}from"./trash-2-DvXkYhPp.js";import{C as H}from"./circle-alert-BEl5DoMm.js";import{C as q}from"./calendar-DjVB9cun.js";import{D as wt}from"./dollar-sign-Y0ZYXPtd.js";import{U as L}from"./user-DXGm6IYr.js";import{M as X}from"./mail-B0-advyj.js";import{P as J}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BQoIb-iH.js";import{H as K}from"./hash-BAjPPCdS.js";import{P as Q}from"./plus-VHk6R-DX.js";import{L as _t}from"./list-C5Xutk-r.js";import{T as Ct}from"./tree-pine-BdFB2Ik7.js";import{C as zt}from"./clock-B42ucROl.js";import{C as $t}from"./chevron-right-40KxJyU6.js";import{E as Dt}from"./external-link-B9xWD9Tf.js";import"./index-DsoRH3_1.js";import"./floating-ui.vue-CDqra15C.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-CcYYl75a.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DUIj5-nr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-yEqYuGKr.js";import"./chevrons-up-down-DATvKK5h.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CtpK6IOL.js";import"./tag-BF3vhfWv.js";import"./users-S8AX2-Wm.js";import"./target-DMpZWzHm.js";import"./shield-BleVYcej.js";import"./vote-BsZDzqyH.js";import"./folder-open-C9XMhm5o.js";import"./send-DArdzb31.js";import"./briefcase-HN0MUFbh.js";import"./megaphone-C3_U7m_D.js";import"./user-check-Z5NneTb1.js";import"./clipboard-list-B5Tcs7Qu.js";import"./message-square-BCI0N4Q4.js";import"./panel-left-D_Nud89_.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D9pbqtVi.js";import"./VisuallyHidden-c5G_Y1-F.js";import"./Input.vue_vue_type_script_setup_true_lang-D1BhiD8f.js";import"./index-gUIEoC_C.js";import"./check-D6Hm08tN.js";import"./index-BnsEjg8Z.js";import"./index-BIFztAr4.js";import"./RovingFocusItem-7klXaaP1.js";import"./utils-rBtsDzTD.js";import"./x-Db305Yr4.js";import"./index-xH6fuIAq.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DoqjFrKn.js";import"./Label.vue_vue_type_script_setup_true_lang-nBWFi7Vu.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cuu9V0m-.js";import"./map-pin-VuOGBv30.js";const St={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Pt={class:"flex items-center justify-between"},Et={class:"flex items-center gap-4"},Vt={class:"text-3xl font-bold"},Ft={class:"flex items-center gap-4 mt-2"},Tt={class:"flex gap-2"},At={class:"flex gap-2"},Ot={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Lt={class:"lg:col-span-2 space-y-6"},jt={key:0},It={class:"mt-1"},Nt={class:"grid grid-cols-2 gap-4"},Bt={class:"mt-1 flex items-center gap-2"},Mt={class:"mt-1 flex items-center gap-2"},Ut={key:1},Rt={class:"flex justify-between text-sm text-gray-600 mb-2"},Gt={class:"w-full bg-gray-200 rounded-full h-3"},Ht={key:2},qt={class:"mt-1 text-gray-700"},Xt={key:0},Jt={class:"mt-1 text-2xl font-bold flex items-center gap-2"},Kt={class:"text-sm text-gray-600"},Qt={key:1},Wt={key:0},Yt={class:"rounded-lg border p-4 bg-blue-50 dark:bg-blue-950/20"},Zt={class:"flex items-start gap-4"},te={class:"flex-1"},ee={class:"flex items-center gap-2 mb-2"},oe={class:"font-semibold text-lg"},ae={class:"space-y-2 text-sm"},se={class:"flex items-center gap-2"},ne=["href"],re={key:0,class:"flex items-center gap-2"},ie=["href"],le={class:"flex items-center gap-2"},de={class:"text-gray-600"},ce={key:1},ue={class:"space-y-4"},me={key:0,class:"flex items-center gap-2"},fe={key:1,class:"flex items-center gap-2"},ge={key:2,class:"flex items-center gap-2"},ve=["href"],xe={key:3,class:"flex items-center gap-2"},ye=["href"],be={key:2},he={class:"space-y-4"},pe={class:"flex items-center gap-3"},ke={class:"font-medium"},we={class:"text-sm text-gray-500"},_e={key:0,class:"text-sm text-gray-600 mt-1"},Ce={class:"space-y-4"},ze={class:"text-sm font-medium text-gray-600"},$e={class:"mt-1"},De={class:"flex justify-between items-center"},Se={class:"flex gap-2"},Pe={key:0},Ee={class:"grid grid-cols-4 gap-4 mb-6"},Ve={class:"text-center"},Fe={class:"text-2xl font-bold"},Te={class:"text-center"},Ae={class:"text-2xl font-bold text-yellow-600"},Oe={class:"text-center"},Le={class:"text-2xl font-bold text-green-600"},je={class:"text-center"},Ie={class:"text-2xl font-bold"},Ne={key:0,class:"mt-6 space-y-2"},Be={class:"flex items-center justify-between"},Me={class:"flex-1"},Ue={class:"font-medium"},Re={key:0,class:"text-sm text-gray-600 mt-1"},Ge={class:"flex items-center gap-4 mt-2"},He={key:0,class:"text-xs text-gray-500"},qe={key:1,class:"text-xs text-gray-500"},Xe={class:"flex gap-2"},Je={class:"text-center mt-4"},Ke={key:1,class:"text-center py-6 text-gray-500"},Qe={class:"space-y-6"},We={class:"flex items-center gap-3"},Ye={class:"font-medium"},Ze=["href"],to={class:"ml-2 font-mono"},eo={class:"ml-2"},oo={key:0,class:"block text-xs text-gray-500 ml-2"},ao={class:"ml-2"},so={key:0,class:"block text-xs text-gray-500 ml-2"},ba=nt({__name:"Show",props:{contrato:{},can:{}},setup(a){const v=a,P=vt(),j=rt("general"),W=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:v.contrato.nombre,href:`/admin/contratos/${v.contrato.id}`}],E=F(()=>{const u={borrador:{color:"bg-gray-100 text-gray-800",icon:G,label:"Borrador"},activo:{color:"bg-green-100 text-green-800",icon:R,label:"Activo"},finalizado:{color:"bg-blue-100 text-blue-800",icon:R,label:"Finalizado"},cancelado:{color:"bg-red-100 text-red-800",icon:xt,label:"Cancelado"}};return u[v.contrato.estado]||u.borrador}),Y=F(()=>({servicio:"Servicio",obra:"Obra",suministro:"Suministro",consultoria:"Consultoría",otro:"Otro"})[v.contrato.tipo]||"Otro"),Z=F(()=>v.contrato.estado==="cancelado"?"bg-red-500":v.contrato.estado==="finalizado"?"bg-blue-500":v.contrato.esta_vencido?"bg-red-500":v.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),D=u=>u?new Date(u).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",I=u=>u?new Date(u).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",S=u=>{confirm(`¿Está seguro de cambiar el estado a ${u}?`)&&O.post(route("admin.contratos.cambiar-estado",v.contrato.id),{estado:u},{onSuccess:()=>{P.success("Estado actualizado exitosamente")}})},tt=()=>{confirm("¿Está seguro de eliminar este contrato? Esta acción no se puede deshacer.")&&O.delete(route("admin.contratos.destroy",v.contrato.id),{onSuccess:()=>{P.success("Contrato eliminado exitosamente")}})},et=()=>{confirm("¿Desea duplicar este contrato?")&&O.post(route("admin.contratos.duplicar",v.contrato.id),{},{onSuccess:()=>{P.success("Contrato duplicado exitosamente")}})},ot=()=>{v.contrato.archivo_pdf&&window.open(v.contrato.archivo_pdf,"_blank")},_=u=>{var c,$,N;const t=dt(),y=((c=t.props.auth)==null?void 0:c.permissions)||[];return((N=($=t.props.auth)==null?void 0:$.roles)==null?void 0:N.some(st=>st.name==="super_admin"))?!0:y.includes(u)},at=u=>({pendiente:"secondary",en_progreso:"warning",cumplida:"success",vencida:"destructive",cancelada:"outline"})[u]||"secondary";return(u,t)=>(r(),f(ut,{breadcrumbs:W},{default:n(()=>[o("div",St,[o("div",Pt,[o("div",Et,[s(e(x),{href:u.route("admin.contratos.index")},{default:n(()=>[s(e(g),{variant:"ghost",size:"sm"},{default:n(()=>[s(e(yt),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=i(" Volver ",-1))]),_:1})]),_:1},8,["href"]),o("div",null,[o("h1",Vt,l(a.contrato.nombre),1),o("div",Ft,[s(e(w),{class:B(E.value.color)},{default:n(()=>[(r(),f(it(E.value.icon),{class:"h-4 w-4 mr-1"})),i(" "+l(E.value.label),1)]),_:1},8,["class"]),s(e(w),{variant:"outline"},{default:n(()=>[i(l(Y.value),1)]),_:1}),a.contrato.esta_vencido?(r(),f(e(w),{key:0,variant:"destructive"},{default:n(()=>[...t[6]||(t[6]=[i(" Vencido ",-1)])]),_:1})):a.contrato.esta_proximo_vencer?(r(),f(e(w),{key:1,class:"bg-yellow-100 text-yellow-800"},{default:n(()=>[i(" Vence en "+l(a.contrato.dias_restantes)+" días ",1)]),_:1})):d("",!0)])])]),o("div",Tt,[a.contrato.archivo_pdf?(r(),f(e(g),{key:0,variant:"outline",onClick:ot},{default:n(()=>[s(e(bt),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=i(" Descargar PDF ",-1))]),_:1})):d("",!0),a.can.edit?(r(),f(e(g),{key:1,variant:"outline",onClick:et},{default:n(()=>[s(e(ht),{class:"h-4 w-4 mr-2"}),t[8]||(t[8]=i(" Duplicar ",-1))]),_:1})):d("",!0),a.can.edit?(r(),f(e(x),{key:2,href:u.route("admin.contratos.edit",a.contrato.id)},{default:n(()=>[s(e(g),null,{default:n(()=>[s(e(pt),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=i(" Editar ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),a.can.delete?(r(),f(e(g),{key:3,variant:"destructive",onClick:tt},{default:n(()=>[s(e(kt),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=i(" Eliminar ",-1))]),_:1})):d("",!0)])]),a.contrato.esta_vencido?(r(),f(e(M),{key:0,variant:"destructive"},{default:n(()=>[s(e(H),{class:"h-4 w-4"}),s(e(U),null,{default:n(()=>[i(" Este contrato venció el "+l(D(a.contrato.fecha_fin))+". ",1)]),_:1})]),_:1})):a.contrato.esta_proximo_vencer?(r(),f(e(M),{key:1,variant:"warning"},{default:n(()=>[s(e(H),{class:"h-4 w-4"}),s(e(U),null,{default:n(()=>[i(" Este contrato vencerá en "+l(a.contrato.dias_restantes)+" días ("+l(D(a.contrato.fecha_fin))+"). ",1)]),_:1})]),_:1})):d("",!0),a.can.change_status&&a.contrato.estado!=="cancelado"?(r(),f(e(b),{key:2},{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),{class:"text-lg"},{default:n(()=>[...t[11]||(t[11]=[i("Cambio de Estado",-1)])]),_:1})]),_:1}),s(e(k),null,{default:n(()=>[o("div",At,[a.contrato.estado==="borrador"?(r(),f(e(g),{key:0,variant:"outline",size:"sm",onClick:t[0]||(t[0]=y=>S("activo"))},{default:n(()=>[...t[12]||(t[12]=[i(" Activar Contrato ",-1)])]),_:1})):d("",!0),a.contrato.estado==="activo"?(r(),f(e(g),{key:1,variant:"outline",size:"sm",onClick:t[1]||(t[1]=y=>S("finalizado"))},{default:n(()=>[...t[13]||(t[13]=[i(" Finalizar Contrato ",-1)])]),_:1})):d("",!0),a.contrato.estado==="finalizado"?(r(),f(e(g),{key:2,variant:"outline",size:"sm",onClick:t[2]||(t[2]=y=>S("activo"))},{default:n(()=>[...t[14]||(t[14]=[i(" Reactivar ",-1)])]),_:1})):d("",!0),s(e(g),{variant:"outline",size:"sm",class:"text-red-600",onClick:t[3]||(t[3]=y=>S("cancelado"))},{default:n(()=>[...t[15]||(t[15]=[i(" Cancelar Contrato ",-1)])]),_:1})])]),_:1})]),_:1})):d("",!0),o("div",Ot,[o("div",Lt,[s(e(ft),{modelValue:j.value,"onUpdate:modelValue":t[4]||(t[4]=y=>j.value=y)},{default:n(()=>{var y,V;return[s(e(gt),null,{default:n(()=>{var c,$;return[s(e(C),{value:"general"},{default:n(()=>[...t[16]||(t[16]=[i("Información General",-1)])]),_:1}),s(e(C),{value:"financiero"},{default:n(()=>[...t[17]||(t[17]=[i("Financiero",-1)])]),_:1}),s(e(C),{value:"contraparte"},{default:n(()=>[...t[18]||(t[18]=[i("Contraparte",-1)])]),_:1}),(c=a.contrato.participantes)!=null&&c.length?(r(),f(e(C),{key:0,value:"participantes"},{default:n(()=>[i(" Participantes ("+l(a.contrato.participantes.length)+") ",1)]),_:1})):d("",!0),($=a.contrato.campos_personalizados)!=null&&$.length?(r(),f(e(C),{key:1,value:"campos"},{default:n(()=>[...t[19]||(t[19]=[i(" Campos Adicionales ",-1)])]),_:1})):d("",!0),s(e(C),{value:"obligaciones"},{default:n(()=>[t[20]||(t[20]=i(" Obligaciones ",-1)),a.contrato.total_obligaciones>0?(r(),f(e(w),{key:0,variant:"outline",class:"ml-1"},{default:n(()=>[i(l(a.contrato.total_obligaciones),1)]),_:1})):d("",!0)]),_:1})]}),_:1}),s(e(z),{value:"general"},{default:n(()=>[s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),null,{default:n(()=>[...t[21]||(t[21]=[i("Información General",-1)])]),_:1})]),_:1}),s(e(k),{class:"space-y-4"},{default:n(()=>[a.contrato.descripcion?(r(),m("div",jt,[t[22]||(t[22]=o("h4",{class:"text-sm font-medium text-gray-600"},"Descripción",-1)),o("p",It,l(a.contrato.descripcion),1)])):d("",!0),o("div",Nt,[o("div",null,[t[23]||(t[23]=o("h4",{class:"text-sm font-medium text-gray-600"},"Fecha de Inicio",-1)),o("p",Bt,[s(e(q),{class:"h-4 w-4"}),i(" "+l(D(a.contrato.fecha_inicio)),1)])]),o("div",null,[t[24]||(t[24]=o("h4",{class:"text-sm font-medium text-gray-600"},"Fecha de Fin",-1)),o("p",Mt,[s(e(q),{class:"h-4 w-4"}),i(" "+l(D(a.contrato.fecha_fin)),1)])])]),a.contrato.porcentaje_transcurrido!==void 0&&a.contrato.estado==="activo"?(r(),m("div",Ut,[o("div",Rt,[t[25]||(t[25]=o("span",null,"Progreso del contrato",-1)),o("span",null,l(a.contrato.porcentaje_transcurrido)+"%",1)]),o("div",Gt,[o("div",{class:B([Z.value,"h-3 rounded-full transition-all duration-300"]),style:lt({width:`${a.contrato.porcentaje_transcurrido}%`})},null,6)])])):d("",!0),a.contrato.observaciones?(r(),m("div",Ht,[t[26]||(t[26]=o("h4",{class:"text-sm font-medium text-gray-600"},"Observaciones",-1)),o("p",qt,l(a.contrato.observaciones),1)])):d("",!0)]),_:1})]),_:1})]),_:1}),s(e(z),{value:"financiero"},{default:n(()=>[s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),null,{default:n(()=>[...t[27]||(t[27]=[i("Información Financiera",-1)])]),_:1})]),_:1}),s(e(k),{class:"space-y-4"},{default:n(()=>[a.contrato.monto_total?(r(),m("div",Xt,[t[28]||(t[28]=o("h4",{class:"text-sm font-medium text-gray-600"},"Monto Total",-1)),o("p",Jt,[s(e(wt),{class:"h-6 w-6"}),i(" "+l(a.contrato.monto_formateado||a.contrato.monto_total)+" ",1),o("span",Kt,l(a.contrato.moneda),1)])])):(r(),m("div",Qt,[...t[29]||(t[29]=[o("p",{class:"text-gray-500"},"No se ha especificado información financiera",-1)])]))]),_:1})]),_:1})]),_:1}),s(e(z),{value:"contraparte"},{default:n(()=>[s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),null,{default:n(()=>[...t[30]||(t[30]=[i("Información de la Contraparte",-1)])]),_:1})]),_:1}),s(e(k),{class:"space-y-4"},{default:n(()=>[a.contrato.contraparte_user?(r(),m("div",Wt,[o("div",Yt,[o("div",Zt,[s(e(L),{class:"h-8 w-8 text-blue-600 mt-1"}),o("div",te,[o("div",ee,[o("h3",oe,l(a.contrato.contraparte_user.name),1),s(e(w),{class:"bg-blue-100 text-blue-800"},{default:n(()=>[...t[31]||(t[31]=[i(" Usuario del Sistema ",-1)])]),_:1})]),o("div",ae,[o("div",se,[s(e(X),{class:"h-4 w-4 text-gray-400"}),o("a",{href:`mailto:${a.contrato.contraparte_user.email}`,class:"text-blue-600 hover:underline"},l(a.contrato.contraparte_user.email),9,ne)]),a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono?(r(),m("div",re,[s(e(J),{class:"h-4 w-4 text-gray-400"}),o("a",{href:`tel:${a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono}`,class:"text-blue-600 hover:underline"},l(a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono),9,ie)])):d("",!0),o("div",le,[s(e(K),{class:"h-4 w-4 text-gray-400"}),o("span",de,"ID: #"+l(a.contrato.contraparte_user.id),1)])])])])])])):a.contrato.contraparte_nombre||a.contrato.contraparte_identificacion||a.contrato.contraparte_email||a.contrato.contraparte_telefono?(r(),m("div",ce,[o("div",ue,[a.contrato.contraparte_nombre?(r(),m("div",me,[s(e(ct),{class:"h-4 w-4 text-gray-400"}),o("div",null,[t[32]||(t[32]=o("h4",{class:"text-sm font-medium text-gray-600"},"Nombre",-1)),o("p",null,l(a.contrato.contraparte_nombre),1)])])):d("",!0),a.contrato.contraparte_identificacion?(r(),m("div",fe,[s(e(K),{class:"h-4 w-4 text-gray-400"}),o("div",null,[t[33]||(t[33]=o("h4",{class:"text-sm font-medium text-gray-600"},"Identificación",-1)),o("p",null,l(a.contrato.contraparte_identificacion),1)])])):d("",!0),a.contrato.contraparte_email?(r(),m("div",ge,[s(e(X),{class:"h-4 w-4 text-gray-400"}),o("div",null,[t[34]||(t[34]=o("h4",{class:"text-sm font-medium text-gray-600"},"Email",-1)),o("a",{href:`mailto:${a.contrato.contraparte_email}`,class:"text-blue-600 hover:underline"},l(a.contrato.contraparte_email),9,ve)])])):d("",!0),a.contrato.contraparte_telefono?(r(),m("div",xe,[s(e(J),{class:"h-4 w-4 text-gray-400"}),o("div",null,[t[35]||(t[35]=o("h4",{class:"text-sm font-medium text-gray-600"},"Teléfono",-1)),o("a",{href:`tel:${a.contrato.contraparte_telefono}`,class:"text-blue-600 hover:underline"},l(a.contrato.contraparte_telefono),9,ye)])])):d("",!0)])])):(r(),m("div",be,[...t[36]||(t[36]=[o("p",{class:"text-gray-500"},"No se ha especificado información de la contraparte",-1)])]))]),_:1})]),_:1})]),_:1}),(y=a.contrato.participantes)!=null&&y.length?(r(),f(e(z),{key:0,value:"participantes"},{default:n(()=>[s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),null,{default:n(()=>[...t[37]||(t[37]=[i("Participantes del Contrato",-1)])]),_:1}),s(e(mt),null,{default:n(()=>[...t[38]||(t[38]=[i(" Usuarios del sistema asociados a este contrato ",-1)])]),_:1})]),_:1}),s(e(k),null,{default:n(()=>[o("div",he,[(r(!0),m(T,null,A(a.contrato.participantes,c=>(r(),m("div",{key:c.id,class:"flex items-center justify-between p-4 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},[o("div",pe,[s(e(L),{class:"h-8 w-8 text-gray-400"}),o("div",null,[o("p",ke,l(c.name),1),o("p",we,l(c.email),1),c.pivot.notas?(r(),m("p",_e,l(c.pivot.notas),1)):d("",!0)])]),s(e(w),{variant:c.pivot.rol==="aprobador"?"default":c.pivot.rol==="observador"?"secondary":"outline"},{default:n(()=>[i(l(c.pivot.rol==="aprobador"?"Aprobador":c.pivot.rol==="observador"?"Observador":"Participante"),1)]),_:2},1032,["variant"])]))),128))])]),_:1})]),_:1})]),_:1})):d("",!0),(V=a.contrato.campos_personalizados)!=null&&V.length?(r(),f(e(z),{key:1,value:"campos"},{default:n(()=>[s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),null,{default:n(()=>[...t[39]||(t[39]=[i("Campos Adicionales",-1)])]),_:1})]),_:1}),s(e(k),null,{default:n(()=>[o("div",Ce,[(r(!0),m(T,null,A(a.contrato.campos_personalizados,c=>(r(),m("div",{key:c.campo.id},[o("h4",ze,l(c.campo.nombre),1),o("p",$e,l(c.valor_formateado||c.valor||"-"),1)]))),128))])]),_:1})]),_:1})]),_:1})):d("",!0),s(e(z),{value:"obligaciones",class:"space-y-6 mt-6"},{default:n(()=>[s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[o("div",De,[s(e(p),null,{default:n(()=>[...t[40]||(t[40]=[i("Obligaciones del Contrato",-1)])]),_:1}),o("div",Se,[_("obligaciones.create")?(r(),f(e(x),{key:0,href:u.route("admin.obligaciones.create",{contrato_id:a.contrato.id})},{default:n(()=>[s(e(g),{size:"sm",variant:"default"},{default:n(()=>[s(e(Q),{class:"h-4 w-4 mr-1"}),t[41]||(t[41]=i(" Nueva Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),_("obligaciones.view")?(r(),f(e(x),{key:1,href:u.route("admin.obligaciones.index",{contrato_id:a.contrato.id})},{default:n(()=>[s(e(g),{size:"sm",variant:"outline"},{default:n(()=>[s(e(_t),{class:"h-4 w-4 mr-1"}),t[42]||(t[42]=i(" Ver Lista ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),_("obligaciones.view")?(r(),f(e(x),{key:2,href:u.route("admin.contratos.obligaciones.arbol",a.contrato.id)},{default:n(()=>[s(e(g),{size:"sm",variant:"outline"},{default:n(()=>[s(e(Ct),{class:"h-4 w-4 mr-1"}),t[43]||(t[43]=i(" Vista Árbol ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),_("obligaciones.view")?(r(),f(e(x),{key:3,href:u.route("admin.contratos.obligaciones.timeline",a.contrato.id)},{default:n(()=>[s(e(g),{size:"sm",variant:"outline"},{default:n(()=>[s(e(zt),{class:"h-4 w-4 mr-1"}),t[44]||(t[44]=i(" Timeline ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)])])]),_:1}),s(e(k),null,{default:n(()=>[a.contrato.total_obligaciones&&a.contrato.total_obligaciones>0?(r(),m("div",Pe,[o("div",Ee,[o("div",Ve,[o("div",Fe,l(a.contrato.total_obligaciones),1),t[45]||(t[45]=o("p",{class:"text-xs text-gray-600"},"Total",-1))]),o("div",Te,[o("div",Ae,l(a.contrato.obligaciones_pendientes),1),t[46]||(t[46]=o("p",{class:"text-xs text-gray-600"},"Pendientes",-1))]),o("div",Oe,[o("div",Le,l(a.contrato.obligaciones_cumplidas),1),t[47]||(t[47]=o("p",{class:"text-xs text-gray-600"},"Cumplidas",-1))]),o("div",je,[o("div",Ie,l(a.contrato.total_obligaciones>0?Math.round(a.contrato.obligaciones_cumplidas/a.contrato.total_obligaciones*100):0)+"% ",1),t[48]||(t[48]=o("p",{class:"text-xs text-gray-600"},"Progreso",-1))])]),a.contrato.obligaciones&&a.contrato.obligaciones.length>0?(r(),m("div",Ne,[t[51]||(t[51]=o("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Obligaciones principales:",-1)),(r(!0),m(T,null,A(a.contrato.obligaciones,c=>(r(),m("div",{key:c.id,class:"border rounded-lg p-3 hover:bg-gray-50"},[o("div",Be,[o("div",Me,[o("h5",Ue,l(c.titulo),1),c.descripcion?(r(),m("p",Re,l(c.descripcion),1)):d("",!0),o("div",Ge,[s(e(w),{variant:at(c.estado),size:"sm"},{default:n(()=>[i(l(c.estado),1)]),_:2},1032,["variant"]),c.fecha_vencimiento?(r(),m("span",He," Vence: "+l(new Date(c.fecha_vencimiento).toLocaleDateString()),1)):d("",!0),c.responsable?(r(),m("span",qe," Responsable: "+l(c.responsable.name),1)):d("",!0)])]),o("div",Xe,[s(e(x),{href:u.route("admin.obligaciones.show",c.id)},{default:n(()=>[s(e(g),{size:"sm",variant:"ghost"},{default:n(()=>[...t[49]||(t[49]=[i("Ver",-1)])]),_:1})]),_:1},8,["href"]),_("obligaciones.edit")?(r(),f(e(x),{key:0,href:u.route("admin.obligaciones.edit",c.id)},{default:n(()=>[s(e(g),{size:"sm",variant:"ghost"},{default:n(()=>[...t[50]||(t[50]=[i("Editar",-1)])]),_:1})]),_:1},8,["href"])):d("",!0)])])]))),128))])):d("",!0),o("div",Je,[s(e(x),{href:u.route("admin.contratos.obligaciones.arbol",a.contrato.id),class:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800"},{default:n(()=>[t[52]||(t[52]=i(" Ver árbol completo de obligaciones ",-1)),s(e($t),{class:"h-4 w-4 ml-1"})]),_:1},8,["href"])])])):(r(),m("div",Ke,[s(e(G),{class:"h-12 w-12 mx-auto mb-3 text-gray-300"}),t[54]||(t[54]=o("p",null,"No hay obligaciones registradas para este contrato",-1)),t[55]||(t[55]=o("p",{class:"text-sm text-gray-400 mt-1"},"Las obligaciones te ayudan a hacer seguimiento de tareas y compromisos del contrato",-1)),_("obligaciones.create")?(r(),f(e(x),{key:0,href:u.route("admin.obligaciones.create",{contrato_id:a.contrato.id}),class:"mt-3 inline-block"},{default:n(()=>[s(e(g),{size:"sm",variant:"default"},{default:n(()=>[s(e(Q),{class:"h-4 w-4 mr-1"}),t[53]||(t[53]=i(" Crear Primera Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)]))]),_:1})]),_:1})]),_:1})]}),_:1},8,["modelValue"])]),o("div",Qe,[s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),{class:"text-lg"},{default:n(()=>[...t[56]||(t[56]=[i("Proyecto",-1)])]),_:1})]),_:1}),s(e(k),null,{default:n(()=>[s(e(x),{href:u.route("admin.proyectos.show",a.contrato.proyecto.id),class:"text-blue-600 hover:underline flex items-center gap-2"},{default:n(()=>[i(l(a.contrato.proyecto.nombre)+" ",1),s(e(Dt),{class:"h-4 w-4"})]),_:1},8,["href"]),s(e(w),{variant:"outline",class:"mt-2"},{default:n(()=>[i(l(a.contrato.proyecto.estado),1)]),_:1})]),_:1})]),_:1}),a.contrato.responsable?(r(),f(e(b),{key:0},{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),{class:"text-lg"},{default:n(()=>[...t[57]||(t[57]=[i("Responsable",-1)])]),_:1})]),_:1}),s(e(k),null,{default:n(()=>[o("div",We,[s(e(L),{class:"h-8 w-8 text-gray-400"}),o("div",null,[o("p",Ye,l(a.contrato.responsable.name),1),o("a",{href:`mailto:${a.contrato.responsable.email}`,class:"text-sm text-blue-600 hover:underline"},l(a.contrato.responsable.email),9,Ze)])])]),_:1})]),_:1})):d("",!0),s(e(b),null,{default:n(()=>[s(e(h),null,{default:n(()=>[s(e(p),{class:"text-lg"},{default:n(()=>[...t[58]||(t[58]=[i("Información del Sistema",-1)])]),_:1})]),_:1}),s(e(k),{class:"space-y-3 text-sm"},{default:n(()=>[o("div",null,[t[59]||(t[59]=o("span",{class:"text-gray-600"},"ID:",-1)),o("span",to,"#"+l(a.contrato.id),1)]),o("div",null,[t[60]||(t[60]=o("span",{class:"text-gray-600"},"Creado:",-1)),o("span",eo,l(I(a.contrato.created_at)),1),a.contrato.created_by?(r(),m("span",oo," por "+l(a.contrato.created_by.name),1)):d("",!0)]),o("div",null,[t[61]||(t[61]=o("span",{class:"text-gray-600"},"Última actualización:",-1)),o("span",ao,l(I(a.contrato.updated_at)),1),a.contrato.updated_by?(r(),m("span",so," por "+l(a.contrato.updated_by.name),1)):d("",!0)])]),_:1})]),_:1})])])])]),_:1}))}});export{ba as default};
