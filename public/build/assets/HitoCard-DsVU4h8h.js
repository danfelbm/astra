import{a as j,b as z,c as B,_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-nACRIi6D.js";import{_ as E}from"./CardFooter.vue_vue_type_script_setup_true_lang-TOADWDYh.js";import{c as w,_ as y}from"./createLucideIcon-BvwuntV9.js";import{_ as v}from"./index-Co6smWvJ.js";import{_ as P}from"./Progress.vue_vue_type_script_setup_true_lang-CF-p6gT1.js";import{_ as V,b as L}from"./index-BQDSCwpy.js";import{C as T}from"./calendar-days-D_d02K1J.js";import{C as A}from"./clock-BaKbkbsl.js";import{E as I}from"./eye-AP8nYXmu.js";import{P as N}from"./pen-KEUyZOEa.js";import{P as q}from"./plus-BdLNQ0o1.js";import{C as H}from"./copy-Dk6LvpXs.js";import{T as F}from"./trash-2-BtyG2syV.js";import{d as S,c as b,b as u,w as o,e as i,j as d,f as s,n as r,g as a,h as g,t as c,i as h,F as O,k as U,m as n,y as G}from"./app-DNpYmmNV.js";import{f as J,e as K}from"./es-BDPlFIsO.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=w("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=w("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),X={class:"flex items-center justify-between gap-2"},Y={class:"flex items-center gap-2 min-w-0 flex-1"},Z={key:0,class:"text-sm text-muted-foreground line-clamp-2"},_={class:"flex items-center justify-between gap-4 text-xs text-muted-foreground"},ee={class:"flex items-center gap-3"},te={key:0,class:"flex items-center gap-1"},se={key:1,class:"text-gray-300"},ae={key:2,class:"flex items-center gap-1"},ie={key:0,class:"flex items-center gap-1.5"},oe={class:"truncate max-w-[100px]"},ne={class:"flex justify-between items-center text-xs"},le={class:"font-medium"},ce={class:"flex items-center justify-between text-xs text-muted-foreground"},de={key:0,class:"flex items-center gap-1"},re={key:1,class:"flex flex-wrap gap-1"},me={class:"w-full flex items-center justify-between gap-2"},he={class:"flex items-center gap-1"},fe={class:"flex items-center gap-1"},ue=S({__name:"HitoCard",props:{hito:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0},compact:{type:Boolean,default:!1}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables"],setup(e){const x=e,C=b(()=>({pendiente:"Pendiente",en_progreso:"En Progreso",completado:"Completado",cancelado:"Cancelado"})[x.hito.estado]||x.hito.estado),$=b(()=>({pendiente:"bg-gray-400",en_progreso:"bg-blue-500 animate-pulse",completado:"bg-green-500",cancelado:"bg-red-500"})[x.hito.estado]||"bg-gray-400"),M=b(()=>({pendiente:"secondary",en_progreso:"default",completado:"success",cancelado:"destructive"})[x.hito.estado]||"secondary"),k=l=>{if(!l)return"";try{const t=typeof l=="string"?new Date(l):l;return J(t,"dd MMM yyyy",{locale:K})}catch{return""}};return(l,t)=>(n(),u(s(D),{class:"hover:shadow-md transition-shadow duration-200"},{default:o(()=>[i(s(j),{class:r(e.compact?"pb-2 pt-3 px-4":"pb-3")},{default:o(()=>[a("div",X,[a("div",Y,[a("div",{class:r([$.value,"w-2 h-2 rounded-full flex-shrink-0"])},null,2),i(s(z),{class:r([e.compact?"text-base":"text-lg","font-medium truncate"])},{default:o(()=>[g(c(e.hito.nombre),1)]),_:1},8,["class"])]),i(s(v),{variant:M.value,class:r(e.compact?"text-xs px-2 py-0.5":"text-xs")},{default:o(()=>[g(c(e.hito.estado_label||C.value),1)]),_:1},8,["variant","class"])])]),_:1},8,["class"]),i(s(B),{class:r(e.compact?"pb-2 px-4 space-y-2":"pb-3 space-y-3")},{default:o(()=>{var m;return[e.hito.descripcion&&!e.compact?(n(),h("p",Z,c(e.hito.descripcion),1)):d("",!0),a("div",_,[a("div",ee,[e.hito.fecha_inicio?(n(),h("div",te,[i(s(T),{class:"h-3 w-3"}),a("span",null,c(k(e.hito.fecha_inicio)),1)])):d("",!0),e.hito.fecha_inicio&&e.hito.fecha_fin?(n(),h("span",se,"→")):d("",!0),e.hito.fecha_fin?(n(),h("div",ae,[i(s(R),{class:"h-3 w-3"}),a("span",null,c(k(e.hito.fecha_fin)),1)])):d("",!0)]),e.hito.responsable?(n(),h("div",ie,[i(s(V),{class:"h-5 w-5"},{default:o(()=>[i(s(L),{class:"text-[10px]"},{default:o(()=>{var f,p;return[g(c((p=(f=e.hito.responsable.name)==null?void 0:f.charAt(0))==null?void 0:p.toUpperCase()),1)]}),_:1})]),_:1}),a("span",oe,c(e.hito.responsable.name),1)])):d("",!0)]),a("div",{class:r(e.compact?"space-y-1":"space-y-2")},[a("div",ne,[t[6]||(t[6]=a("span",{class:"text-muted-foreground"},"Progreso",-1)),a("span",le,c(e.hito.porcentaje_completado)+"%",1)]),i(s(P),{"model-value":e.hito.porcentaje_completado,class:r(e.compact?"h-1.5":"h-2")},null,8,["model-value","class"])],2),a("div",ce,[a("span",null,c(e.hito.entregables_completados||0)+"/"+c(e.hito.total_entregables||((m=e.hito.entregables)==null?void 0:m.length)||0)+" entregables",1),e.hito.dias_restantes!==null&&e.hito.dias_restantes!==void 0?(n(),h("div",de,[i(s(A),{class:"h-3 w-3"}),a("span",{class:r({"text-red-500 font-medium":e.hito.dias_restantes<0,"text-orange-500":e.hito.dias_restantes>=0&&e.hito.dias_restantes<=7})},c(e.hito.dias_restantes<0?`Vencido hace ${Math.abs(e.hito.dias_restantes)} días`:`${e.hito.dias_restantes} días`),3)])):d("",!0)]),!e.compact&&e.hito.etiquetas&&e.hito.etiquetas.length>0?(n(),h("div",re,[(n(!0),h(O,null,U(e.hito.etiquetas.slice(0,3),f=>(n(),u(s(v),{key:f.id,variant:"outline",class:"text-xs",style:G({borderColor:f.color||"#94a3b8",color:f.color||"#64748b"})},{default:o(()=>[g(c(f.nombre),1)]),_:2},1032,["style"]))),128)),e.hito.etiquetas.length>3?(n(),u(s(v),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>[g(" +"+c(e.hito.etiquetas.length-3),1)]),_:1})):d("",!0)])):d("",!0)]}),_:1},8,["class"]),e.showActions?(n(),u(s(E),{key:0,class:r(e.compact?"pt-2 pb-3 px-4 border-t":"pt-3 border-t")},{default:o(()=>[a("div",me,[a("div",he,[i(s(y),{variant:"ghost",size:"sm",onClick:t[0]||(t[0]=m=>l.$emit("view",e.hito)),class:"h-8 px-2"},{default:o(()=>[i(s(I),{class:"h-4 w-4"}),t[7]||(t[7]=a("span",{class:"ml-1.5"},"Ver detalles",-1))]),_:1}),i(s(y),{variant:"ghost",size:"sm",onClick:t[1]||(t[1]=m=>l.$emit("view-entregables",e.hito)),class:"h-8 px-2"},{default:o(()=>[i(s(W),{class:"h-4 w-4"}),t[8]||(t[8]=a("span",{class:"ml-1.5"},"Entregables",-1))]),_:1})]),a("div",fe,[e.canEdit?(n(),u(s(y),{key:0,variant:"ghost",size:"sm",onClick:t[2]||(t[2]=m=>l.$emit("edit",e.hito)),class:"h-8 px-2"},{default:o(()=>[i(s(N),{class:"h-4 w-4"}),t[9]||(t[9]=a("span",{class:"ml-1.5"},"Editar",-1))]),_:1})):d("",!0),e.canManageDeliverables?(n(),u(s(y),{key:1,variant:"ghost",size:"sm",onClick:t[3]||(t[3]=m=>l.$emit("add-entregable",e.hito)),class:"h-8 px-2"},{default:o(()=>[i(s(q),{class:"h-4 w-4"}),t[10]||(t[10]=a("span",{class:"ml-1.5"},"Añadir",-1))]),_:1})):d("",!0),i(s(y),{variant:"ghost",size:"sm",onClick:t[4]||(t[4]=m=>l.$emit("duplicate",e.hito)),class:"h-8 px-2"},{default:o(()=>[i(s(H),{class:"h-4 w-4"}),t[11]||(t[11]=a("span",{class:"ml-1.5"},"Duplicar",-1))]),_:1}),e.canDelete?(n(),u(s(y),{key:2,variant:"ghost",size:"sm",onClick:t[5]||(t[5]=m=>l.$emit("delete",e.hito)),class:"h-8 px-2 text-red-600 hover:text-red-700 hover:bg-red-50"},{default:o(()=>[i(s(F),{class:"h-4 w-4"}),t[12]||(t[12]=a("span",{class:"ml-1.5"},"Eliminar",-1))]),_:1})):d("",!0)])])]),_:1},8,["class"])):d("",!0)]),_:1}))}}),Pe=Q(ue,[["__scopeId","data-v-3903336e"]]);export{Pe as H,W as L};
