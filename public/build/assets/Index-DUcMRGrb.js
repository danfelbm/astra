import{d as I,r as S,b as m,w as e,e as t,g as n,f as a,q as M,i as p,j as f,m as r,v as C,h as i,A as q,F as V,k as P,t as u,n as H,s as x}from"./app-CSUPqSMz.js";import{_ as B}from"./index-BVK128az.js";import{_ as v}from"./createLucideIcon-Bpd7Lz21.js";import{_ as A,a as K,b as G,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-ByNoy_Y2.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-qz7OskJt.js";import{_ as R,a as X,b as J,c as O,d as k}from"./SelectValue.vue_vue_type_script_setup_true_lang-B0zCjsGc.js";import{_ as W,a as Y,b,c as _,d as Z,e as c}from"./TableHeader.vue_vue_type_script_setup_true_lang-C7szzAUe.js";import{_ as aa,a as ta,b as ea,c as sa,d as la,e as ia,f as na,g as ra}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CmuWzs_1.js";import{_ as oa}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-nmAWbq10.js";import{_ as ma}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BYS78uXz.js";import{t as y}from"./index-DuDiNkIE.js";import{P as da}from"./plus-BOPSj9GK.js";import{S as ua}from"./search-B7koysji.js";import{M as N}from"./mail-OzI6XGZn.js";import{C as fa}from"./circle-check-big-C1QHoh3-.js";import{C as ca}from"./circle-x-D4Nlv0Z9.js";import{U as pa}from"./user-B3paekYl.js";import{E as _a}from"./eye-BrpzLeBr.js";import{C as va}from"./copy-mbI4tUXt.js";import{S as ga}from"./square-pen-pWxacdmg.js";import{T as xa}from"./trash-2-BYSUyelz.js";import"./index-DHUnTxeJ.js";import"./VisuallyHidden-CoJfAQ5l.js";import"./check-BJXe_xaF.js";import"./floating-ui.vue-D3TvU6_4.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BjDwmADO.js";import"./x-5CiMQrWb.js";import"./DialogTrigger-D-niYJNK.js";import"./useFlashMessages-x-Su6vge.js";import"./index-EaL6PGP0.js";import"./index-rNE8Lpd7.js";import"./shield-qd1Wf5F6.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-QolKlYuj.js";import"./chevron-right-BplIK_Zm.js";import"./house-BKaJiwK1.js";import"./Label.vue_vue_type_script_setup_true_lang-sz79BH87.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cntn2jBR.js";import"./circle-alert-Buh9_Ypt.js";import"./map-pin-8cL7Agee.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CZLqwq4w.js";import"./chevrons-up-down-CCT5UoMT.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-SopszEwA.js";import"./target-DIcFC4_y.js";import"./users-E7aQQxwT.js";import"./vote-T-IOb6dV.js";import"./folder-open-BSPHF0Yp.js";import"./send-DhSNIL02.js";import"./file-text-D16aePTg.js";import"./briefcase-C1Z2eHEx.js";import"./calendar-DrKaZ9qm.js";import"./megaphone-BFP4Avio.js";import"./user-check-Bf1Rc3kL.js";import"./clipboard-list-DtdWY6MC.js";import"./message-square-CEjBnq_U.js";import"./external-link-o3ntK-Zj.js";import"./panel-left-BiCO4_cc.js";import"./index-D10GpyFo.js";const ya={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},$a={class:"flex justify-between items-center"},ha={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ca={class:"md:col-span-2"},ka={class:"relative"},ba={class:"font-medium"},wa={key:0,class:"text-sm text-muted-foreground"},Ea={class:"flex items-center gap-2"},Sa={class:"text-sm"},Va={key:0,class:"text-sm"},Pa={key:1,class:"text-sm text-muted-foreground"},Ba={class:"text-sm"},Aa={key:0,class:"text-muted-foreground flex items-center gap-1"},Da={class:"flex justify-end gap-1"},Na={class:"text-muted-foreground"},Fa={key:0,class:"flex justify-center"},Ta={class:"flex gap-1"},Ut=I({__name:"Index",props:{plantillas:{},filters:{},filterFieldsConfig:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(d){const $=d,F=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/envio-campanas"},{title:"Plantillas Email",href:"/admin/campanas/plantillas-email"}];$.filterFieldsConfig;const h=S($.filters.search||""),g=S($.filters.es_activa||"all"),w=()=>{x.get("/admin/campanas/plantillas-email",{search:h.value,es_activa:g.value!=="all"?g.value:void 0},{preserveState:!0,preserveScroll:!0})},T=o=>{x.post(`/admin/campanas/plantillas-email/${o}/duplicate`,{},{onSuccess:()=>{y.success("Plantilla duplicada exitosamente")},onError:()=>{y.error("Error al duplicar la plantilla")}})},j=o=>{x.delete(`/admin/campanas/plantillas-email/${o}`,{onSuccess:()=>{y.success("Plantilla eliminada exitosamente")},onError:()=>{y.error("Error al eliminar la plantilla")}})},z=o=>{x.post(`/admin/campanas/plantillas-email/${o.id}/preview`,{},{onSuccess:s=>{window.open(`data:text/html;charset=utf-8,${encodeURIComponent(s.html)}`,"_blank")}})},L=o=>new Date(o).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),U=o=>(o==null?void 0:o.length)||0;return(o,s)=>(r(),m(ma,{breadcrumbs:F},{default:e(()=>[t(a(M),{title:"Plantillas de Email"}),n("div",ya,[n("div",$a,[s[3]||(s[3]=n("div",null,[n("h1",{class:"text-3xl font-bold"},"Plantillas de Email"),n("p",{class:"text-muted-foreground mt-1"}," Gestiona las plantillas de correo electrónico para tus campañas ")],-1)),d.canCreate?(r(),m(a(C),{key:0,href:"/admin/campanas/plantillas-email/create",class:"inline-flex"},{default:e(()=>[t(a(v),null,{default:e(()=>[t(a(da),{class:"w-4 h-4 mr-2"}),s[2]||(s[2]=i(" Nueva Plantilla ",-1))]),_:1})]),_:1})):f("",!0)]),t(a(A),null,{default:e(()=>[t(a(K),null,{default:e(()=>[t(a(G),null,{default:e(()=>[...s[4]||(s[4]=[i("Filtros",-1)])]),_:1})]),_:1}),t(a(D),null,{default:e(()=>[n("div",ha,[n("div",Ca,[n("div",ka,[t(a(ua),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t(a(Q),{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=l=>h.value=l),placeholder:"Buscar por nombre, asunto o descripción...",class:"pl-10",onKeyup:q(w,["enter"])},null,8,["modelValue"])])]),t(a(R),{modelValue:g.value,"onUpdate:modelValue":[s[1]||(s[1]=l=>g.value=l),w]},{default:e(()=>[t(a(X),null,{default:e(()=>[t(a(J),{placeholder:"Estado"})]),_:1}),t(a(O),null,{default:e(()=>[t(a(k),{value:"all"},{default:e(()=>[...s[5]||(s[5]=[i("Todas",-1)])]),_:1}),t(a(k),{value:"1"},{default:e(()=>[...s[6]||(s[6]=[i("Activas",-1)])]),_:1}),t(a(k),{value:"0"},{default:e(()=>[...s[7]||(s[7]=[i("Inactivas",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(a(A),null,{default:e(()=>[t(a(D),{class:"p-0"},{default:e(()=>[t(a(W),null,{default:e(()=>[t(a(Y),null,{default:e(()=>[t(a(b),null,{default:e(()=>[t(a(_),null,{default:e(()=>[...s[8]||(s[8]=[i("Nombre",-1)])]),_:1}),t(a(_),null,{default:e(()=>[...s[9]||(s[9]=[i("Asunto",-1)])]),_:1}),t(a(_),null,{default:e(()=>[...s[10]||(s[10]=[i("Variables",-1)])]),_:1}),t(a(_),null,{default:e(()=>[...s[11]||(s[11]=[i("Campañas",-1)])]),_:1}),t(a(_),null,{default:e(()=>[...s[12]||(s[12]=[i("Estado",-1)])]),_:1}),t(a(_),null,{default:e(()=>[...s[13]||(s[13]=[i("Creado",-1)])]),_:1}),t(a(_),{class:"text-right"},{default:e(()=>[...s[14]||(s[14]=[i("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(a(Z),null,{default:e(()=>[(r(!0),p(V,null,P(d.plantillas.data,l=>(r(),m(a(b),{key:l.id},{default:e(()=>[t(a(c),{class:"font-medium"},{default:e(()=>[n("div",null,[n("div",ba,u(l.nombre),1),l.descripcion?(r(),p("div",wa,u(l.descripcion),1)):f("",!0)])]),_:2},1024),t(a(c),null,{default:e(()=>[n("div",Ea,[t(a(N),{class:"w-4 h-4 text-muted-foreground"}),n("span",Sa,u(l.asunto),1)])]),_:2},1024),t(a(c),null,{default:e(()=>[t(a(B),{variant:"secondary"},{default:e(()=>[i(u(U(l.variables_usadas))+" variables ",1)]),_:2},1024)]),_:2},1024),t(a(c),null,{default:e(()=>[l.campanas_count&&l.campanas_count>0?(r(),p("span",Va,u(l.campanas_count)+" campañas ",1)):(r(),p("span",Pa," Sin uso "))]),_:2},1024),t(a(c),null,{default:e(()=>[t(a(B),{variant:l.es_activa?"default":"secondary"},{default:e(()=>[l.es_activa?(r(),m(a(fa),{key:0,class:"w-3 h-3 mr-1"})):(r(),m(a(ca),{key:1,class:"w-3 h-3 mr-1"})),i(" "+u(l.es_activa?"Activa":"Inactiva"),1)]),_:2},1032,["variant"])]),_:2},1024),t(a(c),null,{default:e(()=>[n("div",Ba,[n("div",null,u(L(l.created_at)),1),l.creator?(r(),p("div",Aa,[t(a(pa),{class:"w-3 h-3"}),i(" "+u(l.creator.nombre),1)])):f("",!0)])]),_:2},1024),t(a(c),{class:"text-right"},{default:e(()=>[n("div",Da,[t(a(v),{variant:"ghost",size:"sm",onClick:E=>z(l),title:"Vista previa"},{default:e(()=>[t(a(_a),{class:"w-4 h-4"})]),_:1},8,["onClick"]),d.canEdit?(r(),m(a(v),{key:0,variant:"ghost",size:"sm",onClick:E=>T(l.id),title:"Duplicar"},{default:e(()=>[t(a(va),{class:"w-4 h-4"})]),_:1},8,["onClick"])):f("",!0),d.canEdit?(r(),m(a(C),{key:1,href:`/admin/campanas/plantillas-email/${l.id}/edit`},{default:e(()=>[t(a(v),{variant:"ghost",size:"sm",title:"Editar"},{default:e(()=>[t(a(ga),{class:"w-4 h-4"})]),_:1})]),_:1},8,["href"])):f("",!0),d.canDelete&&(!l.campanas_count||l.campanas_count===0)?(r(),m(a(aa),{key:2},{default:e(()=>[t(a(oa),{asChild:""},{default:e(()=>[t(a(v),{variant:"ghost",size:"sm",title:"Eliminar"},{default:e(()=>[t(a(xa),{class:"w-4 h-4 text-destructive"})]),_:1})]),_:1}),t(a(ta),null,{default:e(()=>[t(a(ea),null,{default:e(()=>[t(a(sa),null,{default:e(()=>[...s[15]||(s[15]=[i("¿Eliminar plantilla?",-1)])]),_:1}),t(a(la),null,{default:e(()=>[i(' Esta acción no se puede deshacer. La plantilla "'+u(l.nombre)+'" será eliminada permanentemente. ',1)]),_:2},1024)]),_:2},1024),t(a(ia),null,{default:e(()=>[t(a(na),null,{default:e(()=>[...s[16]||(s[16]=[i("Cancelar",-1)])]),_:1}),t(a(ra),{onClick:E=>j(l.id)},{default:e(()=>[...s[17]||(s[17]=[i(" Eliminar ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):f("",!0)])]),_:2},1024)]),_:2},1024))),128)),d.plantillas.data.length===0?(r(),m(a(b),{key:0},{default:e(()=>[t(a(c),{colspan:"7",class:"text-center py-8"},{default:e(()=>[n("div",Na,[t(a(N),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),s[18]||(s[18]=n("p",null,"No se encontraron plantillas de email",-1))])]),_:1})]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),d.plantillas.last_page>1?(r(),p("div",Fa,[n("nav",Ta,[(r(!0),p(V,null,P(d.plantillas.links,l=>(r(),m(a(C),{key:l.label,href:l.url||"#",class:H(["px-3 py-2 text-sm rounded-md",l.active?"bg-primary text-primary-foreground":"bg-background hover:bg-muted",!l.url&&"opacity-50 cursor-not-allowed"]),innerHTML:l.label},null,8,["href","class","innerHTML"]))),128))])])):f("",!0)])]),_:1}))}});export{Ut as default};
