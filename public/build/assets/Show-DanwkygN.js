import{_ as me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BvLJVOM7.js";import{r as j,s as E,d as Z,c as U,b as y,w as r,j as p,e as o,f as a,g as s,i as b,h as d,t as u,v as B,n as L,F as J,k as ee,m as n,p as fe,q as ye,x as pe}from"./app-DEzZOURC.js";import{a as T,b as V,c as S,_ as H}from"./CardTitle.vue_vue_type_script_setup_true_lang-BV0jufEp.js";import{_ as te}from"./CardDescription.vue_vue_type_script_setup_true_lang-DJSVYZ9o.js";import{_ as q}from"./createLucideIcon-DohhYgk8.js";import{_ as A}from"./index-CGvVJqrJ.js";import{_ as ae}from"./Progress.vue_vue_type_script_setup_true_lang-CwugpKb6.js";import{_ as ge,a as ve,b as M,c as N}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Dtn1MrxO.js";import{t as C}from"./index-Bg_w5wnj.js";import{E as xe}from"./EtiquetaDisplay-ChjZVGTq.js";import{E as he}from"./EtiquetaSelector-DcxkKQXW.js";import{_ as be}from"./ContratosList.vue_vue_type_script_setup_true_lang-BGqfxjYk.js";import{M as we,_ as Ee,B as $e,C as ke}from"./EvidenciasDisplay.vue_vue_type_script_setup_true_lang-_zRYtsD7.js";import{_ as qe,a as Ce}from"./ActivityLog.vue_vue_type_script_setup_true_lang-COFWPmv1.js";import{L as Se,H as He}from"./HitoCard-qj1lbpCt.js";import{T as K}from"./target-Cuz-3zut.js";import{P as R}from"./plus-CdUdhMYR.js";import{_ as De}from"./CamposPersonalizadosDisplay.vue_vue_type_script_setup_true_lang-GxxLxuMo.js";import{S as X}from"./square-pen-GzBA7ALY.js";import{T as Pe}from"./trash-2-DysbiyPA.js";import{I as Te}from"./info-BOZAvPGQ.js";import{F as Q}from"./file-text-C9zEytbd.js";import{I as Ve}from"./image-CaIoaABb.js";import{A as Be}from"./activity-CZZbR-bm.js";import{F as Ae}from"./flag-C_1jItes.js";import{C as W}from"./calendar-BXfqlLj_.js";import{C as je}from"./clock-ruu7WjdB.js";import{U as Y}from"./user-DMcVgmMs.js";import{C as Ie}from"./circle-check-big-BPLFu-6o.js";import{C as Me}from"./circle-play-jPhqFts-.js";import{C as Ne}from"./circle-alert-X6MccTox.js";import"./useFlashMessages-G6vUKqhK.js";import"./index-3U8T0bXN.js";import"./floating-ui.vue-CNVnrzQ6.js";import"./x-BdW0pKp0.js";import"./Input.vue_vue_type_script_setup_true_lang-COtV7FBT.js";import"./index-CGjeYSaZ.js";import"./index-DeH-pv-7.js";import"./shield-v_c_SioD.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C-bQk9Jr.js";import"./chevron-right-JEmf8ro0.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BMUbVDNN.js";import"./VisuallyHidden-C06NJWsc.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-9Y_chwli.js";import"./check-qeInYPZJ.js";import"./Label.vue_vue_type_script_setup_true_lang-D8RSzcrz.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CLIcw_SL.js";import"./map-pin-D2m82ToI.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-JnGW82kg.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BesUUdub.js";import"./chevrons-up-down-UYQpQvfE.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-j-QaoWjJ.js";import"./tag-07w5gLv3.js";import"./users-B1k3ML8c.js";import"./vote-BlmfRYVo.js";import"./folder-open-Z__awBRA.js";import"./send-FWm4ppT0.js";import"./briefcase-DKJLxWbX.js";import"./megaphone-DWuh18C-.js";import"./user-check-BqaVpK58.js";import"./clipboard-list-CNsoOyAw.js";import"./mail-66hbcDzv.js";import"./message-square-DR9MXgv_.js";import"./external-link-DCWmPvs0.js";import"./panel-left-DRNx9GZv.js";import"./index-Bzqze5Wq.js";import"./RovingFocusItem-YQXf-yKT.js";import"./utils-B_qebaiu.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BdtqPVCR.js";import"./layers-D9R7Urqz.js";import"./zap-CnNbrhkG.js";import"./trending-up-DcbtIApR.js";import"./award-yygE4PFB.js";import"./hash-BjB5j4e2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-g-qJ3P23.js";import"./search-XJkUiLir.js";import"./useKbd-kRIii9yh.js";import"./VisuallyHiddenInput-1pjXeyjz.js";import"./useEtiquetaHierarchy-BKRcUUfd.js";import"./list-CAsF1PeW.js";import"./tree-pine-uQ_sjD9l.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-bBsUfoYz.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-a-IEHQpo.js";import"./contratos-BiUTbrRP.js";import"./useToast-CqnsNTSk.js";import"./dollar-sign-Cb5gPrq7.js";import"./ellipsis-CFPbInfG.js";import"./eye-CZxFilWb.js";import"./download-_bMh8Bw-.js";import"./copy-DODrXV0N.js";import"./AccordionContent.vue_vue_type_script_setup_true_lang-0_ZoZIJi.js";import"./useArrowNavigation-B5rxJs06.js";import"./Textarea.vue_vue_type_script_setup_true_lang-BQy5wPa2.js";import"./filter-DtwJOhjo.js";import"./es-BDPlFIsO.js";import"./parseISO-DFjB8F03.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-DZaXhLaA.js";import"./calendar-days-DNiowSpF.js";import"./pen-YRGReXuv.js";function ze(){const e=j(!1),l=j(null);async function I(g,c){return e.value=!0,l.value=null,new Promise((x,w)=>{E.post(`/admin/proyectos/${g}/etiquetas`,{etiqueta_id:c},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,l.value=Object.values(h).join(", "),w(h)}})})}async function z(g,c){return e.value=!0,l.value=null,new Promise((x,w)=>{E.delete(`/admin/proyectos/${g}/etiquetas/${c}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,l.value="Error al quitar la etiqueta",w(h)}})})}async function k(g,c){return e.value=!0,l.value=null,new Promise((x,w)=>{E.put(`/admin/proyectos/${g}/etiquetas/sync`,{etiquetas:c},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,l.value="Error al sincronizar etiquetas",w(h)}})})}async function v(g){e.value=!0,l.value=null;try{const c=await fetch(`/admin/proyectos/${g}/etiquetas/suggest`);if(!c.ok)throw new Error("Error al obtener sugerencias");const x=await c.json();return e.value=!1,x.etiquetas||[]}catch(c){return e.value=!1,l.value="Error al obtener sugerencias de etiquetas",console.error(c),[]}}async function f(g){var c;e.value=!0,l.value=null;try{const x=await fetch("/admin/etiquetas",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:JSON.stringify(g)});if(!x.ok){const h=await x.json();throw new Error(h.message||"Error al crear etiqueta")}const w=await x.json();return e.value=!1,w.data}catch(x){return e.value=!1,l.value=x.message||"Error al crear etiqueta",console.error(x),null}}async function $(g){if(g.length<2)return[];try{const c=await fetch(`/admin/etiquetas/search?q=${encodeURIComponent(g)}`);if(!c.ok)throw new Error("Error al buscar etiquetas");return(await c.json()).data||[]}catch(c){return console.error("Error buscando etiquetas:",c),[]}}function D(g){const c=new Map;return g.forEach(x=>{var h;const w=((h=x.categoria)==null?void 0:h.nombre)||"Sin categoría";c.has(w)||c.set(w,[]),c.get(w).push(x)}),c}function G(g){var c;return g.color||((c=g.categoria)==null?void 0:c.color)||"gray"}function F(g,c=10){return g<c}async function O(g,c){return e.value=!0,l.value=null,new Promise((x,w)=>{E.post(`/admin/proyectos/${g}/etiquetas/reorder`,{etiquetas:c},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,l.value="Error al reordenar etiquetas",w(h)}})})}return{isLoading:e,error:l,addEtiquetaToProyecto:I,removeEtiquetaFromProyecto:z,syncEtiquetasProyecto:k,getSugerenciasEtiquetas:v,reorderEtiquetas:O,createEtiqueta:f,searchEtiquetas:$,groupEtiquetasByCategoria:D,getEtiquetaColor:G,canAddMoreEtiquetas:F}}const Fe={key:0,class:"flex items-center gap-2"},Le={key:0,class:"mb-6"},Ue={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},Re={class:"text-center"},Ge={class:"text-2xl font-bold"},Oe={class:"text-center"},_e={class:"text-2xl font-bold text-blue-500"},Je={class:"text-center"},Ke={class:"text-2xl font-bold text-green-500"},Xe={class:"text-center"},Qe={class:"space-y-2"},We={class:"flex justify-between items-center text-sm"},Ye={class:"font-medium"},Ze={key:1,class:"space-y-3"},et={key:2,class:"text-center py-6"},tt={class:"text-muted-foreground mb-3"},at=Z({__name:"HitosGrid",props:{hitos:{},proyectoId:{},proyectoNombre:{},estadisticas:{},showStats:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},showViewAll:{type:Boolean,default:!0},maxHitos:{default:void 0},canCreate:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},emptyMessage:{default:"No hay hitos definidos para este proyecto"}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables"],setup(e){const l=e,I=U(()=>l.maxHitos&&l.maxHitos>0?l.hitos.slice(0,l.maxHitos):l.hitos),z=U(()=>l.maxHitos&&l.hitos.length>l.maxHitos);return(k,v)=>(n(),y(a(H),null,{default:r(()=>[e.showHeader?(n(),y(a(T),{key:0,class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s("div",null,[o(a(V),{class:"flex items-center gap-2"},{default:r(()=>[o(a(K),{class:"h-5 w-5"}),v[0]||(v[0]=d(" Hitos y Entregables ",-1))]),_:1}),e.proyectoNombre?(n(),y(a(te),{key:0},{default:r(()=>[d(u(e.proyectoNombre),1)]),_:1})):p("",!0)]),e.showActions?(n(),b("div",Fe,[e.showViewAll&&e.hitos.length>0?(n(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos`},{default:r(()=>[o(a(q),{variant:"outline",size:"sm"},{default:r(()=>[o(a(Se),{class:"h-4 w-4 mr-2"}),v[1]||(v[1]=d(" Ver Todos ",-1))]),_:1})]),_:1},8,["href"])):p("",!0),e.canCreate?(n(),y(a(B),{key:1,href:`/admin/proyectos/${e.proyectoId}/hitos/create`},{default:r(()=>[o(a(q),{size:"sm"},{default:r(()=>[o(a(R),{class:"h-4 w-4 mr-2"}),v[2]||(v[2]=d(" Nuevo Hito ",-1))]),_:1})]),_:1},8,["href"])):p("",!0)])):p("",!0)]),_:1})):p("",!0),o(a(S),null,{default:r(()=>[e.showStats&&e.estadisticas&&e.estadisticas.total>0?(n(),b("div",Le,[s("div",Ue,[s("div",Re,[s("p",Ge,u(e.estadisticas.total),1),v[3]||(v[3]=s("p",{class:"text-xs text-muted-foreground"},"Total Hitos",-1))]),s("div",Oe,[s("p",_e,u(e.estadisticas.en_progreso),1),v[4]||(v[4]=s("p",{class:"text-xs text-muted-foreground"},"En Progreso",-1))]),s("div",Je,[s("p",Ke,u(e.estadisticas.completados),1),v[5]||(v[5]=s("p",{class:"text-xs text-muted-foreground"},"Completados",-1))]),s("div",Xe,[s("p",{class:L(["text-2xl font-bold",{"text-red-500":e.estadisticas.vencidos>0}])},u(e.estadisticas.vencidos),3),v[6]||(v[6]=s("p",{class:"text-xs text-muted-foreground"},"Vencidos",-1))])]),s("div",Qe,[s("div",We,[v[7]||(v[7]=s("span",{class:"text-muted-foreground"},"Progreso General",-1)),s("span",Ye,u(e.estadisticas.progreso_general)+"%",1)]),o(a(ae),{value:e.estadisticas.progreso_general,class:"h-2"},null,8,["value"])])])):p("",!0),e.hitos.length>0?(n(),b("div",Ze,[(n(!0),b(J,null,ee(I.value,f=>(n(),y(He,{key:f.id,hito:f,canEdit:e.canEdit,canDelete:e.canDelete,canManageDeliverables:e.canManageDeliverables,showActions:!0,compact:!0,onView:$=>k.$emit("view",f),onEdit:$=>k.$emit("edit",f),onDelete:$=>k.$emit("delete",f),onDuplicate:$=>k.$emit("duplicate",f),onAddEntregable:$=>k.$emit("add-entregable",f),onViewEntregables:$=>k.$emit("view-entregables",f)},null,8,["hito","canEdit","canDelete","canManageDeliverables","onView","onEdit","onDelete","onDuplicate","onAddEntregable","onViewEntregables"]))),128)),z.value?(n(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos`,class:"block text-center mt-4 text-sm text-primary hover:underline"},{default:r(()=>[d(" Ver todos los hitos ("+u(e.hitos.length)+") ",1)]),_:1},8,["href"])):p("",!0)])):(n(),b("div",et,[o(a(K),{class:"h-10 w-10 mx-auto text-muted-foreground mb-3"}),s("p",tt,u(e.emptyMessage),1),e.canCreate?(n(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos/create`},{default:r(()=>[o(a(q),{variant:"outline",size:"sm"},{default:r(()=>[o(a(R),{class:"h-4 w-4 mr-2"}),v[8]||(v[8]=d(" Crear Primer Hito ",-1))]),_:1})]),_:1},8,["href"])):p("",!0)]))]),_:1})]),_:1}))}}),ot={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},st={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},rt={class:"text-2xl font-bold text-gray-900 dark:text-white"},it={key:0,class:"mt-2 text-gray-600 dark:text-gray-400"},lt={class:"flex gap-2"},nt={class:"flex items-center justify-between"},ct={class:"flex items-center gap-3"},dt={class:"flex items-center gap-3"},ut={class:"space-y-2"},mt={class:"flex justify-between text-sm"},ft={class:"font-medium"},yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2"},pt={class:"flex items-start gap-3"},gt={class:"font-medium"},vt={class:"text-xs text-gray-500"},xt={key:0,class:"flex items-start gap-3"},ht={class:"font-medium"},bt={class:"text-xs text-gray-500"},wt={key:0,class:"flex items-center gap-3 pt-2"},Et={class:"font-medium ml-2"},$t={key:0},kt={key:1,class:"text-sm text-muted-foreground"},qt={key:1,class:"space-y-4"},Ct={class:"flex gap-2"},St={key:0,class:"flex items-center gap-3"},Ht={class:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},Dt={class:"font-medium"},Pt={class:"text-sm text-gray-500"},Tt={key:1,class:"text-gray-500"},Vt={class:"font-mono"},Bt={class:"font-medium"},At={class:"text-sm"},jt={class:"text-sm"},It={class:"space-y-3"},Mt={class:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},Nt={class:"flex-1"},zt={class:"text-sm"},Ft={class:"font-medium"},Lt={class:"text-xs text-gray-500 mt-1"},Ut={key:0,class:"flex justify-end"},Rt={class:"space-y-4"},Gt={class:"text-center"},No=Z({__name:"Show",props:{proyecto:{},categorias:{},activities:{},usuariosActividades:{},authPermissions:{},totales:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageTags:{type:Boolean},canViewContracts:{type:Boolean},canCreateContracts:{type:Boolean},canViewHitos:{type:Boolean},canCreateHitos:{type:Boolean},canEditHitos:{type:Boolean},canDeleteHitos:{type:Boolean},canManageEntregables:{type:Boolean},estadisticasHitos:{}},setup(e){const l=e,I=["general","contratos","hitos","evidencias","actividad"],k=j((()=>{const t=new URLSearchParams(window.location.search).get("tab");return t&&I.includes(t)?t:"general"})());fe(k,i=>{const t=`/admin/proyectos/${l.proyecto.id}?tab=${i}`;E.get(t,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const v=U(()=>{var i,t;return((i=l.authPermissions)==null?void 0:i.includes("evidencias.aprobar"))||((t=l.authPermissions)==null?void 0:t.includes("evidencias.rechazar"))||!1}),f=j({usuario_id:null,tipo_entidad:null,tipo_accion:null,fecha_inicio:null,fecha_fin:null}),$=j(!1),D=j([]),{syncEtiquetasProyecto:G,isLoading:F}=ze();l.proyecto.etiquetas&&(D.value=l.proyecto.etiquetas.map(i=>i.id));const O=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:l.proyecto.nombre,href:`/admin/proyectos/${l.proyecto.id}`}],g=()=>{confirm(`¿Estás seguro de eliminar el proyecto "${l.proyecto.nombre}"?`)&&E.delete(`/admin/proyectos/${l.proyecto.id}`,{onSuccess:()=>{C.success("Proyecto eliminado exitosamente")},onError:()=>{C.error("Error al eliminar el proyecto")}})},c=i=>({planificacion:K,en_progreso:Me,pausado:ke,completado:Ie,cancelado:$e})[i]||Ne,x=i=>({planificacion:"bg-blue-100 text-blue-800",en_progreso:"bg-yellow-100 text-yellow-800",pausado:"bg-orange-100 text-orange-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",w=i=>({baja:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",critica:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",h=i=>new Date(i).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),_=i=>{const t=Math.floor((new Date(i).getTime()-new Date().getTime())/864e5);return t===0?"Hoy":t===1?"Mañana":t===-1?"Ayer":t>0?`En ${t} días`:`Hace ${Math.abs(t)} días`},oe=async()=>{try{await G(l.proyecto.id,D.value),$.value=!1,C.success("Etiquetas actualizadas exitosamente"),E.reload({only:["proyecto"]})}catch{C.error("Error al actualizar las etiquetas")}},se=()=>{var i;D.value=((i=l.proyecto.etiquetas)==null?void 0:i.map(t=>t.id))||[],$.value=!1},re=i=>{E.visit(`/admin/proyectos/${l.proyecto.id}/hitos/${i.id}`)},ie=i=>{E.visit(`/admin/proyectos/${l.proyecto.id}/hitos/${i.id}/edit`)},le=i=>{confirm(`¿Estás seguro de eliminar el hito "${i.nombre}"? Se eliminarán también todos sus entregables.`)&&E.delete(`/admin/proyectos/${l.proyecto.id}/hitos/${i.id}`,{onSuccess:()=>{C.success("Hito eliminado exitosamente"),E.reload({only:["proyecto"]})},onError:()=>{C.error("Error al eliminar el hito")}})},ne=i=>{E.post(`/admin/proyectos/${l.proyecto.id}/hitos/${i.id}/duplicar`,{},{onSuccess:()=>{C.success("Hito duplicado exitosamente"),E.reload({only:["proyecto"]})},onError:()=>{C.error("Error al duplicar el hito")}})},ce=i=>{E.visit(`/admin/proyectos/${l.proyecto.id}/hitos/${i.id}/entregables/create`)},de=i=>{E.visit(`/admin/proyectos/${l.proyecto.id}/hitos/${i.id}/entregables`)},ue=U(()=>{let i=l.activities||[];return f.value.usuario_id&&(i=i.filter(t=>{var m;return((m=t.causer)==null?void 0:m.id)===f.value.usuario_id})),f.value.tipo_entidad&&(i=i.filter(t=>t.subject_type===f.value.tipo_entidad)),f.value.tipo_accion&&(i=i.filter(t=>t.event===f.value.tipo_accion)),(f.value.fecha_inicio||f.value.fecha_fin)&&(i=i.filter(t=>{const m=new Date(t.created_at);if(f.value.fecha_inicio){const P=new Date(f.value.fecha_inicio);if(m<P)return!1}if(f.value.fecha_fin){const P=new Date(f.value.fecha_fin);if(P.setHours(23,59,59,999),m>P)return!1}return!0})),i});return(i,t)=>(n(),b(J,null,[o(a(ye),{title:`Proyecto: ${e.proyecto.nombre}`},null,8,["title"]),o(me,{breadcrumbs:O},{default:r(()=>[s("div",ot,[s("div",st,[s("div",null,[s("h1",rt,u(e.proyecto.nombre),1),e.proyecto.descripcion?(n(),b("p",it,u(e.proyecto.descripcion),1)):p("",!0)]),s("div",lt,[e.canEdit?(n(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyecto.id}/edit`},{default:r(()=>[o(a(q),null,{default:r(()=>[o(a(X),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=d(" Editar ",-1))]),_:1})]),_:1},8,["href"])):p("",!0),e.canDelete?(n(),y(a(q),{key:1,variant:"destructive",onClick:g},{default:r(()=>[o(a(Pe),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=d(" Eliminar ",-1))]),_:1})):p("",!0)])]),o(a(ge),{modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=m=>k.value=m),class:"w-full"},{default:r(()=>[o(a(ve),{class:"grid w-full grid-cols-5"},{default:r(()=>[o(a(M),{value:"general"},{default:r(()=>[o(a(Te),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=d(" General ",-1))]),_:1}),o(a(M),{value:"contratos"},{default:r(()=>{var m;return[o(a(Q),{class:"mr-2 h-4 w-4"}),t[7]||(t[7]=d(" Contratos ",-1)),(m=e.totales)!=null&&m.contratos?(n(),y(a(A),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:r(()=>[d(u(e.totales.contratos),1)]),_:1})):p("",!0)]}),_:1}),o(a(M),{value:"hitos"},{default:r(()=>{var m;return[o(a(we),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=d(" Hitos y Entregables ",-1)),(m=e.totales)!=null&&m.hitos?(n(),y(a(A),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:r(()=>[d(u(e.totales.hitos),1)]),_:1})):p("",!0)]}),_:1}),o(a(M),{value:"evidencias"},{default:r(()=>{var m;return[o(a(Ve),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=d(" Evidencias ",-1)),(m=e.totales)!=null&&m.evidencias?(n(),y(a(A),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:r(()=>[d(u(e.totales.evidencias),1)]),_:1})):p("",!0)]}),_:1}),o(a(M),{value:"actividad"},{default:r(()=>[o(a(Be),{class:"mr-2 h-4 w-4"}),t[10]||(t[10]=d(" Actividad ",-1))]),_:1})]),_:1}),o(a(N),{value:"general",class:"space-y-4 mt-6"},{default:r(()=>[o(a(H),null,{default:r(()=>[o(a(T),null,{default:r(()=>[o(a(V),null,{default:r(()=>[...t[11]||(t[11]=[d("Estado del Proyecto",-1)])]),_:1})]),_:1}),o(a(S),{class:"space-y-4"},{default:r(()=>[s("div",nt,[s("div",ct,[(n(),y(pe(c(e.proyecto.estado)),{class:"h-5 w-5 text-gray-500"})),t[12]||(t[12]=s("span",{class:"font-medium"},"Estado:",-1)),o(a(A),{class:L(x(e.proyecto.estado))},{default:r(()=>[d(u(e.proyecto.estado_label),1)]),_:1},8,["class"])]),s("div",dt,[o(a(Ae),{class:"h-5 w-5 text-gray-500"}),t[13]||(t[13]=s("span",{class:"font-medium"},"Prioridad:",-1)),o(a(A),{class:L(w(e.proyecto.prioridad))},{default:r(()=>[d(u(e.proyecto.prioridad_label),1)]),_:1},8,["class"])])]),s("div",ut,[s("div",mt,[t[14]||(t[14]=s("span",{class:"text-gray-600 dark:text-gray-400"},"Progreso",-1)),s("span",ft,u(e.proyecto.porcentaje_completado)+"%",1)]),o(a(ae),{"model-value":e.proyecto.porcentaje_completado,class:"h-2"},null,8,["model-value"])]),s("div",yt,[s("div",pt,[o(a(W),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[t[15]||(t[15]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Fecha de inicio",-1)),s("p",gt,u(h(e.proyecto.fecha_inicio)),1),s("p",vt,u(_(e.proyecto.fecha_inicio)),1)])]),e.proyecto.fecha_fin?(n(),b("div",xt,[o(a(W),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[t[16]||(t[16]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Fecha de fin",-1)),s("p",ht,u(h(e.proyecto.fecha_fin)),1),s("p",bt,u(_(e.proyecto.fecha_fin)),1)])])):p("",!0)]),e.proyecto.duracion_dias?(n(),b("div",wt,[o(a(je),{class:"h-5 w-5 text-gray-500"}),s("div",null,[t[17]||(t[17]=s("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Duración total:",-1)),s("span",Et,u(e.proyecto.duracion_dias)+" días",1)])])):p("",!0)]),_:1})]),_:1}),o(a(H),null,{default:r(()=>[o(a(T),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[o(a(V),null,{default:r(()=>[...t[18]||(t[18]=[d(" Etiquetas ",-1)])]),_:1}),e.canManageTags&&!$.value?(n(),y(a(q),{key:0,variant:"ghost",size:"sm",onClick:t[0]||(t[0]=m=>$.value=!0)},{default:r(()=>[o(a(X),{class:"mr-1 h-4 w-4"}),t[19]||(t[19]=d(" Editar ",-1))]),_:1})):p("",!0)]),_:1}),o(a(S),null,{default:r(()=>[$.value?(n(),b("div",qt,[e.categorias?(n(),y(he,{key:0,modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=m=>D.value=m),categorias:e.categorias,"max-etiquetas":10,placeholder:"Seleccionar etiquetas...",description:"Selecciona hasta 10 etiquetas para este proyecto"},null,8,["modelValue","categorias"])):p("",!0),s("div",Ct,[o(a(q),{size:"sm",onClick:oe,disabled:a(F)},{default:r(()=>[...t[20]||(t[20]=[d(" Guardar ",-1)])]),_:1},8,["disabled"]),o(a(q),{size:"sm",variant:"outline",onClick:se,disabled:a(F)},{default:r(()=>[...t[21]||(t[21]=[d(" Cancelar ",-1)])]),_:1},8,["disabled"])])])):(n(),b("div",$t,[e.proyecto.etiquetas&&e.proyecto.etiquetas.length>0?(n(),y(xe,{key:0,etiquetas:e.proyecto.etiquetas,"show-categoria":!0,interactive:!0,size:"md"},null,8,["etiquetas"])):(n(),b("p",kt," No hay etiquetas asignadas "))]))]),_:1})]),_:1}),e.proyecto.campos_personalizados&&e.proyecto.campos_personalizados.length>0?(n(),y(De,{key:0,valores:e.proyecto.campos_personalizados},null,8,["valores"])):p("",!0),o(a(H),null,{default:r(()=>[o(a(T),null,{default:r(()=>[o(a(V),null,{default:r(()=>[...t[22]||(t[22]=[d("Responsable",-1)])]),_:1})]),_:1}),o(a(S),null,{default:r(()=>[e.proyecto.responsable?(n(),b("div",St,[s("div",Ht,[o(a(Y),{class:"h-5 w-5 text-gray-500"})]),s("div",null,[s("p",Dt,u(e.proyecto.responsable.name),1),s("p",Pt,u(e.proyecto.responsable.email),1)])])):(n(),b("p",Tt,"Sin asignar"))]),_:1})]),_:1}),o(a(H),null,{default:r(()=>[o(a(T),null,{default:r(()=>[o(a(V),null,{default:r(()=>[...t[23]||(t[23]=[d("Información del Sistema",-1)])]),_:1})]),_:1}),o(a(S),{class:"space-y-3"},{default:r(()=>{var m;return[s("div",null,[t[24]||(t[24]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"ID del Proyecto",-1)),s("p",Vt,"#"+u(e.proyecto.id),1)]),s("div",null,[t[25]||(t[25]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Estado",-1)),o(a(A),{class:L(e.proyecto.activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")},{default:r(()=>[d(u(e.proyecto.activo?"Activo":"Inactivo"),1)]),_:1},8,["class"])]),s("div",null,[t[26]||(t[26]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Creado por",-1)),s("p",Bt,u(((m=e.proyecto.creador)==null?void 0:m.name)||"Sistema"),1)]),s("div",null,[t[27]||(t[27]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Fecha de creación",-1)),s("p",At,u(h(e.proyecto.created_at)),1)]),s("div",null,[t[28]||(t[28]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Última actualización",-1)),s("p",jt,u(h(e.proyecto.updated_at)),1)])]}),_:1})]),_:1}),e.proyecto.activities&&e.proyecto.activities.length>0?(n(),y(a(H),{key:1},{default:r(()=>[o(a(T),null,{default:r(()=>[o(a(V),null,{default:r(()=>[...t[29]||(t[29]=[d("Actividad Reciente",-1)])]),_:1})]),_:1}),o(a(S),null,{default:r(()=>[s("div",It,[(n(!0),b(J,null,ee(e.proyecto.activities,m=>{var P;return n(),b("div",{key:m.id,class:"flex items-start gap-3 pb-3 border-b last:border-b-0"},[s("div",Mt,[o(a(Y),{class:"h-4 w-4 text-gray-500"})]),s("div",Nt,[s("p",zt,[s("span",Ft,u(((P=m.causer)==null?void 0:P.name)||"Sistema"),1),d(" "+u(m.description),1)]),s("p",Lt,u(_(m.created_at)),1)])])}),128))])]),_:1})]),_:1})):p("",!0)]),_:1}),o(a(N),{value:"contratos",class:"space-y-4 mt-6"},{default:r(()=>[e.canCreateContracts?(n(),b("div",Ut,[o(a(B),{href:`/admin/contratos/create?proyecto_id=${e.proyecto.id}`},{default:r(()=>[o(a(q),null,{default:r(()=>[o(a(R),{class:"mr-2 h-4 w-4"}),t[30]||(t[30]=d(" Nuevo Contrato ",-1))]),_:1})]),_:1},8,["href"])])):p("",!0),e.proyecto.contratos&&e.proyecto.contratos.length>0?(n(),y(a(H),{key:1},{default:r(()=>[o(a(T),null,{default:r(()=>[o(a(V),null,{default:r(()=>[...t[31]||(t[31]=[d("Contratos del Proyecto",-1)])]),_:1}),o(a(te),null,{default:r(()=>[...t[32]||(t[32]=[d(" Lista de contratos asociados a este proyecto ",-1)])]),_:1})]),_:1}),o(a(S),null,{default:r(()=>[s("div",Rt,[o(be,{contratos:e.proyecto.contratos,"show-proyecto":!1,"show-actions":!0,"actions-style":"buttons"},null,8,["contratos"])])]),_:1})]),_:1})):(n(),y(a(H),{key:2},{default:r(()=>[o(a(S),{class:"py-8"},{default:r(()=>[s("div",Gt,[o(a(Q),{class:"mx-auto h-12 w-12 text-gray-400"}),t[34]||(t[34]=s("p",{class:"mt-2 text-sm text-gray-600"},"No hay contratos asociados",-1)),e.canCreateContracts?(n(),y(a(B),{key:0,href:`/admin/contratos/create?proyecto_id=${e.proyecto.id}`,class:"mt-4 inline-block"},{default:r(()=>[o(a(q),{variant:"outline"},{default:r(()=>[o(a(R),{class:"mr-2 h-4 w-4"}),t[33]||(t[33]=d(" Crear primer contrato ",-1))]),_:1})]),_:1},8,["href"])):p("",!0)])]),_:1})]),_:1}))]),_:1}),o(a(N),{value:"hitos",class:"space-y-4 mt-6"},{default:r(()=>[e.canViewHitos?(n(),y(at,{key:0,hitos:e.proyecto.hitos||[],"proyecto-id":e.proyecto.id,estadisticas:e.estadisticasHitos,"show-stats":!0,"show-header":!0,"show-actions":!0,"show-view-all":!0,"can-create":e.canCreateHitos,"can-edit":e.canEditHitos,"can-delete":e.canDeleteHitos,"can-manage-deliverables":e.canManageEntregables,"empty-message":"No hay hitos definidos para este proyecto",onView:re,onEdit:ie,onDelete:le,onDuplicate:ne,onAddEntregable:ce,onViewEntregables:de},null,8,["hitos","proyecto-id","estadisticas","can-create","can-edit","can-delete","can-manage-deliverables"])):p("",!0)]),_:1}),o(a(N),{value:"evidencias",class:"space-y-4 mt-6"},{default:r(()=>[o(Ee,{contratos:e.proyecto.contratos||[],"proyecto-id":e.proyecto.id,modo:"admin","puede-gestionar-estado":v.value,"format-date":h},null,8,["contratos","proyecto-id","puede-gestionar-estado"])]),_:1}),o(a(N),{value:"actividad",class:"space-y-4 mt-6"},{default:r(()=>[e.activities&&e.activities.length>0?(n(),y(qe,{key:0,modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=m=>f.value=m),usuarios:e.usuariosActividades,"context-level":"proyecto"},null,8,["modelValue","usuarios"])):p("",!0),o(Ce,{activities:ue.value,title:"Historial de Actividad",description:"Registro completo de cambios y eventos del proyecto, hitos y entregables","empty-message":"No hay actividad registrada"},null,8,["activities"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{No as default};
