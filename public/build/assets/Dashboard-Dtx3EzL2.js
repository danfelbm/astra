import{_ as S}from"./index-BUYdAh09.js";import{_ as h}from"./createLucideIcon-BC_5gguO.js";import{_ as m,c as f,a as w,b as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-DHl4MrSq.js";import{_ as G}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-Bsd9FViO.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-BhD_DfTO.js";import{d as X,k as J,c as C,a as _,o as l,b as t,u as a,m as K,e as o,f as s,j as c,i as n,t as u,n as z,l as $,g as d,P as q,F as Q}from"./app-C6dFmb6Y.js";import{P}from"./plus-DyqHlNb8.js";import{C as D}from"./circle-alert-CpwvER2_.js";import{S as k}from"./square-pen-BmAdbxIs.js";import{C as M}from"./clock-B7_1q9Hf.js";import{C as N}from"./circle-x-BSVCF2_x.js";import{C as I}from"./circle-check-big-FDuSNaAR.js";import{M as W}from"./message-square-DfhQEUsX.js";import{U as T}from"./user-DM157abL.js";import{H as Y}from"./history-Bc5PoY6F.js";import{l as Z,C as aa}from"./SelectValue.vue_vue_type_script_setup_true_lang-DW8n8Llx.js";import"./index-CHVIMObx.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Dm8q9HNQ.js";import"./index-DR2L5NUQ.js";import"./check-DUjLMv1M.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BNPDwlne.js";import"./VisuallyHidden-DPRAAmXh.js";import"./Input.vue_vue_type_script_setup_true_lang-CQ5Z9ZVT.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-Bnrtw1L5.js";import"./eye-C_Z20kfS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CDKZ0n1J.js";import"./Label.vue_vue_type_script_setup_true_lang-CZN-JwC7.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B5vP6ukB.js";import"./users-CZmocKxL.js";import"./index-AYmZnATJ.js";import"./briefcase-BgleaTrU.js";import"./calendar-Co_fIHE6.js";import"./map-pin-raP53Onp.js";const ea={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ta={class:"flex items-start gap-3"},sa={class:"flex-1"},ra={class:"font-semibold text-lg mb-2 text-yellow-800 dark:text-yellow-200"},oa={class:"text-yellow-700 dark:text-yellow-300 whitespace-pre-wrap"},ia={class:"flex flex-col sm:flex-row sm:items-center gap-4"},da={class:"flex items-center gap-4 flex-1"},la={class:"flex-1"},na={class:"text-xl font-semibold mb-1"},ua={key:0,class:"text-muted-foreground mb-1"},ca={class:"text-muted-foreground mb-2"},ma={key:1,class:"flex items-center gap-2 flex-wrap"},fa={key:0,class:"w-full sm:w-auto"},pa=["innerHTML"],ba={key:2},xa={class:"grid gap-4 md:grid-cols-3"},va={class:"flex items-center gap-2"},_a={class:"flex items-center gap-2"},ga={class:"flex items-center gap-2"},ha={class:"flex items-center gap-2"},wa={class:"text-xs text-muted-foreground"},ya={class:"text-xs text-muted-foreground"},Ca={class:"flex gap-1"},re=X({__name:"Dashboard",props:{candidatura:{},configuracion:{},bloqueo:{}},setup(V){const i=V,A=[{title:"Dashboard",href:"/dashboard"},{title:"Mi Candidatura",href:"#"}],p=J(!1),b=C(()=>!!i.candidatura),B=C(()=>{if(!i.candidatura)return P;switch(i.candidatura.estado){case"aprobado":return I;case"rechazado":return N;case"pendiente":return M;case"borrador":return k;default:return D}}),H=C(()=>{if(!i.candidatura)return"text-blue-600";switch(i.candidatura.estado){case"aprobado":return"text-green-600";case"rechazado":return"text-red-600";case"pendiente":return"text-blue-600";case"borrador":return"text-yellow-600";default:return"text-gray-600"}}),g=C(()=>{if(!i.candidatura)return i.bloqueo.activo?null:{text:"Crear Perfil de Candidatura",href:"/candidaturas/create",icon:P,description:"Completa tu perfil para poder postularte a convocatorias"};if(i.candidatura.puede_editar){let r="Editar Candidatura",e="Completa o actualiza la información de tu candidatura";return i.candidatura.estado==="borrador"&&i.bloqueo.activo&&i.candidatura.subsanar?e="Tu candidatura ha sido habilitada para subsanación. Puedes editarla aunque el sistema esté bloqueado.":i.candidatura.estado==="rechazado"?e="Corrige los aspectos señalados y reenvía tu candidatura":i.candidatura.estado==="aprobado"?(r="Editar Campos Permitidos",e="Solo puedes editar campos marcados como editables. Los cambios requerirán nueva aprobación."):i.candidatura.tiene_datos||(r="Completar Candidatura"),{text:r,href:`/candidaturas/${i.candidatura.id}/edit`,icon:k,description:e}}return null}),L=r=>{if(!r)return"Fecha no disponible";try{const e=new Date(r);if(isNaN(e.getTime())){const x=r.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})/);if(x){const[,v,F,j,U,O]=x,E=new Date(parseInt(j),parseInt(F)-1,parseInt(v),parseInt(U),parseInt(O));if(!isNaN(E.getTime()))return E.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return r}return e.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error al formatear fecha:",e),r||"Fecha no disponible"}};return(r,e)=>(l(),_(Q,null,[t(a(K),{title:"Mi Candidatura"}),t(R,{breadcrumbs:A},{default:o(()=>{var x;return[s("div",ea,[e[15]||(e[15]=s("div",{class:"flex items-center justify-between"},[s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Gestiona tu perfil de candidatura para participar en convocatorias ")])],-1)),r.bloqueo.activo&&(!r.candidatura||r.candidatura.estado==="borrador"&&!r.candidatura.subsanar)?(l(),c(a(m),{key:0,class:"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-950/20"},{default:o(()=>[t(a(f),{class:"p-6"},{default:o(()=>[s("div",ta,[t(a(D),{class:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-0.5"}),s("div",sa,[s("h3",ra,u(r.bloqueo.titulo),1),s("p",oa,u(r.bloqueo.mensaje),1)])])]),_:1})]),_:1})):n("",!0),t(a(m),{class:"border-2"},{default:o(()=>[t(a(f),{class:"p-6"},{default:o(()=>{var v;return[s("div",ia,[s("div",da,[s("div",{class:z([H.value,"p-3 rounded-full bg-opacity-10 flex-shrink-0"])},[(l(),c($(B.value),{class:"h-8 w-8"}))],2),s("div",la,[s("h3",na,u(b.value?r.candidatura.estado==="pendiente"?"Candidatura enviada":r.candidatura.estado_label:"Sin Candidatura"),1),((v=r.candidatura)==null?void 0:v.estado)==="pendiente"?(l(),_("p",ua," Tu Candidatura ahora está pendiente de revisión ")):n("",!0),s("p",ca,u(b.value?`Versión ${r.candidatura.version} - Actualizada el ${L(r.candidatura.updated_at)}`:"Aún no has creado tu perfil de candidatura"),1),b.value?(l(),_("div",ma,[t(a(S),{class:z(r.candidatura.estado_color)},{default:o(()=>[d(u(r.candidatura.estado_label),1)]),_:1},8,["class"]),r.candidatura.tiene_datos?n("",!0):(l(),c(a(S),{key:0,variant:"outline",class:"bg-yellow-50 text-yellow-700"},{default:o(()=>e[1]||(e[1]=[d(" Incompleto ")])),_:1}))])):n("",!0)])]),g.value?(l(),_("div",fa,[t(a(q),{href:g.value.href,class:"block"},{default:o(()=>[t(a(h),{class:"w-full sm:w-auto"},{default:o(()=>[(l(),c($(g.value.icon),{class:"mr-2 h-4 w-4"})),d(" "+u(g.value.text),1)]),_:1})]),_:1},8,["href"])])):n("",!0)])]}),_:1})]),_:1}),(x=r.candidatura)!=null&&x.comentarios_admin?(l(),c(a(m),{key:1,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:o(()=>[t(a(w),null,{default:o(()=>[t(a(y),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:o(()=>[t(a(W),{class:"h-5 w-5"}),e[2]||(e[2]=d(" Comentarios de la comisión "))]),_:1})]),_:1}),t(a(f),null,{default:o(()=>[s("div",{class:"text-blue-700 dark:text-blue-300 prose prose-sm max-w-none",innerHTML:r.candidatura.comentarios_admin},null,8,pa)]),_:1})]),_:1})):n("",!0),b.value&&p.value?(l(),_("div",ba,[t(G,{"candidatura-id":r.candidatura.id,"version-actual":r.candidatura.version},null,8,["candidatura-id","version-actual"])])):n("",!0),s("div",xa,[t(a(m),{class:"h-fit"},{default:o(()=>[t(a(w),{class:"pb-3"},{default:o(()=>[t(a(y),{class:"text-base flex items-center gap-2"},{default:o(()=>[t(a(T),{class:"h-4 w-4"}),e[3]||(e[3]=d(" Estados "))]),_:1}),e[4]||(e[4]=s("p",{class:"text-xs text-muted-foreground mt-1"},"Este es el listado de posibles estados:",-1))]),_:1}),t(a(f),{class:"space-y-2"},{default:o(()=>[s("div",va,[t(a(k),{class:"h-3 w-3 text-yellow-600"}),e[5]||(e[5]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Borrador:"),d(" editable dentro de tiempos de subsanación")],-1))]),s("div",_a,[t(a(M),{class:"h-3 w-3 text-blue-600"}),e[6]||(e[6]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Pendiente:"),d(" En revisión")],-1))]),s("div",ga,[t(a(I),{class:"h-3 w-3 text-green-600"}),e[7]||(e[7]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Aprobado:"),d(" Listo")],-1))]),s("div",ha,[t(a(N),{class:"h-3 w-3 text-red-600"}),e[8]||(e[8]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Rechazado:"),d(" solicitar revision a comité de garantías")],-1))])]),_:1})]),_:1}),t(a(m),{class:"h-fit"},{default:o(()=>[t(a(w),{class:"pb-3"},{default:o(()=>[t(a(y),{class:"text-base flex items-center gap-2"},{default:o(()=>[t(a(D),{class:"h-4 w-4"}),e[9]||(e[9]=d(" Configuración "))]),_:1})]),_:1}),t(a(f),{class:"space-y-2"},{default:o(()=>[s("div",null,[e[10]||(e[10]=s("p",{class:"text-xs font-medium"},"Campos:",-1)),s("p",wa,u(r.configuracion.resumen),1)]),s("div",null,[e[11]||(e[11]=s("p",{class:"text-xs font-medium"},"Versión:",-1)),s("p",ya,"v"+u(r.configuracion.version),1)])]),_:1})]),_:1}),b.value?(l(),c(a(m),{key:0,class:"h-fit"},{default:o(()=>[t(a(w),{class:"pb-3"},{default:o(()=>[t(a(y),{class:"text-base"},{default:o(()=>e[12]||(e[12]=[d("Acciones")])),_:1})]),_:1}),t(a(f),{class:"space-y-2"},{default:o(()=>[t(a(h),{onClick:e[0]||(e[0]=v=>p.value=!p.value),variant:"outline",class:"w-full"},{default:o(()=>[t(a(Y),{class:"mr-2 h-4 w-4"}),d(" "+u(p.value?"Ocultar":"Mostrar")+" Historial ",1),(l(),c($(p.value?a(Z):a(aa)),{class:"ml-auto h-4 w-4"}))]),_:1}),s("div",Ca,[t(a(q),{href:`/candidaturas/${r.candidatura.id}`},{default:o(()=>[t(a(h),{variant:"outline",size:"sm"},{default:o(()=>[t(a(T),{class:"mr-1 h-3 w-3"}),e[13]||(e[13]=d(" Ver "))]),_:1})]),_:1},8,["href"]),r.candidatura.puede_editar?(l(),c(a(q),{key:0,href:`/candidaturas/${r.candidatura.id}/edit`},{default:o(()=>[t(a(h),{variant:"outline",size:"sm"},{default:o(()=>[t(a(k),{class:"mr-1 h-3 w-3"}),e[14]||(e[14]=d(" Editar "))]),_:1})]),_:1},8,["href"])):n("",!0)])]),_:1})]),_:1})):n("",!0)])])]}),_:1})],64))}});export{re as default};
