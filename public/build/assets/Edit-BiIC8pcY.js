import{d as J,C as K,i as _,e as p,f as s,u as t,p as Q,w as o,g as i,b as V,j as c,t as r,h as l,P,l as X,F as $,k as j,W as Y}from"./app-BxMQdeji.js";import{_ as h}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CiEBtCld.js";import{_ as C}from"./createLucideIcon-C-UWYrfi.js";import{_ as x,a as g,b as v,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-BnCOEwdG.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-ToL2SzCT.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-BlmtfhYq.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-Cv61jd0z.js";import{_ as B,a as D,b as F,c as N,d as G}from"./SelectValue.vue_vue_type_script_setup_true_lang-C_cC4TmA.js";import{_ as tt}from"./Switch.vue_vue_type_script_setup_true_lang-CAm1LBg3.js";import{_ as et,a as st,b as z,c as U}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-w_SIyey3.js";import{_ as I,a as O}from"./index-BSf8eefq.js";import{A as ot}from"./arrow-left-D5jKR-4B.js";import{U as it}from"./users-CvN1Zex9.js";import{V as at}from"./vote-BLA5af_M.js";import{F as lt}from"./file-text-BnGFyr0l.js";import{C as q}from"./circle-alert----6uGyB.js";import{S as nt}from"./save-C6yQR3lp.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-HaYR--Vk.js";import"./index-DyBffbvj.js";import"./floating-ui.vue-8MwpQwna.js";import"./x-CtZ-Yk1L.js";import"./index-CniBkxSN.js";import"./shield-BWgGyosQ.js";import"./user-y-oKgZ0r.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CwQxj27i.js";import"./chevron-right-Fu6i2V5H.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-XGwxgqGh.js";import"./VisuallyHidden-BU7kxpuH.js";import"./index-gViH2lvq.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Rc0j_Ts0.js";import"./index-uuqfgDZR.js";import"./map-pin-BSO3mLrr.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-vmsnnBVQ.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D23-rq2T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-3z313Cuu.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CtZNhcn0.js";import"./tag-DPKMgGKR.js";import"./target-DGdssVnK.js";import"./folder-open-B7m9IzBm.js";import"./send-oS9jU0xl.js";import"./briefcase-WEKIfwBg.js";import"./calendar-DgdSvpAx.js";import"./megaphone-4hd08Cg7.js";import"./user-check-B_HPyobX.js";import"./mail-DqZLMO2Y.js";import"./message-square-DEtIPXL4.js";import"./external-link-B-I99Qkx.js";import"./panel-left-CpkWwX9C.js";import"./index-BV26-s10.js";import"./check-Df8aIUSG.js";import"./index-De6-LhcB.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHiddenInput-DFI-nItV.js";import"./RovingFocusItem-CUafydao.js";import"./utils-CDNySjiA.js";const rt={class:"flex h-full flex-1 flex-col gap-4 p-4"},dt={class:"flex items-center justify-between"},mt={class:"text-muted-foreground"},ut={class:"flex gap-2"},pt={class:"grid gap-4 md:grid-cols-3"},ft={class:"text-2xl font-bold"},_t={class:"text-xs text-muted-foreground"},ct={class:"text-2xl font-bold"},xt={class:"text-xs text-muted-foreground"},gt={class:"text-2xl font-bold"},vt={class:"text-xs text-muted-foreground"},bt={class:"grid gap-4 md:grid-cols-2"},yt={class:"space-y-2"},Vt={key:0,class:"text-sm text-red-500"},Ct={class:"space-y-2"},$t={class:"flex"},wt={key:0,class:"text-sm text-red-500"},zt={class:"space-y-2"},Ut={key:0,class:"text-sm text-red-500"},kt={class:"space-y-2"},St={class:"flex items-center space-x-2"},Et={class:"mt-4 rounded-lg bg-muted p-4"},At={class:"grid gap-2 text-sm"},Lt={class:"ml-2"},Tt={class:"ml-2"},Mt={class:"ml-2"},Pt={class:"grid gap-4 md:grid-cols-2"},jt={class:"space-y-2"},Bt={class:"space-y-2"},Dt={class:"flex gap-2"},Ft={class:"space-y-2"},Nt={class:"space-y-2"},Gt={class:"grid gap-4 md:grid-cols-3"},It={class:"space-y-2"},Ot={class:"text-xs text-muted-foreground"},qt={class:"space-y-2"},Rt={class:"text-xs text-muted-foreground"},Wt={class:"space-y-2"},Zt={class:"text-xs text-muted-foreground"},Ht={class:"mt-6 flex justify-end gap-4"},Qe=J({__name:"Edit",props:{tenant:{},subscriptionPlans:{},timezones:{},userCount:{},votacionCount:{},convocatoriaCount:{}},setup(R){var k,S,E,A,L,T,M;const m=R,W=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tenants",href:"/admin/tenants"},{title:`Editar: ${m.tenant.name}`,href:"#"}],a=K({name:m.tenant.name,subdomain:m.tenant.subdomain,subscription_plan:m.tenant.subscription_plan,active:m.tenant.active,settings:{logo:((k=m.tenant.settings)==null?void 0:k.logo)||"",primary_color:((S=m.tenant.settings)==null?void 0:S.primary_color)||"#3B82F6",otp_expiration:((E=m.tenant.settings)==null?void 0:E.otp_expiration)||10,timezone:((A=m.tenant.settings)==null?void 0:A.timezone)||"America/Bogota"},limits:{max_users:((L=m.tenant.limits)==null?void 0:L.max_users)||null,max_votaciones:((T=m.tenant.limits)==null?void 0:T.max_votaciones)||null,max_convocatorias:((M=m.tenant.limits)==null?void 0:M.max_convocatorias)||null}}),Z=()=>{a.put(`/admin/tenants/${m.tenant.id}`,{preserveScroll:!0})},H=()=>{confirm(`¿Estás seguro de eliminar el tenant "${m.tenant.name}"? Esta acción no se puede deshacer.`)&&Y.delete(`/admin/tenants/${m.tenant.id}`)};return(d,e)=>(p(),_($,null,[s(t(Q),{title:`Editar Tenant: ${d.tenant.name}`},null,8,["title"]),s(h,{breadcrumbs:W},{default:o(()=>[i("div",rt,[i("div",dt,[i("div",null,[e[12]||(e[12]=i("h2",{class:"text-3xl font-bold tracking-tight"},"Editar Tenant",-1)),i("p",mt," Modifica la configuración de "+r(d.tenant.name),1)]),i("div",ut,[d.tenant.id!==1?(p(),V(t(C),{key:0,onClick:H,variant:"destructive",disabled:d.userCount>0},{default:o(()=>[...e[13]||(e[13]=[l(" Eliminar Tenant ",-1)])]),_:1},8,["disabled"])):c("",!0),s(t(P),{href:d.route("admin.tenants.index")},{default:o(()=>[s(t(C),{variant:"outline"},{default:o(()=>[s(t(ot),{class:"mr-2 h-4 w-4"}),e[14]||(e[14]=l(" Volver ",-1))]),_:1})]),_:1},8,["href"])])]),i("div",pt,[s(t(x),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>[...e[15]||(e[15]=[l("Usuarios",-1)])]),_:1}),s(t(it),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[i("div",ft,r(d.userCount),1),i("p",_t,r(t(a).limits.max_users?`de ${t(a).limits.max_users} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(t(x),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>[...e[16]||(e[16]=[l("Votaciones",-1)])]),_:1}),s(t(at),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[i("div",ct,r(d.votacionCount),1),i("p",xt,r(t(a).limits.max_votaciones?`de ${t(a).limits.max_votaciones} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(t(x),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>[...e[17]||(e[17]=[l("Convocatorias",-1)])]),_:1}),s(t(lt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[i("div",gt,r(d.convocatoriaCount),1),i("p",vt,r(t(a).limits.max_convocatorias?`de ${t(a).limits.max_convocatorias} máximo`:"Sin límite"),1)]),_:1})]),_:1})]),d.tenant.id===1?(p(),V(t(I),{key:0},{default:o(()=>[s(t(q),{class:"h-4 w-4"}),s(t(O),null,{default:o(()=>[...e[18]||(e[18]=[l(" Este es el tenant principal del sistema. Algunas opciones pueden estar limitadas. ",-1)])]),_:1})]),_:1})):c("",!0),i("form",{onSubmit:X(Z,["prevent"])},[s(t(et),{"default-value":"general",class:"w-full"},{default:o(()=>[s(t(st),{class:"grid w-full grid-cols-3"},{default:o(()=>[s(t(z),{value:"general"},{default:o(()=>[...e[19]||(e[19]=[l("Información General",-1)])]),_:1}),s(t(z),{value:"settings"},{default:o(()=>[...e[20]||(e[20]=[l("Configuración",-1)])]),_:1}),s(t(z),{value:"limits"},{default:o(()=>[...e[21]||(e[21]=[l("Límites y Cuotas",-1)])]),_:1})]),_:1}),s(t(U),{value:"general"},{default:o(()=>[s(t(x),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>[...e[22]||(e[22]=[l("Información General",-1)])]),_:1}),s(t(w),null,{default:o(()=>[...e[23]||(e[23]=[l(" Datos básicos de la organización ",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[i("div",bt,[i("div",yt,[s(t(u),{for:"name"},{default:o(()=>[...e[24]||(e[24]=[l("Nombre de la Organización *",-1)])]),_:1}),s(t(f),{id:"name",modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(a).name=n),placeholder:"Mi Organización",required:""},null,8,["modelValue"]),t(a).errors.name?(p(),_("p",Vt,r(t(a).errors.name),1)):c("",!0)]),i("div",Ct,[s(t(u),{for:"subdomain"},{default:o(()=>[...e[25]||(e[25]=[l("Subdominio *",-1)])]),_:1}),i("div",$t,[s(t(f),{id:"subdomain",modelValue:t(a).subdomain,"onUpdate:modelValue":e[1]||(e[1]=n=>t(a).subdomain=n),placeholder:"mi-organizacion",pattern:"[a-z0-9-]+",required:"",class:"rounded-r-none"},null,8,["modelValue"]),e[26]||(e[26]=i("span",{class:"inline-flex items-center rounded-r-md border border-l-0 border-input bg-muted px-3 text-sm text-muted-foreground"}," .votaciones.test ",-1))]),e[27]||(e[27]=i("p",{class:"text-xs text-muted-foreground"}," Solo letras minúsculas, números y guiones ",-1)),t(a).errors.subdomain?(p(),_("p",wt,r(t(a).errors.subdomain),1)):c("",!0)]),i("div",zt,[s(t(u),{for:"subscription_plan"},{default:o(()=>[...e[28]||(e[28]=[l("Plan de Suscripción *",-1)])]),_:1}),s(t(B),{modelValue:t(a).subscription_plan,"onUpdate:modelValue":e[2]||(e[2]=n=>t(a).subscription_plan=n)},{default:o(()=>[s(t(D),{id:"subscription_plan"},{default:o(()=>[s(t(F))]),_:1}),s(t(N),null,{default:o(()=>[(p(!0),_($,null,j(d.subscriptionPlans,(n,y)=>(p(),V(t(G),{key:y,value:y},{default:o(()=>[l(r(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(a).errors.subscription_plan?(p(),_("p",Ut,r(t(a).errors.subscription_plan),1)):c("",!0)]),i("div",kt,[s(t(u),{for:"active"},{default:o(()=>[...e[29]||(e[29]=[l("Estado",-1)])]),_:1}),i("div",St,[s(t(tt),{id:"active",checked:t(a).active,"onUpdate:checked":e[3]||(e[3]=n=>t(a).active=n)},null,8,["checked"]),s(t(u),{for:"active",class:"font-normal"},{default:o(()=>[l(r(t(a).active?"Activo":"Inactivo"),1)]),_:1})]),e[30]||(e[30]=i("p",{class:"text-xs text-muted-foreground"}," Los tenants inactivos no pueden acceder al sistema ",-1))])]),i("div",Et,[i("div",At,[i("div",null,[e[31]||(e[31]=i("span",{class:"font-medium"},"ID del Tenant:",-1)),i("span",Lt,r(d.tenant.id),1)]),i("div",null,[e[32]||(e[32]=i("span",{class:"font-medium"},"Creado:",-1)),i("span",Tt,r(new Date(d.tenant.created_at).toLocaleString()),1)]),i("div",null,[e[33]||(e[33]=i("span",{class:"font-medium"},"Última actualización:",-1)),i("span",Mt,r(new Date(d.tenant.updated_at).toLocaleString()),1)])])])]),_:1})]),_:1})]),_:1}),s(t(U),{value:"settings"},{default:o(()=>[s(t(x),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>[...e[34]||(e[34]=[l("Configuración del Sistema",-1)])]),_:1}),s(t(w),null,{default:o(()=>[...e[35]||(e[35]=[l(" Personalización y configuraciones específicas ",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[i("div",Pt,[i("div",jt,[s(t(u),{for:"logo"},{default:o(()=>[...e[36]||(e[36]=[l("URL del Logo",-1)])]),_:1}),s(t(f),{id:"logo",modelValue:t(a).settings.logo,"onUpdate:modelValue":e[4]||(e[4]=n=>t(a).settings.logo=n),placeholder:"https://ejemplo.com/logo.png",type:"url"},null,8,["modelValue"]),e[37]||(e[37]=i("p",{class:"text-xs text-muted-foreground"}," URL de la imagen del logo de la organización ",-1))]),i("div",Bt,[s(t(u),{for:"primary_color"},{default:o(()=>[...e[38]||(e[38]=[l("Color Primario",-1)])]),_:1}),i("div",Dt,[s(t(f),{id:"primary_color",modelValue:t(a).settings.primary_color,"onUpdate:modelValue":e[5]||(e[5]=n=>t(a).settings.primary_color=n),placeholder:"#3B82F6",pattern:"#[0-9A-Fa-f]{6}"},null,8,["modelValue"]),s(t(f),{type:"color",modelValue:t(a).settings.primary_color,"onUpdate:modelValue":e[6]||(e[6]=n=>t(a).settings.primary_color=n),class:"w-12 p-1"},null,8,["modelValue"])]),e[39]||(e[39]=i("p",{class:"text-xs text-muted-foreground"}," Color principal de la interfaz ",-1))]),i("div",Ft,[s(t(u),{for:"otp_expiration"},{default:o(()=>[...e[40]||(e[40]=[l("Expiración OTP (minutos)",-1)])]),_:1}),s(t(f),{id:"otp_expiration",modelValue:t(a).settings.otp_expiration,"onUpdate:modelValue":e[7]||(e[7]=n=>t(a).settings.otp_expiration=n),modelModifiers:{number:!0},type:"number",min:"5",max:"60",placeholder:"10"},null,8,["modelValue"]),e[41]||(e[41]=i("p",{class:"text-xs text-muted-foreground"}," Tiempo de validez del código OTP (5-60 minutos) ",-1))]),i("div",Nt,[s(t(u),{for:"timezone"},{default:o(()=>[...e[42]||(e[42]=[l("Zona Horaria",-1)])]),_:1}),s(t(B),{modelValue:t(a).settings.timezone,"onUpdate:modelValue":e[8]||(e[8]=n=>t(a).settings.timezone=n)},{default:o(()=>[s(t(D),{id:"timezone"},{default:o(()=>[s(t(F))]),_:1}),s(t(N),null,{default:o(()=>[(p(!0),_($,null,j(d.timezones,(n,y)=>(p(),V(t(G),{key:y,value:y},{default:o(()=>[l(r(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[43]||(e[43]=i("p",{class:"text-xs text-muted-foreground"}," Zona horaria por defecto para votaciones ",-1))])])]),_:1})]),_:1})]),_:1}),s(t(U),{value:"limits"},{default:o(()=>[s(t(x),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>[...e[44]||(e[44]=[l("Límites y Cuotas",-1)])]),_:1}),s(t(w),null,{default:o(()=>[...e[45]||(e[45]=[l(" Define los límites de recursos para esta organización ",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[i("div",Gt,[i("div",It,[s(t(u),{for:"max_users"},{default:o(()=>[...e[46]||(e[46]=[l("Usuarios Máximos",-1)])]),_:1}),s(t(f),{id:"max_users",modelValue:t(a).limits.max_users,"onUpdate:modelValue":e[9]||(e[9]=n=>t(a).limits.max_users=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),i("p",Ot," Actual: "+r(d.userCount)+" usuarios ",1)]),i("div",qt,[s(t(u),{for:"max_votaciones"},{default:o(()=>[...e[47]||(e[47]=[l("Votaciones Máximas",-1)])]),_:1}),s(t(f),{id:"max_votaciones",modelValue:t(a).limits.max_votaciones,"onUpdate:modelValue":e[10]||(e[10]=n=>t(a).limits.max_votaciones=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),i("p",Rt," Actual: "+r(d.votacionCount)+" votaciones ",1)]),i("div",Wt,[s(t(u),{for:"max_convocatorias"},{default:o(()=>[...e[48]||(e[48]=[l("Convocatorias Máximas",-1)])]),_:1}),s(t(f),{id:"max_convocatorias",modelValue:t(a).limits.max_convocatorias,"onUpdate:modelValue":e[11]||(e[11]=n=>t(a).limits.max_convocatorias=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),i("p",Zt," Actual: "+r(d.convocatoriaCount)+" convocatorias ",1)])]),d.userCount>(t(a).limits.max_users||0)&&t(a).limits.max_users?(p(),V(t(I),{key:0},{default:o(()=>[s(t(q),{class:"h-4 w-4"}),s(t(O),null,{default:o(()=>[...e[49]||(e[49]=[l(" El número actual de usuarios excede el límite establecido. ",-1)])]),_:1})]),_:1})):c("",!0),e[50]||(e[50]=i("div",{class:"rounded-lg bg-muted p-4"},[i("p",{class:"text-sm text-muted-foreground"},[i("strong",null,"Nota:"),l(" Los límites se aplican según el plan de suscripción. Un valor vacío significa que no hay límite establecido para ese recurso. ")])],-1))]),_:1})]),_:1})]),_:1})]),_:1}),i("div",Ht,[s(t(P),{href:d.route("admin.tenants.index")},{default:o(()=>[s(t(C),{type:"button",variant:"outline"},{default:o(()=>[...e[51]||(e[51]=[l(" Cancelar ",-1)])]),_:1})]),_:1},8,["href"]),s(t(C),{type:"submit",disabled:t(a).processing},{default:o(()=>[s(t(nt),{class:"mr-2 h-4 w-4"}),l(" "+r(t(a).processing?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Qe as default};
