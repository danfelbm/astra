import{_ as re}from"./AdminLayout.vue_vue_type_script_setup_true_lang-ORUX8tnq.js";import{d as Z,r as V,c as M,b as f,w as a,j as v,e as t,f as e,U as q,i as w,g as n,x as ee,n as A,h as o,t as c,m as r,p as G,q as ie,v as E,F,k as H,s as j}from"./app-D17Y_ptl.js";import{_ as J,c as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bxom8umE.js";import{c as ne,_ as h}from"./createLucideIcon-DT7sZlfG.js";import{_ as de}from"./Input.vue_vue_type_script_setup_true_lang-AbK6m3ZW.js";import{_ as z}from"./index-Zs9Ij4CV.js";import{_ as ue}from"./Switch.vue_vue_type_script_setup_true_lang-D5_EC3Mq.js";import{_ as me,a as fe,b as N,c as T,d as ce,e as C}from"./TableHeader.vue_vue_type_script_setup_true_lang-BqMTTiCe.js";import{_ as Q,a as W,b as X,c as Y,d as L,e as pe,C as ve}from"./SelectValue.vue_vue_type_script_setup_true_lang-CVkUo_mY.js";import{t as O}from"./index-BhDnvJsX.js";import{a as ge,b as _e,c as xe,d as ye,e as be,f as Ce,g as $e,_ as ke}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-w5QpOsIa.js";import{_ as he}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-DHOi0dO3.js";import{I as Te}from"./info-ChtttETF.js";import{C as we}from"./circle-alert-C4_p7u2X.js";import{T as Se}from"./triangle-alert-MDgV5LM_.js";import{L as ze}from"./loader-circle-D6aZblX4.js";import{P as Ve}from"./plus-560IX-iu.js";import{S as De}from"./search-BIdKOgFn.js";import{S as Fe}from"./square-pen-DlyUBJSn.js";import{T as Le}from"./trash-2-lznaB3e6.js";import{F as Me}from"./file-DRpGDnpS.js";import{S as Be}from"./square-check-big-B7-HoB3C.js";import{L as Ie}from"./list-BVqW3lEj.js";import{F as Ue}from"./file-text-BhyKY7aK.js";import{C as je}from"./calendar-BRQdmbOm.js";import{H as Ae}from"./hash-DwkOe9F5.js";import{T as Pe}from"./type-ByJhOow6.js";import{S as qe}from"./useFlashMessages-CpsbuQPu.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-gkGJj6x5.js";import"./index-CQj2kMbh.js";import"./floating-ui.vue-XjF7WPTd.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BsZsqkDn.js";import"./chevron-right-D2CTWBkE.js";import"./chevrons-up-down-Q4MKpf-d.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CHP7Z6h5.js";import"./tag-Bms_XZt-.js";import"./users-BtSsFcfh.js";import"./target-DZSaJwHR.js";import"./shield-CwCil-EA.js";import"./vote-x9eFGhve.js";import"./folder-open-DovI86sF.js";import"./send-BM_5k-mo.js";import"./briefcase-D-V3saiZ.js";import"./megaphone-Qw9rykKx.js";import"./user-check-vFXTGRi3.js";import"./clipboard-list-CRBHfta5.js";import"./mail-BSas4vwa.js";import"./message-square-nUANjPnp.js";import"./external-link-DrsM6Pan.js";import"./panel-left-BxNVd6su.js";import"./check-g8JJCUet.js";import"./index-CIMz7e-Z.js";import"./index-Dkbl4qsm.js";import"./VisuallyHidden-CwRfb1wu.js";import"./VisuallyHiddenInput-CNYLXNHj.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Dn7k5zQz.js";import"./x-WyyCcMlK.js";import"./DialogTrigger-B8vZzx0C.js";import"./index-OIl__FA4.js";import"./user-C8y4jSoB.js";import"./Label.vue_vue_type_script_setup_true_lang-D298jdl4.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CjRC8Ubs.js";import"./map-pin-ULMSLMWI.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=ne("RadioIcon",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),He={class:"flex gap-3"},Ne={class:"flex-1"},Oe={key:0,class:"py-2"},Re=Z({__name:"ConfirmModal",props:{open:{type:Boolean,default:void 0},title:{},description:{},variant:{default:"default"},confirmText:{},cancelText:{default:"Cancelar"},loading:{type:Boolean,default:!1}},emits:["update:open","confirm","cancel"],setup(d,{emit:y}){const b=d,S=y,B=V(!1),x=M({get:()=>b.open!==void 0?b.open:B.value,set:u=>{b.open!==void 0?S("update:open",u):B.value=u}}),g=M(()=>({destructive:{icon:Se,iconClass:"text-destructive",buttonClass:"bg-destructive hover:bg-destructive/90 !text-white",defaultConfirmText:"Eliminar"},warning:{icon:we,iconClass:"text-orange-600",buttonClass:"bg-orange-600 hover:bg-orange-700 !text-white",defaultConfirmText:"Continuar"},info:{icon:Te,iconClass:"text-primary",buttonClass:"bg-primary hover:bg-primary/90 text-primary-foreground",defaultConfirmText:"Aceptar"},default:{icon:null,iconClass:"",buttonClass:"bg-primary hover:bg-primary/90 text-primary-foreground",defaultConfirmText:"Confirmar"}})[b.variant]),$=M(()=>b.confirmText||g.value.defaultConfirmText),D=()=>{S("confirm"),b.loading||(x.value=!1)},I=()=>{S("cancel"),x.value=!1};return(u,_)=>(r(),f(e(ke),{open:x.value,"onUpdate:open":_[0]||(_[0]=P=>x.value=P)},{default:a(()=>[u.$slots.trigger?(r(),f(e(he),{key:0,"as-child":""},{default:a(()=>[q(u.$slots,"trigger")]),_:3})):v("",!0),t(e(ge),null,{default:a(()=>[t(e(_e),null,{default:a(()=>[n("div",He,[g.value.icon?(r(),f(ee(g.value.icon),{key:0,class:A(["h-5 w-5 mt-0.5 flex-shrink-0",g.value.iconClass]),"aria-hidden":"true"},null,8,["class"])):v("",!0),n("div",Ne,[t(e(xe),null,{default:a(()=>[o(c(d.title),1)]),_:1}),u.$slots.description||d.description?(r(),f(e(ye),{key:0,class:"mt-2"},{default:a(()=>[q(u.$slots,"description",{},()=>[o(c(d.description),1)])]),_:3})):v("",!0)])])]),_:3}),u.$slots.default?(r(),w("div",Oe,[q(u.$slots,"default")])):v("",!0),t(e(be),null,{default:a(()=>[t(e(Ce),{onClick:I,disabled:d.loading},{default:a(()=>[o(c(d.cancelText),1)]),_:1},8,["disabled"]),t(e($e),{onClick:D,class:A(g.value.buttonClass),disabled:d.loading},{default:a(()=>[d.loading?(r(),f(e(ze),{key:0,class:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"})):v("",!0),o(" "+c($.value),1)]),_:1},8,["class","disabled"])]),_:1})]),_:3})]),_:3},8,["open"]))}}),Ge={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Je={class:"flex items-center justify-between"},Ke={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Qe={class:"relative"},We={class:"flex items-center gap-1"},Xe={class:"text-sm text-gray-500"},Ye={class:"font-medium"},Ze={key:0,class:"text-xs text-gray-500"},et={class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},tt={class:"flex flex-wrap gap-1"},at={class:"flex justify-end gap-2"},st={key:0,class:"flex justify-center gap-2"},lt={class:"text-center text-sm text-gray-500"},pa=Z({__name:"Index",props:{campos:{},filters:{},tiposCampo:{},tipos:{},entidadesDisponibles:{}},setup(d){const y=d,b=M(()=>y.tiposCampo||y.tipos||{}),S=b,B=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Campos Personalizados",href:"/admin/campos-personalizados"}],x=V(y.filters.search||""),g=V(y.filters.tipo||""),$=V(y.filters.activo!==void 0?String(y.filters.activo):""),D=()=>{const i={search:x.value,tipo:g.value};$.value!==""&&(i.activo=$.value==="1"),j.get("/admin/campos-personalizados",i,{preserveState:!0,preserveScroll:!0})};let I;G(x,()=>{clearTimeout(I),I=setTimeout(()=>{D()},500)}),G([g,$],()=>{D()});const u=V(!1),_=V(null),P=i=>{_.value=i,u.value=!0},te=M(()=>{if(!_.value)return"";const i=_.value.valores_count||0;return i===0?`Se eliminará el campo "${_.value.nombre}".`:`Se eliminará el campo "${_.value.nombre}" junto con ${i} valor${i!==1?"es":""} asociado${i!==1?"s":""} en proyectos, contratos, hitos y entregables.`}),ae=()=>{_.value&&(j.delete(`/admin/campos-personalizados/${_.value.id}?force_delete=true`,{preserveScroll:!0}),u.value=!1,_.value=null)},se=(i,s)=>{j.patch(`/admin/campos-personalizados/${i.id}/toggle-activo`,{activo:s},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{O.success(`Campo ${s?"activado":"desactivado"} exitosamente`)},onError:()=>{O.error("Error al cambiar el estado del campo")}})},R=(i,s)=>{const l=y.campos.data,p=l.findIndex(m=>m.id===i.id);if(s==="up"&&p>0||s==="down"&&p<l.length-1){const m=s==="up"?p-1:p+1,k=l.map(U=>U.id);[k[p],k[m]]=[k[m],k[p]],j.post("/admin/campos-personalizados/reordenar",{orden:k},{preserveScroll:!0,onSuccess:()=>{O.success("Orden actualizado")}})}},le=i=>({text:Pe,number:Ae,date:je,textarea:Ue,select:Ie,checkbox:Be,radio:Ee,file:Me})[i]||qe,oe=i=>({text:"bg-blue-100 text-blue-800",number:"bg-purple-100 text-purple-800",date:"bg-green-100 text-green-800",textarea:"bg-yellow-100 text-yellow-800",select:"bg-orange-100 text-orange-800",checkbox:"bg-pink-100 text-pink-800",radio:"bg-indigo-100 text-indigo-800",file:"bg-gray-100 text-gray-800"})[i]||"bg-gray-100 text-gray-800";return(i,s)=>(r(),w(F,null,[t(e(ie),{title:"Campos Personalizados"}),t(re,{breadcrumbs:B},{default:a(()=>[n("div",Ge,[n("div",Je,[s[6]||(s[6]=n("div",null,[n("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Campos Personalizados "),n("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Define campos adicionales para los proyectos ")],-1)),t(e(E),{href:"/admin/campos-personalizados/create"},{default:a(()=>[t(e(h),null,{default:a(()=>[t(e(Ve),{class:"mr-2 h-4 w-4"}),s[5]||(s[5]=o(" Nuevo Campo ",-1))]),_:1})]),_:1})]),t(e(J),null,{default:a(()=>[t(e(K),{class:"p-4"},{default:a(()=>[n("div",Ke,[n("div",Qe,[t(e(De),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(de),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=l=>x.value=l),type:"text",placeholder:"Buscar campos...",class:"pl-10"},null,8,["modelValue"])]),t(e(Q),{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=l=>g.value=l)},{default:a(()=>[t(e(W),null,{default:a(()=>[t(e(X),{placeholder:"Todos los tipos"})]),_:1}),t(e(Y),null,{default:a(()=>[t(e(L),{value:"all"},{default:a(()=>[...s[7]||(s[7]=[o("Todos los tipos",-1)])]),_:1}),(r(!0),w(F,null,H(e(S),(l,p)=>(r(),f(e(L),{key:p,value:p},{default:a(()=>[o(c(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(Q),{modelValue:$.value,"onUpdate:modelValue":s[2]||(s[2]=l=>$.value=l)},{default:a(()=>[t(e(W),null,{default:a(()=>[t(e(X),{placeholder:"Todos los estados"})]),_:1}),t(e(Y),null,{default:a(()=>[t(e(L),{value:"all"},{default:a(()=>[...s[8]||(s[8]=[o("Todos los estados",-1)])]),_:1}),t(e(L),{value:"1"},{default:a(()=>[...s[9]||(s[9]=[o("Activos",-1)])]),_:1}),t(e(L),{value:"0"},{default:a(()=>[...s[10]||(s[10]=[o("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(h),{variant:"outline",onClick:s[3]||(s[3]=l=>{x.value="",g.value="",$.value="",D()})},{default:a(()=>[...s[11]||(s[11]=[o(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(J),null,{default:a(()=>[t(e(K),{class:"p-0"},{default:a(()=>[t(e(me),null,{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(N),null,{default:a(()=>[t(e(T),{class:"w-12"},{default:a(()=>[...s[12]||(s[12]=[o("Orden",-1)])]),_:1}),t(e(T),null,{default:a(()=>[...s[13]||(s[13]=[o("Campo",-1)])]),_:1}),t(e(T),null,{default:a(()=>[...s[14]||(s[14]=[o("Slug",-1)])]),_:1}),t(e(T),null,{default:a(()=>[...s[15]||(s[15]=[o("Tipo",-1)])]),_:1}),t(e(T),null,{default:a(()=>[...s[16]||(s[16]=[o("Aplicar a",-1)])]),_:1}),t(e(T),{class:"text-center"},{default:a(()=>[...s[17]||(s[17]=[o("Requerido",-1)])]),_:1}),t(e(T),{class:"text-center"},{default:a(()=>[...s[18]||(s[18]=[o("Estado",-1)])]),_:1}),t(e(T),{class:"text-right"},{default:a(()=>[...s[19]||(s[19]=[o("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(ce),null,{default:a(()=>[(r(!0),w(F,null,H(d.campos.data,(l,p)=>(r(),f(e(N),{key:l.id},{default:a(()=>[t(e(C),null,{default:a(()=>[n("div",We,[t(e(h),{variant:"ghost",size:"sm",disabled:p===0,onClick:m=>R(l,"up")},{default:a(()=>[t(e(pe),{class:"h-3 w-3"})]),_:1},8,["disabled","onClick"]),n("span",Xe,c(l.orden),1),t(e(h),{variant:"ghost",size:"sm",disabled:p===d.campos.data.length-1,onClick:m=>R(l,"down")},{default:a(()=>[t(e(ve),{class:"h-3 w-3"})]),_:1},8,["disabled","onClick"])])]),_:2},1024),t(e(C),null,{default:a(()=>[n("div",null,[n("p",Ye,c(l.nombre),1),l.descripcion?(r(),w("p",Ze,c(l.descripcion),1)):v("",!0)])]),_:2},1024),t(e(C),null,{default:a(()=>[n("code",et,c(l.slug),1)]),_:2},1024),t(e(C),null,{default:a(()=>[t(e(z),{class:A([oe(l.tipo),"flex items-center gap-1 w-fit"])},{default:a(()=>{var m;return[(r(),f(ee(le(l.tipo)),{class:"h-3 w-3"})),o(" "+c(((m=b.value||e(S))==null?void 0:m[l.tipo])||l.tipo),1)]}),_:2},1032,["class"])]),_:2},1024),t(e(C),null,{default:a(()=>{var m,k,U;return[n("div",tt,[!l.aplicar_para||l.aplicar_para.length===0||l.aplicar_para.includes("proyectos")?(r(),f(e(z),{key:0,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[20]||(s[20]=[o(" Proyectos ",-1)])]),_:1})):v("",!0),(m=l.aplicar_para)!=null&&m.includes("contratos")?(r(),f(e(z),{key:1,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[21]||(s[21]=[o(" Contratos ",-1)])]),_:1})):v("",!0),(k=l.aplicar_para)!=null&&k.includes("hitos")?(r(),f(e(z),{key:2,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[22]||(s[22]=[o(" Hitos ",-1)])]),_:1})):v("",!0),(U=l.aplicar_para)!=null&&U.includes("entregables")?(r(),f(e(z),{key:3,variant:"secondary",class:"text-xs"},{default:a(()=>[...s[23]||(s[23]=[o(" Entregables ",-1)])]),_:1})):v("",!0)])]}),_:2},1024),t(e(C),{class:"text-center"},{default:a(()=>[t(e(z),{class:A(l.es_requerido?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")},{default:a(()=>[o(c(l.es_requerido?"Sí":"No"),1)]),_:2},1032,["class"])]),_:2},1024),t(e(C),{class:"text-center"},{default:a(()=>[t(e(ue),{"model-value":l.activo,"onUpdate:modelValue":m=>se(l,m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),t(e(C),{class:"text-right"},{default:a(()=>[n("div",at,[t(e(E),{href:`/admin/campos-personalizados/${l.id}/edit`},{default:a(()=>[t(e(h),{variant:"outline",size:"sm"},{default:a(()=>[t(e(Fe),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),t(e(h),{variant:"destructive",size:"sm",onClick:m=>P(l)},{default:a(()=>[t(e(Le),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),d.campos.data.length===0?(r(),f(e(N),{key:0},{default:a(()=>[t(e(C),{colspan:"7",class:"text-center py-8"},{default:a(()=>[...s[24]||(s[24]=[n("p",{class:"text-gray-500"},"No se encontraron campos personalizados",-1)])]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),d.campos.last_page>1?(r(),w("div",st,[(r(!0),w(F,null,H(d.campos.links,l=>(r(),w(F,{key:l.label},[l.url?(r(),f(e(E),{key:0,href:l.url,"preserve-state":"","preserve-scroll":""},{default:a(()=>[t(e(h),{variant:l.active?"default":"outline",size:"sm",innerHTML:l.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(r(),f(e(h),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:l.label},null,8,["innerHTML"]))],64))),128))])):v("",!0),n("div",lt," Mostrando "+c(d.campos.data.length)+" de "+c(d.campos.total)+" campos ",1)]),t(Re,{open:u.value,"onUpdate:open":s[4]||(s[4]=l=>u.value=l),variant:"destructive",title:"¿Eliminar campo personalizado?",description:te.value,onConfirm:ae},null,8,["open","description"])]),_:1})],64))}});export{pa as default};
