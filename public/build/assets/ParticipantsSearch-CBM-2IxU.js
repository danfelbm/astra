import{_ as y}from"./createLucideIcon-CuqvJpoP.js";import{a as P,b as $,c as B,_ as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-CAAlIxJ_.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-DLnyUN9n.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-BnypupD2.js";import{_ as j}from"./Label.vue_vue_type_script_setup_true_lang-DbHCruY6.js";import{a as v,_ as b}from"./index-D0NwpEhz.js";import{_}from"./AlertTitle.vue_vue_type_script_setup_true_lang-TT2bX9ry.js";import{d as A,r as g,i as w,e as i,f as s,g as t,u as e,p as D,t as c,j as x,w as l,h as o,b as f,a as K}from"./app-BY-r2Ws5.js";import{C as T}from"./calendar-DCUV9fWL.js";import{M as U}from"./map-pin-CpkBR1pn.js";import{A as F}from"./arrow-left-DI00bHbv.js";import{I as q}from"./info-DbzGYcQ2.js";import{S as E}from"./search-AnUvcKZj.js";import{L as O}from"./loader-circle-DRinwLpn.js";import{C as R}from"./circle-x-CA-hmulT.js";import{C as X}from"./circle-check-big-DgoTdA0D.js";import{f as G,e as H}from"./es-BDPlFIsO.js";import"./index-DRWGvvY6.js";const J={class:"min-h-screen bg-gray-50"},Q={class:"bg-white shadow-sm border-b"},W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Y={class:"flex items-start justify-between"},Z={class:"flex flex-col gap-4"},aa={class:"text-2xl font-bold text-gray-900"},ea={class:"flex flex-wrap gap-4 text-sm text-gray-600"},sa={class:"flex items-center gap-1"},la={key:0,class:"flex items-center gap-1"},ta={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ra={class:"space-y-4"},oa={class:"space-y-2"},na={class:"flex gap-2"},ia={key:1,class:"mt-6"},Ba=A({__name:"ParticipantsSearch",props:{asamblea:{}},setup(L){const S=L,u=g(""),p=g(!1),n=g(null),d=g(""),h=r=>r?G(new Date(r),"PPP",{locale:H}):"",k=async()=>{var r,a;if(!u.value||u.value.length<3){d.value="Por favor ingrese al menos 3 caracteres para buscar.",n.value=null;return}d.value="",n.value=null,p.value=!0;try{const m=await K.post(`/public-api/asambleas/${S.asamblea.id}/buscar-participante`,{search:u.value});n.value=m.data}catch(m){if(console.error("Error buscando participante:",m),((r=m.response)==null?void 0:r.status)===422){const C=m.response.data.errors;d.value=C.search?C.search[0]:"Error en la búsqueda."}else((a=m.response)==null?void 0:a.status)===404?d.value="La búsqueda no está disponible en este momento.":d.value="Ocurrió un error al realizar la búsqueda. Por favor intente nuevamente."}finally{p.value=!1}},I=()=>{u.value="",n.value=null,d.value=""},N=r=>{r.key==="Enter"&&k()};return(r,a)=>(i(),w("div",null,[s(e(D),{title:`Buscar Participantes - ${r.asamblea.nombre}`},null,8,["title"]),t("div",J,[t("div",Q,[t("div",W,[t("div",Y,[t("div",Z,[t("h1",aa,c(r.asamblea.nombre),1),t("div",ea,[t("div",sa,[s(e(T),{class:"h-4 w-4"}),t("span",null,c(h(r.asamblea.fecha_inicio))+" - "+c(h(r.asamblea.fecha_fin)),1)]),r.asamblea.lugar?(i(),w("div",la,[s(e(U),{class:"h-4 w-4"}),t("span",null,c(r.asamblea.ubicacion_completa),1)])):x("",!0)])]),s(e(y),{variant:"outline",size:"sm",onClick:a[0]||(a[0]=()=>r.window.history.back())},{default:l(()=>[s(e(F),{class:"h-4 w-4 mr-2"}),a[2]||(a[2]=o(" Volver ",-1))]),_:1})])])]),t("div",ta,[s(e(b),{class:"mb-6"},{default:l(()=>[s(e(q),{class:"h-4 w-4"}),s(e(_),null,{default:l(()=>[...a[3]||(a[3]=[o("Verificación de Participantes",-1)])]),_:1}),s(e(v),null,{default:l(()=>[...a[4]||(a[4]=[o(" Utilice este buscador para verificar si una persona está registrada como participante de la asamblea. Puede buscar por nombre completo o número de documento de identidad (cédula). ",-1)])]),_:1})]),_:1}),s(e(V),null,{default:l(()=>[s(e(P),null,{default:l(()=>[s(e($),null,{default:l(()=>[s(e(E),{class:"inline-block mr-2 h-5 w-5"}),a[5]||(a[5]=o(" Buscar Participante ",-1))]),_:1}),s(e(z),null,{default:l(()=>[...a[6]||(a[6]=[o(" Ingrese los datos de la persona que desea verificar ",-1)])]),_:1})]),_:1}),s(e(B),null,{default:l(()=>[t("div",ra,[t("div",oa,[s(e(j),{for:"search"},{default:l(()=>[...a[7]||(a[7]=[o("Búsqueda",-1)])]),_:1}),t("div",na,[s(e(M),{id:"search",modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=m=>u.value=m),type:"text",placeholder:"Ingrese nombre completo o número de cédula...",class:"flex-1",onKeydown:N,disabled:p.value},null,8,["modelValue","disabled"]),s(e(y),{onClick:k,disabled:p.value||!u.value},{default:l(()=>[p.value?(i(),f(e(O),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(i(),f(e(E),{key:1,class:"mr-2 h-4 w-4"})),a[8]||(a[8]=o(" Buscar ",-1))]),_:1},8,["disabled"]),u.value||n.value?(i(),f(e(y),{key:0,variant:"outline",onClick:I},{default:l(()=>[...a[9]||(a[9]=[o(" Limpiar ",-1)])]),_:1})):x("",!0)]),a[10]||(a[10]=t("p",{class:"text-xs text-muted-foreground"}," Mínimo 3 caracteres. La búsqueda es sensible a mayúsculas y minúsculas. ",-1))]),d.value?(i(),f(e(b),{key:0,variant:"destructive"},{default:l(()=>[s(e(R),{class:"h-4 w-4"}),s(e(_),null,{default:l(()=>[...a[11]||(a[11]=[o("Error",-1)])]),_:1}),s(e(v),null,{default:l(()=>[o(c(d.value),1)]),_:1})]),_:1})):x("",!0),n.value?(i(),w("div",ia,[n.value.found?(i(),f(e(b),{key:0,class:"border-green-200 bg-green-50"},{default:l(()=>[s(e(X),{class:"h-4 w-4 text-green-600"}),s(e(_),{class:"text-green-800"},{default:l(()=>[...a[12]||(a[12]=[o("Participante Confirmado",-1)])]),_:1}),s(e(v),{class:"text-green-700"},{default:l(()=>[o(c(n.value.message),1)]),_:1})]),_:1})):(i(),f(e(b),{key:1,class:"border-orange-200 bg-orange-50"},{default:l(()=>[s(e(q),{class:"h-4 w-4 text-orange-600"}),s(e(_),{class:"text-orange-800"},{default:l(()=>[...a[13]||(a[13]=[o("No Encontrado",-1)])]),_:1}),s(e(v),{class:"text-orange-700"},{default:l(()=>[o(c(n.value.message),1)]),_:1})]),_:1}))])):x("",!0)])]),_:1})]),_:1}),s(e(V),{class:"mt-6"},{default:l(()=>[s(e(P),null,{default:l(()=>[s(e($),{class:"text-base"},{default:l(()=>[...a[14]||(a[14]=[o("Información Importante",-1)])]),_:1})]),_:1}),s(e(B),null,{default:l(()=>[...a[15]||(a[15]=[t("ul",{class:"list-disc list-inside space-y-2 text-sm text-gray-600"},[t("li",null,"La búsqueda solo confirmará si una persona es participante o no."),t("li",null,"No se mostrará información personal adicional de los participantes."),t("li",null,"Para búsquedas exactas, use el documento de identidad completo."),t("li",null,"Si tiene dudas sobre su participación, contacte a la organización.")],-1)])]),_:1})]),_:1}),a[16]||(a[16]=t("div",{class:"mt-6 text-center text-sm text-gray-500"},[t("p",null,"Esta herramienta de verificación respeta la privacidad de los participantes."),t("p",{class:"mt-1"}," Para más información sobre la asamblea, contacte a la organización. ")],-1))])])]))}});export{Ba as default};
