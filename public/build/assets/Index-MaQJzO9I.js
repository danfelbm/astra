import{a as C,h as q,i as T,j as I,k as $,q as R,d as z,_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-C-TXGeAC.js";import{d as W,k as h,a as m,o as d,b as t,u as e,m as G,e as a,f as r,P as y,g as l,i as v,j as P,F as U,r as J,t as n,W as b}from"./app-DUwT5XjW.js";import{c as O,_ as g}from"./AppLogo.vue_vue_type_script_setup_true_lang-TtBKHXHP.js";import{_ as Q,a as H}from"./CardContent.vue_vue_type_script_setup_true_lang-5UaTZODP.js";import{_ as K,a as X,b as k,c as f,d as Y,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-DMfadDvK.js";import{_ as Z,a as ee,b as te,c as se,d as ae,e as ie,f as oe,g as le}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CMSigzSF.js";import{_ as re,C as ne}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-CDxT1ogn.js";import{P as de}from"./plus-C_Zgpucy.js";import{E as ue}from"./ellipsis-CT-kI882.js";import{S as me}from"./square-pen-CLP5keS7.js";import{T as fe}from"./trash-8jypndsE.js";import"./index-lXub5hNN.js";import"./index-S1odQ9fv.js";import"./usePrimitiveElement-DXJMmht_.js";import"./createContext-BqTg7DGM.js";import"./useForwardExpose-DCR6Fykl.js";import"./Collection-C7Tlg6fc.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-B7z30C33.js";import"./useNonce-CVR6C3wM.js";import"./chevron-up-mMt2Z1mV.js";import"./handleAndDispatchCustomEvent-CYpUamdb.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-B3_kincx.js";import"./VisuallyHidden-BH4I_bjZ.js";import"./Input.vue_vue_type_script_setup_true_lang-Bavi-x6e.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-DfN2mHkg.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-DawTe2K_.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-bnGfnvpd.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CStynK6i.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-B-gFw3mk.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-BpsL9h74.js";import"./trash-2-CF8unIwz.js";import"./search-YHCQULjN.js";import"./history-DZb0-jTg.js";import"./save-HBhGoMFp.js";import"./circle-alert-BDYdSiMf.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=O("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),_e={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ce={class:"flex items-center justify-between"},ve={class:"rounded-md border"},ge={class:"font-medium"},$e={class:"text-sm text-muted-foreground"},be={key:0,class:"text-xs text-muted-foreground"},ke=["title"],xe={key:0,class:"text-sm"},Se={key:1,class:"text-sm text-muted-foreground"},we={class:"text-sm text-muted-foreground"},Ce={key:0,class:"flex items-center justify-between mt-4"},he={class:"text-sm text-muted-foreground"},ye={class:"flex items-center space-x-2"},Pe={class:"text-sm"},Ue={key:0},ft=W({__name:"Index",props:{users:{},filters:{},filterFieldsConfig:{}},setup(D){const x=D,{route:p}=window,E=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"}],c=h(!1),_=h(null),A={fields:x.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["name","email","documento_identidad","telefono"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},N=i=>{b.post(p("admin.usuarios.toggle-active",i.id),{},{preserveScroll:!0})},B=i=>{_.value=i,c.value=!0},j=()=>{_.value&&b.delete(p("admin.usuarios.destroy",_.value.id),{preserveScroll:!0}),c.value=!1,_.value=null},F=i=>i==="admin"?"default":"secondary",L=i=>i?"success":"destructive",S=i=>{const s=[];return i.localidad&&s.push(i.localidad.nombre),i.municipio&&s.push(i.municipio.nombre),i.departamento&&s.push(i.departamento.nombre),i.territorio&&s.push(i.territorio.nombre),s.join(", ")||"Sin ubicación"},w=i=>{b.get(p("admin.usuarios.index"),{...x.filters,page:i},{preserveState:!0,preserveScroll:!0})};return(i,s)=>(d(),m(U,null,[t(e(G),{title:"Usuarios"}),t(M,{breadcrumbs:E},{default:a(()=>[r("div",_e,[r("div",ce,[s[4]||(s[4]=r("div",null,[r("h1",{class:"text-3xl font-bold tracking-tight"},"Usuarios"),r("p",{class:"text-muted-foreground"}," Administra los usuarios del sistema ")],-1)),t(e(y),{href:e(p)("admin.usuarios.create")},{default:a(()=>[t(e(g),null,{default:a(()=>[t(e(de),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=l(" Nuevo Usuario "))]),_:1})]),_:1},8,["href"])]),t(re,{config:A,route:e(p)("admin.usuarios.index"),"initial-filters":{quickSearch:i.filters.search,rootGroup:i.filters.advanced_filters?JSON.parse(i.filters.advanced_filters):void 0}},null,8,["route","initial-filters"]),t(e(Q),null,{default:a(()=>[t(e(H),{class:"pt-6"},{default:a(()=>[r("div",ve,[t(e(K),null,{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(f),null,{default:a(()=>s[5]||(s[5]=[l("Usuario")])),_:1}),t(e(f),null,{default:a(()=>s[6]||(s[6]=[l("Rol")])),_:1}),t(e(f),null,{default:a(()=>s[7]||(s[7]=[l("Ubicación")])),_:1}),t(e(f),null,{default:a(()=>s[8]||(s[8]=[l("Cargo")])),_:1}),t(e(f),null,{default:a(()=>s[9]||(s[9]=[l("Estado")])),_:1}),t(e(f),null,{default:a(()=>s[10]||(s[10]=[l("Registro")])),_:1}),t(e(f),{class:"text-right"},{default:a(()=>s[11]||(s[11]=[l("Acciones")])),_:1})]),_:1})]),_:1}),t(e(Y),null,{default:a(()=>[(d(!0),m(U,null,J(i.users.data,o=>(d(),P(e(k),{key:o.id},{default:a(()=>[t(e(u),null,{default:a(()=>[r("div",null,[r("div",ge,n(o.name),1),r("div",$e,n(o.email),1),o.documento_identidad?(d(),m("div",be," Doc: "+n(o.documento_identidad),1)):v("",!0)])]),_:2},1024),t(e(u),null,{default:a(()=>[t(e(C),{variant:F(o.role)},{default:a(()=>[l(n(o.role==="admin"?"Administrador":"Usuario"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),null,{default:a(()=>[r("div",{class:"max-w-[200px] truncate text-sm",title:S(o)},n(S(o)),9,ke)]),_:2},1024),t(e(u),null,{default:a(()=>[o.cargo?(d(),m("span",xe,n(o.cargo.nombre),1)):(d(),m("span",Se," Sin cargo "))]),_:2},1024),t(e(u),null,{default:a(()=>[t(e(C),{variant:L(o.activo)},{default:a(()=>[l(n(o.activo?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),null,{default:a(()=>[r("div",we,n(new Date(o.created_at).toLocaleDateString()),1)]),_:2},1024),t(e(u),{class:"text-right"},{default:a(()=>[t(e(q),null,{default:a(()=>[t(e(T),{"as-child":""},{default:a(()=>[t(e(g),{variant:"ghost",size:"sm"},{default:a(()=>[t(e(ue),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(I),{align:"end"},{default:a(()=>[t(e(y),{href:e(p)("admin.usuarios.edit",o.id)},{default:a(()=>[t(e($),null,{default:a(()=>[t(e(me),{class:"mr-2 h-4 w-4"}),s[12]||(s[12]=l(" Editar "))]),_:1})]),_:2},1032,["href"]),t(e($),{onClick:V=>N(o)},{default:a(()=>[t(e(pe),{class:"mr-2 h-4 w-4"}),l(" "+n(o.activo?"Desactivar":"Activar"),1)]),_:2},1032,["onClick"]),t(e(R)),t(e($),{class:"text-destructive",onClick:V=>B(o)},{default:a(()=>[t(e(fe),{class:"mr-2 h-4 w-4"}),s[13]||(s[13]=l(" Eliminar "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),i.users.data.length===0?(d(),P(e(k),{key:0},{default:a(()=>[t(e(u),{colspan:"7",class:"text-center"},{default:a(()=>s[14]||(s[14]=[r("div",{class:"py-12 text-muted-foreground"}," No se encontraron usuarios ",-1)])),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),i.users.last_page>1?(d(),m("div",Ce,[r("div",he," Mostrando "+n(i.users.from)+" a "+n(i.users.to)+" de "+n(i.users.total)+" resultados ",1),r("div",ye,[t(e(g),{variant:"outline",size:"sm",disabled:i.users.current_page===1,onClick:s[0]||(s[0]=o=>w(i.users.current_page-1))},{default:a(()=>[t(e(ne),{class:"h-4 w-4"}),s[15]||(s[15]=l(" Anterior "))]),_:1},8,["disabled"]),r("div",Pe," Página "+n(i.users.current_page)+" de "+n(i.users.last_page),1),t(e(g),{variant:"outline",size:"sm",disabled:i.users.current_page===i.users.last_page,onClick:s[1]||(s[1]=o=>w(i.users.current_page+1))},{default:a(()=>[s[16]||(s[16]=l(" Siguiente ")),t(e(z),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):v("",!0)]),_:1})]),_:1})]),t(e(Z),{open:c.value,"onUpdate:open":s[2]||(s[2]=o=>c.value=o)},{default:a(()=>[t(e(ee),null,{default:a(()=>[t(e(te),null,{default:a(()=>[t(e(se),null,{default:a(()=>s[17]||(s[17]=[l("¿Estás seguro?")])),_:1}),t(e(ae),null,{default:a(()=>[s[18]||(s[18]=l(" Esta acción no se puede deshacer. Se eliminará permanentemente el usuario ")),_.value?(d(),m("strong",Ue,n(_.value.name),1)):v("",!0),s[19]||(s[19]=l(" del sistema. "))]),_:1})]),_:1}),t(e(ie),null,{default:a(()=>[t(e(oe),null,{default:a(()=>s[20]||(s[20]=[l("Cancelar")])),_:1}),t(e(le),{onClick:j,class:"bg-destructive text-destructive-foreground"},{default:a(()=>s[21]||(s[21]=[l(" Eliminar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{ft as default};
