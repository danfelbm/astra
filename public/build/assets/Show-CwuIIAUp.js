import{_ as re}from"./AdminLayout.vue_vue_type_script_setup_true_lang-9IjpWB9p.js";import{r as T,s as x,d as Q,c as F,b as y,w as s,j as g,e as o,f as t,g as l,i as E,h as u,t as h,v as D,n as ie,F as O,k as W,m as n,p as ne,q as le}from"./app-BFYzQdzF.js";import{a as z,b as I,c as A,_ as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-DkTLPy8Q.js";import{_ as Y}from"./CardDescription.vue_vue_type_script_setup_true_lang-DxxQYMbB.js";import{_ as k}from"./createLucideIcon-D1qz7YzX.js";import{_ as G}from"./index-NXNNUHoi.js";import{_ as ce,a as de,b as P,c as B}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-wlg6A3DQ.js";import{t as S}from"./index-Brf5gYP6.js";import{E as ue}from"./EtiquetaDisplay-B6_F8jOI.js";import{E as me}from"./EtiquetaSelector-D75F5HZH.js";import{_ as fe}from"./ContratosList.vue_vue_type_script_setup_true_lang-BdSTT1F2.js";import{_ as ye,a as pe,b as ve}from"./ProyectoInfoCard.vue_vue_type_script_setup_true_lang-D1VYrwOD.js";import{_ as ge,a as he}from"./ActivityLog.vue_vue_type_script_setup_true_lang-CM4ld6hS.js";import{_ as be}from"./Progress.vue_vue_type_script_setup_true_lang-DyYDbhnG.js";import{L as we,H as xe}from"./HitoCard-DV7Dc1mF.js";import{T as J}from"./target-tUUcCLD9.js";import{P as L}from"./plus-6rP13GL3.js";import{_ as $e}from"./CamposPersonalizadosDisplay.vue_vue_type_script_setup_true_lang-D4dG6EsF.js";import{S as K}from"./square-pen-CRcsnlOy.js";import{T as Ee}from"./trash-2-BBOxtUL-.js";import{I as qe}from"./info-CndUw7eo.js";import{M as ke}from"./milestone-CbzOygeq.js";import{I as Se}from"./image-CdRVq3ON.js";import{F as X}from"./file-text-B8pkgjB3.js";import{A as He}from"./activity-n_ozU8Q4.js";import{U as Ce}from"./user-DNZxFcAJ.js";import"./useFlashMessages-Bqd6MZ7B.js";import"./index-DqLCS5TH.js";import"./floating-ui.vue-CrMUkeOu.js";import"./x-Dn8AgytN.js";import"./Input.vue_vue_type_script_setup_true_lang-D5Ji8-ky.js";import"./index-ZmM9pUBM.js";import"./index-DhndXmqU.js";import"./shield-Bo_7RbfF.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DtIzBGea.js";import"./chevron-right-BzirJsa6.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Didh4AbK.js";import"./VisuallyHidden-DcMqFjSC.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Bswj50XS.js";import"./check-sEpy5eM4.js";import"./Label.vue_vue_type_script_setup_true_lang-YHimyCcI.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BMsEWk9D.js";import"./circle-alert-BxQ7VEYd.js";import"./map-pin-C6_Thhfh.js";import"./chevrons-up-down-IdEkvILm.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DaE5iqF4.js";import"./tag-CyzhTAcn.js";import"./users-BxdpmkiW.js";import"./vote-BzZocx-O.js";import"./folder-open-D1SxOjH9.js";import"./send-DFlGnxYP.js";import"./briefcase-Bl6P5TyB.js";import"./calendar-JpKtXe5P.js";import"./megaphone-B3OHnbKb.js";import"./user-check-Cst94Hpx.js";import"./clipboard-list-CYvViWuW.js";import"./mail-DLpR0mFk.js";import"./message-square-C4Sufjf_.js";import"./external-link-E9rfREmf.js";import"./panel-left-CrSFQs7g.js";import"./index-Dd__5Ccb.js";import"./RovingFocusItem-DhJ3iCzt.js";import"./utils-DM1toE_p.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-MekrTKbG.js";import"./layers-C_DeuFgn.js";import"./zap-DFrieLkZ.js";import"./trending-up-D5ZlmKS0.js";import"./award-snkrIwbH.js";import"./flag-BAD3nDGe.js";import"./hash-CcAH62jC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Dud1JvbU.js";import"./search-D_2xzlAP.js";import"./useKbd-kRIii9yh.js";import"./VisuallyHiddenInput-BYtswlNw.js";import"./useEtiquetaHierarchy-NBhXPxa8.js";import"./list-BLDwLksF.js";import"./tree-pine-CgDV2jk9.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-Cjy3tk7K.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-CpR2V0aG.js";import"./contratos-BiUTbrRP.js";import"./useToast-CxA-Qtys.js";import"./dollar-sign-DqSP0gN5.js";import"./ellipsis-BguP8aVY.js";import"./eye-Zdh8_iN9.js";import"./download-CGD42P15.js";import"./copy-D-gYB_lz.js";import"./AccordionContent.vue_vue_type_script_setup_true_lang-BE2w4I7v.js";import"./useArrowNavigation-B5rxJs06.js";import"./Textarea.vue_vue_type_script_setup_true_lang-CT-Mv7S9.js";import"./circle-check-big-D2wfk5vW.js";import"./circle-play-BTbnA-ZO.js";import"./clock-XIFde4bj.js";import"./filter-BnrBwKpI.js";import"./es-BDPlFIsO.js";import"./parseISO-DFjB8F03.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-D3IwwwyQ.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Ca838jZ0.js";import"./StatusChangeModal.vue_vue_type_script_setup_true_lang-sydxZrW9.js";import"./circle-x-B3AMidkH.js";import"./loader-circle-B3qgLhi3.js";import"./calendar-days-DzemteAn.js";import"./pen-Bmg9XNoK.js";function De(){const e=T(!1),r=T(null);async function V(f,c){return e.value=!0,r.value=null,new Promise((v,b)=>{x.post(`/admin/proyectos/${f}/etiquetas`,{etiqueta_id:c},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,v(!0)},onError:w=>{e.value=!1,r.value=Object.values(w).join(", "),b(w)}})})}async function M(f,c){return e.value=!0,r.value=null,new Promise((v,b)=>{x.delete(`/admin/proyectos/${f}/etiquetas/${c}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,v(!0)},onError:w=>{e.value=!1,r.value="Error al quitar la etiqueta",b(w)}})})}async function q(f,c){return e.value=!0,r.value=null,new Promise((v,b)=>{x.put(`/admin/proyectos/${f}/etiquetas/sync`,{etiquetas:c},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,v(!0)},onError:w=>{e.value=!1,r.value="Error al sincronizar etiquetas",b(w)}})})}async function p(f){e.value=!0,r.value=null;try{const c=await fetch(`/admin/proyectos/${f}/etiquetas/suggest`);if(!c.ok)throw new Error("Error al obtener sugerencias");const v=await c.json();return e.value=!1,v.etiquetas||[]}catch(c){return e.value=!1,r.value="Error al obtener sugerencias de etiquetas",console.error(c),[]}}async function m(f){var c;e.value=!0,r.value=null;try{const v=await fetch("/admin/etiquetas",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:JSON.stringify(f)});if(!v.ok){const w=await v.json();throw new Error(w.message||"Error al crear etiqueta")}const b=await v.json();return e.value=!1,b.data}catch(v){return e.value=!1,r.value=v.message||"Error al crear etiqueta",console.error(v),null}}async function $(f){if(f.length<2)return[];try{const c=await fetch(`/admin/etiquetas/search?q=${encodeURIComponent(f)}`);if(!c.ok)throw new Error("Error al buscar etiquetas");return(await c.json()).data||[]}catch(c){return console.error("Error buscando etiquetas:",c),[]}}function H(f){const c=new Map;return f.forEach(v=>{var w;const b=((w=v.categoria)==null?void 0:w.nombre)||"Sin categoría";c.has(b)||c.set(b,[]),c.get(b).push(v)}),c}function U(f){var c;return f.color||((c=f.categoria)==null?void 0:c.color)||"gray"}function N(f,c=10){return f<c}async function R(f,c){return e.value=!0,r.value=null,new Promise((v,b)=>{x.post(`/admin/proyectos/${f}/etiquetas/reorder`,{etiquetas:c},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,v(!0)},onError:w=>{e.value=!1,r.value="Error al reordenar etiquetas",b(w)}})})}return{isLoading:e,error:r,addEtiquetaToProyecto:V,removeEtiquetaFromProyecto:M,syncEtiquetasProyecto:q,getSugerenciasEtiquetas:p,reorderEtiquetas:R,createEtiqueta:m,searchEtiquetas:$,groupEtiquetasByCategoria:H,getEtiquetaColor:U,canAddMoreEtiquetas:N}}const Te={key:0,class:"flex items-center gap-2"},Ve={key:0,class:"mb-6"},Pe={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},Be={class:"text-center"},Ae={class:"text-2xl font-bold"},je={class:"text-center"},Me={class:"text-2xl font-bold text-blue-500"},Ne={class:"text-center"},ze={class:"text-2xl font-bold text-green-500"},Ie={class:"text-center"},Fe={class:"space-y-2"},Le={class:"flex justify-between items-center text-sm"},Ue={class:"font-medium"},Re={key:1,class:"space-y-3"},Ge={key:2,class:"text-center py-6"},Oe={class:"text-muted-foreground mb-3"},Je=Q({__name:"HitosGrid",props:{hitos:{},proyectoId:{},proyectoNombre:{},estadisticas:{},showStats:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},showViewAll:{type:Boolean,default:!0},maxHitos:{default:void 0},canCreate:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},emptyMessage:{default:"No hay hitos definidos para este proyecto"}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables"],setup(e){const r=e,V=F(()=>r.maxHitos&&r.maxHitos>0?r.hitos.slice(0,r.maxHitos):r.hitos),M=F(()=>r.maxHitos&&r.hitos.length>r.maxHitos);return(q,p)=>(n(),y(t(j),null,{default:s(()=>[e.showHeader?(n(),y(t(z),{key:0,class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[l("div",null,[o(t(I),{class:"flex items-center gap-2"},{default:s(()=>[o(t(J),{class:"h-5 w-5"}),p[0]||(p[0]=u(" Hitos y Entregables ",-1))]),_:1}),e.proyectoNombre?(n(),y(t(Y),{key:0},{default:s(()=>[u(h(e.proyectoNombre),1)]),_:1})):g("",!0)]),e.showActions?(n(),E("div",Te,[e.showViewAll&&e.hitos.length>0?(n(),y(t(D),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos`},{default:s(()=>[o(t(k),{variant:"outline",size:"sm"},{default:s(()=>[o(t(we),{class:"h-4 w-4 mr-2"}),p[1]||(p[1]=u(" Ver Todos ",-1))]),_:1})]),_:1},8,["href"])):g("",!0),e.canCreate?(n(),y(t(D),{key:1,href:`/admin/proyectos/${e.proyectoId}/hitos/create`},{default:s(()=>[o(t(k),{size:"sm"},{default:s(()=>[o(t(L),{class:"h-4 w-4 mr-2"}),p[2]||(p[2]=u(" Nuevo Hito ",-1))]),_:1})]),_:1},8,["href"])):g("",!0)])):g("",!0)]),_:1})):g("",!0),o(t(A),null,{default:s(()=>[e.showStats&&e.estadisticas&&e.estadisticas.total>0?(n(),E("div",Ve,[l("div",Pe,[l("div",Be,[l("p",Ae,h(e.estadisticas.total),1),p[3]||(p[3]=l("p",{class:"text-xs text-muted-foreground"},"Total Hitos",-1))]),l("div",je,[l("p",Me,h(e.estadisticas.en_progreso),1),p[4]||(p[4]=l("p",{class:"text-xs text-muted-foreground"},"En Progreso",-1))]),l("div",Ne,[l("p",ze,h(e.estadisticas.completados),1),p[5]||(p[5]=l("p",{class:"text-xs text-muted-foreground"},"Completados",-1))]),l("div",Ie,[l("p",{class:ie(["text-2xl font-bold",{"text-red-500":e.estadisticas.vencidos>0}])},h(e.estadisticas.vencidos),3),p[6]||(p[6]=l("p",{class:"text-xs text-muted-foreground"},"Vencidos",-1))])]),l("div",Fe,[l("div",Le,[p[7]||(p[7]=l("span",{class:"text-muted-foreground"},"Progreso General",-1)),l("span",Ue,h(e.estadisticas.progreso_general)+"%",1)]),o(t(be),{value:e.estadisticas.progreso_general,class:"h-2"},null,8,["value"])])])):g("",!0),e.hitos.length>0?(n(),E("div",Re,[(n(!0),E(O,null,W(V.value,m=>(n(),y(xe,{key:m.id,hito:m,canEdit:e.canEdit,canDelete:e.canDelete,canManageDeliverables:e.canManageDeliverables,showActions:!0,compact:!0,onView:$=>q.$emit("view",m),onEdit:$=>q.$emit("edit",m),onDelete:$=>q.$emit("delete",m),onDuplicate:$=>q.$emit("duplicate",m),onAddEntregable:$=>q.$emit("add-entregable",m),onViewEntregables:$=>q.$emit("view-entregables",m)},null,8,["hito","canEdit","canDelete","canManageDeliverables","onView","onEdit","onDelete","onDuplicate","onAddEntregable","onViewEntregables"]))),128)),M.value?(n(),y(t(D),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos`,class:"block text-center mt-4 text-sm text-primary hover:underline"},{default:s(()=>[u(" Ver todos los hitos ("+h(e.hitos.length)+") ",1)]),_:1},8,["href"])):g("",!0)])):(n(),E("div",Ge,[o(t(J),{class:"h-10 w-10 mx-auto text-muted-foreground mb-3"}),l("p",Oe,h(e.emptyMessage),1),e.canCreate?(n(),y(t(D),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos/create`},{default:s(()=>[o(t(k),{variant:"outline",size:"sm"},{default:s(()=>[o(t(L),{class:"h-4 w-4 mr-2"}),p[8]||(p[8]=u(" Crear Primer Hito ",-1))]),_:1})]),_:1},8,["href"])):g("",!0)]))]),_:1})]),_:1}))}}),Ke={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Xe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Qe={class:"text-2xl font-bold text-gray-900 dark:text-white"},We={key:0,class:"mt-2 text-gray-600 dark:text-gray-400"},Ye={class:"flex gap-2"},Ze={key:0},_e={key:1,class:"text-sm text-muted-foreground"},et={key:1,class:"space-y-4"},tt={class:"flex gap-2"},at={class:"space-y-3"},ot={class:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},st={class:"flex-1"},rt={class:"text-sm"},it={class:"font-medium"},nt={class:"text-xs text-gray-500 mt-1"},lt={key:0,class:"flex justify-end"},ct={class:"space-y-4"},dt={class:"text-center"},io=Q({__name:"Show",props:{proyecto:{},categorias:{},activities:{},usuariosActividades:{},authPermissions:{},totales:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageTags:{type:Boolean},canViewContracts:{type:Boolean},canCreateContracts:{type:Boolean},canViewHitos:{type:Boolean},canCreateHitos:{type:Boolean},canEditHitos:{type:Boolean},canDeleteHitos:{type:Boolean},canManageEntregables:{type:Boolean},estadisticasHitos:{}},setup(e){const r=e,V=["general","contratos","hitos","evidencias","actividad"],q=T((()=>{const a=new URLSearchParams(window.location.search).get("tab");return a&&V.includes(a)?a:"general"})());ne(q,i=>{const a=`/admin/proyectos/${r.proyecto.id}?tab=${i}`;x.get(a,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const p=F(()=>{var i,a;return((i=r.authPermissions)==null?void 0:i.includes("evidencias.aprobar"))||((a=r.authPermissions)==null?void 0:a.includes("evidencias.rechazar"))||!1}),m=T({usuario_id:null,tipo_entidad:null,tipo_accion:null,fecha_inicio:null,fecha_fin:null}),$=T(!1),H=T([]),{syncEtiquetasProyecto:U,isLoading:N}=De();r.proyecto.etiquetas&&(H.value=r.proyecto.etiquetas.map(i=>i.id));const R=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:r.proyecto.nombre,href:`/admin/proyectos/${r.proyecto.id}`}],f=()=>{confirm(`¿Estás seguro de eliminar el proyecto "${r.proyecto.nombre}"?`)&&x.delete(`/admin/proyectos/${r.proyecto.id}`,{onSuccess:()=>{S.success("Proyecto eliminado exitosamente")},onError:()=>{S.error("Error al eliminar el proyecto")}})},c=i=>new Date(i).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),v=i=>{const a=Math.floor((new Date(i).getTime()-new Date().getTime())/864e5);return a===0?"Hoy":a===1?"Mañana":a===-1?"Ayer":a>0?`En ${a} días`:`Hace ${Math.abs(a)} días`},b=async()=>{try{await U(r.proyecto.id,H.value),$.value=!1,S.success("Etiquetas actualizadas exitosamente"),x.reload({only:["proyecto"]})}catch{S.error("Error al actualizar las etiquetas")}},w=()=>{var i;H.value=((i=r.proyecto.etiquetas)==null?void 0:i.map(a=>a.id))||[],$.value=!1},Z=i=>{x.visit(`/admin/proyectos/${r.proyecto.id}/hitos/${i.id}`)},_=i=>{x.visit(`/admin/proyectos/${r.proyecto.id}/hitos/${i.id}/edit`)},ee=i=>{confirm(`¿Estás seguro de eliminar el hito "${i.nombre}"? Se eliminarán también todos sus entregables.`)&&x.delete(`/admin/proyectos/${r.proyecto.id}/hitos/${i.id}`,{onSuccess:()=>{S.success("Hito eliminado exitosamente"),x.reload({only:["proyecto"]})},onError:()=>{S.error("Error al eliminar el hito")}})},te=i=>{x.post(`/admin/proyectos/${r.proyecto.id}/hitos/${i.id}/duplicar`,{},{onSuccess:()=>{S.success("Hito duplicado exitosamente"),x.reload({only:["proyecto"]})},onError:()=>{S.error("Error al duplicar el hito")}})},ae=i=>{x.visit(`/admin/proyectos/${r.proyecto.id}/hitos/${i.id}/entregables/create`)},oe=i=>{x.visit(`/admin/proyectos/${r.proyecto.id}/hitos/${i.id}/entregables`)},se=F(()=>{let i=r.activities||[];return m.value.usuario_id&&(i=i.filter(a=>{var d;return((d=a.causer)==null?void 0:d.id)===m.value.usuario_id})),m.value.tipo_entidad&&(i=i.filter(a=>a.subject_type===m.value.tipo_entidad)),m.value.tipo_accion&&(i=i.filter(a=>a.event===m.value.tipo_accion)),(m.value.fecha_inicio||m.value.fecha_fin)&&(i=i.filter(a=>{const d=new Date(a.created_at);if(m.value.fecha_inicio){const C=new Date(m.value.fecha_inicio);if(d<C)return!1}if(m.value.fecha_fin){const C=new Date(m.value.fecha_fin);if(C.setHours(23,59,59,999),d>C)return!1}return!0})),i});return(i,a)=>(n(),E(O,null,[o(t(le),{title:`Proyecto: ${e.proyecto.nombre}`},null,8,["title"]),o(re,{breadcrumbs:R},{default:s(()=>[l("div",Ke,[l("div",Xe,[l("div",null,[l("h1",Qe,h(e.proyecto.nombre),1),e.proyecto.descripcion?(n(),E("p",We,h(e.proyecto.descripcion),1)):g("",!0)]),l("div",Ye,[e.canEdit?(n(),y(t(D),{key:0,href:`/admin/proyectos/${e.proyecto.id}/edit`},{default:s(()=>[o(t(k),null,{default:s(()=>[o(t(K),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=u(" Editar ",-1))]),_:1})]),_:1},8,["href"])):g("",!0),e.canDelete?(n(),y(t(k),{key:1,variant:"destructive",onClick:f},{default:s(()=>[o(t(Ee),{class:"mr-2 h-4 w-4"}),a[5]||(a[5]=u(" Eliminar ",-1))]),_:1})):g("",!0)])]),o(t(ce),{modelValue:q.value,"onUpdate:modelValue":a[3]||(a[3]=d=>q.value=d),class:"w-full"},{default:s(()=>[o(t(de),{class:"grid w-full grid-cols-5"},{default:s(()=>[o(t(P),{value:"general"},{default:s(()=>[o(t(qe),{class:"mr-2 h-4 w-4"}),a[6]||(a[6]=u(" General ",-1))]),_:1}),o(t(P),{value:"hitos"},{default:s(()=>{var d;return[o(t(ke),{class:"mr-2 h-4 w-4"}),a[7]||(a[7]=u(" Hitos y Entregables ",-1)),(d=e.totales)!=null&&d.hitos?(n(),y(t(G),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:s(()=>[u(h(e.totales.hitos),1)]),_:1})):g("",!0)]}),_:1}),o(t(P),{value:"evidencias"},{default:s(()=>{var d;return[o(t(Se),{class:"mr-2 h-4 w-4"}),a[8]||(a[8]=u(" Evidencias ",-1)),(d=e.totales)!=null&&d.evidencias?(n(),y(t(G),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:s(()=>[u(h(e.totales.evidencias),1)]),_:1})):g("",!0)]}),_:1}),o(t(P),{value:"contratos"},{default:s(()=>{var d;return[o(t(X),{class:"mr-2 h-4 w-4"}),a[9]||(a[9]=u(" Contratos ",-1)),(d=e.totales)!=null&&d.contratos?(n(),y(t(G),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:s(()=>[u(h(e.totales.contratos),1)]),_:1})):g("",!0)]}),_:1}),o(t(P),{value:"actividad"},{default:s(()=>[o(t(He),{class:"mr-2 h-4 w-4"}),a[10]||(a[10]=u(" Actividad ",-1))]),_:1})]),_:1}),o(t(B),{value:"general",class:"space-y-4 mt-6"},{default:s(()=>[o(ye,{"proyecto-id":e.proyecto.id,activo:e.proyecto.activo,responsable:e.proyecto.responsable,creador:e.proyecto.creador,"created-at":e.proyecto.created_at,"updated-at":e.proyecto.updated_at,"show-id":!0,"show-activo":!0},null,8,["proyecto-id","activo","responsable","creador","created-at","updated-at"]),o(pe,{estado:e.proyecto.estado,"estado-label":e.proyecto.estado_label,prioridad:e.proyecto.prioridad,"prioridad-label":e.proyecto.prioridad_label,"porcentaje-completado":e.proyecto.porcentaje_completado,"fecha-inicio":e.proyecto.fecha_inicio,"fecha-fin":e.proyecto.fecha_fin,"duracion-dias":e.proyecto.duracion_dias},null,8,["estado","estado-label","prioridad","prioridad-label","porcentaje-completado","fecha-inicio","fecha-fin","duracion-dias"]),o(t(j),null,{default:s(()=>[o(t(z),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[o(t(I),null,{default:s(()=>[...a[11]||(a[11]=[u(" Etiquetas ",-1)])]),_:1}),e.canManageTags&&!$.value?(n(),y(t(k),{key:0,variant:"ghost",size:"sm",onClick:a[0]||(a[0]=d=>$.value=!0)},{default:s(()=>[o(t(K),{class:"mr-1 h-4 w-4"}),a[12]||(a[12]=u(" Editar ",-1))]),_:1})):g("",!0)]),_:1}),o(t(A),null,{default:s(()=>[$.value?(n(),E("div",et,[e.categorias?(n(),y(me,{key:0,modelValue:H.value,"onUpdate:modelValue":a[1]||(a[1]=d=>H.value=d),categorias:e.categorias,"max-etiquetas":10,placeholder:"Seleccionar etiquetas...",description:"Selecciona hasta 10 etiquetas para este proyecto"},null,8,["modelValue","categorias"])):g("",!0),l("div",tt,[o(t(k),{size:"sm",onClick:b,disabled:t(N)},{default:s(()=>[...a[13]||(a[13]=[u(" Guardar ",-1)])]),_:1},8,["disabled"]),o(t(k),{size:"sm",variant:"outline",onClick:w,disabled:t(N)},{default:s(()=>[...a[14]||(a[14]=[u(" Cancelar ",-1)])]),_:1},8,["disabled"])])])):(n(),E("div",Ze,[e.proyecto.etiquetas&&e.proyecto.etiquetas.length>0?(n(),y(ue,{key:0,etiquetas:e.proyecto.etiquetas,"show-categoria":!0,interactive:!0,size:"md"},null,8,["etiquetas"])):(n(),E("p",_e," No hay etiquetas asignadas "))]))]),_:1})]),_:1}),e.proyecto.campos_personalizados&&e.proyecto.campos_personalizados.length>0?(n(),y($e,{key:0,valores:e.proyecto.campos_personalizados},null,8,["valores"])):g("",!0),e.proyecto.activities&&e.proyecto.activities.length>0?(n(),y(t(j),{key:1},{default:s(()=>[o(t(z),null,{default:s(()=>[o(t(I),null,{default:s(()=>[...a[15]||(a[15]=[u("Actividad Reciente",-1)])]),_:1})]),_:1}),o(t(A),null,{default:s(()=>[l("div",at,[(n(!0),E(O,null,W(e.proyecto.activities,d=>{var C;return n(),E("div",{key:d.id,class:"flex items-start gap-3 pb-3 border-b last:border-b-0"},[l("div",ot,[o(t(Ce),{class:"h-4 w-4 text-gray-500"})]),l("div",st,[l("p",rt,[l("span",it,h(((C=d.causer)==null?void 0:C.name)||"Sistema"),1),u(" "+h(d.description),1)]),l("p",nt,h(v(d.created_at)),1)])])}),128))])]),_:1})]),_:1})):g("",!0)]),_:1}),o(t(B),{value:"contratos",class:"space-y-4 mt-6"},{default:s(()=>[e.canCreateContracts?(n(),E("div",lt,[o(t(D),{href:`/admin/contratos/create?proyecto_id=${e.proyecto.id}`},{default:s(()=>[o(t(k),null,{default:s(()=>[o(t(L),{class:"mr-2 h-4 w-4"}),a[16]||(a[16]=u(" Nuevo Contrato ",-1))]),_:1})]),_:1},8,["href"])])):g("",!0),e.proyecto.contratos&&e.proyecto.contratos.length>0?(n(),y(t(j),{key:1},{default:s(()=>[o(t(z),null,{default:s(()=>[o(t(I),null,{default:s(()=>[...a[17]||(a[17]=[u("Contratos del Proyecto",-1)])]),_:1}),o(t(Y),null,{default:s(()=>[...a[18]||(a[18]=[u(" Lista de contratos asociados a este proyecto ",-1)])]),_:1})]),_:1}),o(t(A),null,{default:s(()=>[l("div",ct,[o(fe,{contratos:e.proyecto.contratos,"show-proyecto":!1,"show-actions":!0,"actions-style":"buttons"},null,8,["contratos"])])]),_:1})]),_:1})):(n(),y(t(j),{key:2},{default:s(()=>[o(t(A),{class:"py-8"},{default:s(()=>[l("div",dt,[o(t(X),{class:"mx-auto h-12 w-12 text-gray-400"}),a[20]||(a[20]=l("p",{class:"mt-2 text-sm text-gray-600"},"No hay contratos asociados",-1)),e.canCreateContracts?(n(),y(t(D),{key:0,href:`/admin/contratos/create?proyecto_id=${e.proyecto.id}`,class:"mt-4 inline-block"},{default:s(()=>[o(t(k),{variant:"outline"},{default:s(()=>[o(t(L),{class:"mr-2 h-4 w-4"}),a[19]||(a[19]=u(" Crear primer contrato ",-1))]),_:1})]),_:1},8,["href"])):g("",!0)])]),_:1})]),_:1}))]),_:1}),o(t(B),{value:"hitos",class:"space-y-4 mt-6"},{default:s(()=>[e.canViewHitos?(n(),y(Je,{key:0,hitos:e.proyecto.hitos||[],"proyecto-id":e.proyecto.id,estadisticas:e.estadisticasHitos,"show-stats":!0,"show-header":!0,"show-actions":!0,"show-view-all":!0,"can-create":e.canCreateHitos,"can-edit":e.canEditHitos,"can-delete":e.canDeleteHitos,"can-manage-deliverables":e.canManageEntregables,"empty-message":"No hay hitos definidos para este proyecto",onView:Z,onEdit:_,onDelete:ee,onDuplicate:te,onAddEntregable:ae,onViewEntregables:oe},null,8,["hitos","proyecto-id","estadisticas","can-create","can-edit","can-delete","can-manage-deliverables"])):g("",!0)]),_:1}),o(t(B),{value:"evidencias",class:"space-y-4 mt-6"},{default:s(()=>[o(ve,{contratos:e.proyecto.contratos||[],"proyecto-id":e.proyecto.id,modo:"admin","puede-gestionar-estado":p.value,"format-date":c},null,8,["contratos","proyecto-id","puede-gestionar-estado"])]),_:1}),o(t(B),{value:"actividad",class:"space-y-4 mt-6"},{default:s(()=>[e.activities&&e.activities.length>0?(n(),y(ge,{key:0,modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=d=>m.value=d),usuarios:e.usuariosActividades,"context-level":"proyecto"},null,8,["modelValue","usuarios"])):g("",!0),o(he,{activities:se.value,title:"Historial de Actividad",description:"Registro completo de cambios y eventos del proyecto, hitos y entregables","empty-message":"No hay actividad registrada"},null,8,["activities"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{io as default};
