import{a as H,b as N,c as U,_ as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-BxuhlF8z.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-CLGDuLIz.js";import{_ as v}from"./createLucideIcon-D6Za-Pze.js";import{_ as h,a as w,b as $,c as M,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-BVZfuZ-_.js";import{_ as R,a as S,b as O}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-9i8D6Dh4.js";import{F as L}from"./filter-Cdbe73TI.js";import{X as y}from"./x-BSrC46b1.js";import{C as X}from"./calendar-KIcEFRdQ.js";import{d as q,c as C,b as r,i as f,w as t,e as a,f as l,g as u,j as c,h as d,F,k as V,t as b,m as n}from"./app-0nVG3A7n.js";import{f as G,e as J}from"./es-BDPlFIsO.js";const K={class:"flex items-center justify-between"},Q={class:"flex items-center gap-2"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Y={key:0,class:"space-y-2"},Z={class:"flex gap-2"},ee={key:1,class:"space-y-2"},le={class:"flex gap-2"},ae={class:"space-y-2"},te={class:"flex gap-2"},se={class:"space-y-2"},oe={class:"flex gap-2"},ie={key:0,class:"text-sm"},ue={key:1,class:"text-muted-foreground"},ne={class:"p-3 space-y-2"},de=["value"],re=["value"],fe={key:1,class:"space-y-4"},ce={class:"flex items-center justify-between"},ve={class:"flex items-center gap-2"},$e=q({__name:"ActivityFilters",props:{modelValue:{},usuarios:{default:()=>[]},contextLevel:{default:"proyecto"},showCard:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(x,{emit:j}){const k=x,B=j,o=C({get:()=>k.modelValue,set:i=>B("update:modelValue",i)}),E=C(()=>{const i=[];return k.contextLevel==="proyecto"?i.push({value:"Modules\\Proyectos\\Models\\Proyecto",label:"Proyecto"},{value:"Modules\\Proyectos\\Models\\Hito",label:"Hito"},{value:"Modules\\Proyectos\\Models\\Entregable",label:"Entregable"}):k.contextLevel==="hito"?i.push({value:"Modules\\Proyectos\\Models\\Hito",label:"Hito"},{value:"Modules\\Proyectos\\Models\\Entregable",label:"Entregable"}):i.push({value:"Modules\\Proyectos\\Models\\Entregable",label:"Entregable"}),i}),D=[{value:"created",label:"Creado"},{value:"updated",label:"Actualizado"},{value:"deleted",label:"Eliminado"},{value:"restored",label:"Restaurado"},{value:"custom",label:"Acción personalizada"}],_=(i,e)=>{o.value={...o.value,[i]:e}},g=i=>{_(i,null)},T=()=>{o.value={usuario_id:null,tipo_entidad:null,tipo_accion:null,fecha_inicio:null,fecha_fin:null}},z=C(()=>Object.values(o.value).some(i=>i!=null)),A=i=>{if(!i)return"";try{return G(new Date(i),"d 'de' MMM yyyy",{locale:J})}catch{return i}};return(i,e)=>x.showCard?(n(),r(l(I),{key:0},{default:t(()=>[a(l(H),{class:"pb-3"},{default:t(()=>[u("div",K,[u("div",Q,[a(l(L),{class:"h-4 w-4"}),a(l(N),{class:"text-base"},{default:t(()=>[...e[9]||(e[9]=[d("Filtros de Actividad",-1)])]),_:1})]),z.value?(n(),r(l(v),{key:0,variant:"ghost",size:"sm",onClick:T},{default:t(()=>[a(l(y),{class:"h-4 w-4 mr-1"}),e[10]||(e[10]=d(" Limpiar ",-1))]),_:1})):c("",!0)])]),_:1}),a(l(U),null,{default:t(()=>{var P;return[u("div",W,[x.usuarios.length>0?(n(),f("div",Y,[a(l(m),{for:"usuario"},{default:t(()=>[...e[11]||(e[11]=[d("Usuario",-1)])]),_:1}),u("div",Z,[a(l(h),{"model-value":(P=o.value.usuario_id)==null?void 0:P.toString(),"onUpdate:modelValue":e[0]||(e[0]=s=>_("usuario_id",s?parseInt(s):null))},{default:t(()=>[a(l(w),{id:"usuario"},{default:t(()=>[a(l($),{placeholder:"Todos los usuarios"})]),_:1}),a(l(M),null,{default:t(()=>[a(l(p),{value:"null"},{default:t(()=>[...e[12]||(e[12]=[d("Todos los usuarios",-1)])]),_:1}),(n(!0),f(F,null,V(x.usuarios,s=>(n(),r(l(p),{key:s.id,value:s.id.toString()},{default:t(()=>[d(b(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),o.value.usuario_id?(n(),r(l(v),{key:0,variant:"ghost",size:"icon",onClick:e[1]||(e[1]=s=>g("usuario_id"))},{default:t(()=>[a(l(y),{class:"h-4 w-4"})]),_:1})):c("",!0)])])):c("",!0),E.value.length>1?(n(),f("div",ee,[a(l(m),{for:"tipo-entidad"},{default:t(()=>[...e[13]||(e[13]=[d("Tipo de Entidad",-1)])]),_:1}),u("div",le,[a(l(h),{"model-value":o.value.tipo_entidad||"null","onUpdate:modelValue":e[2]||(e[2]=s=>_("tipo_entidad",s==="null"?null:s))},{default:t(()=>[a(l(w),{id:"tipo-entidad"},{default:t(()=>[a(l($),{placeholder:"Todas las entidades"})]),_:1}),a(l(M),null,{default:t(()=>[a(l(p),{value:"null"},{default:t(()=>[...e[14]||(e[14]=[d("Todas las entidades",-1)])]),_:1}),(n(!0),f(F,null,V(E.value,s=>(n(),r(l(p),{key:s.value,value:s.value},{default:t(()=>[d(b(s.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),o.value.tipo_entidad?(n(),r(l(v),{key:0,variant:"ghost",size:"icon",onClick:e[3]||(e[3]=s=>g("tipo_entidad"))},{default:t(()=>[a(l(y),{class:"h-4 w-4"})]),_:1})):c("",!0)])])):c("",!0),u("div",ae,[a(l(m),{for:"tipo-accion"},{default:t(()=>[...e[15]||(e[15]=[d("Tipo de Acción",-1)])]),_:1}),u("div",te,[a(l(h),{"model-value":o.value.tipo_accion||"null","onUpdate:modelValue":e[4]||(e[4]=s=>_("tipo_accion",s==="null"?null:s))},{default:t(()=>[a(l(w),{id:"tipo-accion"},{default:t(()=>[a(l($),{placeholder:"Todas las acciones"})]),_:1}),a(l(M),null,{default:t(()=>[a(l(p),{value:"null"},{default:t(()=>[...e[16]||(e[16]=[d("Todas las acciones",-1)])]),_:1}),(n(),f(F,null,V(D,s=>a(l(p),{key:s.value,value:s.value},{default:t(()=>[d(b(s.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value"]),o.value.tipo_accion?(n(),r(l(v),{key:0,variant:"ghost",size:"icon",onClick:e[5]||(e[5]=s=>g("tipo_accion"))},{default:t(()=>[a(l(y),{class:"h-4 w-4"})]),_:1})):c("",!0)])]),u("div",se,[a(l(m),null,{default:t(()=>[...e[17]||(e[17]=[d("Rango de Fechas",-1)])]),_:1}),u("div",oe,[a(l(R),null,{default:t(()=>[a(l(S),{"as-child":""},{default:t(()=>[a(l(v),{variant:"outline",class:"w-full justify-start text-left font-normal"},{default:t(()=>[a(l(X),{class:"mr-2 h-4 w-4"}),o.value.fecha_inicio||o.value.fecha_fin?(n(),f("span",ie,b(o.value.fecha_inicio?A(o.value.fecha_inicio):"...")+" - "+b(o.value.fecha_fin?A(o.value.fecha_fin):"..."),1)):(n(),f("span",ue,"Seleccionar rango"))]),_:1})]),_:1}),a(l(O),{class:"w-auto p-0",align:"start"},{default:t(()=>[u("div",ne,[u("div",null,[a(l(m),{class:"text-xs"},{default:t(()=>[...e[18]||(e[18]=[d("Desde",-1)])]),_:1}),u("input",{type:"date",value:o.value.fecha_inicio||"",onInput:e[6]||(e[6]=s=>_("fecha_inicio",s.target.value)),class:"w-full mt-1 px-3 py-2 border rounded-md text-sm"},null,40,de)]),u("div",null,[a(l(m),{class:"text-xs"},{default:t(()=>[...e[19]||(e[19]=[d("Hasta",-1)])]),_:1}),u("input",{type:"date",value:o.value.fecha_fin||"",onInput:e[7]||(e[7]=s=>_("fecha_fin",s.target.value)),class:"w-full mt-1 px-3 py-2 border rounded-md text-sm"},null,40,re)])])]),_:1})]),_:1}),o.value.fecha_inicio||o.value.fecha_fin?(n(),r(l(v),{key:0,variant:"ghost",size:"icon",onClick:e[8]||(e[8]=s=>{g("fecha_inicio"),g("fecha_fin")})},{default:t(()=>[a(l(y),{class:"h-4 w-4"})]),_:1})):c("",!0)])])])]}),_:1})]),_:1})):(n(),f("div",fe,[u("div",ce,[u("div",ve,[a(l(L),{class:"h-4 w-4"}),e[20]||(e[20]=u("h3",{class:"text-sm font-medium"},"Filtros",-1))]),z.value?(n(),r(l(v),{key:0,variant:"ghost",size:"sm",onClick:T},{default:t(()=>[a(l(y),{class:"h-4 w-4 mr-1"}),e[21]||(e[21]=d(" Limpiar ",-1))]),_:1})):c("",!0)]),e[22]||(e[22]=u("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},null,-1))]))}});export{$e as _};
