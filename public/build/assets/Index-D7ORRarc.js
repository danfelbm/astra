import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DQbGPnII.js";import{d as M,c as R,k as U,a as u,o as d,b as s,u as e,m as T,e as a,f as r,j as x,i as k,W as $,g as l,P as D,F as h,r as P,t as n,n as q}from"./app-BYrg8azN.js";import{c as W,_ as m}from"./createLucideIcon-DxPAJKhv.js";import{_ as G,c as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-DlaYTSU0.js";import{_ as O,a as Q,b as w,c as _,d as H,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-DA83G40E.js";import{_ as y}from"./index-Dnt_evNg.js";import{_ as K,a as X,b as Y,c as Z,d as ee,e as te,f as se,g as ae}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-COIixYkt.js";import{_ as ie,C as oe}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-CzmOeAUW.js";import{U as re}from"./upload-BchiVH36.js";import{P as le}from"./plus-B3vGyxqV.js";import{S as ne}from"./square-pen-D-cLpqDe.js";import{T as de}from"./trash-CMunGhxx.js";import{C as ue}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CKhh5LrD.js";import"./Input.vue_vue_type_script_setup_true_lang-cNMPFlQg.js";import"./index-C0uR22Wz.js";import"./index-CtsYRsim.js";import"./check-Dnm50LWO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DXoi_pIi.js";import"./Label.vue_vue_type_script_setup_true_lang-CpYAXHQ5.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D0KTl89S.js";import"./VisuallyHidden-Cjvdecbm.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DhSQWsLU.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Dy7n7nzo.js";import"./users-CRqqnxs_.js";import"./index-Cwqy0GLJ.js";import"./briefcase-DHuSDdT_.js";import"./calendar-DjYpadyA.js";import"./circle-alert-GYpGhiYY.js";import"./map-pin-KZYz5i_q.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-BYbvIOKB.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-ClNiAvK8.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BI1AQjqC.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-dnbJ1bBd.js";import"./loader-circle-CwiqlADS.js";import"./trash-2-MIyhm2eH.js";import"./search-Qj_NuFPJ.js";import"./history-BXno1Gm2.js";import"./save-D_jPM-Ia.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=W("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),fe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ce={class:"flex items-center justify-between"},pe={class:"flex gap-2"},_e={class:"rounded-md border"},ve={class:"font-medium"},ge={class:"text-sm text-muted-foreground"},xe={key:0,class:"text-xs text-muted-foreground"},ke={class:"text-xs text-muted-foreground"},be={key:0,class:"flex flex-wrap gap-1"},$e=["title"],he={class:"text-sm text-muted-foreground"},we={class:"flex justify-end gap-1"},ye={key:0,class:"flex items-center justify-between mt-4"},Ce={class:"text-sm text-muted-foreground"},Se={class:"flex items-center space-x-2"},Ue={class:"text-sm"},De={key:0},_t=M({__name:"Index",props:{users:{},filters:{},filterFieldsConfig:{},canImport:{type:Boolean}},setup(A){const v=A,{route:c}=window,F=R(()=>({quickSearch:v.filters.search||"",rootGroup:v.filters.advanced_filters?JSON.parse(v.filters.advanced_filters):void 0})),B=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"}],b=U(!1),p=U(null),I={fields:v.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["name","email","documento_identidad","telefono"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},N=i=>{$.post(c("admin.usuarios.toggle-active",i.id),{},{preserveScroll:!0})},V=i=>{p.value=i,b.value=!0},j=()=>{p.value&&$.delete(c("admin.usuarios.destroy",p.value.id),{preserveScroll:!0}),b.value=!1,p.value=null},z=i=>{switch(i){case"super_admin":return"destructive";case"admin":case"Admin":return"default";case"manager":case"Manager":return"default";case"moderador":case"Moderador":return"outline";default:return"secondary"}},L=i=>i?"default":"destructive",C=i=>{const t=[];return i.localidad&&t.push(i.localidad.nombre),i.municipio&&t.push(i.municipio.nombre),i.departamento&&t.push(i.departamento.nombre),i.territorio&&t.push(i.territorio.nombre),t.join(", ")||"Sin ubicación"},S=i=>{$.get(c("admin.usuarios.index"),{...v.filters,page:i},{preserveState:!0,preserveScroll:!0})};return(i,t)=>(d(),u(h,null,[s(e(T),{title:"Usuarios"}),s(E,{breadcrumbs:B},{default:a(()=>[r("div",fe,[r("div",ce,[t[6]||(t[6]=r("div",null,[r("h1",{class:"text-3xl font-bold tracking-tight"},"Usuarios"),r("p",{class:"text-muted-foreground"}," Administra los usuarios del sistema ")],-1)),r("div",pe,[i.canImport?(d(),x(e(m),{key:0,variant:"outline",onClick:t[0]||(t[0]=o=>e($).visit("/admin/imports"))},{default:a(()=>[s(e(re),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=l(" Importar CSV "))]),_:1})):k("",!0),s(e(D),{href:e(c)("admin.usuarios.create")},{default:a(()=>[s(e(m),null,{default:a(()=>[s(e(le),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=l(" Nuevo Usuario "))]),_:1})]),_:1},8,["href"])])]),s(ie,{config:I,route:e(c)("admin.usuarios.index"),"initial-filters":F.value},null,8,["route","initial-filters"]),s(e(G),null,{default:a(()=>[s(e(J),{class:"pt-6"},{default:a(()=>[r("div",_e,[s(e(O),null,{default:a(()=>[s(e(Q),null,{default:a(()=>[s(e(w),null,{default:a(()=>[s(e(_),null,{default:a(()=>t[7]||(t[7]=[l("Usuario")])),_:1}),s(e(_),null,{default:a(()=>t[8]||(t[8]=[l("Rol")])),_:1}),s(e(_),null,{default:a(()=>t[9]||(t[9]=[l("Ubicación")])),_:1}),s(e(_),null,{default:a(()=>t[10]||(t[10]=[l("Estado")])),_:1}),s(e(_),null,{default:a(()=>t[11]||(t[11]=[l("Registro")])),_:1}),s(e(_),{class:"text-right"},{default:a(()=>t[12]||(t[12]=[l("Acciones")])),_:1})]),_:1})]),_:1}),s(e(H),null,{default:a(()=>[(d(!0),u(h,null,P(i.users.data,o=>(d(),x(e(w),{key:o.id},{default:a(()=>[s(e(f),null,{default:a(()=>[r("div",null,[r("div",ve,n(o.name),1),r("div",ge,n(o.email),1),o.documento_identidad?(d(),u("div",xe," Doc: "+n(o.documento_identidad),1)):k("",!0),r("div",ke," ID: "+n(o.id),1)])]),_:2},1024),s(e(f),null,{default:a(()=>[o.roles&&o.roles.length>0?(d(),u("div",be,[(d(!0),u(h,null,P(o.roles,g=>(d(),x(e(y),{key:g.id,variant:z(g.name)},{default:a(()=>[l(n(g.display_name),1)]),_:2},1032,["variant"]))),128))])):(d(),x(e(y),{key:1,variant:"secondary"},{default:a(()=>t[13]||(t[13]=[l(" Sin rol ")])),_:1}))]),_:2},1024),s(e(f),null,{default:a(()=>[r("div",{class:"max-w-[200px] truncate text-sm",title:C(o)},n(C(o)),9,$e)]),_:2},1024),s(e(f),null,{default:a(()=>[s(e(y),{variant:L(o.activo)},{default:a(()=>[l(n(o.activo?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(f),null,{default:a(()=>[r("div",he,n(new Date(o.created_at).toLocaleDateString()),1)]),_:2},1024),s(e(f),null,{default:a(()=>[r("div",we,[s(e(D),{href:e(c)("admin.usuarios.edit",o.id)},{default:a(()=>[s(e(m),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:a(()=>[s(e(ne),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),s(e(m),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:g=>N(o),title:o.activo?"Desactivar":"Activar"},{default:a(()=>[s(e(me),{class:q(["h-4 w-4",o.activo?"text-green-600":"text-gray-400"])},null,8,["class"])]),_:2},1032,["onClick","title"]),s(e(m),{variant:"ghost",size:"icon",class:"h-8 w-8 hover:text-destructive",onClick:g=>V(o)},{default:a(()=>[s(e(de),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),i.users.data.length===0?(d(),x(e(w),{key:0},{default:a(()=>[s(e(f),{colspan:"6",class:"text-center"},{default:a(()=>t[14]||(t[14]=[r("div",{class:"py-12 text-muted-foreground"}," No se encontraron usuarios ",-1)])),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),i.users.last_page>1?(d(),u("div",ye,[r("div",Ce," Mostrando "+n(i.users.from)+" a "+n(i.users.to)+" de "+n(i.users.total)+" resultados ",1),r("div",Se,[s(e(m),{variant:"outline",size:"sm",disabled:i.users.current_page===1,onClick:t[1]||(t[1]=o=>S(i.users.current_page-1))},{default:a(()=>[s(e(oe),{class:"h-4 w-4"}),t[15]||(t[15]=l(" Anterior "))]),_:1},8,["disabled"]),r("div",Ue," Página "+n(i.users.current_page)+" de "+n(i.users.last_page),1),s(e(m),{variant:"outline",size:"sm",disabled:i.users.current_page===i.users.last_page,onClick:t[2]||(t[2]=o=>S(i.users.current_page+1))},{default:a(()=>[t[16]||(t[16]=l(" Siguiente ")),s(e(ue),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):k("",!0)]),_:1})]),_:1})]),s(e(K),{open:b.value,"onUpdate:open":t[3]||(t[3]=o=>b.value=o)},{default:a(()=>[s(e(X),null,{default:a(()=>[s(e(Y),null,{default:a(()=>[s(e(Z),null,{default:a(()=>t[17]||(t[17]=[l("¿Estás seguro?")])),_:1}),s(e(ee),null,{default:a(()=>[t[18]||(t[18]=l(" Esta acción no se puede deshacer. Se eliminará permanentemente el usuario ")),p.value?(d(),u("strong",De,n(p.value.name),1)):k("",!0),t[19]||(t[19]=l(" del sistema. "))]),_:1})]),_:1}),s(e(te),null,{default:a(()=>[s(e(se),null,{default:a(()=>t[20]||(t[20]=[l("Cancelar")])),_:1}),s(e(ae),{onClick:j,class:"bg-destructive text-destructive-foreground"},{default:a(()=>t[21]||(t[21]=[l(" Eliminar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{_t as default};
