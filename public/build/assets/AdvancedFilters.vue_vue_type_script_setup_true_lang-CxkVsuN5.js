import{k as ee,c as S,w as Me,d as U,Y as nr,p as Dt,j as x,o as h,e as d,H as R,f as V,u as l,t as T,g as O,D as j,A as Sa,h as Ea,M as Za,aZ as da,aG as ca,b as v,a as E,F as re,r as ne,n as na,i as L,be as lr,W as or,l as sr}from"./app-DqUUG6Uh.js";import{P as le,c as xt,a as ie,d as Fa,_ as X,e as ir}from"./createLucideIcon-fihB36_E.js";import{u as ja,n as de,a as fe}from"./Label.vue_vue_type_script_setup_true_lang-DBH3RslB.js";import{_ as ur,C as dr}from"./index-Dv-N3nwb.js";import{c as Xe,_ as ea,a as cr,b as fr}from"./CardTitle.vue_vue_type_script_setup_true_lang-BgMXDg7e.js";import{_ as mr}from"./CardDescription.vue_vue_type_script_setup_true_lang-CjsvxRD5.js";import{C as vr,e as hr,f as pr,k as yr,l as Ka,g as za,d as gr,m as $r,n as br}from"./AppLayout.vue_vue_type_script_setup_true_lang-DXwxsvvK.js";import{C as _r,X as Oa,_ as Cr,a as wr,b as Dr,c as xr,d as Mr,e as Ar}from"./DialogTitle.vue_vue_type_script_setup_true_lang-VfKRmWZM.js";import{_ as kr}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-wePZGNCu.js";import{a as Ee,b as Oe,c as Pe,d as $e,_ as Be,l as Sr,C as Er}from"./SelectValue.vue_vue_type_script_setup_true_lang-BfjlA0yq.js";import{i as Or,u as Mt,b as Pr,c as Br,e as Vr,d as pe}from"./VisuallyHidden-C65ewHkz.js";import{u as Ur,_ as Ir,a as qr,b as Fr}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DHVOv7YH.js";import{f as Gr,e as Xa}from"./es-DfN3vIXC.js";import{_ as ha}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-B-4nWNsC.js";import{L as Rr}from"./loader-circle-BymuSi6n.js";import{T as At}from"./trash-2-mazZLuKr.js";import{P as et}from"./plus-Cq8vfEh_.js";import{S as Nr}from"./search-FCxU_t5s.js";import{C as at}from"./check-DFZdBX2N.js";import{H as Tr}from"./history-Md_K4c3Y.js";import{S as Yr}from"./save-BRONYL_b.js";function Ve(a,e){return a-e*Math.floor(a/e)}const kt=1721426;function xe(a,e,t,r){e=Qe(a,e);let n=e-1,o=-2;return t<=2?o=0:be(e)&&(o=-1),kt-1+365*n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400)+Math.floor((367*t-362)/12+o+r)}function be(a){return a%4===0&&(a%100!==0||a%400===0)}function Qe(a,e){return a==="BC"?1-e:e}function fa(a){let e="AD";return a<=0&&(e="BC",a=1-a),[e,a]}const Lr={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class se{fromJulianDay(e){let t=e,r=t-kt,n=Math.floor(r/146097),o=Ve(r,146097),s=Math.floor(o/36524),m=Ve(o,36524),i=Math.floor(m/1461),c=Ve(m,1461),A=Math.floor(c/365),w=n*400+s*100+i*4+A+(s!==4&&A!==4?1:0),[y,f]=fa(w),$=t-xe(y,f,1,1),b=2;t<xe(y,f,3,1)?b=0:be(f)&&(b=1);let p=Math.floor((($+b)*12+373)/367),_=t-xe(y,f,p,1)+1;return new J(y,f,p,_)}toJulianDay(e){return xe(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return Lr[be(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return be(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const Jr={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function qe(a,e){return e=ae(e,a.calendar),a.era===e.era&&a.year===e.year&&a.month===e.month&&a.day===e.day}function Hr(a,e){return e=ae(e,a.calendar),a=We(a),e=We(e),a.era===e.era&&a.year===e.year&&a.month===e.month}function pa(a,e){return a.calendar.identifier===e.calendar.identifier&&a.era===e.era&&a.year===e.year&&a.month===e.month&&a.day===e.day}function tt(a,e){return a=We(a),e=We(e),a.calendar.identifier===e.calendar.identifier&&a.era===e.era&&a.year===e.year&&a.month===e.month}function Wr(a,e){return qe(a,Et(e))}function St(a,e,t){let r=a.calendar.toJulianDay(a),n=Kr(e),o=Math.ceil(r+1-n)%7;return o<0&&(o+=7),o}function Qr(a){return ve(Date.now(),a)}function Et(a){return en(Qr(a))}function Ot(a,e){return a.calendar.toJulianDay(a)-e.calendar.toJulianDay(e)}function Zr(a,e){return rt(a)-rt(e)}function rt(a){return a.hour*36e5+a.minute*6e4+a.second*1e3+a.millisecond}let ya=null;function Ze(){return ya==null&&(ya=new Intl.DateTimeFormat().resolvedOptions().timeZone),ya}function We(a){return a.subtract({days:a.day-1})}function nt(a){return a.add({days:a.calendar.getDaysInMonth(a)-a.day})}const lt=new Map;function jr(a){if(Intl.Locale){let t=lt.get(a);return t||(t=new Intl.Locale(a).maximize().region,t&&lt.set(a,t)),t}let e=a.split("-")[1];return e==="u"?void 0:e}function Kr(a){let e=jr(a);return e&&Jr[e]||0}function Fe(a){a=ae(a,new se);let e=Qe(a.era,a.year);return Pt(e,a.month,a.day,a.hour,a.minute,a.second,a.millisecond)}function Pt(a,e,t,r,n,o,s){let m=new Date;return m.setUTCHours(r,n,o,s),m.setUTCFullYear(a,e-1,t),m.getTime()}function Pa(a,e){if(e==="UTC")return 0;if(a>0&&e===Ze())return new Date(a).getTimezoneOffset()*-6e4;let{year:t,month:r,day:n,hour:o,minute:s,second:m}=Bt(a,e);return Pt(t,r,n,o,s,m,0)-Math.floor(a/1e3)*1e3}const ot=new Map;function Bt(a,e){let t=ot.get(e);t||(t=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),ot.set(e,t));let r=t.formatToParts(new Date(a)),n={};for(let o of r)o.type!=="literal"&&(n[o.type]=o.value);return{year:n.era==="BC"||n.era==="B"?-n.year+1:+n.year,month:+n.month,day:+n.day,hour:n.hour==="24"?0:+n.hour,minute:+n.minute,second:+n.second}}const st=864e5;function zr(a,e,t,r){return(t===r?[t]:[t,r]).filter(o=>Xr(a,e,o))}function Xr(a,e,t){let r=Bt(t,e);return a.year===r.year&&a.month===r.month&&a.day===r.day&&a.hour===r.hour&&a.minute===r.minute&&a.second===r.second}function me(a,e,t="compatible"){let r=Ge(a);if(e==="UTC")return Fe(r);if(e===Ze()&&t==="compatible"){r=ae(r,new se);let i=new Date,c=Qe(r.era,r.year);return i.setFullYear(c,r.month-1,r.day),i.setHours(r.hour,r.minute,r.second,r.millisecond),i.getTime()}let n=Fe(r),o=Pa(n-st,e),s=Pa(n+st,e),m=zr(r,e,n-o,n-s);if(m.length===1)return m[0];if(m.length>1)switch(t){case"compatible":case"earlier":return m[0];case"later":return m[m.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(t){case"earlier":return Math.min(n-o,n-s);case"compatible":case"later":return Math.max(n-o,n-s);case"reject":throw new RangeError("No such absolute time found")}}function Vt(a,e,t="compatible"){return new Date(me(a,e,t))}function ve(a,e){let t=Pa(a,e),r=new Date(a+t),n=r.getUTCFullYear(),o=r.getUTCMonth()+1,s=r.getUTCDate(),m=r.getUTCHours(),i=r.getUTCMinutes(),c=r.getUTCSeconds(),A=r.getUTCMilliseconds();return new Ne(n<1?"BC":"AD",n<1?-n+1:n,o,s,e,t,m,i,c,A)}function en(a){return new J(a.calendar,a.era,a.year,a.month,a.day)}function Ge(a,e){let t=0,r=0,n=0,o=0;if("timeZone"in a)({hour:t,minute:r,second:n,millisecond:o}=a);else if("hour"in a&&!e)return a;return e&&({hour:t,minute:r,second:n,millisecond:o}=e),new Re(a.calendar,a.era,a.year,a.month,a.day,t,r,n,o)}function ae(a,e){if(a.calendar.identifier===e.identifier)return a;let t=e.fromJulianDay(a.calendar.toJulianDay(a)),r=a.copy();return r.calendar=e,r.era=t.era,r.year=t.year,r.month=t.month,r.day=t.day,Ae(r),r}function an(a,e,t){if(a instanceof Ne)return a.timeZone===e?a:rn(a,e);let r=me(a,e,t);return ve(r,e)}function tn(a){let e=Fe(a)-a.offset;return new Date(e)}function rn(a,e){let t=Fe(a)-a.offset;return ae(ve(t,e),a.calendar)}const Le=36e5;function ma(a,e){let t=a.copy(),r="hour"in t?sn(t,e):0;Ba(t,e.years||0),t.calendar.balanceYearMonth&&t.calendar.balanceYearMonth(t,a),t.month+=e.months||0,Va(t),Ut(t),t.day+=(e.weeks||0)*7,t.day+=e.days||0,t.day+=r,nn(t),t.calendar.balanceDate&&t.calendar.balanceDate(t),t.year<1&&(t.year=1,t.month=1,t.day=1);let n=t.calendar.getYearsInEra(t);if(t.year>n){var o,s;let i=(o=(s=t.calendar).isInverseEra)===null||o===void 0?void 0:o.call(s,t);t.year=n,t.month=i?1:t.calendar.getMonthsInYear(t),t.day=i?1:t.calendar.getDaysInMonth(t)}t.month<1&&(t.month=1,t.day=1);let m=t.calendar.getMonthsInYear(t);return t.month>m&&(t.month=m,t.day=t.calendar.getDaysInMonth(t)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day)),t}function Ba(a,e){var t,r;!((t=(r=a.calendar).isInverseEra)===null||t===void 0)&&t.call(r,a)&&(e=-e),a.year+=e}function Va(a){for(;a.month<1;)Ba(a,-1),a.month+=a.calendar.getMonthsInYear(a);let e=0;for(;a.month>(e=a.calendar.getMonthsInYear(a));)a.month-=e,Ba(a,1)}function nn(a){for(;a.day<1;)a.month--,Va(a),a.day+=a.calendar.getDaysInMonth(a);for(;a.day>a.calendar.getDaysInMonth(a);)a.day-=a.calendar.getDaysInMonth(a),a.month++,Va(a)}function Ut(a){a.month=Math.max(1,Math.min(a.calendar.getMonthsInYear(a),a.month)),a.day=Math.max(1,Math.min(a.calendar.getDaysInMonth(a),a.day))}function Ae(a){a.calendar.constrainDate&&a.calendar.constrainDate(a),a.year=Math.max(1,Math.min(a.calendar.getYearsInEra(a),a.year)),Ut(a)}function It(a){let e={};for(let t in a)typeof a[t]=="number"&&(e[t]=-a[t]);return e}function qt(a,e){return ma(a,It(e))}function Ga(a,e){let t=a.copy();return e.era!=null&&(t.era=e.era),e.year!=null&&(t.year=e.year),e.month!=null&&(t.month=e.month),e.day!=null&&(t.day=e.day),Ae(t),t}function la(a,e){let t=a.copy();return e.hour!=null&&(t.hour=e.hour),e.minute!=null&&(t.minute=e.minute),e.second!=null&&(t.second=e.second),e.millisecond!=null&&(t.millisecond=e.millisecond),on(t),t}function ln(a){a.second+=Math.floor(a.millisecond/1e3),a.millisecond=Ke(a.millisecond,1e3),a.minute+=Math.floor(a.second/60),a.second=Ke(a.second,60),a.hour+=Math.floor(a.minute/60),a.minute=Ke(a.minute,60);let e=Math.floor(a.hour/24);return a.hour=Ke(a.hour,24),e}function on(a){a.millisecond=Math.max(0,Math.min(a.millisecond,1e3)),a.second=Math.max(0,Math.min(a.second,59)),a.minute=Math.max(0,Math.min(a.minute,59)),a.hour=Math.max(0,Math.min(a.hour,23))}function Ke(a,e){let t=a%e;return t<0&&(t+=e),t}function sn(a,e){return a.hour+=e.hours||0,a.minute+=e.minutes||0,a.second+=e.seconds||0,a.millisecond+=e.milliseconds||0,ln(a)}function Ra(a,e,t,r){let n=a.copy();switch(e){case"era":{let m=a.calendar.getEras(),i=m.indexOf(a.era);if(i<0)throw new Error("Invalid era: "+a.era);i=he(i,t,0,m.length-1,r==null?void 0:r.round),n.era=m[i],Ae(n);break}case"year":var o,s;!((o=(s=n.calendar).isInverseEra)===null||o===void 0)&&o.call(s,n)&&(t=-t),n.year=he(a.year,t,-1/0,9999,r==null?void 0:r.round),n.year===-1/0&&(n.year=1),n.calendar.balanceYearMonth&&n.calendar.balanceYearMonth(n,a);break;case"month":n.month=he(a.month,t,1,a.calendar.getMonthsInYear(a),r==null?void 0:r.round);break;case"day":n.day=he(a.day,t,1,a.calendar.getDaysInMonth(a),r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return a.calendar.balanceDate&&a.calendar.balanceDate(n),Ae(n),n}function Ft(a,e,t,r){let n=a.copy();switch(e){case"hour":{let o=a.hour,s=0,m=23;if((r==null?void 0:r.hourCycle)===12){let i=o>=12;s=i?12:0,m=i?23:11}n.hour=he(o,t,s,m,r==null?void 0:r.round);break}case"minute":n.minute=he(a.minute,t,0,59,r==null?void 0:r.round);break;case"second":n.second=he(a.second,t,0,59,r==null?void 0:r.round);break;case"millisecond":n.millisecond=he(a.millisecond,t,0,999,r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return n}function he(a,e,t,r,n=!1){if(n){a+=Math.sign(e),a<t&&(a=r);let o=Math.abs(e);e>0?a=Math.ceil(a/o)*o:a=Math.floor(a/o)*o,a>r&&(a=t)}else a+=e,a<t?a=r-(t-a-1):a>r&&(a=t+(a-r-1));return a}function Gt(a,e){let t;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let n=ma(Ge(a),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});t=me(n,a.timeZone)}else t=Fe(a)-a.offset;t+=e.milliseconds||0,t+=(e.seconds||0)*1e3,t+=(e.minutes||0)*6e4,t+=(e.hours||0)*36e5;let r=ve(t,a.timeZone);return ae(r,a.calendar)}function un(a,e){return Gt(a,It(e))}function dn(a,e,t,r){switch(e){case"hour":{let n=0,o=23;if((r==null?void 0:r.hourCycle)===12){let $=a.hour>=12;n=$?12:0,o=$?23:11}let s=Ge(a),m=ae(la(s,{hour:n}),new se),i=[me(m,a.timeZone,"earlier"),me(m,a.timeZone,"later")].filter($=>ve($,a.timeZone).day===m.day)[0],c=ae(la(s,{hour:o}),new se),A=[me(c,a.timeZone,"earlier"),me(c,a.timeZone,"later")].filter($=>ve($,a.timeZone).day===c.day).pop(),w=Fe(a)-a.offset,y=Math.floor(w/Le),f=w%Le;return w=he(y,t,Math.floor(i/Le),Math.floor(A/Le),r==null?void 0:r.round)*Le+f,ae(ve(w,a.timeZone),a.calendar)}case"minute":case"second":case"millisecond":return Ft(a,e,t,r);case"era":case"year":case"month":case"day":{let n=Ra(Ge(a),e,t,r),o=me(n,a.timeZone);return ae(ve(o,a.timeZone),a.calendar)}default:throw new Error("Unsupported field "+e)}}function cn(a,e,t){let r=Ge(a),n=la(Ga(r,e),e);if(n.compare(r)===0)return a;let o=me(n,a.timeZone,t);return ae(ve(o,a.timeZone),a.calendar)}function fn(a){return`${String(a.hour).padStart(2,"0")}:${String(a.minute).padStart(2,"0")}:${String(a.second).padStart(2,"0")}${a.millisecond?String(a.millisecond/1e3).slice(1):""}`}function Rt(a){let e=ae(a,new se),t;return e.era==="BC"?t=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):t=String(e.year).padStart(4,"0"),`${t}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function Nt(a){return`${Rt(a)}T${fn(a)}`}function mn(a){let e=Math.sign(a)<0?"-":"+";a=Math.abs(a);let t=Math.floor(a/36e5),r=a%36e5/6e4;return`${e}${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function vn(a){return`${Nt(a)}${mn(a.offset)}[${a.timeZone}]`}function hn(a,e){if(e.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Na(a,e,t){hn(a,e),e.set(a,t)}function Ta(a){let e=typeof a[0]=="object"?a.shift():new se,t;if(typeof a[0]=="string")t=a.shift();else{let s=e.getEras();t=s[s.length-1]}let r=a.shift(),n=a.shift(),o=a.shift();return[e,t,r,n,o]}var pn=new WeakMap;class J{copy(){return this.era?new J(this.calendar,this.era,this.year,this.month,this.day):new J(this.calendar,this.year,this.month,this.day)}add(e){return ma(this,e)}subtract(e){return qt(this,e)}set(e){return Ga(this,e)}cycle(e,t,r){return Ra(this,e,t,r)}toDate(e){return Vt(this,e)}toString(){return Rt(this)}compare(e){return Ot(this,e)}constructor(...e){Na(this,pn,{writable:!0,value:void 0});let[t,r,n,o,s]=Ta(e);this.calendar=t,this.era=r,this.year=n,this.month=o,this.day=s,Ae(this)}}var yn=new WeakMap;class Re{copy(){return this.era?new Re(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new Re(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return ma(this,e)}subtract(e){return qt(this,e)}set(e){return Ga(la(this,e),e)}cycle(e,t,r){switch(e){case"era":case"year":case"month":case"day":return Ra(this,e,t,r);default:return Ft(this,e,t,r)}}toDate(e,t){return Vt(this,e,t)}toString(){return Nt(this)}compare(e){let t=Ot(this,e);return t===0?Zr(this,Ge(e)):t}constructor(...e){Na(this,yn,{writable:!0,value:void 0});let[t,r,n,o,s]=Ta(e);this.calendar=t,this.era=r,this.year=n,this.month=o,this.day=s,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Ae(this)}}var gn=new WeakMap;class Ne{copy(){return this.era?new Ne(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new Ne(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return Gt(this,e)}subtract(e){return un(this,e)}set(e,t){return cn(this,e,t)}cycle(e,t,r){return dn(this,e,t,r)}toDate(){return tn(this)}toString(){return vn(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-an(e,this.timeZone).toDate().getTime()}constructor(...e){Na(this,gn,{writable:!0,value:void 0});let[t,r,n,o,s]=Ta(e),m=e.shift(),i=e.shift();this.calendar=t,this.era=r,this.year=n,this.month=o,this.day=s,this.timeZone=m,this.offset=i,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Ae(this)}}const Ue=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],$n=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],aa=[1867,1911,1925,1988,2018],ge=["meiji","taisho","showa","heisei","reiwa"];function it(a){const e=Ue.findIndex(([t,r,n])=>a.year<t||a.year===t&&a.month<r||a.year===t&&a.month===r&&a.day<n);return e===-1?Ue.length-1:e===0?0:e-1}function ga(a){let e=aa[ge.indexOf(a.era)];if(!e)throw new Error("Unknown era: "+a.era);return new J(a.year+e,a.month,a.day)}class bn extends se{fromJulianDay(e){let t=super.fromJulianDay(e),r=it(t);return new J(this,ge[r],t.year-aa[r],t.month,t.day)}toJulianDay(e){return super.toJulianDay(ga(e))}balanceDate(e){let t=ga(e),r=it(t);ge[r]!==e.era&&(e.era=ge[r],e.year=t.year-aa[r]),this.constrainDate(e)}constrainDate(e){let t=ge.indexOf(e.era),r=$n[t];if(r!=null){let[n,o,s]=r,m=n-aa[t];e.year=Math.max(1,Math.min(m,e.year)),e.year===m&&(e.month=Math.min(o,e.month),e.month===o&&(e.day=Math.min(s,e.day)))}if(e.year===1&&t>=0){let[,n,o]=Ue[t];e.month=Math.max(n,e.month),e.month===n&&(e.day=Math.max(o,e.day))}}getEras(){return ge}getYearsInEra(e){let t=ge.indexOf(e.era),r=Ue[t],n=Ue[t+1];if(n==null)return 9999-r[0]+1;let o=n[0]-r[0];return(e.month<n[1]||e.month===n[1]&&e.day<n[2])&&o++,o}getDaysInMonth(e){return super.getDaysInMonth(ga(e))}getMinimumMonthInYear(e){let t=ut(e);return t?t[1]:1}getMinimumDayInMonth(e){let t=ut(e);return t&&e.month===t[1]?t[2]:1}constructor(...e){super(...e),this.identifier="japanese"}}function ut(a){if(a.year===1){let e=ge.indexOf(a.era);return Ue[e]}}const Tt=-543;class _n extends se{fromJulianDay(e){let t=super.fromJulianDay(e),r=Qe(t.era,t.year);return new J(this,r-Tt,t.month,t.day)}toJulianDay(e){return super.toJulianDay(dt(e))}getEras(){return["BE"]}getDaysInMonth(e){return super.getDaysInMonth(dt(e))}balanceDate(){}constructor(...e){super(...e),this.identifier="buddhist"}}function dt(a){let[e,t]=fa(a.year+Tt);return new J(e,t,a.month,a.day)}const oa=1911;function Yt(a){return a.era==="minguo"?a.year+oa:1-a.year+oa}function ct(a){let e=a-oa;return e>0?["minguo",e]:["before_minguo",1-e]}class Cn extends se{fromJulianDay(e){let t=super.fromJulianDay(e),r=Qe(t.era,t.year),[n,o]=ct(r);return new J(this,n,o,t.month,t.day)}toJulianDay(e){return super.toJulianDay(ft(e))}getEras(){return["before_minguo","minguo"]}balanceDate(e){let[t,r]=ct(Yt(e));e.era=t,e.year=r}isInverseEra(e){return e.era==="before_minguo"}getDaysInMonth(e){return super.getDaysInMonth(ft(e))}getYearsInEra(e){return e.era==="before_minguo"?9999:9999-oa}constructor(...e){super(...e),this.identifier="roc"}}function ft(a){let[e,t]=fa(Yt(a));return new J(e,t,a.month,a.day)}const mt=1948320,vt=[0,31,62,93,124,155,186,216,246,276,306,336];class wn{fromJulianDay(e){let t=e-mt,r=1+Math.floor((33*t+3)/12053),n=365*(r-1)+Math.floor((8*r+21)/33),o=t-n,s=o<216?Math.floor(o/31):Math.floor((o-6)/30),m=o-vt[s]+1;return new J(this,r,s+1,m)}toJulianDay(e){let t=mt-1+365*(e.year-1)+Math.floor((8*e.year+21)/33);return t+=vt[e.month-1],t+=e.day,t}getMonthsInYear(){return 12}getDaysInMonth(e){return e.month<=6?31:e.month<=11||Ve(25*e.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const $a=78,ht=80;class Dn extends se{fromJulianDay(e){let t=super.fromJulianDay(e),r=t.year-$a,n=e-xe(t.era,t.year,1,1),o;n<ht?(r--,o=be(t.year-1)?31:30,n+=o+155+90+10):(o=be(t.year)?31:30,n-=ht);let s,m;if(n<o)s=1,m=n+1;else{let i=n-o;i<155?(s=Math.floor(i/31)+2,m=i%31+1):(i-=155,s=Math.floor(i/30)+7,m=i%30+1)}return new J(this,r,s,m)}toJulianDay(e){let t=e.year+$a,[r,n]=fa(t),o,s;return be(n)?(o=31,s=xe(r,n,3,21)):(o=30,s=xe(r,n,3,22)),e.month===1?s+e.day-1:(s+=o+Math.min(e.month-2,5)*31,e.month>=8&&(s+=(e.month-7)*30),s+=e.day-1,s)}getDaysInMonth(e){return e.month===1&&be(e.year+$a)||e.month>=2&&e.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...e){super(...e),this.identifier="indian"}}const sa=1948440,pt=1948439,te=1300,Se=1600,xn=460322;function ia(a,e,t,r){return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+a-1}function Lt(a,e,t){let r=Math.floor((30*(t-e)+10646)/10631),n=Math.min(12,Math.ceil((t-(29+ia(e,r,1,1)))/29.5)+1),o=t-ia(e,r,n,1)+1;return new J(a,r,n,o)}function yt(a){return(14+11*a)%30<11}class Ya{fromJulianDay(e){return Lt(this,sa,e)}toJulianDay(e){return ia(sa,e.year,e.month,e.day)}getDaysInMonth(e){let t=29+e.month%2;return e.month===12&&yt(e.year)&&t++,t}getMonthsInYear(){return 12}getDaysInYear(e){return yt(e.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class Mn extends Ya{fromJulianDay(e){return Lt(this,pt,e)}toJulianDay(e){return ia(pt,e.year,e.month,e.day)}constructor(...e){super(...e),this.identifier="islamic-tbla"}}const An="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let Ua,Ie;function ta(a){return xn+Ie[a-te]}function Je(a,e){let t=a-te,r=1<<11-(e-1);return Ua[t]&r?30:29}function gt(a,e){let t=ta(a);for(let r=1;r<e;r++)t+=Je(a,r);return t}function $t(a){return Ie[a+1-te]-Ie[a-te]}class kn extends Ya{fromJulianDay(e){let t=e-sa,r=ta(te),n=ta(Se);if(t<r||t>n)return super.fromJulianDay(e);{let o=te-1,s=1,m=1;for(;m>0;){o++,m=t-ta(o)+1;let i=$t(o);if(m===i){s=12;break}else if(m<i){let c=Je(o,s);for(s=1;m>c;)m-=c,s++,c=Je(o,s);break}}return new J(this,o,s,t-gt(o,s)+1)}}toJulianDay(e){return e.year<te||e.year>Se?super.toJulianDay(e):sa+gt(e.year,e.month)+(e.day-1)}getDaysInMonth(e){return e.year<te||e.year>Se?super.getDaysInMonth(e):Je(e.year,e.month)}getDaysInYear(e){return e.year<te||e.year>Se?super.getDaysInYear(e):$t(e.year)}constructor(){if(super(),this.identifier="islamic-umalqura",Ua||(Ua=new Uint16Array(Uint8Array.from(atob(An),e=>e.charCodeAt(0)).buffer)),!Ie){Ie=new Uint32Array(Se-te+1);let e=0;for(let t=te;t<=Se;t++){Ie[t-te]=e;for(let r=1;r<=12;r++)e+=Je(t,r)}}}}const bt=347997,Jt=1080,Ht=24*Jt,Sn=29,En=12*Jt+793,On=Sn*Ht+En;function De(a){return Ve(a*7+1,19)<7}function ra(a){let e=Math.floor((235*a-234)/19),t=12084+13753*e,r=e*29+Math.floor(t/25920);return Ve(3*(r+1),7)<3&&(r+=1),r}function Pn(a){let e=ra(a-1),t=ra(a);return ra(a+1)-t===356?2:t-e===382?1:0}function He(a){return ra(a)+Pn(a)}function Wt(a){return He(a+1)-He(a)}function Bn(a){let e=Wt(a);switch(e>380&&(e-=30),e){case 353:return 0;case 354:return 1;case 355:return 2}}function ze(a,e){if(e>=6&&!De(a)&&e++,e===4||e===7||e===9||e===11||e===13)return 29;let t=Bn(a);return e===2?t===2?30:29:e===3?t===0?29:30:e===6?De(a)?30:0:30}class Vn{fromJulianDay(e){let t=e-bt,r=t*Ht/On,n=Math.floor((19*r+234)/235)+1,o=He(n),s=Math.floor(t-o);for(;s<1;)n--,o=He(n),s=Math.floor(t-o);let m=1,i=0;for(;i<s;)i+=ze(n,m),m++;m--,i-=ze(n,m);let c=s-i;return new J(this,n,m,c)}toJulianDay(e){let t=He(e.year);for(let r=1;r<e.month;r++)t+=ze(e.year,r);return t+e.day+bt}getDaysInMonth(e){return ze(e.year,e.month)}getMonthsInYear(e){return De(e.year)?13:12}getDaysInYear(e){return Wt(e.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(e,t){t.year!==e.year&&(De(t.year)&&!De(e.year)&&t.month>6?e.month--:!De(t.year)&&De(e.year)&&t.month>6&&e.month++)}constructor(){this.identifier="hebrew"}}const Ia=1723856,_t=1824665,qa=5500;function ua(a,e,t,r){return a+365*e+Math.floor(e/4)+30*(t-1)+r-1}function La(a,e){let t=Math.floor(4*(e-a)/1461),r=1+Math.floor((e-ua(a,t,1,1))/30),n=e+1-ua(a,t,r,1);return[t,r,n]}function Qt(a){return Math.floor(a%4/3)}function Zt(a,e){return e%13!==0?30:Qt(a)+5}class Ja{fromJulianDay(e){let[t,r,n]=La(Ia,e),o="AM";return t<=0&&(o="AA",t+=qa),new J(this,o,t,r,n)}toJulianDay(e){let t=e.year;return e.era==="AA"&&(t-=qa),ua(Ia,t,e.month,e.day)}getDaysInMonth(e){return Zt(e.year,e.month)}getMonthsInYear(){return 13}getDaysInYear(e){return 365+Qt(e.year)}getYearsInEra(e){return e.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class Un extends Ja{fromJulianDay(e){let[t,r,n]=La(Ia,e);return t+=qa,new J(this,"AA",t,r,n)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...e){super(...e),this.identifier="ethioaa"}}class In extends Ja{fromJulianDay(e){let[t,r,n]=La(_t,e),o="CE";return t<=0&&(o="BCE",t=1-t),new J(this,o,t,r,n)}toJulianDay(e){let t=e.year;return e.era==="BCE"&&(t=1-t),ua(_t,t,e.month,e.day)}getDaysInMonth(e){let t=e.year;return e.era==="BCE"&&(t=1-t),Zt(t,e.month)}isInverseEra(e){return e.era==="BCE"}balanceDate(e){e.year<=0&&(e.era=e.era==="BCE"?"CE":"BCE",e.year=1-e.year)}getEras(){return["BCE","CE"]}getYearsInEra(e){return e.era==="BCE"?9999:9715}constructor(...e){super(...e),this.identifier="coptic"}}function qn(a){switch(a){case"buddhist":return new _n;case"ethiopic":return new Ja;case"ethioaa":return new Un;case"coptic":return new In;case"hebrew":return new Vn;case"indian":return new Dn;case"islamic-civil":return new Ya;case"islamic-tbla":return new Mn;case"islamic-umalqura":return new kn;case"japanese":return new bn;case"persian":return new wn;case"roc":return new Cn;case"gregory":default:return new se}}let ba=new Map;class ce{format(e){return this.formatter.format(e)}formatToParts(e){return this.formatter.formatToParts(e)}formatRange(e,t){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.formatter.format(e)} – ${this.formatter.format(t)}`}formatRangeToParts(e,t){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let r=this.formatter.formatToParts(e),n=this.formatter.formatToParts(t);return[...r.map(o=>({...o,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...n.map(o=>({...o,source:"endRange"}))]}resolvedOptions(){let e=this.formatter.resolvedOptions();return Rn()&&(this.resolvedHourCycle||(this.resolvedHourCycle=Nn(e.locale,this.options)),e.hourCycle=this.resolvedHourCycle,e.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),e.calendar==="ethiopic-amete-alem"&&(e.calendar="ethioaa"),e}constructor(e,t={}){this.formatter=jt(e,t),this.options=t}}const Fn={true:{ja:"h11"},false:{}};function jt(a,e={}){if(typeof e.hour12=="boolean"&&Gn()){e={...e};let n=Fn[String(e.hour12)][a.split("-")[0]],o=e.hour12?"h12":"h23";e.hourCycle=n??o,delete e.hour12}let t=a+(e?Object.entries(e).sort((n,o)=>n[0]<o[0]?-1:1).join():"");if(ba.has(t))return ba.get(t);let r=new Intl.DateTimeFormat(a,e);return ba.set(t,r),r}let _a=null;function Gn(){return _a==null&&(_a=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),_a}let Ca=null;function Rn(){return Ca==null&&(Ca=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),Ca}function Nn(a,e){if(!e.timeStyle&&!e.hour)return;a=a.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),a+=(a.includes("-u-")?"":"-u")+"-nu-latn";let t=jt(a,{...e,timeZone:void 0}),r=parseInt(t.formatToParts(new Date(2020,2,3,0)).find(o=>o.type==="hour").value,10),n=parseInt(t.formatToParts(new Date(2020,2,3,23)).find(o=>o.type==="hour").value,10);if(r===0&&n===23)return"h23";if(r===24&&n===23)return"h24";if(r===0&&n===11)return"h11";if(r===12&&n===11)return"h12";throw new Error("Unexpected hour cycle result")}function ue(a,e=Ze()){return Ha(a)?a.toDate():a.toDate(e)}function Tn(a){return a instanceof Re}function Ha(a){return a instanceof Ne}function Yn(a){return Tn(a)||Ha(a)}function ke(a){if(a instanceof Date){const e=a.getFullYear(),t=a.getMonth()+1;return new Date(e,t,0).getDate()}else return a.set({day:100}).day}function wa(a,e){return a.compare(e)<0}function Da(a,e){return a.compare(e)>0}function Ln(a,e,t){const r=St(a,t);return e>r?a.subtract({days:r+7-e}):e===r?a:a.subtract({days:r-e})}function Jn(a,e,t){const r=St(a,t),n=e===0?6:e-1;return r===n?a:r>n?a.add({days:7-r+n}):a.add({days:n-r})}function Hn(a){const{defaultValue:e,defaultPlaceholder:t,granularity:r="day",locale:n="en"}=a;if(Array.isArray(e)&&e.length)return e.at(-1).copy();if(e&&!Array.isArray(e))return e.copy();if(t)return t.copy();const o=new Date,s=o.getFullYear(),m=o.getMonth()+1,i=o.getDate(),c=["hour","minute","second"],A=new ce(n),w=qn(A.resolvedOptions().calendar);return c.includes(r??"day")?ae(new Re(s,m,i,0,0,0),w):ae(new J(s,m,i),w)}function Wn(a,e){const t=[];for(let r=0;r<a.length;r+=e)t.push(a.slice(r,r+e));return t}function Qn(a){const e=a.querySelector("[data-selected]");if(e)return e.focus();const t=a.querySelector("[data-today]");if(t)return t.focus();const r=a.querySelector("[data-reka-calendar-day]");if(r)return r.focus()}function Ct(a,e){const t=[];let r=a.add({days:1});const n=e;for(;r.compare(n)<0;)t.push(r),r=r.add({days:1});return t}function xa(a){const{dateObj:e,weekStartsOn:t,fixedWeeks:r,locale:n}=a,o=ke(e),s=Array.from({length:o},(p,_)=>e.set({day:_+1})),m=We(e),i=nt(e),c=Ln(m,t,n),A=Jn(i,t,n),w=Ct(c.subtract({days:1}),m),y=Ct(i,A.add({days:1})),f=w.length+s.length+y.length;if(r&&f<42){const p=42-f;let _=y[y.length-1];_||(_=nt(e));const k=Array.from({length:p},(C,P)=>{const Y=P+1;return _.add({days:Y})});y.push(...k)}const $=w.concat(s,y),b=Wn($,7);return{value:e,cells:$,rows:b}}function we(a){const{numberOfMonths:e,dateObj:t,...r}=a,n=[];if(!e||e===1)return n.push(xa({...r,dateObj:t})),n;n.push(xa({...r,dateObj:t}));for(let o=1;o<e;o++){const s=t.add({months:o});n.push(xa({...r,dateObj:s}))}return n}function Zn(a,e={}){const t=ee(a);function r(){return t.value}function n(p){t.value=p}function o(p,_){return new ce(t.value,{...e,..._}).format(p)}function s(p,_=!0){return Yn(p)&&_?o(ue(p),{dateStyle:"long",timeStyle:"long"}):o(ue(p),{dateStyle:"long"})}function m(p,_={}){return new ce(t.value,{...e,month:"long",year:"numeric",..._}).format(p)}function i(p,_={}){return new ce(t.value,{...e,month:"long",..._}).format(p)}function c(){const p=Et(Ze());return[1,2,3,4,5,6,7,8,9,10,11,12].map(k=>({label:i(ue(p.set({month:k}))),value:k}))}function A(p,_={}){return new ce(t.value,{...e,year:"numeric",..._}).format(p)}function w(p,_){return Ha(p)?new ce(t.value,{...e,..._,timeZone:p.timeZone}).formatToParts(ue(p)):new ce(t.value,{...e,..._}).formatToParts(ue(p))}function y(p,_="narrow"){return new ce(t.value,{...e,weekday:_}).format(p)}function f(p){var C;return((C=new ce(t.value,{...e,hour:"numeric",minute:"numeric"}).formatToParts(p).find(P=>P.type==="dayPeriod"))==null?void 0:C.value)==="PM"?"PM":"AM"}const $={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function b(p,_,k={}){const C={...$,...k},Y=w(p,C).find(q=>q.type===_);return Y?Y.value:""}return{setLocale:n,getLocale:r,fullMonth:i,fullYear:A,fullMonthAndYear:m,toParts:w,custom:o,part:b,dayPeriod:f,selectedDate:s,dayOfWeek:y,getMonths:c}}function jn(a){const e=Or({locale:ee("en")});return S(()=>{var t;return(a==null?void 0:a.value)||((t=e.locale)==null?void 0:t.value)||"en"})}function Kn(a){function e(r){return Array.isArray(a.date.value)?a.date.value.some(n=>qe(n,r)):a.date.value?qe(a.date.value,r):!1}const t=S(()=>{var r,n,o,s;if(Array.isArray(a.date.value)){if(!a.date.value.length)return!1;for(const m of a.date.value)if((r=a.isDateDisabled)!=null&&r.call(a,m)||(n=a.isDateUnavailable)!=null&&n.call(a,m))return!0}else{if(!a.date.value)return!1;if((o=a.isDateDisabled)!=null&&o.call(a,a.date.value)||(s=a.isDateUnavailable)!=null&&s.call(a,a.date.value))return!0}return!1});return{isDateSelected:e,isInvalid:t}}function zn(a,e){const t=e(a),r=t.compare(a),n={};return r>=7&&(n.day=1),r>=ke(a)&&(n.month=1),t.set({...n})}function Xn(a,e){const t=e(a),r=a.compare(t),n={};return r>=7&&(n.day=35),r>=ke(a)&&(n.month=13),t.set({...n})}function el(a,e){return e(a)}function al(a,e){return e(a)}function tl(a){const e=Zn(a.locale.value),t=S(()=>{const b={calendar:a.placeholder.value.calendar.identifier};return a.placeholder.value.calendar.identifier==="gregory"&&a.placeholder.value.era==="BC"&&(b.era="short"),b}),r=ee(we({dateObj:a.placeholder.value,weekStartsOn:a.weekStartsOn.value,locale:a.locale.value,fixedWeeks:a.fixedWeeks.value,numberOfMonths:a.numberOfMonths.value})),n=S(()=>r.value.map(b=>b.value));function o(b){return!n.value.some(p=>tt(b,p))}const s=b=>{if(!a.maxValue.value||!r.value.length)return!1;if(a.disabled.value)return!0;const p=r.value[r.value.length-1].value;if(!b&&!a.nextPage.value){const k=p.add({months:1}).set({day:1});return Da(k,a.maxValue.value)}const _=zn(p,b||a.nextPage.value);return Da(_,a.maxValue.value)},m=b=>{if(!a.minValue.value||!r.value.length)return!1;if(a.disabled.value)return!0;const p=r.value[0].value;if(!b&&!a.prevPage.value){const k=p.subtract({months:1}).set({day:35});return wa(k,a.minValue.value)}const _=Xn(p,b||a.prevPage.value);return wa(_,a.minValue.value)};function i(b){var p;return!!((p=a.isDateDisabled)!=null&&p.call(a,b)||a.disabled.value||a.maxValue.value&&Da(b,a.maxValue.value)||a.minValue.value&&wa(b,a.minValue.value))}const c=b=>{var p;return!!((p=a.isDateUnavailable)!=null&&p.call(a,b))},A=S(()=>r.value.length?r.value[0].rows[0].map(b=>e.dayOfWeek(ue(b),a.weekdayFormat.value)):[]),w=b=>{const p=r.value[0].value;if(!b&&!a.nextPage.value){const P=p.add({months:a.pagedNavigation.value?a.numberOfMonths.value:1}),Y=we({dateObj:P,weekStartsOn:a.weekStartsOn.value,locale:a.locale.value,fixedWeeks:a.fixedWeeks.value,numberOfMonths:a.numberOfMonths.value});r.value=Y,a.placeholder.value=Y[0].value.set({day:1});return}const _=el(p,b||a.nextPage.value),k=we({dateObj:_,weekStartsOn:a.weekStartsOn.value,locale:a.locale.value,fixedWeeks:a.fixedWeeks.value,numberOfMonths:a.numberOfMonths.value});r.value=k;const C={};if(!b){const P=k[0].value.compare(p);P>=ke(p)&&(C.day=1),P>=365&&(C.month=1)}a.placeholder.value=k[0].value.set({...C})},y=b=>{const p=r.value[0].value;if(!b&&!a.prevPage.value){const P=p.subtract({months:a.pagedNavigation.value?a.numberOfMonths.value:1}),Y=we({dateObj:P,weekStartsOn:a.weekStartsOn.value,locale:a.locale.value,fixedWeeks:a.fixedWeeks.value,numberOfMonths:a.numberOfMonths.value});r.value=Y,a.placeholder.value=Y[0].value.set({day:1});return}const _=al(p,b||a.prevPage.value),k=we({dateObj:_,weekStartsOn:a.weekStartsOn.value,locale:a.locale.value,fixedWeeks:a.fixedWeeks.value,numberOfMonths:a.numberOfMonths.value});r.value=k;const C={};if(!b){const P=p.compare(k[0].value);P>=ke(p)&&(C.day=1),P>=365&&(C.month=1)}a.placeholder.value=k[0].value.set({...C})};Me(a.placeholder,b=>{n.value.some(p=>tt(p,b))||(r.value=we({dateObj:b,weekStartsOn:a.weekStartsOn.value,locale:a.locale.value,fixedWeeks:a.fixedWeeks.value,numberOfMonths:a.numberOfMonths.value}))}),Me([a.locale,a.weekStartsOn,a.fixedWeeks,a.numberOfMonths],()=>{r.value=we({dateObj:a.placeholder.value,weekStartsOn:a.weekStartsOn.value,locale:a.locale.value,fixedWeeks:a.fixedWeeks.value,numberOfMonths:a.numberOfMonths.value})});const f=S(()=>{if(!r.value.length)return"";if(a.locale.value!==e.getLocale()&&e.setLocale(a.locale.value),r.value.length===1){const q=r.value[0].value;return`${e.fullMonthAndYear(ue(q),t.value)}`}const b=ue(r.value[0].value),p=ue(r.value[r.value.length-1].value),_=e.fullMonth(b,t.value),k=e.fullMonth(p,t.value),C=e.fullYear(b,t.value),P=e.fullYear(p,t.value);return C===P?`${_} - ${k} ${P}`:`${_} ${C} - ${k} ${P}`}),$=S(()=>`${a.calendarLabel.value??"Event Date"}, ${f.value}`);return{isDateDisabled:i,isDateUnavailable:c,isNextButtonDisabled:s,isPrevButtonDisabled:m,grid:r,weekdays:A,visibleView:n,isOutsideVisibleView:o,formatter:e,nextPage:w,prevPage:y,headingValue:f,fullCalendarLabel:$}}const rl={style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute","white-space":"nowrap",width:"1px"}},nl={role:"heading","aria-level":"2"},[Te,ll]=Br("CalendarRoot");var ol=U({__name:"CalendarRoot",props:{defaultValue:{type:null,required:!1,default:void 0},defaultPlaceholder:{type:null,required:!1},placeholder:{type:null,required:!1,default:void 0},pagedNavigation:{type:Boolean,required:!1,default:!1},preventDeselect:{type:Boolean,required:!1,default:!1},weekStartsOn:{type:Number,required:!1,default:0},weekdayFormat:{type:String,required:!1,default:"narrow"},calendarLabel:{type:String,required:!1},fixedWeeks:{type:Boolean,required:!1,default:!1},maxValue:{type:null,required:!1},minValue:{type:null,required:!1},locale:{type:String,required:!1},numberOfMonths:{type:Number,required:!1,default:1},disabled:{type:Boolean,required:!1,default:!1},readonly:{type:Boolean,required:!1,default:!1},initialFocus:{type:Boolean,required:!1,default:!1},isDateDisabled:{type:Function,required:!1,default:void 0},isDateUnavailable:{type:Function,required:!1,default:void 0},dir:{type:String,required:!1},nextPage:{type:Function,required:!1},prevPage:{type:Function,required:!1},modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1,default:!1},disableDaysOutsideCurrentView:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["update:modelValue","update:placeholder"],setup(a,{emit:e}){const t=a,r=e,{disabled:n,readonly:o,initialFocus:s,pagedNavigation:m,weekStartsOn:i,weekdayFormat:c,fixedWeeks:A,multiple:w,minValue:y,maxValue:f,numberOfMonths:$,preventDeselect:b,isDateDisabled:p,isDateUnavailable:_,calendarLabel:k,defaultValue:C,nextPage:P,prevPage:Y,dir:q,locale:z,disableDaysOutsideCurrentView:K}=nr(t),{primitiveElement:Q,currentElement:_e}=Mt(),H=jn(z),F=Pr(q),B=ja(t,"modelValue",r,{defaultValue:C.value,passive:t.modelValue===void 0}),Z=Hn({defaultPlaceholder:t.placeholder,defaultValue:B.value,locale:t.locale}),N=ja(t,"placeholder",r,{defaultValue:t.defaultPlaceholder??Z.copy(),passive:t.placeholder===void 0});function ye(G){N.value=G.copy()}const{fullCalendarLabel:Ce,headingValue:D,isDateDisabled:u,isDateUnavailable:g,isNextButtonDisabled:M,isPrevButtonDisabled:I,weekdays:W,isOutsideVisibleView:oe,nextPage:Xt,prevPage:er,formatter:ar,grid:Wa}=tl({locale:H,placeholder:N,weekStartsOn:i,fixedWeeks:A,numberOfMonths:$,minValue:y,maxValue:f,disabled:n,weekdayFormat:c,pagedNavigation:m,isDateDisabled:p.value,isDateUnavailable:_.value,calendarLabel:k,nextPage:P,prevPage:Y}),{isInvalid:Qa,isDateSelected:tr}=Kn({date:B,isDateDisabled:u,isDateUnavailable:g});Me(B,G=>{if(Array.isArray(G)&&G.length){const Ye=G[G.length-1];Ye&&!pa(N.value,Ye)&&ye(Ye)}else!Array.isArray(G)&&G&&!pa(N.value,G)&&ye(G)});function rr(G){if(w.value){if(!B.value)B.value=[G.copy()];else if(Array.isArray(B.value)){if(B.value.findIndex(je=>qe(je,G))===-1)B.value=[...B.value,G];else if(!b.value){const je=B.value.filter(va=>!qe(va,G));if(!je.length){N.value=G.copy(),B.value=void 0;return}B.value=je.map(va=>va.copy())}}}else{if(!B.value){B.value=G.copy();return}!b.value&&pa(B.value,G)?(N.value=G.copy(),B.value=void 0):B.value=G.copy()}}return Dt(()=>{s.value&&Qn(_e.value)}),ll({isDateUnavailable:g,dir:F,isDateDisabled:u,locale:H,formatter:ar,modelValue:B,placeholder:N,disabled:n,initialFocus:s,pagedNavigation:m,grid:Wa,weekDays:W,weekStartsOn:i,weekdayFormat:c,fixedWeeks:A,multiple:w,numberOfMonths:$,readonly:o,preventDeselect:b,fullCalendarLabel:Ce,headingValue:D,isInvalid:Qa,isDateSelected:tr,isNextButtonDisabled:M,isPrevButtonDisabled:I,isOutsideVisibleView:oe,nextPage:Xt,prevPage:er,parentElement:_e,onPlaceholderChange:ye,onDateChange:rr,disableDaysOutsideCurrentView:K}),(G,Ye)=>(h(),x(l(le),{ref_key:"primitiveElement",ref:Q,as:G.as,"as-child":G.asChild,role:"application","aria-label":l(Ce),"data-readonly":l(o)?"":void 0,"data-disabled":l(n)?"":void 0,"data-invalid":l(Qa)?"":void 0,dir:l(F)},{default:d(()=>[R(G.$slots,"default",{date:l(N),grid:l(Wa),weekDays:l(W),weekStartsOn:l(i),locale:l(H),fixedWeeks:l(A),modelValue:l(B)}),V("div",rl,[V("div",nl,T(l(Ce)),1)])]),_:3},8,["as","as-child","aria-label","data-readonly","data-disabled","data-invalid","dir"]))}}),sl=ol,il=U({__name:"CalendarCell",props:{date:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"td"}},setup(a){const e=Te();return(t,r)=>{var n,o;return h(),x(l(le),{as:t.as,"as-child":t.asChild,role:"gridcell","aria-selected":l(e).isDateSelected(t.date)?!0:void 0,"aria-disabled":l(e).isDateDisabled(t.date)||((o=(n=l(e)).isDateUnavailable)==null?void 0:o.call(n,t.date))||l(e).disableDaysOutsideCurrentView.value,"data-disabled":l(e).isDateDisabled(t.date)||l(e).disableDaysOutsideCurrentView.value?"":void 0},{default:d(()=>[R(t.$slots,"default")]),_:3},8,["as","as-child","aria-selected","aria-disabled","data-disabled"])}}}),ul=il;const dl="[data-reka-calendar-cell-trigger]:not([data-outside-view]):not([data-outside-visible-view])";function Ma(a){return Array.from(a.querySelectorAll(dl))??[]}var cl=U({__name:"CalendarCellTrigger",props:{day:{type:null,required:!0},month:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(a){const e=a,t=Ur(),r=Te(),{primitiveElement:n,currentElement:o}=Mt(),s=S(()=>e.day.day.toLocaleString(r.locale.value)),m=S(()=>r.formatter.custom(ue(e.day),{weekday:"long",month:"long",day:"numeric",year:"numeric"})),i=S(()=>{var k;return((k=r.isDateUnavailable)==null?void 0:k.call(r,e.day))??!1}),c=S(()=>Wr(e.day,Ze())),A=S(()=>!Hr(e.day,e.month)),w=S(()=>r.isOutsideVisibleView(e.day)),y=S(()=>r.isDateDisabled(e.day)||r.disableDaysOutsideCurrentView.value&&A.value),f=S(()=>!r.disabled.value&&qe(e.day,r.placeholder.value)),$=S(()=>r.isDateSelected(e.day));function b(k){var C;r.readonly.value||r.isDateDisabled(k)||(C=r.isDateUnavailable)!=null&&C.call(r,k)||r.onDateChange(k)}function p(){y.value||b(e.day)}function _(k){if(y.value)return;k.preventDefault(),k.stopPropagation();const C=r.parentElement.value,P=7,Y=r.dir.value==="rtl"?-1:1;switch(k.code){case t.ARROW_RIGHT:q(o.value,Y);break;case t.ARROW_LEFT:q(o.value,-Y);break;case t.ARROW_UP:q(o.value,-7);break;case t.ARROW_DOWN:q(o.value,P);break;case t.ENTER:case t.SPACE_CODE:b(e.day)}function q(z,K){const Q=Ma(C);if(!Q.length)return;const H=Q.indexOf(z)+K;if(H>=0&&H<Q.length){Q[H].hasAttribute("data-disabled")&&q(Q[H],K),Q[H].focus();return}if(H<0){if(r.isPrevButtonDisabled())return;r.prevPage(),Za(()=>{const F=Ma(C);if(!F.length)return;if(!r.pagedNavigation.value&&r.numberOfMonths.value>1){const N=ke(r.placeholder.value)-Math.abs(H);F[N].hasAttribute("data-disabled")&&q(F[N],K),F[N].focus();return}const B=F.length-Math.abs(H);F[B].hasAttribute("data-disabled")&&q(F[B],K),F[B].focus()});return}if(H>=Q.length){if(r.isNextButtonDisabled())return;r.nextPage(),Za(()=>{const F=Ma(C);if(!F.length)return;if(!r.pagedNavigation.value&&r.numberOfMonths.value>1){const Z=ke(r.placeholder.value.add({months:r.numberOfMonths.value-1})),N=H-Q.length+(F.length-Z);F[N].hasAttribute("data-disabled")&&q(F[N],K),F[N].focus();return}const B=H-Q.length;F[B].hasAttribute("data-disabled")&&q(F[B],K),F[B].focus()})}}}return(k,C)=>(h(),x(l(le),j({ref_key:"primitiveElement",ref:n},e,{role:"button","aria-label":m.value,"data-reka-calendar-cell-trigger":"","aria-disabled":y.value||i.value?!0:void 0,"data-selected":$.value?!0:void 0,"data-value":k.day.toString(),"data-disabled":y.value?"":void 0,"data-unavailable":i.value?"":void 0,"data-today":c.value?"":void 0,"data-outside-view":A.value?"":void 0,"data-outside-visible-view":w.value?"":void 0,"data-focused":f.value?"":void 0,tabindex:f.value?0:A.value||y.value?void 0:-1,onClick:p,onKeydown:[Sa(_,["up","down","left","right","space","enter"]),C[0]||(C[0]=Sa(Ea(()=>{},["prevent"]),["enter"]))]}),{default:d(()=>[R(k.$slots,"default",{dayValue:s.value,disabled:y.value,today:c.value,selected:$.value,outsideView:A.value,outsideVisibleView:w.value,unavailable:i.value},()=>[O(T(s.value),1)])]),_:3},16,["aria-label","aria-disabled","data-selected","data-value","data-disabled","data-unavailable","data-today","data-outside-view","data-outside-visible-view","data-focused","tabindex"]))}}),fl=cl,ml=U({__name:"CalendarGrid",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"table"}},setup(a){const e=a,t=Te(),r=S(()=>t.disabled.value?!0:void 0),n=S(()=>t.readonly.value?!0:void 0);return(o,s)=>(h(),x(l(le),j(e,{tabindex:"-1",role:"grid","aria-readonly":n.value,"aria-disabled":r.value,"data-readonly":n.value&&"","data-disabled":r.value&&""}),{default:d(()=>[R(o.$slots,"default")]),_:3},16,["aria-readonly","aria-disabled","data-readonly","data-disabled"]))}}),vl=ml,hl=U({__name:"CalendarGridBody",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"tbody"}},setup(a){const e=a;return(t,r)=>(h(),x(l(le),da(ca(e)),{default:d(()=>[R(t.$slots,"default")]),_:3},16))}}),pl=hl,yl=U({__name:"CalendarGridHead",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"thead"}},setup(a){const e=a;return(t,r)=>(h(),x(l(le),j(e,{"aria-hidden":"true"}),{default:d(()=>[R(t.$slots,"default")]),_:3},16))}}),gl=yl,$l=U({__name:"CalendarGridRow",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"tr"}},setup(a){const e=a;return(t,r)=>(h(),x(l(le),da(ca(e)),{default:d(()=>[R(t.$slots,"default")]),_:3},16))}}),bl=$l,_l=U({__name:"CalendarHeadCell",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"th"}},setup(a){const e=a;return(t,r)=>(h(),x(l(le),da(ca(e)),{default:d(()=>[R(t.$slots,"default")]),_:3},16))}}),Cl=_l,wl=U({__name:"CalendarHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(a){const e=a;return(t,r)=>(h(),x(l(le),da(ca(e)),{default:d(()=>[R(t.$slots,"default")]),_:3},16))}}),Dl=wl,xl=U({__name:"CalendarHeading",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(a){const e=a,t=Te();return(r,n)=>(h(),x(l(le),j(e,{"data-disabled":l(t).disabled.value?"":void 0}),{default:d(()=>[R(r.$slots,"default",{headingValue:l(t).headingValue.value},()=>[O(T(l(t).headingValue.value),1)])]),_:3},16,["data-disabled"]))}}),Ml=xl,Al=U({__name:"CalendarNext",props:{nextPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const e=a,t=S(()=>r.disabled.value||r.isNextButtonDisabled(e.nextPage)),r=Te();return(n,o)=>(h(),x(l(le),{as:e.as,"as-child":e.asChild,"aria-label":"Next page",type:n.as==="button"?"button":void 0,"aria-disabled":t.value||void 0,"data-disabled":t.value||void 0,disabled:t.value,onClick:o[0]||(o[0]=s=>l(r).nextPage(e.nextPage))},{default:d(()=>[R(n.$slots,"default",{disabled:t.value},()=>[o[1]||(o[1]=O(" Next page "))])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),kl=Al,Sl=U({__name:"CalendarPrev",props:{prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const e=a,t=S(()=>r.disabled.value||r.isPrevButtonDisabled(e.prevPage)),r=Te();return(n,o)=>(h(),x(l(le),{"aria-label":"Previous page",as:e.as,"as-child":e.asChild,type:n.as==="button"?"button":void 0,"aria-disabled":t.value||void 0,"data-disabled":t.value||void 0,disabled:t.value,onClick:o[0]||(o[0]=s=>l(r).prevPage(e.prevPage))},{default:d(()=>[R(n.$slots,"default",{disabled:t.value},()=>[o[1]||(o[1]=O(" Prev page "))])]),_:3},8,["as","as-child","type","aria-disabled","data-disabled","disabled"]))}}),El=Sl;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=xt("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=xt("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Bl={class:"flex items-center gap-1"},Vl={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},Ul=U({__name:"Calendar",props:{defaultValue:{},defaultPlaceholder:{},placeholder:{},pagedNavigation:{type:Boolean},preventDeselect:{type:Boolean},weekStartsOn:{},weekdayFormat:{},calendarLabel:{},fixedWeeks:{type:Boolean},maxValue:{},minValue:{},locale:{},numberOfMonths:{},disabled:{type:Boolean},readonly:{type:Boolean},initialFocus:{type:Boolean},isDateDisabled:{type:Function},isDateUnavailable:{type:Function},dir:{},nextPage:{type:Function},prevPage:{type:Function},modelValue:{},multiple:{type:Boolean},disableDaysOutsideCurrentView:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","update:placeholder"],setup(a,{emit:e}){const t=a,r=e,n=de(t,"class"),o=Vr(n,r);return(s,m)=>(h(),x(l(sl),j({"data-slot":"calendar",class:l(ie)("p-3",t.class)},l(o)),{default:d(({grid:i,weekDays:c})=>[v(l(Tl),null,{default:d(()=>[v(l(Yl)),V("div",Bl,[v(l(Jl)),v(l(Ll))])]),_:1}),V("div",Vl,[(h(!0),E(re,null,ne(i,A=>(h(),x(l(Fl),{key:A.value.toString()},{default:d(()=>[v(l(Rl),null,{default:d(()=>[v(l(wt),null,{default:d(()=>[(h(!0),E(re,null,ne(c,w=>(h(),x(l(Nl),{key:w},{default:d(()=>[O(T(w),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),v(l(Gl),null,{default:d(()=>[(h(!0),E(re,null,ne(A.rows,(w,y)=>(h(),x(l(wt),{key:`weekDate-${y}`,class:"mt-2 w-full"},{default:d(()=>[(h(!0),E(re,null,ne(w,f=>(h(),x(l(Il),{key:f.toString(),date:f},{default:d(()=>[v(l(ql),{day:f,month:A.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}}),Il=U({__name:"CalendarCell",props:{date:{},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(ul),j({"data-slot":"calendar-cell",class:l(ie)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),ql=U({__name:"CalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{default:"button"},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(fl),j({"data-slot":"calendar-cell-trigger",class:l(ie)(l(Fa)({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100 cursor-default","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-view]:text-muted-foreground",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),Fl=U({__name:"CalendarGrid",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(vl),j({"data-slot":"calendar-grid",class:l(ie)("w-full border-collapse space-x-1",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),Gl=U({__name:"CalendarGridBody",props:{asChild:{type:Boolean},as:{}},setup(a){const e=a;return(t,r)=>(h(),x(l(pl),j({"data-slot":"calendar-grid-body"},e),{default:d(()=>[R(t.$slots,"default")]),_:3},16))}}),Rl=U({__name:"CalendarGridHead",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a;return(t,r)=>(h(),x(l(gl),j({"data-slot":"calendar-grid-head"},e),{default:d(()=>[R(t.$slots,"default")]),_:3},16))}}),wt=U({__name:"CalendarGridRow",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(bl),j({"data-slot":"calendar-grid-row",class:l(ie)("flex",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),Nl=U({__name:"CalendarHeadCell",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(Cl),j({"data-slot":"calendar-head-cell",class:l(ie)("text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),Tl=U({__name:"CalendarHeader",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(Dl),j({"data-slot":"calendar-header",class:l(ie)("flex justify-center pt-1 relative items-center w-full",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),Yl=U({__name:"CalendarHeading",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(Ml),j({"data-slot":"calendar-heading",class:l(ie)("text-sm font-medium",e.class)},l(r)),{default:d(({headingValue:s})=>[R(n.$slots,"default",{headingValue:s},()=>[O(T(s),1)])]),_:3},16,["class"]))}}),Ll=U({__name:"CalendarNextButton",props:{nextPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(kl),j({"data-slot":"calendar-next-button",class:l(ie)(l(Fa)({variant:"outline"}),"absolute right-1","size-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default",{},()=>[v(l(vr),{class:"size-4"})])]),_:3},16,["class"]))}}),Jl=U({__name:"CalendarPrevButton",props:{prevPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,t=de(e,"class"),r=pe(t);return(n,o)=>(h(),x(l(El),j({"data-slot":"calendar-prev-button",class:l(ie)(l(Fa)({variant:"outline"}),"absolute left-1","size-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)},l(r)),{default:d(()=>[R(n.$slots,"default",{},()=>[v(l(Ol),{class:"size-4"})])]),_:3},16,["class"]))}}),Aa=U({__name:"DatePicker",props:{modelValue:{},placeholder:{default:"Seleccionar fecha"},disabled:{type:Boolean},class:{}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,r=e,n=S({get:()=>t.modelValue?t.modelValue instanceof Date?t.modelValue:new Date(t.modelValue):null,set:s=>{r("update:modelValue",s)}}),o=S(()=>n.value?Gr(n.value,"PPP",{locale:Xa}):t.placeholder);return(s,m)=>(h(),x(l(Ir),null,{default:d(()=>[v(l(qr),{"as-child":""},{default:d(()=>[v(l(X),{variant:"outline",class:na(l(ie)("w-full justify-start text-left font-normal",!n.value&&"text-muted-foreground",t.class)),disabled:s.disabled},{default:d(()=>[v(l(_r),{class:"mr-2 h-4 w-4"}),O(" "+T(o.value),1)]),_:1},8,["class","disabled"])]),_:1}),v(l(Fr),{class:"w-auto p-0",align:"start"},{default:d(()=>[v(l(Ul),{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=i=>n.value=i),"initial-focus":"",locale:l(Xa)},null,8,["modelValue","locale"])]),_:1})]),_:1}))}}),Hl={class:"relative"},Wl={class:"flex items-center gap-2"},Ql={key:0,class:"px-2 py-1.5 text-sm text-muted-foreground"},Zl={key:0,class:"mt-1 text-sm text-destructive"},jl=U({__name:"CascadeSelect",props:{modelValue:{},field:{},parentValue:{},disabled:{type:Boolean}},emits:["update:modelValue","options-loaded"],setup(a,{emit:e}){const t=a,r=e,n=ee([]),o=ee(!1),s=ee(null),m=new Map,i=S(()=>!!(t.disabled||t.field.cascadeFrom&&!t.parentValue)),c=S(()=>{if(o.value)return"Cargando...";if(s.value)return"Error al cargar opciones";if(i.value&&t.field.cascadeFrom){let y=t.field.cascadeFrom;return y.includes(".")&&(y=y.split(".").pop()||y),y=y.replace("_id",""),`Seleccione ${y.charAt(0).toUpperCase()+y.slice(1)} primero`}return t.field.placeholder||"Seleccionar..."}),A=async()=>{if(!t.field.cascadeEndpoint){t.field.options&&(n.value=t.field.options);return}if(t.field.cascadeFrom&&!t.parentValue){n.value=[],r("update:modelValue",null);return}const y=t.field.cascadeFrom?`${t.field.cascadeEndpoint}:${t.parentValue}`:t.field.cascadeEndpoint;if(t.field.cacheOptions!==!1&&m.has(y)){n.value=m.get(y);return}o.value=!0,s.value=null;try{const f=new URL(t.field.cascadeEndpoint);if(t.field.cascadeFrom&&t.parentValue){let _=t.field.cascadeParam;_||(_=t.field.cascadeFrom,_.includes(".")&&(_=_.split(".").pop()||_)),f.searchParams.append(_,t.parentValue)}const $=await fetch(f.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!$.ok)throw new Error(`Error ${$.status}: ${$.statusText}`);const b=await $.json();let p=[];Array.isArray(b)?p=b.map(_=>({value:_.id||_.value,label:_.nombre||_.label||_.name,disabled:_.disabled||!1})):b.data&&Array.isArray(b.data)?p=b.data.map(_=>({value:_.id||_.value,label:_.nombre||_.label||_.name,disabled:_.disabled||!1})):(console.warn("Formato de respuesta no reconocido:",b),p=[]),n.value=p,t.field.cacheOptions!==!1&&m.set(y,p),r("options-loaded",p),t.modelValue&&!p.find(_=>_.value===t.modelValue)&&r("update:modelValue",null)}catch(f){console.error("Error cargando opciones:",f),s.value=f instanceof Error?f.message:"Error desconocido",n.value=[]}finally{o.value=!1}},w=y=>{r("update:modelValue",y)};return Me(()=>t.parentValue,(y,f)=>{y!==f&&A()}),Dt(()=>{(!t.field.cascadeFrom||t.parentValue||t.field.loadOnMount)&&A()}),Me(()=>t.field.cascadeEndpoint,()=>{t.field.cascadeEndpoint&&A()}),(y,f)=>(h(),E("div",Hl,[v(l(Be),{"model-value":y.modelValue,"onUpdate:modelValue":w,disabled:i.value||o.value},{default:d(()=>[v(l(Ee),null,{default:d(()=>[V("div",Wl,[o.value?(h(),x(l(Rr),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),v(l(Oe),{placeholder:c.value},null,8,["placeholder"])])]),_:1}),v(l(Pe),null,{default:d(()=>[(h(!0),E(re,null,ne(n.value,$=>(h(),x(l($e),{key:$.value,value:$.value,disabled:$.disabled},{default:d(()=>[O(T($.label),1)]),_:2},1032,["value","disabled"]))),128)),n.value.length===0&&!o.value?(h(),E("div",Ql,T(s.value?"Error al cargar opciones":"Sin opciones disponibles"),1)):L("",!0)]),_:1})]),_:1},8,["model-value","disabled"]),s.value&&!o.value?(h(),E("p",Zl,T(s.value),1)):L("",!0)]))}}),Kl={class:"flex items-center gap-2"},zl={key:0,class:"flex-1"},Xl={key:0,class:"flex items-center gap-2"},eo={class:"flex-1"},ao={class:"flex-1"},to={key:1},ro={key:1,class:"flex-1 text-muted-foreground text-sm px-3"},no=U({__name:"FilterCondition",props:{condition:{},fields:{},onUpdate:{type:Function},onRemove:{type:Function},allConditions:{}},setup(a){const e=a,t=S(()=>e.fields.find(f=>f.name===(e.condition.field||e.condition.name))),r=S(()=>{var f;return((f=t.value)==null?void 0:f.type)||"text"}),n=S(()=>{var b;if(!((b=t.value)!=null&&b.cascadeFrom)||!e.allConditions)return null;const f=t.value.cascadeFrom,$=e.allConditions.find(p=>p.id!==e.condition.id&&(p.field===f||p.name===f));return($==null?void 0:$.value)||null}),o=S(()=>{var $;return($=t.value)!=null&&$.operators?t.value.operators:{text:["equals","not_equals","contains","not_contains","starts_with","ends_with","is_empty","is_not_empty"],number:["equals","not_equals","greater_than","less_than","greater_or_equal","less_or_equal","between","is_empty","is_not_empty"],date:["equals","not_equals","greater_than","less_than","greater_or_equal","less_or_equal","between","is_empty","is_not_empty"],datetime:["equals","not_equals","greater_than","less_than","greater_or_equal","less_or_equal","between","is_empty","is_not_empty"],select:["equals","not_equals","is_empty","is_not_empty"],"select-cascade":["equals","not_equals","is_empty","is_not_empty"],multiselect:["in","not_in","is_empty","is_not_empty"],boolean:["equals"]}[r.value]||["equals"]}),s={equals:"Es igual a",not_equals:"No es igual a",contains:"Contiene",not_contains:"No contiene",starts_with:"Empieza con",ends_with:"Termina con",is_empty:"Está vacío",is_not_empty:"No está vacío",greater_than:"Mayor que",less_than:"Menor que",greater_or_equal:"Mayor o igual que",less_or_equal:"Menor o igual que",between:"Entre",in:"En lista",not_in:"No en lista"},m=S(()=>!["is_empty","is_not_empty"].includes(e.condition.operator)),i=S(()=>e.condition.operator==="between"),c=f=>{const $=e.fields.find(b=>b.name===f);$&&e.onUpdate({...e.condition,field:f,name:f,operator:o.value[0],value:$.defaultValue||null})},A=f=>{e.onUpdate({...e.condition,operator:f,value:["is_empty","is_not_empty"].includes(f)?null:e.condition.value})},w=f=>{e.onUpdate({...e.condition,value:f})},y=(f,$)=>{const b=Array.isArray(e.condition.value)?[...e.condition.value]:[null,null];b[f]=$,e.onUpdate({...e.condition,value:b})};return(f,$)=>{var b,p,_,k;return h(),E("div",Kl,[v(l(Be),{"model-value":f.condition.field||f.condition.name,"onUpdate:modelValue":c},{default:d(()=>[v(l(Ee),{class:"w-[200px]"},{default:d(()=>[v(l(Oe),{placeholder:"Seleccionar campo..."})]),_:1}),v(l(Pe),null,{default:d(()=>[(h(!0),E(re,null,ne(f.fields,C=>(h(),x(l($e),{key:C.name,value:C.name},{default:d(()=>[O(T(C.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),v(l(Be),{"model-value":f.condition.operator,"onUpdate:modelValue":A,disabled:!f.condition.field&&!f.condition.name},{default:d(()=>[v(l(Ee),{class:"w-[180px]"},{default:d(()=>[v(l(Oe),{placeholder:"Seleccionar operador..."})]),_:1}),v(l(Pe),null,{default:d(()=>[(h(!0),E(re,null,ne(o.value,C=>(h(),x(l($e),{key:C,value:C},{default:d(()=>[O(T(s[C]),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),m.value?(h(),E("div",zl,[i.value?(h(),E("div",Xl,[V("div",eo,[r.value==="text"?(h(),x(l(fe),{key:0,"model-value":Array.isArray(f.condition.value)?f.condition.value[0]:"","onUpdate:modelValue":$[0]||($[0]=C=>y(0,C)),placeholder:((b=t.value)==null?void 0:b.placeholder)||"Desde..."},null,8,["model-value","placeholder"])):r.value==="number"?(h(),x(l(fe),{key:1,type:"number","model-value":Array.isArray(f.condition.value)?f.condition.value[0]:"","onUpdate:modelValue":$[1]||($[1]=C=>y(0,C)),placeholder:"Desde..."},null,8,["model-value"])):r.value==="date"?(h(),x(Aa,{key:2,"model-value":Array.isArray(f.condition.value)?f.condition.value[0]:null,"onUpdate:modelValue":$[2]||($[2]=C=>y(0,C))},null,8,["model-value"])):r.value==="datetime"?(h(),x(ha,{key:3,"model-value":Array.isArray(f.condition.value)?f.condition.value[0]:null,"onUpdate:modelValue":$[3]||($[3]=C=>y(0,C))},null,8,["model-value"])):L("",!0)]),$[8]||($[8]=V("span",{class:"text-muted-foreground"},"y",-1)),V("div",ao,[r.value==="text"?(h(),x(l(fe),{key:0,"model-value":Array.isArray(f.condition.value)?f.condition.value[1]:"","onUpdate:modelValue":$[4]||($[4]=C=>y(1,C)),placeholder:((p=t.value)==null?void 0:p.placeholder)||"Hasta..."},null,8,["model-value","placeholder"])):r.value==="number"?(h(),x(l(fe),{key:1,type:"number","model-value":Array.isArray(f.condition.value)?f.condition.value[1]:"","onUpdate:modelValue":$[5]||($[5]=C=>y(1,C)),placeholder:"Hasta..."},null,8,["model-value"])):r.value==="date"?(h(),x(Aa,{key:2,"model-value":Array.isArray(f.condition.value)?f.condition.value[1]:null,"onUpdate:modelValue":$[6]||($[6]=C=>y(1,C))},null,8,["model-value"])):r.value==="datetime"?(h(),x(ha,{key:3,"model-value":Array.isArray(f.condition.value)?f.condition.value[1]:null,"onUpdate:modelValue":$[7]||($[7]=C=>y(1,C))},null,8,["model-value"])):L("",!0)])])):(h(),E("div",to,[r.value==="text"?(h(),x(l(fe),{key:0,"model-value":f.condition.value||"","onUpdate:modelValue":w,placeholder:((_=t.value)==null?void 0:_.placeholder)||"Ingrese un valor..."},null,8,["model-value","placeholder"])):r.value==="number"?(h(),x(l(fe),{key:1,type:"number","model-value":f.condition.value||"","onUpdate:modelValue":w,placeholder:((k=t.value)==null?void 0:k.placeholder)||"Ingrese un número..."},null,8,["model-value","placeholder"])):r.value==="date"?(h(),x(Aa,{key:2,"model-value":f.condition.value,"onUpdate:modelValue":w},null,8,["model-value"])):r.value==="datetime"?(h(),x(ha,{key:3,"model-value":f.condition.value,"onUpdate:modelValue":w},null,8,["model-value"])):r.value==="select"?(h(),x(l(Be),{key:4,"model-value":f.condition.value,"onUpdate:modelValue":w},{default:d(()=>[v(l(Ee),null,{default:d(()=>{var C;return[v(l(Oe),{placeholder:((C=t.value)==null?void 0:C.placeholder)||"Seleccionar..."},null,8,["placeholder"])]}),_:1}),v(l(Pe),null,{default:d(()=>{var C;return[(h(!0),E(re,null,ne(((C=t.value)==null?void 0:C.options)||[],P=>(h(),x(l($e),{key:P.value,value:P.value,disabled:P.disabled},{default:d(()=>[O(T(P.label),1)]),_:2},1032,["value","disabled"]))),128))]}),_:1})]),_:1},8,["model-value"])):r.value==="select-cascade"&&t.value?(h(),x(jl,{key:5,"model-value":f.condition.value,"onUpdate:modelValue":w,field:t.value,"parent-value":n.value},null,8,["model-value","field","parent-value"])):r.value==="boolean"?(h(),x(l(Be),{key:6,"model-value":f.condition.value,"onUpdate:modelValue":w},{default:d(()=>[v(l(Ee),null,{default:d(()=>[v(l(Oe),{placeholder:"Seleccionar..."})]),_:1}),v(l(Pe),null,{default:d(()=>[v(l($e),{value:!0},{default:d(()=>$[9]||($[9]=[O("Sí")])),_:1}),v(l($e),{value:!1},{default:d(()=>$[10]||($[10]=[O("No")])),_:1})]),_:1})]),_:1},8,["model-value"])):L("",!0)]))])):(h(),E("div",ro," (sin valor) ")),v(l(X),{type:"button",variant:"ghost",size:"sm",onClick:f.onRemove,class:"text-destructive hover:text-destructive"},{default:d(()=>[v(l(Oa),{class:"h-4 w-4"})]),_:1},8,["onClick"])])}}}),lo={class:"flex items-center justify-between mb-3"},oo={class:"flex items-center gap-2"},so={key:0,class:"text-xs text-muted-foreground"},io={key:0,class:"space-y-2 mb-3"},uo={key:1,class:"space-y-3 mb-3"},co={class:"flex items-start gap-2"},fo={class:"flex-1"},mo={key:2,class:"text-center py-8 text-muted-foreground"},vo={class:"flex gap-2"},ho=U({__name:"FilterGroup",props:{group:{},fields:{},level:{default:0},maxNestingLevel:{default:3},onUpdateCondition:{},onRemoveCondition:{},onAddCondition:{},onUpdateOperator:{},onAddGroup:{},onRemoveGroup:{},isRoot:{type:Boolean,default:!1}},setup(a){const e=a,t=S(()=>e.level<e.maxNestingLevel&&e.onAddGroup),r=S(()=>e.group.conditions.length>0),n=S(()=>e.group.groups&&e.group.groups.length>0),o=S(()=>!r.value&&!n.value),s=S(()=>["","bg-muted/20","bg-muted/40","bg-muted/60"][e.level]||"bg-muted/80"),m=S(()=>["border-border","border-blue-200 dark:border-blue-800","border-purple-200 dark:border-purple-800","border-green-200 dark:border-green-800"][e.level]||"border-gray-200 dark:border-gray-800");return(i,c)=>{const A=lr("FilterGroup",!0);return h(),x(l(ea),{class:na(["relative",s.value,m.value,{"border-2":i.level>0}])},{default:d(()=>[v(l(Xe),{class:"p-4"},{default:d(()=>[V("div",lo,[V("div",oo,[v(l(Be),{"model-value":i.group.operator,"onUpdate:modelValue":i.onUpdateOperator,disabled:i.group.conditions.length<2&&(!i.group.groups||i.group.groups.length===0)},{default:d(()=>[v(l(Ee),{class:"w-[100px] font-semibold"},{default:d(()=>[v(l(Oe))]),_:1}),v(l(Pe),null,{default:d(()=>[v(l($e),{value:"AND"},{default:d(()=>c[6]||(c[6]=[O("Y")])),_:1}),v(l($e),{value:"OR"},{default:d(()=>c[7]||(c[7]=[O("O")])),_:1})]),_:1})]),_:1},8,["model-value","onUpdate:modelValue","disabled"]),i.level>0?(h(),E("span",so," Nivel "+T(i.level),1)):L("",!0)]),!i.isRoot&&i.onRemoveGroup?(h(),x(l(X),{key:0,type:"button",variant:"ghost",size:"sm",onClick:i.onRemoveGroup,class:"text-destructive hover:text-destructive"},{default:d(()=>[v(l(At),{class:"h-4 w-4"})]),_:1},8,["onClick"])):L("",!0)]),r.value?(h(),E("div",io,[(h(!0),E(re,null,ne(i.group.conditions,w=>(h(),x(no,{key:w.id,condition:w,fields:i.fields,"all-conditions":i.group.conditions,"on-update":y=>i.onUpdateCondition(w.id,y),"on-remove":()=>i.onRemoveCondition(w.id)},null,8,["condition","fields","all-conditions","on-update","on-remove"]))),128))])):L("",!0),n.value?(h(),E("div",uo,[(h(!0),E(re,null,ne(i.group.groups,w=>(h(),E("div",{key:w.id,class:"ml-4"},[V("div",co,[V("div",{class:na(["w-8 mt-6 border-t-2 border-dashed",m.value])},null,2),V("div",fo,[v(A,{group:w,fields:i.fields,level:i.level+1,"max-nesting-level":i.maxNestingLevel,"on-update-condition":(y,f)=>i.$emit("update-subgroup-condition",y,f,w.id),"on-remove-condition":y=>i.$emit("remove-subgroup-condition",y,w.id),"on-add-condition":()=>i.$emit("add-subgroup-condition",w.id),"on-update-operator":y=>i.$emit("update-subgroup-operator",w.id,y),"on-add-group":t.value?()=>i.$emit("add-subgroup",w.id):void 0,"on-remove-group":()=>i.$emit("remove-subgroup",w.id,i.group.id),onUpdateSubgroupCondition:c[0]||(c[0]=(y,f,$)=>i.$emit("update-subgroup-condition",y,f,$)),onRemoveSubgroupCondition:c[1]||(c[1]=(y,f)=>i.$emit("remove-subgroup-condition",y,f)),onAddSubgroupCondition:c[2]||(c[2]=y=>i.$emit("add-subgroup-condition",y)),onUpdateSubgroupOperator:c[3]||(c[3]=(y,f)=>i.$emit("update-subgroup-operator",y,f)),onAddSubgroup:c[4]||(c[4]=y=>i.$emit("add-subgroup",y)),onRemoveSubgroup:c[5]||(c[5]=(y,f)=>i.$emit("remove-subgroup",y,f))},null,8,["group","fields","level","max-nesting-level","on-update-condition","on-remove-condition","on-add-condition","on-update-operator","on-add-group","on-remove-group"])])])]))),128))])):L("",!0),o.value?(h(),E("div",mo,c[8]||(c[8]=[V("p",{class:"text-sm mb-2"},"No hay condiciones definidas",-1),V("p",{class:"text-xs"},"Agrega una condición para comenzar a filtrar",-1)]))):L("",!0),V("div",vo,[v(l(X),{type:"button",variant:"outline",size:"sm",onClick:i.onAddCondition},{default:d(()=>[v(l(et),{class:"h-4 w-4 mr-2"}),O(" "+T(i.group.operator==="AND"?"Y...":"O...")+" (Añadir condición) ",1)]),_:1},8,["onClick"]),t.value?(h(),x(l(X),{key:0,type:"button",variant:"outline",size:"sm",onClick:i.onAddGroup},{default:d(()=>[v(l(et),{class:"h-4 w-4 mr-2"}),O(" "+T(i.group.operator==="AND"?"O...":"Y...")+" (Añadir nuevo grupo de filtros) ",1)]),_:1},8,["onClick"])):L("",!0)])]),_:1})]),_:1},8,["class"])}}});function ka(a="AND"){return{id:crypto.randomUUID(),operator:a,conditions:[],groups:[]}}function po(a){return{id:crypto.randomUUID(),field:a||null,operator:"equals",value:null}}function yo(a){const e={};return a.quickSearch&&(e.search=a.quickSearch),(a.rootGroup.conditions.length>0||a.rootGroup.groups&&a.rootGroup.groups.length>0)&&(e.advanced_filters=JSON.stringify(Kt(a.rootGroup))),e}function Kt(a){var e;return{operator:a.operator,conditions:a.conditions.map(t=>({field:t.field,operator:t.operator,value:t.value})),groups:((e=a.groups)==null?void 0:e.map(t=>Kt(t)))||[]}}function go(a){return!!(a.quickSearch||a.rootGroup.conditions.length>0||a.rootGroup.groups&&a.rootGroup.groups.length>0)}function zt(a){let e=a.conditions.length;if(a.groups)for(const t of a.groups)e+=zt(t);return e}function $o(a){const{config:e,route:t,routeParams:r={},onApply:n,preserveScroll:o=!0,preserveState:s=!0,initialFilters:m={}}=a,i=D=>{var u,g;return{...D,id:D.id||crypto.randomUUID(),conditions:((u=D.conditions)==null?void 0:u.map(M=>({...M,id:M.id||crypto.randomUUID(),field:M.field||M.name,name:M.name||M.field})))||[],groups:((g=D.groups)==null?void 0:g.map(i))||[]}},c=ee({quickSearch:m.quickSearch||"",rootGroup:m.rootGroup?i(m.rootGroup):ka(),isExpanded:m.isExpanded||!1,hasChanges:!1}),A=ee([]),w=ee(!1),y=ee(null),f=S(()=>go(c.value)),$=S(()=>zt(c.value.rootGroup)),b=S(()=>yo(c.value)),p=D=>{const u=D?Z(c.value.rootGroup,D):c.value.rootGroup;if(u){const g=e.fields[0],M=po(g==null?void 0:g.name);u.conditions||(u.conditions=[]),u.conditions.push(M),c.value.hasChanges=!0}},_=(D,u)=>{const g=M=>{const I=M.conditions.findIndex(W=>W.id===D);if(I!==-1)return M.conditions.splice(I,1),!0;if(M.groups){for(const W of M.groups)if(g(W))return!0}return!1};if(u){const M=Z(c.value.rootGroup,u);M&&(M.conditions=M.conditions.filter(I=>I.id!==D),c.value.hasChanges=!0)}else g(c.value.rootGroup),c.value.hasChanges=!0},k=(D,u,g)=>{const M=I=>{const W=I.conditions.findIndex(oe=>oe.id===D);if(W!==-1){const oe={...I.conditions[W],...u};return(u.field||u.name)&&(oe.field=u.field||u.name,oe.name=u.name||u.field),I.conditions[W]=oe,!0}if(I.groups){for(const oe of I.groups)if(M(oe))return!0}return!1};if(g){const I=Z(c.value.rootGroup,g);if(I){const W=I.conditions.find(oe=>oe.id===D);W&&(Object.assign(W,u),c.value.hasChanges=!0)}}else M(c.value.rootGroup),c.value.hasChanges=!0},C=(D,u="AND")=>{const g=D?Z(c.value.rootGroup,D):c.value.rootGroup;if(g){g.groups||(g.groups=[]);const M=ka(u);g.groups.push(M),c.value.hasChanges=!0}},P=(D,u)=>{if(!u&&D===c.value.rootGroup.id){c.value.rootGroup.conditions=[],c.value.rootGroup.groups=[],c.value.hasChanges=!0;return}const g=M=>{if(M.groups){const I=M.groups.findIndex(W=>W.id===D);if(I!==-1)return M.groups.splice(I,1),!0;for(const W of M.groups)if(g(W))return!0}return!1};if(u){const M=Z(c.value.rootGroup,u);if(M&&M.groups){const I=M.groups.findIndex(W=>W.id===D);I!==-1&&(M.groups.splice(I,1),c.value.hasChanges=!0)}}else g(c.value.rootGroup),c.value.hasChanges=!0},Y=(D,u)=>{const g=Z(c.value.rootGroup,D);g&&(g.operator=u,c.value.hasChanges=!0)},q=()=>{w.value=!0;const D=b.value;if(!t){n&&n(D),w.value=!1,c.value.hasChanges=!1;return}or.get(t,{...r,...D},{preserveScroll:o,preserveState:s,onFinish:()=>{w.value=!1,c.value.hasChanges=!1}})},z=e.debounceTime?ir(q,e.debounceTime):q,K=()=>{c.value.quickSearch="",c.value.rootGroup=ka(),c.value.hasChanges=!1,q()},Q=()=>{c.value.isExpanded=!c.value.isExpanded},_e=async(D,u)=>{const g={id:crypto.randomUUID(),name:D,description:u,filter:JSON.parse(JSON.stringify(c.value.rootGroup)),createdAt:new Date},M=localStorage.getItem(`filters_${t}`),I=M?JSON.parse(M):[];return I.push(g),localStorage.setItem(`filters_${t}`,JSON.stringify(I)),A.value=I,g},H=D=>{const u=A.value.find(g=>g.id===D);u&&(c.value.rootGroup=JSON.parse(JSON.stringify(u.filter)),c.value.hasChanges=!0,e.autoApply&&z())},F=D=>{A.value=A.value.filter(u=>u.id!==D),localStorage.setItem(`filters_${t}`,JSON.stringify(A.value))},B=()=>{const D=localStorage.getItem(`filters_${t}`);D&&(A.value=JSON.parse(D))},Z=(D,u)=>{if(D.id===u)return D;if(D.groups)for(const g of D.groups){const M=Z(g,u);if(M)return M}return null},N=D=>e.fields.find(u=>u.name===D),ye=D=>{const u=N(D.field);if(!u)return"Campo no válido";if(u.validate){const g=u.validate(D.value);if(g!==!0)return g}return u.required&&!D.value?"Este campo es requerido":!0},Ce=()=>{const D=u=>{for(const g of u.conditions)if(ye(g)!==!0)return!1;if(u.groups){for(const g of u.groups)if(!D(g))return!1}return!0};return D(c.value.rootGroup)};return e.autoApply&&(Me(()=>c.value.quickSearch,()=>{c.value.hasChanges=!0,z()}),Me(()=>c.value.rootGroup,()=>{c.value.hasChanges&&z()},{deep:!0})),B(),{state:c,savedFilters:A,isLoading:w,resultCount:y,hasFilters:f,activeConditionsCount:$,currentQueryParams:b,addCondition:p,removeCondition:_,updateCondition:k,addGroup:C,removeGroup:P,updateGroupOperator:Y,applyFilters:q,clearFilters:K,toggleExpanded:Q,saveAsPreset:_e,loadPreset:H,deletePreset:F,getField:N,validateCondition:ye,validateFilters:Ce}}const bo={class:"space-y-4"},_o={class:"flex items-center gap-2"},Co={key:0,class:"relative flex-1 max-w-md"},wo={key:1,class:"flex items-center gap-2"},Do={key:0,class:"p-2 text-sm text-muted-foreground text-center"},xo={class:"flex-1"},Mo={class:"font-medium"},Ao={key:0,class:"text-xs text-muted-foreground"},ko={class:"text-xs text-muted-foreground"},So={class:"space-y-4 py-4"},Eo={key:0,class:"mb-4"},Oo={class:"flex items-center justify-between mt-6 pt-4 border-t"},Po={class:"text-sm text-muted-foreground"},Bo={key:0},Vo={key:1},Uo={class:"flex items-center gap-2"},Io={key:0,class:"fixed bottom-4 right-4 z-50"},ns=U({__name:"AdvancedFilters",props:{config:{},route:{},routeParams:{default:()=>({})},preserveScroll:{type:Boolean,default:!0},preserveState:{type:Boolean,default:!0},initialFilters:{}},emits:["apply","clear"],setup(a,{emit:e}){const t=a,r=e,{state:n,savedFilters:o,isLoading:s,hasFilters:m,activeConditionsCount:i,addCondition:c,removeCondition:A,updateCondition:w,addGroup:y,removeGroup:f,updateGroupOperator:$,applyFilters:b,clearFilters:p,toggleExpanded:_,saveAsPreset:k,loadPreset:C,deletePreset:P,validateFilters:Y}=$o({config:t.config,route:t.route,routeParams:t.routeParams,onApply:D=>r("apply",D),preserveScroll:t.preserveScroll,preserveState:t.preserveState,initialFilters:t.initialFilters}),q=ee(!1),z=ee(""),K=ee(""),Q=ee([]),_e=S(()=>t.config.quickSearchPlaceholder||"Buscar..."),H=S(()=>t.config.showQuickSearch!==!1),F=S(()=>n.value.isExpanded?"Ocultar filtros avanzados":"Filtros avanzados"),B=S(()=>n.value.isExpanded?Sr:Er),Z=()=>{Q.value=[],Y()?b():Q.value.push("Por favor corrige los errores en los filtros antes de aplicar.")},N=()=>{p(),r("clear")},ye=async()=>{z.value&&(await k(z.value,K.value),z.value="",K.value="",q.value=!1)},Ce=D=>new Date(D).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(D,u)=>(h(),E("div",bo,[v(l(ea),null,{default:d(()=>[v(l(Xe),{class:"p-4"},{default:d(()=>[V("div",_o,[H.value?(h(),E("div",Co,[v(l(Nr),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),v(l(fe),{modelValue:l(n).quickSearch,"onUpdate:modelValue":u[0]||(u[0]=g=>l(n).quickSearch=g),placeholder:_e.value,class:"pl-10",onKeyup:Sa(Z,["enter"])},null,8,["modelValue","placeholder"])])):L("",!0),v(l(X),{type:"button",variant:"outline",onClick:l(_),class:na({"bg-primary text-primary-foreground":l(n).isExpanded})},{default:d(()=>[v(l(Pl),{class:"h-4 w-4 mr-2"}),O(" "+T(F.value)+" ",1),(h(),x(sr(B.value),{class:"h-4 w-4 ml-2"})),l(i)>0?(h(),x(l(ur),{key:0,variant:"secondary",class:"ml-2"},{default:d(()=>[O(T(l(i)),1)]),_:1})):L("",!0)]),_:1},8,["onClick","class"]),l(m)?(h(),E("div",wo,[v(l(X),{type:"button",variant:"default",size:"sm",onClick:Z,disabled:l(s)||!l(n).hasChanges},{default:d(()=>[v(l(at),{class:"h-4 w-4 mr-2"}),u[13]||(u[13]=O(" Aplicar "))]),_:1},8,["disabled"]),v(l(X),{type:"button",variant:"outline",size:"sm",onClick:N,disabled:l(s)},{default:d(()=>[v(l(Oa),{class:"h-4 w-4 mr-2"}),u[14]||(u[14]=O(" Limpiar "))]),_:1},8,["disabled"])])):L("",!0),D.config.allowSaveFilters!==!1?(h(),x(l(gr),{key:2},{default:d(()=>[v(l(hr),{asChild:""},{default:d(()=>[v(l(X),{type:"button",variant:"outline",size:"icon"},{default:d(()=>[v(l(Tr),{class:"h-4 w-4"})]),_:1})]),_:1}),v(l(pr),{align:"end",class:"w-[250px]"},{default:d(()=>[v(l(yr),null,{default:d(()=>u[15]||(u[15]=[O("Filtros Guardados")])),_:1}),v(l(Ka)),l(o).length===0?(h(),E("div",Do," No hay filtros guardados ")):L("",!0),(h(!0),E(re,null,ne(l(o),g=>(h(),x(l(za),{key:g.id,onClick:M=>l(C)(g.id),class:"flex items-center justify-between"},{default:d(()=>[V("div",xo,[V("div",Mo,T(g.name),1),g.description?(h(),E("div",Ao,T(g.description),1)):L("",!0),V("div",ko,T(Ce(g.createdAt)),1)]),v(l(X),{type:"button",variant:"ghost",size:"sm",class:"h-6 w-6 p-0",onClick:Ea(M=>l(P)(g.id),["stop"])},{default:d(()=>[v(l(At),{class:"h-3 w-3"})]),_:2},1032,["onClick"])]),_:2},1032,["onClick"]))),128)),v(l(Ka)),v(l(Cr),{open:q.value,"onUpdate:open":u[5]||(u[5]=g=>q.value=g)},{default:d(()=>[v(l(kr),{asChild:""},{default:d(()=>[v(l(za),{onClick:u[1]||(u[1]=Ea(g=>q.value=!0,["prevent"])),disabled:!l(m)},{default:d(()=>[v(l(Yr),{class:"h-4 w-4 mr-2"}),u[16]||(u[16]=O(" Guardar filtro actual "))]),_:1},8,["disabled"])]),_:1}),v(l(wr),null,{default:d(()=>[v(l(Dr),null,{default:d(()=>[v(l(xr),null,{default:d(()=>u[17]||(u[17]=[O("Guardar Filtro")])),_:1}),v(l(Mr),null,{default:d(()=>u[18]||(u[18]=[O(" Guarda la configuración actual de filtros para reutilizarla más tarde. ")])),_:1})]),_:1}),V("div",So,[V("div",null,[u[19]||(u[19]=V("label",{class:"text-sm font-medium"},"Nombre",-1)),v(l(fe),{modelValue:z.value,"onUpdate:modelValue":u[2]||(u[2]=g=>z.value=g),placeholder:"Ej: Usuarios activos de Lima",class:"mt-1"},null,8,["modelValue"])]),V("div",null,[u[20]||(u[20]=V("label",{class:"text-sm font-medium"},"Descripción (opcional)",-1)),v(l(fe),{modelValue:K.value,"onUpdate:modelValue":u[3]||(u[3]=g=>K.value=g),placeholder:"Describe este filtro...",class:"mt-1"},null,8,["modelValue"])])]),v(l(Ar),null,{default:d(()=>[v(l(X),{type:"button",variant:"outline",onClick:u[4]||(u[4]=g=>q.value=!1)},{default:d(()=>u[21]||(u[21]=[O(" Cancelar ")])),_:1}),v(l(X),{type:"button",onClick:ye,disabled:!z.value},{default:d(()=>u[22]||(u[22]=[O(" Guardar ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})]),_:1})):L("",!0)])]),_:1})]),_:1}),v(l($r),{open:l(n).isExpanded,"onUpdate:open":u[12]||(u[12]=g=>l(n).isExpanded=g)},{default:d(()=>[v(l(br),null,{default:d(()=>[v(l(ea),null,{default:d(()=>[v(l(cr),null,{default:d(()=>[v(l(fr),null,{default:d(()=>u[23]||(u[23]=[O("Filtros Avanzados")])),_:1}),v(l(mr),null,{default:d(()=>u[24]||(u[24]=[O(" Construye consultas complejas combinando múltiples condiciones con operadores lógicos. ")])),_:1})]),_:1}),v(l(Xe),null,{default:d(()=>[Q.value.length>0?(h(),E("div",Eo,[(h(!0),E(re,null,ne(Q.value,(g,M)=>(h(),E("div",{key:M,class:"flex items-center gap-2 p-2 text-sm text-destructive bg-destructive/10 rounded"},[v(l(dr),{class:"h-4 w-4"}),O(" "+T(g),1)]))),128))])):L("",!0),v(ho,{group:l(n).rootGroup,fields:D.config.fields,level:0,"max-nesting-level":D.config.maxNestingLevel||3,"is-root":!0,"on-update-condition":(g,M)=>l(w)(g,M),"on-remove-condition":g=>l(A)(g),"on-add-condition":()=>l(c)(),"on-update-operator":g=>l($)(l(n).rootGroup.id,g),"on-add-group":()=>l(y)(),onUpdateSubgroupCondition:u[6]||(u[6]=(g,M,I)=>l(w)(g,M,I)),onRemoveSubgroupCondition:u[7]||(u[7]=(g,M)=>l(A)(g,M)),onAddSubgroupCondition:u[8]||(u[8]=g=>l(c)(g)),onUpdateSubgroupOperator:u[9]||(u[9]=(g,M)=>l($)(g,M)),onAddSubgroup:u[10]||(u[10]=g=>l(y)(g)),onRemoveSubgroup:u[11]||(u[11]=(g,M)=>l(f)(g,M))},null,8,["group","fields","max-nesting-level","on-update-condition","on-remove-condition","on-add-condition","on-update-operator","on-add-group"]),V("div",Oo,[V("div",Po,[l(i)>0?(h(),E("span",Bo,T(l(i))+" condicion(es) activa(s) ",1)):(h(),E("span",Vo," No hay condiciones activas "))]),V("div",Uo,[v(l(X),{type:"button",variant:"outline",onClick:N,disabled:l(s)||!l(m)},{default:d(()=>[v(l(Oa),{class:"h-4 w-4 mr-2"}),u[25]||(u[25]=O(" Limpiar todo "))]),_:1},8,["disabled"]),v(l(X),{type:"button",variant:"default",onClick:Z,disabled:l(s)||!l(n).hasChanges&&!D.config.autoApply},{default:d(()=>[v(l(at),{class:"h-4 w-4 mr-2"}),u[26]||(u[26]=O(" Aplicar filtros "))]),_:1},8,["disabled"])])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(s)?(h(),E("div",Io,[v(l(ea),{class:"shadow-lg"},{default:d(()=>[v(l(Xe),{class:"p-3 flex items-center gap-2"},{default:d(()=>u[27]||(u[27]=[V("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"},null,-1),V("span",{class:"text-sm"},"Aplicando filtros...",-1)])),_:1})]),_:1})])):L("",!0)]))}});export{Ol as C,Pl as F,ns as _};
