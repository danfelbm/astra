import{d as j,c as y,u as z,i as c,e as s,f as e,q as h,w as a,g as o,t as l,h as d,l as A,j as f,n as b,m,F as $,k as B,b as k,x as U}from"./app-BEXZv9D4.js";import{_ as x}from"./createLucideIcon-JdLteBhk.js";import{_ as q,a as I,b as P,c as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-Ci6kjuRH.js";import{_ as V}from"./Checkbox.vue_vue_type_script_setup_true_lang-CFv3f79-.js";import{_ as L}from"./Input.vue_vue_type_script_setup_true_lang-Btxc7TBU.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-B0OhtbTA.js";import{_ as M,a as G,b as H,c as J,d as w}from"./SelectValue.vue_vue_type_script_setup_true_lang-CHJCqoG6.js";import{_ as K}from"./Textarea.vue_vue_type_script_setup_true_lang-DgzmZt76.js";import{_ as O}from"./AdminLayout.vue_vue_type_script_setup_true_lang-HaOg-jMM.js";import{A as Q}from"./arrow-left-Bhl3eCZa.js";import{B as C}from"./briefcase-DqoPbQIF.js";import{F as E}from"./tag-CVuAb0K5.js";import"./index-DcePN18A.js";import"./floating-ui.vue-DGmmF0XI.js";import"./check-tU5Ba87G.js";import"./index-DJqslkHs.js";import"./VisuallyHidden-CGUyYIjj.js";import"./useFlashMessages-BQWSMemQ.js";import"./x-MjRAM-mT.js";import"./index-Dc32wMFW.js";import"./shield-DSsoQyNN.js";import"./user-CO02PkBz.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DeF5hJ4Q.js";import"./chevron-right-q4mBAWz9.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CnoKE1DK.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-02x5QTXs.js";import"./index-SnReKwv1.js";import"./circle-alert-BPPRs1OY.js";import"./map-pin-DCkJGui3.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BZgHTFU_.js";import"./chevrons-up-down-CDd76zFI.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BRdnVbyR.js";import"./users-BfW56zi5.js";import"./target-Ca1ZtCte.js";import"./vote-DhXVxvh8.js";import"./folder-open-Bm8bYSgZ.js";import"./send-BEYupbNu.js";import"./file-text-D7o3rFAC.js";import"./calendar-BWZ081O_.js";import"./megaphone-DEQu4jR5.js";import"./user-check-CT5LXWQs.js";import"./clipboard-list-DZI3IY8w.js";import"./mail-C3ScHVdM.js";import"./message-square-CBY6ylkC.js";import"./external-link-ThR7N75O.js";import"./panel-left-CISZsrtm.js";import"./index-CKyiPBXR.js";import"./index-DrTK4xQW.js";const R={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},W={class:"flex items-center justify-between"},X={class:"text-3xl font-bold"},Y={class:"text-muted-foreground"},Z={class:"grid gap-6 md:grid-cols-2"},ee={class:"space-y-4"},re={key:0,class:"text-sm text-destructive mt-1"},te={key:0,class:"text-sm text-destructive mt-1"},oe={class:"space-y-4"},se={class:"flex items-center gap-2"},ae={key:0,class:"text-sm text-destructive mt-1"},ie={class:"space-y-3"},ne={class:"flex items-center space-x-2"},de={class:"bg-muted/50 p-3 rounded-lg text-sm space-y-2"},le={class:"flex items-start gap-2"},me={class:"flex items-start gap-2"},ce={class:"flex items-center space-x-2"},ue={key:0,class:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},pe={class:"flex items-center gap-2 mt-2 text-blue-700"},fe={key:0},_e={class:"font-medium"},ge={key:1,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},ve={class:"text-red-800 text-sm"},be={class:"flex justify-between mt-8"},fr=j({__name:"Form",props:{cargo:{},cargosPadre:{}},setup(_){const g=_,u=y(()=>!!g.cargo),S=[{title:"Admin",href:"/admin/dashboard"},{title:"Cargos",href:"/admin/cargos"},{title:u.value?"Editar":"Crear",href:"#"}],t=z((()=>{if(!g.cargo)return{nombre:"",descripcion:"",parent_id:"null",es_cargo:!0,activo:!0};const n=g.cargo;return{nombre:n.nombre||"",descripcion:n.descripcion||"",parent_id:n.parent_id?String(n.parent_id):"null",es_cargo:n.es_cargo,activo:n.activo}})()),N=()=>{const n={nombre:t.nombre,descripcion:t.descripcion,parent_id:t.parent_id&&t.parent_id!=="null"?parseInt(t.parent_id):null,es_cargo:t.es_cargo,activo:t.activo};u.value?t.transform(()=>n).put(`/admin/cargos/${g.cargo.id}`,{onError:r=>{console.error("Errores de validación:",r)}}):t.transform(()=>n).post("/admin/cargos",{onError:r=>{console.error("Errores de validación:",r)}})},D=n=>n?C:E,F=y(()=>t.nombre.trim().length>0);return(n,r)=>(m(),c($,null,[s(e(h),{title:u.value?"Editar Cargo":"Nuevo Cargo"},null,8,["title"]),s(O,{breadcrumbs:S},{default:a(()=>[o("div",R,[o("div",W,[o("div",null,[o("h1",X,l(u.value?"Editar Cargo":"Nuevo Cargo"),1),o("p",Y,l(u.value?"Modifica los datos del cargo":"Crea un nuevo cargo en la estructura jerárquica"),1)]),s(e(x),{variant:"outline",onClick:r[0]||(r[0]=v=>n.$inertia.visit("/admin/cargos"))},{default:a(()=>[s(e(Q),{class:"mr-2 h-4 w-4"}),r[7]||(r[7]=d(" Volver ",-1))]),_:1})]),s(e(q),null,{default:a(()=>[s(e(I),null,{default:a(()=>[s(e(P),null,{default:a(()=>[d(l(u.value?"Datos del Cargo":"Información del Nuevo Cargo"),1)]),_:1})]),_:1}),s(e(T),{class:"space-y-6"},{default:a(()=>{var v;return[o("form",{onSubmit:A(N,["prevent"])},[o("div",Z,[o("div",ee,[o("div",null,[s(e(p),{for:"nombre"},{default:a(()=>[...r[8]||(r[8]=[d("Nombre del Cargo *",-1)])]),_:1}),s(e(L),{id:"nombre",modelValue:e(t).nombre,"onUpdate:modelValue":r[1]||(r[1]=i=>e(t).nombre=i),placeholder:"Ej: Presidente, Senador, Alcalde...",class:b({"border-destructive":e(t).errors.nombre})},null,8,["modelValue","class"]),e(t).errors.nombre?(m(),c("p",re,l(e(t).errors.nombre),1)):f("",!0)]),o("div",null,[s(e(p),{for:"descripcion"},{default:a(()=>[...r[9]||(r[9]=[d("Descripción (opcional)",-1)])]),_:1}),s(e(K),{id:"descripcion",modelValue:e(t).descripcion,"onUpdate:modelValue":r[2]||(r[2]=i=>e(t).descripcion=i),placeholder:"Descripción detallada del cargo...",rows:"4",class:b({"border-destructive":e(t).errors.descripcion})},null,8,["modelValue","class"]),e(t).errors.descripcion?(m(),c("p",te,l(e(t).errors.descripcion),1)):f("",!0)])]),o("div",oe,[o("div",null,[s(e(p),{for:"parent_id"},{default:a(()=>[...r[10]||(r[10]=[d("Cargo Padre (opcional)",-1)])]),_:1}),s(e(M),{modelValue:e(t).parent_id,"onUpdate:modelValue":r[3]||(r[3]=i=>e(t).parent_id=i)},{default:a(()=>[s(e(G),{class:b({"border-destructive":e(t).errors.parent_id})},{default:a(()=>[s(e(H),{placeholder:"Seleccionar cargo padre..."})]),_:1},8,["class"]),s(e(J),null,{default:a(()=>[s(e(w),{value:"null"},{default:a(()=>[...r[11]||(r[11]=[d("Sin cargo padre (raíz)",-1)])]),_:1}),(m(!0),c($,null,B(_.cargosPadre,i=>(m(),k(e(w),{key:i.id,value:i.id.toString()},{default:a(()=>[o("div",se,[(m(),k(U(D(i.es_cargo)),{class:"h-3 w-3"})),d(" "+l(i.nombre),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(t).errors.parent_id?(m(),c("p",ae,l(e(t).errors.parent_id),1)):f("",!0),r[12]||(r[12]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Define la jerarquía organizacional. Un cargo sin padre es de nivel raíz. ",-1))]),o("div",ie,[s(e(p),null,{default:a(()=>[...r[13]||(r[13]=[d("Tipo de Elemento",-1)])]),_:1}),o("div",ne,[s(e(V),{id:"es_cargo",checked:e(t).es_cargo,"onUpdate:checked":r[4]||(r[4]=i=>e(t).es_cargo=i)},null,8,["checked"]),s(e(p),{for:"es_cargo",class:"flex items-center gap-2"},{default:a(()=>[s(e(C),{class:"h-4 w-4"}),r[14]||(r[14]=d(" Es un Cargo ",-1))]),_:1})]),o("div",de,[o("div",le,[s(e(C),{class:"h-4 w-4 mt-0.5 text-blue-600"}),r[15]||(r[15]=o("div",null,[o("p",{class:"font-medium text-blue-800"},"Cargo:"),o("p",{class:"text-muted-foreground"}," Aparece en el listado de cargos disponibles para crear convocatorias y postulaciones. ")],-1))]),o("div",me,[s(e(E),{class:"h-4 w-4 mt-0.5 text-gray-600"}),r[16]||(r[16]=o("div",null,[o("p",{class:"font-medium text-gray-800"},"Categoría:"),o("p",{class:"text-muted-foreground"}," Solo se usa para organizar la estructura jerárquica. No aparece en convocatorias. ")],-1))])])]),o("div",ce,[s(e(V),{id:"activo",checked:e(t).activo,"onUpdate:checked":r[5]||(r[5]=i=>e(t).activo=i)},null,8,["checked"]),s(e(p),{for:"activo"},{default:a(()=>[...r[17]||(r[17]=[d(" Cargo activo ",-1)])]),_:1})]),r[18]||(r[18]=o("p",{class:"text-xs text-muted-foreground"}," Solo los cargos activos pueden ser seleccionados como padres o utilizados en convocatorias. ",-1))])]),e(t).parent_id&&e(t).parent_id!=="null"?(m(),c("div",ue,[s(e(p),{class:"text-blue-800 font-medium"},{default:a(()=>[...r[19]||(r[19]=[d("Vista previa de la jerarquía:",-1)])]),_:1}),o("div",pe,[_.cargosPadre.find(i=>i.id.toString()===e(t).parent_id)?(m(),c("span",fe,l((v=_.cargosPadre.find(i=>i.id.toString()===e(t).parent_id))==null?void 0:v.nombre),1)):f("",!0),r[20]||(r[20]=o("span",{class:"text-blue-500"},"→",-1)),o("span",_e,l(e(t).nombre||"Nuevo cargo"),1)])])):f("",!0),e(t).errors.delete?(m(),c("div",ge,[o("p",ve,l(e(t).errors.delete),1)])):f("",!0),o("div",be,[s(e(x),{variant:"outline",type:"button",onClick:r[6]||(r[6]=i=>n.$inertia.visit("/admin/cargos"))},{default:a(()=>[...r[21]||(r[21]=[d(" Cancelar ",-1)])]),_:1}),s(e(x),{type:"submit",disabled:e(t).processing||!F.value},{default:a(()=>[d(l(e(t).processing?"Guardando...":u.value?"Actualizar":"Crear")+" Cargo ",1)]),_:1},8,["disabled"])])],32)]}),_:1})]),_:1})])]),_:1})],64))}});export{fr as default};
