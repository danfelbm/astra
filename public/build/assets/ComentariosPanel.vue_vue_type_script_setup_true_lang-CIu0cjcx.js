import{r as k,c as N,d as W,i as C,e as i,g as v,f as t,t as T,m as n,p as ee,b as y,w as m,j as _,h as q,F as I,k as Q,n as J,I as le,o as ie}from"./app-B8Leig_z.js";import{_ as te,c as ae,a as ce,b as ue}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bj2AuJoS.js";import{_ as me}from"./CardDescription.vue_vue_type_script_setup_true_lang-CdHQfaux.js";import{c as se,_ as L}from"./createLucideIcon-Dm0g44SE.js";import{_ as K}from"./Skeleton.vue_vue_type_script_setup_true_lang-DTieyUJf.js";import{R as de}from"./RichTextEditor-D3QmS5mE.js";import{X as fe}from"./x-Dy8ipvOg.js";import{L as oe}from"./loader-circle-voNbBqrn.js";import{S as pe}from"./send-DcJvi-EW.js";import{b as ve,_ as ge}from"./index-GSdve6pu.js";import{_ as he}from"./index-imQRw12Y.js";import{b as ye,c as xe,g as Z,d as Ce}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CfCilMrb.js";import{_ as _e,a as Re,b as be}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CUfyFSts.js";import{C as ke}from"./clock-DPKg19Z9.js";import{M as G}from"./message-square-4cPUP1T0.js";import{E as we}from"./ellipsis-DkuTZgen.js";import{S as $e}from"./square-pen-D-iwkE_P.js";import{T as Ee}from"./trash-2-Crxuxtsa.js";import{C as Te}from"./SelectValue.vue_vue_type_script_setup_true_lang-BJ-5ga6D.js";import{C as Se}from"./chevron-right-CqJhKBG5.js";import{t as F}from"./index-CmyijCQU.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=se("QuoteIcon",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=se("SmilePlusIcon",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);function Me(s,M){const c=k([]),r=k(!1),g=k(null),f=k(1),S=k(1),b=k(0),X={thumbs_up:"üëç",thumbs_down:"üëé",heart:"‚ù§Ô∏è",laugh:"üòÑ",clap:"üëè",fire:"üî•",check:"‚úÖ",eyes:"üëÄ"},w=`/api/comentarios/${s}/${M}`,R=async(o=1)=>{r.value=!0,g.value=null;try{const a=await(await fetch(`${w}?page=${o}`,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"})).json();if(a.success&&a.data)o===1?c.value=a.data.data:c.value=[...c.value,...a.data.data],f.value=a.data.current_page,S.value=a.data.last_page,b.value=a.data.total;else throw new Error(a.message||"Error al cargar comentarios")}catch(e){g.value=e instanceof Error?e.message:"Error desconocido",console.error("Error cargando comentarios:",e)}finally{r.value=!1}},p=async()=>{f.value<S.value&&await R(f.value+1)},h=async o=>{r.value=!0,g.value=null;try{const a=await(await fetch(w,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":z()},credentials:"same-origin",body:JSON.stringify(o)})).json();return a.success&&a.comentario&&(o.parent_id?P(o.parent_id,a.comentario):(c.value=[a.comentario,...c.value],b.value++)),a}catch(e){const a=e instanceof Error?e.message:"Error al crear comentario";return g.value=a,{success:!1,message:a}}finally{r.value=!1}},$=async(o,e)=>{r.value=!0,g.value=null;try{const l=await(await fetch(`/api/comentarios/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":z()},credentials:"same-origin",body:JSON.stringify(e)})).json();return l.success&&l.comentario&&B(l.comentario),l}catch(a){const l=a instanceof Error?a.message:"Error al actualizar comentario";return g.value=l,{success:!1,message:l}}finally{r.value=!1}},j=async o=>{r.value=!0,g.value=null;try{const a=await(await fetch(`/api/comentarios/${o}`,{method:"DELETE",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":z()},credentials:"same-origin"})).json();return a.success&&(D(o),b.value--),a}catch(e){const a=e instanceof Error?e.message:"Error al eliminar comentario";return g.value=a,{success:!1,message:a}}finally{r.value=!1}},O=async(o,e)=>{try{const l=await(await fetch(`/api/comentarios/${o}/reaccion`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":z()},credentials:"same-origin",body:JSON.stringify({emoji:e})})).json();return l.success&&l.reacciones&&V(o,l.reacciones),l}catch(a){return{success:!1,message:a instanceof Error?a.message:"Error al agregar reacci√≥n"}}},z=()=>{var e;return((e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"))||""},P=(o,e)=>{const a=l=>{for(const x of l){if(x.id===o)return x.respuestas||(x.respuestas=[]),x.respuestas.push(e),!0;if(x.respuestas&&a(x.respuestas))return!0}return!1};a(c.value)},B=o=>{const e=a=>{for(let l=0;l<a.length;l++){if(a[l].id===o.id)return a[l]={...o,respuestas:a[l].respuestas},!0;if(a[l].respuestas&&e(a[l].respuestas))return!0}return!1};e(c.value)},D=o=>{const e=a=>a.filter(l=>l.id!==o).map(l=>({...l,respuestas:l.respuestas?e(l.respuestas):void 0}));c.value=e(c.value)},V=(o,e)=>{const a=l=>{for(const x of l){if(x.id===o)return x.reacciones_resumen=e,!0;if(x.respuestas&&a(x.respuestas))return!0}return!1};a(c.value)},H=N(()=>c.value.length>0),A=N(()=>f.value<S.value);return{comentarios:c,loading:r,error:g,currentPage:f,lastPage:S,total:b,emojis:X,tieneComentarios:H,puedeCargarMas:A,cargar:R,cargarMas:p,crear:h,editar:$,eliminar:j,toggleReaccion:O}}const je={class:"flex items-start gap-2 p-3 bg-muted/50 rounded-md border-l-4 border-primary/30 text-sm"},ze={class:"flex-1 min-w-0"},Le={class:"flex items-center gap-2 mb-1"},Xe={class:"font-medium text-xs"},Fe={class:"text-xs text-muted-foreground"},Ne=["innerHTML"],re=W({__name:"ComentarioQuote",props:{comentario:{}},setup(s){return(M,c)=>{var r;return n(),C("div",je,[i(t(ne),{class:"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5"}),v("div",ze,[v("div",Le,[v("span",Xe,T(((r=s.comentario.autor)==null?void 0:r.name)||"Usuario"),1),v("span",Fe,T(s.comentario.fecha_relativa),1)]),v("p",{class:"text-muted-foreground line-clamp-2",innerHTML:s.comentario.contenido_truncado||s.comentario.contenido_plain},null,8,Ne)])])}}}),Oe={key:1,class:"flex items-center gap-2 text-sm text-muted-foreground"},Pe={class:"font-medium"},Be={class:"flex items-center justify-end gap-2"},Y=W({__name:"ComentarioForm",props:{mode:{default:"create"},comentarioEditar:{default:null},comentarioCitar:{default:null},comentarioResponder:{default:null},loading:{type:Boolean,default:!1},placeholder:{default:"Escribe un comentario..."}},emits:["submit","cancel"],setup(s,{expose:M,emit:c}){const r=s,g=c,f=k("");ee(()=>r.comentarioEditar,p=>{p&&(f.value=p.contenido)},{immediate:!0});const S=N(()=>{switch(r.mode){case"edit":return"Guardar cambios";case"reply":return"Responder";case"quote":return"Comentar";default:return"Comentar"}}),b=N(()=>{var p,h;switch(r.mode){case"reply":return`Responder a ${((h=(p=r.comentarioResponder)==null?void 0:p.autor)==null?void 0:h.name)||"usuario"}...`;case"quote":return"Escribe tu comentario sobre la cita...";default:return r.placeholder}}),X=N(()=>f.value.replace(/<[^>]*>/g,"").trim().length>0),w=()=>{var $,j;if(!X.value||r.loading)return;const p=r.mode==="reply"&&(($=r.comentarioResponder)==null?void 0:$.id)||null,h=r.mode==="quote"&&((j=r.comentarioCitar)==null?void 0:j.id)||null;g("submit",f.value,p,h),r.mode!=="edit"&&(f.value="")},R=()=>{f.value="",g("cancel")};return M({clear:()=>{f.value=""}}),(p,h)=>(n(),y(t(te),{class:"border-0 shadow-none"},{default:m(()=>[i(t(ae),{class:"p-0 space-y-3"},{default:m(()=>{var $;return[s.mode==="quote"&&s.comentarioCitar?(n(),y(re,{key:0,comentario:s.comentarioCitar},null,8,["comentario"])):_("",!0),s.mode==="reply"&&s.comentarioResponder?(n(),C("div",Oe,[h[1]||(h[1]=v("span",null,"Respondiendo a",-1)),v("span",Pe,T(($=s.comentarioResponder.autor)==null?void 0:$.name),1),i(t(L),{variant:"ghost",size:"sm",class:"h-5 w-5 p-0 ml-auto",onClick:R},{default:m(()=>[i(t(fe),{class:"h-3 w-3"})]),_:1})])):_("",!0),i(de,{modelValue:f.value,"onUpdate:modelValue":h[0]||(h[0]=j=>f.value=j),placeholder:b.value,rows:3},null,8,["modelValue","placeholder"]),v("div",Be,[s.mode!=="create"?(n(),y(t(L),{key:0,variant:"ghost",size:"sm",onClick:R,disabled:s.loading},{default:m(()=>[...h[2]||(h[2]=[q(" Cancelar ",-1)])]),_:1},8,["disabled"])):_("",!0),i(t(L),{size:"sm",onClick:w,disabled:!X.value||s.loading},{default:m(()=>[s.loading?(n(),y(t(oe),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(n(),y(t(pe),{key:1,class:"h-4 w-4 mr-2"})),q(" "+T(S.value),1)]),_:1},8,["disabled"])])]}),_:1})]),_:1}))}}),Ie={class:"flex items-center gap-1.5 flex-wrap"},De={class:"text-muted-foreground"},Ve={class:"flex gap-1"},He=W({__name:"ComentarioReacciones",props:{reacciones:{default:()=>[]},canReact:{type:Boolean,default:!0}},emits:["toggle"],setup(s,{emit:M}){const c=s,r=M,g={thumbs_up:"üëç",thumbs_down:"üëé",heart:"‚ù§Ô∏è",laugh:"üòÑ",clap:"üëè",fire:"üî•",check:"‚úÖ",eyes:"üëÄ"},f=k(!1),S=N(()=>[...c.reacciones].sort((w,R)=>R.count-w.count)),b=w=>{const R=c.reacciones.find(p=>p.emoji===w);return(R==null?void 0:R.usuario_actual_reacciono)||!1},X=w=>{r("toggle",w),f.value=!1};return(w,R)=>(n(),C("div",Ie,[(n(!0),C(I,null,Q(S.value,p=>(n(),y(t(L),{key:p.emoji,variant:"ghost",size:"sm",class:J(["h-7 px-2 text-xs gap-1",{"bg-primary/10 hover:bg-primary/20":p.usuario_actual_reacciono}]),onClick:h=>X(p.emoji),disabled:!s.canReact},{default:m(()=>[v("span",null,T(p.simbolo),1),v("span",De,T(p.count),1)]),_:2},1032,["class","onClick","disabled"]))),128)),s.canReact?(n(),y(t(_e),{key:0,open:f.value,"onUpdate:open":R[0]||(R[0]=p=>f.value=p)},{default:m(()=>[i(t(Re),{asChild:""},{default:m(()=>[i(t(L),{variant:"ghost",size:"sm",class:"h-7 w-7 p-0"},{default:m(()=>[i(t(qe),{class:"h-4 w-4 text-muted-foreground"})]),_:1})]),_:1}),i(t(be),{class:"w-auto p-2",align:"start"},{default:m(()=>[v("div",Ve,[(n(),C(I,null,Q(g,(p,h)=>i(t(L),{key:h,variant:"ghost",size:"sm",class:J(["h-8 w-8 p-0 text-lg hover:scale-125 transition-transform",{"bg-primary/10":b(h)}]),onClick:$=>X(h)},{default:m(()=>[q(T(p),1)]),_:2},1032,["class","onClick"])),64))])]),_:1})]),_:1},8,["open"])):_("",!0)]))}}),Ae={class:"flex gap-3"},Ue={class:"flex-1 min-w-0"},Qe={class:"flex items-center gap-2 flex-wrap"},We={class:"font-medium text-sm"},Ke={class:"text-xs text-muted-foreground"},Je={key:1,class:"text-xs text-muted-foreground flex items-center gap-1"},Ge={key:0,class:"mt-2"},Ye=["innerHTML"],Ze={class:"mt-2"},et={class:"flex items-center gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity"},tt={key:2,class:"mt-3"},at={key:0,class:"mt-3 space-y-3"},st=W({__name:"ComentarioItem",props:{comentario:{},nivel:{default:0},canCreate:{type:Boolean,default:!0},canReact:{type:Boolean,default:!0}},emits:["reply","quote","edit","delete","toggleReaccion","submitReply"],setup(s,{emit:M}){const c=s,r=M,g=k(!1),f=k(!1),S=k(!1),b=k(!1),X=N(()=>{const o=e=>{var l,x;let a=((l=e.respuestas)==null?void 0:l.length)||0;return(x=e.respuestas)==null||x.forEach(u=>{a+=o(u)}),a};return o(c.comentario)}),w=N(()=>{var o;return(((o=c.comentario.respuestas)==null?void 0:o.length)||0)>0}),R=N(()=>{var e;return(((e=c.comentario.autor)==null?void 0:e.name)||"U").substring(0,2).toUpperCase()}),p=N(()=>c.comentario.es_editable||!1),h=N(()=>{const o=c.comentario.tiempo_restante_edicion;if(!o||o<=0)return null;const e=Math.floor(o/60),a=o%60;return e>0?`${e}h ${a}m para editar`:`${a}m para editar`}),$=()=>{g.value=!g.value},j=()=>{f.value=!0},O=(o,e,a)=>{r("submitReply",o,c.comentario.id),f.value=!1},z=()=>{f.value=!1},P=()=>{r("quote",c.comentario)},B=()=>{S.value=!0},D=o=>{r("edit",c.comentario,o),S.value=!1},V=()=>{S.value=!1},H=()=>{b.value?(r("delete",c.comentario),b.value=!1):(b.value=!0,setTimeout(()=>{b.value=!1},3e3))},A=o=>{r("toggleReaccion",c.comentario.id,o)};return(o,e)=>{var l;const a=le("ComentarioItem",!0);return n(),C("div",{class:J(["group",{"ml-6 border-l-2 border-muted pl-4":s.nivel>0}])},[v("div",Ae,[i(t(ge),{class:"h-8 w-8 flex-shrink-0"},{default:m(()=>[i(t(ve),{class:"text-xs"},{default:m(()=>[q(T(R.value),1)]),_:1})]),_:1}),v("div",Ue,[v("div",Qe,[v("span",We,T(((l=s.comentario.autor)==null?void 0:l.name)||"Usuario"),1),v("span",Ke,T(s.comentario.fecha_relativa),1),s.comentario.es_editado?(n(),y(t(he),{key:0,variant:"outline",class:"text-xs h-5"},{default:m(()=>[...e[7]||(e[7]=[q(" editado ",-1)])]),_:1})):_("",!0),h.value?(n(),C("span",Je,[i(t(ke),{class:"h-3 w-3"}),q(" "+T(h.value),1)])):_("",!0)]),S.value?(n(),C("div",Ge,[i(Y,{mode:"edit","comentario-editar":s.comentario,onSubmit:e[0]||(e[0]=x=>D(x)),onCancel:V},null,8,["comentario-editar"])])):(n(),C(I,{key:1},[s.comentario.comentario_citado?(n(),y(re,{key:0,comentario:s.comentario.comentario_citado,class:"mt-2"},null,8,["comentario"])):_("",!0),v("div",{class:"mt-1 text-sm prose prose-sm dark:prose-invert max-w-none",innerHTML:s.comentario.contenido},null,8,Ye),v("div",Ze,[i(He,{reacciones:s.comentario.reacciones_resumen||[],"can-react":s.canReact,onToggle:A},null,8,["reacciones","can-react"])]),v("div",et,[s.canCreate?(n(),y(t(L),{key:0,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:j},{default:m(()=>[i(t(G),{class:"h-3 w-3 mr-1"}),e[8]||(e[8]=q(" Responder ",-1))]),_:1})):_("",!0),s.canCreate?(n(),y(t(L),{key:1,variant:"ghost",size:"sm",class:"h-7 text-xs",onClick:P},{default:m(()=>[i(t(ne),{class:"h-3 w-3 mr-1"}),e[9]||(e[9]=q(" Citar ",-1))]),_:1})):_("",!0),p.value||s.comentario.es_eliminable?(n(),y(t(ye),{key:2},{default:m(()=>[i(t(xe),{asChild:""},{default:m(()=>[i(t(L),{variant:"ghost",size:"sm",class:"h-7 w-7 p-0"},{default:m(()=>[i(t(we),{class:"h-4 w-4"})]),_:1})]),_:1}),i(t(Ce),{align:"end"},{default:m(()=>[s.comentario.es_editable?(n(),y(t(Z),{key:0,onClick:B},{default:m(()=>[i(t($e),{class:"h-4 w-4 mr-2"}),e[10]||(e[10]=q(" Editar ",-1))]),_:1})):_("",!0),s.comentario.es_eliminable?(n(),y(t(Z),{key:1,class:"text-destructive",onClick:H},{default:m(()=>[i(t(Ee),{class:"h-4 w-4 mr-2"}),q(" "+T(b.value?"Confirmar eliminaci√≥n":"Eliminar"),1)]),_:1})):_("",!0)]),_:1})]),_:1})):_("",!0),w.value?(n(),y(t(L),{key:3,variant:"ghost",size:"sm",class:"h-7 text-xs ml-auto",onClick:$},{default:m(()=>[g.value?(n(),y(t(Se),{key:1,class:"h-3 w-3 mr-1"})):(n(),y(t(Te),{key:0,class:"h-3 w-3 mr-1"})),q(" "+T(g.value?`Mostrar ${X.value} respuestas`:"Ocultar respuestas"),1)]),_:1})):_("",!0)])],64)),f.value?(n(),C("div",tt,[i(Y,{mode:"reply","comentario-responder":s.comentario,onSubmit:O,onCancel:z},null,8,["comentario-responder"])])):_("",!0)])]),w.value&&!g.value?(n(),C("div",at,[(n(!0),C(I,null,Q(s.comentario.respuestas,x=>(n(),y(a,{key:x.id,comentario:x,nivel:s.nivel+1,"can-create":s.canCreate,"can-react":s.canReact,onReply:e[1]||(e[1]=u=>r("reply",u)),onQuote:e[2]||(e[2]=u=>r("quote",u)),onEdit:e[3]||(e[3]=(u,d)=>r("edit",u,d)),onDelete:e[4]||(e[4]=u=>r("delete",u)),onToggleReaccion:e[5]||(e[5]=(u,d)=>r("toggleReaccion",u,d)),onSubmitReply:e[6]||(e[6]=(u,d)=>r("submitReply",u,d))},null,8,["comentario","nivel","can-create","can-react"]))),128))])):_("",!0)],2)}}}),ot={class:"flex items-center justify-between"},nt={key:0},rt={key:1,class:"space-y-4"},lt={class:"flex-1 space-y-2"},it={key:2,class:"text-center py-8 text-destructive"},ct={key:3,class:"text-center py-8"},ut={key:0,class:"text-sm text-muted-foreground mt-1"},mt={key:4,class:"space-y-4"},dt={key:0,class:"text-center pt-4"},Lt=W({__name:"ComentariosPanel",props:{commentableType:{},commentableId:{},canCreate:{type:Boolean,default:!0},canReact:{type:Boolean,default:!0}},setup(s){const M=s,{comentarios:c,loading:r,error:g,total:f,puedeCargarMas:S,cargar:b,cargarMas:X,crear:w,editar:R,eliminar:p,toggleReaccion:h}=Me(M.commentableType,M.commentableId),$=k("create"),j=k(null),O=k(null),z=k(null),P=k(!1),B=k(null);ie(()=>{b()}),ee(()=>[M.commentableType,M.commentableId],()=>{b()});const D=async(u,d,E)=>{P.value=!0;try{if($.value==="edit"&&z.value){const U=await R(z.value.id,{contenido:u});U.success?(F.success("Comentario actualizado"),l()):F.error(U.message||"Error al actualizar")}else{const U=await w({contenido:u,parent_id:d,quoted_comentario_id:E});U.success?(F.success(d?"Respuesta enviada":"Comentario publicado"),l()):F.error(U.message||"Error al publicar")}}finally{P.value=!1}},V=u=>{$.value="reply",j.value=u,O.value=null,z.value=null},H=u=>{$.value="quote",O.value=u,j.value=null,z.value=null},A=async(u,d)=>{const E=await R(u.id,{contenido:d});E.success?F.success("Comentario actualizado"):F.error(E.message||"Error al actualizar")},o=async u=>{const d=await p(u.id);d.success?F.success("Comentario eliminado"):F.error(d.message||"Error al eliminar")},e=async(u,d)=>{const E=await h(u,d);E.success||F.error(E.message||"Error al agregar reacci√≥n")},a=async(u,d)=>{const E=await w({contenido:u,parent_id:d,quoted_comentario_id:null});E.success?F.success("Respuesta enviada"):F.error(E.message||"Error al enviar respuesta")},l=()=>{var u;$.value="create",j.value=null,O.value=null,z.value=null,(u=B.value)==null||u.clear()},x=()=>{l()};return(u,d)=>(n(),y(t(te),null,{default:m(()=>[i(t(ce),null,{default:m(()=>[v("div",ot,[v("div",null,[i(t(ue),{class:"flex items-center gap-2"},{default:m(()=>[i(t(G),{class:"h-5 w-5"}),d[1]||(d[1]=q(" Comentarios ",-1))]),_:1}),t(f)>0?(n(),y(t(me),{key:0},{default:m(()=>[q(T(t(f))+" "+T(t(f)===1?"comentario":"comentarios"),1)]),_:1})):_("",!0)])])]),_:1}),i(t(ae),{class:"space-y-6"},{default:m(()=>[s.canCreate?(n(),C("div",nt,[i(Y,{ref_key:"formRef",ref:B,mode:$.value,"comentario-editar":z.value,"comentario-citar":O.value,"comentario-responder":j.value,loading:P.value,onSubmit:D,onCancel:x},null,8,["mode","comentario-editar","comentario-citar","comentario-responder","loading"])])):_("",!0),t(r)&&t(c).length===0?(n(),C("div",rt,[(n(),C(I,null,Q(3,E=>v("div",{key:E,class:"flex gap-3"},[i(t(K),{class:"h-8 w-8 rounded-full"}),v("div",lt,[i(t(K),{class:"h-4 w-32"}),i(t(K),{class:"h-16 w-full"})])])),64))])):t(g)?(n(),C("div",it,[v("p",null,T(t(g)),1),i(t(L),{variant:"outline",size:"sm",class:"mt-2",onClick:d[0]||(d[0]=E=>t(b)())},{default:m(()=>[...d[2]||(d[2]=[q(" Reintentar ",-1)])]),_:1})])):t(c).length===0?(n(),C("div",ct,[i(t(G),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),d[3]||(d[3]=v("p",{class:"text-muted-foreground"},"No hay comentarios todav√≠a",-1)),s.canCreate?(n(),C("p",ut," S√© el primero en comentar ")):_("",!0)])):(n(),C("div",mt,[(n(!0),C(I,null,Q(t(c),E=>(n(),y(st,{key:E.id,comentario:E,"can-create":s.canCreate,"can-react":s.canReact,onReply:V,onQuote:H,onEdit:A,onDelete:o,onToggleReaccion:e,onSubmitReply:a},null,8,["comentario","can-create","can-react"]))),128)),t(S)?(n(),C("div",dt,[i(t(L),{variant:"outline",size:"sm",disabled:t(r),onClick:t(X)},{default:m(()=>[t(r)?(n(),y(t(oe),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):_("",!0),d[4]||(d[4]=q(" Cargar m√°s comentarios ",-1))]),_:1},8,["disabled","onClick"])])):_("",!0)]))]),_:1})]),_:1}))}});export{Lt as _};
