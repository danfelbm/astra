import{_ as w}from"./index-WQ9DFilu.js";import{_ as v}from"./createLucideIcon-CiWTV2sr.js";import{_ as p,a as y,b as h,c as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-CCSG5iJV.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-CnYuL5N8.js";import{_ as D}from"./Separator.vue_vue_type_script_setup_true_lang-BRpqbapV.js";import{_ as A}from"./UserLayout.vue_vue_type_script_setup_true_lang-DYYfpH90.js";import{d as j,r as E,i as m,e,f as o,q as F,w as a,g as s,h as r,t as l,j as g,m as d,n as I,F as V,k as N,b as R,s as q}from"./app-Bwo8gItk.js";import{C as b}from"./circle-check-big-CB5p8Klb.js";import{A as z}from"./arrow-left-DdNh2QV4.js";import{C as H}from"./calendar-Np9EKWlU.js";import{H as L}from"./hash-E0IUcO0f.js";import{C as P}from"./copy-BsSz3zwX.js";import{M as O}from"./map-pin-Ppz-XqMb.js";import"./index-ymXBWjcf.js";import"./Input.vue_vue_type_script_setup_true_lang-1axY5i_y.js";import"./index-rDJfqaGK.js";import"./floating-ui.vue-0ZArUiY9.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Clun62gV.js";import"./x-BLnECrCi.js";import"./index-CgVSfdqX.js";import"./shield-ByLQ2f9R.js";import"./user-C6TSB5_J.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DEG_Wv36.js";import"./chevron-right-BfbIuNo5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-aDqgcxXL.js";import"./VisuallyHidden-D4hNOF66.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Cbbm024S.js";import"./check-Y8HDg3In.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BKV7xEtz.js";import"./index-CeoZ0Klu.js";import"./circle-alert-BjQ4nvNB.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BREJC4p2.js";import"./usePermissions-CfOwIvow.js";import"./square-check-big-Bmj3P-o3.js";import"./file-text-BE7lj9lG.js";import"./users-B58AUZuH.js";import"./folder-open-BO1Ubl99.js";import"./index-D73sxKyv.js";const U={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},G={class:"flex items-center justify-between"},J={class:"text-3xl font-bold flex items-center gap-2"},K={class:"space-y-4"},Q={key:0,class:"text-muted-foreground"},W={class:"flex flex-wrap gap-4 text-sm"},X={class:"flex items-center gap-2"},Y={class:"flex items-center gap-2 text-muted-foreground"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tt={class:"space-y-4"},et={class:"text-lg"},ot={class:"text-lg font-mono"},st={class:"space-y-4"},at={class:"text-lg font-mono"},it={class:"flex items-center gap-2 mb-2"},nt={class:"text-xs font-mono bg-muted p-2 rounded flex-1 break-all"},rt={class:"flex gap-2"},lt={class:"space-y-6"},ct={class:"flex items-start justify-between"},dt={class:"flex-1"},mt={key:0,class:"text-red-500"},ut={key:0,class:"text-sm text-muted-foreground mt-1"},ft={class:"bg-muted/30 rounded-lg p-4"},pt={class:"text-lg"},_t={class:"flex items-start gap-3"},te=j({__name:"MiVoto",props:{votacion:{},voto:{}},setup(i){const k=i,$=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Votaciones",href:"/miembro/votaciones"},{title:"Mi Voto",href:"#"}],f=E(!1),T=()=>{q.get("/miembro/votaciones")},M=async()=>{try{await navigator.clipboard.writeText(k.voto.token_unico),f.value=!0,setTimeout(()=>{f.value=!1},2e3)}catch(c){console.error("Error al copiar token:",c)}},S=()=>{const c=`/verificar-token/${encodeURIComponent(k.voto.token_unico)}`;window.open(c,"_blank")},x=c=>new Date(c).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),B=(c,t)=>{if(c.type==="convocatoria"||c.type==="perfil_candidatura"){if(t===null||t==="null")return"Voto en blanco";if(!t||t==="")return"Sin respuesta"}return!t&&t!==0?"Sin respuesta":c.type==="checkbox"?Array.isArray(t)&&t.length>0?t.join(", "):"Sin respuesta":t.toString()};return(c,t)=>(d(),m(V,null,[e(o(F),{title:`Mi Voto: ${i.votacion.titulo}`},null,8,["title"]),e(A,{breadcrumbs:$},{default:a(()=>[s("div",U,[s("div",G,[s("div",null,[s("h1",J,[e(o(b),{class:"h-8 w-8 text-green-600"}),t[0]||(t[0]=r(" Mi Voto ",-1))]),t[1]||(t[1]=s("p",{class:"text-muted-foreground"}," Resumen de tu participación en esta votación ",-1))]),e(o(v),{variant:"outline",onClick:T},{default:a(()=>[e(o(z),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=r(" Volver ",-1))]),_:1})]),e(o(p),null,{default:a(()=>[e(o(y),null,{default:a(()=>[e(o(h),null,{default:a(()=>[r(l(i.votacion.titulo),1)]),_:1})]),_:1}),e(o(_),null,{default:a(()=>[s("div",K,[i.votacion.descripcion?(d(),m("p",Q,l(i.votacion.descripcion),1)):g("",!0),s("div",W,[s("div",X,[e(o(w),{variant:"outline"},{default:a(()=>[r(l(i.votacion.categoria.nombre),1)]),_:1})]),s("div",Y,[e(o(H),{class:"h-4 w-4"}),r(" "+l(x(i.votacion.fecha_inicio))+" - "+l(x(i.votacion.fecha_fin)),1)])])])]),_:1})]),_:1}),e(o(p),null,{default:a(()=>[e(o(y),null,{default:a(()=>[e(o(h),{class:"flex items-center gap-2"},{default:a(()=>[e(o(L),{class:"h-5 w-5"}),t[3]||(t[3]=r(" Información del Voto ",-1))]),_:1})]),_:1}),e(o(_),null,{default:a(()=>[s("div",Z,[s("div",tt,[s("div",null,[e(o(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[4]||(t[4]=[r("Fecha y Hora",-1)])]),_:1}),s("p",et,l(x(i.voto.created_at)),1)]),s("div",null,[e(o(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[5]||(t[5]=[r("ID del Voto",-1)])]),_:1}),s("p",ot,"#"+l(i.voto.id),1)])]),s("div",st,[s("div",null,[e(o(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[6]||(t[6]=[r("IP Address",-1)])]),_:1}),s("p",at,l(i.voto.ip_address),1)]),s("div",null,[e(o(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>[...t[7]||(t[7]=[r("Token de Verificación Firmado",-1)])]),_:1}),s("div",it,[s("p",nt,l(i.voto.token_unico),1),e(o(v),{variant:"outline",size:"sm",onClick:M,class:I({"bg-green-50 border-green-200":f.value})},{default:a(()=>[e(o(P),{class:"h-4 w-4"}),r(" "+l(f.value?"Copiado!":"Copiar"),1)]),_:1},8,["class"])]),t[9]||(t[9]=s("p",{class:"text-xs text-muted-foreground mb-2"}," Token firmado digitalmente que contiene tus respuestas. Verificable públicamente. ",-1)),s("div",rt,[e(o(v),{variant:"outline",size:"sm",onClick:S,class:"text-xs"},{default:a(()=>[e(o(O),{class:"h-3 w-3 mr-1"}),t[8]||(t[8]=r(" Verificar Públicamente ",-1))]),_:1})])])])])]),_:1})]),_:1}),e(o(p),null,{default:a(()=>[e(o(y),null,{default:a(()=>[e(o(h),{class:"flex items-center gap-2"},{default:a(()=>[e(o(b),{class:"h-5 w-5"}),t[10]||(t[10]=r(" Mis Respuestas ",-1))]),_:1})]),_:1}),e(o(_),null,{default:a(()=>[s("div",lt,[(d(!0),m(V,null,N(i.votacion.formulario_config,(n,C)=>(d(),m("div",{key:n.id,class:"space-y-2"},[s("div",ct,[s("div",dt,[e(o(u),{class:"text-base font-medium"},{default:a(()=>[r(l(C+1)+". "+l(n.title)+" ",1),n.required?(d(),m("span",mt,"*")):g("",!0)]),_:2},1024),n.description?(d(),m("p",ut,l(n.description),1)):g("",!0)]),e(o(w),{variant:"secondary",class:"ml-4"},{default:a(()=>[r(l(n.type==="text"?"Texto":n.type==="textarea"?"Texto largo":n.type==="select"?"Selección":n.type==="radio"?"Opción única":n.type==="checkbox"?"Múltiple":n.type==="convocatoria"?"Convocatoria":n.type==="perfil_candidatura"?"Candidatura":n.type),1)]),_:2},1024)]),s("div",ft,[s("p",pt,l(B(n,i.voto.respuestas[n.id])),1)]),C<i.votacion.formulario_config.length-1?(d(),R(o(D),{key:0,class:"mt-6"})):g("",!0)]))),128))])]),_:1})]),_:1}),e(o(p),{class:"border-green-200 bg-green-50/50"},{default:a(()=>[e(o(_),{class:"pt-6"},{default:a(()=>[s("div",_t,[e(o(b),{class:"h-5 w-5 text-green-600 mt-0.5"}),t[11]||(t[11]=s("div",null,[s("p",{class:"font-medium text-green-800"},"Voto registrado exitosamente"),s("p",{class:"text-sm text-green-700 mt-1"}," Tu voto ha sido firmado digitalmente y almacenado de forma segura. El token contiene tus respuestas y puede ser verificado públicamente para confirmar la integridad del proceso electoral. ")],-1))])]),_:1})]),_:1})])]),_:1})],64))}});export{te as default};
