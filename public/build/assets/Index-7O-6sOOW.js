import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-CttZpOXF.js";import{d as E,c as T,k as C,a as v,o as d,b as s,u as t,m as q,e as a,f as l,j as k,i as g,W as b,g as r,P as S,F as y,r as R,t as n,n as M}from"./app-C80QO8j-.js";import{c as W,_ as u}from"./createLucideIcon-Bl_5ZrL0.js";import{_ as G,c as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-BFxu__RC.js";import{_ as O,a as Q,b as $,c,d as H,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-DWQ2nYkx.js";import{_ as U}from"./index-3SchajKl.js";import{_ as K,a as X,b as Y,c as Z,d as tt,e as et,f as st,g as at}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-C9AA79y1.js";import{_ as it,C as ot}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-KRust7fM.js";import{U as lt}from"./upload-SE-w8-pf.js";import{P as rt}from"./plus-CsOmElfz.js";import{S as nt}from"./square-pen-DRwBXxSd.js";import{T as dt}from"./trash-DvqnOqC0.js";import{C as ut}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CB51cKpi.js";import"./Input.vue_vue_type_script_setup_true_lang-eRxB8rl2.js";import"./index-Bs936T5a.js";import"./index-Dffjhihw.js";import"./check-CqiAWBud.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CBz26OSj.js";import"./Label.vue_vue_type_script_setup_true_lang-CVM3UWYT.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CeqFhs2T.js";import"./VisuallyHidden-Db7U7oqZ.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CGs0U8X4.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CrysrfG8.js";import"./users-D9EIFmnR.js";import"./index-hcL9d2Ws.js";import"./briefcase-DuixDvK1.js";import"./calendar-D9mWqiwA.js";import"./circle-alert-CfgUoHm6.js";import"./map-pin-CFTta8Zy.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-9z8aPOd0.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Mp-89UH-.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BqK9iV4w.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-gEXCetET.js";import"./loader-circle-DV70MI8w.js";import"./trash-2-Co-qzEWM.js";import"./search-C8TfLauY.js";import"./history-D0q5y27L.js";import"./save-Ca0AhjI9.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=W("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),ft={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},pt={class:"flex items-center justify-between"},ct={class:"flex gap-2"},_t={class:"rounded-md border"},vt={class:"font-medium"},gt={class:"text-sm text-muted-foreground"},xt={key:0,class:"text-xs text-muted-foreground"},bt=["title"],kt={class:"text-sm text-muted-foreground"},$t={class:"flex justify-end gap-1"},ht={key:0,class:"flex items-center justify-between mt-4"},wt={class:"text-sm text-muted-foreground"},Ct={class:"flex items-center space-x-2"},St={class:"text-sm"},yt={key:0},pe=E({__name:"Index",props:{users:{},filters:{},filterFieldsConfig:{},canImport:{type:Boolean}},setup(P){const _=P,{route:f}=window,A=T(()=>({quickSearch:_.filters.search||"",rootGroup:_.filters.advanced_filters?JSON.parse(_.filters.advanced_filters):void 0})),D=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"}],x=C(!1),p=C(null),B={fields:_.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["name","email","documento_identidad","telefono"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},F=i=>{b.post(f("admin.usuarios.toggle-active",i.id),{},{preserveScroll:!0})},N=i=>{p.value=i,x.value=!0},I=()=>{p.value&&b.delete(f("admin.usuarios.destroy",p.value.id),{preserveScroll:!0}),x.value=!1,p.value=null},V=i=>i==="admin"?"default":"secondary",j=i=>i?"default":"destructive",h=i=>{const e=[];return i.localidad&&e.push(i.localidad.nombre),i.municipio&&e.push(i.municipio.nombre),i.departamento&&e.push(i.departamento.nombre),i.territorio&&e.push(i.territorio.nombre),e.join(", ")||"Sin ubicación"},w=i=>{b.get(f("admin.usuarios.index"),{..._.filters,page:i},{preserveState:!0,preserveScroll:!0})};return(i,e)=>(d(),v(y,null,[s(t(q),{title:"Usuarios"}),s(L,{breadcrumbs:D},{default:a(()=>[l("div",ft,[l("div",pt,[e[6]||(e[6]=l("div",null,[l("h1",{class:"text-3xl font-bold tracking-tight"},"Usuarios"),l("p",{class:"text-muted-foreground"}," Administra los usuarios del sistema ")],-1)),l("div",ct,[i.canImport?(d(),k(t(u),{key:0,variant:"outline",onClick:e[0]||(e[0]=o=>t(b).visit("/admin/imports"))},{default:a(()=>[s(t(lt),{class:"mr-2 h-4 w-4"}),e[4]||(e[4]=r(" Importar CSV "))]),_:1})):g("",!0),s(t(S),{href:t(f)("admin.usuarios.create")},{default:a(()=>[s(t(u),null,{default:a(()=>[s(t(rt),{class:"mr-2 h-4 w-4"}),e[5]||(e[5]=r(" Nuevo Usuario "))]),_:1})]),_:1},8,["href"])])]),s(it,{config:B,route:t(f)("admin.usuarios.index"),"initial-filters":A.value},null,8,["route","initial-filters"]),s(t(G),null,{default:a(()=>[s(t(J),{class:"pt-6"},{default:a(()=>[l("div",_t,[s(t(O),null,{default:a(()=>[s(t(Q),null,{default:a(()=>[s(t($),null,{default:a(()=>[s(t(c),null,{default:a(()=>e[7]||(e[7]=[r("Usuario")])),_:1}),s(t(c),null,{default:a(()=>e[8]||(e[8]=[r("Rol")])),_:1}),s(t(c),null,{default:a(()=>e[9]||(e[9]=[r("Ubicación")])),_:1}),s(t(c),null,{default:a(()=>e[10]||(e[10]=[r("Estado")])),_:1}),s(t(c),null,{default:a(()=>e[11]||(e[11]=[r("Registro")])),_:1}),s(t(c),{class:"text-right"},{default:a(()=>e[12]||(e[12]=[r("Acciones")])),_:1})]),_:1})]),_:1}),s(t(H),null,{default:a(()=>[(d(!0),v(y,null,R(i.users.data,o=>(d(),k(t($),{key:o.id},{default:a(()=>[s(t(m),null,{default:a(()=>[l("div",null,[l("div",vt,n(o.name),1),l("div",gt,n(o.email),1),o.documento_identidad?(d(),v("div",xt," Doc: "+n(o.documento_identidad),1)):g("",!0)])]),_:2},1024),s(t(m),null,{default:a(()=>[s(t(U),{variant:V(o.role)},{default:a(()=>[r(n(o.role==="admin"?"Administrador":"Usuario"),1)]),_:2},1032,["variant"])]),_:2},1024),s(t(m),null,{default:a(()=>[l("div",{class:"max-w-[200px] truncate text-sm",title:h(o)},n(h(o)),9,bt)]),_:2},1024),s(t(m),null,{default:a(()=>[s(t(U),{variant:j(o.activo)},{default:a(()=>[r(n(o.activo?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),s(t(m),null,{default:a(()=>[l("div",kt,n(new Date(o.created_at).toLocaleDateString()),1)]),_:2},1024),s(t(m),null,{default:a(()=>[l("div",$t,[s(t(S),{href:t(f)("admin.usuarios.edit",o.id)},{default:a(()=>[s(t(u),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:a(()=>[s(t(nt),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),s(t(u),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:z=>F(o),title:o.activo?"Desactivar":"Activar"},{default:a(()=>[s(t(mt),{class:M(["h-4 w-4",o.activo?"text-green-600":"text-gray-400"])},null,8,["class"])]),_:2},1032,["onClick","title"]),s(t(u),{variant:"ghost",size:"icon",class:"h-8 w-8 hover:text-destructive",onClick:z=>N(o)},{default:a(()=>[s(t(dt),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),i.users.data.length===0?(d(),k(t($),{key:0},{default:a(()=>[s(t(m),{colspan:"6",class:"text-center"},{default:a(()=>e[13]||(e[13]=[l("div",{class:"py-12 text-muted-foreground"}," No se encontraron usuarios ",-1)])),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})]),i.users.last_page>1?(d(),v("div",ht,[l("div",wt," Mostrando "+n(i.users.from)+" a "+n(i.users.to)+" de "+n(i.users.total)+" resultados ",1),l("div",Ct,[s(t(u),{variant:"outline",size:"sm",disabled:i.users.current_page===1,onClick:e[1]||(e[1]=o=>w(i.users.current_page-1))},{default:a(()=>[s(t(ot),{class:"h-4 w-4"}),e[14]||(e[14]=r(" Anterior "))]),_:1},8,["disabled"]),l("div",St," Página "+n(i.users.current_page)+" de "+n(i.users.last_page),1),s(t(u),{variant:"outline",size:"sm",disabled:i.users.current_page===i.users.last_page,onClick:e[2]||(e[2]=o=>w(i.users.current_page+1))},{default:a(()=>[e[15]||(e[15]=r(" Siguiente ")),s(t(ut),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):g("",!0)]),_:1})]),_:1})]),s(t(K),{open:x.value,"onUpdate:open":e[3]||(e[3]=o=>x.value=o)},{default:a(()=>[s(t(X),null,{default:a(()=>[s(t(Y),null,{default:a(()=>[s(t(Z),null,{default:a(()=>e[16]||(e[16]=[r("¿Estás seguro?")])),_:1}),s(t(tt),null,{default:a(()=>[e[17]||(e[17]=r(" Esta acción no se puede deshacer. Se eliminará permanentemente el usuario ")),p.value?(d(),v("strong",yt,n(p.value.name),1)):g("",!0),e[18]||(e[18]=r(" del sistema. "))]),_:1})]),_:1}),s(t(et),null,{default:a(()=>[s(t(st),null,{default:a(()=>e[19]||(e[19]=[r("Cancelar")])),_:1}),s(t(at),{onClick:I,class:"bg-destructive text-destructive-foreground"},{default:a(()=>e[20]||(e[20]=[r(" Eliminar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{pe as default};
