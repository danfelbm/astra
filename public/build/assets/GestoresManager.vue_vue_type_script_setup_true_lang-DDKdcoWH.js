import{_ as G,a as S,b as A,c as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bq80RZJS.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-DdBhBtVk.js";import{_ as x}from"./createLucideIcon-DQCWrJyc.js";import{_ as z}from"./index-BKmJBxhI.js";import{_ as N}from"./AddUsersModal.vue_vue_type_script_setup_true_lang---d_mcQQ.js";import{U as _}from"./user-DeIkTTlE.js";import{U as j}from"./user-plus-MZiRMzDj.js";import{X as B}from"./x-BHPvN6Kg.js";import{d as E,r as V,p as L,c as M,i as u,F as h,e as s,f as a,w as i,g as r,h as f,k as F,m,t as b}from"./app-Dh3nIFdW.js";const P={class:"flex items-center justify-between"},q={key:0,class:"space-y-2"},D={class:"flex items-center gap-3"},H={class:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center"},T={class:"font-medium"},X={class:"text-sm text-gray-500 dark:text-gray-400"},I={class:"flex items-center gap-2"},J={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},se=E({__name:"GestoresManager",props:{modelValue:{default:()=>[]},gestores:{default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:k}){const d=g,y=k,c=V(!1),p=V(new Map);L(()=>d.gestores,o=>{o&&o.length>0&&o.forEach(e=>{p.value.set(e.id,e)})},{immediate:!0,deep:!0});const v=M(()=>{var e;const o=[];for(const t of d.modelValue){let n=(e=d.gestores)==null?void 0:e.find(l=>l.id===t);n||(n=p.value.get(t)),n&&o.push(n)}return o}),w=({userIds:o,users:e})=>{e&&e.length>0&&e.forEach(l=>{p.value.set(l.id,l)});const t=o.filter(l=>l&&l>0),n=[...new Set([...d.modelValue.filter(l=>l&&l>0),...t])];y("update:modelValue",n),c.value=!1},$=o=>{const e=d.modelValue.filter(t=>t!==o);y("update:modelValue",e)};return(o,e)=>(m(),u(h,null,[s(a(G),null,{default:i(()=>[s(a(S),null,{default:i(()=>[r("div",P,[r("div",null,[s(a(A),{class:"flex items-center gap-2"},{default:i(()=>[s(a(_),{class:"h-5 w-5"}),e[2]||(e[2]=f(" Gestores del Proyecto ",-1))]),_:1}),s(a(U),null,{default:i(()=>[...e[3]||(e[3]=[f(" Los gestores pueden editar el proyecto desde el panel de usuario ",-1)])]),_:1})]),s(a(x),{type:"button",variant:"outline",size:"sm",onClick:e[0]||(e[0]=t=>c.value=!0)},{default:i(()=>[s(a(j),{class:"h-4 w-4 mr-2"}),e[4]||(e[4]=f(" A침adir Gestor ",-1))]),_:1})])]),_:1}),s(a(C),null,{default:i(()=>[v.value.length>0?(m(),u("div",q,[(m(!0),u(h,null,F(v.value,t=>(m(),u("div",{key:t.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[r("div",D,[r("div",H,[s(a(_),{class:"h-5 w-5 text-primary"})]),r("div",null,[r("p",T,b(t.name),1),r("p",X,b(t.email),1)])]),r("div",I,[s(a(z),{variant:"secondary"},{default:i(()=>[...e[5]||(e[5]=[f("Gestor",-1)])]),_:1}),s(a(x),{type:"button",variant:"ghost",size:"sm",onClick:n=>$(t.id)},{default:i(()=>[s(a(B),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]))),128))])):(m(),u("div",J,[s(a(_),{class:"h-12 w-12 mx-auto mb-2 opacity-50"}),e[6]||(e[6]=r("p",null,"No hay gestores asignados",-1)),e[7]||(e[7]=r("p",{class:"text-sm mt-1"},'Haz clic en "A침adir Gestor" para asignar gestores al proyecto',-1))]))]),_:1})]),_:1}),s(N,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),title:"Seleccionar Gestores",description:"Selecciona los usuarios que podr치n gestionar y editar este proyecto","search-endpoint":o.route("admin.proyectos.search-users"),"excluded-ids":g.modelValue,"submit-button-text":"A침adir Gestores",onSubmit:w},null,8,["modelValue","search-endpoint","excluded-ids"])],64))}});export{se as _};
