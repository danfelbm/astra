import{c as fe,_ as M}from"./createLucideIcon-BdVmm7P_.js";import{a as oe,b as de,c as ee,_ as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-PGdupcIB.js";import{_ as X}from"./Checkbox.vue_vue_type_script_setup_true_lang-BpkxS9nt.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-DdSjcwnl.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-np36qPXZ.js";import{_ as z,a as R,b as L,c as G,d as j,e as pe,C as ve}from"./SelectValue.vue_vue_type_script_setup_true_lang-tpq5Hvrt.js";import{_ as ne}from"./Textarea.vue_vue_type_script_setup_true_lang-D-ysd6cn.js";import{_ as H}from"./index-DjS2Yj2q.js";import{P as J}from"./plus-rqKvaGhk.js";import{T as ie}from"./trash-2-2fe4ym2B.js";import{d as W,i as g,g as o,e as t,f as e,w as d,h as u,j as w,F as N,k as Y,m as r,c as U,t as C,b as E,r as O,o as be,U as ae,p as te,x as ue,N as ge}from"./app-BDg7E49x.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as me,a as le}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-_QWWnjmh.js";import{G as xe}from"./grip-vertical-XIqvY2Ga.js";import{_ as ye}from"./CardDescription.vue_vue_type_script_setup_true_lang-BkVVIKEx.js";import{C as Ce}from"./circle-alert-D2_vXx_s.js";import{E as ce}from"./eye-C8tnSqng.js";import{X as ke}from"./x-G0LZP78x.js";import{G as $e}from"./git-branch-DxTzAYsE.js";import{S as Ve}from"./square-pen-lq-HYEXh.js";import{C as _e}from"./copy-cx1gqyDj.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=fe("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Fe={class:"space-y-4"},he={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},De={class:"flex items-center justify-between"},Te={class:"font-medium flex items-center gap-2"},Se={class:"space-y-2"},Ae={key:0,class:"text-center py-4"},Ee=W({__name:"SelectFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","add-option","remove-option"],setup(i,{emit:B}){const $=i,x=B,s=(n,b)=>{const l=[...$.modelValue||[]];l[n]=b,x("update:modelValue",l)};return(n,b)=>(r(),g("div",Fe,[o("div",he,[o("div",De,[o("h4",Te,[t(e(H),{variant:"secondary",class:"text-xs"},{default:d(()=>[...b[1]||(b[1]=[u("Opciones de Selección",-1)])]),_:1})]),t(e(M),{type:"button",variant:"outline",size:"sm",onClick:b[0]||(b[0]=l=>x("add-option")),disabled:i.disabled},{default:d(()=>[t(e(J),{class:"mr-2 h-3 w-3"}),b[2]||(b[2]=u(" Agregar Opción ",-1))]),_:1},8,["disabled"])]),o("div",Se,[(r(!0),g(N,null,Y(i.modelValue,(l,a)=>(r(),g("div",{key:a,class:"flex items-center space-x-2"},[t(e(q),{"model-value":l,"onUpdate:modelValue":p=>s(a,p),placeholder:`Opción ${a+1}`,class:"flex-1",disabled:i.disabled},null,8,["model-value","onUpdate:modelValue","placeholder","disabled"]),t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:p=>x("remove-option",a),disabled:i.disabled,class:"h-9 w-9 p-0 text-destructive hover:text-destructive"},{default:d(()=>[t(e(ie),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])]))),128)),!i.modelValue||i.modelValue.length===0?(r(),g("div",Ae,[...b[3]||(b[3]=[o("p",{class:"text-sm text-muted-foreground"},' No hay opciones agregadas. Haz clic en "Agregar Opción" para comenzar. ',-1)])])):w("",!0)])])]))}}),Be=Q(Ee,[["__scopeId","data-v-f6b2331e"]]),Ue={class:"space-y-4"},Pe={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},Me={class:"font-medium flex items-center gap-2"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"flex items-center space-x-2 mt-1"},Ne={key:0},je={class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},Ye={class:"text-sm text-muted-foreground"},Oe=W({__name:"FileFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=U({get:()=>$.modelValue||{multiple:!1,maxFiles:5,maxFileSize:10,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"},set:b=>x("update:modelValue",b)}),n=(b,l)=>{x("update:modelValue",{...s.value,[b]:l})};return(b,l)=>(r(),g("div",Ue,[o("div",Pe,[o("h4",Me,[t(e(H),{variant:"secondary",class:"text-xs"},{default:d(()=>[...l[4]||(l[4]=[u("Configuración de Archivo",-1)])]),_:1})]),o("div",Ie,[o("div",null,[t(e(_),null,{default:d(()=>[...l[5]||(l[5]=[u("Archivos múltiples",-1)])]),_:1}),o("div",qe,[t(e(X),{checked:s.value.multiple,"onUpdate:checked":l[0]||(l[0]=a=>n("multiple",a)),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...l[6]||(l[6]=[u("Permitir múltiples archivos",-1)])]),_:1})])]),s.value.multiple?(r(),g("div",Ne,[t(e(_),null,{default:d(()=>[...l[7]||(l[7]=[u("Máximo de archivos",-1)])]),_:1}),t(e(q),{type:"number","model-value":s.value.maxFiles,"onUpdate:modelValue":l[1]||(l[1]=a=>n("maxFiles",Number(a))),min:"1",max:"20",placeholder:"5",disabled:i.disabled},null,8,["model-value","disabled"]),l[8]||(l[8]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Entre 1 y 20 archivos ",-1))])):w("",!0),o("div",null,[t(e(_),null,{default:d(()=>[...l[9]||(l[9]=[u("Tamaño máximo por archivo (MB)",-1)])]),_:1}),t(e(q),{type:"number","model-value":s.value.maxFileSize,"onUpdate:modelValue":l[2]||(l[2]=a=>n("maxFileSize",Number(a))),min:"1",max:"100",placeholder:"10",disabled:i.disabled},null,8,["model-value","disabled"]),l[10]||(l[10]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Entre 1 y 100 MB ",-1))]),o("div",null,[t(e(_),null,{default:d(()=>[...l[11]||(l[11]=[u("Tipos de archivo permitidos",-1)])]),_:1}),t(e(q),{"model-value":s.value.accept,"onUpdate:modelValue":l[3]||(l[3]=a=>n("accept",a)),placeholder:".pdf,.doc,.docx,.jpg,.jpeg,.png",disabled:i.disabled},null,8,["model-value","disabled"]),l[12]||(l[12]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Separados por comas, ej: .pdf,.jpg,.doc ",-1))])]),o("div",je,[o("p",Ye,[l[13]||(l[13]=o("strong",null,"Resumen:",-1)),u(" "+C(s.value.multiple?`Hasta ${s.value.maxFiles} archivos`:"Un solo archivo")+" de máximo "+C(s.value.maxFileSize)+"MB cada uno. ",1),l[14]||(l[14]=o("br",null,null,-1)),u(" Formatos: "+C(s.value.accept),1)])])])]))}}),ze=Q(Oe,[["__scopeId","data-v-89ef78c7"]]),Re={class:"space-y-4"},Le={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},Ge={class:"font-medium flex items-center gap-2"},We={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},He={class:"md:col-span-2"},Qe={class:"space-y-2"},Xe={class:"flex items-center space-x-2"},Ze={class:"flex items-center space-x-2"},Je={class:"space-y-3"},Ke={class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},el={class:"text-sm text-muted-foreground"},ll={key:0},tl=W({__name:"DatePickerFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=[{value:"DD/MM/YYYY",label:"DD/MM/YYYY (31/12/2024)"},{value:"MM/DD/YYYY",label:"MM/DD/YYYY (12/31/2024)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (2024-12-31)"},{value:"DD-MM-YYYY",label:"DD-MM-YYYY (31-12-2024)"}],n=U({get:()=>$.modelValue||{minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0},set:p=>x("update:modelValue",p)}),b=(p,f)=>{x("update:modelValue",{...n.value,[p]:f})},l=p=>{if(!p)return"";if(p.match(/^\d{4}-\d{2}-\d{2}$/))return p;try{return new Date(p).toISOString().split("T")[0]}catch{return""}},a=(p,f)=>{b(p,f||void 0)};return(p,f)=>(r(),g("div",Re,[o("div",Le,[o("h4",Ge,[t(e(H),{variant:"secondary",class:"text-xs"},{default:d(()=>[...f[5]||(f[5]=[u("Configuración de Fecha",-1)])]),_:1})]),o("div",We,[o("div",He,[t(e(_),null,{default:d(()=>[...f[6]||(f[6]=[u("Formato de fecha",-1)])]),_:1}),t(e(z),{"model-value":n.value.format,"onUpdate:modelValue":f[0]||(f[0]=D=>b("format",D)),disabled:i.disabled},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona formato"})]),_:1}),t(e(G),null,{default:d(()=>[(r(),g(N,null,Y(s,D=>t(e(j),{key:D.value,value:D.value},{default:d(()=>[u(C(D.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","disabled"])]),o("div",null,[t(e(_),{class:"text-sm font-medium mb-3 block"},{default:d(()=>[...f[7]||(f[7]=[u("Restricciones temporales",-1)])]),_:1}),o("div",Qe,[o("div",Xe,[t(e(X),{checked:n.value.allowPastDates,"onUpdate:checked":f[1]||(f[1]=D=>b("allowPastDates",D)),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...f[8]||(f[8]=[u("Permitir fechas pasadas",-1)])]),_:1})]),o("div",Ze,[t(e(X),{checked:n.value.allowFutureDates,"onUpdate:checked":f[2]||(f[2]=D=>b("allowFutureDates",D)),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...f[9]||(f[9]=[u("Permitir fechas futuras",-1)])]),_:1})])])]),o("div",Je,[t(e(_),{class:"text-sm font-medium"},{default:d(()=>[...f[10]||(f[10]=[u("Rango de fechas (opcional)",-1)])]),_:1}),o("div",null,[t(e(_),{class:"text-xs text-muted-foreground"},{default:d(()=>[...f[11]||(f[11]=[u("Fecha mínima",-1)])]),_:1}),t(e(q),{type:"date","model-value":l(n.value.minDate),"onUpdate:modelValue":f[3]||(f[3]=D=>a("minDate",D)),disabled:i.disabled},null,8,["model-value","disabled"])]),o("div",null,[t(e(_),{class:"text-xs text-muted-foreground"},{default:d(()=>[...f[12]||(f[12]=[u("Fecha máxima",-1)])]),_:1}),t(e(q),{type:"date","model-value":l(n.value.maxDate),"onUpdate:modelValue":f[4]||(f[4]=D=>a("maxDate",D)),disabled:i.disabled},null,8,["model-value","disabled"])])])]),o("div",Ke,[o("p",el,[f[14]||(f[14]=o("strong",null,"Resumen:",-1)),u(" Formato: "+C(n.value.format)+". "+C(n.value.allowPastDates&&n.value.allowFutureDates?"Sin restricciones temporales.":"")+" "+C(n.value.allowPastDates&&!n.value.allowFutureDates?"Solo fechas pasadas y actuales.":"")+" "+C(!n.value.allowPastDates&&n.value.allowFutureDates?"Solo fechas futuras y actuales.":"")+" "+C(!n.value.allowPastDates&&!n.value.allowFutureDates?"Solo fecha actual.":"")+" ",1),n.value.minDate||n.value.maxDate?(r(),g("span",ll,[f[13]||(f[13]=o("br",null,null,-1)),u(" Rango: "+C(n.value.minDate?l(n.value.minDate):"...")+" - "+C(n.value.maxDate?l(n.value.maxDate):"..."),1)])):w("",!0)])])])]))}}),al=Q(tl,[["__scopeId","data-v-57c427db"]]),ol={class:"space-y-4"},dl={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},il={class:"font-medium flex items-center gap-2"},sl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nl={key:0,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},ul={class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},rl={class:"text-sm text-muted-foreground"},ml={key:0},cl=W({__name:"NumberFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=[{value:0,label:"0 (números enteros)"},{value:1,label:"1 decimal"},{value:2,label:"2 decimales"},{value:3,label:"3 decimales"},{value:4,label:"4 decimales"}],n=U({get:()=>$.modelValue||{min:void 0,max:void 0,step:1,decimals:0},set:a=>x("update:modelValue",a)}),b=(a,p)=>{(a==="min"||a==="max")&&p===""&&(p=void 0),a==="step"&&(p===""||p<0)&&(p=1),a==="decimals"&&(p===""||p<0)&&(p=0),x("update:modelValue",{...n.value,[a]:p===""||p===null?void 0:Number(p)})},l=U(()=>{const{min:a,max:p}=n.value;return a!==void 0&&p!==void 0?a<=p:!0});return(a,p)=>(r(),g("div",ol,[o("div",dl,[o("h4",il,[t(e(H),{variant:"secondary",class:"text-xs"},{default:d(()=>[...p[4]||(p[4]=[u("Configuración Numérica",-1)])]),_:1})]),o("div",sl,[o("div",null,[t(e(_),null,{default:d(()=>[...p[5]||(p[5]=[u("Valor mínimo (opcional)",-1)])]),_:1}),t(e(q),{type:"number","model-value":n.value.min,"onUpdate:modelValue":p[0]||(p[0]=f=>b("min",f)),placeholder:"Sin límite",disabled:i.disabled},null,8,["model-value","disabled"]),p[6]||(p[6]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Dejar vacío para sin límite mínimo ",-1))]),o("div",null,[t(e(_),null,{default:d(()=>[...p[7]||(p[7]=[u("Valor máximo (opcional)",-1)])]),_:1}),t(e(q),{type:"number","model-value":n.value.max,"onUpdate:modelValue":p[1]||(p[1]=f=>b("max",f)),placeholder:"Sin límite",disabled:i.disabled},null,8,["model-value","disabled"]),p[8]||(p[8]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Dejar vacío para sin límite máximo ",-1))]),o("div",null,[t(e(_),null,{default:d(()=>[...p[9]||(p[9]=[u("Incremento (step)",-1)])]),_:1}),t(e(q),{type:"number","model-value":n.value.step,"onUpdate:modelValue":p[2]||(p[2]=f=>b("step",f)),min:"0.01",step:"0.01",placeholder:"1",disabled:i.disabled},null,8,["model-value","disabled"]),p[10]||(p[10]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Valor de incremento para los botones +/- ",-1))]),o("div",null,[t(e(_),null,{default:d(()=>[...p[11]||(p[11]=[u("Decimales permitidos",-1)])]),_:1}),t(e(z),{"model-value":String(n.value.decimals),"onUpdate:modelValue":p[3]||(p[3]=f=>b("decimals",Number(f))),disabled:i.disabled},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona decimales"})]),_:1}),t(e(G),null,{default:d(()=>[(r(),g(N,null,Y(s,f=>t(e(j),{key:f.value,value:String(f.value)},{default:d(()=>[u(C(f.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","disabled"])])]),l.value?w("",!0):(r(),g("div",nl,[...p[12]||(p[12]=[o("p",{class:"text-sm text-destructive"}," ⚠️ El valor mínimo no puede ser mayor al valor máximo ",-1)])])),o("div",ul,[o("p",rl,[p[14]||(p[14]=o("strong",null,"Resumen:",-1)),u(" "+C(n.value.decimals===0?"Números enteros":`Hasta ${n.value.decimals} decimal${n.value.decimals===1?"":"es"}`)+". Incremento de "+C(n.value.step||1)+". ",1),n.value.min!==void 0||n.value.max!==void 0?(r(),g("span",ml,[p[13]||(p[13]=o("br",null,null,-1)),u(" Rango: "+C(n.value.min!==void 0?n.value.min:"...")+" - "+C(n.value.max!==void 0?n.value.max:"..."),1)])):w("",!0)])])])]))}}),fl=Q(cl,[["__scopeId","data-v-293a52a2"]]),pl={class:"space-y-4"},vl={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},bl={class:"font-medium flex items-center gap-2"},gl={class:"space-y-4"},xl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yl={class:"md:col-span-2"},Cl={key:0,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},kl={key:1,class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},$l={class:"text-sm text-muted-foreground"},Vl={key:2,class:"mt-2 p-2 bg-background border border-border rounded text-xs"},_l={class:"text-muted-foreground"},wl={key:0},Fl=W({__name:"DisclaimerFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=U({get:()=>$.modelValue||{disclaimerText:"",modalTitle:"Términos y Condiciones",acceptButtonText:"Acepto",declineButtonText:"No acepto"},set:l=>x("update:modelValue",l)}),n=(l,a)=>{x("update:modelValue",{...s.value,[l]:a})},b=U(()=>{var l;return((l=s.value.disclaimerText)==null?void 0:l.trim().length)>0});return(l,a)=>{var p;return r(),g("div",pl,[o("div",vl,[o("h4",bl,[t(e(H),{variant:"secondary",class:"text-xs"},{default:d(()=>[...a[4]||(a[4]=[u("Configuración de Disclaimer",-1)])]),_:1})]),o("div",gl,[o("div",null,[t(e(_),null,{default:d(()=>[...a[5]||(a[5]=[u("Texto del disclaimer *",-1)])]),_:1}),t(e(ne),{"model-value":s.value.disclaimerText,"onUpdate:modelValue":a[0]||(a[0]=f=>n("disclaimerText",f)),placeholder:"Ingresa aquí los términos y condiciones, política de privacidad, o el texto legal que los usuarios deben aceptar...",rows:"6",class:"min-h-[120px]",disabled:i.disabled},null,8,["model-value","disabled"]),a[6]||(a[6]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Este texto se mostrará en un modal cuando el usuario haga clic en el campo ",-1))]),o("div",xl,[o("div",null,[t(e(_),null,{default:d(()=>[...a[7]||(a[7]=[u("Título del modal",-1)])]),_:1}),t(e(q),{"model-value":s.value.modalTitle,"onUpdate:modelValue":a[1]||(a[1]=f=>n("modalTitle",f)),placeholder:"Términos y Condiciones",disabled:i.disabled},null,8,["model-value","disabled"])]),o("div",null,[t(e(_),null,{default:d(()=>[...a[8]||(a[8]=[u("Texto botón aceptar",-1)])]),_:1}),t(e(q),{"model-value":s.value.acceptButtonText,"onUpdate:modelValue":a[2]||(a[2]=f=>n("acceptButtonText",f)),placeholder:"Acepto",disabled:i.disabled},null,8,["model-value","disabled"])]),o("div",yl,[t(e(_),null,{default:d(()=>[...a[9]||(a[9]=[u("Texto botón rechazar",-1)])]),_:1}),t(e(q),{"model-value":s.value.declineButtonText,"onUpdate:modelValue":a[3]||(a[3]=f=>n("declineButtonText",f)),placeholder:"No acepto",disabled:i.disabled},null,8,["model-value","disabled"])])])]),b.value?w("",!0):(r(),g("div",Cl,[...a[10]||(a[10]=[o("p",{class:"text-sm text-destructive"}," ⚠️ El texto del disclaimer es requerido ",-1)])])),b.value?(r(),g("div",kl,[o("p",$l,[a[11]||(a[11]=o("strong",null,"Resumen:",-1)),u(' Modal "'+C(s.value.modalTitle)+'" con '+C((p=s.value.disclaimerText)==null?void 0:p.length)+" caracteres. ",1),a[12]||(a[12]=o("br",null,null,-1)),u(' Botones: "'+C(s.value.acceptButtonText)+'" / "'+C(s.value.declineButtonText)+'" ',1)])])):w("",!0),s.value.disclaimerText&&s.value.disclaimerText.length>100?(r(),g("div",Vl,[a[13]||(a[13]=o("strong",{class:"block mb-1"},"Vista previa del texto:",-1)),o("p",_l,[u(C(s.value.disclaimerText.substring(0,150))+" ",1),s.value.disclaimerText.length>150?(r(),g("span",wl,"...")):w("",!0)])])):w("",!0)])])}}}),hl=Q(Fl,[["__scopeId","data-v-ce66ffa2"]]),Dl={class:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800 space-y-4"},Tl={key:0,class:"mb-4"},Sl={class:"flex flex-col"},Al={key:0,class:"text-xs text-muted-foreground"},El={key:0},Bl={key:1,class:"mb-4 p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-md"},Ul={class:"flex items-center space-x-2 mb-3"},Pl={class:"flex items-center space-x-2"},Ml={class:"mt-4 space-y-2"},Il={class:"space-y-2"},ql={class:"flex items-start space-x-2"},Nl={class:"flex items-start space-x-2"},jl={class:"flex items-start space-x-2"},Yl={class:"mt-4 space-y-2"},Ol={class:"space-y-2"},zl={class:"flex items-start space-x-2"},Rl={class:"flex items-start space-x-2"},Ll=W({__name:"ConvocatoriaFieldConfig",props:{modelValue:{},convocatorias:{default:()=>[]},disabled:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=U({get:()=>$.modelValue||{convocatoria_id:void 0,multiple:!1,mostrarVotoBlanco:!0,ordenCandidatos:"aleatorio",vistaPreferida:"lista"},set:b=>x("update:modelValue",b)}),n=(b,l)=>{x("update:modelValue",{...s.value,[b]:l})};return(b,l)=>(r(),g("div",Dl,[l[17]||(l[17]=o("h4",{class:"font-medium text-green-900 dark:text-green-100 mb-3"},"Selección de Convocatoria para Votación",-1)),l[18]||(l[18]=o("p",{class:"text-sm text-green-700 dark:text-green-300 mb-4"}," Selecciona UNA convocatoria específica. Los usuarios con postulaciones APROBADAS a esta convocatoria aparecerán como opciones de voto. ",-1)),i.convocatorias&&i.convocatorias.length>0?(r(),g("div",Tl,[t(e(_),null,{default:d(()=>[...l[5]||(l[5]=[u("Convocatoria *",-1)])]),_:1}),t(e(z),{"model-value":s.value.convocatoria_id?s.value.convocatoria_id.toString():void 0,"onUpdate:modelValue":l[0]||(l[0]=a=>n("convocatoria_id",a?Number(a):void 0)),disabled:i.disabled},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona una convocatoria"})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(i.convocatorias,a=>(r(),E(e(j),{key:a.id,value:a.id.toString()},{default:d(()=>[o("div",Sl,[o("span",null,C(a.nombre),1),a.cargo?(r(),g("span",Al,[u(C(a.cargo.ruta_jerarquica||a.cargo.nombre)+" ",1),a.periodo_electoral?(r(),g("span",El," - "+C(a.periodo_electoral.nombre),1)):w("",!0)])):w("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),l[6]||(l[6]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Se mostrarán los candidatos con postulaciones aprobadas a esta convocatoria ",-1))])):(r(),g("div",Bl,[...l[7]||(l[7]=[o("p",{class:"text-sm text-amber-800 dark:text-amber-200"}," No hay convocatorias con postulaciones aprobadas disponibles. Asegúrate de que existan convocatorias con al menos una postulación aprobada. ",-1)])])),o("div",Ul,[t(e(X),{id:"conv_multiple",checked:s.value.multiple,"onUpdate:checked":l[1]||(l[1]=a=>n("multiple",a)),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...l[8]||(l[8]=[u(" Permitir selección múltiple ",-1),o("span",{class:"text-muted-foreground block text-xs"}," Los votantes podrán seleccionar varios candidatos ",-1)])]),_:1})]),o("div",Pl,[t(e(X),{id:"conv_voto_blanco",checked:s.value.mostrarVotoBlanco,"onUpdate:checked":l[2]||(l[2]=a=>n("mostrarVotoBlanco",a)),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...l[9]||(l[9]=[u(" ¿Deseas mostrar Voto en Blanco? ",-1),o("span",{class:"text-muted-foreground block text-xs"},' Agrega la opción "Voto en blanco" para los votantes ',-1)])]),_:1})]),o("div",Ml,[t(e(_),{class:"text-sm font-medium"},{default:d(()=>[...l[10]||(l[10]=[u("Orden de candidatos",-1)])]),_:1}),t(e(me),{"model-value":s.value.ordenCandidatos,"onUpdate:modelValue":l[3]||(l[3]=a=>n("ordenCandidatos",a)),disabled:i.disabled},{default:d(()=>[o("div",Il,[o("div",ql,[t(e(le),{value:"aleatorio",id:"orden_aleatorio"}),t(e(_),{for:"orden_aleatorio",class:"text-sm font-normal cursor-pointer"},{default:d(()=>[...l[11]||(l[11]=[o("div",null,[u(" Aleatorio por sesión "),o("span",{class:"text-xs text-muted-foreground block"}," Recomendado para equidad electoral - cada votante ve un orden diferente ")],-1)])]),_:1})]),o("div",Nl,[t(e(le),{value:"alfabetico",id:"orden_alfabetico"}),t(e(_),{for:"orden_alfabetico",class:"text-sm font-normal cursor-pointer"},{default:d(()=>[...l[12]||(l[12]=[o("div",null,[u(" Alfabético por nombre "),o("span",{class:"text-xs text-muted-foreground block"}," Orden predecible y consistente para todos los votantes ")],-1)])]),_:1})]),o("div",jl,[t(e(le),{value:"fecha_postulacion",id:"orden_fecha"}),t(e(_),{for:"orden_fecha",class:"text-sm font-normal cursor-pointer"},{default:d(()=>[...l[13]||(l[13]=[o("div",null,[u(" Por fecha de postulación "),o("span",{class:"text-xs text-muted-foreground block"}," Más recientes primero - refleja actividad reciente ")],-1)])]),_:1})])])]),_:1},8,["model-value","disabled"])]),o("div",Yl,[t(e(_),{class:"text-sm font-medium"},{default:d(()=>[...l[14]||(l[14]=[u("Vista de presentación",-1)])]),_:1}),t(e(me),{"model-value":s.value.vistaPreferida,"onUpdate:modelValue":l[4]||(l[4]=a=>n("vistaPreferida",a)),disabled:i.disabled},{default:d(()=>[o("div",Ol,[o("div",zl,[t(e(le),{value:"lista",id:"vista_lista"}),t(e(_),{for:"vista_lista",class:"text-sm font-normal cursor-pointer"},{default:d(()=>[...l[15]||(l[15]=[o("div",null,[u(" Vista en lista "),o("span",{class:"text-xs text-muted-foreground block"}," Lista vertical tradicional - ocupa menos espacio ")],-1)])]),_:1})]),o("div",Rl,[t(e(le),{value:"cards",id:"vista_cards"}),t(e(_),{for:"vista_cards",class:"text-sm font-normal cursor-pointer"},{default:d(()=>[...l[16]||(l[16]=[o("div",null,[u(" Vista en tarjetas "),o("span",{class:"text-xs text-muted-foreground block"}," Tarjetas visuales en grid - más atractivo visualmente ")],-1)])]),_:1})])])]),_:1},8,["model-value","disabled"])])]))}}),Gl=Q(Ll,[["__scopeId","data-v-0b0898f8"]]),Wl={class:"text-sm text-muted-foreground"},Hl={class:"text-xs text-muted-foreground mt-1"},Ql={key:0},Xl={class:"text-xs text-muted-foreground mt-1"},Zl={key:1},Jl={class:"text-xs text-muted-foreground mt-1"},Kl={key:2},et={class:"text-xs text-muted-foreground mt-1"},lt=W({__name:"GeographicRestrictions",props:{modelValue:{default:()=>({territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[]})},disabled:{type:Boolean,default:!1},title:{default:"Restricciones Geográficas (Opcional)"},description:{default:"Selecciona las regiones donde estará disponible. Si no seleccionas nada, estará disponible para todos."}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=O([]),n=O([]),b=O([]),l=O([]),a=O(!1),p=async()=>{try{a.value=!0;const k=await fetch("/admin/geographic/territorios");s.value=await k.json()}catch(k){console.error("Error loading territorios:",k)}finally{a.value=!1}},f=async k=>{if(!k.length){n.value=[];return}try{a.value=!0;const v=await fetch(`/admin/geographic/departamentos?territorio_ids=${k.join(",")}`);n.value=await v.json()}catch(v){console.error("Error loading departamentos:",v)}finally{a.value=!1}},D=async k=>{if(!k.length){b.value=[];return}try{a.value=!0;const v=await fetch(`/admin/geographic/municipios?departamento_ids=${k.join(",")}`);b.value=await v.json()}catch(v){console.error("Error loading municipios:",v)}finally{a.value=!1}},V=async k=>{if(!k.length){l.value=[];return}try{a.value=!0;const v=await fetch(`/admin/geographic/localidades?municipio_ids=${k.join(",")}`);l.value=await v.json()}catch(v){console.error("Error loading localidades:",v)}finally{a.value=!1}},A=(k,v)=>{var T,c,m,S;const F=Array.isArray(k)?k.map(Number).filter(Boolean):k?[Number(k)].filter(Boolean):[],P={territorios_ids:((T=$.modelValue)==null?void 0:T.territorios_ids)||[],departamentos_ids:((c=$.modelValue)==null?void 0:c.departamentos_ids)||[],municipios_ids:((m=$.modelValue)==null?void 0:m.municipios_ids)||[],localidades_ids:((S=$.modelValue)==null?void 0:S.localidades_ids)||[],...$.modelValue};P[v]=F,v==="territorios_ids"?(P.departamentos_ids=[],P.municipios_ids=[],P.localidades_ids=[],ae(()=>f(F))):v==="departamentos_ids"?(P.municipios_ids=[],P.localidades_ids=[],ae(()=>D(F))):v==="municipios_ids"&&(P.localidades_ids=[],ae(()=>V(F))),x("update:modelValue",P)};return be(async()=>{var k,v,F,P,T,c;await p(),(v=(k=$.modelValue)==null?void 0:k.territorios_ids)!=null&&v.length&&await f($.modelValue.territorios_ids),(P=(F=$.modelValue)==null?void 0:F.departamentos_ids)!=null&&P.length&&await D($.modelValue.departamentos_ids),(c=(T=$.modelValue)==null?void 0:T.municipios_ids)!=null&&c.length&&await V($.modelValue.municipios_ids)}),(k,v)=>(r(),E(e(K),{class:"border-dashed"},{default:d(()=>[t(e(oe),null,{default:d(()=>[t(e(de),{class:"text-base"},{default:d(()=>[u(C(i.title),1)]),_:1}),o("p",Wl,C(i.description),1)]),_:1}),t(e(ee),{class:"space-y-4"},{default:d(()=>{var F,P,T,c,m,S,y;return[o("div",null,[t(e(_),null,{default:d(()=>[...v[4]||(v[4]=[u("Territorios",-1)])]),_:1}),t(e(z),{"model-value":(((F=$.modelValue)==null?void 0:F.territorios_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":v[0]||(v[0]=h=>A(h,"territorios_ids")),multiple:"",disabled:i.disabled||a.value},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Seleccionar territorios..."})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(s.value,h=>(r(),E(e(j),{key:h.id,value:h.id.toString()},{default:d(()=>[u(C(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",Hl,C($.modelValue.territorios_ids.length)+" territorio(s) seleccionado(s) ",1)]),n.value.length>0?(r(),g("div",Ql,[t(e(_),null,{default:d(()=>[...v[5]||(v[5]=[u("Departamentos",-1)])]),_:1}),t(e(z),{"model-value":(((P=$.modelValue)==null?void 0:P.departamentos_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":v[1]||(v[1]=h=>A(h,"departamentos_ids")),multiple:"",disabled:i.disabled||a.value},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Seleccionar departamentos..."})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(n.value,h=>(r(),E(e(j),{key:h.id,value:h.id.toString()},{default:d(()=>[u(C(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",Xl,C((((T=$.modelValue)==null?void 0:T.departamentos_ids)||[]).length)+" departamento(s) seleccionado(s) ",1)])):w("",!0),b.value.length>0?(r(),g("div",Zl,[t(e(_),null,{default:d(()=>[...v[6]||(v[6]=[u("Municipios",-1)])]),_:1}),t(e(z),{"model-value":(((c=$.modelValue)==null?void 0:c.municipios_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":v[2]||(v[2]=h=>A(h,"municipios_ids")),multiple:"",disabled:i.disabled||a.value},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Seleccionar municipios..."})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(b.value,h=>(r(),E(e(j),{key:h.id,value:h.id.toString()},{default:d(()=>[u(C(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",Jl,C((((m=$.modelValue)==null?void 0:m.municipios_ids)||[]).length)+" municipio(s) seleccionado(s) ",1)])):w("",!0),l.value.length>0?(r(),g("div",Kl,[t(e(_),null,{default:d(()=>[...v[7]||(v[7]=[u("Localidades",-1)])]),_:1}),t(e(z),{"model-value":(((S=$.modelValue)==null?void 0:S.localidades_ids)||[]).map(h=>h.toString()),"onUpdate:modelValue":v[3]||(v[3]=h=>A(h,"localidades_ids")),multiple:"",disabled:i.disabled||a.value},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Seleccionar localidades..."})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(l.value,h=>(r(),E(e(j),{key:h.id,value:h.id.toString()},{default:d(()=>[u(C(h.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),o("p",et,C((((y=$.modelValue)==null?void 0:y.localidades_ids)||[]).length)+" localidad(es) seleccionada(s) ",1)])):w("",!0)]}),_:1})]),_:1}))}}),tt={class:"space-y-4"},at={class:"p-4 bg-muted/50 dark:bg-muted/20 rounded-lg space-y-4"},ot={key:0,class:"font-medium flex items-center gap-2"},dt={key:1,class:"space-y-4"},it={class:"flex flex-col"},st={class:"font-medium"},nt={key:0,class:"text-xs text-muted-foreground"},ut={class:"flex flex-col"},rt={class:"font-medium"},mt={class:"text-xs text-muted-foreground"},ct={class:"space-y-4"},ft={class:"space-y-2"},pt={class:"flex items-center space-x-2"},vt={class:"flex items-center space-x-2"},bt={key:2,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},gt={key:3,class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},xt={class:"text-sm text-muted-foreground"},yt={key:0},Ct={key:1},kt={key:2},$t={key:3},Vt={key:4},_t={key:5},wt={key:6},Ft=W({__name:"PerfilCandidaturaFieldConfig",props:{modelValue:{},cargos:{default:()=>[]},periodosElectorales:{default:()=>[]},context:{default:"convocatoria"},disabled:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=U({get:()=>$.modelValue||{cargo_id:void 0,periodo_electoral_id:void 0,territorio_id:void 0,departamento_id:void 0,municipio_id:void 0,localidad_id:void 0,territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[],multiple:!1,mostrarVotoBlanco:!0},set:D=>x("update:modelValue",D)}),n=(D,V)=>{x("update:modelValue",{...s.value,[D]:V})},b=U({get:()=>({territorio_id:s.value.territorio_id,departamento_id:s.value.departamento_id,municipio_id:s.value.municipio_id,localidad_id:s.value.localidad_id,territorios_ids:s.value.territorios_ids||[],departamentos_ids:s.value.departamentos_ids||[],municipios_ids:s.value.municipios_ids||[],localidades_ids:s.value.localidades_ids||[]}),set:D=>{x("update:modelValue",{...s.value,territorio_id:D.territorio_id,departamento_id:D.departamento_id,municipio_id:D.municipio_id,localidad_id:D.localidad_id,territorios_ids:D.territorios_ids,departamentos_ids:D.departamentos_ids,municipios_ids:D.municipios_ids,localidades_ids:D.localidades_ids})}}),l=U(()=>!s.value.cargo_id||s.value.cargo_id==="all"?null:$.cargos.find(D=>D.id===s.value.cargo_id)),a=U(()=>!s.value.periodo_electoral_id||s.value.periodo_electoral_id==="all"?null:$.periodosElectorales.find(D=>D.id===s.value.periodo_electoral_id)),p=U(()=>s.value.cargo_id!==void 0||s.value.periodo_electoral_id!==void 0),f=U(()=>$.context==="votacion"||$.context==="formulario");return(D,V)=>(r(),g("div",tt,[o("div",at,[f.value?(r(),g("h4",ot,[t(e(H),{variant:"secondary",class:"text-xs"},{default:d(()=>[...V[5]||(V[5]=[u("Configuración de Perfil de Candidatura",-1)])]),_:1})])):w("",!0),f.value?(r(),g("div",dt,[o("div",null,[t(e(_),null,{default:d(()=>[...V[6]||(V[6]=[u("Cargo",-1)])]),_:1}),t(e(z),{"model-value":s.value.cargo_id?String(s.value.cargo_id):void 0,"onUpdate:modelValue":V[0]||(V[0]=A=>n("cargo_id",A==="all"?"all":A?Number(A):void 0)),disabled:i.disabled},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona un cargo"})]),_:1}),t(e(G),null,{default:d(()=>[t(e(j),{value:"all"},{default:d(()=>[...V[7]||(V[7]=[o("span",{class:"font-medium"},"Todos los cargos",-1)])]),_:1}),(r(!0),g(N,null,Y(i.cargos,A=>(r(),E(e(j),{key:A.id,value:String(A.id)},{default:d(()=>[o("div",it,[o("span",st,C(A.nombre),1),A.ruta_jerarquica?(r(),g("span",nt,C(A.ruta_jerarquica),1)):w("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"])]),o("div",null,[t(e(_),null,{default:d(()=>[...V[8]||(V[8]=[u("Período Electoral",-1)])]),_:1}),t(e(z),{"model-value":s.value.periodo_electoral_id?String(s.value.periodo_electoral_id):void 0,"onUpdate:modelValue":V[1]||(V[1]=A=>n("periodo_electoral_id",A==="all"?"all":A?Number(A):void 0)),disabled:i.disabled},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona un período"})]),_:1}),t(e(G),null,{default:d(()=>[t(e(j),{value:"all"},{default:d(()=>[...V[9]||(V[9]=[o("span",{class:"font-medium"},"Todos los períodos",-1)])]),_:1}),(r(!0),g(N,null,Y(i.periodosElectorales,A=>(r(),E(e(j),{key:A.id,value:String(A.id)},{default:d(()=>[o("div",ut,[o("span",rt,C(A.nombre),1),o("span",mt,C(new Date(A.fecha_inicio).toLocaleDateString())+" - "+C(new Date(A.fecha_fin).toLocaleDateString()),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"])]),o("div",ct,[o("div",null,[t(e(_),{class:"text-sm font-medium mb-3 block"},{default:d(()=>[...V[10]||(V[10]=[u("Opciones de votación",-1)])]),_:1}),o("div",ft,[o("div",pt,[t(e(X),{checked:s.value.multiple,"onUpdate:checked":V[2]||(V[2]=A=>n("multiple",A)),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...V[11]||(V[11]=[u("Permitir selección múltiple de candidatos",-1)])]),_:1})]),o("div",vt,[t(e(X),{checked:s.value.mostrarVotoBlanco,"onUpdate:checked":V[3]||(V[3]=A=>n("mostrarVotoBlanco",A)),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...V[12]||(V[12]=[u("Mostrar opción de voto en blanco",-1)])]),_:1})])])]),o("div",null,[t(e(_),{class:"text-sm font-medium mb-3 block"},{default:d(()=>[...V[13]||(V[13]=[u("Restricciones Geográficas (opcional)",-1)])]),_:1}),V[14]||(V[14]=o("p",{class:"text-xs text-muted-foreground mb-3"}," Limita los candidatos mostrados según ubicación geográfica ",-1)),t(lt,{modelValue:b.value,"onUpdate:modelValue":V[4]||(V[4]=A=>b.value=A),disabled:i.disabled},null,8,["modelValue","disabled"])])])])):w("",!0),f.value&&!p.value?(r(),g("div",bt,[...V[15]||(V[15]=[o("p",{class:"text-sm text-destructive"}," ⚠️ Debes seleccionar al menos un cargo o período electoral ",-1)])])):w("",!0),f.value&&p.value?(r(),g("div",gt,[o("p",xt,[V[20]||(V[20]=o("strong",null,"Configuración:",-1)),V[21]||(V[21]=o("br",null,null,-1)),l.value?(r(),g("span",yt,[V[16]||(V[16]=o("strong",null,"Cargo:",-1)),u(" "+C(l.value.ruta_jerarquica||l.value.nombre),1)])):s.value.cargo_id==="all"?(r(),g("span",Ct,[...V[17]||(V[17]=[o("strong",null,"Cargo:",-1),u(" Todos los cargos ",-1)])])):w("",!0),s.value.cargo_id?(r(),g("br",kt)):w("",!0),a.value?(r(),g("span",$t,[V[18]||(V[18]=o("strong",null,"Período:",-1)),u(" "+C(a.value.nombre),1)])):s.value.periodo_electoral_id==="all"?(r(),g("span",Vt,[...V[19]||(V[19]=[o("strong",null,"Período:",-1),u(" Todos los períodos ",-1)])])):w("",!0),f.value?(r(),g("br",_t)):w("",!0),f.value?(r(),g("span",wt,C(s.value.multiple?"Selección múltiple":"Selección única")+", "+C(s.value.mostrarVotoBlanco?"con":"sin")+" voto en blanco ",1)):w("",!0)])])):w("",!0)])]))}}),ht=Q(Ft,[["__scopeId","data-v-1458e9b1"]]),Dt={class:"space-y-4"},Tt={key:0,class:"space-y-2"},St={class:"space-y-2"},At={class:"flex items-center justify-between"},Et={class:"flex items-center gap-2 flex-1"},Bt={class:"flex-1"},Ut={class:"flex items-center gap-2"},Pt={class:"font-medium text-sm"},Mt={class:"text-xs text-muted-foreground"},It={key:0,class:"text-xs text-red-500"},qt={key:0,class:"text-xs text-muted-foreground mt-1"},Nt={class:"flex items-center gap-1"},jt={key:1,class:"text-center py-4 text-sm text-muted-foreground dark:text-muted-foreground"},Yt={class:"flex items-center justify-between"},Ot={class:"text-sm font-semibold"},zt={key:0},Rt={key:1},Lt={class:"flex items-center space-x-2"},Gt={class:"flex justify-end gap-2"},Wt=W({__name:"RepeaterBuilder",props:{modelValue:{}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=[{value:"text",label:"Texto corto"},{value:"number",label:"Campo numérico"},{value:"email",label:"Correo electrónico"},{value:"date",label:"Fecha"},{value:"textarea",label:"Texto largo"},{value:"select",label:"Lista desplegable"},{value:"datepicker",label:"Selector de fecha avanzado"}],n=O($.modelValue||[]),b=O({id:"",type:"text",title:"",description:"",required:!1,options:[],placeholder:""}),l=O(!1),a=O(null);te(()=>$.modelValue,c=>{n.value=c||[]}),te(n,c=>{x("update:modelValue",c)},{deep:!0});const p=()=>{b.value={id:"",type:"text",title:"",description:"",required:!1,options:[],placeholder:""},l.value=!1,a.value=null},f=()=>`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,D=()=>{if(!b.value.title){alert("Por favor ingresa un título para el campo");return}b.value.id||(b.value.id=f());const c={id:b.value.id,type:b.value.type,title:b.value.title,description:b.value.description||void 0,required:b.value.required,placeholder:b.value.placeholder||void 0};b.value.type==="select"&&b.value.options&&b.value.options.length>0&&(c.options=b.value.options),b.value.type==="number"&&(c.numberConfig={min:void 0,max:void 0,step:1,decimals:0}),b.value.type==="datepicker"&&(c.datepickerConfig={minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0}),a.value!==null?n.value[a.value]=c:n.value.push(c),p()},V=c=>{const m=n.value[c];b.value={...m,options:m.options||[]},a.value=c,l.value=!0},A=c=>{confirm("¿Estás seguro de eliminar este campo?")&&n.value.splice(c,1)},k=c=>{if(c>0){const m=n.value[c];n.value[c]=n.value[c-1],n.value[c-1]=m}},v=c=>{if(c<n.value.length-1){const m=n.value[c];n.value[c]=n.value[c+1],n.value[c+1]=m}},F=O("");te(F,c=>{b.value.type==="select"&&(b.value.options=c.split(`
`).map(m=>m.trim()).filter(m=>m!==""))}),te(()=>a.value,c=>{var m;c!==null&&((m=n.value[c])!=null&&m.options)?F.value=n.value[c].options.join(`
`):F.value=""});const P=U(()=>b.value.type==="select"),T=c=>{const m=s.find(S=>S.value===c);return m?m.label:c};return(c,m)=>(r(),g("div",Dt,[n.value.length>0?(r(),g("div",Tt,[t(e(_),{class:"text-sm font-medium"},{default:d(()=>[...m[7]||(m[7]=[u("Subcampos configurados:",-1)])]),_:1}),o("div",St,[(r(!0),g(N,null,Y(n.value,(S,y)=>(r(),E(e(K),{key:S.id,class:"relative"},{default:d(()=>[t(e(ee),{class:"p-3"},{default:d(()=>[o("div",At,[o("div",Et,[t(e(xe),{class:"h-4 w-4 text-muted-foreground"}),o("div",Bt,[o("div",Ut,[o("span",Pt,C(S.title),1),o("span",Mt,"("+C(T(S.type))+")",1),S.required?(r(),g("span",It,"*Requerido")):w("",!0)]),S.description?(r(),g("p",qt,C(S.description),1)):w("",!0)])]),o("div",Nt,[t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>k(y),disabled:y===0,class:"h-8 w-8 p-0"},{default:d(()=>[t(e(pe),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>v(y),disabled:y===n.value.length-1,class:"h-8 w-8 p-0"},{default:d(()=>[t(e(ve),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>V(y),class:"h-8 px-2"},{default:d(()=>[...m[8]||(m[8]=[u(" Editar ",-1)])]),_:1},8,["onClick"]),t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:h=>A(y),class:"h-8 w-8 p-0"},{default:d(()=>[t(e(ie),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))])])):(r(),g("div",jt," No hay subcampos configurados. Agrega al menos un campo. ")),l.value?(r(),E(e(K),{key:2,class:"border-primary dark:border-primary"},{default:d(()=>[t(e(oe),{class:"pb-3"},{default:d(()=>[o("div",Yt,[o("h4",Ot,C(a.value!==null?"Editar":"Agregar")+" Subcampo ",1),t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:p,class:"h-8 w-8 p-0"},{default:d(()=>[...m[9]||(m[9]=[u(" × ",-1)])]),_:1})])]),_:1}),t(e(ee),{class:"space-y-4"},{default:d(()=>[o("div",null,[t(e(_),{for:"field-type"},{default:d(()=>[...m[10]||(m[10]=[u("Tipo de campo *",-1)])]),_:1}),t(e(z),{modelValue:b.value.type,"onUpdate:modelValue":m[0]||(m[0]=S=>b.value.type=S)},{default:d(()=>[t(e(R),{id:"field-type"},{default:d(()=>[t(e(L))]),_:1}),t(e(G),null,{default:d(()=>[(r(),g(N,null,Y(s,S=>t(e(j),{key:S.value,value:S.value},{default:d(()=>[u(C(S.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[t(e(_),{for:"field-title"},{default:d(()=>[...m[11]||(m[11]=[u("Título del campo *",-1)])]),_:1}),t(e(q),{id:"field-title",modelValue:b.value.title,"onUpdate:modelValue":m[1]||(m[1]=S=>b.value.title=S),placeholder:"Ej: Nombre completo"},null,8,["modelValue"])]),o("div",null,[t(e(_),{for:"field-description"},{default:d(()=>[...m[12]||(m[12]=[u("Descripción (opcional)",-1)])]),_:1}),t(e(q),{id:"field-description",modelValue:b.value.description,"onUpdate:modelValue":m[2]||(m[2]=S=>b.value.description=S),placeholder:"Texto de ayuda para el usuario"},null,8,["modelValue"])]),["text","number","email","textarea"].includes(b.value.type)?(r(),g("div",zt,[t(e(_),{for:"field-placeholder"},{default:d(()=>[...m[13]||(m[13]=[u("Placeholder (opcional)",-1)])]),_:1}),t(e(q),{id:"field-placeholder",modelValue:b.value.placeholder,"onUpdate:modelValue":m[3]||(m[3]=S=>b.value.placeholder=S),placeholder:"Texto que aparece cuando el campo está vacío"},null,8,["modelValue"])])):w("",!0),P.value?(r(),g("div",Rt,[t(e(_),{for:"field-options"},{default:d(()=>[...m[14]||(m[14]=[u("Opciones (una por línea) *",-1)])]),_:1}),t(e(ne),{id:"field-options",modelValue:F.value,"onUpdate:modelValue":m[4]||(m[4]=S=>F.value=S),placeholder:`Opción 1
Opción 2
Opción 3`,rows:"4"},null,8,["modelValue"])])):w("",!0),o("div",Lt,[t(e(X),{id:"field-required",checked:b.value.required,"onUpdate:checked":m[5]||(m[5]=S=>b.value.required=S)},null,8,["checked"]),t(e(_),{for:"field-required",class:"text-sm font-normal"},{default:d(()=>[...m[15]||(m[15]=[u(" Campo requerido ",-1)])]),_:1})]),o("div",Gt,[t(e(M),{type:"button",variant:"outline",size:"sm",onClick:p},{default:d(()=>[...m[16]||(m[16]=[u(" Cancelar ",-1)])]),_:1}),t(e(M),{type:"button",size:"sm",onClick:D},{default:d(()=>[u(C(a.value!==null?"Actualizar":"Agregar")+" Campo ",1)]),_:1})])]),_:1})]),_:1})):w("",!0),l.value?w("",!0):(r(),E(e(M),{key:3,type:"button",variant:"outline",size:"sm",onClick:m[6]||(m[6]=S=>l.value=!0),class:"w-full"},{default:d(()=>[t(e(J),{class:"h-4 w-4 mr-2"}),m[17]||(m[17]=u(" Agregar Subcampo ",-1))]),_:1}))]))}}),Ht={class:"space-y-4"},Qt={class:"p-4 bg-cyan-50 dark:bg-cyan-950/20 rounded-lg border border-cyan-200 dark:border-cyan-800 space-y-4"},Xt={class:"font-medium text-cyan-900 dark:text-cyan-100 mb-3 flex items-center gap-2"},Zt={class:"space-y-4"},Jt={key:0,class:"p-3 bg-destructive/10 dark:bg-destructive/20 rounded-md"},Kt={key:1,class:"mt-4 p-3 bg-muted/30 dark:bg-muted/10 rounded-md"},ea={class:"text-sm text-muted-foreground"},la={key:0},ta=W({__name:"RepeaterFieldConfig",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=U({get:()=>$.modelValue||{minItems:0,maxItems:10,itemName:"Elemento",addButtonText:"Agregar elemento",removeButtonText:"Eliminar",fields:[]},set:l=>x("update:modelValue",l)}),n=(l,a)=>{x("update:modelValue",{...s.value,[l]:a})},b=U(()=>{const l=s.value;return l.minItems!==void 0&&l.maxItems!==void 0?l.minItems<=l.maxItems:!0});return(l,a)=>{var p;return r(),g("div",Ht,[o("div",Qt,[o("h4",Xt,[t(e(H),{variant:"secondary",class:"text-xs"},{default:d(()=>[...a[6]||(a[6]=[u("Configuración del Repetidor",-1)])]),_:1})]),a[20]||(a[20]=o("p",{class:"text-sm text-cyan-700 dark:text-cyan-300 mb-4"}," Define los subcampos y límites del repetidor. Los usuarios podrán agregar múltiples instancias de estos campos. ",-1)),o("div",Zt,[o("div",null,[t(e(_),null,{default:d(()=>[...a[7]||(a[7]=[u("Número mínimo de elementos",-1)])]),_:1}),t(e(q),{type:"number","model-value":s.value.minItems,"onUpdate:modelValue":a[0]||(a[0]=f=>n("minItems",Number(f))),min:"0",max:"50",disabled:i.disabled},null,8,["model-value","disabled"]),a[8]||(a[8]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Cantidad mínima de elementos que debe tener el usuario ",-1))]),o("div",null,[t(e(_),null,{default:d(()=>[...a[9]||(a[9]=[u("Número máximo de elementos",-1)])]),_:1}),t(e(q),{type:"number","model-value":s.value.maxItems,"onUpdate:modelValue":a[1]||(a[1]=f=>n("maxItems",Number(f))),min:"1",max:"50",disabled:i.disabled},null,8,["model-value","disabled"]),a[10]||(a[10]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Cantidad máxima de elementos que puede agregar el usuario ",-1))]),o("div",null,[t(e(_),null,{default:d(()=>[...a[11]||(a[11]=[u("Nombre del elemento",-1)])]),_:1}),t(e(q),{"model-value":s.value.itemName,"onUpdate:modelValue":a[2]||(a[2]=f=>n("itemName",f)),placeholder:"Elemento",disabled:i.disabled},null,8,["model-value","disabled"]),a[12]||(a[12]=o("p",{class:"text-xs text-muted-foreground mt-1"},' Cómo se llamará cada instancia (ej: "Referencia", "Experiencia", "Documento") ',-1))]),o("div",null,[t(e(_),null,{default:d(()=>[...a[13]||(a[13]=[u("Texto del botón agregar",-1)])]),_:1}),t(e(q),{"model-value":s.value.addButtonText,"onUpdate:modelValue":a[3]||(a[3]=f=>n("addButtonText",f)),placeholder:"Agregar elemento",disabled:i.disabled},null,8,["model-value","disabled"])]),o("div",null,[t(e(_),null,{default:d(()=>[...a[14]||(a[14]=[u("Texto del botón eliminar",-1)])]),_:1}),t(e(q),{"model-value":s.value.removeButtonText,"onUpdate:modelValue":a[4]||(a[4]=f=>n("removeButtonText",f)),placeholder:"Eliminar",disabled:i.disabled},null,8,["model-value","disabled"])]),o("div",null,[t(e(_),{class:"text-sm font-medium mb-2"},{default:d(()=>[...a[15]||(a[15]=[u("Configuración de subcampos",-1)])]),_:1}),a[16]||(a[16]=o("p",{class:"text-xs text-muted-foreground mb-3"}," Define los campos que se repetirán dentro del repetidor. ",-1)),t(Wt,{"model-value":s.value.fields,"onUpdate:modelValue":a[5]||(a[5]=f=>n("fields",f)),disabled:i.disabled},null,8,["model-value","disabled"])])]),b.value?w("",!0):(r(),g("div",Jt,[...a[17]||(a[17]=[o("p",{class:"text-sm text-destructive"}," ⚠️ El número mínimo no puede ser mayor al máximo ",-1)])])),b.value?(r(),g("div",Kt,[o("p",ea,[a[19]||(a[19]=o("strong",null,"Resumen:",-1)),u(" Entre "+C(s.value.minItems)+" y "+C(s.value.maxItems)+" "+C((p=s.value.itemName)==null?void 0:p.toLowerCase())+"s. ",1),s.value.fields&&s.value.fields.length>0?(r(),g("span",la,[a[18]||(a[18]=o("br",null,null,-1)),u(" "+C(s.value.fields.length)+" subcampo"+C(s.value.fields.length===1?"":"s")+" configurado"+C(s.value.fields.length===1?"":"s")+". ",1)])):w("",!0)])])):w("",!0)])])}}}),aa=Q(ta,[["__scopeId","data-v-72c1c85d"]]),oa={class:"flex items-center space-x-2"},da={key:0,class:"space-y-4"},ia={key:0,class:"p-4 bg-amber-100 dark:bg-amber-950/50 border border-amber-300 dark:border-amber-700 rounded-lg"},sa={class:"flex items-start gap-2"},na={class:"space-y-3"},ua={key:0},ra={key:1,class:"text-xs text-muted-foreground mt-1"},ma={class:"flex justify-end"},ca={key:0,class:"mt-4"},fa={class:"flex items-center justify-between mb-2"},pa={key:0,class:"p-3 bg-gray-100 dark:bg-gray-800/50 rounded-lg"},va={class:"text-sm font-medium text-gray-900 dark:text-gray-100 mt-1"},ba=W({__name:"ConditionalFieldConfig",props:{modelValue:{default:()=>({enabled:!1,showWhen:"all",conditions:[]})},fields:{},currentFieldId:{}},emits:["update:modelValue"],setup(i,{emit:B}){const $=i,x=B,s=U({get(){var T,c,m;return{enabled:((T=$.modelValue)==null?void 0:T.enabled)||!1,showWhen:((c=$.modelValue)==null?void 0:c.showWhen)||"all",conditions:((m=$.modelValue)==null?void 0:m.conditions)||[]}},set(T){x("update:modelValue",T)}}),n=T=>{s.value={...s.value,...T}},b=U(()=>$.fields.filter(T=>T.id===$.currentFieldId?!1:["select","radio","checkbox"].includes(T.type))),l=[{value:"equals",label:"Es igual a"},{value:"not_equals",label:"No es igual a"},{value:"contains",label:"Contiene"},{value:"not_contains",label:"No contiene"},{value:"is_empty",label:"Está vacío"},{value:"is_not_empty",label:"No está vacío"}],a=()=>{const T={fieldId:"",operator:"equals",value:""},c=[...s.value.conditions,T];n({conditions:c})},p=T=>{const c=s.value.conditions.filter((m,S)=>S!==T);n({conditions:c})},f=T=>{const c=$.fields.find(m=>m.id===T);return c?c.options||[]:[]},D=T=>{const c=$.fields.find(m=>m.id===T);return(c==null?void 0:c.title)||T},V=T=>!["is_empty","is_not_empty"].includes(T),A=(T,c)=>{const m=[...s.value.conditions];m[T]={...m[T],value:c},n({conditions:m})},k=(T,c)=>{const m=[...s.value.conditions];m[T]={...m[T],fieldId:c,value:""},n({conditions:m})},v=(T,c)=>{const m=[...s.value.conditions];m[T]={...m[T],operator:c,value:V(c)?m[T].value:void 0},n({conditions:m})},F=U(()=>{if(!s.value.enabled||s.value.conditions.length===0)return"Sin condiciones configuradas";const T=s.value.showWhen==="all"?" Y ":" O ";return s.value.conditions.map(m=>{var I;const S=D(m.fieldId),y=((I=l.find(Z=>Z.value===m.operator))==null?void 0:I.label)||m.operator;if(!V(m.operator))return`"${S}" ${y}`;const h=Array.isArray(m.value)?m.value.join(", "):m.value||"[valor]";return`"${S}" ${y} "${h}"`}).join(T)}),P=O(!1);return(T,c)=>(r(),E(e(K),{class:"border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-950/50"},{default:d(()=>[t(e(oe),null,{default:d(()=>[t(e(de),{class:"text-orange-900 dark:text-orange-100 flex items-center justify-between"},{default:d(()=>[c[3]||(c[3]=o("span",null,"Configuración Condicional",-1)),s.value.enabled?(r(),E(e(H),{key:0,variant:"secondary",class:"bg-orange-100 dark:bg-orange-900/50"},{default:d(()=>[u(C(s.value.conditions.length)+" condicion"+C(s.value.conditions.length!==1?"es":""),1)]),_:1})):w("",!0)]),_:1}),t(e(ye),{class:"text-orange-700 dark:text-orange-300"},{default:d(()=>[...c[4]||(c[4]=[u(" Define cuándo debe mostrarse este campo basándose en valores de otros campos ",-1)])]),_:1})]),_:1}),t(e(ee),{class:"space-y-4"},{default:d(()=>[o("div",oa,[t(e(X),{id:"enable_conditions",checked:s.value.enabled,"onUpdate:checked":c[0]||(c[0]=m=>n({enabled:m}))},null,8,["checked"]),t(e(_),{for:"enable_conditions",class:"text-sm font-medium"},{default:d(()=>[...c[5]||(c[5]=[u(" Hacer este campo condicional ",-1),o("span",{class:"text-muted-foreground block text-xs"}," El campo solo se mostrará cuando se cumplan las condiciones definidas ",-1)])]),_:1})]),s.value.enabled?(r(),g("div",da,[b.value.length===0?(r(),g("div",ia,[o("div",sa,[t(e(Ce),{class:"h-5 w-5 text-amber-600 mt-0.5"}),c[6]||(c[6]=o("div",{class:"text-sm text-amber-800 dark:text-amber-200"},[o("p",{class:"font-medium"},"No hay campos disponibles para condiciones"),o("p",{class:"mt-1"},'Agrega campos de tipo "Lista desplegable", "Opción múltiple" o "Casillas de verificación" antes de configurar condiciones.')],-1))])])):(r(),g(N,{key:1},[o("div",null,[t(e(_),null,{default:d(()=>[...c[7]||(c[7]=[u("Mostrar este campo cuando:",-1)])]),_:1}),t(e(z),{"model-value":s.value.showWhen,"onUpdate:modelValue":c[1]||(c[1]=m=>n({showWhen:m}))},{default:d(()=>[t(e(R),{class:"w-full"},{default:d(()=>[t(e(L))]),_:1}),t(e(G),null,{default:d(()=>[t(e(j),{value:"all"},{default:d(()=>[...c[8]||(c[8]=[u(" Se cumplan TODAS las condiciones (AND) ",-1)])]),_:1}),t(e(j),{value:"any"},{default:d(()=>[...c[9]||(c[9]=[u(" Se cumpla ALGUNA condición (OR) ",-1)])]),_:1})]),_:1})]),_:1},8,["model-value"])]),o("div",na,[(r(!0),g(N,null,Y(s.value.conditions,(m,S)=>(r(),g("div",{key:S,class:"p-3 bg-white dark:bg-gray-800/50 border dark:border-gray-700 rounded-lg space-y-3"},[o("div",null,[t(e(_),{class:"text-xs"},{default:d(()=>[...c[10]||(c[10]=[u("Campo a evaluar",-1)])]),_:1}),t(e(z),{"model-value":m.fieldId,"onUpdate:modelValue":y=>k(S,y)},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona un campo"})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(b.value,y=>(r(),E(e(j),{key:y.id,value:y.id},{default:d(()=>[u(C(y.title)+" ",1),t(e(H),{variant:"outline",class:"ml-2 text-xs"},{default:d(()=>[u(C(y.type),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),o("div",null,[t(e(_),{class:"text-xs"},{default:d(()=>[...c[11]||(c[11]=[u("Operador",-1)])]),_:1}),t(e(z),{"model-value":m.operator,"onUpdate:modelValue":y=>v(S,y)},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L))]),_:1}),t(e(G),null,{default:d(()=>[(r(),g(N,null,Y(l,y=>t(e(j),{key:y.value,value:y.value},{default:d(()=>[u(C(y.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),V(m.operator)&&m.fieldId?(r(),g("div",ua,[t(e(_),{class:"text-xs"},{default:d(()=>[...c[12]||(c[12]=[u("Valor",-1)])]),_:1}),f(m.fieldId).length>0?(r(),E(e(z),{key:0,"model-value":m.value,"onUpdate:modelValue":y=>A(S,y)},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona un valor"})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(f(m.fieldId),y=>(r(),E(e(j),{key:y,value:y},{default:d(()=>[u(C(y),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue"])):(r(),g("p",ra," El campo seleccionado no tiene opciones definidas "))])):w("",!0),o("div",ma,[t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:y=>p(S),class:"text-destructive"},{default:d(()=>[t(e(ie),{class:"h-4 w-4 mr-1"}),c[13]||(c[13]=u(" Eliminar condición ",-1))]),_:1},8,["onClick"])])]))),128)),t(e(M),{type:"button",variant:"outline",size:"sm",onClick:a,class:"w-full"},{default:d(()=>[t(e(J),{class:"h-4 w-4 mr-2"}),c[14]||(c[14]=u(" Agregar condición ",-1))]),_:1})]),s.value.conditions.length>0?(r(),g("div",ca,[o("div",fa,[t(e(_),{class:"text-xs"},{default:d(()=>[...c[15]||(c[15]=[u("Vista previa de la regla:",-1)])]),_:1}),t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:c[2]||(c[2]=m=>P.value=!P.value)},{default:d(()=>[(r(),E(ue(P.value?e(we):e(ce)),{class:"h-4 w-4 mr-1"})),u(" "+C(P.value?"Ocultar":"Mostrar"),1)]),_:1})]),P.value?(r(),g("div",pa,[c[16]||(c[16]=o("p",{class:"text-sm text-gray-700 dark:text-gray-300"}," Este campo se mostrará cuando: ",-1)),o("p",va,C(F.value),1)])):w("",!0)])):w("",!0)],64))])):w("",!0)]),_:1})]),_:1}))}}),se=[{value:"text",label:"Texto corto"},{value:"textarea",label:"Texto largo"},{value:"number",label:"Campo numérico"},{value:"email",label:"Correo electrónico"},{value:"date",label:"Fecha (HTML5)"},{value:"select",label:"Lista desplegable"},{value:"radio",label:"Opción múltiple"},{value:"checkbox",label:"Casillas de verificación"},{value:"file",label:"Archivo"},{value:"datepicker",label:"Selector de fecha"},{value:"disclaimer",label:"Aceptar disclaimer"},{value:"repeater",label:"Repetidor"},{value:"perfil_candidatura",label:"Perfil de Candidatura"},{value:"convocatoria",label:"Elegir Convocatoria"}],yo=[{value:"America/Bogota",label:"Colombia (GMT-5) - America/Bogota"},{value:"America/Mexico_City",label:"México (GMT-6) - America/Mexico_City"},{value:"America/Buenos_Aires",label:"Argentina (GMT-3) - America/Buenos_Aires"},{value:"America/Sao_Paulo",label:"Brasil (GMT-3) - America/Sao_Paulo"},{value:"America/Santiago",label:"Chile (GMT-3) - America/Santiago"},{value:"America/Lima",label:"Perú (GMT-5) - America/Lima"},{value:"America/Caracas",label:"Venezuela (GMT-4) - America/Caracas"},{value:"America/La_Paz",label:"Bolivia (GMT-4) - America/La_Paz"},{value:"America/Quito",label:"Ecuador (GMT-5) - America/Quito"},{value:"America/Panama",label:"Panamá (GMT-5) - America/Panama"},{value:"America/Costa_Rica",label:"Costa Rica (GMT-6) - America/Costa_Rica"},{value:"America/Guatemala",label:"Guatemala (GMT-6) - America/Guatemala"},{value:"America/Montevideo",label:"Uruguay (GMT-3) - America/Montevideo"},{value:"America/Asuncion",label:"Paraguay (GMT-3) - America/Asuncion"}];function ga(){const i=x=>{var n,b;const s=[];if((n=x.title)!=null&&n.trim()||s.push({field:"title",message:"El título del campo es requerido"}),["select","radio","checkbox"].includes(x.type||"")&&(!x.options||x.options.length===0?s.push({field:"options",message:"Los campos de selección deben tener al menos una opción"}):x.options.filter((a,p)=>!a.trim()).length>0&&s.push({field:"options",message:"Todas las opciones deben tener texto"})),x.type==="perfil_candidatura"&&x.perfilCandidaturaConfig){const l=x.perfilCandidaturaConfig;!l.cargo_id&&!l.periodo_electoral_id&&s.push({field:"perfilCandidaturaConfig",message:"Debe seleccionar al menos un cargo o período electoral"})}if(x.type==="convocatoria"&&x.convocatoriaConfig&&(x.convocatoriaConfig.convocatoria_id||s.push({field:"convocatoriaConfig",message:"Debe seleccionar una convocatoria"})),x.type==="file"&&x.fileConfig){const l=x.fileConfig;l.maxFileSize&&(l.maxFileSize<1||l.maxFileSize>100)&&s.push({field:"fileConfig",message:"El tamaño máximo debe estar entre 1 y 100 MB"}),l.maxFiles&&(l.maxFiles<1||l.maxFiles>20)&&s.push({field:"fileConfig",message:"El número máximo de archivos debe estar entre 1 y 20"})}if(x.type==="disclaimer"&&x.disclaimerConfig&&((b=x.disclaimerConfig.disclaimerText)!=null&&b.trim()||s.push({field:"disclaimerConfig",message:"El texto del disclaimer es requerido"})),x.type==="number"&&x.numberConfig){const l=x.numberConfig;l.min!==void 0&&l.max!==void 0&&l.min>l.max&&s.push({field:"numberConfig",message:"El valor mínimo no puede ser mayor al máximo"}),l.decimals!==void 0&&(l.decimals<0||l.decimals>10)&&s.push({field:"numberConfig",message:"Los decimales deben estar entre 0 y 10"})}if(x.type==="repeater"&&x.repeaterConfig){const l=x.repeaterConfig;l.minItems!==void 0&&l.maxItems!==void 0&&l.minItems>l.maxItems&&s.push({field:"repeaterConfig",message:"El mínimo de elementos no puede ser mayor al máximo"})}return s};return{validateField:i,isFieldValid:x=>i(x).length===0,getFirstError:x=>{const s=i(x);return s.length>0?s[0].message:null}}}const xa={class:"flex items-center justify-between"},ya={class:"flex items-center gap-2"},Ca={class:"flex items-center space-x-2 mt-2"},ka={key:0,class:"flex items-center space-x-2 mt-2"},$a={class:"flex items-center gap-2 pt-4"},Va=W({__name:"FieldForm",props:{mode:{},field:{},disabled:{type:Boolean,default:!1},showEditableOption:{type:Boolean,default:!1},showPerfilCandidaturaConfig:{type:Boolean,default:!1},showConvocatoriaConfig:{type:Boolean,default:!1},cargos:{default:()=>[]},periodosElectorales:{default:()=>[]},convocatorias:{default:()=>[]},context:{default:"convocatoria"},availableFields:{default:()=>[]}},emits:["save","cancel"],setup(i,{emit:B}){const $=i,x=B,{isFieldValid:s,getFirstError:n}=ga(),b=()=>({id:`field_${Date.now()}`,type:"text",title:"",description:"",required:!1,options:[],editable:!1,conditionalConfig:{enabled:!1,showWhen:"all",conditions:[]},convocatoriaConfig:{convocatoria_id:void 0,multiple:!1,mostrarVotoBlanco:!0,ordenCandidatos:"aleatorio",vistaPreferida:"lista"},perfilCandidaturaConfig:{cargo_id:void 0,periodo_electoral_id:void 0,territorio_id:void 0,departamento_id:void 0,municipio_id:void 0,localidad_id:void 0,territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[],multiple:!1,mostrarVotoBlanco:!0},fileConfig:{multiple:!1,maxFiles:5,maxFileSize:10,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"},datepickerConfig:{minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0},disclaimerConfig:{disclaimerText:"",modalTitle:"Términos y Condiciones",acceptButtonText:"Acepto",declineButtonText:"No acepto"},repeaterConfig:{minItems:0,maxItems:10,itemName:"Elemento",addButtonText:"Agregar elemento",removeButtonText:"Eliminar",fields:[]},numberConfig:{min:void 0,max:void 0,step:1,decimals:0}}),l=ge($.mode==="edit"&&$.field?{...$.field}:b()),a=U(()=>$.mode==="create"?"Añadir Nuevo Campo":"Editar Campo"),p=U(()=>$.mode==="create"?"Añadir Campo":"Guardar Cambios"),f=()=>{l.options||(l.options=[]),l.options.push("")},D=k=>{var v;(v=l.options)==null||v.splice(k,1)},V=k=>{if(k&&(k.preventDefault(),k.stopPropagation()),console.log("FieldForm handleSave called with:",l),!s(l)){const v=n(l);console.error("Validation error:",v),alert(`Error de validación: ${v}`);return}x("save",{...l})},A=k=>{k&&(k.preventDefault(),k.stopPropagation()),console.log("FieldForm handleCancel called"),x("cancel")};return(k,v)=>(r(),E(e(K),{class:"mb-4","data-form-type":i.mode==="create"?"new-field":"edit-field"},{default:d(()=>[t(e(oe),{class:"pb-3"},{default:d(()=>[o("div",xa,[t(e(de),{class:"text-lg"},{default:d(()=>[u(C(a.value),1)]),_:1}),t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:v[0]||(v[0]=F=>A(F)),class:"h-8 w-8 p-0"},{default:d(()=>[t(e(ke),{class:"h-4 w-4"})]),_:1})])]),_:1}),t(e(ee),{class:"space-y-4"},{default:d(()=>[o("div",null,[t(e(_),null,{default:d(()=>[...v[17]||(v[17]=[u("Tipo de Campo *",-1)])]),_:1}),t(e(z),{modelValue:l.type,"onUpdate:modelValue":v[1]||(v[1]=F=>l.type=F),disabled:i.disabled},{default:d(()=>[t(e(R),null,{default:d(()=>[t(e(L),{placeholder:"Selecciona el tipo de campo"})]),_:1}),t(e(G),null,{default:d(()=>[(r(!0),g(N,null,Y(e(se),F=>(r(),E(e(j),{key:F.value,value:F.value},{default:d(()=>[o("div",ya,[(r(),E(ue(F.icon),{class:"h-4 w-4"})),o("span",null,C(F.label),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),o("div",Ca,[t(e(X),{id:"field_required",checked:l.required,"onUpdate:checked":v[2]||(v[2]=F=>l.required=F),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{for:"field_required",class:"text-sm"},{default:d(()=>[...v[18]||(v[18]=[u("Campo requerido",-1)])]),_:1})]),i.showEditableOption?(r(),g("div",ka,[t(e(X),{id:"field_editable",checked:l.editable,"onUpdate:checked":v[3]||(v[3]=F=>l.editable=F),disabled:i.disabled},null,8,["checked","disabled"]),t(e(_),{class:"text-sm"},{default:d(()=>[...v[19]||(v[19]=[u(" Campo editable en candidaturas aprobadas ",-1),o("span",{class:"text-muted-foreground block text-xs"}," Los usuarios podrán editar este campo incluso con candidatura aprobada ",-1)])]),_:1})])):w("",!0)]),o("div",null,[t(e(_),null,{default:d(()=>[...v[20]||(v[20]=[u("Título del Campo *",-1)])]),_:1}),t(e(q),{modelValue:l.title,"onUpdate:modelValue":v[4]||(v[4]=F=>l.title=F),placeholder:"Ej: ¿Cuál es tu candidato preferido?",disabled:i.disabled},null,8,["modelValue","disabled"])]),o("div",null,[t(e(_),null,{default:d(()=>[...v[21]||(v[21]=[u("Descripción (opcional)",-1)])]),_:1}),t(e(ne),{modelValue:l.description,"onUpdate:modelValue":v[5]||(v[5]=F=>l.description=F),placeholder:"Descripción adicional del campo",rows:"2",disabled:i.disabled},null,8,["modelValue","disabled"])]),["select","radio","checkbox"].includes(l.type)?(r(),E(Be,{key:0,modelValue:l.options,"onUpdate:modelValue":v[6]||(v[6]=F=>l.options=F),disabled:i.disabled,onAddOption:f,onRemoveOption:D},null,8,["modelValue","disabled"])):w("",!0),l.type==="file"?(r(),E(ze,{key:1,modelValue:l.fileConfig,"onUpdate:modelValue":v[7]||(v[7]=F=>l.fileConfig=F),disabled:i.disabled},null,8,["modelValue","disabled"])):w("",!0),l.type==="number"?(r(),E(fl,{key:2,modelValue:l.numberConfig,"onUpdate:modelValue":v[8]||(v[8]=F=>l.numberConfig=F),disabled:i.disabled},null,8,["modelValue","disabled"])):w("",!0),l.type==="datepicker"?(r(),E(al,{key:3,modelValue:l.datepickerConfig,"onUpdate:modelValue":v[9]||(v[9]=F=>l.datepickerConfig=F),disabled:i.disabled},null,8,["modelValue","disabled"])):w("",!0),l.type==="disclaimer"?(r(),E(hl,{key:4,modelValue:l.disclaimerConfig,"onUpdate:modelValue":v[10]||(v[10]=F=>l.disclaimerConfig=F),disabled:i.disabled},null,8,["modelValue","disabled"])):w("",!0),l.type==="repeater"?(r(),E(aa,{key:5,modelValue:l.repeaterConfig,"onUpdate:modelValue":v[11]||(v[11]=F=>l.repeaterConfig=F),disabled:i.disabled},null,8,["modelValue","disabled"])):w("",!0),l.type==="convocatoria"&&i.showConvocatoriaConfig&&l.convocatoriaConfig?(r(),E(Gl,{key:6,modelValue:l.convocatoriaConfig,"onUpdate:modelValue":v[12]||(v[12]=F=>l.convocatoriaConfig=F),convocatorias:i.convocatorias,disabled:i.disabled},null,8,["modelValue","convocatorias","disabled"])):w("",!0),l.type==="perfil_candidatura"?(r(),E(ht,{key:7,modelValue:l.perfilCandidaturaConfig,"onUpdate:modelValue":v[13]||(v[13]=F=>l.perfilCandidaturaConfig=F),cargos:i.cargos,"periodos-electorales":i.periodosElectorales,context:i.context,disabled:i.disabled},null,8,["modelValue","cargos","periodos-electorales","context","disabled"])):w("",!0),l.conditionalConfig?(r(),E(ba,{key:8,modelValue:l.conditionalConfig,"onUpdate:modelValue":v[14]||(v[14]=F=>l.conditionalConfig=F),fields:i.availableFields,disabled:i.disabled},null,8,["modelValue","fields","disabled"])):w("",!0),o("div",$a,[t(e(M),{type:"button",onClick:v[15]||(v[15]=F=>V(F)),disabled:i.disabled},{default:d(()=>[u(C(p.value),1)]),_:1},8,["disabled"]),t(e(M),{type:"button",variant:"outline",onClick:v[16]||(v[16]=F=>A(F))},{default:d(()=>[...v[22]||(v[22]=[u(" Cancelar ",-1)])]),_:1})])]),_:1})]),_:1},8,["data-form-type"]))}}),_a=Q(Va,[["__scopeId","data-v-81d869f8"]]),wa={class:"flex items-start justify-between gap-3"},Fa={class:"flex-1 min-w-0"},ha={class:"flex items-start gap-2 mb-2"},Da={class:"flex-1 min-w-0"},Ta={class:"flex items-center gap-2 mb-1"},Sa={class:"text-sm font-medium truncate"},Aa={key:0,class:"text-xs text-muted-foreground mb-2 line-clamp-2"},Ea={key:1,class:"text-xs text-muted-foreground"},Ba={class:"flex items-center gap-1 mt-2"},Ua={class:"flex items-center gap-1"},Pa=W({__name:"FieldPreview",props:{field:{},index:{},disabled:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},canDuplicate:{type:Boolean,default:!0}},emits:["edit","delete","duplicate","preview"],setup(i,{emit:B}){const $=i,x=B,s=U(()=>se.find(l=>l.value===$.field.type)||se[0]),n=U(()=>{var p,f,D,V,A;const l=$.field,a=[];switch(l.required&&a.push("Requerido"),l.editable&&a.push("Editable"),l.type){case"select":case"radio":case"checkbox":(p=l.options)!=null&&p.length&&a.push(`${l.options.length} opciones`);break;case"file":if(l.fileConfig){const k=l.fileConfig;k.multiple?a.push(`Hasta ${k.maxFiles} archivos`):a.push("Un archivo"),a.push(`Máx ${k.maxFileSize}MB`)}break;case"number":if(l.numberConfig){const k=l.numberConfig;(k.min!==void 0||k.max!==void 0)&&a.push(`Rango: ${k.min??"..."} - ${k.max??"..."}`),k.decimals>0&&a.push(`${k.decimals} decimales`)}break;case"datepicker":if(l.datepickerConfig){const k=l.datepickerConfig;a.push(`Formato: ${k.format}`),!k.allowPastDates&&k.allowFutureDates?a.push("Solo futuras"):k.allowPastDates&&!k.allowFutureDates&&a.push("Solo pasadas")}break;case"convocatoria":if(l.convocatoriaConfig){const k=l.convocatoriaConfig;k.multiple&&a.push("Voto múltiple"),k.mostrarVotoBlanco&&a.push("Con voto blanco")}break;case"perfil_candidatura":if(l.perfilCandidaturaConfig){const k=l.perfilCandidaturaConfig;k.multiple&&a.push("Selección múltiple"),k.mostrarVotoBlanco&&a.push("Con voto blanco")}break;case"repeater":if(l.repeaterConfig){const k=l.repeaterConfig;a.push(`${k.minItems}-${k.maxItems} elementos`),(f=k.fields)!=null&&f.length&&a.push(`${k.fields.length} subcampos`)}break;case"disclaimer":if((D=l.disclaimerConfig)!=null&&D.disclaimerText){const k=l.disclaimerConfig.disclaimerText.length;a.push(`${k} caracteres`)}break}return(V=l.conditionalConfig)!=null&&V.enabled&&((A=l.conditionalConfig.conditions)==null?void 0:A.length)>0&&a.push(`${l.conditionalConfig.conditions.length} condiciones`),a.join(" • ")}),b=U(()=>({text:"default",textarea:"default",select:"secondary",radio:"secondary",checkbox:"secondary",file:"outline",datepicker:"outline",number:"outline",disclaimer:"destructive",repeater:"default",convocatoria:"default",perfil_candidatura:"default"})[$.field.type]||"default");return(l,a)=>(r(),E(e(K),{class:"group hover:shadow-md transition-shadow duration-200",id:`field-preview-${i.index}`},{default:d(()=>[t(e(ee),{class:"p-4"},{default:d(()=>{var p;return[o("div",wa,[o("div",Fa,[o("div",ha,[(r(),E(ue(s.value.icon),{class:"h-4 w-4 mt-1 text-muted-foreground flex-shrink-0"})),o("div",Da,[o("div",Ta,[o("h4",Sa,C(i.field.title||"Campo sin título"),1),t(e(H),{variant:b.value,class:"text-xs"},{default:d(()=>[u(C(s.value.label),1)]),_:1},8,["variant"])]),i.field.description?(r(),g("p",Aa,C(i.field.description),1)):w("",!0),n.value?(r(),g("p",Ea,C(n.value),1)):w("",!0)])]),o("div",Ba,[(p=i.field.conditionalConfig)!=null&&p.enabled?(r(),E(e(H),{key:0,variant:"outline",class:"text-xs"},{default:d(()=>[t(e($e),{class:"mr-1 h-3 w-3"}),a[4]||(a[4]=u(" Condicional ",-1))]),_:1})):w("",!0)])]),o("div",Ua,[t(e(M),{type:"button",variant:"ghost",size:"sm",onClick:a[0]||(a[0]=f=>x("preview",i.field)),disabled:i.disabled,class:"h-8 w-8 p-0",title:"Previsualizar campo"},{default:d(()=>[t(e(ce),{class:"h-3 w-3"})]),_:1},8,["disabled"]),i.canEdit?(r(),E(e(M),{key:0,type:"button",variant:"ghost",size:"sm",onClick:a[1]||(a[1]=f=>x("edit",i.index)),disabled:i.disabled,class:"h-8 w-8 p-0",title:"Editar campo"},{default:d(()=>[t(e(Ve),{class:"h-3 w-3"})]),_:1},8,["disabled"])):w("",!0),i.canDuplicate?(r(),E(e(M),{key:1,type:"button",variant:"ghost",size:"sm",onClick:a[2]||(a[2]=f=>x("duplicate",i.field)),disabled:i.disabled,class:"h-8 w-8 p-0",title:"Duplicar campo"},{default:d(()=>[t(e(_e),{class:"h-3 w-3"})]),_:1},8,["disabled"])):w("",!0),i.canDelete?(r(),E(e(M),{key:2,type:"button",variant:"ghost",size:"sm",onClick:a[3]||(a[3]=f=>x("delete",i.index)),disabled:i.disabled,class:"h-8 w-8 p-0 text-destructive hover:text-destructive",title:"Eliminar campo"},{default:d(()=>[t(e(ie),{class:"h-3 w-3"})]),_:1},8,["disabled"])):w("",!0)])])]}),_:1})]),_:1},8,["id"]))}}),Ma=Q(Pa,[["__scopeId","data-v-1dacbda7"]]),Ia={class:"space-y-4"},qa={class:"flex items-center justify-between"},Na={class:"text-sm text-muted-foreground"},ja={class:"flex items-center gap-4 mt-3"},Ya={class:"space-y-3"},Oa={key:0,class:"text-center py-12"},za={class:"mx-auto w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mb-4"},Ra={key:0,class:"flex items-center justify-between pt-4 border-t"},La={class:"text-sm text-muted-foreground"},Ga={class:"flex items-center gap-2"},Wa=W({__name:"FieldList",props:{fields:{},disabled:{type:Boolean,default:!1},canAddFields:{type:Boolean,default:!0},canEditFields:{type:Boolean,default:!0},canDeleteFields:{type:Boolean,default:!0},title:{default:"Campos del Formulario"},description:{default:"Gestiona los campos que aparecerán en el formulario"}},emits:["add-field","edit-field","delete-field","duplicate-field","preview-field"],setup(i,{emit:B}){const $=i,x=B,s=U(()=>{const l=$.fields.length,a=$.fields.filter(f=>f.required).length,p=$.fields.filter(f=>{var D;return(D=f.conditionalConfig)==null?void 0:D.enabled}).length;return{total:l,required:a,conditional:p,optional:l-a}}),n=l=>{x("duplicate-field",l)},b=l=>{x("delete-field",l)};return(l,a)=>(r(),g("div",Ia,[t(e(K),null,{default:d(()=>[t(e(oe),null,{default:d(()=>[o("div",qa,[o("div",null,[t(e(de),{class:"text-lg"},{default:d(()=>[u(C(i.title),1)]),_:1}),o("p",Na,C(i.description),1)]),i.canAddFields?(r(),E(e(M),{key:0,type:"button",onClick:a[0]||(a[0]=p=>x("add-field")),disabled:i.disabled,class:"gap-2"},{default:d(()=>[t(e(J),{class:"h-4 w-4"}),a[4]||(a[4]=u(" Añadir Campo ",-1))]),_:1},8,["disabled"])):w("",!0)]),o("div",ja,[t(e(H),{variant:"outline"},{default:d(()=>[u(" Total: "+C(s.value.total),1)]),_:1}),s.value.required>0?(r(),E(e(H),{key:0,variant:"default"},{default:d(()=>[u(" Requeridos: "+C(s.value.required),1)]),_:1})):w("",!0),s.value.conditional>0?(r(),E(e(H),{key:1,variant:"secondary"},{default:d(()=>[u(" Condicionales: "+C(s.value.conditional),1)]),_:1})):w("",!0)])]),_:1})]),_:1}),o("div",Ya,[i.fields.length===0?(r(),g("div",Oa,[o("div",za,[t(e(J),{class:"h-8 w-8 text-muted-foreground"})]),a[6]||(a[6]=o("h3",{class:"text-lg font-medium text-muted-foreground mb-2"}," No hay campos agregados ",-1)),a[7]||(a[7]=o("p",{class:"text-sm text-muted-foreground mb-4"}," Comienza agregando el primer campo a tu formulario ",-1)),i.canAddFields?(r(),E(e(M),{key:0,type:"button",onClick:a[1]||(a[1]=p=>x("add-field")),disabled:i.disabled},{default:d(()=>[t(e(J),{class:"mr-2 h-4 w-4"}),a[5]||(a[5]=u(" Añadir Primer Campo ",-1))]),_:1},8,["disabled"])):w("",!0)])):w("",!0),(r(!0),g(N,null,Y(i.fields,(p,f)=>(r(),g("div",{key:p.id,class:"relative"},[t(Ma,{field:p,index:f,disabled:i.disabled,"can-edit":i.canEditFields,"can-delete":i.canDeleteFields,"can-duplicate":i.canAddFields,onEdit:D=>x("edit-field",f),onDelete:b,onDuplicate:n,onPreview:a[2]||(a[2]=D=>x("preview-field",D))},null,8,["field","index","disabled","can-edit","can-delete","can-duplicate","onEdit"])]))),128))]),i.fields.length>0?(r(),g("div",Ra,[o("div",La,C(s.value.total)+" campo"+C(s.value.total===1?"":"s")+" en total ",1),o("div",Ga,[i.canAddFields?(r(),E(e(M),{key:0,type:"button",variant:"outline",size:"sm",onClick:a[3]||(a[3]=p=>x("add-field")),disabled:i.disabled},{default:d(()=>[t(e(J),{class:"mr-2 h-4 w-4"}),a[8]||(a[8]=u(" Añadir Campo ",-1))]),_:1},8,["disabled"])):w("",!0)])])):w("",!0)]))}}),Ha=Q(Wa,[["__scopeId","data-v-3b2237ae"]]),Qa={class:"space-y-6"},Xa=W({__name:"DynamicFormBuilder",props:{modelValue:{},disabled:{type:Boolean,default:!1},title:{default:"Constructor de Formulario"},description:{default:"Agrega los campos que aparecerán en el formulario"},showEditableOption:{type:Boolean,default:!1},showPerfilCandidaturaConfig:{type:Boolean,default:!1},cargos:{default:()=>[]},periodosElectorales:{default:()=>[]},showConvocatoriaConfig:{type:Boolean,default:!1},convocatorias:{default:()=>[]},context:{default:"convocatoria"}},emits:["update:modelValue"],setup(i,{expose:B,emit:$}){const x=i,s=$,n=O([...x.modelValue]),b=O(!1),l=O(null),a=O("create"),p=O(void 0),f=y=>{n.value.splice(y,1),A()},D=()=>n.value.length>0,V=O(!1);te(()=>x.modelValue,y=>{V.value||(V.value=!0,n.value=[...y],ae(()=>{V.value=!1}))},{immediate:!0});const A=()=>{V.value||s("update:modelValue",[...n.value])},k=y=>{y&&(y.preventDefault(),y.stopPropagation()),console.log("handleAddField called"),a.value="create",p.value=void 0,l.value=null,b.value=!0,S(!0)},v=(y,h)=>{h&&(h.preventDefault(),h.stopPropagation()),console.log("handleEditField called with index:",y);const I=n.value[y];I&&(p.value={...I},a.value="edit",l.value=y,b.value=!0,S(!1,y))},F=async(y,h)=>{h&&(h.preventDefault(),h.stopPropagation());const I=n.value[y];if(!I)return;confirm(`¿Estás seguro de eliminar el campo "${I.title||"Sin título"}"?

Esta acción no se puede deshacer.`)&&(f(y),console.log("Field deleted:",I.title),l.value===y?m():l.value!==null&&l.value>y&&(l.value=l.value-1))},P=(y,h)=>{h&&(h.preventDefault(),h.stopPropagation());const I={...y,id:`field_${Date.now()}`,title:`${y.title} (Copia)`};console.log("Duplicating field:",{original:y.title,duplicate:I.title}),n.value.push(I),A()},T=(y,h)=>{var re;h&&(h.preventDefault(),h.stopPropagation());const I={text:"Campo de texto",textarea:"Área de texto",select:"Lista desplegable",radio:"Opción múltiple",checkbox:"Casillas de verificación",file:"Subida de archivo",datepicker:"Selector de fecha",number:"Campo numérico",disclaimer:"Términos y condiciones",repeater:"Campo repetible",convocatoria:"Selector de convocatoria",perfil_candidatura:"Perfil de candidatura"};let Z=`📋 VISTA PREVIA DEL CAMPO

`;Z+=`Título: ${y.title||"Sin título"}
`,Z+=`Tipo: ${I[y.type]||y.type}
`,Z+=`Requerido: ${y.required?"Sí":"No"}
`,y.description&&(Z+=`Descripción: ${y.description}
`),y.options&&y.options.length>0&&(Z+=`Opciones: ${y.options.join(", ")}
`),(re=y.conditionalConfig)!=null&&re.enabled&&(Z+=`Campo condicional: Sí (${y.conditionalConfig.conditions.length} condiciones)
`),alert(Z)},c=y=>{console.log("Saving field:",{mode:a.value,field:y,editingIndex:l.value}),a.value==="edit"&&l.value!==null?(n.value[l.value]={...y},console.log("Field edited successfully")):(n.value.push({...y}),console.log("Field added successfully")),A(),m()},m=y=>{y&&(y.preventDefault(),y.stopPropagation()),console.log("handleCancelForm called"),b.value=!1,l.value=null,p.value=void 0,a.value="create"},S=async(y=!1,h)=>{try{await ae(),setTimeout(()=>{let I=null;y?I=document.querySelector('[data-form-type="new-field"]'):h!==void 0&&(I=document.querySelector('[data-form-type="edit-field"]')),I&&typeof I.scrollIntoView=="function"&&I.scrollIntoView({behavior:"smooth",block:"center"})},150)}catch(I){console.warn("Error en auto-scroll:",I)}};return B({canSave:D,fields:n}),(y,h)=>(r(),g("div",Qa,[b.value?(r(),E(_a,{key:0,mode:a.value,field:p.value,disabled:i.disabled,"show-editable-option":i.showEditableOption,"show-perfil-candidatura-config":i.showPerfilCandidaturaConfig,"show-convocatoria-config":i.showConvocatoriaConfig,cargos:i.cargos,"periodos-electorales":i.periodosElectorales,convocatorias:i.convocatorias,context:i.context,"available-fields":n.value,onSave:c,onCancel:m},null,8,["mode","field","disabled","show-editable-option","show-perfil-candidatura-config","show-convocatoria-config","cargos","periodos-electorales","convocatorias","context","available-fields"])):w("",!0),t(Ha,{fields:n.value,disabled:i.disabled,"can-add-fields":!i.disabled,"can-edit-fields":!i.disabled,"can-delete-fields":!i.disabled,title:i.title,description:i.description,onAddField:k,onEditField:v,onDeleteField:F,onDuplicateField:P,onPreviewField:T},null,8,["fields","disabled","can-add-fields","can-edit-fields","can-delete-fields","title","description"])]))}}),Co=Q(Xa,[["__scopeId","data-v-43b5c0d0"]]);export{Co as D,yo as L,lt as _};
