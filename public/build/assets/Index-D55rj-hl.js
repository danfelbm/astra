import{_ as D}from"./UserLayout.vue_vue_type_script_setup_true_lang-CDVicciV.js";import{d as E,r as C,p as O,c as B,i as _,F as h,g as m,b as v,j as p,e as t,f as e,w as l,h as u,k as M,t as V,U as R,m as r,q as G,n as S,s as L}from"./app-tiBs69RM.js";import{_ as X}from"./VotacionGrid.vue_vue_type_script_setup_true_lang-CqKu0d-8.js";import{l as J}from"./lodash-D5RT5fl-.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-D33lp28i.js";import{_ as g}from"./createLucideIcon-Hey_p6JF.js";import{_ as U}from"./index-DW7KobG0.js";import{_ as Q}from"./Label.vue_vue_type_script_setup_true_lang-B6ck6RT6.js";import{_ as W}from"./Switch.vue_vue_type_script_setup_true_lang-CTnOIFJU.js";import{a as j,b as H,c as N,d as b,_ as P}from"./SelectValue.vue_vue_type_script_setup_true_lang-DGLWaf-u.js";import{_ as Y,a as Z,b as ee,c as ae,d as te,e as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-fSFsRtyS.js";import{S as le}from"./search-D79nFv7e.js";import{F as oe}from"./filter-CoWC1gJC.js";import{X as q}from"./x-C1oZAMsO.js";import{V as re}from"./vote-jH-J5jim.js";import{L as ie}from"./useFlashMessages-DRCu0vyf.js";import{L as ne}from"./list-D6hcLldQ.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BZ_YHyG6.js";import"./index-DcAy0auO.js";import"./index-wiQkBC0D.js";import"./floating-ui.vue-BlPvhO2q.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-es55zWw5.js";import"./usePermissions-Ctp_Xcfz.js";import"./square-check-big-CvKITWFR.js";import"./user-ObviW1YQ.js";import"./file-text-Dz7hfeXj.js";import"./users-CBD5Kf4w.js";import"./folder-open-LcUD4NSh.js";import"./milestone-DjCxA6dJ.js";import"./map-pin-Das7z1pR.js";import"./index-CxefZb8E.js";import"./index-CbFbGNGH.js";import"./circle-alert-BGNKGfx_.js";import"./circle-x-D-bfOhZ3.js";import"./circle-check-big-CWasewnn.js";import"./clock-BxPVjM0C.js";import"./circle-play-DdymSw4d.js";import"./loader-circle-BNI9cyPC.js";import"./calendar-Bvxfv_Hl.js";import"./globe-D0AStCUL.js";import"./circle-check-C3k37LaA.js";import"./refresh-cw-Cbk7baxm.js";import"./eye-DhZpretq.js";import"./es-SykclP7y.js";import"./index-CEziXA0d.js";import"./VisuallyHidden-BnMY0kvt.js";import"./VisuallyHiddenInput-CWvO7J-z.js";import"./check-vF67rYPW.js";import"./shield-dd37PXYf.js";import"./chevron-right-fXrswjSG.js";import"./house-DsKY5S0H.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-G6BIo_UQ.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-179XjYTw.js";const de={class:"space-y-4"},ue={class:"flex flex-col sm:flex-row gap-3"},ce={class:"flex-1"},me={class:"relative"},fe={class:"flex gap-2"},ve={key:2,class:"flex items-center space-x-2"},pe={key:0,class:"flex flex-wrap gap-2"},_e={class:"space-y-4 py-4"},ge=E({__name:"VotacionFilters",props:{filters:{},categorias:{default:()=>[]},showCategoryFilter:{type:Boolean,default:!0},showStatusFilter:{type:Boolean,default:!0},showPastToggle:{type:Boolean,default:!0},showAdvancedFilters:{type:Boolean,default:!1}},emits:["update"],setup(n,{emit:k}){const $=n,y=k,s=C({...$.filters}),w=C(!1),x=Math.random().toString(36).substr(2,9);O(()=>$.filters,c=>{s.value={...c}},{deep:!0});const F=J.debounce(()=>{i()},300),i=()=>{y("update",{...s.value})},d=()=>{s.value={search:"",categoria_id:null,estado:null,mostrar_pasadas:!1,advanced_filters:null},i()},f=()=>{w.value=!1,i()},T=c=>{c==="advanced_filters"?s.value.advanced_filters=null:s.value[c]=null,i()},I=B(()=>s.value.search||s.value.categoria_id||s.value.estado||s.value.mostrar_pasadas||s.value.advanced_filters),z=B(()=>{let c=0;return s.value.advanced_filters&&(c+=Object.keys(s.value.advanced_filters).length),c}),A=B(()=>{const c=[];if(s.value.search&&c.push({key:"search",label:"Búsqueda",value:s.value.search}),s.value.categoria_id&&$.categorias){const a=$.categorias.find(o=>o.id===s.value.categoria_id);a&&c.push({key:"categoria_id",label:"Categoría",value:a.nombre})}return s.value.estado&&c.push({key:"estado",label:"Estado",value:s.value.estado}),c});return(c,a)=>(r(),_(h,null,[m("div",de,[m("div",ue,[m("div",ce,[m("div",me,[t(e(le),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),t(e(K),{modelValue:s.value.search,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.search=o),onInput:e(F),placeholder:"Buscar votaciones...",class:"pl-10"},null,8,["modelValue","onInput"])])]),m("div",fe,[n.showCategoryFilter&&n.categorias.length>0?(r(),v(e(P),{key:0,modelValue:s.value.categoria_id,"onUpdate:modelValue":[a[1]||(a[1]=o=>s.value.categoria_id=o),i]},{default:l(()=>[t(e(j),{class:"w-[180px]"},{default:l(()=>[t(e(H),{placeholder:"Todas las categorías"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(b),{value:null},{default:l(()=>[...a[7]||(a[7]=[u(" Todas las categorías ",-1)])]),_:1}),(r(!0),_(h,null,M(n.categorias,o=>(r(),v(e(b),{key:o.id,value:o.id},{default:l(()=>[u(V(o.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):p("",!0),n.showStatusFilter?(r(),v(e(P),{key:1,modelValue:s.value.estado,"onUpdate:modelValue":[a[2]||(a[2]=o=>s.value.estado=o),i]},{default:l(()=>[t(e(j),{class:"w-[150px]"},{default:l(()=>[t(e(H),{placeholder:"Todos los estados"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(b),{value:null},{default:l(()=>[...a[8]||(a[8]=[u(" Todos los estados ",-1)])]),_:1}),t(e(b),{value:"activa"},{default:l(()=>[...a[9]||(a[9]=[u("Activas",-1)])]),_:1}),t(e(b),{value:"pendiente"},{default:l(()=>[...a[10]||(a[10]=[u("Pendientes",-1)])]),_:1}),t(e(b),{value:"finalizada"},{default:l(()=>[...a[11]||(a[11]=[u("Finalizadas",-1)])]),_:1}),t(e(b),{value:"cancelada"},{default:l(()=>[...a[12]||(a[12]=[u("Canceladas",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])):p("",!0),n.showPastToggle?(r(),_("div",ve,[t(e(W),{id:"show-past-"+e(x),checked:s.value.mostrar_pasadas,"onUpdate:checked":[a[3]||(a[3]=o=>s.value.mostrar_pasadas=o),i]},null,8,["id","checked"]),t(e(Q),{for:"show-past-"+e(x),class:"cursor-pointer"},{default:l(()=>[...a[13]||(a[13]=[u(" Mostrar pasadas ",-1)])]),_:1},8,["for"])])):p("",!0),n.showAdvancedFilters?(r(),v(e(g),{key:3,onClick:a[4]||(a[4]=o=>w.value=!0),variant:"outline",size:"default"},{default:l(()=>[t(e(oe),{class:"h-4 w-4 mr-2"}),a[14]||(a[14]=u(" Filtros ",-1)),z.value>0?(r(),v(e(U),{key:0,class:"ml-2",variant:"secondary"},{default:l(()=>[u(V(z.value),1)]),_:1})):p("",!0)]),_:1})):p("",!0),I.value?(r(),v(e(g),{key:4,onClick:d,variant:"ghost",size:"icon"},{default:l(()=>[t(e(q),{class:"h-4 w-4"})]),_:1})):p("",!0)])]),A.value.length>0?(r(),_("div",pe,[(r(!0),_(h,null,M(A.value,o=>(r(),v(e(U),{key:o.key,variant:"secondary",class:"cursor-pointer hover:bg-secondary/80",onClick:xe=>T(o.key)},{default:l(()=>[u(V(o.label)+": "+V(o.value)+" ",1),t(e(q),{class:"h-3 w-3 ml-1"})]),_:2},1032,["onClick"]))),128))])):p("",!0)]),n.showAdvancedFilters?(r(),v(e(se),{key:0,open:w.value,"onUpdate:open":a[6]||(a[6]=o=>w.value=o)},{default:l(()=>[t(e(Y),{class:"max-w-2xl"},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(ee),null,{default:l(()=>[...a[15]||(a[15]=[u("Filtros avanzados",-1)])]),_:1}),t(e(ae),null,{default:l(()=>[...a[16]||(a[16]=[u(" Configura filtros detallados para encontrar las votaciones que buscas. ",-1)])]),_:1})]),_:1}),m("div",_e,[R(c.$slots,"advanced-filters",{filters:s.value})]),t(e(te),null,{default:l(()=>[t(e(g),{onClick:a[5]||(a[5]=o=>w.value=!1),variant:"outline"},{default:l(()=>[...a[17]||(a[17]=[u(" Cancelar ",-1)])]),_:1}),t(e(g),{onClick:f},{default:l(()=>[...a[18]||(a[18]=[u(" Aplicar filtros ",-1)])]),_:1})]),_:1})]),_:3})]),_:3},8,["open"])):p("",!0)],64))}}),ye={class:"space-y-6"},we={class:"flex items-center justify-between"},be={class:"text-2xl font-bold flex items-center gap-2"},ke={class:"flex gap-2"},$e={key:0,class:"flex justify-center mt-6"},he={class:"flex gap-1"},xa=E({__name:"Index",props:{votaciones:{},categorias:{},filters:{},mostrar_pasadas:{type:Boolean},filterFieldsConfig:{},canVote:{type:Boolean},canViewResults:{type:Boolean},canViewOwnVote:{type:Boolean}},setup(n){var F;const k=n,$=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Votaciones",href:"/miembro/votaciones"}],y=C("grid"),{route:s}=window,w=C({search:k.filters.search||"",categoria:((F=k.filters.categoria_id)==null?void 0:F.toString())||"",estado:k.filters.estado||"",mostrar_pasadas:k.mostrar_pasadas||!1}),x=i=>{const d={};i.search&&(d.search=i.search),i.categoria&&(d.categoria_id=i.categoria),i.estado&&(d.estado=i.estado),i.mostrar_pasadas&&(d.mostrar_pasadas=i.mostrar_pasadas),L.get(s("user.votaciones.index"),d,{preserveState:!0,preserveScroll:!0})};return(i,d)=>(r(),_(h,null,[t(e(G),{title:"Mis Votaciones"}),t(D,{breadcrumbs:$},{default:l(()=>[m("div",ye,[m("div",we,[m("div",null,[m("h1",be,[t(e(re),{class:"h-7 w-7"}),d[2]||(d[2]=u(" Mis Votaciones ",-1))]),d[3]||(d[3]=m("p",{class:"text-muted-foreground mt-1"}," Participa en las votaciones disponibles para ti ",-1))]),m("div",ke,[t(e(g),{variant:"outline",size:"sm",onClick:d[0]||(d[0]=f=>y.value="grid"),class:S({"bg-accent":y.value==="grid"})},{default:l(()=>[t(e(ie),{class:"h-4 w-4"})]),_:1},8,["class"]),t(e(g),{variant:"outline",size:"sm",onClick:d[1]||(d[1]=f=>y.value="list"),class:S({"bg-accent":y.value==="list"})},{default:l(()=>[t(e(ne),{class:"h-4 w-4"})]),_:1},8,["class"])])]),t(ge,{categorias:n.categorias,"initial-filters":w.value,onFiltersChanged:x},null,8,["categorias","initial-filters"]),t(X,{votaciones:n.votaciones.data,"view-mode":y.value,"can-vote":n.canVote,"can-view-results":n.canViewResults},null,8,["votaciones","view-mode","can-vote","can-view-results"]),n.votaciones.last_page>1?(r(),_("div",$e,[m("nav",he,[(r(!0),_(h,null,M(n.votaciones.links,f=>(r(),_(h,{key:f.label},[f.url?(r(),v(e(g),{key:0,variant:"outline",size:"sm",class:S({"bg-primary text-primary-foreground":f.active}),onClick:T=>e(L).get(f.url,{},{preserveState:!0,preserveScroll:!0}),innerHTML:f.label},null,8,["class","onClick","innerHTML"])):(r(),v(e(g),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:f.label},null,8,["innerHTML"]))],64))),128))])])):p("",!0)])]),_:1})],64))}});export{xa as default};
