import{d as G,r as b,b as m,w as e,e as t,g as r,f as a,q as Q,i as _,j as p,m as n,v as E,h as o,A as X,F as A,k as B,t as d,n as J,s as C}from"./app-D6dAgRLX.js";import{_ as S}from"./index-CBkpfaqL.js";import{_ as g}from"./createLucideIcon-BzNGXSjo.js";import{_ as F,a as O,b as R,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-BQw5IOx1.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-DuD0GFro.js";import{_ as N,a as T,b as j,c as z,d as v}from"./SelectValue.vue_vue_type_script_setup_true_lang-DG76JhhK.js";import{_ as Z,a as aa,b as V,c,d as ta,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-CKcB2qmD.js";import{_ as ea,a as sa,b as la,c as oa,d as ra,e as na,f as ia,g as ma}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CAkJsYjC.js";import{_ as da}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-DqMADX-m.js";import{_ as ua}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Cz-glReJ.js";import{t as x}from"./index-BK5ns8E0.js";import{P as fa}from"./plus-C49AY6-O.js";import{S as pa}from"./search-kppQIBB4.js";import{M as U}from"./message-square-BWTw75_k.js";import{S as ca}from"./smartphone-vRGTQaC5.js";import{C as _a}from"./circle-check-big-BgjyHL2n.js";import{C as va}from"./circle-x-BvvKgvTv.js";import{U as ga}from"./user-DIRuEBTX.js";import{E as xa}from"./eye-tHdVKr1C.js";import{C as ya}from"./copy-DmBp_8g7.js";import{S as $a}from"./square-pen-BGIWFMRR.js";import{T as ha}from"./trash-2-ewtx1fO8.js";import"./index-EoZ2-QmR.js";import"./VisuallyHidden--Lm4nRgr.js";import"./check-aWduzm_f.js";import"./floating-ui.vue--JDGMVtr.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CiRPcZgR.js";import"./x-C6pIeSd3.js";import"./DialogTrigger-D1kP4Vnw.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Dd_UFvqO.js";import"./index-DSEWetXw.js";import"./index-DLb5O1_B.js";import"./shield-Drtxwyw8.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DMUE4uG3.js";import"./chevron-right-qO-T1il-.js";import"./Label.vue_vue_type_script_setup_true_lang-Q5gYLrMD.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Da_i8rKq.js";import"./circle-alert-DekukOQx.js";import"./map-pin-AtpxFinO.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DxLvKcUN.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BwXO6dz4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-JPZaXIVQ.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DHedSr0Q.js";import"./tag-Ca5XM0he.js";import"./users-DXwPRikm.js";import"./target-Cpfg8aLR.js";import"./vote-DR8CIEv4.js";import"./folder-open-BcVEhVOT.js";import"./send-Dk0CLE13.js";import"./file-text-CJg7dKrK.js";import"./briefcase-BLKGTSev.js";import"./calendar-DAjXp43T.js";import"./megaphone-uRvYPiq8.js";import"./user-check-QQaxpol_.js";import"./clipboard-list-BSng4O3r.js";import"./mail-_uM3slzI.js";import"./external-link-Ci8ypRzt.js";import"./panel-left-BHu1UMWX.js";import"./index-CFZ09QFA.js";const Ca={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},wa={class:"flex justify-between items-center"},ka={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ba={class:"md:col-span-2"},Ea={class:"relative"},Sa={class:"font-medium"},Va={key:0,class:"text-sm text-muted-foreground"},Pa={class:"flex items-start gap-2"},Aa={class:"text-sm text-muted-foreground"},Ba={key:0,class:"text-sm"},Fa={key:1,class:"text-sm text-muted-foreground"},Da={class:"text-sm"},Na={key:0,class:"text-muted-foreground flex items-center gap-1"},Ta={class:"flex justify-end gap-1"},ja={class:"text-muted-foreground"},za={key:0,class:"flex justify-center"},Ua={class:"flex gap-1"},Kt=G({__name:"Index",props:{plantillas:{},filters:{},filterFieldsConfig:{},canCreate:{type:Boolean},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(u){const y=u,W=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/campanas"},{title:"Plantillas WhatsApp",href:"/admin/campanas/plantillas-whatsapp"}];y.filterFieldsConfig;const w=b(y.filters.search||""),$=b(y.filters.es_activa||"all"),h=b(y.filters.usa_formato||"all"),k=()=>{C.get("/admin/campanas/plantillas-whatsapp",{search:w.value,es_activa:$.value!=="all"?$.value:void 0,usa_formato:h.value!=="all"?h.value:void 0},{preserveState:!0,preserveScroll:!0})},q=i=>{C.post(`/admin/campanas/plantillas-whatsapp/${i}/duplicate`,{},{onSuccess:()=>{x.success("Plantilla duplicada exitosamente")},onError:()=>{x.error("Error al duplicar la plantilla")}})},L=i=>{C.delete(`/admin/campanas/plantillas-whatsapp/${i}`,{onSuccess:()=>{x.success("Plantilla eliminada exitosamente")},onError:()=>{x.error("Error al eliminar la plantilla")}})},M=i=>{C.post(`/admin/campanas/plantillas-whatsapp/${i.id}/preview`,{},{onSuccess:s=>{x.info(`Vista previa: ${s.preview}`)}})},I=i=>new Date(i).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),H=i=>(i==null?void 0:i.length)||0,K=(i,s=100)=>i.length<=s?i:i.substring(0,s)+"...";return(i,s)=>(n(),m(ua,{breadcrumbs:W},{default:e(()=>[t(a(Q),{title:"Plantillas de WhatsApp"}),r("div",Ca,[r("div",wa,[s[4]||(s[4]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Plantillas de WhatsApp"),r("p",{class:"text-muted-foreground mt-1"}," Gestiona las plantillas de mensajes de WhatsApp para tus campañas ")],-1)),u.canCreate?(n(),m(a(E),{key:0,href:"/admin/campanas/plantillas-whatsapp/create",class:"inline-flex"},{default:e(()=>[t(a(g),null,{default:e(()=>[t(a(fa),{class:"w-4 h-4 mr-2"}),s[3]||(s[3]=o(" Nueva Plantilla ",-1))]),_:1})]),_:1})):p("",!0)]),t(a(F),null,{default:e(()=>[t(a(O),null,{default:e(()=>[t(a(R),null,{default:e(()=>[...s[5]||(s[5]=[o("Filtros",-1)])]),_:1})]),_:1}),t(a(D),null,{default:e(()=>[r("div",ka,[r("div",ba,[r("div",Ea,[t(a(pa),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t(a(Y),{modelValue:w.value,"onUpdate:modelValue":s[0]||(s[0]=l=>w.value=l),placeholder:"Buscar por nombre o contenido...",class:"pl-10",onKeyup:X(k,["enter"])},null,8,["modelValue"])])]),t(a(N),{modelValue:$.value,"onUpdate:modelValue":[s[1]||(s[1]=l=>$.value=l),k]},{default:e(()=>[t(a(T),null,{default:e(()=>[t(a(j),{placeholder:"Estado"})]),_:1}),t(a(z),null,{default:e(()=>[t(a(v),{value:"all"},{default:e(()=>[...s[6]||(s[6]=[o("Todas",-1)])]),_:1}),t(a(v),{value:"1"},{default:e(()=>[...s[7]||(s[7]=[o("Activas",-1)])]),_:1}),t(a(v),{value:"0"},{default:e(()=>[...s[8]||(s[8]=[o("Inactivas",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(a(N),{modelValue:h.value,"onUpdate:modelValue":[s[2]||(s[2]=l=>h.value=l),k]},{default:e(()=>[t(a(T),null,{default:e(()=>[t(a(j),{placeholder:"Formato"})]),_:1}),t(a(z),null,{default:e(()=>[t(a(v),{value:"all"},{default:e(()=>[...s[9]||(s[9]=[o("Todos",-1)])]),_:1}),t(a(v),{value:"1"},{default:e(()=>[...s[10]||(s[10]=[o("Con formato",-1)])]),_:1}),t(a(v),{value:"0"},{default:e(()=>[...s[11]||(s[11]=[o("Sin formato",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(a(F),null,{default:e(()=>[t(a(D),{class:"p-0"},{default:e(()=>[t(a(Z),null,{default:e(()=>[t(a(aa),null,{default:e(()=>[t(a(V),null,{default:e(()=>[t(a(c),null,{default:e(()=>[...s[12]||(s[12]=[o("Nombre",-1)])]),_:1}),t(a(c),null,{default:e(()=>[...s[13]||(s[13]=[o("Contenido",-1)])]),_:1}),t(a(c),null,{default:e(()=>[...s[14]||(s[14]=[o("Variables",-1)])]),_:1}),t(a(c),null,{default:e(()=>[...s[15]||(s[15]=[o("Formato",-1)])]),_:1}),t(a(c),null,{default:e(()=>[...s[16]||(s[16]=[o("Campañas",-1)])]),_:1}),t(a(c),null,{default:e(()=>[...s[17]||(s[17]=[o("Estado",-1)])]),_:1}),t(a(c),null,{default:e(()=>[...s[18]||(s[18]=[o("Creado",-1)])]),_:1}),t(a(c),{class:"text-right"},{default:e(()=>[...s[19]||(s[19]=[o("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(a(ta),null,{default:e(()=>[(n(!0),_(A,null,B(u.plantillas.data,l=>(n(),m(a(V),{key:l.id},{default:e(()=>[t(a(f),{class:"font-medium"},{default:e(()=>[r("div",null,[r("div",Sa,d(l.nombre),1),l.descripcion?(n(),_("div",Va,d(l.descripcion),1)):p("",!0)])]),_:2},1024),t(a(f),null,{default:e(()=>[r("div",Pa,[t(a(U),{class:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),r("span",Aa,d(K(l.contenido)),1)])]),_:2},1024),t(a(f),null,{default:e(()=>[t(a(S),{variant:"secondary"},{default:e(()=>[o(d(H(l.variables_usadas))+" variables ",1)]),_:2},1024)]),_:2},1024),t(a(f),null,{default:e(()=>[t(a(S),{variant:l.usa_formato?"default":"outline"},{default:e(()=>[t(a(ca),{class:"w-3 h-3 mr-1"}),o(" "+d(l.usa_formato?"Con formato":"Sin formato"),1)]),_:2},1032,["variant"])]),_:2},1024),t(a(f),null,{default:e(()=>[l.campanas_count&&l.campanas_count>0?(n(),_("span",Ba,d(l.campanas_count)+" campañas ",1)):(n(),_("span",Fa," Sin uso "))]),_:2},1024),t(a(f),null,{default:e(()=>[t(a(S),{variant:l.es_activa?"default":"secondary"},{default:e(()=>[l.es_activa?(n(),m(a(_a),{key:0,class:"w-3 h-3 mr-1"})):(n(),m(a(va),{key:1,class:"w-3 h-3 mr-1"})),o(" "+d(l.es_activa?"Activa":"Inactiva"),1)]),_:2},1032,["variant"])]),_:2},1024),t(a(f),null,{default:e(()=>[r("div",Da,[r("div",null,d(I(l.created_at)),1),l.creator?(n(),_("div",Na,[t(a(ga),{class:"w-3 h-3"}),o(" "+d(l.creator.nombre),1)])):p("",!0)])]),_:2},1024),t(a(f),{class:"text-right"},{default:e(()=>[r("div",Ta,[t(a(g),{variant:"ghost",size:"sm",onClick:P=>M(l),title:"Vista previa"},{default:e(()=>[t(a(xa),{class:"w-4 h-4"})]),_:1},8,["onClick"]),u.canEdit?(n(),m(a(g),{key:0,variant:"ghost",size:"sm",onClick:P=>q(l.id),title:"Duplicar"},{default:e(()=>[t(a(ya),{class:"w-4 h-4"})]),_:1},8,["onClick"])):p("",!0),u.canEdit?(n(),m(a(E),{key:1,href:`/admin/campanas/plantillas-whatsapp/${l.id}/edit`},{default:e(()=>[t(a(g),{variant:"ghost",size:"sm",title:"Editar"},{default:e(()=>[t(a($a),{class:"w-4 h-4"})]),_:1})]),_:1},8,["href"])):p("",!0),u.canDelete&&(!l.campanas_count||l.campanas_count===0)?(n(),m(a(ea),{key:2},{default:e(()=>[t(a(da),{asChild:""},{default:e(()=>[t(a(g),{variant:"ghost",size:"sm",title:"Eliminar"},{default:e(()=>[t(a(ha),{class:"w-4 h-4 text-destructive"})]),_:1})]),_:1}),t(a(sa),null,{default:e(()=>[t(a(la),null,{default:e(()=>[t(a(oa),null,{default:e(()=>[...s[20]||(s[20]=[o("¿Eliminar plantilla?",-1)])]),_:1}),t(a(ra),null,{default:e(()=>[o(' Esta acción no se puede deshacer. La plantilla "'+d(l.nombre)+'" será eliminada permanentemente. ',1)]),_:2},1024)]),_:2},1024),t(a(na),null,{default:e(()=>[t(a(ia),null,{default:e(()=>[...s[21]||(s[21]=[o("Cancelar",-1)])]),_:1}),t(a(ma),{onClick:P=>L(l.id)},{default:e(()=>[...s[22]||(s[22]=[o(" Eliminar ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):p("",!0)])]),_:2},1024)]),_:2},1024))),128)),u.plantillas.data.length===0?(n(),m(a(V),{key:0},{default:e(()=>[t(a(f),{colspan:"8",class:"text-center py-8"},{default:e(()=>[r("div",ja,[t(a(U),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),s[23]||(s[23]=r("p",null,"No se encontraron plantillas de WhatsApp",-1))])]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),u.plantillas.last_page>1?(n(),_("div",za,[r("nav",Ua,[(n(!0),_(A,null,B(u.plantillas.links,l=>(n(),m(a(E),{key:l.label,href:l.url||"#",class:J(["px-3 py-2 text-sm rounded-md",l.active?"bg-primary text-primary-foreground":"bg-background hover:bg-muted",!l.url&&"opacity-50 cursor-not-allowed"]),innerHTML:l.label},null,8,["href","class","innerHTML"]))),128))])])):p("",!0)])]),_:1}))}});export{Kt as default};
