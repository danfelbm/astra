import{_ as D}from"./index-C9GdhwZn.js";import{_ as y}from"./createLucideIcon-BG919Rtc.js";import{a as B,b as N,c as S,_ as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-BZnDIsbq.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-CuuNt4hI.js";import{_ as T,a as G,b,c as f,d as Q,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-Ywuf4scH.js";import{a as R,_ as H}from"./index-BIWxKYvV.js";import{_ as J}from"./AlertTitle.vue_vue_type_script_setup_true_lang-CM657ba9.js";import{_}from"./Skeleton.vue_vue_type_script_setup_true_lang-KCVEry-H.js";import{_ as K}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-BjBGj_ny.js";import{d as O,r as g,c as W,o as X,i as u,e as d,f as a,g as o,u as t,p as Y,w as e,h as l,b as C,j as $,t as c,F as Z,k as ss,P as ts,a as as}from"./app-CNsNbJaU.js";import{u as es}from"./useGeographicFilters-DddVIjYq.js";import{A as z,C as os}from"./calendar-days-BoQkbKbu.js";import{A as ls}from"./arrow-left-CB_1v_Qf.js";import{I as is}from"./info-D-dDgRQT.js";import{S as rs}from"./search-BqPjSriO.js";import{C as U}from"./circle-check-big-Co5bwIN2.js";import{U as ns}from"./users-DVfvVv5k.js";import{B as ds}from"./briefcase-DRGEhwkF.js";import{M as cs}from"./map-pin-BYO7IqQm.js";import{C as ps}from"./chevron-left-W-broks7.js";import{C as us}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DxRb9IyH.js";import"./index-DokoqITK.js";import"./Input.vue_vue_type_script_setup_true_lang-CIE9aHh6.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-C5NUUFrZ.js";import"./index-D5O-6KMg.js";import"./floating-ui.vue-ClLQHvu2.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CJLkPl9b.js";import"./VisuallyHidden-L6ik1lx4.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DNb18nEz.js";import"./check-CFzf2JYc.js";import"./nullish-CHIgUVhi.js";import"./x-CH24zYz2.js";import"./DialogTrigger-B9d59FrY.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-czZwQFd3.js";import"./es-nEe0wmoQ.js";import"./calendar-A9Ja9lbB.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-DvEOWQpw.js";import"./loader-circle-e3mVLjL2.js";import"./trash-2-Dowh2UiV.js";import"./plus-DV1H89bY.js";import"./filter-Bul89KM9.js";import"./history-BYwQLNz-.js";import"./save-Dq9rD0bd.js";import"./circle-alert-DyX8jyra.js";const ms={class:"min-h-screen bg-gray-50"},fs={class:"bg-white shadow-sm border-b"},_s={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},gs={class:"flex items-start justify-between"},vs={class:"flex flex-col gap-4"},xs={class:"flex items-center gap-3"},ws={href:"/"},hs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ys={class:"flex items-center justify-between"},bs={key:0,class:"space-y-4"},Cs={key:1,class:"overflow-x-auto"},$s={class:"flex items-center gap-2"},ks={class:"max-w-[200px]"},Fs={class:"font-medium truncate"},Ps={key:0,class:"flex items-center gap-1"},As={class:"text-sm"},Bs={key:1,class:"text-gray-400 text-sm"},Ns={key:0,class:"flex items-center gap-1"},Ss={class:"text-sm"},Ls={key:1,class:"text-gray-400 text-sm"},js={class:"flex items-center gap-1"},zs={class:"text-sm truncate max-w-[200px]"},Us={class:"flex flex-col items-center gap-2 text-muted-foreground"},Vs={key:2,class:"mt-6 flex items-center justify-between"},qs={class:"text-sm text-muted-foreground"},Ms={class:"flex gap-2"},Es={class:"flex items-center gap-2"},Is={class:"text-sm"},Ds={class:"mt-6 text-center text-sm text-gray-500"},Ts={class:"mt-1"},jt=O({__name:"PostulacionesAceptadas",props:{filterFieldsConfig:{}},setup(V){const q=V,h=g([]),r=g({current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}),v=g(!1),k=g({}),F=g(q.filterFieldsConfig||[]),P=es({prefix:"users.",endpoints:{territorios:`${window.location.origin}/api/public/geographic/territorios`,departamentos:`${window.location.origin}/api/public/geographic/departamentos`,municipios:`${window.location.origin}/api/public/geographic/municipios`,localidades:`${window.location.origin}/api/public/geographic/localidades`}}),M=W(()=>({fields:[...F.value||[],...P.generateFilterFields()],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, cédula o convocatoria...",quickSearchFields:["users.name","users.documento_identidad","convocatorias.nombre"],maxNestingLevel:1,allowSaveFilters:!1})),E=i=>{const s=[];return i.localidad&&s.push(i.localidad),i.municipio&&s.push(i.municipio),i.departamento&&s.push(i.departamento),i.territorio&&s.push(i.territorio),s.length>0?s.join(", "):"No especificada"},x=async(i={},s=1)=>{var n;v.value=!0;try{const w={...i,page:s},p=await as.get("/public-api/postulaciones-aceptadas",{params:w});h.value=p.data.postulaciones.data,r.value={current_page:p.data.postulaciones.current_page,last_page:p.data.postulaciones.last_page,per_page:p.data.postulaciones.per_page,total:p.data.postulaciones.total,from:p.data.postulaciones.from,to:p.data.postulaciones.to},p.data.filterFieldsConfig&&(F.value=p.data.filterFieldsConfig)}catch(w){console.error("Error cargando postulaciones:",w),((n=w.response)==null?void 0:n.status)===404&&(window.location.href="/")}finally{v.value=!1}},I=i=>{k.value=i,x(i,1)},A=i=>{x(k.value,i)};return X(async()=>{await P.initialize(),x()}),(i,s)=>(d(),u("div",null,[a(t(Y),{title:"Postulaciones Aceptadas"}),o("div",ms,[o("div",fs,[o("div",_s,[o("div",gs,[o("div",vs,[o("div",xs,[a(t(z),{class:"h-8 w-8 text-green-600"}),s[2]||(s[2]=o("h1",{class:"text-2xl font-bold text-gray-900"}," Postulaciones Aceptadas ",-1))]),s[3]||(s[3]=o("p",{class:"text-gray-600"}," Consulta pública de postulaciones aprobadas a convocatorias ",-1))]),o("a",ws,[a(t(y),{variant:"outline",size:"sm"},{default:e(()=>[a(t(ls),{class:"h-4 w-4 mr-2"}),s[4]||(s[4]=l(" Volver al inicio ",-1))]),_:1})])])])]),o("div",hs,[a(t(H),{class:"mb-6"},{default:e(()=>[a(t(is),{class:"h-4 w-4"}),a(t(J),null,{default:e(()=>[...s[5]||(s[5]=[l("Información Pública",-1)])]),_:1}),a(t(R),null,{default:e(()=>[...s[6]||(s[6]=[l(" Esta página muestra únicamente las postulaciones que han sido aceptadas. La información mostrada es de carácter público y cumple con las políticas de privacidad. ",-1)])]),_:1})]),_:1}),a(t(L),{class:"mb-6"},{default:e(()=>[a(t(B),null,{default:e(()=>[a(t(N),null,{default:e(()=>[a(t(rs),{class:"inline-block mr-2 h-5 w-5"}),s[7]||(s[7]=l(" Filtros de Búsqueda ",-1))]),_:1}),a(t(j),null,{default:e(()=>[...s[8]||(s[8]=[l(" Utiliza los filtros para encontrar postulaciones específicas ",-1)])]),_:1})]),_:1}),a(t(S),null,{default:e(()=>[a(K,{config:M.value,onApply:I,onClear:x},null,8,["config"])]),_:1})]),_:1}),a(t(L),null,{default:e(()=>[a(t(B),null,{default:e(()=>[o("div",ys,[o("div",null,[a(t(N),null,{default:e(()=>[a(t(U),{class:"inline-block mr-2 h-5 w-5 text-green-600"}),s[9]||(s[9]=l(" Listado de Postulaciones Aceptadas ",-1))]),_:1}),v.value?$("",!0):(d(),C(t(j),{key:0},{default:e(()=>[l(c(r.value.total)+" "+c(r.value.total===1?"postulación encontrada":"postulaciones encontradas"),1)]),_:1}))]),a(t(D),{variant:"outline",class:"bg-green-50 text-green-700 border-green-300"},{default:e(()=>[a(t(U),{class:"h-3 w-3 mr-1"}),s[10]||(s[10]=l(" Todas Aceptadas ",-1))]),_:1})])]),_:1}),a(t(S),null,{default:e(()=>[v.value?(d(),u("div",bs,[a(t(_),{class:"h-12 w-full"}),a(t(_),{class:"h-12 w-full"}),a(t(_),{class:"h-12 w-full"}),a(t(_),{class:"h-12 w-full"}),a(t(_),{class:"h-12 w-full"})])):(d(),u("div",Cs,[a(t(T),null,{default:e(()=>[a(t(G),null,{default:e(()=>[a(t(b),null,{default:e(()=>[a(t(f),null,{default:e(()=>[...s[11]||(s[11]=[l("Postulante",-1)])]),_:1}),a(t(f),null,{default:e(()=>[...s[12]||(s[12]=[l("Convocatoria",-1)])]),_:1}),a(t(f),null,{default:e(()=>[...s[13]||(s[13]=[l("Cargo",-1)])]),_:1}),a(t(f),null,{default:e(()=>[...s[14]||(s[14]=[l("Periodo",-1)])]),_:1}),a(t(f),null,{default:e(()=>[...s[15]||(s[15]=[l("Ubicación",-1)])]),_:1})]),_:1})]),_:1}),a(t(Q),null,{default:e(()=>[(d(!0),u(Z,null,ss(h.value,n=>(d(),C(t(b),{key:n.id},{default:e(()=>[a(t(m),{class:"font-medium"},{default:e(()=>[o("div",$s,[a(t(ns),{class:"h-4 w-4 text-gray-400"}),l(" "+c(n.postulante.nombre),1)])]),_:2},1024),a(t(m),null,{default:e(()=>[o("div",ks,[o("p",Fs,c(n.convocatoria.nombre),1)])]),_:2},1024),a(t(m),null,{default:e(()=>[n.convocatoria.cargo?(d(),u("div",Ps,[a(t(ds),{class:"h-4 w-4 text-gray-400"}),o("span",As,c(n.convocatoria.cargo),1)])):(d(),u("span",Bs,"No especificado"))]),_:2},1024),a(t(m),null,{default:e(()=>[n.convocatoria.periodo?(d(),u("div",Ns,[a(t(os),{class:"h-4 w-4 text-gray-400"}),o("span",Ss,c(n.convocatoria.periodo),1)])):(d(),u("span",Ls,"No especificado"))]),_:2},1024),a(t(m),null,{default:e(()=>[o("div",js,[a(t(cs),{class:"h-4 w-4 text-gray-400 flex-shrink-0"}),o("span",zs,c(E(n.ubicacion)),1)])]),_:2},1024)]),_:2},1024))),128)),h.value.length===0?(d(),C(t(b),{key:0},{default:e(()=>[a(t(m),{colspan:5,class:"text-center py-8"},{default:e(()=>[o("div",Us,[a(t(z),{class:"h-8 w-8"}),s[16]||(s[16]=o("p",null,"No se encontraron postulaciones con los filtros aplicados",-1))])]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})])),r.value.last_page>1?(d(),u("div",Vs,[o("p",qs," Mostrando "+c(r.value.from||0)+" a "+c(r.value.to||0)+" de "+c(r.value.total)+" postulaciones ",1),o("div",Ms,[a(t(y),{variant:"outline",size:"sm",disabled:r.value.current_page===1,onClick:s[0]||(s[0]=n=>A(r.value.current_page-1))},{default:e(()=>[a(t(ps),{class:"h-4 w-4"}),s[17]||(s[17]=l(" Anterior ",-1))]),_:1},8,["disabled"]),o("div",Es,[o("span",Is," Página "+c(r.value.current_page)+" de "+c(r.value.last_page),1)]),a(t(y),{variant:"outline",size:"sm",disabled:r.value.current_page===r.value.last_page,onClick:s[1]||(s[1]=n=>A(r.value.current_page+1))},{default:e(()=>[s[18]||(s[18]=l(" Siguiente ",-1)),a(t(us),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):$("",!0)]),_:1})]),_:1}),o("div",Ds,[s[22]||(s[22]=o("p",null,"La información mostrada es de carácter público y cumple con las políticas de privacidad.",-1)),o("p",Ts,[s[20]||(s[20]=l(" Para más información sobre el proceso de postulación, ",-1)),a(t(ts),{href:"/login",class:"text-blue-600 hover:underline"},{default:e(()=>[...s[19]||(s[19]=[l("inicie sesión",-1)])]),_:1}),s[21]||(s[21]=l(". ",-1))])])])])]))}});export{jt as default};
