import{d as Re,r as W,C as Te,c as j,o as Je,a as Ke,b as $,e as n,w as t,f as a,u as e,g as i,h as l,i as p,j as g,n as x,t as f,F as M,k as F,l as Be,m as X,p as We,W as Qe}from"./app-Dt2sukkq.js";import{_ as I}from"./createLucideIcon-ADYiFz1p.js";import{_ as E,a as D,b as A,c as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3D16Ztn.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-CpG721w4.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-B3JXaiF3.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-DCZhrf2e.js";import{_ as H}from"./Textarea.vue_vue_type_script_setup_true_lang-CU9dUjfW.js";import{_ as z,a as k,b as w,c as U,d as v}from"./SelectValue.vue_vue_type_script_setup_true_lang-XTf0O-lR.js";import{_ as C}from"./Switch.vue_vue_type_script_setup_true_lang-C5vqZ6z2.js";import{_ as Le,a as T}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-BTeYrLXJ.js";import{_ as R}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-DoMOPVDj.js";import{_ as Z,a as O}from"./index-Dgfn2Mhg.js";import{_ as J}from"./AlertTitle.vue_vue_type_script_setup_true_lang-DYz_7a3-.js";import{_ as Xe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BAX2dDyG.js";import{_ as Ye,a as he,b as eo,c as oo,d as ao,e as so}from"./DialogTitle.vue_vue_type_script_setup_true_lang-V01rVzxA.js";import{_ as to,a as lo,b as Fe,c as Ie}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BouWFRCo.js";import{D as io}from"./DynamicFormBuilder-Mj-E3HvP.js";import{I as K}from"./info-U4f4JV21.js";import{L as ro}from"./loader-circle-A6_XgNGB.js";import{S as Ge}from"./save-CPLxPeAL.js";import{A as no}from"./arrow-left-CcnTTf_x.js";import{V as Ne}from"./video-Z85qiiT5.js";import{S as uo}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Dk5ovgNn.js";import{C as mo}from"./camera-BI3yGZYs.js";import{U as Pe}from"./users-ARKz5o5z.js";import{M as po}from"./mic-C6yOj3Mi.js";import{V as fo}from"./vote-D-ho2Upj.js";import{P as _o}from"./plus-C-zod1mM.js";import{X as co}from"./x-BpcUsJXn.js";import"./index-YHYyGAco.js";import"./VisuallyHidden-H3fpmsLx.js";import"./check-DzU-qwfx.js";import"./floating-ui.vue-DhUnkJfc.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHiddenInput-CTh2PJwg.js";import"./RovingFocusItem-BUHtT0jY.js";import"./utils-CveDOlSQ.js";import"./circle-C6O6G82s.js";import"./index-DYtBqwXi.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-TmplCPgM.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BlnKZeFr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-CkT1ue1I.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Ch_KWbnG.js";import"./chevrons-up-down-CLsbi7q1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BcP5joWp.js";import"./tag-euMStffd.js";import"./target-BlHWusLl.js";import"./shield-Cyievtug.js";import"./folder-open-BwpEZUDw.js";import"./send-D6GePUDU.js";import"./file-text-CrhgvIVS.js";import"./briefcase-CdnBkwVO.js";import"./calendar-CJYt0g6k.js";import"./megaphone-BWKT3hAA.js";import"./user-check-Cjdi1Rn1.js";import"./clipboard-list-DeVxPgd5.js";import"./mail-Cjqn3QRK.js";import"./message-square-CtTij58U.js";import"./external-link-GRGCmSzE.js";import"./panel-left-CvMlf3oX.js";import"./index-DZUQ23bj.js";import"./index-C5GM-A1h.js";import"./index-CTkeagVR.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-C9CiF85Y.js";import"./trash-2-Dt0_aFzc.js";import"./grip-vertical-Dgx0nHLN.js";import"./circle-alert-Bny28mZr.js";import"./eye-DWAsRPjV.js";import"./git-branch-GA7-rWln.js";import"./square-pen-CgZnJT5s.js";import"./copy-YTl1p__t.js";import"./index-C_zthh-d.js";import"./user-Ca0ja34E.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CwNj20AO.js";import"./map-pin-D1rtVCPc.js";const bo={class:"space-y-2"},go={key:0,class:"text-sm text-red-500"},vo={class:"space-y-2"},xo={key:0,class:"text-sm text-red-500"},Vo={class:"grid grid-cols-2 gap-4"},yo={class:"space-y-2"},zo={key:0,class:"text-sm text-red-500"},ko={class:"space-y-2"},wo={class:"grid grid-cols-2 gap-4"},Uo={class:"space-y-2"},$o={key:0,class:"text-sm text-red-500"},So={class:"space-y-2"},Co={key:0,class:"text-sm text-red-500"},jo={key:1,class:"text-sm text-red-500"},Mo={class:"space-y-4"},Eo={class:"flex items-center space-x-2"},Do={key:0,class:"pl-7 space-y-2"},Ao=Re({__name:"CreateVotacionModal",props:{open:{type:Boolean}},emits:["close","created"],setup(Y,{emit:m}){const B=m,N=W("basic"),G=W([]),s=Te({titulo:"",descripcion:"",categoria_id:null,formulario_config:[],fecha_inicio:"",fecha_fin:"",estado:"activa",resultados_publicos:!1,fecha_publicacion_resultados:"",timezone:"America/Bogota"}),S=j(()=>{if(!s.fecha_fin||!s.fecha_inicio)return"";const V=new Date(s.fecha_fin),r=new Date(s.fecha_inicio);return V<=r?"La fecha de fin debe ser posterior a la fecha de inicio":""});Je(async()=>{try{const V=await Ke.get("/api/categorias-votacion");G.value=V.data}catch(V){console.error("Error cargando categorías:",V)}});const P=()=>{s.processing||B("close")},Q=()=>{S.value||s.post(route("admin.votaciones.store.quick"),{preserveScroll:!0,onSuccess:V=>{var b;const r=(b=V.props.flash)==null?void 0:b.votacion_id;r&&B("created",r),s.reset()},onError:()=>{}})};return(V,r)=>(n(),$(e(so),{open:V.open,"onUpdate:open":P},{default:t(()=>[a(e(Ye),{class:"max-w-3xl max-h-[90vh] overflow-y-auto"},{default:t(()=>[a(e(he),null,{default:t(()=>[a(e(eo),null,{default:t(()=>[...r[10]||(r[10]=[l("Crear Nueva Votación",-1)])]),_:1}),a(e(oo),null,{default:t(()=>[...r[11]||(r[11]=[l(" Cree una votación rápida que se asociará automáticamente a la asamblea actual. ",-1)])]),_:1})]),_:1}),i("form",{onSubmit:Be(Q,["prevent"]),class:"space-y-6"},[a(e(to),{modelValue:N.value,"onUpdate:modelValue":r[9]||(r[9]=b=>N.value=b),class:"w-full"},{default:t(()=>[a(e(lo),{class:"grid w-full grid-cols-2"},{default:t(()=>[a(e(Fe),{value:"basic"},{default:t(()=>[...r[12]||(r[12]=[l("Datos Básicos",-1)])]),_:1}),a(e(Fe),{value:"form"},{default:t(()=>[...r[13]||(r[13]=[l("Formulario",-1)])]),_:1})]),_:1}),a(e(Ie),{value:"basic",class:"space-y-4 mt-4"},{default:t(()=>[i("div",bo,[a(e(u),{for:"titulo",required:""},{default:t(()=>[...r[14]||(r[14]=[l("Título de la Votación",-1)])]),_:1}),a(e(y),{id:"titulo",modelValue:e(s).titulo,"onUpdate:modelValue":r[0]||(r[0]=b=>e(s).titulo=b),placeholder:"Ej: Elección de Junta Directiva 2024",class:x({"border-red-500":e(s).errors.titulo})},null,8,["modelValue","class"]),e(s).errors.titulo?(n(),p("span",go,f(e(s).errors.titulo),1)):g("",!0)]),i("div",vo,[a(e(u),{for:"descripcion"},{default:t(()=>[...r[15]||(r[15]=[l("Descripción",-1)])]),_:1}),a(e(H),{id:"descripcion",modelValue:e(s).descripcion,"onUpdate:modelValue":r[1]||(r[1]=b=>e(s).descripcion=b),placeholder:"Describe brevemente el propósito de esta votación",rows:"3",class:x({"border-red-500":e(s).errors.descripcion})},null,8,["modelValue","class"]),e(s).errors.descripcion?(n(),p("span",xo,f(e(s).errors.descripcion),1)):g("",!0)]),i("div",Vo,[i("div",yo,[a(e(u),{for:"categoria"},{default:t(()=>[...r[16]||(r[16]=[l("Categoría",-1)])]),_:1}),a(e(z),{modelValue:e(s).categoria_id,"onUpdate:modelValue":r[2]||(r[2]=b=>e(s).categoria_id=b)},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{placeholder:"Seleccionar categoría"})]),_:1}),a(e(U),null,{default:t(()=>[(n(!0),p(M,null,F(G.value,b=>(n(),$(e(v),{key:b.id,value:b.id.toString()},{default:t(()=>[l(f(b.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(s).errors.categoria_id?(n(),p("span",zo,f(e(s).errors.categoria_id),1)):g("",!0)]),i("div",ko,[a(e(u),{for:"timezone"},{default:t(()=>[...r[17]||(r[17]=[l("Zona Horaria",-1)])]),_:1}),a(e(z),{modelValue:e(s).timezone,"onUpdate:modelValue":r[3]||(r[3]=b=>e(s).timezone=b)},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{placeholder:"Seleccionar zona horaria"})]),_:1}),a(e(U),null,{default:t(()=>[a(e(v),{value:"America/Bogota"},{default:t(()=>[...r[18]||(r[18]=[l("Colombia (GMT-5)",-1)])]),_:1}),a(e(v),{value:"America/Mexico_City"},{default:t(()=>[...r[19]||(r[19]=[l("México (GMT-6)",-1)])]),_:1}),a(e(v),{value:"America/Buenos_Aires"},{default:t(()=>[...r[20]||(r[20]=[l("Argentina (GMT-3)",-1)])]),_:1}),a(e(v),{value:"America/Lima"},{default:t(()=>[...r[21]||(r[21]=[l("Perú (GMT-5)",-1)])]),_:1}),a(e(v),{value:"America/Santiago"},{default:t(()=>[...r[22]||(r[22]=[l("Chile (GMT-3)",-1)])]),_:1}),a(e(v),{value:"America/Caracas"},{default:t(()=>[...r[23]||(r[23]=[l("Venezuela (GMT-4)",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("div",wo,[i("div",Uo,[a(e(u),{for:"fecha_inicio",required:""},{default:t(()=>[...r[24]||(r[24]=[l("Fecha y Hora de Inicio",-1)])]),_:1}),a(e(R),{modelValue:e(s).fecha_inicio,"onUpdate:modelValue":r[4]||(r[4]=b=>e(s).fecha_inicio=b),placeholder:"Seleccionar fecha y hora",class:x({"border-red-500":e(s).errors.fecha_inicio})},null,8,["modelValue","class"]),e(s).errors.fecha_inicio?(n(),p("span",$o,f(e(s).errors.fecha_inicio),1)):g("",!0)]),i("div",So,[a(e(u),{for:"fecha_fin",required:""},{default:t(()=>[...r[25]||(r[25]=[l("Fecha y Hora de Fin",-1)])]),_:1}),a(e(R),{modelValue:e(s).fecha_fin,"onUpdate:modelValue":r[5]||(r[5]=b=>e(s).fecha_fin=b),placeholder:"Seleccionar fecha y hora",class:x({"border-red-500":e(s).errors.fecha_fin||S.value})},null,8,["modelValue","class"]),S.value?(n(),p("span",Co,f(S.value),1)):e(s).errors.fecha_fin?(n(),p("span",jo,f(e(s).errors.fecha_fin),1)):g("",!0)])]),i("div",Mo,[i("div",Eo,[a(e(C),{id:"resultados_publicos",modelValue:e(s).resultados_publicos,"onUpdate:modelValue":r[6]||(r[6]=b=>e(s).resultados_publicos=b)},null,8,["modelValue"]),a(e(u),{for:"resultados_publicos",class:"cursor-pointer"},{default:t(()=>[...r[26]||(r[26]=[l(" Resultados públicos al finalizar ",-1)])]),_:1})]),e(s).resultados_publicos?(n(),p("div",Do,[a(e(u),{for:"fecha_publicacion"},{default:t(()=>[...r[27]||(r[27]=[l(" Fecha de publicación de resultados (opcional) ",-1)])]),_:1}),a(e(R),{modelValue:e(s).fecha_publicacion_resultados,"onUpdate:modelValue":r[7]||(r[7]=b=>e(s).fecha_publicacion_resultados=b),placeholder:"Dejar vacío para publicar al finalizar"},null,8,["modelValue"]),r[28]||(r[28]=i("p",{class:"text-xs text-muted-foreground"}," Si no especifica una fecha, los resultados se publicarán automáticamente al finalizar la votación ",-1))])):g("",!0)])]),_:1}),a(e(Ie),{value:"form",class:"space-y-4 mt-4"},{default:t(()=>[a(e(Z),null,{default:t(()=>[a(e(K),{class:"h-4 w-4"}),a(e(J),null,{default:t(()=>[...r[29]||(r[29]=[l("Configuración del Formulario",-1)])]),_:1}),a(e(O),null,{default:t(()=>[...r[30]||(r[30]=[l(" Configure las preguntas que los votantes deberán responder. ",-1)])]),_:1})]),_:1}),a(io,{modelValue:e(s).formulario_config,"onUpdate:modelValue":r[8]||(r[8]=b=>e(s).formulario_config=b),errors:e(s).errors.formulario_config},null,8,["modelValue","errors"])]),_:1})]),_:1},8,["modelValue"]),a(e(ao),null,{default:t(()=>[a(e(I),{type:"button",variant:"outline",onClick:P},{default:t(()=>[...r[31]||(r[31]=[l(" Cancelar ",-1)])]),_:1}),a(e(I),{type:"submit",disabled:e(s).processing},{default:t(()=>[e(s).processing?(n(),$(e(ro),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(n(),$(e(Ge),{key:1,class:"mr-2 h-4 w-4"})),r[32]||(r[32]=l(" Crear Votación ",-1))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}}),qo={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Lo={class:"flex items-center justify-between"},Fo={class:"text-3xl font-bold"},Io={class:"text-muted-foreground"},No={class:"grid gap-4 md:grid-cols-2"},Po={class:"space-y-2"},Ro={key:0,class:"text-sm text-red-500"},To={class:"space-y-2"},Bo={key:0,class:"text-sm text-red-500"},Go={class:"space-y-2"},Ho={key:0,class:"text-sm text-red-500"},Zo={key:0,class:"grid gap-4 md:grid-cols-2"},Oo={class:"space-y-2"},Jo={key:0,class:"text-sm text-red-500"},Ko={class:"space-y-2"},Wo={key:0,class:"text-sm text-red-500"},Qo={class:"grid gap-4 md:grid-cols-2"},Xo={class:"space-y-2"},Yo={key:0,class:"text-sm text-red-500"},ho={class:"space-y-2"},ea={key:0,class:"text-sm text-red-500"},oa={key:1,class:"text-sm text-red-500"},aa={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},sa={class:"space-y-2"},ta={class:"space-y-2"},la={class:"space-y-2"},ia={class:"space-y-2"},ra={class:"space-y-2"},da={key:0,class:"text-sm text-red-500"},na={class:"grid gap-4 md:grid-cols-2"},ua={class:"space-y-2"},ma={key:0,class:"text-sm text-red-500"},pa={class:"flex items-center space-x-2 pt-8"},fa={class:"flex items-center space-x-2"},_a={key:0,class:"space-y-4 pl-6 border-l-2 border-blue-200"},ca={class:"space-y-3"},ba={class:"flex items-center space-x-2"},ga={class:"flex items-center space-x-2"},va={class:"flex items-center space-x-2"},xa={key:0,class:"space-y-4"},Va={class:"grid gap-4 md:grid-cols-2"},ya={class:"space-y-2"},za={key:0,class:"space-y-2"},ka={class:"flex items-center gap-2 p-2 bg-green-50 rounded-md"},wa={class:"text-xs text-muted-foreground"},Ua={class:"space-y-3"},$a={class:"grid gap-3 md:grid-cols-2"},Sa={class:"flex items-center space-x-2"},Ca={class:"flex items-center space-x-2"},ja={class:"flex items-center space-x-2"},Ma={class:"flex items-center space-x-2"},Ea={class:"space-y-2"},Da={key:1,class:"space-y-4"},Aa={class:"grid gap-4 md:grid-cols-2"},qa={class:"space-y-2"},La={class:"space-y-2"},Fa={class:"space-y-2"},Ia={class:"space-y-2"},Na={class:"space-y-4 p-4 border rounded-lg bg-gray-50"},Pa={class:"flex items-center space-x-2"},Ra={key:0,class:"space-y-2"},Ta={class:"grid gap-4 md:grid-cols-2"},Ba={class:"space-y-2"},Ga={class:"space-y-2"},Ha={class:"space-y-2"},Za={key:2,class:"space-y-4"},Oa={class:"space-y-2"},Ja={key:1,class:"text-sm text-red-500"},Ka={class:"flex items-center space-x-2"},Wa={key:0,class:"space-y-4"},Qa={class:"space-y-2"},Xa={class:"flex items-start space-x-2 mb-3"},Ya={class:"space-y-1"},ha={class:"flex items-start space-x-2"},es={class:"space-y-1"},os={class:"block bg-gray-100 p-2 rounded text-sm"},as={class:"list-disc list-inside text-sm space-y-1"},ss={key:0},ts={key:1},ls={key:1,class:"text-sm text-red-500"},is={key:2,class:"text-sm text-red-500"},rs={class:"space-y-2"},ds={class:"flex gap-2"},ns={class:"text-xs text-muted-foreground ml-2"},us={key:0,class:"space-y-2"},ms={class:"space-y-2"},ps={class:"flex-1"},fs={class:"font-medium"},_s={class:"text-sm text-muted-foreground"},cs={class:"text-xs text-muted-foreground mt-1"},bs={key:2,class:"text-sm text-red-500"},gs={class:"flex justify-end gap-4"},Rt=Re({__name:"Form",props:{asamblea:{},territorios:{},departamentos:{},municipios:{},localidades:{},votaciones:{},asambleaVotaciones:{},canManageParticipants:{type:Boolean}},setup(Y){var oe,ae,se,te,le,ie,re,de,ne,ue,me,pe,fe,_e,ce,be,ge,ve,xe,Ve,ye,ze,ke,we,Ue,$e,Se,Ce,je,Me,Ee,De,Ae,qe;const m=Y,B=[{title:"Admin",href:"/admin/dashboard"},{title:"Asambleas",href:"/admin/asambleas"},{title:m.asamblea?"Editar":"Nueva",href:"#"}],{route:N}=window,G=j(()=>typeof window<"u"?window.location.origin:""),s=Te({nombre:((oe=m.asamblea)==null?void 0:oe.nombre)||"",descripcion:((ae=m.asamblea)==null?void 0:ae.descripcion)||"",tipo:((se=m.asamblea)==null?void 0:se.tipo)||"ordinaria",estado:((te=m.asamblea)==null?void 0:te.estado)||"programada",fecha_inicio:((le=m.asamblea)==null?void 0:le.fecha_inicio)||"",fecha_fin:((ie=m.asamblea)==null?void 0:ie.fecha_fin)||"",territorio_id:((de=(re=m.asamblea)==null?void 0:re.territorio_id)==null?void 0:de.toString())||null,departamento_id:((ue=(ne=m.asamblea)==null?void 0:ne.departamento_id)==null?void 0:ue.toString())||null,municipio_id:((pe=(me=m.asamblea)==null?void 0:me.municipio_id)==null?void 0:pe.toString())||null,localidad_id:((_e=(fe=m.asamblea)==null?void 0:fe.localidad_id)==null?void 0:_e.toString())||null,lugar:((ce=m.asamblea)==null?void 0:ce.lugar)||"",quorum_minimo:((be=m.asamblea)==null?void 0:be.quorum_minimo)||null,activo:((ge=m.asamblea)==null?void 0:ge.activo)??!0,acta_url:((ve=m.asamblea)==null?void 0:ve.acta_url)||"",zoom_enabled:((xe=m.asamblea)==null?void 0:xe.zoom_enabled)??!1,zoom_integration_type:((Ve=m.asamblea)==null?void 0:Ve.zoom_integration_type)||"sdk",zoom_meeting_id:((ye=m.asamblea)==null?void 0:ye.zoom_meeting_id)||"",zoom_meeting_password:((ze=m.asamblea)==null?void 0:ze.zoom_meeting_password)||"",zoom_occurrence_ids:((ke=m.asamblea)==null?void 0:ke.zoom_occurrence_ids)||"",zoom_prefix:((we=m.asamblea)==null?void 0:we.zoom_prefix)||"",zoom_registration_open_date:((Ue=m.asamblea)==null?void 0:Ue.zoom_registration_open_date)||"",zoom_static_message:(($e=m.asamblea)==null?void 0:$e.zoom_static_message)||"",zoom_api_message_enabled:((Se=m.asamblea)==null?void 0:Se.zoom_api_message_enabled)??!1,zoom_api_message:((Ce=m.asamblea)==null?void 0:Ce.zoom_api_message)||"",zoom_join_url:((je=m.asamblea)==null?void 0:je.zoom_join_url)||"",zoom_start_url:((Me=m.asamblea)==null?void 0:Me.zoom_start_url)||"",zoom_meeting_type:((Ee=m.asamblea)==null?void 0:Ee.zoom_meeting_type)||"scheduled",zoom_settings:((De=m.asamblea)==null?void 0:De.zoom_settings)||{host_video:!0,participant_video:!1,waiting_room:!0,mute_upon_entry:!0,auto_recording:"none"},public_participants_enabled:((Ae=m.asamblea)==null?void 0:Ae.public_participants_enabled)??!1,public_participants_mode:((qe=m.asamblea)==null?void 0:qe.public_participants_mode)||"list",votacion_ids:m.asambleaVotaciones||[]}),S=W(!1);W(m.asambleaVotaciones||[]);const P=j(()=>{if(!s.fecha_fin||!s.fecha_inicio)return"";const c=new Date(s.fecha_fin),o=new Date(s.fecha_inicio);return c<=o?"La fecha de fin debe ser posterior a la fecha de inicio":""}),Q=j(()=>s.territorio_id?m.departamentos.filter(c=>c.territorio_id===Number(s.territorio_id)):[]),V=j(()=>s.departamento_id?m.municipios.filter(c=>c.departamento_id===Number(s.departamento_id)):[]),r=j(()=>s.municipio_id?m.localidades.filter(c=>c.municipio_id===Number(s.municipio_id)):[]);X(()=>s.territorio_id,(c,o)=>{c!==o&&(s.departamento_id=null,s.municipio_id=null,s.localidad_id=null)}),X(()=>s.departamento_id,(c,o)=>{c!==o&&(s.municipio_id=null,s.localidad_id=null)}),X(()=>s.municipio_id,(c,o)=>{c!==o&&(s.localidad_id=null)});const b=c=>{s.votacion_ids.includes(c)||s.votacion_ids.push(c),S.value=!1},He=c=>{const o=s.votacion_ids.indexOf(c);o>-1&&s.votacion_ids.splice(o,1)},h=j(()=>!m.votaciones||!s.votacion_ids.length?[]:m.votaciones.filter(c=>s.votacion_ids.includes(c.id))),Ze=j(()=>m.votaciones?m.votaciones.filter(c=>!s.votacion_ids.includes(c.id)):[]),Oe=()=>{m.asamblea?s.put(N("admin.asambleas.update",m.asamblea.id),{preserveScroll:!0,onError:()=>{}}):s.post(N("admin.asambleas.store"),{preserveScroll:!0,onError:()=>{}})},ee=()=>{Qe.visit(N("admin.asambleas.index"))};return(c,o)=>(n(),p(M,null,[a(e(We),{title:c.asamblea?"Editar Asamblea":"Nueva Asamblea"},null,8,["title"]),a(Xe,{breadcrumbs:B},{default:t(()=>[i("div",qo,[i("div",Lo,[i("div",null,[i("h1",Fo,f(c.asamblea?"Editar Asamblea":"Nueva Asamblea"),1),i("p",Io,f(c.asamblea?"Modifica los datos de la asamblea":"Completa los datos para crear una nueva asamblea"),1)]),a(e(I),{variant:"outline",onClick:ee},{default:t(()=>[a(e(no),{class:"mr-2 h-4 w-4"}),o[37]||(o[37]=l(" Volver ",-1))]),_:1})]),i("form",{onSubmit:Be(Oe,["prevent"]),class:"space-y-6"},[a(e(E),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(A),null,{default:t(()=>[...o[38]||(o[38]=[l("Información General",-1)])]),_:1}),a(e(L),null,{default:t(()=>[...o[39]||(o[39]=[l(" Datos básicos de la asamblea ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:t(()=>[i("div",No,[i("div",Po,[a(e(u),{for:"nombre"},{default:t(()=>[...o[40]||(o[40]=[l("Nombre *",-1)])]),_:1}),a(e(y),{id:"nombre",modelValue:e(s).nombre,"onUpdate:modelValue":o[0]||(o[0]=d=>e(s).nombre=d),placeholder:"Ej: Asamblea General Ordinaria 2024",class:x({"border-red-500":e(s).errors.nombre})},null,8,["modelValue","class"]),e(s).errors.nombre?(n(),p("span",Ro,f(e(s).errors.nombre),1)):g("",!0)]),i("div",To,[a(e(u),{for:"tipo"},{default:t(()=>[...o[41]||(o[41]=[l("Tipo *",-1)])]),_:1}),a(e(z),{modelValue:e(s).tipo,"onUpdate:modelValue":o[1]||(o[1]=d=>e(s).tipo=d)},{default:t(()=>[a(e(k),{class:x({"border-red-500":e(s).errors.tipo})},{default:t(()=>[a(e(w),{placeholder:"Selecciona el tipo"})]),_:1},8,["class"]),a(e(U),null,{default:t(()=>[a(e(v),{value:"ordinaria"},{default:t(()=>[...o[42]||(o[42]=[l("Ordinaria",-1)])]),_:1}),a(e(v),{value:"extraordinaria"},{default:t(()=>[...o[43]||(o[43]=[l("Extraordinaria",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(s).errors.tipo?(n(),p("span",Bo,f(e(s).errors.tipo),1)):g("",!0)])]),i("div",Go,[a(e(u),{for:"descripcion"},{default:t(()=>[...o[44]||(o[44]=[l("Descripción",-1)])]),_:1}),a(e(H),{id:"descripcion",modelValue:e(s).descripcion,"onUpdate:modelValue":o[2]||(o[2]=d=>e(s).descripcion=d),placeholder:"Describe el propósito y agenda de la asamblea...",rows:"3",class:x({"border-red-500":e(s).errors.descripcion})},null,8,["modelValue","class"]),e(s).errors.descripcion?(n(),p("span",Ho,f(e(s).errors.descripcion),1)):g("",!0)]),c.asamblea?(n(),p("div",Zo,[i("div",Oo,[a(e(u),{for:"estado"},{default:t(()=>[...o[45]||(o[45]=[l("Estado",-1)])]),_:1}),a(e(z),{modelValue:e(s).estado,"onUpdate:modelValue":o[3]||(o[3]=d=>e(s).estado=d)},{default:t(()=>[a(e(k),{class:x({"border-red-500":e(s).errors.estado})},{default:t(()=>[a(e(w),{placeholder:"Selecciona el estado"})]),_:1},8,["class"]),a(e(U),null,{default:t(()=>[a(e(v),{value:"programada"},{default:t(()=>[...o[46]||(o[46]=[l("Programada",-1)])]),_:1}),a(e(v),{value:"en_curso"},{default:t(()=>[...o[47]||(o[47]=[l("En Curso",-1)])]),_:1}),a(e(v),{value:"finalizada"},{default:t(()=>[...o[48]||(o[48]=[l("Finalizada",-1)])]),_:1}),a(e(v),{value:"cancelada"},{default:t(()=>[...o[49]||(o[49]=[l("Cancelada",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(s).errors.estado?(n(),p("span",Jo,f(e(s).errors.estado),1)):g("",!0)]),i("div",Ko,[a(e(u),{for:"acta_url"},{default:t(()=>[...o[50]||(o[50]=[l("URL del Acta",-1)])]),_:1}),a(e(y),{id:"acta_url",modelValue:e(s).acta_url,"onUpdate:modelValue":o[4]||(o[4]=d=>e(s).acta_url=d),placeholder:"https://ejemplo.com/acta.pdf",class:x({"border-red-500":e(s).errors.acta_url})},null,8,["modelValue","class"]),e(s).errors.acta_url?(n(),p("span",Wo,f(e(s).errors.acta_url),1)):g("",!0)])])):g("",!0)]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(A),null,{default:t(()=>[...o[51]||(o[51]=[l("Fechas y Horarios",-1)])]),_:1}),a(e(L),null,{default:t(()=>[...o[52]||(o[52]=[l(" Define cuándo se realizará la asamblea ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:t(()=>[i("div",Qo,[i("div",Xo,[a(e(u),{for:"fecha_inicio"},{default:t(()=>[...o[53]||(o[53]=[l("Fecha y Hora de Inicio *",-1)])]),_:1}),a(e(R),{modelValue:e(s).fecha_inicio,"onUpdate:modelValue":o[5]||(o[5]=d=>e(s).fecha_inicio=d),placeholder:"Seleccionar fecha y hora de inicio",class:x({"border-red-500":e(s).errors.fecha_inicio})},null,8,["modelValue","class"]),e(s).errors.fecha_inicio?(n(),p("span",Yo,f(e(s).errors.fecha_inicio),1)):g("",!0)]),i("div",ho,[a(e(u),{for:"fecha_fin"},{default:t(()=>[...o[54]||(o[54]=[l("Fecha y Hora de Fin *",-1)])]),_:1}),a(e(R),{modelValue:e(s).fecha_fin,"onUpdate:modelValue":o[6]||(o[6]=d=>e(s).fecha_fin=d),placeholder:"Seleccionar fecha y hora de fin",class:x({"border-red-500":e(s).errors.fecha_fin||P.value})},null,8,["modelValue","class"]),P.value?(n(),p("span",ea,f(P.value),1)):e(s).errors.fecha_fin?(n(),p("span",oa,f(e(s).errors.fecha_fin),1)):g("",!0)])])]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(A),null,{default:t(()=>[...o[55]||(o[55]=[l("Ubicación",-1)])]),_:1}),a(e(L),null,{default:t(()=>[...o[56]||(o[56]=[l(" Define dónde se realizará la asamblea ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:t(()=>[i("div",aa,[i("div",sa,[a(e(u),{for:"territorio"},{default:t(()=>[...o[57]||(o[57]=[l("Territorio",-1)])]),_:1}),a(e(z),{modelValue:e(s).territorio_id,"onUpdate:modelValue":o[7]||(o[7]=d=>e(s).territorio_id=d)},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{placeholder:"Selecciona territorio (opcional)"})]),_:1}),a(e(U),null,{default:t(()=>[(n(!0),p(M,null,F(c.territorios,d=>(n(),$(e(v),{key:d.id,value:d.id.toString()},{default:t(()=>[l(f(d.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",ta,[a(e(u),{for:"departamento"},{default:t(()=>[...o[58]||(o[58]=[l("Departamento",-1)])]),_:1}),a(e(z),{modelValue:e(s).departamento_id,"onUpdate:modelValue":o[8]||(o[8]=d=>e(s).departamento_id=d),disabled:!e(s).territorio_id},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{placeholder:"Selecciona departamento (opcional)"})]),_:1}),a(e(U),null,{default:t(()=>[(n(!0),p(M,null,F(Q.value,d=>(n(),$(e(v),{key:d.id,value:d.id.toString()},{default:t(()=>[l(f(d.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",la,[a(e(u),{for:"municipio"},{default:t(()=>[...o[59]||(o[59]=[l("Municipio",-1)])]),_:1}),a(e(z),{modelValue:e(s).municipio_id,"onUpdate:modelValue":o[9]||(o[9]=d=>e(s).municipio_id=d),disabled:!e(s).departamento_id},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{placeholder:"Selecciona municipio (opcional)"})]),_:1}),a(e(U),null,{default:t(()=>[(n(!0),p(M,null,F(V.value,d=>(n(),$(e(v),{key:d.id,value:d.id.toString()},{default:t(()=>[l(f(d.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",ia,[a(e(u),{for:"localidad"},{default:t(()=>[...o[60]||(o[60]=[l("Localidad",-1)])]),_:1}),a(e(z),{modelValue:e(s).localidad_id,"onUpdate:modelValue":o[10]||(o[10]=d=>e(s).localidad_id=d),disabled:!e(s).municipio_id},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{placeholder:"Selecciona localidad (opcional)"})]),_:1}),a(e(U),null,{default:t(()=>[(n(!0),p(M,null,F(r.value,d=>(n(),$(e(v),{key:d.id,value:d.id.toString()},{default:t(()=>[l(f(d.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),i("div",ra,[a(e(u),{for:"lugar"},{default:t(()=>[...o[61]||(o[61]=[l("Dirección o Lugar",-1)])]),_:1}),a(e(y),{id:"lugar",modelValue:e(s).lugar,"onUpdate:modelValue":o[11]||(o[11]=d=>e(s).lugar=d),placeholder:"Ej: Salón Principal, Calle 123 #45-67",class:x({"border-red-500":e(s).errors.lugar})},null,8,["modelValue","class"]),e(s).errors.lugar?(n(),p("span",da,f(e(s).errors.lugar),1)):g("",!0)])]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(A),null,{default:t(()=>[...o[62]||(o[62]=[l("Configuración",-1)])]),_:1}),a(e(L),null,{default:t(()=>[...o[63]||(o[63]=[l(" Opciones adicionales de la asamblea ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:t(()=>[i("div",na,[i("div",ua,[a(e(u),{for:"quorum_minimo"},{default:t(()=>[...o[64]||(o[64]=[l("Quórum Mínimo",-1)])]),_:1}),a(e(y),{id:"quorum_minimo",modelValue:e(s).quorum_minimo,"onUpdate:modelValue":o[12]||(o[12]=d=>e(s).quorum_minimo=d),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"Ej: 50",class:x({"border-red-500":e(s).errors.quorum_minimo})},null,8,["modelValue","class"]),e(s).errors.quorum_minimo?(n(),p("span",ma,f(e(s).errors.quorum_minimo),1)):g("",!0),o[65]||(o[65]=i("p",{class:"text-sm text-muted-foreground"}," Número mínimo de asistentes requeridos ",-1))]),i("div",pa,[a(e(C),{id:"activo",modelValue:e(s).activo,"onUpdate:modelValue":o[13]||(o[13]=d=>e(s).activo=d)},null,8,["modelValue"]),a(e(u),{for:"activo",class:"cursor-pointer"},{default:t(()=>[...o[66]||(o[66]=[l(" Asamblea Activa ",-1)])]),_:1})])])]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(A),{class:"flex items-center gap-2"},{default:t(()=>[a(e(Ne),{class:"h-5 w-5"}),o[67]||(o[67]=l(" Videoconferencia ",-1))]),_:1}),a(e(L),null,{default:t(()=>[...o[68]||(o[68]=[l(" Configuración de videoconferencia con Zoom para la asamblea ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:t(()=>{var d;return[i("div",fa,[a(e(C),{id:"zoom_enabled",modelValue:e(s).zoom_enabled,"onUpdate:modelValue":o[14]||(o[14]=_=>e(s).zoom_enabled=_)},null,8,["modelValue"]),a(e(u),{for:"zoom_enabled",class:"cursor-pointer"},{default:t(()=>[...o[69]||(o[69]=[l(" Habilitar videoconferencia ",-1)])]),_:1})]),e(s).zoom_enabled?(n(),p("div",_a,[i("div",ca,[a(e(u),{class:"text-sm font-medium"},{default:t(()=>[...o[70]||(o[70]=[l("Tipo de Integración",-1)])]),_:1}),a(e(Le),{modelValue:e(s).zoom_integration_type,"onUpdate:modelValue":o[15]||(o[15]=_=>e(s).zoom_integration_type=_),class:"flex gap-6"},{default:t(()=>[i("div",ba,[a(e(T),{value:"sdk",id:"sdk"}),a(e(u),{for:"sdk",class:"cursor-pointer"},{default:t(()=>[...o[71]||(o[71]=[l(" SDK (Automático) ",-1)])]),_:1})]),i("div",ga,[a(e(T),{value:"api",id:"api"}),a(e(u),{for:"api",class:"cursor-pointer"},{default:t(()=>[...o[72]||(o[72]=[l(" API (Manual) ",-1)])]),_:1})]),i("div",va,[a(e(T),{value:"message",id:"message"}),a(e(u),{for:"message",class:"cursor-pointer"},{default:t(()=>[...o[73]||(o[73]=[l(" Mensaje estático ",-1)])]),_:1})])]),_:1},8,["modelValue"]),o[74]||(o[74]=i("p",{class:"text-xs text-muted-foreground"}," SDK: Reuniones generadas automáticamente. API: Configuración manual de reunión existente. Mensaje: Mostrar un mensaje personalizado. ",-1))]),e(s).zoom_integration_type==="sdk"?(n(),p("div",xa,[i("div",Va,[i("div",ya,[a(e(u),{for:"zoom_meeting_type"},{default:t(()=>[...o[75]||(o[75]=[l("Tipo de Reunión",-1)])]),_:1}),a(e(z),{modelValue:e(s).zoom_meeting_type,"onUpdate:modelValue":o[16]||(o[16]=_=>e(s).zoom_meeting_type=_)},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{placeholder:"Selecciona el tipo"})]),_:1}),a(e(U),null,{default:t(()=>[a(e(v),{value:"scheduled"},{default:t(()=>[...o[76]||(o[76]=[l("Programada",-1)])]),_:1}),a(e(v),{value:"instant"},{default:t(()=>[...o[77]||(o[77]=[l("Instantánea",-1)])]),_:1}),a(e(v),{value:"recurring"},{default:t(()=>[...o[78]||(o[78]=[l("Recurrente",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o[79]||(o[79]=i("p",{class:"text-sm text-muted-foreground"},' Se recomienda "Programada" para asambleas ',-1))]),(d=c.asamblea)!=null&&d.zoom_meeting_id?(n(),p("div",za,[a(e(u),null,{default:t(()=>[...o[80]||(o[80]=[l("Estado de la Reunión",-1)])]),_:1}),i("div",ka,[a(e(Ne),{class:"h-4 w-4 text-green-600"}),o[81]||(o[81]=i("span",{class:"text-sm text-green-800"},"Reunión creada",-1))]),i("p",wa," ID: "+f(c.asamblea.zoom_meeting_id),1)])):g("",!0)]),i("div",Ua,[a(e(u),{class:"text-sm font-medium flex items-center gap-2"},{default:t(()=>[a(e(uo),{class:"h-4 w-4"}),o[82]||(o[82]=l(" Configuraciones de la Reunión ",-1))]),_:1}),i("div",$a,[i("div",Sa,[a(e(C),{id:"host_video",modelValue:e(s).zoom_settings.host_video,"onUpdate:modelValue":o[17]||(o[17]=_=>e(s).zoom_settings.host_video=_)},null,8,["modelValue"]),a(e(u),{for:"host_video",class:"text-sm cursor-pointer flex items-center gap-1"},{default:t(()=>[a(e(mo),{class:"h-3 w-3"}),o[83]||(o[83]=l(" Video del moderador ",-1))]),_:1})]),i("div",Ca,[a(e(C),{id:"participant_video",modelValue:e(s).zoom_settings.participant_video,"onUpdate:modelValue":o[18]||(o[18]=_=>e(s).zoom_settings.participant_video=_)},null,8,["modelValue"]),a(e(u),{for:"participant_video",class:"text-sm cursor-pointer flex items-center gap-1"},{default:t(()=>[a(e(Pe),{class:"h-3 w-3"}),o[84]||(o[84]=l(" Video de participantes ",-1))]),_:1})]),i("div",ja,[a(e(C),{id:"waiting_room",modelValue:e(s).zoom_settings.waiting_room,"onUpdate:modelValue":o[19]||(o[19]=_=>e(s).zoom_settings.waiting_room=_)},null,8,["modelValue"]),a(e(u),{for:"waiting_room",class:"text-sm cursor-pointer"},{default:t(()=>[...o[85]||(o[85]=[l(" Sala de espera ",-1)])]),_:1})]),i("div",Ma,[a(e(C),{id:"mute_upon_entry",modelValue:e(s).zoom_settings.mute_upon_entry,"onUpdate:modelValue":o[20]||(o[20]=_=>e(s).zoom_settings.mute_upon_entry=_)},null,8,["modelValue"]),a(e(u),{for:"mute_upon_entry",class:"text-sm cursor-pointer flex items-center gap-1"},{default:t(()=>[a(e(po),{class:"h-3 w-3"}),o[86]||(o[86]=l(" Silenciar al entrar ",-1))]),_:1})])]),i("div",Ea,[a(e(u),{for:"auto_recording",class:"text-sm"},{default:t(()=>[...o[87]||(o[87]=[l("Grabación automática",-1)])]),_:1}),a(e(z),{modelValue:e(s).zoom_settings.auto_recording,"onUpdate:modelValue":o[21]||(o[21]=_=>e(s).zoom_settings.auto_recording=_)},{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w))]),_:1}),a(e(U),null,{default:t(()=>[a(e(v),{value:"none"},{default:t(()=>[...o[88]||(o[88]=[l("Sin grabación",-1)])]),_:1}),a(e(v),{value:"local"},{default:t(()=>[...o[89]||(o[89]=[l("Grabación local",-1)])]),_:1}),a(e(v),{value:"cloud"},{default:t(()=>[...o[90]||(o[90]=[l("Grabación en la nube",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),o[91]||(o[91]=i("div",{class:"bg-blue-50 p-3 rounded-md"},[i("p",{class:"text-sm text-blue-800"},[i("strong",null,"Nota:"),l(" La reunión de Zoom se creará automáticamente cuando guardes la asamblea. Los participantes podrán acceder a la videoconferencia desde la vista de la asamblea. ")])],-1))])):g("",!0),e(s).zoom_integration_type==="api"?(n(),p("div",Da,[i("div",Aa,[i("div",qa,[a(e(u),{for:"zoom_meeting_id_api"},{default:t(()=>[...o[92]||(o[92]=[l("Meeting ID",-1)])]),_:1}),a(e(y),{id:"zoom_meeting_id_api",modelValue:e(s).zoom_meeting_id,"onUpdate:modelValue":o[22]||(o[22]=_=>e(s).zoom_meeting_id=_),placeholder:"Ej: 123456789"},null,8,["modelValue"]),o[93]||(o[93]=i("p",{class:"text-xs text-muted-foreground"}," ID de la reunión existente en Zoom ",-1))]),i("div",La,[a(e(u),{for:"zoom_occurrence_ids"},{default:t(()=>[...o[94]||(o[94]=[l("Occurrence IDs",-1)])]),_:1}),a(e(y),{id:"zoom_occurrence_ids",modelValue:e(s).zoom_occurrence_ids,"onUpdate:modelValue":o[23]||(o[23]=_=>e(s).zoom_occurrence_ids=_),placeholder:"Ej: 1648194360000,1648280760000"},null,8,["modelValue"]),o[95]||(o[95]=i("p",{class:"text-xs text-muted-foreground"}," IDs de ocurrencias separados por comas (opcional) ",-1))]),i("div",Fa,[a(e(u),{for:"zoom_prefix"},{default:t(()=>[...o[96]||(o[96]=[l("Prefijo",-1)])]),_:1}),a(e(y),{id:"zoom_prefix",modelValue:e(s).zoom_prefix,"onUpdate:modelValue":o[24]||(o[24]=_=>e(s).zoom_prefix=_),placeholder:"Ej: CH",maxlength:"10",class:"w-24"},null,8,["modelValue"]),o[97]||(o[97]=i("p",{class:"text-xs text-muted-foreground"}," Prefijo que se añadirá al nombre en Zoom ",-1))])]),i("div",Ia,[a(e(u),{for:"zoom_registration_open_date"},{default:t(()=>[...o[98]||(o[98]=[l("Apertura de inscripciones",-1)])]),_:1}),a(e(R),{id:"zoom_registration_open_date",modelValue:e(s).zoom_registration_open_date,"onUpdate:modelValue":o[25]||(o[25]=_=>e(s).zoom_registration_open_date=_),placeholder:"Seleccionar fecha y hora"},null,8,["modelValue"]),o[99]||(o[99]=i("p",{class:"text-xs text-muted-foreground"}," Fecha y hora a partir de la cual los usuarios pueden generar su link personal (opcional) ",-1))]),i("div",Na,[i("div",Pa,[a(e(C),{id:"zoom_api_message_enabled",modelValue:e(s).zoom_api_message_enabled,"onUpdate:modelValue":o[26]||(o[26]=_=>e(s).zoom_api_message_enabled=_)},null,8,["modelValue"]),a(e(u),{for:"zoom_api_message_enabled",class:"cursor-pointer"},{default:t(()=>[...o[100]||(o[100]=[l(" Mostrar mensaje personalizado encima del enlace ",-1)])]),_:1})]),e(s).zoom_api_message_enabled?(n(),p("div",Ra,[a(e(u),{for:"zoom_api_message"},{default:t(()=>[...o[101]||(o[101]=[l("Mensaje a mostrar",-1)])]),_:1}),a(e(H),{id:"zoom_api_message",modelValue:e(s).zoom_api_message,"onUpdate:modelValue":o[27]||(o[27]=_=>e(s).zoom_api_message=_),placeholder:"Escriba aquí el mensaje que se mostrará encima del enlace de Zoom...",rows:"4",class:"min-h-[100px]"},null,8,["modelValue"]),o[102]||(o[102]=i("p",{class:"text-xs text-muted-foreground"}," Este mensaje aparecerá destacado encima del botón de generar/acceder al enlace de Zoom. ",-1))])):g("",!0)]),i("div",Ta,[i("div",Ba,[a(e(u),{for:"zoom_meeting_password_api"},{default:t(()=>[...o[103]||(o[103]=[l("Contraseña de la Reunión",-1)])]),_:1}),a(e(y),{id:"zoom_meeting_password_api",modelValue:e(s).zoom_meeting_password,"onUpdate:modelValue":o[28]||(o[28]=_=>e(s).zoom_meeting_password=_),placeholder:"Contraseña (opcional)"},null,8,["modelValue"])]),i("div",Ga,[a(e(u),{for:"zoom_join_url"},{default:t(()=>[...o[104]||(o[104]=[l("Join URL",-1)])]),_:1}),a(e(y),{id:"zoom_join_url",modelValue:e(s).zoom_join_url,"onUpdate:modelValue":o[29]||(o[29]=_=>e(s).zoom_join_url=_),placeholder:"https://zoom.us/j/123456789"},null,8,["modelValue"])])]),i("div",Ha,[a(e(u),{for:"zoom_start_url"},{default:t(()=>[...o[105]||(o[105]=[l("Start URL",-1)])]),_:1}),a(e(y),{id:"zoom_start_url",modelValue:e(s).zoom_start_url,"onUpdate:modelValue":o[30]||(o[30]=_=>e(s).zoom_start_url=_),placeholder:"https://zoom.us/s/123456789"},null,8,["modelValue"]),o[106]||(o[106]=i("p",{class:"text-xs text-muted-foreground"}," URL para iniciar la reunión (para moderadores) ",-1))]),o[107]||(o[107]=i("div",{class:"bg-orange-50 p-3 rounded-md"},[i("p",{class:"text-sm text-orange-800"},[i("strong",null,"Modo API:"),l(" Los campos se completan manualmente. Los usuarios verán un botón para generar su link personal de acceso a la reunión. ")])],-1))])):g("",!0),e(s).zoom_integration_type==="message"?(n(),p("div",Za,[i("div",Oa,[a(e(u),{for:"zoom_static_message"},{default:t(()=>[...o[108]||(o[108]=[l("Mensaje a mostrar",-1)])]),_:1}),a(e(H),{id:"zoom_static_message",modelValue:e(s).zoom_static_message,"onUpdate:modelValue":o[31]||(o[31]=_=>e(s).zoom_static_message=_),placeholder:"Escriba aquí el mensaje que se mostrará en lugar de la videoconferencia...",rows:"5",class:"min-h-[120px]"},null,8,["modelValue"]),o[109]||(o[109]=i("p",{class:"text-xs text-muted-foreground"}," Este mensaje se mostrará a los usuarios en el espacio donde normalmente aparecería la videoconferencia. ",-1))]),o[110]||(o[110]=i("div",{class:"bg-blue-50 p-3 rounded-md"},[i("p",{class:"text-sm text-blue-800"},[i("strong",null,"Modo Mensaje:"),l(" En lugar de una videoconferencia, los usuarios verán el mensaje personalizado que configure aquí. ")])],-1))])):g("",!0)])):g("",!0),e(s).errors.zoom_enabled?(n(),p("span",Ja,f(e(s).errors.zoom_enabled),1)):g("",!0)]}),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(A),null,{default:t(()=>[a(e(Pe),{class:"inline-block mr-2 h-5 w-5"}),o[111]||(o[111]=l(" Consulta Pública de Participantes ",-1))]),_:1}),a(e(L),null,{default:t(()=>[...o[112]||(o[112]=[l(" Configure el acceso público sin autenticación para consultar participantes de la asamblea ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-6"},{default:t(()=>[i("div",Ka,[a(e(C),{id:"public_participants",modelValue:e(s).public_participants_enabled,"onUpdate:modelValue":o[32]||(o[32]=d=>e(s).public_participants_enabled=d)},null,8,["modelValue"]),a(e(u),{for:"public_participants"},{default:t(()=>[...o[113]||(o[113]=[l(" Habilitar consulta pública de participantes (sin autenticación) ",-1)])]),_:1})]),e(s).public_participants_enabled?(n(),p("div",Wa,[i("div",Qa,[a(e(u),null,{default:t(()=>[...o[114]||(o[114]=[l("Modo de visualización pública",-1)])]),_:1}),a(e(Le),{modelValue:e(s).public_participants_mode,"onUpdate:modelValue":o[33]||(o[33]=d=>e(s).public_participants_mode=d)},{default:t(()=>[i("div",Xa,[a(e(T),{value:"list",id:"mode_list"}),i("div",Ya,[a(e(u),{for:"mode_list",class:"font-medium cursor-pointer"},{default:t(()=>[...o[115]||(o[115]=[l(" Modo Listado ",-1)])]),_:1}),o[116]||(o[116]=i("p",{class:"text-sm text-muted-foreground"}," Muestra tabla completa con filtros avanzados. Los visitantes pueden ver: nombre, departamento, municipio y localidad de todos los participantes. ",-1))])]),i("div",ha,[a(e(T),{value:"search",id:"mode_search"}),i("div",es,[a(e(u),{for:"mode_search",class:"font-medium cursor-pointer"},{default:t(()=>[...o[117]||(o[117]=[l(" Modo Búsqueda ",-1)])]),_:1}),o[118]||(o[118]=i("p",{class:"text-sm text-muted-foreground"}," Solo muestra un campo de búsqueda. Los visitantes pueden buscar por nombre, cédula o correo, y ver únicamente si la persona es o no participante. ",-1))])])]),_:1},8,["modelValue"])]),a(e(Z),null,{default:t(()=>[a(e(K),{class:"h-4 w-4"}),a(e(J),null,{default:t(()=>[...o[119]||(o[119]=[l("URL Pública",-1)])]),_:1}),a(e(O),null,{default:t(()=>{var d;return[o[120]||(o[120]=i("p",{class:"mb-2"},"Los participantes estarán disponibles públicamente en:",-1)),i("code",os,f(G.value)+"/asambleas/"+f(((d=c.asamblea)==null?void 0:d.id)||"{id}")+"/participantes-publico ",1),o[121]||(o[121]=i("p",{class:"mt-2 text-xs"}," Esta URL será accesible sin necesidad de autenticación cuando la asamblea esté activa. ",-1))]}),_:1})]),_:1}),a(e(Z),{variant:"outline"},{default:t(()=>[a(e(K),{class:"h-4 w-4"}),a(e(J),null,{default:t(()=>[...o[122]||(o[122]=[l("Información de Privacidad",-1)])]),_:1}),a(e(O),null,{default:t(()=>[i("ul",as,[e(s).public_participants_mode==="list"?(n(),p("li",ss," En modo listado, NO se mostrarán: correo electrónico, teléfono, documento de identidad, ni información de asistencia. ")):(n(),p("li",ts," En modo búsqueda, solo se confirmará si la persona es participante o no. No se revelará ningún dato personal adicional. ")),o[123]||(o[123]=i("li",null,"Los datos expuestos cumplen con las políticas de privacidad.",-1))])]),_:1})]),_:1})])):g("",!0),e(s).errors.public_participants_enabled?(n(),p("span",ls,f(e(s).errors.public_participants_enabled),1)):g("",!0),e(s).errors.public_participants_mode?(n(),p("span",is,f(e(s).errors.public_participants_mode),1)):g("",!0)]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(A),{class:"flex items-center gap-2"},{default:t(()=>[a(e(fo),{class:"h-5 w-5"}),o[124]||(o[124]=l(" Votaciones Asociadas ",-1))]),_:1}),a(e(L),null,{default:t(()=>[...o[125]||(o[125]=[l(" Vincule votaciones existentes o cree nuevas votaciones para esta asamblea ",-1)])]),_:1})]),_:1}),a(e(q),{class:"space-y-4"},{default:t(()=>[i("div",rs,[a(e(u),null,{default:t(()=>[...o[126]||(o[126]=[l("Vincular votaciones existentes",-1)])]),_:1}),i("div",ds,[a(e(z),{"model-value":"","onUpdate:modelValue":o[34]||(o[34]=d=>d&&!e(s).votacion_ids.includes(Number(d))&&e(s).votacion_ids.push(Number(d)))},{default:t(()=>[a(e(k),{class:"flex-1"},{default:t(()=>[a(e(w),{placeholder:"Seleccionar votación para agregar..."})]),_:1}),a(e(U),null,{default:t(()=>[(n(!0),p(M,null,F(Ze.value,d=>(n(),$(e(v),{key:d.id,value:d.id.toString()},{default:t(()=>[l(f(d.titulo)+" ",1),i("span",ns," ("+f(d.estado)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),a(e(I),{type:"button",onClick:o[35]||(o[35]=d=>S.value=!0),variant:"outline"},{default:t(()=>[a(e(_o),{class:"h-4 w-4 mr-2"}),o[127]||(o[127]=l(" Crear nueva ",-1))]),_:1})])]),h.value.length>0?(n(),p("div",us,[a(e(u),null,{default:t(()=>[...o[128]||(o[128]=[l("Votaciones vinculadas",-1)])]),_:1}),i("div",ms,[(n(!0),p(M,null,F(h.value,d=>(n(),p("div",{key:d.id,class:"flex items-center justify-between p-3 border rounded-lg bg-gray-50 dark:bg-gray-900"},[i("div",ps,[i("div",fs,f(d.titulo),1),i("div",_s,f(d.descripcion),1),i("div",cs," Estado: "+f(d.estado)+" | Inicio: "+f(new Date(d.fecha_inicio).toLocaleDateString())+" | Fin: "+f(new Date(d.fecha_fin).toLocaleDateString()),1)]),a(e(I),{type:"button",onClick:_=>He(d.id),variant:"ghost",size:"sm"},{default:t(()=>[a(e(co),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]))),128))])])):(n(),$(e(Z),{key:1},{default:t(()=>[a(e(K),{class:"h-4 w-4"}),a(e(J),null,{default:t(()=>[...o[129]||(o[129]=[l("Sin votaciones vinculadas",-1)])]),_:1}),a(e(O),null,{default:t(()=>[...o[130]||(o[130]=[l(" Esta asamblea no tiene votaciones asociadas. Puede vincular votaciones existentes o crear nuevas. ",-1)])]),_:1})]),_:1})),e(s).errors.votacion_ids?(n(),p("span",bs,f(e(s).errors.votacion_ids),1)):g("",!0)]),_:1})]),_:1}),i("div",gs,[a(e(I),{type:"button",variant:"outline",onClick:ee},{default:t(()=>[...o[131]||(o[131]=[l(" Cancelar ",-1)])]),_:1}),a(e(I),{type:"submit",disabled:e(s).processing},{default:t(()=>[a(e(Ge),{class:"mr-2 h-4 w-4"}),l(" "+f(c.asamblea?"Actualizar":"Crear")+" Asamblea ",1)]),_:1},8,["disabled"])])],32)]),S.value?(n(),$(Ao,{key:0,open:S.value,onClose:o[36]||(o[36]=d=>S.value=!1),onCreated:b},null,8,["open"])):g("",!0)]),_:1})],64))}});export{Rt as default};
