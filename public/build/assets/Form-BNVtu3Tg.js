import{d as K,c as O,C as Q,r as Y,m as A,i as n,e as m,f as s,u as e,p as Z,w as l,g as r,t as c,h as i,l as ee,j as f,n as y,F as $,k as B,b as oe,W as ae}from"./app-CR-2XB3C.js";import{_ as se}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BeDoGI8L.js";import{_ as k,a as F,b as I,c as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXc292e6.js";import{_ as V}from"./createLucideIcon-DpqMcHcs.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-87jkhHIN.js";import{_ as le}from"./Textarea.vue_vue_type_script_setup_true_lang-D6RuC5gj.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-CTFOyKy8.js";import{_ as D}from"./Switch.vue_vue_type_script_setup_true_lang-BIn1iS3a.js";import{_ as te,a as re}from"./index-CtE-qVjO.js";import{_ as ie,a as de,b as me,c as ne,d as pe}from"./SelectValue.vue_vue_type_script_setup_true_lang-e9C0UTAB.js";import{t as R}from"./index-DEPFt58J.js";import{C as ue}from"./circle-alert-Ce-R__0b.js";import{T as ce}from"./trash-2-Ba23kG3g.js";import{P as fe}from"./plus-DafQFHWU.js";import{X as ve}from"./x-BtC0hBQf.js";import{S as _e}from"./save-fZDcFWE3.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Ert7fISp.js";import"./index-BZs2h2K_.js";import"./floating-ui.vue-BhiDC_BV.js";import"./index-E07s-QL0.js";import"./shield-4oMICjJq.js";import"./user-DHtFWwAY.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang--Zg1QsWs.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Dfpf6sX3.js";import"./VisuallyHidden-BWbUvSRY.js";import"./index-B_J_AOJU.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-y6H-OSrV.js";import"./map-pin-CH_1kWrL.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D_zYDN4Z.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D4bt_NVp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-DnobICLq.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DspZ-Okb.js";import"./target-PRmdjiaM.js";import"./users-2q8ym3rK.js";import"./vote-BGunVfqa.js";import"./folder-open-B73Z5LJI.js";import"./send-DrZ9C7tM.js";import"./file-text-bOjPW4fi.js";import"./briefcase-VNV3HxYQ.js";import"./calendar-K2tiWc-j.js";import"./megaphone-B1ul-h89.js";import"./user-check-DqzH6i1N.js";import"./mail-mHQkAKOp.js";import"./message-square-CKxkeyaY.js";import"./external-link-BksJeFVg.js";import"./panel-left-C66hQ-oC.js";import"./index-Bv2D6OQs.js";import"./check-COi2Akip.js";import"./index-CuEHpEfT.js";import"./VisuallyHiddenInput-y0SKat9x.js";import"./nullish-CHIgUVhi.js";const xe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},be={class:"flex items-center justify-between"},ye={class:"text-2xl font-bold text-gray-900 dark:text-white"},ge={key:0,class:"mt-1 text-sm text-red-600"},Ve={key:0,class:"mt-1 text-sm text-red-600"},Ce={key:0,class:"mt-1 text-sm text-red-600"},$e={key:0,class:"mt-1 text-sm text-red-600"},ke={key:0,class:"mt-1 text-xs text-gray-500"},ze={key:1,class:"mt-1 text-sm text-red-600"},we={key:0},qe={class:"space-y-2"},Ue={key:0,class:"mt-1 text-sm text-red-600"},he={key:0,class:"mt-1 text-sm text-red-600"},Ee={class:"space-y-4"},je={class:"flex items-center justify-between"},Pe={class:"space-y-0.5"},Se={class:"flex items-center justify-between"},Te={class:"space-y-0.5"},To=K({__name:"Form",props:{campo:{},tipos:{}},setup(W){var q,U,h,E,j,P,S,T,N,L;const d=W,p=O(()=>!!d.campo),G=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Campos Personalizados",href:"/admin/campos-personalizados"},{title:p.value?`Editar: ${(q=d.campo)==null?void 0:q.nombre}`:"Nuevo Campo",href:"#"}],a=Q({nombre:((U=d.campo)==null?void 0:U.nombre)||"",slug:((h=d.campo)==null?void 0:h.slug)||"",tipo:((E=d.campo)==null?void 0:E.tipo)||"text",opciones:((j=d.campo)==null?void 0:j.opciones)||[],es_requerido:((P=d.campo)==null?void 0:P.es_requerido)!==void 0?d.campo.es_requerido:!1,activo:((S=d.campo)==null?void 0:S.activo)!==void 0?d.campo.activo:!0,descripcion:((T=d.campo)==null?void 0:T.descripcion)||"",placeholder:((N=d.campo)==null?void 0:N.placeholder)||"",validacion:((L=d.campo)==null?void 0:L.validacion)||""}),b=Y(!1);A(()=>a.nombre,u=>{!p.value&&u&&(a.slug=u.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""))});const C=O(()=>["select","radio"].includes(a.tipo)),w=()=>{a.opciones.push({value:"",label:""})},M=u=>{a.opciones.splice(u,1)};A(()=>a.tipo,(u,o)=>{!C.value&&a.opciones.length>0?a.opciones=[]:C.value&&a.opciones.length===0&&w()});const X=()=>{var t;b.value=!0;const u=p.value?`/admin/campos-personalizados/${(t=d.campo)==null?void 0:t.id}`:"/admin/campos-personalizados",o=p.value?"put":"post";a[o](u,{preserveScroll:!0,onSuccess:()=>{R.success(p.value?"Campo actualizado exitosamente":"Campo creado exitosamente")},onError:_=>{R.error("Error al guardar el campo"),console.error(_)},onFinish:()=>{b.value=!1}})},H=()=>{ae.visit("/admin/campos-personalizados")},J=u=>({text:"min:3|max:255|alpha_dash",number:"numeric|min:0|max:1000",date:"date|after:today|before:2030-12-31",textarea:"min:10|max:5000",file:"mimes:pdf,doc,docx|max:10240"})[u]||"";return(u,o)=>(m(),n($,null,[s(e(Z),{title:p.value?"Editar Campo Personalizado":"Nuevo Campo Personalizado"},null,8,["title"]),s(se,{breadcrumbs:G},{default:l(()=>[r("div",xe,[r("div",be,[r("h1",ye,c(p.value?"Editar Campo Personalizado":"Nuevo Campo Personalizado"),1)]),s(e(te),null,{default:l(()=>[s(e(ue),{class:"h-4 w-4"}),s(e(re),null,{default:l(()=>[...o[8]||(o[8]=[i(" Los campos personalizados permiten agregar información adicional a los proyectos. Una vez creado, el campo estará disponible en todos los formularios de proyectos. ",-1)])]),_:1})]),_:1}),r("form",{onSubmit:ee(X,["prevent"]),class:"space-y-6"},[s(e(k),null,{default:l(()=>[s(e(F),null,{default:l(()=>[s(e(I),null,{default:l(()=>[...o[9]||(o[9]=[i("Información del Campo",-1)])]),_:1})]),_:1}),s(e(z),{class:"space-y-4"},{default:l(()=>[r("div",null,[s(e(v),{for:"nombre"},{default:l(()=>[...o[10]||(o[10]=[i("Nombre del Campo *",-1)])]),_:1}),s(e(x),{id:"nombre",modelValue:e(a).nombre,"onUpdate:modelValue":o[0]||(o[0]=t=>e(a).nombre=t),type:"text",placeholder:"Ej: Presupuesto estimado",class:y({"border-red-500":e(a).errors.nombre}),required:""},null,8,["modelValue","class"]),e(a).errors.nombre?(m(),n("p",ge,c(e(a).errors.nombre),1)):f("",!0)]),r("div",null,[s(e(v),{for:"slug"},{default:l(()=>[...o[11]||(o[11]=[i("Identificador (slug) *",-1)])]),_:1}),s(e(x),{id:"slug",modelValue:e(a).slug,"onUpdate:modelValue":o[1]||(o[1]=t=>e(a).slug=t),type:"text",placeholder:"presupuesto_estimado",class:y({"border-red-500":e(a).errors.slug}),disabled:p.value,required:""},null,8,["modelValue","class","disabled"]),o[12]||(o[12]=r("p",{class:"mt-1 text-xs text-gray-500"}," Identificador único del campo. Solo letras minúsculas, números y guiones bajos. ",-1)),e(a).errors.slug?(m(),n("p",Ve,c(e(a).errors.slug),1)):f("",!0)]),r("div",null,[s(e(v),{for:"descripcion"},{default:l(()=>[...o[13]||(o[13]=[i("Descripción",-1)])]),_:1}),s(e(le),{id:"descripcion",modelValue:e(a).descripcion,"onUpdate:modelValue":o[2]||(o[2]=t=>e(a).descripcion=t),placeholder:"Texto de ayuda para el usuario",rows:"2",class:y({"border-red-500":e(a).errors.descripcion})},null,8,["modelValue","class"]),e(a).errors.descripcion?(m(),n("p",Ce,c(e(a).errors.descripcion),1)):f("",!0)]),r("div",null,[s(e(v),{for:"placeholder"},{default:l(()=>[...o[14]||(o[14]=[i("Texto de Placeholder",-1)])]),_:1}),s(e(x),{id:"placeholder",modelValue:e(a).placeholder,"onUpdate:modelValue":o[3]||(o[3]=t=>e(a).placeholder=t),type:"text",placeholder:"Texto que aparece cuando el campo está vacío",class:y({"border-red-500":e(a).errors.placeholder})},null,8,["modelValue","class"]),e(a).errors.placeholder?(m(),n("p",$e,c(e(a).errors.placeholder),1)):f("",!0)])]),_:1})]),_:1}),s(e(k),null,{default:l(()=>[s(e(F),null,{default:l(()=>[s(e(I),null,{default:l(()=>[...o[15]||(o[15]=[i("Configuración",-1)])]),_:1})]),_:1}),s(e(z),{class:"space-y-4"},{default:l(()=>[r("div",null,[s(e(v),{for:"tipo"},{default:l(()=>[...o[16]||(o[16]=[i("Tipo de Campo *",-1)])]),_:1}),s(e(ie),{modelValue:e(a).tipo,"onUpdate:modelValue":o[4]||(o[4]=t=>e(a).tipo=t),disabled:p.value},{default:l(()=>[s(e(de),null,{default:l(()=>[s(e(me),{placeholder:"Seleccione el tipo"})]),_:1}),s(e(ne),null,{default:l(()=>[(m(!0),n($,null,B(u.tipos,(t,_)=>(m(),oe(e(pe),{key:_,value:_},{default:l(()=>[i(c(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),p.value?(m(),n("p",ke," El tipo no puede ser modificado después de crear el campo. ")):f("",!0),e(a).errors.tipo?(m(),n("p",ze,c(e(a).errors.tipo),1)):f("",!0)]),C.value?(m(),n("div",we,[s(e(v),null,{default:l(()=>[...o[17]||(o[17]=[i("Opciones *",-1)])]),_:1}),r("div",qe,[(m(!0),n($,null,B(e(a).opciones,(t,_)=>(m(),n("div",{key:_,class:"flex gap-2"},[s(e(x),{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,placeholder:"Valor",class:"w-1/3",required:""},null,8,["modelValue","onUpdate:modelValue"]),s(e(x),{modelValue:t.label,"onUpdate:modelValue":g=>t.label=g,placeholder:"Etiqueta",class:"flex-1",required:""},null,8,["modelValue","onUpdate:modelValue"]),s(e(V),{type:"button",variant:"destructive",size:"sm",onClick:g=>M(_),disabled:e(a).opciones.length===1},{default:l(()=>[s(e(ce),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])]))),128)),s(e(V),{type:"button",variant:"outline",size:"sm",onClick:w},{default:l(()=>[s(e(fe),{class:"mr-2 h-4 w-4"}),o[18]||(o[18]=i(" Agregar Opción ",-1))]),_:1})]),e(a).errors.opciones?(m(),n("p",Ue,c(e(a).errors.opciones),1)):f("",!0)])):f("",!0),r("div",null,[s(e(v),{for:"validacion"},{default:l(()=>[...o[19]||(o[19]=[i("Reglas de Validación (Laravel)",-1)])]),_:1}),s(e(x),{id:"validacion",modelValue:e(a).validacion,"onUpdate:modelValue":o[5]||(o[5]=t=>e(a).validacion=t),type:"text",placeholder:J(e(a).tipo),class:y({"border-red-500":e(a).errors.validacion})},null,8,["modelValue","placeholder","class"]),o[20]||(o[20]=r("p",{class:"mt-1 text-xs text-gray-500"}," Opcional. Usa sintaxis de Laravel. Ej: min:3|max:255 ",-1)),e(a).errors.validacion?(m(),n("p",he,c(e(a).errors.validacion),1)):f("",!0)]),r("div",Ee,[r("div",je,[r("div",Pe,[s(e(v),{for:"es_requerido"},{default:l(()=>[...o[21]||(o[21]=[i("Campo Requerido",-1)])]),_:1}),o[22]||(o[22]=r("p",{class:"text-xs text-gray-500"}," Los usuarios deberán completar este campo obligatoriamente ",-1))]),s(e(D),{id:"es_requerido",modelValue:e(a).es_requerido,"onUpdate:modelValue":o[6]||(o[6]=t=>e(a).es_requerido=t)},null,8,["modelValue"])]),r("div",Se,[r("div",Te,[s(e(v),{for:"activo"},{default:l(()=>[...o[23]||(o[23]=[i("Campo Activo",-1)])]),_:1}),o[24]||(o[24]=r("p",{class:"text-xs text-gray-500"}," Solo los campos activos se muestran en los formularios ",-1))]),s(e(D),{id:"activo",modelValue:e(a).activo,"onUpdate:modelValue":o[7]||(o[7]=t=>e(a).activo=t)},null,8,["modelValue"])])])]),_:1})]),_:1}),s(e(k),null,{default:l(()=>[s(e(z),{class:"flex justify-end gap-4 pt-6"},{default:l(()=>[s(e(V),{type:"button",variant:"outline",onClick:H,disabled:b.value},{default:l(()=>[s(e(ve),{class:"mr-2 h-4 w-4"}),o[25]||(o[25]=i(" Cancelar ",-1))]),_:1},8,["disabled"]),s(e(V),{type:"submit",disabled:b.value||e(a).processing},{default:l(()=>[s(e(_e),{class:"mr-2 h-4 w-4"}),i(" "+c(b.value?"Guardando...":p.value?"Actualizar Campo":"Crear Campo"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],32)])]),_:1})],64))}});export{To as default};
