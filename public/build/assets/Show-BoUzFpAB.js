import{d as K,r as z,p as O,i as d,e as a,j as u,f as t,n as ee,w as s,g as i,h as r,F as M,t as n,m as l,c as S,k as P,s as te,b as x,x as N,v as I}from"./app-CqrxAVE4.js";import{_ as ae}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DQoGrUJE.js";import{_ as V,c as E,a as j,b as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dx42q8co.js";import{_ as oe}from"./CardDescription.vue_vue_type_script_setup_true_lang-DMjzisnv.js";import{_ as k}from"./createLucideIcon-BgvNgHlT.js";import{_ as q}from"./index-CJJGyBEY.js";import{_ as Q,a as W}from"./index-CQyZTT3D.js";import{_ as ie}from"./ComentariosPanel.vue_vue_type_script_setup_true_lang-D2MbOrr-.js";import{_ as se}from"./Switch.vue_vue_type_script_setup_true_lang-CJqvKny1.js";import{_ as le}from"./Label.vue_vue_type_script_setup_true_lang-GKQTsHhz.js";import{_ as ne,a as de,b as re,c as ce,d as ue,e as me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DMJcMeWk.js";import{t as Y}from"./index-v3LDUSPx.js";import{R as ve}from"./RichTextEditor-BhjmvMgm.js";import{_ as fe}from"./FileUploadField.vue_vue_type_script_setup_true_lang-jo661j0c.js";import{P as he}from"./paperclip-DOe0L4cA.js";import{C as G}from"./clock-B2O0ftAp.js";import{C as H}from"./circle-x-DBo-6v1r.js";import{C as J}from"./circle-check-big-CyAir0Bt.js";import{F as L}from"./file-CwtnxT_G.js";import{M as X}from"./music-8f-rZYNP.js";import{V as ge}from"./video-DkJcT4K3.js";import{I as pe}from"./image-DgpsbWlS.js";import{A as xe}from"./arrow-left-DzaQsLWx.js";import{D as U}from"./download-DS21621f.js";import{T as _e}from"./triangle-alert-BCp_75sD.js";import{E as Z}from"./eye-D8faerL9.js";import"./useFlashMessages-CUQzbx15.js";import"./index-Bes2EvoR.js";import"./floating-ui.vue-Biqld2Ev.js";import"./x-B5SFulEs.js";import"./Input.vue_vue_type_script_setup_true_lang-ixC0z9AN.js";import"./index-BKfi4X8Z.js";import"./index-DD5KrQ7V.js";import"./shield-Csa7gpyR.js";import"./user-B4zsHwea.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DXvTGocI.js";import"./chevron-right-D5BxyZ38.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BKtx-882.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D00Vodyw.js";import"./VisuallyHidden-DrM80POq.js";import"./check-kQvajMU2.js";import"./circle-alert-BPwTHB1H.js";import"./map-pin-DCVsCVYi.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-ChbcvNQl.js";import"./chevrons-up-down-CLXDvL6J.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BMtwfigF.js";import"./tag-CvOzwnhk.js";import"./users-C6th6Y1J.js";import"./target-5Ka4TSrt.js";import"./vote--mzOHmAu.js";import"./folder-open-C76E6Zeb.js";import"./send-CbWHlfjL.js";import"./file-text-DpDhqzMk.js";import"./briefcase-ewv25Tjn.js";import"./calendar-B06x9WlT.js";import"./megaphone-B_rqXxip.js";import"./user-check-H63ipQQ5.js";import"./clipboard-list-BL5Cdz8D.js";import"./mail-iHnBpDJk.js";import"./message-square-BSV6Lsrw.js";import"./external-link-BU2oV4Qw.js";import"./panel-left-DW1G8qtw.js";import"./index-BarqKNcU.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-CBrtr02R.js";import"./loader-circle-DNaslWeB.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CLigi8h5.js";import"./arrow-right-BaWGYQU_.js";import"./ellipsis-CPOWMqh9.js";import"./square-pen-B9ObDY72.js";import"./trash-2-CQddMBHD.js";import"./chevron-left-CdIHvWNI.js";import"./VisuallyHiddenInput-D0rM1spK.js";import"./italic-CE7IHx1E.js";import"./list-cBRJGTuo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useFileUpload-C4DxtWVX.js";import"./upload-B-HAqoFW.js";const be={class:"space-y-3"},ye={key:0,class:"mt-2"},we={key:1,class:"flex items-center"},ke={class:"text-xs"},Ce=K({__name:"ComentarioContextoInput",props:{modelValue:{default:""},placeholder:{default:"Escribe un comentario..."},rows:{default:3},showFileUpload:{type:Boolean,default:!0},uploadModule:{default:"comentarios"},uploadFieldId:{default:"archivos"}},emits:["update:modelValue","update:archivos"],setup(e,{expose:h,emit:A}){const v=e,C=A,_=z(v.modelValue),m=z([]),f=z(!1);O(()=>v.modelValue,c=>{_.value=c}),O(_,c=>{C("update:modelValue",c)}),O(m,c=>{C("update:archivos",c)},{deep:!0});const T=()=>{f.value=!f.value};return h({clear:()=>{_.value="",m.value=[],f.value=!1},getContenido:()=>_.value,getArchivos:()=>m.value,isValid:()=>_.value.replace(/<[^>]*>/g,"").trim().length>0}),(c,o)=>(l(),d("div",be,[a(ve,{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=$=>_.value=$),placeholder:e.placeholder,rows:e.rows},null,8,["modelValue","placeholder","rows"]),e.showFileUpload&&f.value?(l(),d("div",ye,[a(fe,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=$=>m.value=$),label:"Archivos adjuntos",description:"Máximo 3 archivos de 10MB cada uno",module:e.uploadModule,"field-id":e.uploadFieldId,multiple:!0,"max-files":3,"max-file-size":10,accept:".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx","auto-upload":!0},null,8,["modelValue","module","field-id"])])):u("",!0),e.showFileUpload?(l(),d("div",we,[a(t(k),{variant:"ghost",size:"sm",type:"button",onClick:T,class:ee({"text-primary":f.value||m.value.length>0}),title:"Adjuntar archivos"},{default:s(()=>[a(t(he),{class:"h-4 w-4 mr-1"}),i("span",ke,[o[2]||(o[2]=r(" Adjuntar archivos ",-1)),m.value.length>0?(l(),d(M,{key:0},[r("("+n(m.value.length)+")",1)],64)):u("",!0)])]),_:1},8,["class"])])):u("",!0)]))}}),$e={class:"flex items-center gap-2"},ze={class:"space-y-4 py-4"},Ae={class:"flex items-center justify-between"},Ve={key:0,class:"space-y-2"},Ee=K({__name:"EvidenciaAccionesEstado",props:{evidencia:{},proyectoId:{},estadoActual:{}},setup(e){const h=e,A=z(!1),v=z(null),C=z(""),_=z([]),m=z(!1),f=z(!1),T=z(null),c={aprobada:{label:"Aprobar",icon:J,color:"text-green-600 hover:text-green-700 hover:bg-green-50",variant:"ghost",defaultComentario:!1},rechazada:{label:"Rechazar",icon:H,color:"text-red-600 hover:text-red-700 hover:bg-red-50",variant:"ghost",defaultComentario:!0},pendiente:{label:"A Pendiente",icon:G,color:"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-50",variant:"ghost",defaultComentario:!1}},o=S(()=>{const p=[];return h.estadoActual!=="aprobada"&&p.push("aprobada"),h.estadoActual!=="rechazada"&&p.push("rechazada"),h.estadoActual!=="pendiente"&&p.push("pendiente"),p}),$=S(()=>v.value?`${c[v.value].label} evidencia`:""),B=S(()=>v.value?{aprobada:"¿Confirmas que deseas aprobar esta evidencia?",rechazada:"¿Confirmas que deseas rechazar esta evidencia?",pendiente:"¿Confirmas que deseas devolver esta evidencia a estado pendiente?"}[v.value]:""),b=p=>{v.value=p,C.value="",m.value=c[p].defaultComentario,A.value=!0},g=()=>{v.value&&(f.value=!0,te.post(`/admin/proyectos/${h.proyectoId}/evidencias/${h.evidencia.id}/cambiar-estado`,{estado:v.value,comentario:m.value?C.value:null,agregar_comentario:m.value,archivos:m.value?_.value:[]},{preserveScroll:!0,onSuccess:()=>{Y.success(`Estado cambiado a ${v.value}`),A.value=!1,D()},onError:p=>{const y=Object.values(p).flat().join(", ")||"Error al cambiar estado";Y.error(y)},onFinish:()=>{f.value=!1}}))},D=()=>{var p;C.value="",_.value=[],(p=T.value)==null||p.clear()},R=()=>{A.value=!1,v.value=null,m.value=!1,D()};return(p,y)=>(l(),d("div",$e,[(l(!0),d(M,null,P(o.value,w=>(l(),x(t(k),{key:w,variant:c[w].variant,size:"sm",class:ee(["h-8",c[w].color]),onClick:Nt=>b(w)},{default:s(()=>[(l(),x(N(c[w].icon),{class:"h-4 w-4 mr-1"})),r(" "+n(c[w].label),1)]),_:2},1032,["variant","class","onClick"]))),128)),a(t(me),{open:A.value,"onUpdate:open":y[3]||(y[3]=w=>A.value=w)},{default:s(()=>[a(t(ne),{class:"sm:max-w-lg"},{default:s(()=>[a(t(de),null,{default:s(()=>[a(t(re),null,{default:s(()=>[r(n($.value),1)]),_:1}),a(t(ce),null,{default:s(()=>[r(n(B.value),1)]),_:1})]),_:1}),i("div",ze,[i("div",Ae,[a(t(le),{for:"agregar-comentario",class:"text-sm"},{default:s(()=>[r(n(v.value==="rechazada"?"Agregar motivo":"Agregar comentario"),1)]),_:1}),a(t(se),{id:"agregar-comentario",modelValue:m.value,"onUpdate:modelValue":y[0]||(y[0]=w=>m.value=w)},null,8,["modelValue"])]),m.value?(l(),d("div",Ve,[a(Ce,{ref_key:"comentarioInputRef",ref:T,modelValue:C.value,"onUpdate:modelValue":y[1]||(y[1]=w=>C.value=w),placeholder:v.value==="rechazada"?"Describe el motivo del rechazo...":"Agrega un comentario opcional...",rows:3,"show-file-upload":!0,"upload-module":"proyectos","upload-field-id":"evidencia-comentario","onUpdate:archivos":y[2]||(y[2]=w=>_.value=w)},null,8,["modelValue","placeholder"]),y[4]||(y[4]=i("p",{class:"text-xs text-muted-foreground"}," Este comentario aparecerá con el badge del nuevo estado. ",-1))])):u("",!0)]),a(t(ue),{class:"gap-2 sm:gap-0"},{default:s(()=>[a(t(k),{variant:"outline",onClick:R,disabled:f.value},{default:s(()=>[...y[5]||(y[5]=[r(" Cancelar ",-1)])]),_:1},8,["disabled"]),a(t(k),{variant:v.value==="rechazada"?"destructive":"default",onClick:g,disabled:f.value},{default:s(()=>[r(n(f.value?"Procesando...":"Confirmar"),1)]),_:1},8,["variant","disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]))}}),De={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},je={class:"flex justify-between items-start"},Fe={class:"flex items-center gap-4 mt-2"},Te={class:"text-muted-foreground"},Ue={class:"flex gap-2"},Ie={class:"flex items-center justify-between"},Me={key:0},Se={class:"grid gap-6 lg:grid-cols-3"},Be={class:"lg:col-span-2 space-y-6"},Re={key:0,class:"ml-2"},Le={class:"space-y-4"},Pe={key:0,class:"space-y-4"},Ne={key:0,class:"text-center"},Oe=["src","alt"],qe={class:"text-sm text-muted-foreground mt-2"},Xe={key:1,class:"text-center"},Ge=["src"],He={class:"text-sm text-muted-foreground mt-2"},Je={key:2,class:"flex flex-col items-center gap-4"},Ke={class:"flex items-center gap-3"},Qe={class:"text-left"},We={class:"font-medium"},Ye=["src"],Ze={key:3,class:"flex items-center gap-4 py-4"},et={class:"flex-1"},tt={class:"font-medium"},at={class:"text-sm text-muted-foreground"},ot={key:1,class:"bg-muted/30 rounded-lg p-4"},it={key:0,class:"text-center"},st=["src","alt"],lt={key:1,class:"text-center"},nt=["src"],dt={key:2,class:"flex flex-col items-center gap-4"},rt=["src"],ct={key:3,class:"flex flex-col items-center gap-4 py-8"},ut={class:"text-center"},mt={class:"font-medium"},vt={class:"text-sm text-muted-foreground"},ft={key:0},ht={key:2,class:"text-center py-8 text-muted-foreground"},gt={class:"whitespace-pre-wrap"},pt={class:"space-y-6"},xt={class:"font-medium"},_t={key:0,class:"text-sm text-muted-foreground"},bt={key:0},yt={class:"font-medium"},wt={key:0,class:"text-sm text-muted-foreground mt-1"},kt={class:"space-y-2"},Ct={class:"font-medium text-sm"},$t={class:"text-xs text-muted-foreground"},zt={class:"text-sm"},At={class:"text-sm"},Vt={key:0},Et={class:"space-y-2 max-h-32 overflow-y-auto"},Dt={class:"truncate flex-1 mr-2"},jt={key:1},Ft={class:"text-sm"},Tt={key:2},Ut={class:"text-sm"},It={class:"text-sm"},Mt={class:"text-xs text-muted-foreground"},St={class:"text-sm"},Bt={key:3},Rt={class:"text-sm"},Lt={key:0,class:"text-xs text-muted-foreground"},Pt={class:"text-sm whitespace-pre-wrap"},vo=K({__name:"Show",props:{contrato:{},evidencia:{}},setup(e){const h=e,A=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:h.contrato.nombre,href:`/admin/contratos/${h.contrato.id}`},{title:"Evidencia",href:"#"}],v=S(()=>({imagen:pe,video:ge,audio:X,documento:L})[h.evidencia.tipo_evidencia]||L),C=S(()=>({pendiente:{color:"secondary",icon:G,bgClass:"bg-yellow-50",textClass:"text-yellow-800"},aprobada:{color:"success",icon:J,bgClass:"bg-green-50",textClass:"text-green-800"},rechazada:{color:"destructive",icon:H,bgClass:"bg-red-50",textClass:"text-red-800"}})[h.evidencia.estado]||{color:"default",icon:G,bgClass:"bg-gray-50",textClass:"text-gray-800"}),_=c=>c?new Date(c).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",m=c=>c?new Date(c).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",f=c=>{const o=c||h.evidencia.archivo_url;o&&window.open(o,"_blank")},T=()=>{var c;((c=h.evidencia.archivos_urls)==null?void 0:c.length)>0?h.evidencia.archivos_urls.forEach((o,$)=>{setTimeout(()=>{window.open(o,"_blank")},$*500)}):h.evidencia.archivo_url&&f()};return(c,o)=>(l(),x(ae,{breadcrumbs:A},{default:s(()=>{var $,B;return[i("div",De,[i("div",je,[i("div",null,[a(t(I),{href:`/admin/contratos/${e.contrato.id}`,class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:s(()=>[a(t(xe),{class:"w-4 h-4 mr-2"}),o[0]||(o[0]=r(" Volver al Contrato ",-1))]),_:1},8,["href"]),o[1]||(o[1]=i("h2",{class:"text-3xl font-bold tracking-tight"},"Evidencia",-1)),i("div",Fe,[a(t(q),{variant:C.value.color},{default:s(()=>[(l(),x(N(C.value.icon),{class:"w-3 h-3 mr-1"})),r(" "+n(e.evidencia.estado_label),1)]),_:1},8,["variant"]),a(t(q),{variant:"outline"},{default:s(()=>[(l(),x(N(v.value),{class:"w-3 h-3 mr-1"})),r(" "+n(e.evidencia.tipo_evidencia_label),1)]),_:1}),a(t(q),{variant:"secondary"},{default:s(()=>[r(n(e.evidencia.tiene_multiples_archivos?`${e.evidencia.total_archivos} archivos`:"1 archivo"),1)]),_:1}),i("span",Te," Subida "+n(m(e.evidencia.created_at)),1)])]),i("div",Ue,[e.evidencia.tiene_multiples_archivos?(l(),x(t(k),{key:0,onClick:T,variant:"outline"},{default:s(()=>[a(t(U),{class:"w-4 h-4 mr-2"}),r(" Descargar Todos ("+n(e.evidencia.total_archivos)+") ",1)]),_:1})):e.evidencia.archivo_url?(l(),x(t(k),{key:1,onClick:f,variant:"outline"},{default:s(()=>[a(t(U),{class:"w-4 h-4 mr-2"}),o[2]||(o[2]=r(" Descargar ",-1))]),_:1})):u("",!0)])]),($=e.contrato.proyecto)!=null&&$.id?(l(),x(t(V),{key:0,class:"border-dashed"},{default:s(()=>[a(t(E),{class:"py-3"},{default:s(()=>[i("div",Ie,[o[3]||(o[3]=i("span",{class:"text-sm text-muted-foreground"},"Acciones rápidas",-1)),a(Ee,{evidencia:e.evidencia,"proyecto-id":e.contrato.proyecto.id,"estado-actual":e.evidencia.estado},null,8,["evidencia","proyecto-id","estado-actual"])])]),_:1})]),_:1})):u("",!0),e.evidencia.estado==="rechazada"?(l(),x(t(Q),{key:1,class:"border-red-200 bg-red-50"},{default:s(()=>[a(t(H),{class:"h-4 w-4 text-red-600"}),a(t(W),{class:"text-red-800"},{default:s(()=>[o[4]||(o[4]=r(" Esta evidencia ha sido rechazada. ",-1)),e.evidencia.observaciones_admin?(l(),d("span",Me," Motivo: "+n(e.evidencia.observaciones_admin),1)):u("",!0)]),_:1})]),_:1})):u("",!0),e.evidencia.estado==="aprobada"?(l(),x(t(Q),{key:2,class:"border-green-200 bg-green-50"},{default:s(()=>[a(t(J),{class:"h-4 w-4 text-green-600"}),a(t(W),{class:"text-green-800"},{default:s(()=>[...o[5]||(o[5]=[r(" Esta evidencia ha sido aprobada exitosamente. ",-1)])]),_:1})]),_:1})):u("",!0),i("div",Se,[i("div",Be,[a(t(V),null,{default:s(()=>[a(t(j),null,{default:s(()=>[a(t(F),{class:"flex items-center gap-2"},{default:s(()=>[(l(),x(N(v.value),{class:"w-5 h-5"})),o[6]||(o[6]=r(" Archivo de Evidencia ",-1))]),_:1}),a(t(oe),null,{default:s(()=>[r(n(e.evidencia.archivo_nombre||"Archivo subido")+" ",1),e.evidencia.archivo_size_formatted?(l(),d("span",Re," ("+n(e.evidencia.archivo_size_formatted)+") ",1)):u("",!0)]),_:1})]),_:1}),a(t(E),null,{default:s(()=>{var b;return[i("div",Le,[((b=e.evidencia.archivos_info)==null?void 0:b.length)>0?(l(),d("div",Pe,[(l(!0),d(M,null,P(e.evidencia.archivos_info,(g,D)=>(l(),d("div",{key:g.indice,class:"bg-muted/30 rounded-lg p-4 relative group"},[a(t(k),{onClick:R=>f(g.url),variant:"outline",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},{default:s(()=>[a(t(U),{class:"w-4 h-4"})]),_:1},8,["onClick"]),e.evidencia.es_imagen?(l(),d("div",Ne,[i("img",{src:g.url,alt:g.nombre,class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"},null,8,Oe),i("p",qe,n(g.nombre),1)])):e.evidencia.es_video?(l(),d("div",Xe,[i("video",{src:g.url,controls:"",class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,Ge),i("p",He,n(g.nombre),1)])):e.evidencia.es_audio?(l(),d("div",Je,[i("div",Ke,[a(t(X),{class:"w-12 h-12 text-muted-foreground"}),i("div",Qe,[i("p",We,n(g.nombre),1),o[7]||(o[7]=i("p",{class:"text-sm text-muted-foreground"},"Archivo de audio",-1))])]),i("audio",{src:g.url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Ye)])):(l(),d("div",Ze,[a(t(L),{class:"w-12 h-12 text-muted-foreground flex-shrink-0"}),i("div",et,[i("p",tt,n(g.nombre),1),i("p",at,n(e.evidencia.tipo_evidencia_label),1)]),a(t(k),{onClick:R=>f(g.url),variant:"outline",size:"sm"},{default:s(()=>[a(t(U),{class:"w-4 h-4 mr-2"}),o[8]||(o[8]=r(" Descargar ",-1))]),_:1},8,["onClick"])]))]))),128))])):e.evidencia.archivo_url?(l(),d("div",ot,[e.evidencia.es_imagen?(l(),d("div",it,[i("img",{src:e.evidencia.archivo_url,alt:e.evidencia.descripcion||"Evidencia",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"},null,8,st)])):e.evidencia.es_video?(l(),d("div",lt,[i("video",{src:e.evidencia.archivo_url,controls:"",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,nt)])):e.evidencia.es_audio?(l(),d("div",dt,[a(t(X),{class:"w-16 h-16 text-muted-foreground"}),i("audio",{src:e.evidencia.archivo_url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,rt)])):(l(),d("div",ct,[a(t(L),{class:"w-16 h-16 text-muted-foreground"}),i("div",ut,[i("p",mt,n(e.evidencia.archivo_nombre),1),i("p",vt,[r(n(e.evidencia.tipo_evidencia_label)+" ",1),e.evidencia.archivo_size_formatted?(l(),d("span",ft," • "+n(e.evidencia.archivo_size_formatted),1)):u("",!0)])]),a(t(k),{onClick:f,variant:"outline"},{default:s(()=>[a(t(U),{class:"w-4 h-4 mr-2"}),o[9]||(o[9]=r(" Descargar para ver ",-1))]),_:1})]))])):(l(),d("div",ht,[a(t(_e),{class:"w-12 h-12 mx-auto mb-3"}),o[10]||(o[10]=i("p",null,"No se pudo cargar el archivo",-1))]))])]}),_:1})]),_:1}),e.evidencia.descripcion?(l(),x(t(V),{key:0},{default:s(()=>[a(t(j),null,{default:s(()=>[a(t(F),null,{default:s(()=>[...o[11]||(o[11]=[r("Descripción",-1)])]),_:1})]),_:1}),a(t(E),null,{default:s(()=>[i("p",gt,n(e.evidencia.descripcion),1)]),_:1})]),_:1})):u("",!0),a(ie,{"commentable-type":"evidencias","commentable-id":e.evidencia.id,"can-create":!0},null,8,["commentable-id"])]),i("div",pt,[a(t(V),null,{default:s(()=>[a(t(j),null,{default:s(()=>[a(t(F),null,{default:s(()=>[...o[12]||(o[12]=[r("Información del Contrato",-1)])]),_:1})]),_:1}),a(t(E),{class:"space-y-4"},{default:s(()=>[i("div",null,[o[13]||(o[13]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Contrato",-1)),i("p",xt,n(e.contrato.nombre),1),e.contrato.numero_contrato?(l(),d("p",_t," # "+n(e.contrato.numero_contrato),1)):u("",!0)]),e.contrato.proyecto?(l(),d("div",bt,[o[14]||(o[14]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Proyecto",-1)),a(t(I),{href:`/admin/proyectos/${e.contrato.proyecto.id}`,class:"text-sm text-primary hover:underline"},{default:s(()=>[r(n(e.contrato.proyecto.nombre),1)]),_:1},8,["href"])])):u("",!0),a(t(k),{href:`/admin/contratos/${e.contrato.id}`,as:t(I),variant:"outline",size:"sm",class:"w-full"},{default:s(()=>[a(t(Z),{class:"w-4 h-4 mr-2"}),o[15]||(o[15]=r(" Ver Contrato ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),a(t(V),null,{default:s(()=>[a(t(j),null,{default:s(()=>[a(t(F),null,{default:s(()=>[...o[16]||(o[16]=[r("Obligación Contractual",-1)])]),_:1})]),_:1}),a(t(E),{class:"space-y-4"},{default:s(()=>[i("div",null,[i("p",yt,n(e.evidencia.obligacion.nombre),1),e.evidencia.obligacion.descripcion?(l(),d("p",wt,n(e.evidencia.obligacion.descripcion),1)):u("",!0)]),a(t(k),{href:`/admin/obligaciones/${e.evidencia.obligacion.id}`,as:t(I),variant:"outline",size:"sm",class:"w-full"},{default:s(()=>[a(t(Z),{class:"w-4 h-4 mr-2"}),o[17]||(o[17]=r(" Ver Obligación ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),((B=e.evidencia.entregables)==null?void 0:B.length)>0?(l(),x(t(V),{key:0},{default:s(()=>[a(t(j),null,{default:s(()=>[a(t(F),null,{default:s(()=>[...o[18]||(o[18]=[r("Entregables Asociados",-1)])]),_:1})]),_:1}),a(t(E),null,{default:s(()=>[i("div",kt,[(l(!0),d(M,null,P(e.evidencia.entregables,b=>(l(),x(t(I),{key:b.id,href:`/admin/proyectos/${b.hito.proyecto.id}/hitos/${b.hito.id}/entregables/${b.id}`,class:"block p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer"},{default:s(()=>[i("p",Ct,n(b.nombre),1),i("p",$t,n(b.hito.nombre),1)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})):u("",!0),a(t(V),null,{default:s(()=>[a(t(j),null,{default:s(()=>[a(t(F),null,{default:s(()=>[r(n(e.evidencia.tiene_multiples_archivos?"Detalles de los Archivos":"Detalles del Archivo"),1)]),_:1})]),_:1}),a(t(E),{class:"space-y-3"},{default:s(()=>{var b,g;return[i("div",null,[o[19]||(o[19]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Tipo",-1)),i("p",zt,n(e.evidencia.tipo_evidencia_label),1)]),i("div",null,[o[20]||(o[20]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Cantidad",-1)),i("p",At,n(e.evidencia.total_archivos||1)+" archivo(s)",1)]),((b=e.evidencia.archivos_info)==null?void 0:b.length)>0?(l(),d("div",Vt,[o[21]||(o[21]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Archivos",-1)),i("div",Et,[(l(!0),d(M,null,P(e.evidencia.archivos_info,D=>(l(),d("div",{key:D.indice,class:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded"},[i("span",Dt,n(D.nombre),1),a(t(k),{onClick:R=>f(D.url),size:"sm",variant:"ghost",class:"h-6 w-6 p-0"},{default:s(()=>[a(t(U),{class:"w-3 h-3"})]),_:1},8,["onClick"])]))),128))])])):e.evidencia.archivo_size_formatted?(l(),d("div",jt,[o[22]||(o[22]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Tamaño",-1)),i("p",Ft,n(e.evidencia.archivo_size_formatted),1)])):u("",!0),(g=e.evidencia.metadata)!=null&&g.mime_type?(l(),d("div",Tt,[o[23]||(o[23]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Formato",-1)),i("p",Ut,n(e.evidencia.metadata.mime_type),1)])):u("",!0),i("div",null,[o[24]||(o[24]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Subido por",-1)),i("p",It,n(e.evidencia.usuario.name),1),i("p",Mt,n(e.evidencia.usuario.email),1)]),i("div",null,[o[25]||(o[25]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Fecha de subida",-1)),i("p",St,n(_(e.evidencia.created_at)),1)]),e.evidencia.revisado_at?(l(),d("div",Bt,[o[26]||(o[26]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Revisado",-1)),i("p",Rt,n(_(e.evidencia.revisado_at)),1),e.evidencia.revisor?(l(),d("p",Lt," por "+n(e.evidencia.revisor.name),1)):u("",!0)])):u("",!0)]}),_:1})]),_:1}),e.evidencia.observaciones_admin?(l(),x(t(V),{key:1},{default:s(()=>[a(t(j),null,{default:s(()=>[a(t(F),null,{default:s(()=>[...o[27]||(o[27]=[r("Observaciones de Revisión",-1)])]),_:1})]),_:1}),a(t(E),null,{default:s(()=>[i("p",Pt,n(e.evidencia.observaciones_admin),1)]),_:1})]),_:1})):u("",!0)])])])]}),_:1}))}});export{vo as default};
