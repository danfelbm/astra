import{d as le,u as ie,r as Z,c as h,p as re,b as g,w as t,g as i,e as s,t as u,f as e,v as G,h as r,l as de,j as f,i as c,m as d,x as J,F as E,k as j,A as ne}from"./app-BDg7E49x.js";import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DQtw_HzK.js";import{_ as A,a as S,b as q,c as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-PGdupcIB.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-BkVVIKEx.js";import{c as me,_ as b}from"./createLucideIcon-BdVmm7P_.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-DdSjcwnl.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-np36qPXZ.js";import{_ as pe}from"./Textarea.vue_vue_type_script_setup_true_lang-D-ysd6cn.js";import{_ as W}from"./Switch.vue_vue_type_script_setup_true_lang-Bnik07p_.js";import{_ as ue,a as ce,b as fe,c as ve,d as be}from"./SelectValue.vue_vue_type_script_setup_true_lang-tpq5Hvrt.js";import{_ as _e,a as ge}from"./index-BEZytBRS.js";import{_ as Y}from"./Separator.vue_vue_type_script_setup_true_lang-BeyAZ27_.js";import{t as V}from"./index-ClqqlYCG.js";import{F as ye}from"./file-text-Dsaay5EU.js";import{H as xe}from"./hash-tifbLenM.js";import{C as Ce}from"./calendar-DCovRqU-.js";import{L as ke}from"./list-BplSsm1X.js";import{S as he}from"./square-check-big-Cdh0fGGy.js";import{C as Ve}from"./circle-BDP3EDNk.js";import{P as we}from"./paperclip-CgR3NpsK.js";import{X as $e}from"./x-G0LZP78x.js";import{I as ee}from"./info-DAbqDYl0.js";import{P as ze}from"./plus-rqKvaGhk.js";import{T as Ee}from"./trash-2-2fe4ym2B.js";import{S as je}from"./save-BSnvqq-9.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-B3xcxErQ.js";import"./index-DwmLcJQk.js";import"./floating-ui.vue-BdF4JOJl.js";import"./index-Cp6BehJD.js";import"./shield-47ee-sAU.js";import"./user-DFclF7qW.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CbQ9dhwM.js";import"./chevron-right-DbDOw8_f.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CssOazgJ.js";import"./VisuallyHidden-CaM2o_WC.js";import"./index-A85eAGP1.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DmLL_yNx.js";import"./circle-alert-D2_vXx_s.js";import"./map-pin-CcReoaeK.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-Bf2ruFqZ.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-fbrGXwCx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-C_zyeJPb.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-gLQTMRvN.js";import"./tag-DQ85ruQd.js";import"./users-B4eDDANw.js";import"./target-SmQeNmiJ.js";import"./vote-DLVjarZJ.js";import"./folder-open-Lae0pyJG.js";import"./send-BMsH3-Hb.js";import"./briefcase-BBbisQqT.js";import"./megaphone-BpECQaLq.js";import"./user-check-lWsW8r3F.js";import"./clipboard-list-C9DnNK0q.js";import"./mail-C-MCuTK7.js";import"./message-square-BZT_4IMP.js";import"./external-link-q6POtaVR.js";import"./panel-left-Bq0PqqJ4.js";import"./index-DjS2Yj2q.js";import"./check-BSXmPTLR.js";import"./index--7yEigtK.js";import"./VisuallyHiddenInput-8UdSZeuv.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=me("AlignLeftIcon",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]),Se={class:"space-y-6 max-w-4xl mx-auto"},qe={class:"flex justify-between items-center"},Le={class:"text-3xl font-bold tracking-tight"},Ue={class:"space-y-2"},Fe={key:0,class:"text-sm text-destructive"},Ie={class:"space-y-2"},Ne={key:0,class:"text-sm text-destructive"},Pe={class:"space-y-2"},Te={class:"flex items-center justify-between"},De={key:0,class:"flex items-center gap-2"},Oe={class:"flex items-center gap-2"},Be={class:"text-xs text-muted-foreground"},Me={key:0,class:"text-sm text-destructive"},He={class:"space-y-1 mt-2"},Re={class:"space-y-2"},Ke={key:0,class:"text-sm text-destructive"},Xe={class:"space-y-2"},Ze={key:0,class:"text-sm text-destructive"},Ge={class:"flex gap-2"},Je={key:0,class:"space-y-2"},Qe={class:"flex-1"},We={class:"flex gap-1"},Ye={key:1,class:"text-center py-8 text-muted-foreground"},eo={class:"flex items-center justify-between"},oo={class:"space-y-0.5"},so={class:"flex items-center justify-between"},ao={class:"space-y-0.5"},to={class:"space-y-2"},lo={class:"space-y-2"},io={key:0,class:"text-sm text-destructive"},ro={class:"flex justify-end gap-2"},_s=le({layout:Q,__name:"Form",props:{campo:{},isEdit:{type:Boolean},authPermissions:{}},setup(x){var N,P,T,D,O,B,M,H,R,K;const n=x,oe=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:"Campos Personalizados",href:"/admin/contratos/campos-personalizados"},{title:n.campo?"Editar Campo":"Crear Campo",href:n.campo?`/admin/contratos/campos-personalizados/${n.campo.id}/edit`:"/admin/contratos/campos-personalizados/create"}],a=ie({nombre:((N=n.campo)==null?void 0:N.nombre)||"",slug:((P=n.campo)==null?void 0:P.slug)||"",tipo:((T=n.campo)==null?void 0:T.tipo)||"text",descripcion:((D=n.campo)==null?void 0:D.descripcion)||"",placeholder:((O=n.campo)==null?void 0:O.placeholder)||"",es_requerido:((B=n.campo)==null?void 0:B.es_requerido)||!1,activo:((M=n.campo)==null?void 0:M.activo)!==void 0?n.campo.activo:!0,orden:((H=n.campo)==null?void 0:H.orden)||0,validacion:((R=n.campo)==null?void 0:R.validacion)||"",opciones:((K=n.campo)==null?void 0:K.opciones)||[]}),C=Z(""),w=Z(!1),$=h(()=>[{value:"text",label:"Texto",icon:ye,descripcion:"Campo de texto simple"},{value:"number",label:"Número",icon:xe,descripcion:"Campo numérico"},{value:"date",label:"Fecha",icon:Ce,descripcion:"Selector de fecha"},{value:"textarea",label:"Texto largo",icon:Ae,descripcion:"Área de texto múltiples líneas"},{value:"select",label:"Selección",icon:ke,descripcion:"Lista desplegable de opciones"},{value:"checkbox",label:"Casillas",icon:he,descripcion:"Múltiple selección"},{value:"radio",label:"Radio",icon:Ve,descripcion:"Selección única"},{value:"file",label:"Archivo",icon:we,descripcion:"Carga de archivos"}]),se=h(()=>["select","checkbox","radio"].includes(a.tipo)),z=h(()=>$.value.find(m=>m.value===a.tipo)),p=h(()=>n.authPermissions.includes("contratos.manage_fields"));re(()=>a.nombre,m=>{!n.isEdit&&m&&(a.slug=m.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""))});const F=()=>{C.value.trim()&&(a.opciones||(a.opciones=[]),a.opciones.push(C.value.trim()),C.value="")},ae=m=>{a.opciones.splice(m,1)},I=(m,o)=>{const l=o==="arriba"?m-1:m+1;if(l>=0&&l<a.opciones.length){const k=a.opciones[m];a.opciones[m]=a.opciones[l],a.opciones[l]=k}},te=()=>{var m;n.isEdit?a.put(route("admin.campos-personalizados-contrato.update",(m=n.campo)==null?void 0:m.id),{onSuccess:()=>{V.success("Campo actualizado correctamente")},onError:o=>{V.error("Error al actualizar el campo")}}):a.post(route("admin.campos-personalizados-contrato.store"),{onSuccess:()=>{V.success("Campo creado correctamente")},onError:o=>{V.error("Error al crear el campo")}})};return(m,o)=>(d(),g(Q,{breadcrumbs:oe},{default:t(()=>[i("div",Se,[i("div",qe,[i("div",null,[i("h2",Le,u(x.isEdit?"Editar":"Crear")+" Campo Personalizado ",1),o[11]||(o[11]=i("p",{class:"text-muted-foreground mt-2"}," Configura un campo adicional para los contratos ",-1))]),s(e(G),{href:m.route("admin.campos-personalizados-contrato.index")},{default:t(()=>[s(e(b),{variant:"outline"},{default:t(()=>[s(e($e),{class:"w-4 h-4 mr-2"}),o[12]||(o[12]=r(" Cancelar ",-1))]),_:1})]),_:1},8,["href"])]),i("form",{onSubmit:de(te,["prevent"]),class:"space-y-6"},[s(e(A),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(q),null,{default:t(()=>[...o[13]||(o[13]=[r("Información Básica",-1)])]),_:1}),s(e(U),null,{default:t(()=>[...o[14]||(o[14]=[r(" Define el nombre y tipo del campo personalizado ",-1)])]),_:1})]),_:1}),s(e(L),{class:"space-y-4"},{default:t(()=>[i("div",Ue,[s(e(v),{for:"nombre",required:""},{default:t(()=>[...o[15]||(o[15]=[r("Nombre del Campo",-1)])]),_:1}),s(e(y),{modelValue:e(a).nombre,"onUpdate:modelValue":o[0]||(o[0]=l=>e(a).nombre=l),id:"nombre",placeholder:"Ej: Número de Referencia",disabled:!p.value},null,8,["modelValue","disabled"]),e(a).errors.nombre?(d(),c("p",Fe,u(e(a).errors.nombre),1)):f("",!0)]),i("div",Ie,[s(e(v),{for:"slug",required:""},{default:t(()=>[...o[16]||(o[16]=[r("Identificador (Slug)",-1)])]),_:1}),s(e(y),{modelValue:e(a).slug,"onUpdate:modelValue":o[1]||(o[1]=l=>e(a).slug=l),id:"slug",placeholder:"numero_referencia",pattern:"[a-z0-9_]+",disabled:x.isEdit||!p.value},null,8,["modelValue","disabled"]),o[17]||(o[17]=i("p",{class:"text-xs text-muted-foreground"}," Identificador único del campo. Solo minúsculas, números y guiones bajos. ",-1)),e(a).errors.slug?(d(),c("p",Ne,u(e(a).errors.slug),1)):f("",!0)]),i("div",Pe,[i("div",Te,[s(e(v),{for:"tipo",required:""},{default:t(()=>[...o[18]||(o[18]=[r("Tipo de Campo",-1)])]),_:1}),s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:o[2]||(o[2]=l=>w.value=!w.value)},{default:t(()=>[s(e(ee),{class:"w-4 h-4"})]),_:1})]),s(e(ue),{modelValue:e(a).tipo,"onUpdate:modelValue":o[3]||(o[3]=l=>e(a).tipo=l),disabled:x.isEdit||!p.value},{default:t(()=>[s(e(ce),null,{default:t(()=>[s(e(fe),null,{default:t(()=>[z.value?(d(),c("div",De,[(d(),g(J(z.value.icon),{class:"w-4 h-4"})),r(" "+u(z.value.label),1)])):f("",!0)]),_:1})]),_:1}),s(e(ve),null,{default:t(()=>[(d(!0),c(E,null,j($.value,l=>(d(),g(e(be),{key:l.value,value:l.value},{default:t(()=>[i("div",Oe,[(d(),g(J(l.icon),{class:"w-4 h-4"})),i("div",null,[i("div",null,u(l.label),1),i("div",Be,u(l.descripcion),1)])])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(a).errors.tipo?(d(),c("p",Me,u(e(a).errors.tipo),1)):f("",!0)]),w.value?(d(),g(e(_e),{key:0},{default:t(()=>[s(e(ee),{class:"h-4 w-4"}),s(e(ge),null,{default:t(()=>[i("ul",He,[(d(!0),c(E,null,j($.value,l=>(d(),c("li",{key:l.value},[i("strong",null,u(l.label)+":",1),r(" "+u(l.descripcion),1)]))),128))])]),_:1})]),_:1})):f("",!0),i("div",Re,[s(e(v),{for:"descripcion"},{default:t(()=>[...o[19]||(o[19]=[r("Descripción",-1)])]),_:1}),s(e(pe),{modelValue:e(a).descripcion,"onUpdate:modelValue":o[4]||(o[4]=l=>e(a).descripcion=l),id:"descripcion",placeholder:"Descripción del campo para ayudar a los usuarios",rows:"3",disabled:!p.value},null,8,["modelValue","disabled"]),e(a).errors.descripcion?(d(),c("p",Ke,u(e(a).errors.descripcion),1)):f("",!0)]),i("div",Xe,[s(e(v),{for:"placeholder"},{default:t(()=>[...o[20]||(o[20]=[r("Texto de Ayuda (Placeholder)",-1)])]),_:1}),s(e(y),{modelValue:e(a).placeholder,"onUpdate:modelValue":o[5]||(o[5]=l=>e(a).placeholder=l),id:"placeholder",placeholder:"Ej: Ingrese el número de referencia",disabled:!p.value},null,8,["modelValue","disabled"]),e(a).errors.placeholder?(d(),c("p",Ze,u(e(a).errors.placeholder),1)):f("",!0)])]),_:1})]),_:1}),se.value?(d(),g(e(A),{key:0},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(q),null,{default:t(()=>[...o[21]||(o[21]=[r("Opciones",-1)])]),_:1}),s(e(U),null,{default:t(()=>[...o[22]||(o[22]=[r(" Define las opciones disponibles para este campo ",-1)])]),_:1})]),_:1}),s(e(L),{class:"space-y-4"},{default:t(()=>{var l;return[i("div",Ge,[s(e(y),{modelValue:C.value,"onUpdate:modelValue":o[6]||(o[6]=k=>C.value=k),placeholder:"Nueva opción",onKeyup:ne(F,["enter"]),disabled:!p.value},null,8,["modelValue","disabled"]),s(e(b),{type:"button",onClick:F,disabled:!p.value},{default:t(()=>[s(e(ze),{class:"w-4 h-4 mr-2"}),o[23]||(o[23]=r(" Agregar ",-1))]),_:1},8,["disabled"])]),((l=e(a).opciones)==null?void 0:l.length)>0?(d(),c("div",Je,[(d(!0),c(E,null,j(e(a).opciones,(k,_)=>(d(),c("div",{key:_,class:"flex items-center gap-2 p-2 bg-muted rounded-lg"},[i("span",Qe,u(k),1),i("div",We,[s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:X=>I(_,"arriba"),disabled:_===0||!p.value,class:"h-8 w-8 p-0"},{default:t(()=>[...o[24]||(o[24]=[r(" ↑ ",-1)])]),_:1},8,["onClick","disabled"]),s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:X=>I(_,"abajo"),disabled:_===e(a).opciones.length-1||!p.value,class:"h-8 w-8 p-0"},{default:t(()=>[...o[25]||(o[25]=[r(" ↓ ",-1)])]),_:1},8,["onClick","disabled"]),s(e(b),{type:"button",variant:"ghost",size:"sm",onClick:X=>ae(_),disabled:!p.value,class:"text-destructive h-8 w-8 p-0"},{default:t(()=>[s(e(Ee),{class:"w-4 h-4"})]),_:1},8,["onClick","disabled"])])]))),128))])):(d(),c("div",Ye," No hay opciones configuradas "))]}),_:1})]),_:1})):f("",!0),s(e(A),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(q),null,{default:t(()=>[...o[26]||(o[26]=[r("Configuración Avanzada",-1)])]),_:1}),s(e(U),null,{default:t(()=>[...o[27]||(o[27]=[r(" Opciones adicionales de validación y comportamiento ",-1)])]),_:1})]),_:1}),s(e(L),{class:"space-y-4"},{default:t(()=>[i("div",eo,[i("div",oo,[s(e(v),null,{default:t(()=>[...o[28]||(o[28]=[r("Campo Requerido",-1)])]),_:1}),o[29]||(o[29]=i("p",{class:"text-sm text-muted-foreground"}," El campo debe ser completado obligatoriamente ",-1))]),s(e(W),{checked:e(a).es_requerido,"onUpdate:checked":o[7]||(o[7]=l=>e(a).es_requerido=l),disabled:!p.value},null,8,["checked","disabled"])]),s(e(Y)),i("div",so,[i("div",ao,[s(e(v),null,{default:t(()=>[...o[30]||(o[30]=[r("Campo Activo",-1)])]),_:1}),o[31]||(o[31]=i("p",{class:"text-sm text-muted-foreground"}," El campo será visible en los formularios ",-1))]),s(e(W),{checked:e(a).activo,"onUpdate:checked":o[8]||(o[8]=l=>e(a).activo=l),disabled:!p.value},null,8,["checked","disabled"])]),s(e(Y)),i("div",to,[s(e(v),{for:"orden"},{default:t(()=>[...o[32]||(o[32]=[r("Orden de Aparición",-1)])]),_:1}),s(e(y),{modelValue:e(a).orden,"onUpdate:modelValue":o[9]||(o[9]=l=>e(a).orden=l),modelModifiers:{number:!0},id:"orden",type:"number",min:"0",placeholder:"0",disabled:!p.value},null,8,["modelValue","disabled"]),o[33]||(o[33]=i("p",{class:"text-xs text-muted-foreground"}," Los campos se ordenan de menor a mayor. Campos con el mismo orden se muestran alfabéticamente. ",-1))]),i("div",lo,[s(e(v),{for:"validacion"},{default:t(()=>[...o[34]||(o[34]=[r("Reglas de Validación (Avanzado)",-1)])]),_:1}),s(e(y),{modelValue:e(a).validacion,"onUpdate:modelValue":o[10]||(o[10]=l=>e(a).validacion=l),id:"validacion",placeholder:"min:10|max:100",disabled:!p.value},null,8,["modelValue","disabled"]),o[35]||(o[35]=i("p",{class:"text-xs text-muted-foreground"}," Reglas de validación Laravel. Ej: min:5|max:100|regex:/^[A-Z]/ ",-1)),e(a).errors.validacion?(d(),c("p",io,u(e(a).errors.validacion),1)):f("",!0)])]),_:1})]),_:1}),i("div",ro,[s(e(G),{href:m.route("admin.campos-personalizados-contrato.index")},{default:t(()=>[s(e(b),{type:"button",variant:"outline"},{default:t(()=>[...o[36]||(o[36]=[r(" Cancelar ",-1)])]),_:1})]),_:1},8,["href"]),s(e(b),{type:"submit",disabled:e(a).processing||!p.value},{default:t(()=>[s(e(je),{class:"w-4 h-4 mr-2"}),r(" "+u(x.isEdit?"Actualizar":"Crear")+" Campo ",1)]),_:1},8,["disabled"])])],32)])]),_:1}))}});export{_s as default};
