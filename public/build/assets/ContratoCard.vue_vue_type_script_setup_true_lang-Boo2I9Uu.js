import{d as T,c as k,b as w,w as d,e as s,f as e,n as i,g as a,i as r,j as l,h as u,t as n,l as x,v as $,y as S,F as q,m as o,s as C}from"./app-DHyuBUYV.js";import{_ as D,a as F,b as P,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-Wla0exjo.js";import{_ as b}from"./index-DbdIQHsm.js";import{_ as v}from"./createLucideIcon-BImpDyGn.js";import{C as h}from"./calendar-CCWLY-F9.js";import{D as A}from"./dollar-sign-Bst1qyhW.js";import{U as j}from"./user-C4uDB6wy.js";import{C as E}from"./circle-alert-C2NBzjLb.js";import{F as N}from"./file-text-BeuaUz8A.js";import{E as M}from"./eye-BtgW_76k.js";import{S as U}from"./square-pen-CVh8_x6H.js";const L={class:"flex items-start justify-between"},R={class:"flex-1"},G=["href"],H={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},J={class:"flex items-center gap-2"},K={class:"ml-1 font-medium"},O={class:"flex items-center gap-2"},Q={class:"ml-1 font-medium"},W={key:0,class:"flex items-center gap-2"},X={class:"font-medium"},Y={key:1,class:"flex items-center gap-2"},Z={class:"truncate"},p={key:0,class:"flex items-center gap-2"},_={key:0,class:"text-gray-600 dark:text-gray-400"},tt={class:"truncate font-medium"},et={key:1,class:"flex items-center gap-3 text-xs text-gray-500"},at={class:"flex items-center gap-1"},st={key:0},ot={key:1,class:"flex items-center gap-1"},nt={key:3,class:"flex items-center gap-2"},ct={key:4},it={class:"flex justify-between text-xs text-gray-600 mb-1"},rt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},lt={class:"flex items-center justify-between"},dt={key:0,class:"flex gap-2"},mt={class:"flex items-start justify-between"},ut={class:"flex-1"},ft={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},yt={class:"flex items-center gap-2"},xt={class:"ml-1 font-medium"},gt={class:"flex items-center gap-2"},vt={class:"ml-1 font-medium"},ht={key:0,class:"flex items-center gap-2"},wt={class:"font-medium"},bt={key:1,class:"flex items-center gap-2"},kt={class:"truncate"},$t={key:2,class:"flex items-center gap-2"},Ct={key:3},jt={class:"flex justify-between text-xs text-gray-600 mb-1"},Mt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},zt={class:"flex items-center justify-between"},Bt={key:0,class:"flex gap-2"},qt=T({__name:"ContratoCard",props:{contrato:{},showProyecto:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},viewMode:{default:"admin"},compact:{type:Boolean,default:!1}},setup(t){const m=t,z=k(()=>({borrador:"bg-gray-100 text-gray-800",activo:"bg-green-100 text-green-800",finalizado:"bg-blue-100 text-blue-800",cancelado:"bg-red-100 text-red-800"})[m.contrato.estado]||"bg-gray-100 text-gray-800"),B=k(()=>m.contrato.estado==="cancelado"?"bg-red-500":m.contrato.estado==="finalizado"?"bg-blue-500":m.contrato.esta_vencido?"bg-red-500":m.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),y=f=>f?new Date(f).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",I=k(()=>m.viewMode==="user"?`/miembro/mis-contratos/${m.contrato.id}`:`/admin/contratos/${m.contrato.id}`);return(f,c)=>t.viewMode==="user"?(o(),w(e($),{key:0,href:I.value,class:"block"},{default:d(()=>[s(e(D),{class:"hover:shadow-lg transition-all duration-300 cursor-pointer hover:border-primary"},{default:d(()=>[s(e(F),{class:i(t.compact?"pb-3":"")},{default:d(()=>[a("div",L,[a("div",R,[s(e(P),{class:i([t.compact?"text-base":"text-lg","font-semibold mb-1"])},{default:d(()=>[u(n(t.contrato.nombre),1)]),_:1},8,["class"]),t.showProyecto&&t.contrato.proyecto?(o(),r("div",{key:0,class:i([t.compact?"text-xs":"text-sm","text-gray-600 dark:text-gray-400"])},[t.viewMode==="user"?(o(),r("a",{key:0,href:`/miembro/mis-proyectos/${t.contrato.proyecto.id}`,class:"hover:text-primary transition-colors",onClick:c[0]||(c[0]=x(g=>e(C).visit(`/miembro/mis-proyectos/${t.contrato.proyecto.id}`),["stop","prevent"]))},n(t.contrato.proyecto.nombre),9,G)):(o(),w(e($),{key:1,href:`/admin/proyectos/${t.contrato.proyecto.id}`,class:"hover:text-primary transition-colors"},{default:d(()=>[u(n(t.contrato.proyecto.nombre),1)]),_:1},8,["href"]))],2)):l("",!0)]),s(e(b),{class:i([z.value,t.compact?"text-xs px-2 py-0.5":""])},{default:d(()=>[u(n(t.contrato.estado),1)]),_:1},8,["class"])])]),_:1},8,["class"]),s(e(V),{class:i(t.compact?"space-y-2 pt-0":"space-y-4")},{default:d(()=>[t.contrato.descripcion&&!t.compact?(o(),r("p",H,n(t.contrato.descripcion),1)):l("",!0),t.viewMode==="admin"?(o(),r("div",{key:1,class:i(["grid grid-cols-2 text-sm",t.compact?"gap-2":"gap-3"])},[a("div",J,[s(e(h),{class:"h-4 w-4 text-gray-400"}),a("div",null,[c[6]||(c[6]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Inicio:",-1)),a("span",K,n(y(t.contrato.fecha_inicio)),1)])]),a("div",O,[s(e(h),{class:"h-4 w-4 text-gray-400"}),a("div",null,[c[7]||(c[7]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Fin:",-1)),a("span",Q,n(y(t.contrato.fecha_fin)),1)])]),t.contrato.monto_formateado?(o(),r("div",W,[s(e(A),{class:"h-4 w-4 text-gray-400"}),a("span",X,n(t.contrato.monto_formateado),1)])):l("",!0),t.contrato.responsable?(o(),r("div",Y,[s(e(j),{class:"h-4 w-4 text-gray-400"}),a("span",Z,n(t.contrato.responsable.name),1)])):l("",!0)],2)):t.viewMode==="user"?(o(),r("div",{key:2,class:i(t.compact?"text-xs space-y-1":"text-sm")},[t.contrato.responsable?(o(),r("div",p,[s(e(j),{class:i([t.compact?"h-3 w-3":"h-4 w-4","text-gray-400"])},null,8,["class"]),t.compact?l("",!0):(o(),r("span",_,"Responsable:")),a("span",tt,n(t.contrato.responsable.name),1)])):l("",!0),t.compact?(o(),r("div",et,[a("div",at,[s(e(h),{class:"h-3 w-3"}),a("span",null,n(y(t.contrato.fecha_inicio)),1)]),t.contrato.fecha_fin?(o(),r("span",st,"→")):l("",!0),t.contrato.fecha_fin?(o(),r("div",ot,[a("span",null,n(y(t.contrato.fecha_fin)),1)])):l("",!0)])):l("",!0)],2)):l("",!0),t.contrato.esta_vencido||t.contrato.esta_proximo_vencer?(o(),r("div",nt,[s(e(E),{class:i(["h-4 w-4",t.contrato.esta_vencido?"text-red-500":"text-yellow-500"])},null,8,["class"]),a("span",{class:i(["text-sm font-medium",t.contrato.esta_vencido?"text-red-600":"text-yellow-600"])},n(t.contrato.esta_vencido?"Contrato vencido":`Vence en ${t.contrato.dias_restantes} días`),3)])):l("",!0),!t.compact&&t.contrato.estado==="activo"&&t.contrato.porcentaje_transcurrido!==void 0?(o(),r("div",ct,[a("div",it,[c[8]||(c[8]=a("span",null,"Progreso",-1)),a("span",null,n(t.contrato.porcentaje_transcurrido)+"%",1)]),a("div",rt,[a("div",{class:i([B.value,"h-2 rounded-full transition-all duration-300"]),style:S({width:`${t.contrato.porcentaje_transcurrido}%`})},null,6)])])):l("",!0),a("div",lt,[s(e(b),{variant:"outline",class:i(t.compact?"text-xs py-0.5":"text-xs")},{default:d(()=>[s(e(N),{class:i(t.compact?"h-2.5 w-2.5 mr-1":"h-3 w-3 mr-1")},null,8,["class"]),u(" "+n(t.contrato.tipo),1)]),_:1},8,["class"]),t.showActions&&(t.viewMode==="admin"||!t.compact)?(o(),r("div",dt,[t.viewMode==="user"?(o(),w(e(v),{key:0,size:"sm",variant:"ghost",onClick:c[1]||(c[1]=x(g=>f.$inertia.get(`/miembro/mis-contratos/${t.contrato.id}`),["stop"]))},{default:d(()=>[s(e(M),{class:"h-4 w-4"})]),_:1})):(o(),r(q,{key:1},[s(e(v),{size:"sm",variant:"ghost",onClick:c[2]||(c[2]=x(g=>f.$inertia.get(`/admin/contratos/${t.contrato.id}`),["stop"]))},{default:d(()=>[s(e(M),{class:"h-4 w-4"})]),_:1}),s(e(v),{size:"sm",variant:"ghost",onClick:c[3]||(c[3]=x(g=>f.$inertia.get(`/admin/contratos/${t.contrato.id}/edit`),["stop"]))},{default:d(()=>[s(e(U),{class:"h-4 w-4"})]),_:1})],64))])):l("",!0)])]),_:1},8,["class"])]),_:1})]),_:1},8,["href"])):(o(),w(e(D),{key:1,class:"hover:shadow-lg transition-all duration-300"},{default:d(()=>[s(e(F),{class:i(t.compact?"pb-3":"")},{default:d(()=>[a("div",mt,[a("div",ut,[s(e(P),{class:i([t.compact?"text-base":"text-lg","font-semibold mb-1"])},{default:d(()=>[u(n(t.contrato.nombre),1)]),_:1},8,["class"]),t.showProyecto&&t.contrato.proyecto?(o(),r("div",{key:0,class:i([t.compact?"text-xs":"text-sm","text-gray-600 dark:text-gray-400"])},[s(e($),{href:`/admin/proyectos/${t.contrato.proyecto.id}`,class:"hover:text-primary transition-colors"},{default:d(()=>[u(n(t.contrato.proyecto.nombre),1)]),_:1},8,["href"])],2)):l("",!0)]),s(e(b),{class:i([z.value,t.compact?"text-xs px-2 py-0.5":""])},{default:d(()=>[u(n(t.contrato.estado),1)]),_:1},8,["class"])])]),_:1},8,["class"]),s(e(V),{class:i(t.compact?"space-y-2 pt-0":"space-y-4")},{default:d(()=>[t.contrato.descripcion&&!t.compact?(o(),r("p",ft,n(t.contrato.descripcion),1)):l("",!0),t.viewMode==="admin"?(o(),r("div",{key:1,class:i(["grid grid-cols-2 text-sm",t.compact?"gap-2":"gap-3"])},[a("div",yt,[s(e(h),{class:"h-4 w-4 text-gray-400"}),a("div",null,[c[9]||(c[9]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Inicio:",-1)),a("span",xt,n(y(t.contrato.fecha_inicio)),1)])]),a("div",gt,[s(e(h),{class:"h-4 w-4 text-gray-400"}),a("div",null,[c[10]||(c[10]=a("span",{class:"text-gray-600 dark:text-gray-400"},"Fin:",-1)),a("span",vt,n(y(t.contrato.fecha_fin)),1)])]),t.contrato.monto_formateado?(o(),r("div",ht,[s(e(A),{class:"h-4 w-4 text-gray-400"}),a("span",wt,n(t.contrato.monto_formateado),1)])):l("",!0),t.contrato.responsable?(o(),r("div",bt,[s(e(j),{class:"h-4 w-4 text-gray-400"}),a("span",kt,n(t.contrato.responsable.name),1)])):l("",!0)],2)):l("",!0),t.contrato.esta_vencido||t.contrato.esta_proximo_vencer?(o(),r("div",$t,[s(e(E),{class:i(["h-4 w-4",t.contrato.esta_vencido?"text-red-500":"text-yellow-500"])},null,8,["class"]),a("span",{class:i(["text-sm font-medium",t.contrato.esta_vencido?"text-red-600":"text-yellow-600"])},n(t.contrato.esta_vencido?"Contrato vencido":`Vence en ${t.contrato.dias_restantes} días`),3)])):l("",!0),!t.compact&&t.contrato.estado==="activo"&&t.contrato.porcentaje_transcurrido!==void 0?(o(),r("div",Ct,[a("div",jt,[c[11]||(c[11]=a("span",null,"Progreso",-1)),a("span",null,n(t.contrato.porcentaje_transcurrido)+"%",1)]),a("div",Mt,[a("div",{class:i([B.value,"h-2 rounded-full transition-all duration-300"]),style:S({width:`${t.contrato.porcentaje_transcurrido}%`})},null,6)])])):l("",!0),a("div",zt,[s(e(b),{variant:"outline",class:i(t.compact?"text-xs py-0.5":"text-xs")},{default:d(()=>[s(e(N),{class:i(t.compact?"h-2.5 w-2.5 mr-1":"h-3 w-3 mr-1")},null,8,["class"]),u(" "+n(t.contrato.tipo),1)]),_:1},8,["class"]),t.showActions?(o(),r("div",Bt,[s(e(v),{size:"sm",variant:"ghost",onClick:c[4]||(c[4]=x(g=>e(C).visit(`/admin/contratos/${t.contrato.id}`),["stop"]))},{default:d(()=>[s(e(M),{class:"h-4 w-4"})]),_:1}),s(e(v),{size:"sm",variant:"ghost",onClick:c[5]||(c[5]=x(g=>e(C).visit(`/admin/contratos/${t.contrato.id}/edit`),["stop"]))},{default:d(()=>[s(e(U),{class:"h-4 w-4"})]),_:1})])):l("",!0)])]),_:1},8,["class"])]),_:1}))}});export{qt as _};
