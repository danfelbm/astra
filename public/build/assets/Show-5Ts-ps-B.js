import{d as j,r as H,c as S,i as n,e,f as a,q as z,w as d,g as s,b as h,j as c,J as B,s as q,h as l,m as r,v as k,n as D,t as o,F as $,k as N,al as F,x as O}from"./app-DB0z6AcD.js";import{_ as A}from"./index-DazicePQ.js";import{_ as b}from"./createLucideIcon-C0KNMmP4.js";import{_ as m,c as f,a as _,b as p}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cym6yZrQ.js";import{_ as P}from"./Label.vue_vue_type_script_setup_true_lang-B7jp6xHp.js";import{_ as T}from"./UserLayout.vue_vue_type_script_setup_true_lang-DP9AcoBJ.js";import{_ as U}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-BLFCALRX.js";import{A as I}from"./arrow-left-5MDs3Rps.js";import{S as w}from"./square-pen-DRCXic2z.js";import{M as J}from"./message-square-DLMe_X_M.js";import{U as R}from"./user-DKfefuqP.js";import{C as G}from"./clock-Ct1Vl6KA.js";import{H as K}from"./history-DqsCTdzL.js";import{e as Q,C as W}from"./SelectValue.vue_vue_type_script_setup_true_lang-B5pEWv0J.js";import"./index-Cene9ECP.js";import"./Input.vue_vue_type_script_setup_true_lang-eAY7thrg.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BQYDCe7s.js";import"./index-CUIGqQ1J.js";import"./floating-ui.vue-CtdlEW6y.js";import"./x-B4Z6iAyV.js";import"./index-eYsuQMrG.js";import"./shield-DZvzDvTp.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CmUril7S.js";import"./chevron-right-DokEtfro.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DZ3d3ZJp.js";import"./VisuallyHidden-o1W3wGop.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DIhZ1DWu.js";import"./index-DyKj_zrb.js";import"./circle-alert-B7SEimEW.js";import"./map-pin-KN8k1BBM.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Bx-7YCzU.js";import"./usePermissions-DADcpVaw.js";import"./square-check-big-Xc78DjX5.js";import"./file-text-BAB7Xlj3.js";import"./users-BnSa6V1T.js";import"./folder-open-CY01C9Ds.js";import"./index-CAaQibj2.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-BdQVRvl1.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BV7oG5Rw.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-Ci3HwMfm.js";import"./eye-BR1aCIlZ.js";import"./check-BD3tC7Uv.js";const X={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Y={class:"flex items-center justify-between"},Z={class:"flex gap-2"},tt={class:"flex items-center justify-between"},at={class:"flex items-center gap-4"},et={class:"flex items-center gap-2"},st={class:"text-sm text-muted-foreground"},dt={class:"text-right text-sm text-muted-foreground"},it={key:0},rt=["innerHTML"],ot={key:0,class:"text-center py-8"},nt={key:1,class:"space-y-6"},lt={class:"grid gap-2 md:grid-cols-3"},ut={class:"md:col-span-1"},ct={key:0,class:"text-red-500"},mt={key:0,class:"text-xs text-muted-foreground mt-1"},ft={class:"md:col-span-2"},xt={class:"min-h-[2rem] flex items-center"},bt={class:"text-muted-foreground"},_t={class:"mb-4"},pt={class:"grid gap-4 md:grid-cols-3"},gt={class:"flex items-center gap-2"},ht={class:"text-xs text-muted-foreground"},vt={key:0,class:"text-xs text-green-600 dark:text-green-400"},yt={key:1,class:"text-xs text-orange-600 dark:text-orange-400"},kt={key:2,class:"text-xs text-blue-600 dark:text-blue-400"},wt={key:0},Ct={key:1,class:"text-center"},St={key:2,class:"text-center"},Dt={class:"text-xs space-y-1"},$t={class:"font-medium"},At={class:"font-medium"},Et={key:0},Lt={class:"font-medium"},ha=j({__name:"Show",props:{candidatura:{},configuracion_campos:{},canEditOwn:{type:Boolean},canViewPublic:{type:Boolean}},setup(i){const v=i,E=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mi Candidatura",href:"/miembro/candidaturas"},{title:"Ver Candidatura",href:"#"}],x=H(!1),y=S(()=>v.candidatura.estado==="borrador"||v.candidatura.estado==="rechazado"),L=S(()=>!!v.candidatura.comentarios_admin),V=()=>{x.value=!x.value},M=(g,t)=>{if(!t)return"No especificado";if(g.type==="checkbox")return Array.isArray(t)?t.join(", "):t;if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}/.test(t))try{return new Date(t).toLocaleDateString("es-ES")}catch{return t}return Array.isArray(t)?t.join(", "):typeof t=="number"?t.toString():String(t)},C=g=>new Date(g).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(g,t)=>(r(),n($,null,[e(a(z),{title:"Mi Candidatura"}),e(T,{breadcrumbs:E},{default:d(()=>[s("div",X,[s("div",Y,[t[3]||(t[3]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Vista detallada de tu perfil de candidatura ")],-1)),s("div",Z,[e(a(b),{variant:"outline",onClick:t[0]||(t[0]=u=>a(q).visit("/miembro/candidaturas"))},{default:d(()=>[e(a(I),{class:"mr-2 h-4 w-4"}),t[1]||(t[1]=l(" Volver ",-1))]),_:1}),y.value?(r(),h(a(k),{key:0,href:`/miembro/candidaturas/${i.candidatura.id}/edit`},{default:d(()=>[e(a(b),null,{default:d(()=>[e(a(w),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=l(" Editar ",-1))]),_:1})]),_:1},8,["href"])):c("",!0)])]),e(a(m),null,{default:d(()=>[e(a(f),{class:"p-6"},{default:d(()=>[s("div",tt,[s("div",at,[s("div",et,[e(a(A),{class:D([i.candidatura.estado_color,"text-sm"])},{default:d(()=>[l(o(i.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",st," Versión "+o(i.candidatura.version),1)])]),s("div",dt,[s("p",null,"Creada: "+o(C(i.candidatura.created_at)),1),s("p",null,"Actualizada: "+o(C(i.candidatura.updated_at)),1),i.candidatura.fecha_aprobacion?(r(),n("p",it," Aprobada: "+o(i.candidatura.fecha_aprobacion),1)):c("",!0)])])]),_:1})]),_:1}),L.value?(r(),h(a(m),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:d(()=>[e(a(_),null,{default:d(()=>[e(a(p),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:d(()=>[e(a(J),{class:"h-5 w-5"}),t[4]||(t[4]=l(" Comentarios de la comisión ",-1))]),_:1})]),_:1}),e(a(f),null,{default:d(()=>[s("div",{class:"text-blue-700 dark:text-blue-300 prose prose-sm max-w-none",innerHTML:i.candidatura.comentarios_admin},null,8,rt)]),_:1})]),_:1})):c("",!0),e(a(m),null,{default:d(()=>[e(a(_),null,{default:d(()=>[e(a(p),{class:"flex items-center gap-2"},{default:d(()=>[e(a(R),{class:"h-5 w-5"}),t[5]||(t[5]=l(" Información de Candidatura ",-1))]),_:1})]),_:1}),e(a(f),null,{default:d(()=>[!i.candidatura.formulario_data||Object.keys(i.candidatura.formulario_data).length===0?(r(),n("div",ot,[e(a(G),{class:"mx-auto h-12 w-12 text-yellow-500"}),t[7]||(t[7]=s("h3",{class:"mt-4 text-lg font-medium"},"Candidatura vacía",-1)),t[8]||(t[8]=s("p",{class:"text-muted-foreground mb-4"},"Aún no has completado tu perfil de candidatura.",-1)),y.value?(r(),h(a(k),{key:0,href:`/miembro/candidaturas/${i.candidatura.id}/edit`},{default:d(()=>[e(a(b),null,{default:d(()=>[e(a(w),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=l(" Completar Candidatura ",-1))]),_:1})]),_:1},8,["href"])):c("",!0)])):(r(),n("div",nt,[(r(!0),n($,null,N(i.configuracion_campos,u=>(r(),n("div",{key:u.id,class:"border-b pb-4 last:border-b-0"},[s("div",lt,[s("div",ut,[e(a(P),{class:"text-sm font-medium flex items-center gap-1"},{default:d(()=>[l(o(u.title)+" ",1),u.required?(r(),n("span",ct,"*")):c("",!0)]),_:2},1024),u.description?(r(),n("p",mt,o(u.description),1)):c("",!0)]),s("div",ft,[s("div",xt,[s("p",bt,o(M(u,i.candidatura.formulario_data[u.id])),1)])])])]))),128))]))]),_:1})]),_:1}),B(s("div",_t,[e(U,{"candidatura-id":i.candidatura.id,"version-actual":i.candidatura.version,"is-admin":!1},null,8,["candidatura-id","version-actual"])],512),[[F,x.value]]),s("div",pt,[e(a(m),{class:"h-fit"},{default:d(()=>[e(a(_),{class:"pb-3"},{default:d(()=>[e(a(p),{class:"text-base"},{default:d(()=>[...t[9]||(t[9]=[l("Estado",-1)])]),_:1})]),_:1}),e(a(f),{class:"space-y-2"},{default:d(()=>[s("div",gt,[e(a(A),{class:D([i.candidatura.estado_color,"text-xs"])},{default:d(()=>[l(o(i.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",ht,"v"+o(i.candidatura.version),1)]),i.candidatura.estado==="aprobado"?(r(),n("div",vt," ✓ Lista para convocatorias ")):i.candidatura.estado==="rechazado"?(r(),n("div",yt," Requiere corrección ")):(r(),n("div",kt,o(i.candidatura.formulario_data&&Object.keys(i.candidatura.formulario_data).length>0?"En revisión":"Pendiente de completar"),1))]),_:1})]),_:1}),e(a(m),{class:"h-fit"},{default:d(()=>[e(a(_),{class:"pb-3"},{default:d(()=>[e(a(p),{class:"text-base"},{default:d(()=>[...t[10]||(t[10]=[l("Acciones",-1)])]),_:1})]),_:1}),e(a(f),{class:"space-y-2"},{default:d(()=>[e(a(b),{onClick:V,variant:"outline",class:"w-full"},{default:d(()=>[e(a(K),{class:"mr-2 h-4 w-4"}),l(" "+o(x.value?"Ocultar":"Mostrar")+" Historial de Cambios ",1),(r(),h(O(x.value?a(Q):a(W)),{class:"ml-auto h-4 w-4"}))]),_:1}),y.value?(r(),n("div",wt,[e(a(k),{href:`/miembro/candidaturas/${i.candidatura.id}/edit`},{default:d(()=>[e(a(b),{class:"w-full"},{default:d(()=>[e(a(w),{class:"mr-2 h-4 w-4"}),l(" "+o(i.candidatura.estado==="rechazado"?"Corregir":"Editar"),1)]),_:1})]),_:1},8,["href"])])):i.candidatura.estado==="aprobado"?(r(),n("div",Ct,[...t[11]||(t[11]=[s("p",{class:"text-xs text-green-600 dark:text-green-400 font-medium"}," ✓ Lista para usar ",-1)])])):(r(),n("div",St,[...t[12]||(t[12]=[s("p",{class:"text-xs text-blue-600 dark:text-blue-400 font-medium"}," ⏳ En revisión ",-1)])]))]),_:1})]),_:1}),e(a(m),{class:"h-fit"},{default:d(()=>[e(a(_),{class:"pb-3"},{default:d(()=>[e(a(p),{class:"text-base"},{default:d(()=>[...t[13]||(t[13]=[l("Configuración actual",-1)])]),_:1})]),_:1}),e(a(f),{class:"space-y-2"},{default:d(()=>[s("div",Dt,[s("div",null,[t[14]||(t[14]=s("span",{class:"text-muted-foreground"},"Creada:",-1)),s("p",$t,o(new Date(i.candidatura.created_at).toLocaleDateString("es-ES")),1)]),s("div",null,[t[15]||(t[15]=s("span",{class:"text-muted-foreground"},"Actualizada:",-1)),s("p",At,o(new Date(i.candidatura.updated_at).toLocaleDateString("es-ES")),1)]),i.candidatura.fecha_aprobacion?(r(),n("div",Et,[t[16]||(t[16]=s("span",{class:"text-muted-foreground"},"Aprobada:",-1)),s("p",Lt,o(i.candidatura.fecha_aprobacion),1)])):c("",!0)])]),_:1})]),_:1})])])]),_:1})],64))}});export{ha as default};
