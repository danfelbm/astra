import{_ as me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BeDoGI8L.js";import{d as ce,r as z,C as K,i as p,e as u,f as l,u as e,p as fe,w as s,g as o,j as b,b as _,h as n,t as c,n as k,F as C,k as N,W as F}from"./app-CR-2XB3C.js";import{_ as q,c as E,a as pe,b as ve}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXc292e6.js";import{_ as f}from"./createLucideIcon-DpqMcHcs.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-87jkhHIN.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-CTFOyKy8.js";import{_ as G}from"./index-Bv2D6OQs.js";import{_ as _e,a as ge,b as U,c as $,d as be,e as v}from"./TableHeader.vue_vue_type_script_setup_true_lang-D40BEwBz.js";import{_ as I,a as L,b as O,c as R,d as W,C as xe}from"./SelectValue.vue_vue_type_script_setup_true_lang-e9C0UTAB.js";import{t as g}from"./index-DEPFt58J.js";import{P as X}from"./plus-DafQFHWU.js";import{S as B}from"./save-fZDcFWE3.js";import{X as M}from"./x-BtC0hBQf.js";import{a as H}from"./target-PRmdjiaM.js";import{C as ke}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang--Zg1QsWs.js";import{S as Q}from"./square-pen-DE73kWOA.js";import{T as Y}from"./trash-2-Ba23kG3g.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Ert7fISp.js";import"./index-BZs2h2K_.js";import"./floating-ui.vue-BhiDC_BV.js";import"./index-E07s-QL0.js";import"./shield-4oMICjJq.js";import"./user-DHtFWwAY.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Dfpf6sX3.js";import"./VisuallyHidden-BWbUvSRY.js";import"./index-B_J_AOJU.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-y6H-OSrV.js";import"./circle-alert-Ce-R__0b.js";import"./map-pin-CH_1kWrL.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-D_zYDN4Z.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-D4bt_NVp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-DnobICLq.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DspZ-Okb.js";import"./users-2q8ym3rK.js";import"./vote-BGunVfqa.js";import"./folder-open-B73Z5LJI.js";import"./send-DrZ9C7tM.js";import"./file-text-bOjPW4fi.js";import"./briefcase-VNV3HxYQ.js";import"./calendar-K2tiWc-j.js";import"./megaphone-B1ul-h89.js";import"./user-check-DqzH6i1N.js";import"./mail-mHQkAKOp.js";import"./message-square-CKxkeyaY.js";import"./external-link-BksJeFVg.js";import"./panel-left-C66hQ-oC.js";import"./check-COi2Akip.js";import"./index-CuEHpEfT.js";import"./nullish-CHIgUVhi.js";const Ce={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ye={class:"flex justify-between items-center"},we={key:0,class:"grid grid-cols-3 gap-4"},Ve={class:"text-2xl font-bold"},qe={class:"text-2xl font-bold"},Ee={class:"text-2xl font-bold"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={key:0,class:"text-xs text-red-500 mt-1"},Se={class:"flex items-center gap-2"},ze={class:"flex items-center gap-2"},Ne={class:"md:col-span-2"},Ue={class:"flex gap-2 mt-4"},je={class:"flex items-center gap-2"},De={class:"flex items-center gap-2"},Ae={class:"flex justify-end gap-2"},Te={class:"flex items-center gap-2"},Be={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},Pe={class:"flex justify-end gap-2"},Fe={class:"p-4 space-y-4"},Ge={class:"flex items-center justify-between"},Ie={class:"font-medium flex items-center gap-2"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oe={class:"flex gap-2 mt-4"},Re={key:1,class:"space-y-2"},We={key:0,class:"flex-1 grid grid-cols-2 gap-4"},Xe={class:"flex gap-2"},He={key:1,class:"flex-1 flex items-center justify-between"},Je={class:"font-medium"},Ke={key:0,class:"text-sm text-gray-500"},Qe={class:"flex gap-2"},Ye={key:2,class:"text-center py-8 text-gray-500"},Kl=ce({__name:"Index",props:{categorias:{},estadisticas:{},colores:{},iconos:{}},setup(Ze){const Z=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Categorías de Etiquetas",href:"/admin/categorias-etiquetas"}],j=z(null),h=z(!1),P=z(new Set),w=z(null),D=z(null),i=K({nombre:"",color:"gray",icono:"Tag",descripcion:"",orden:0}),m=K({nombre:"",descripcion:"",categoria_etiqueta_id:0}),ee=()=>{h.value=!0,j.value=null,i.reset()},le=r=>{j.value=r.id,h.value=!1,i.nombre=r.nombre,i.color=r.color,i.icono=r.icono||"Tag",i.descripcion=r.descripcion||"",i.orden=r.orden},A=()=>{j.value=null,h.value=!1,i.reset()},te=()=>{i.post("/admin/categorias-etiquetas",{preserveScroll:!0,onSuccess:()=>{g.success("Categoría creada exitosamente"),A()},onError:()=>{g.error("Error al crear la categoría")}})},se=r=>{i.put(`/admin/categorias-etiquetas/${r}`,{preserveScroll:!0,onSuccess:()=>{g.success("Categoría actualizada"),A()},onError:()=>{g.error("Error al actualizar")}})},ae=r=>{confirm(`¿Eliminar la categoría "${r.nombre}"? Las etiquetas se reasignarán.`)&&F.delete(`/admin/categorias-etiquetas/${r.id}`,{preserveScroll:!0,onSuccess:()=>{g.success("Categoría eliminada")}})},oe=r=>{F.patch(`/admin/categorias-etiquetas/${r.id}/toggle-active`,{},{preserveScroll:!0,onSuccess:()=>{g.success(r.activo?"Categoría desactivada":"Categoría activada")}})},re=r=>{const t=P.value;t.has(r)?t.delete(r):t.add(r)},J=r=>{w.value=r,D.value=null,m.reset(),m.categoria_etiqueta_id=r},ie=r=>{D.value=r.id,w.value=null,m.nombre=r.nombre,m.descripcion=r.descripcion||"",m.categoria_etiqueta_id=r.categoria_etiqueta_id},T=()=>{w.value=null,D.value=null,m.reset()},ne=()=>{m.post("/admin/etiquetas",{preserveScroll:!0,onSuccess:()=>{g.success("Etiqueta creada exitosamente"),T()},onError:()=>{g.error("Error al crear la etiqueta")}})},de=r=>{m.put(`/admin/etiquetas/${r}`,{preserveScroll:!0,onSuccess:()=>{g.success("Etiqueta actualizada exitosamente"),T()},onError:()=>{g.error("Error al actualizar la etiqueta")}})},ue=r=>{confirm("¿Estás seguro de eliminar esta etiqueta?")&&F.delete(`/admin/etiquetas/${r}`,{preserveScroll:!0,onSuccess:()=>{g.success("Etiqueta eliminada exitosamente")},onError:()=>{g.error("Error al eliminar la etiqueta")}})},S=r=>({gray:"bg-gray-500",red:"bg-red-500",orange:"bg-orange-500",amber:"bg-amber-500",yellow:"bg-yellow-500",lime:"bg-lime-500",green:"bg-green-500",emerald:"bg-emerald-500",teal:"bg-teal-500",cyan:"bg-cyan-500",sky:"bg-sky-500",blue:"bg-blue-500",indigo:"bg-indigo-500",violet:"bg-violet-500",purple:"bg-purple-500",fuchsia:"bg-fuchsia-500",pink:"bg-pink-500",rose:"bg-rose-500"})[r]||"bg-gray-500";return(r,t)=>(u(),p(C,null,[l(e(fe),{title:"Categorías de Etiquetas"}),l(me,{breadcrumbs:Z},{default:s(()=>[o("div",Ce,[o("div",ye,[t[13]||(t[13]=o("div",null,[o("h1",{class:"text-2xl font-bold"},"Categorías de Etiquetas"),o("p",{class:"text-sm text-muted-foreground mt-1"}," Administra las categorías para organizar las etiquetas de proyectos ")],-1)),h.value?b("",!0):(u(),_(e(f),{key:0,onClick:ee},{default:s(()=>[l(e(X),{class:"mr-2 h-4 w-4"}),t[12]||(t[12]=n(" Nueva Categoría ",-1))]),_:1}))]),r.estadisticas?(u(),p("div",we,[l(e(q),null,{default:s(()=>[l(e(E),{class:"pt-6"},{default:s(()=>[o("div",Ve,c(r.estadisticas.total_categorias),1),t[14]||(t[14]=o("p",{class:"text-xs text-muted-foreground"},"Categorías totales",-1))]),_:1})]),_:1}),l(e(q),null,{default:s(()=>[l(e(E),{class:"pt-6"},{default:s(()=>[o("div",qe,c(r.estadisticas.categorias_activas),1),t[15]||(t[15]=o("p",{class:"text-xs text-muted-foreground"},"Categorías activas",-1))]),_:1})]),_:1}),l(e(q),null,{default:s(()=>[l(e(E),{class:"pt-6"},{default:s(()=>[o("div",Ee,c(r.estadisticas.total_etiquetas),1),t[16]||(t[16]=o("p",{class:"text-xs text-muted-foreground"},"Etiquetas totales",-1))]),_:1})]),_:1})])):b("",!0),h.value?(u(),_(e(q),{key:1},{default:s(()=>[l(e(pe),null,{default:s(()=>[l(e(ve),null,{default:s(()=>[...t[17]||(t[17]=[n("Nueva Categoría",-1)])]),_:1})]),_:1}),l(e(E),null,{default:s(()=>[o("div",$e,[o("div",null,[l(e(y),null,{default:s(()=>[...t[18]||(t[18]=[n("Nombre *",-1)])]),_:1}),l(e(x),{modelValue:e(i).nombre,"onUpdate:modelValue":t[0]||(t[0]=a=>e(i).nombre=a),placeholder:"Nombre de la categoría",class:k({"border-red-500":e(i).errors.nombre})},null,8,["modelValue","class"]),e(i).errors.nombre?(u(),p("p",he,c(e(i).errors.nombre),1)):b("",!0)]),o("div",null,[l(e(y),null,{default:s(()=>[...t[19]||(t[19]=[n("Color",-1)])]),_:1}),l(e(I),{modelValue:e(i).color,"onUpdate:modelValue":t[1]||(t[1]=a=>e(i).color=a)},{default:s(()=>[l(e(L),null,{default:s(()=>[o("div",Se,[o("div",{class:k([S(e(i).color),"w-4 h-4 rounded"])},null,2),l(e(O),{placeholder:e(i).color},null,8,["placeholder"])])]),_:1}),l(e(R),null,{default:s(()=>[(u(!0),p(C,null,N(r.colores,a=>(u(),_(e(W),{key:a,value:a},{default:s(()=>[o("div",ze,[o("div",{class:k([S(a),"w-4 h-4 rounded"])},null,2),n(" "+c(a),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(y),null,{default:s(()=>[...t[20]||(t[20]=[n("Icono",-1)])]),_:1}),l(e(I),{modelValue:e(i).icono,"onUpdate:modelValue":t[2]||(t[2]=a=>e(i).icono=a)},{default:s(()=>[l(e(L),null,{default:s(()=>[l(e(O),{placeholder:e(i).icono},null,8,["placeholder"])]),_:1}),l(e(R),null,{default:s(()=>[(u(!0),p(C,null,N(r.iconos,a=>(u(),_(e(W),{key:a,value:a},{default:s(()=>[n(c(a),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(y),null,{default:s(()=>[...t[21]||(t[21]=[n("Orden",-1)])]),_:1}),l(e(x),{modelValue:e(i).orden,"onUpdate:modelValue":t[3]||(t[3]=a=>e(i).orden=a),modelModifiers:{number:!0},type:"number",placeholder:"0"},null,8,["modelValue"])]),o("div",Ne,[l(e(y),null,{default:s(()=>[...t[22]||(t[22]=[n("Descripción",-1)])]),_:1}),l(e(x),{modelValue:e(i).descripcion,"onUpdate:modelValue":t[4]||(t[4]=a=>e(i).descripcion=a),placeholder:"Descripción opcional"},null,8,["modelValue"])])]),o("div",Ue,[l(e(f),{onClick:te,disabled:e(i).processing},{default:s(()=>[l(e(B),{class:"mr-2 h-4 w-4"}),t[23]||(t[23]=n(" Guardar ",-1))]),_:1},8,["disabled"]),l(e(f),{variant:"outline",onClick:A},{default:s(()=>[l(e(M),{class:"mr-2 h-4 w-4"}),t[24]||(t[24]=n(" Cancelar ",-1))]),_:1})])]),_:1})]),_:1})):b("",!0),l(e(q),null,{default:s(()=>[l(e(E),{class:"p-0"},{default:s(()=>[l(e(_e),null,{default:s(()=>[l(e(ge),null,{default:s(()=>[l(e(U),null,{default:s(()=>[l(e($),null,{default:s(()=>[...t[25]||(t[25]=[n("Nombre",-1)])]),_:1}),l(e($),null,{default:s(()=>[...t[26]||(t[26]=[n("Color",-1)])]),_:1}),l(e($),null,{default:s(()=>[...t[27]||(t[27]=[n("Etiquetas",-1)])]),_:1}),l(e($),null,{default:s(()=>[...t[28]||(t[28]=[n("Orden",-1)])]),_:1}),l(e($),null,{default:s(()=>[...t[29]||(t[29]=[n("Estado",-1)])]),_:1}),l(e($),{class:"text-right"},{default:s(()=>[...t[30]||(t[30]=[n("Acciones",-1)])]),_:1})]),_:1})]),_:1}),l(e(be),null,{default:s(()=>[(u(!0),p(C,null,N(r.categorias.data,a=>(u(),p(C,{key:a.id},[j.value===a.id?(u(),_(e(U),{key:0},{default:s(()=>[l(e(v),null,{default:s(()=>[l(e(x),{modelValue:e(i).nombre,"onUpdate:modelValue":t[5]||(t[5]=d=>e(i).nombre=d),class:"w-full"},null,8,["modelValue"])]),_:1}),l(e(v),null,{default:s(()=>[l(e(I),{modelValue:e(i).color,"onUpdate:modelValue":t[6]||(t[6]=d=>e(i).color=d)},{default:s(()=>[l(e(L),{class:"w-32"},{default:s(()=>[o("div",je,[o("div",{class:k([S(e(i).color),"w-4 h-4 rounded"])},null,2),l(e(O))])]),_:1}),l(e(R),null,{default:s(()=>[(u(!0),p(C,null,N(r.colores,d=>(u(),_(e(W),{key:d,value:d},{default:s(()=>[o("div",De,[o("div",{class:k([S(d),"w-4 h-4 rounded"])},null,2),n(" "+c(d),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(e(v),null,{default:s(()=>[n(c(a.etiquetas_count||0),1)]),_:2},1024),l(e(v),null,{default:s(()=>[l(e(x),{modelValue:e(i).orden,"onUpdate:modelValue":t[7]||(t[7]=d=>e(i).orden=d),modelModifiers:{number:!0},type:"number",class:"w-20"},null,8,["modelValue"])]),_:1}),l(e(v),null,{default:s(()=>[l(e(G),{variant:a.activo?"default":"secondary"},{default:s(()=>[n(c(a.activo?"Activa":"Inactiva"),1)]),_:2},1032,["variant"])]),_:2},1024),l(e(v),{class:"text-right"},{default:s(()=>[o("div",Ae,[l(e(f),{size:"sm",onClick:d=>se(a.id),disabled:e(i).processing},{default:s(()=>[l(e(B),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),l(e(f),{size:"sm",variant:"outline",onClick:A},{default:s(()=>[l(e(M),{class:"h-4 w-4"})]),_:1})])]),_:2},1024)]),_:2},1024)):(u(),_(e(U),{key:1},{default:s(()=>[l(e(v),{class:"font-medium"},{default:s(()=>[o("div",Te,[l(e(H),{class:"h-4 w-4 text-muted-foreground"}),n(" "+c(a.nombre),1)])]),_:2},1024),l(e(v),null,{default:s(()=>[o("div",Be,[o("div",{class:k([S(a.color),"w-4 h-4 rounded"])},null,2),n(" "+c(a.color),1)])]),_:2},1024),l(e(v),null,{default:s(()=>[o("div",Me,[l(e(f),{variant:"ghost",size:"sm",onClick:d=>re(a.id),class:"p-1"},{default:s(()=>[P.value.has(a.id)?(u(),_(e(xe),{key:1,class:"h-4 w-4"})):(u(),_(e(ke),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),l(e(G),{variant:"outline"},{default:s(()=>[n(c(a.etiquetas_count||0)+" etiquetas ",1)]),_:2},1024)])]),_:2},1024),l(e(v),null,{default:s(()=>[n(c(a.orden),1)]),_:2},1024),l(e(v),null,{default:s(()=>[l(e(G),{variant:a.activo?"default":"secondary",class:"cursor-pointer",onClick:d=>oe(a)},{default:s(()=>[n(c(a.activo?"Activa":"Inactiva"),1)]),_:2},1032,["variant","onClick"])]),_:2},1024),l(e(v),{class:"text-right"},{default:s(()=>[o("div",Pe,[l(e(f),{size:"sm",variant:"ghost",onClick:d=>le(a)},{default:s(()=>[l(e(Q),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),l(e(f),{size:"sm",variant:"ghost",onClick:d=>ae(a),class:"text-destructive hover:text-destructive"},{default:s(()=>[l(e(Y),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)),P.value.has(a.id)?(u(),_(e(U),{key:2,class:"bg-gray-50 dark:bg-gray-900/50"},{default:s(()=>[l(e(v),{colspan:"6",class:"p-0"},{default:s(()=>[o("div",Fe,[o("div",Ge,[o("h4",Ie,[l(e(H),{class:"h-4 w-4"}),n(" Etiquetas de "+c(a.nombre),1)]),w.value!==a.id?(u(),_(e(f),{key:0,size:"sm",onClick:d=>J(a.id)},{default:s(()=>[l(e(X),{class:"mr-2 h-4 w-4"}),t[31]||(t[31]=n(" Nueva Etiqueta ",-1))]),_:2},1032,["onClick"])):b("",!0)]),w.value===a.id?(u(),_(e(q),{key:0,class:"border-dashed"},{default:s(()=>[l(e(E),{class:"pt-4"},{default:s(()=>[o("div",Le,[o("div",null,[l(e(y),null,{default:s(()=>[...t[32]||(t[32]=[n("Nombre *",-1)])]),_:1}),l(e(x),{modelValue:e(m).nombre,"onUpdate:modelValue":t[8]||(t[8]=d=>e(m).nombre=d),placeholder:"Nombre de la etiqueta",class:k({"border-red-500":e(m).errors.nombre})},null,8,["modelValue","class"])]),o("div",null,[l(e(y),null,{default:s(()=>[...t[33]||(t[33]=[n("Descripción",-1)])]),_:1}),l(e(x),{modelValue:e(m).descripcion,"onUpdate:modelValue":t[9]||(t[9]=d=>e(m).descripcion=d),placeholder:"Descripción opcional"},null,8,["modelValue"])])]),o("div",Oe,[l(e(f),{onClick:ne,disabled:e(m).processing},{default:s(()=>[l(e(B),{class:"mr-2 h-4 w-4"}),t[34]||(t[34]=n(" Guardar ",-1))]),_:1},8,["disabled"]),l(e(f),{variant:"outline",onClick:T},{default:s(()=>[l(e(M),{class:"mr-2 h-4 w-4"}),t[35]||(t[35]=n(" Cancelar ",-1))]),_:1})])]),_:1})]),_:1})):b("",!0),a.etiquetas&&a.etiquetas.length>0?(u(),p("div",Re,[(u(!0),p(C,null,N(a.etiquetas,d=>(u(),p("div",{key:d.id,class:"flex items-center justify-between p-3 border rounded-lg bg-white dark:bg-gray-800"},[D.value===d.id?(u(),p("div",We,[l(e(x),{modelValue:e(m).nombre,"onUpdate:modelValue":t[10]||(t[10]=V=>e(m).nombre=V),placeholder:"Nombre"},null,8,["modelValue"]),o("div",Xe,[l(e(x),{modelValue:e(m).descripcion,"onUpdate:modelValue":t[11]||(t[11]=V=>e(m).descripcion=V),placeholder:"Descripción",class:"flex-1"},null,8,["modelValue"]),l(e(f),{size:"sm",onClick:V=>de(d.id),disabled:e(m).processing},{default:s(()=>[l(e(B),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),l(e(f),{size:"sm",variant:"outline",onClick:T},{default:s(()=>[l(e(M),{class:"h-4 w-4"})]),_:1})])])):(u(),p("div",He,[o("div",null,[o("span",Je,c(d.nombre),1),d.descripcion?(u(),p("p",Ke,c(d.descripcion),1)):b("",!0)]),o("div",Qe,[l(e(f),{size:"sm",variant:"outline",onClick:V=>ie(d)},{default:s(()=>[l(e(Q),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),l(e(f),{size:"sm",variant:"outline",onClick:V=>ue(d.id)},{default:s(()=>[l(e(Y),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]))]))),128))])):w.value!==a.id?(u(),p("div",Ye,[l(e(H),{class:"h-8 w-8 mx-auto mb-2 opacity-50"}),t[37]||(t[37]=o("p",null,"No hay etiquetas en esta categoría",-1)),l(e(f),{variant:"outline",size:"sm",class:"mt-2",onClick:d=>J(a.id)},{default:s(()=>[l(e(X),{class:"mr-2 h-4 w-4"}),t[36]||(t[36]=n(" Crear primera etiqueta ",-1))]),_:2},1032,["onClick"])])):b("",!0)])]),_:2},1024)]),_:2},1024)):b("",!0)],64))),128)),r.categorias.data.length===0?(u(),_(e(U),{key:0},{default:s(()=>[l(e(v),{colspan:"6",class:"text-center text-muted-foreground py-8"},{default:s(()=>[...t[38]||(t[38]=[n(" No hay categorías creadas. Crea una nueva para empezar. ",-1)])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})],64))}});export{Kl as default};
