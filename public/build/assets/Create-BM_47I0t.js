import{d as Se,r as Q,c as z,m as Ae,i as _,e as m,f as a,g as s,b as h,j as v,w as l,u as e,h as n,t as f,n as k,F as B,k as G,q as ke,C as Ue,p as Te,l as Me,W as We}from"./app-MhRkZYda.js";import{_ as F}from"./createLucideIcon-CtoO_Kiv.js";import{a as C,b as V,c as y,_ as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-l03Rvke8.js";import{_ as E}from"./CardDescription.vue_vue_type_script_setup_true_lang-TWLMKxTH.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-BIqg1Ebh.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-dAqUlvBp.js";import{_ as je}from"./Textarea.vue_vue_type_script_setup_true_lang-BYdeO-01.js";import{_ as we,a as he,b as ye,c as $e,d as Ce}from"./SelectValue.vue_vue_type_script_setup_true_lang-Cw5PJOxU.js";import{_ as I,a as R}from"./index-8IM6hFwH.js";import{_ as De,a as O}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-BfxLgv8t.js";import{_ as Le}from"./AdminLayout.vue_vue_type_script_setup_true_lang-s8UCj-v6.js";import{_ as Ve}from"./index-D9cSDYZw.js";import{M as H}from"./map-pin-B5DXokRd.js";import{S as J}from"./shield-C7We-wCE.js";import{F as X}from"./filter--DnCHEbM.js";import{C as ze}from"./calendar-G1jntOAT.js";import{S as Ne}from"./search-CWj5t0jZ.js";import{C as qe}from"./circle-check-Bd5MbaZr.js";import{U as Y}from"./users-jwOqaBj3.js";import{I as Ee}from"./info-Co3Y9UqI.js";import{C as Fe}from"./circle-alert-Crskc4s_.js";import{t as D}from"./index-C4AhATEj.js";import{A as Be}from"./arrow-left-CREz2KBm.js";import{S as Ge}from"./save-BCqaoal8.js";import{M as Oe}from"./mail-D2iFew9f.js";import{M as Ie}from"./message-square-DqgXAPvJ.js";import{S as Re}from"./send-B-3fqeSw.js";import"./index-D1N0p-74.js";import"./VisuallyHidden-ClD0DDsS.js";import"./check-DIKoOxln.js";import"./floating-ui.vue-Jtid5Cir.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-CbR6igbu.js";import"./utils-D9jgK0ly.js";import"./VisuallyHiddenInput-Bw6ddUlF.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-D128fxVw.js";import"./index-CKzDzxRj.js";import"./x-DDu6o8kn.js";import"./index-CGlb_uG-.js";import"./user-ByVghZe9.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-ZgmtTIfd.js";import"./chevron-right-CLygI0q1.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BtbY9BuF.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-ZdbDwAbT.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-ZZIvmMj6.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BqmWBxIU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-B_e-HSmn.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DoAxHmi0.js";import"./target-B9U4ycgp.js";import"./vote-BbOfLgcg.js";import"./folder-open-CJtFOPOB.js";import"./file-text-CSf3KGSt.js";import"./briefcase-BhQcV9fE.js";import"./megaphone-l3pQSHwh.js";import"./user-check-TX_Nop_V.js";import"./external-link-D5LXOYvq.js";import"./panel-left-Bv2yObtj.js";import"./index-DhGDRjjN.js";const Ke={class:"space-y-4"},Qe={class:"flex justify-between items-center"},He={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},Je={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-2"},Ye={class:"flex items-center gap-2"},Ze={class:"flex items-center gap-2"},ea={class:"flex flex-col md:flex-row gap-4"},aa={class:"flex-1"},ta={class:"relative"},la={class:"flex gap-2"},sa={class:"space-y-2 max-h-96 overflow-y-auto p-2"},oa={class:"flex items-start justify-between"},ia={class:"flex-1"},na={class:"flex items-center gap-2"},ra={class:"font-medium"},da={key:0,class:"text-sm text-muted-foreground mt-1"},ua={class:"text-right"},ma={class:"text-2xl font-bold"},pa={key:0,class:"text-center py-8 text-muted-foreground"},ca={class:"space-y-3"},fa={class:"font-medium flex items-center gap-2"},_a={key:0,class:"text-sm text-muted-foreground mt-1"},ga={class:"flex items-center justify-between p-3 bg-muted rounded-md"},va={class:"text-2xl font-bold"},ba=Se({__name:"SegmentSelector",props:{modelValue:{default:null},segments:{},required:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(K,{emit:p}){const b=K,j=p,o=Q(b.modelValue),S=Q(""),g=Q("all"),w=z(()=>b.segments.find(d=>d.id===o.value)||null),L=z(()=>{let d=b.segments;if(S.value){const i=S.value.toLowerCase();d=d.filter(u=>{var M;return u.nombre.toLowerCase().includes(i)||((M=u.descripcion)==null?void 0:M.toLowerCase().includes(i))})}return g.value!=="all"&&(d=d.filter(i=>i.tipo===g.value)),d}),A=z(()=>{const d={total:b.segments.length,geografico:0,rol:0,personalizado:0,dinamico:0,totalUsuarios:0};return b.segments.forEach(i=>{d[i.tipo]++,d.totalUsuarios+=i.count||0}),d}),N=d=>{o.value=d;const i=b.segments.find(u=>u.id===d)||null;j("update:modelValue",d),j("change",i)},P=d=>({geografico:H,rol:J,personalizado:X,dinamico:ze})[d]||Y,U=d=>({geografico:"text-blue-600",rol:"text-purple-600",personalizado:"text-green-600",dinamico:"text-orange-600"})[d]||"text-gray-600",q=d=>({geografico:"Geográfico",rol:"Por Rol",personalizado:"Personalizado",dinamico:"Dinámico"})[d]||d,T=d=>d?d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(1)}K`:d.toLocaleString():"0";return Ae(()=>b.modelValue,d=>{o.value=d}),(d,i)=>(m(),_("div",Ke,[a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[s("div",Qe,[a(e(V),{class:"text-base"},{default:l(()=>[...i[6]||(i[6]=[n("Seleccionar Segmento",-1)])]),_:1}),a(e(Ve),{variant:"outline"},{default:l(()=>[n(f(A.value.total)+" segmentos disponibles ",1)]),_:1})])]),_:1}),a(e(y),null,{default:l(()=>[s("div",He,[s("div",Je,[a(e(H),{class:"w-4 h-4 text-blue-600"}),s("span",null,f(A.value.geografico)+" Geográficos",1)]),s("div",Xe,[a(e(J),{class:"w-4 h-4 text-purple-600"}),s("span",null,f(A.value.rol)+" Por Rol",1)]),s("div",Ye,[a(e(X),{class:"w-4 h-4 text-green-600"}),s("span",null,f(A.value.personalizado)+" Personalizados",1)]),s("div",Ze,[a(e(ze),{class:"w-4 h-4 text-orange-600"}),s("span",null,f(A.value.dinamico)+" Dinámicos",1)])])]),_:1})]),_:1}),s("div",ea,[s("div",aa,[s("div",ta,[a(e(Ne),{class:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a(e(W),{modelValue:S.value,"onUpdate:modelValue":i[0]||(i[0]=u=>S.value=u),placeholder:"Buscar segmento...",class:"pl-8"},null,8,["modelValue"])])]),s("div",la,[a(e(F),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="all"}),onClick:i[1]||(i[1]=u=>g.value="all")},{default:l(()=>[...i[7]||(i[7]=[n(" Todos ",-1)])]),_:1},8,["class"]),a(e(F),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="geografico"}),onClick:i[2]||(i[2]=u=>g.value="geografico")},{default:l(()=>[a(e(H),{class:"w-4 h-4 mr-1"}),i[8]||(i[8]=n(" Geográfico ",-1))]),_:1},8,["class"]),a(e(F),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="rol"}),onClick:i[3]||(i[3]=u=>g.value="rol")},{default:l(()=>[a(e(J),{class:"w-4 h-4 mr-1"}),i[9]||(i[9]=n(" Rol ",-1))]),_:1},8,["class"]),a(e(F),{variant:"outline",size:"sm",class:k({"bg-accent":g.value==="personalizado"}),onClick:i[4]||(i[4]=u=>g.value="personalizado")},{default:l(()=>[a(e(X),{class:"w-4 h-4 mr-1"}),i[10]||(i[10]=n(" Personalizado ",-1))]),_:1},8,["class"])])]),a(e($),null,{default:l(()=>[a(e(y),{class:"p-2"},{default:l(()=>[a(e(De),{modelValue:o.value,"onUpdate:modelValue":[i[5]||(i[5]=u=>o.value=u),N]},{default:l(()=>[s("div",sa,[(m(!0),_(B,null,G(L.value,u=>(m(),_("div",{key:u.id,class:k(["flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent cursor-pointer",{"bg-accent border-primary":o.value===u.id}])},[a(e(O),{value:u.id,id:`segment-${u.id}`},null,8,["value","id"]),a(e(x),{for:`segment-${u.id}`,class:"flex-1 cursor-pointer"},{default:l(()=>[s("div",oa,[s("div",ia,[s("div",na,[(m(),h(ke(P(u.tipo)),{class:k(["w-4 h-4",U(u.tipo)])},null,8,["class"])),s("span",ra,f(u.nombre),1),a(e(Ve),{variant:"outline",class:"ml-2"},{default:l(()=>[n(f(q(u.tipo)),1)]),_:2},1024)]),u.descripcion?(m(),_("p",da,f(u.descripcion),1)):v("",!0)]),s("div",ua,[s("p",ma,f(T(u.count)),1),i[11]||(i[11]=s("p",{class:"text-xs text-muted-foreground"},"usuarios",-1))])])]),_:2},1032,["for"])],2))),128)),L.value.length===0?(m(),_("div",pa," No se encontraron segmentos ")):v("",!0)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),d.showPreview&&w.value?(m(),h(e($),{key:0},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(V),{class:"text-base flex items-center gap-2"},{default:l(()=>[a(e(qe),{class:"w-4 h-4 text-green-600"}),i[12]||(i[12]=n(" Segmento Seleccionado ",-1))]),_:1})]),_:1}),a(e(y),null,{default:l(()=>[s("div",ca,[s("div",null,[s("h4",fa,[(m(),h(ke(P(w.value.tipo)),{class:k(["w-4 h-4",U(w.value.tipo)])},null,8,["class"])),n(" "+f(w.value.nombre),1)]),w.value.descripcion?(m(),_("p",_a,f(w.value.descripcion),1)):v("",!0)]),s("div",ga,[s("div",null,[i[13]||(i[13]=s("p",{class:"text-sm text-muted-foreground"},"Total de destinatarios",-1)),s("p",va,f(T(w.value.count)),1)]),a(e(Y),{class:"w-8 h-8 text-muted-foreground"})]),a(e(I),null,{default:l(()=>[a(e(Ee),{class:"h-4 w-4"}),a(e(R),null,{default:l(()=>[...i[14]||(i[14]=[n(" Los usuarios de este segmento recibirán la campaña según los criterios definidos. El número de destinatarios puede variar al momento del envío. ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):v("",!0),d.required&&!o.value?(m(),h(e(I),{key:1,variant:"warning"},{default:l(()=>[a(e(Fe),{class:"h-4 w-4"}),a(e(R),null,{default:l(()=>[...i[15]||(i[15]=[n(" Debes seleccionar un segmento para continuar ",-1)])]),_:1})]),_:1})):v("",!0)]))}}),xa={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ka={class:"flex justify-between items-center"},wa={class:"text-3xl font-bold"},ha={class:"text-muted-foreground mt-1"},ya={class:"flex gap-2"},$a={class:"list-disc pl-4"},Ca={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Va={class:"flex items-center space-x-2"},za={class:"flex items-center space-x-2"},Sa={class:"flex items-center space-x-2"},Aa={key:0,class:"mt-4 p-3 bg-muted rounded-md"},Da={class:"flex items-center gap-2 text-sm"},Ea={class:"font-medium"},Fa={class:"font-medium"},Pa={key:0,class:"text-xs text-muted-foreground"},Ua={class:"font-medium"},Ta={key:0,class:"text-xs text-muted-foreground"},Ma={class:"flex items-center space-x-2"},Wa=["aria-checked"],ja={key:0,class:"space-y-2"},La={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Na={key:0},qa={key:1},Ba={key:0,class:"space-y-2"},Ga={class:"space-y-2"},Oa={class:"flex items-center space-x-2"},Ia=["aria-checked"],Ra={class:"flex items-center space-x-2"},Ka=["aria-checked"],Zt=Se({__name:"Create",props:{campana:{},segmentos:{default:()=>[]},plantillasEmail:{default:()=>[]},plantillasWhatsApp:{default:()=>[]},tiposOptions:{default:()=>["email","whatsapp","ambos"]},estadosOptions:{},batchSizeEmailDefault:{},batchSizeWhatsAppDefault:{},whatsAppDelayDefault:{}},setup(K){var q,T,d,i,u,M,Z,ee,ae,te,le,se,oe,ie,ne,re,de,ue,me,pe,ce,fe,_e,ge,ve,be,xe;const p=K,b=z(()=>{var c;return!!((c=p.campana)!=null&&c.id)}),j=[{title:"Admin",href:"/admin/dashboard"},{title:"Campañas",href:"/admin/campanas"},{title:b.value?"Editar Campaña":"Nueva Campaña",href:"#"}],o=Ue({nombre:((q=p.campana)==null?void 0:q.nombre)||"",descripcion:((T=p.campana)==null?void 0:T.descripcion)||"",tipo:((d=p.campana)==null?void 0:d.tipo)||"email",estado:((i=p.campana)==null?void 0:i.estado)||"borrador",segment_id:((u=p.campana)==null?void 0:u.segment_id)||null,plantilla_email_id:((M=p.campana)==null?void 0:M.plantilla_email_id)||null,plantilla_whatsapp_id:((Z=p.campana)==null?void 0:Z.plantilla_whatsapp_id)||null,fecha_programada:((ee=p.campana)==null?void 0:ee.fecha_programada)||"",es_programada:!!((ae=p.campana)!=null&&ae.fecha_programada),configuracion:{batch_size_email:((le=(te=p.campana)==null?void 0:te.configuracion)==null?void 0:le.batch_size_email)||p.batchSizeEmailDefault||50,batch_size_whatsapp:((oe=(se=p.campana)==null?void 0:se.configuracion)==null?void 0:oe.batch_size_whatsapp)||p.batchSizeWhatsAppDefault||100,delay_between_batches:((ne=(ie=p.campana)==null?void 0:ie.configuracion)==null?void 0:ne.delay_between_batches)||2,whatsapp_delay_min:((de=(re=p.campana)==null?void 0:re.configuracion)==null?void 0:de.whatsapp_delay_min)||((ue=p.whatsAppDelayDefault)==null?void 0:ue.min)||3,whatsapp_delay_max:((pe=(me=p.campana)==null?void 0:me.configuracion)==null?void 0:pe.whatsapp_delay_max)||((ce=p.whatsAppDelayDefault)==null?void 0:ce.max)||10,enable_tracking:((_e=(fe=p.campana)==null?void 0:fe.configuracion)==null?void 0:_e.enable_tracking)??!0,enable_pixel_tracking:((ve=(ge=p.campana)==null?void 0:ge.configuracion)==null?void 0:ve.enable_pixel_tracking)??!0,enable_click_tracking:((xe=(be=p.campana)==null?void 0:be.configuracion)==null?void 0:xe.enable_click_tracking)??!0}}),S=z(()=>p.segmentos.find(c=>c.id===o.segment_id)),g=z(()=>o.tipo==="email"||o.tipo==="ambos"),w=z(()=>o.tipo==="whatsapp"||o.tipo==="ambos");Ae(()=>o.tipo,c=>{c==="email"?o.plantilla_whatsapp_id=null:c==="whatsapp"&&(o.plantilla_email_id=null)});const L=()=>{var c;if(!o.segment_id){D.error("Debes seleccionar un segmento");return}if(g.value&&!o.plantilla_email_id){D.error("Debes seleccionar una plantilla de email");return}if(w.value&&!o.plantilla_whatsapp_id){D.error("Debes seleccionar una plantilla de WhatsApp");return}b.value?o.put(`/admin/campanas/${(c=p.campana)==null?void 0:c.id}`,{onSuccess:()=>{D.success("Campaña actualizada exitosamente")},onError:()=>{D.error("Error al actualizar la campaña")}}):o.post("/admin/campanas",{onSuccess:()=>{D.success("Campaña creada exitosamente")},onError:()=>{D.error("Error al crear la campaña")}})},A=z(()=>o.nombre&&o.segment_id&&!o.processing&&(g.value?o.plantilla_email_id:!0)&&(w.value?o.plantilla_whatsapp_id:!0)),N=c=>{o.es_programada=c,c||(o.fecha_programada="")},P=c=>{o.configuracion.enable_pixel_tracking=c},U=c=>{o.configuracion.enable_click_tracking=c};return(c,t)=>(m(),h(Le,{breadcrumbs:j},{default:l(()=>[a(e(Te),{title:b.value?"Editar Campaña":"Nueva Campaña"},null,8,["title"]),s("div",xa,[s("form",{onSubmit:Me(L,["prevent"]),class:"space-y-6"},[s("div",ka,[s("div",null,[s("h1",wa,f(b.value?"Editar Campaña":"Nueva Campaña"),1),s("p",ha,f(b.value?"Modifica los detalles de la campaña":"Configura y programa tu campaña de comunicación"),1)]),s("div",ya,[a(e(F),{type:"button",variant:"outline",onClick:t[0]||(t[0]=r=>e(We).visit("/admin/campanas"))},{default:l(()=>[a(e(Be),{class:"w-4 h-4 mr-2"}),t[16]||(t[16]=n(" Cancelar ",-1))]),_:1}),a(e(F),{type:"submit",disabled:!A.value},{default:l(()=>[a(e(Ge),{class:"w-4 h-4 mr-2"}),n(" "+f(b.value?"Actualizar":"Guardar")+" Campaña ",1)]),_:1},8,["disabled"])])]),Object.keys(e(o).errors).length>0?(m(),h(e(I),{key:0,variant:"destructive"},{default:l(()=>[a(e(Fe),{class:"h-4 w-4"}),a(e(R),null,{default:l(()=>[s("ul",$a,[(m(!0),_(B,null,G(e(o).errors,(r,Pe)=>(m(),_("li",{key:Pe},f(r),1))),128))])]),_:1})]),_:1})):v("",!0),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(V),null,{default:l(()=>[...t[17]||(t[17]=[n("Información Básica",-1)])]),_:1}),a(e(E),null,{default:l(()=>[...t[18]||(t[18]=[n(" Define el nombre y tipo de campaña ",-1)])]),_:1})]),_:1}),a(e(y),{class:"space-y-4"},{default:l(()=>[s("div",Ca,[s("div",null,[a(e(x),{htmlFor:"nombre"},{default:l(()=>[...t[19]||(t[19]=[n(" Nombre de la Campaña ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(e(W),{id:"nombre",modelValue:e(o).nombre,"onUpdate:modelValue":t[1]||(t[1]=r=>e(o).nombre=r),placeholder:"Ej: Recordatorio Asamblea General",error:e(o).errors.nombre},null,8,["modelValue","error"])]),s("div",null,[a(e(x),null,{default:l(()=>[...t[20]||(t[20]=[n("Tipo de Campaña ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(e(De),{modelValue:e(o).tipo,"onUpdate:modelValue":t[2]||(t[2]=r=>e(o).tipo=r),class:"flex flex-wrap gap-4 mt-2"},{default:l(()=>[s("div",Va,[a(e(O),{value:"email",id:"tipo-email"}),a(e(x),{htmlFor:"tipo-email",class:"flex items-center gap-1 cursor-pointer"},{default:l(()=>[a(e(Oe),{class:"w-4 h-4"}),t[21]||(t[21]=n(" Email ",-1))]),_:1})]),s("div",za,[a(e(O),{value:"whatsapp",id:"tipo-whatsapp"}),a(e(x),{htmlFor:"tipo-whatsapp",class:"flex items-center gap-1 cursor-pointer"},{default:l(()=>[a(e(Ie),{class:"w-4 h-4"}),t[22]||(t[22]=n(" WhatsApp ",-1))]),_:1})]),s("div",Sa,[a(e(O),{value:"ambos",id:"tipo-ambos"}),a(e(x),{htmlFor:"tipo-ambos",class:"flex items-center gap-1 cursor-pointer"},{default:l(()=>[a(e(Re),{class:"w-4 h-4"}),t[23]||(t[23]=n(" Ambos ",-1))]),_:1})])]),_:1},8,["modelValue"])])]),s("div",null,[a(e(x),{htmlFor:"descripcion"},{default:l(()=>[...t[24]||(t[24]=[n("Descripción",-1)])]),_:1}),a(e(je),{id:"descripcion",modelValue:e(o).descripcion,"onUpdate:modelValue":t[3]||(t[3]=r=>e(o).descripcion=r),placeholder:"Describe el objetivo de esta campaña...",rows:"3"},null,8,["modelValue"])])]),_:1})]),_:1}),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(V),null,{default:l(()=>[...t[25]||(t[25]=[n("Audiencia",-1)])]),_:1}),a(e(E),null,{default:l(()=>[...t[26]||(t[26]=[n(" Selecciona el segmento de usuarios que recibirá esta campaña ",-1)])]),_:1})]),_:1}),a(e(y),null,{default:l(()=>[a(ba,{modelValue:e(o).segment_id,"onUpdate:modelValue":t[4]||(t[4]=r=>e(o).segment_id=r),segments:c.segmentos},null,8,["modelValue","segments"]),S.value?(m(),_("div",Aa,[s("div",Da,[a(e(Y),{class:"w-4 h-4"}),s("span",Ea,f(S.value.count)+" usuarios",1),t[27]||(t[27]=s("span",{class:"text-muted-foreground"},"recibirán esta campaña",-1))])])):v("",!0)]),_:1})]),_:1}),g.value?(m(),h(e($),{key:1},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(V),null,{default:l(()=>[...t[28]||(t[28]=[n("Plantilla de Email",-1)])]),_:1}),a(e(E),null,{default:l(()=>[...t[29]||(t[29]=[n(" Selecciona la plantilla de email a utilizar ",-1)])]),_:1})]),_:1}),a(e(y),null,{default:l(()=>[a(e(we),{modelValue:e(o).plantilla_email_id,"onUpdate:modelValue":t[5]||(t[5]=r=>e(o).plantilla_email_id=r)},{default:l(()=>[a(e(he),null,{default:l(()=>[a(e(ye),{placeholder:"Selecciona una plantilla"})]),_:1}),a(e($e),null,{default:l(()=>[(m(!0),_(B,null,G(c.plantillasEmail,r=>(m(),h(e(Ce),{key:r.id,value:r.id.toString()},{default:l(()=>[s("div",null,[s("div",Fa,f(r.nombre),1),r.asunto?(m(),_("div",Pa," Asunto: "+f(r.asunto),1)):v("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):v("",!0),w.value?(m(),h(e($),{key:2},{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(V),null,{default:l(()=>[...t[30]||(t[30]=[n("Plantilla de WhatsApp",-1)])]),_:1}),a(e(E),null,{default:l(()=>[...t[31]||(t[31]=[n(" Selecciona la plantilla de WhatsApp a utilizar ",-1)])]),_:1})]),_:1}),a(e(y),null,{default:l(()=>[a(e(we),{modelValue:e(o).plantilla_whatsapp_id,"onUpdate:modelValue":t[6]||(t[6]=r=>e(o).plantilla_whatsapp_id=r)},{default:l(()=>[a(e(he),null,{default:l(()=>[a(e(ye),{placeholder:"Selecciona una plantilla"})]),_:1}),a(e($e),null,{default:l(()=>[(m(!0),_(B,null,G(c.plantillasWhatsApp,r=>(m(),h(e(Ce),{key:r.id,value:r.id.toString()},{default:l(()=>[s("div",null,[s("div",Ua,f(r.nombre),1),r.descripcion?(m(),_("div",Ta,f(r.descripcion),1)):v("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(V),null,{default:l(()=>[...t[32]||(t[32]=[n("Programación",-1)])]),_:1}),a(e(E),null,{default:l(()=>[...t[33]||(t[33]=[n(" Define cuándo se enviará la campaña ",-1)])]),_:1})]),_:1}),a(e(y),{class:"space-y-4"},{default:l(()=>[s("div",Ma,[s("button",{type:"button",onClick:t[7]||(t[7]=r=>N(!e(o).es_programada)),class:k(["inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] cursor-pointer",e(o).es_programada?"bg-primary":"bg-input"]),"aria-checked":e(o).es_programada,role:"switch"},[s("span",{class:k(["pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",e(o).es_programada?"translate-x-[calc(100%-2px)]":"translate-x-0"])},null,2)],10,Wa),a(e(x),{onClick:t[8]||(t[8]=r=>N(!e(o).es_programada)),class:"cursor-pointer"},{default:l(()=>[...t[34]||(t[34]=[n("Programar envío",-1)])]),_:1})]),e(o).es_programada?(m(),_("div",ja,[a(e(x),{htmlFor:"fecha_programada"},{default:l(()=>[...t[35]||(t[35]=[n(" Fecha y hora de envío ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(e(W),{id:"fecha_programada",type:"datetime-local",modelValue:e(o).fecha_programada,"onUpdate:modelValue":t[9]||(t[9]=r=>e(o).fecha_programada=r),min:new Date().toISOString().slice(0,16),class:"w-full",required:""},null,8,["modelValue","min"]),t[36]||(t[36]=s("p",{class:"text-xs text-muted-foreground"}," La campaña se enviará automáticamente en la fecha y hora seleccionada ",-1))])):v("",!0)]),_:1})]),_:1}),a(e($),null,{default:l(()=>[a(e(C),null,{default:l(()=>[a(e(V),null,{default:l(()=>[...t[37]||(t[37]=[n("Configuración Avanzada",-1)])]),_:1}),a(e(E),null,{default:l(()=>[...t[38]||(t[38]=[n(" Ajusta los parámetros de envío y tracking ",-1)])]),_:1})]),_:1}),a(e(y),{class:"space-y-4"},{default:l(()=>[s("div",La,[g.value?(m(),_("div",Na,[a(e(x),{htmlFor:"batch_size_email"},{default:l(()=>[...t[39]||(t[39]=[n(" Tamaño de lote (Email) ",-1)])]),_:1}),a(e(W),{id:"batch_size_email",type:"number",modelValue:e(o).configuracion.batch_size_email,"onUpdate:modelValue":t[10]||(t[10]=r=>e(o).configuracion.batch_size_email=r),modelModifiers:{number:!0},min:"1",max:"500"},null,8,["modelValue"]),t[40]||(t[40]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Emails por lote (recomendado: 50) ",-1))])):v("",!0),w.value?(m(),_("div",qa,[a(e(x),{htmlFor:"batch_size_whatsapp"},{default:l(()=>[...t[41]||(t[41]=[n(" Tamaño de lote (WhatsApp) ",-1)])]),_:1}),a(e(W),{id:"batch_size_whatsapp",type:"number",modelValue:e(o).configuracion.batch_size_whatsapp,"onUpdate:modelValue":t[11]||(t[11]=r=>e(o).configuracion.batch_size_whatsapp=r),modelModifiers:{number:!0},min:"1",max:"500"},null,8,["modelValue"]),t[42]||(t[42]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Mensajes por lote (recomendado: 100) ",-1))])):v("",!0)]),g.value?(m(),_("div",Ba,[a(e(x),null,{default:l(()=>[...t[43]||(t[43]=[n("Opciones de Tracking",-1)])]),_:1}),s("div",Ga,[s("div",Oa,[s("button",{type:"button",onClick:t[12]||(t[12]=r=>P(!e(o).configuracion.enable_pixel_tracking)),class:k(["inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] cursor-pointer",e(o).configuracion.enable_pixel_tracking?"bg-primary":"bg-input"]),"aria-checked":e(o).configuracion.enable_pixel_tracking,role:"switch"},[s("span",{class:k(["pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",e(o).configuracion.enable_pixel_tracking?"translate-x-[calc(100%-2px)]":"translate-x-0"])},null,2)],10,Ia),a(e(x),{class:"font-normal cursor-pointer",onClick:t[13]||(t[13]=r=>P(!e(o).configuracion.enable_pixel_tracking))},{default:l(()=>[...t[44]||(t[44]=[n(" Tracking de apertura (pixel) ",-1)])]),_:1})]),s("div",Ra,[s("button",{type:"button",onClick:t[14]||(t[14]=r=>U(!e(o).configuracion.enable_click_tracking)),class:k(["inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] cursor-pointer",e(o).configuracion.enable_click_tracking?"bg-primary":"bg-input"]),"aria-checked":e(o).configuracion.enable_click_tracking,role:"switch"},[s("span",{class:k(["pointer-events-none block size-4 rounded-full bg-background ring-0 transition-transform",e(o).configuracion.enable_click_tracking?"translate-x-[calc(100%-2px)]":"translate-x-0"])},null,2)],10,Ka),a(e(x),{class:"font-normal cursor-pointer",onClick:t[15]||(t[15]=r=>U(!e(o).configuracion.enable_click_tracking))},{default:l(()=>[...t[45]||(t[45]=[n(" Tracking de clicks ",-1)])]),_:1})])])])):v("",!0)]),_:1})]),_:1}),a(e(I),null,{default:l(()=>[a(e(Ee),{class:"h-4 w-4"}),a(e(R),null,{default:l(()=>[...t[46]||(t[46]=[n(" La campaña se guardará en estado ",-1),s("strong",null,"borrador",-1),n(". Podrás revisarla y enviarla desde el listado de campañas. ",-1)])]),_:1})]),_:1})],32)])]),_:1}))}});export{Zt as default};
