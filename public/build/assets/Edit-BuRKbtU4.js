import{d as K,u as Q,i as c,e as s,f as t,q as W,w as o,g as a,b as V,j as x,t as r,m as f,h as l,v as F,l as X,F as C,k as B,s as Y}from"./app-0nVG3A7n.js";import{_ as h}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D1T5O8gD.js";import{_ as $}from"./createLucideIcon-D6Za-Pze.js";import{_,a as g,b as v,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-BxuhlF8z.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-CSB2Wl3d.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-Drqu6ki0.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-CLGDuLIz.js";import{_ as D,a as P,b as N,c as q,d as G}from"./SelectValue.vue_vue_type_script_setup_true_lang-BVZfuZ-_.js";import{_ as tt}from"./Switch.vue_vue_type_script_setup_true_lang-BGDWDy6n.js";import{_ as et,a as st,b as k,c as z}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-CiPV_1UG.js";import{_ as I,a as O}from"./index-CeCVhLsf.js";import{A as ot}from"./arrow-left-BaCJKoo8.js";import{U as at}from"./users-BBWb7l9v.js";import{V as it}from"./vote-DYoxiZap.js";import{F as lt}from"./file-text-CmxI8LJk.js";import{C as R}from"./circle-alert-CvMotWhK.js";import{S as nt}from"./save-NP7J5ASg.js";import"./useFlashMessages-BCIIGJHx.js";import"./index-DgZR7T48.js";import"./floating-ui.vue-EN6gBnGg.js";import"./x-BSrC46b1.js";import"./index-DOr5YNZ0.js";import"./shield-DAfrGF4N.js";import"./user-Dh1CHYwk.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-YvYYS2jL.js";import"./chevron-right-Di4toXbN.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D2g6K7eD.js";import"./VisuallyHidden-Cu26Rlvi.js";import"./index-BA1sUP78.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Bpyr3hwo.js";import"./index-D_EGuqw0.js";import"./map-pin-DnUUQ1CH.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DBy1kQM1.js";import"./chevrons-up-down-HZAJF7Z9.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C1SgAdtD.js";import"./tag-CInD6XHQ.js";import"./target-DSx8EXTi.js";import"./folder-open-DZ641Wnf.js";import"./send-CQFqi8bo.js";import"./briefcase-BVSjOvlb.js";import"./calendar-KIcEFRdQ.js";import"./megaphone-DCtivVdK.js";import"./user-check-Ch8KyECv.js";import"./clipboard-list-B4x4LT0H.js";import"./mail-KmECrvcZ.js";import"./message-square-DdId2rUu.js";import"./external-link-7aphkbNH.js";import"./panel-left-uO9jXdey.js";import"./index-pA3Zd-6T.js";import"./check-kGyEdtv4.js";import"./index-QpywyLav.js";import"./VisuallyHiddenInput-f0OlMud2.js";import"./RovingFocusItem-C55U2qzm.js";import"./utils-BUpGeZa9.js";const rt={class:"flex h-full flex-1 flex-col gap-4 p-4"},dt={class:"flex items-center justify-between"},mt={class:"text-muted-foreground"},ut={class:"flex gap-2"},ft={class:"grid gap-4 md:grid-cols-3"},pt={class:"text-2xl font-bold"},ct={class:"text-xs text-muted-foreground"},xt={class:"text-2xl font-bold"},_t={class:"text-xs text-muted-foreground"},gt={class:"text-2xl font-bold"},vt={class:"text-xs text-muted-foreground"},bt={class:"grid gap-4 md:grid-cols-2"},yt={class:"space-y-2"},Vt={key:0,class:"text-sm text-red-500"},$t={class:"space-y-2"},Ct={class:"flex"},wt={key:0,class:"text-sm text-red-500"},kt={class:"space-y-2"},zt={key:0,class:"text-sm text-red-500"},Ut={class:"space-y-2"},St={class:"flex items-center space-x-2"},Et={class:"mt-4 rounded-lg bg-muted p-4"},At={class:"grid gap-2 text-sm"},Lt={class:"ml-2"},Tt={class:"ml-2"},Mt={class:"ml-2"},jt={class:"grid gap-4 md:grid-cols-2"},Ft={class:"space-y-2"},Bt={class:"space-y-2"},Dt={class:"flex gap-2"},Pt={class:"space-y-2"},Nt={class:"space-y-2"},qt={class:"grid gap-4 md:grid-cols-3"},Gt={class:"space-y-2"},It={class:"text-xs text-muted-foreground"},Ot={class:"space-y-2"},Rt={class:"text-xs text-muted-foreground"},Zt={class:"space-y-2"},Ht={class:"text-xs text-muted-foreground"},Jt={class:"mt-6 flex justify-end gap-4"},Ke=K({__name:"Edit",props:{tenant:{},subscriptionPlans:{},timezones:{},userCount:{},votacionCount:{},convocatoriaCount:{}},setup(d){var U,S,E,A,L,T,M;const m=d,Z=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tenants",href:"/admin/tenants"},{title:`Editar: ${m.tenant.name}`,href:"#"}],i=Q({name:m.tenant.name,subdomain:m.tenant.subdomain,subscription_plan:m.tenant.subscription_plan,active:m.tenant.active,settings:{logo:((U=m.tenant.settings)==null?void 0:U.logo)||"",primary_color:((S=m.tenant.settings)==null?void 0:S.primary_color)||"#3B82F6",otp_expiration:((E=m.tenant.settings)==null?void 0:E.otp_expiration)||10,timezone:((A=m.tenant.settings)==null?void 0:A.timezone)||"America/Bogota"},limits:{max_users:((L=m.tenant.limits)==null?void 0:L.max_users)||null,max_votaciones:((T=m.tenant.limits)==null?void 0:T.max_votaciones)||null,max_convocatorias:((M=m.tenant.limits)==null?void 0:M.max_convocatorias)||null}}),H=()=>{i.put(`/admin/tenants/${m.tenant.id}`,{preserveScroll:!0})},J=()=>{confirm(`¿Estás seguro de eliminar el tenant "${m.tenant.name}"? Esta acción no se puede deshacer.`)&&Y.delete(`/admin/tenants/${m.tenant.id}`)};return(j,e)=>(f(),c(C,null,[s(t(W),{title:`Editar Tenant: ${d.tenant.name}`},null,8,["title"]),s(h,{breadcrumbs:Z},{default:o(()=>[a("div",rt,[a("div",dt,[a("div",null,[e[12]||(e[12]=a("h2",{class:"text-3xl font-bold tracking-tight"},"Editar Tenant",-1)),a("p",mt," Modifica la configuración de "+r(d.tenant.name),1)]),a("div",ut,[d.tenant.id!==1?(f(),V(t($),{key:0,onClick:J,variant:"destructive",disabled:d.userCount>0},{default:o(()=>[...e[13]||(e[13]=[l(" Eliminar Tenant ",-1)])]),_:1},8,["disabled"])):x("",!0),s(t(F),{href:j.route("admin.tenants.index")},{default:o(()=>[s(t($),{variant:"outline"},{default:o(()=>[s(t(ot),{class:"mr-2 h-4 w-4"}),e[14]||(e[14]=l(" Volver ",-1))]),_:1})]),_:1},8,["href"])])]),a("div",ft,[s(t(_),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>[...e[15]||(e[15]=[l("Usuarios",-1)])]),_:1}),s(t(at),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[a("div",pt,r(d.userCount),1),a("p",ct,r(t(i).limits.max_users?`de ${t(i).limits.max_users} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(t(_),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>[...e[16]||(e[16]=[l("Votaciones",-1)])]),_:1}),s(t(it),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[a("div",xt,r(d.votacionCount),1),a("p",_t,r(t(i).limits.max_votaciones?`de ${t(i).limits.max_votaciones} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(t(_),null,{default:o(()=>[s(t(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(t(v),{class:"text-sm font-medium"},{default:o(()=>[...e[17]||(e[17]=[l("Convocatorias",-1)])]),_:1}),s(t(lt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(b),null,{default:o(()=>[a("div",gt,r(d.convocatoriaCount),1),a("p",vt,r(t(i).limits.max_convocatorias?`de ${t(i).limits.max_convocatorias} máximo`:"Sin límite"),1)]),_:1})]),_:1})]),d.tenant.id===1?(f(),V(t(I),{key:0},{default:o(()=>[s(t(R),{class:"h-4 w-4"}),s(t(O),null,{default:o(()=>[...e[18]||(e[18]=[l(" Este es el tenant principal del sistema. Algunas opciones pueden estar limitadas. ",-1)])]),_:1})]),_:1})):x("",!0),a("form",{onSubmit:X(H,["prevent"])},[s(t(et),{"default-value":"general",class:"w-full"},{default:o(()=>[s(t(st),{class:"grid w-full grid-cols-3"},{default:o(()=>[s(t(k),{value:"general"},{default:o(()=>[...e[19]||(e[19]=[l("Información General",-1)])]),_:1}),s(t(k),{value:"settings"},{default:o(()=>[...e[20]||(e[20]=[l("Configuración",-1)])]),_:1}),s(t(k),{value:"limits"},{default:o(()=>[...e[21]||(e[21]=[l("Límites y Cuotas",-1)])]),_:1})]),_:1}),s(t(z),{value:"general"},{default:o(()=>[s(t(_),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>[...e[22]||(e[22]=[l("Información General",-1)])]),_:1}),s(t(w),null,{default:o(()=>[...e[23]||(e[23]=[l(" Datos básicos de la organización ",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[a("div",bt,[a("div",yt,[s(t(u),{for:"name"},{default:o(()=>[...e[24]||(e[24]=[l("Nombre de la Organización *",-1)])]),_:1}),s(t(p),{id:"name",modelValue:t(i).name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(i).name=n),placeholder:"Mi Organización",required:""},null,8,["modelValue"]),t(i).errors.name?(f(),c("p",Vt,r(t(i).errors.name),1)):x("",!0)]),a("div",$t,[s(t(u),{for:"subdomain"},{default:o(()=>[...e[25]||(e[25]=[l("Subdominio *",-1)])]),_:1}),a("div",Ct,[s(t(p),{id:"subdomain",modelValue:t(i).subdomain,"onUpdate:modelValue":e[1]||(e[1]=n=>t(i).subdomain=n),placeholder:"mi-organizacion",pattern:"[a-z0-9-]+",required:"",class:"rounded-r-none"},null,8,["modelValue"]),e[26]||(e[26]=a("span",{class:"inline-flex items-center rounded-r-md border border-l-0 border-input bg-muted px-3 text-sm text-muted-foreground"}," .votaciones.test ",-1))]),e[27]||(e[27]=a("p",{class:"text-xs text-muted-foreground"}," Solo letras minúsculas, números y guiones ",-1)),t(i).errors.subdomain?(f(),c("p",wt,r(t(i).errors.subdomain),1)):x("",!0)]),a("div",kt,[s(t(u),{for:"subscription_plan"},{default:o(()=>[...e[28]||(e[28]=[l("Plan de Suscripción *",-1)])]),_:1}),s(t(D),{modelValue:t(i).subscription_plan,"onUpdate:modelValue":e[2]||(e[2]=n=>t(i).subscription_plan=n)},{default:o(()=>[s(t(P),{id:"subscription_plan"},{default:o(()=>[s(t(N))]),_:1}),s(t(q),null,{default:o(()=>[(f(!0),c(C,null,B(d.subscriptionPlans,(n,y)=>(f(),V(t(G),{key:y,value:y},{default:o(()=>[l(r(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(i).errors.subscription_plan?(f(),c("p",zt,r(t(i).errors.subscription_plan),1)):x("",!0)]),a("div",Ut,[s(t(u),{for:"active"},{default:o(()=>[...e[29]||(e[29]=[l("Estado",-1)])]),_:1}),a("div",St,[s(t(tt),{id:"active",checked:t(i).active,"onUpdate:checked":e[3]||(e[3]=n=>t(i).active=n)},null,8,["checked"]),s(t(u),{for:"active",class:"font-normal"},{default:o(()=>[l(r(t(i).active?"Activo":"Inactivo"),1)]),_:1})]),e[30]||(e[30]=a("p",{class:"text-xs text-muted-foreground"}," Los tenants inactivos no pueden acceder al sistema ",-1))])]),a("div",Et,[a("div",At,[a("div",null,[e[31]||(e[31]=a("span",{class:"font-medium"},"ID del Tenant:",-1)),a("span",Lt,r(d.tenant.id),1)]),a("div",null,[e[32]||(e[32]=a("span",{class:"font-medium"},"Creado:",-1)),a("span",Tt,r(new Date(d.tenant.created_at).toLocaleString()),1)]),a("div",null,[e[33]||(e[33]=a("span",{class:"font-medium"},"Última actualización:",-1)),a("span",Mt,r(new Date(d.tenant.updated_at).toLocaleString()),1)])])])]),_:1})]),_:1})]),_:1}),s(t(z),{value:"settings"},{default:o(()=>[s(t(_),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>[...e[34]||(e[34]=[l("Configuración del Sistema",-1)])]),_:1}),s(t(w),null,{default:o(()=>[...e[35]||(e[35]=[l(" Personalización y configuraciones específicas ",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[a("div",jt,[a("div",Ft,[s(t(u),{for:"logo"},{default:o(()=>[...e[36]||(e[36]=[l("URL del Logo",-1)])]),_:1}),s(t(p),{id:"logo",modelValue:t(i).settings.logo,"onUpdate:modelValue":e[4]||(e[4]=n=>t(i).settings.logo=n),placeholder:"https://ejemplo.com/logo.png",type:"url"},null,8,["modelValue"]),e[37]||(e[37]=a("p",{class:"text-xs text-muted-foreground"}," URL de la imagen del logo de la organización ",-1))]),a("div",Bt,[s(t(u),{for:"primary_color"},{default:o(()=>[...e[38]||(e[38]=[l("Color Primario",-1)])]),_:1}),a("div",Dt,[s(t(p),{id:"primary_color",modelValue:t(i).settings.primary_color,"onUpdate:modelValue":e[5]||(e[5]=n=>t(i).settings.primary_color=n),placeholder:"#3B82F6",pattern:"#[0-9A-Fa-f]{6}"},null,8,["modelValue"]),s(t(p),{type:"color",modelValue:t(i).settings.primary_color,"onUpdate:modelValue":e[6]||(e[6]=n=>t(i).settings.primary_color=n),class:"w-12 p-1"},null,8,["modelValue"])]),e[39]||(e[39]=a("p",{class:"text-xs text-muted-foreground"}," Color principal de la interfaz ",-1))]),a("div",Pt,[s(t(u),{for:"otp_expiration"},{default:o(()=>[...e[40]||(e[40]=[l("Expiración OTP (minutos)",-1)])]),_:1}),s(t(p),{id:"otp_expiration",modelValue:t(i).settings.otp_expiration,"onUpdate:modelValue":e[7]||(e[7]=n=>t(i).settings.otp_expiration=n),modelModifiers:{number:!0},type:"number",min:"5",max:"60",placeholder:"10"},null,8,["modelValue"]),e[41]||(e[41]=a("p",{class:"text-xs text-muted-foreground"}," Tiempo de validez del código OTP (5-60 minutos) ",-1))]),a("div",Nt,[s(t(u),{for:"timezone"},{default:o(()=>[...e[42]||(e[42]=[l("Zona Horaria",-1)])]),_:1}),s(t(D),{modelValue:t(i).settings.timezone,"onUpdate:modelValue":e[8]||(e[8]=n=>t(i).settings.timezone=n)},{default:o(()=>[s(t(P),{id:"timezone"},{default:o(()=>[s(t(N))]),_:1}),s(t(q),null,{default:o(()=>[(f(!0),c(C,null,B(d.timezones,(n,y)=>(f(),V(t(G),{key:y,value:y},{default:o(()=>[l(r(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e[43]||(e[43]=a("p",{class:"text-xs text-muted-foreground"}," Zona horaria por defecto para votaciones ",-1))])])]),_:1})]),_:1})]),_:1}),s(t(z),{value:"limits"},{default:o(()=>[s(t(_),null,{default:o(()=>[s(t(g),null,{default:o(()=>[s(t(v),null,{default:o(()=>[...e[44]||(e[44]=[l("Límites y Cuotas",-1)])]),_:1}),s(t(w),null,{default:o(()=>[...e[45]||(e[45]=[l(" Define los límites de recursos para esta organización ",-1)])]),_:1})]),_:1}),s(t(b),{class:"space-y-4"},{default:o(()=>[a("div",qt,[a("div",Gt,[s(t(u),{for:"max_users"},{default:o(()=>[...e[46]||(e[46]=[l("Usuarios Máximos",-1)])]),_:1}),s(t(p),{id:"max_users",modelValue:t(i).limits.max_users,"onUpdate:modelValue":e[9]||(e[9]=n=>t(i).limits.max_users=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",It," Actual: "+r(d.userCount)+" usuarios ",1)]),a("div",Ot,[s(t(u),{for:"max_votaciones"},{default:o(()=>[...e[47]||(e[47]=[l("Votaciones Máximas",-1)])]),_:1}),s(t(p),{id:"max_votaciones",modelValue:t(i).limits.max_votaciones,"onUpdate:modelValue":e[10]||(e[10]=n=>t(i).limits.max_votaciones=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Rt," Actual: "+r(d.votacionCount)+" votaciones ",1)]),a("div",Zt,[s(t(u),{for:"max_convocatorias"},{default:o(()=>[...e[48]||(e[48]=[l("Convocatorias Máximas",-1)])]),_:1}),s(t(p),{id:"max_convocatorias",modelValue:t(i).limits.max_convocatorias,"onUpdate:modelValue":e[11]||(e[11]=n=>t(i).limits.max_convocatorias=n),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Ht," Actual: "+r(d.convocatoriaCount)+" convocatorias ",1)])]),d.userCount>(t(i).limits.max_users||0)&&t(i).limits.max_users?(f(),V(t(I),{key:0},{default:o(()=>[s(t(R),{class:"h-4 w-4"}),s(t(O),null,{default:o(()=>[...e[49]||(e[49]=[l(" El número actual de usuarios excede el límite establecido. ",-1)])]),_:1})]),_:1})):x("",!0),e[50]||(e[50]=a("div",{class:"rounded-lg bg-muted p-4"},[a("p",{class:"text-sm text-muted-foreground"},[a("strong",null,"Nota:"),l(" Los límites se aplican según el plan de suscripción. Un valor vacío significa que no hay límite establecido para ese recurso. ")])],-1))]),_:1})]),_:1})]),_:1})]),_:1}),a("div",Jt,[s(t(F),{href:j.route("admin.tenants.index")},{default:o(()=>[s(t($),{type:"button",variant:"outline"},{default:o(()=>[...e[51]||(e[51]=[l(" Cancelar ",-1)])]),_:1})]),_:1},8,["href"]),s(t($),{type:"submit",disabled:t(i).processing},{default:o(()=>[s(t(nt),{class:"mr-2 h-4 w-4"}),l(" "+r(t(i).processing?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ke as default};
