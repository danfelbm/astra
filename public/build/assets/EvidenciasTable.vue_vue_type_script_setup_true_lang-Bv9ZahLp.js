import{P as z,c as ve,_ as j,a as Q}from"./createLucideIcon-D0F8u7OI.js";import{_ as J,c as Y,a as _e,b as ge}from"./CardTitle.vue_vue_type_script_setup_true_lang-B2LYPx5G.js";import{q as ye,i as G,f as ce,P as be,_ as S,a as F,b as U,c as H,d as k,C as he}from"./SelectValue.vue_vue_type_script_setup_true_lang-4hvE1hg_.js";import{a as fe,u as D,b as xe,_ as se}from"./Input.vue_vue_type_script_setup_true_lang-D2mUVJSA.js";import{_ as E}from"./Label.vue_vue_type_script_setup_true_lang-Bl2UUPEw.js";import{X as Ce}from"./x-CN5kjM63.js";import{d as V,a3 as pe,b as y,m as f,w as a,U as w,f as e,r as N,c as x,p as Ae,W as $e,o as Ve,e as t,Q as P,j as T,A as ke,C as we,D as qe,g as _,h as c,i as $,F as B,k as I,n as Z,t as b,v as X,l as Be,s as oe}from"./app-DE5myA8s.js";import{_ as Ie}from"./CardDescription.vue_vue_type_script_setup_true_lang-CbdVnJZ8.js";import{_ as R}from"./index-ND6YvCgc.js";import{_ as ne,a as re,b as K,c as C,d as de,e as A}from"./TableHeader.vue_vue_type_script_setup_true_lang-C3c-rmry.js";import{c as ae,a as Ee}from"./VisuallyHidden-DxFZ0SRD.js";import{u as Te}from"./useArrowNavigation-B5rxJs06.js";import{t as De}from"./index-XuT1lgcA.js";import{I as Oe}from"./image-Cnl-quu0.js";import{F as Me}from"./file-text-C16y7GNx.js";import{E as Re}from"./external-link-DKdwBdV6.js";import{E as ie}from"./eye-DsyDO1oh.js";import{D as ue}from"./download-Bt-xDo4N.js";function Se(n,d){return ye(n)?!1:Array.isArray(n)?n.some(o=>G(o,d)):G(n,d)}const[me,Fe]=ae("CollapsibleRoot");var Ue=V({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:open"],setup(n,{expose:d,emit:o}){const r=n,p=fe(r,"open",o,{defaultValue:r.defaultOpen,passive:r.open===void 0}),{disabled:l,unmountOnHide:u}=pe(r);return Fe({contentId:"",disabled:l,open:p,unmountOnHide:u,onOpenToggle:()=>{l.value||(p.value=!p.value)}}),d({open:p}),D(),(m,g)=>(f(),y(e(z),{as:m.as,"as-child":r.asChild,"data-state":e(p)?"open":"closed","data-disabled":e(l)?"":void 0},{default:a(()=>[w(m.$slots,"default",{open:e(p)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),He=Ue,Ne=V({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["contentFound"],setup(n,{emit:d}){const o=n,r=d,v=me();v.contentId||(v.contentId=ce(void 0,"reka-collapsible-content"));const p=N(),{forwardRef:l,currentElement:u}=D(),m=N(0),g=N(0),s=x(()=>v.open.value),i=N(s.value),q=N();Ae(()=>{var h;return[s.value,(h=p.value)==null?void 0:h.present]},async()=>{await $e();const h=u.value;if(!h)return;q.value=q.value||{transitionDuration:h.style.transitionDuration,animationName:h.style.animationName},h.style.transitionDuration="0s",h.style.animationName="none";const M=h.getBoundingClientRect();g.value=M.height,m.value=M.width,i.value||(h.style.transitionDuration=q.value.transitionDuration,h.style.animationName=q.value.animationName)},{immediate:!0});const O=x(()=>i.value&&v.open.value);return Ve(()=>{requestAnimationFrame(()=>{i.value=!1})}),xe(u,"beforematch",h=>{requestAnimationFrame(()=>{v.onOpenToggle(),r("contentFound")})}),(h,M)=>(f(),y(e(be),{ref_key:"presentRef",ref:p,present:h.forceMount||e(v).open.value,"force-mount":!0},{default:a(({present:L})=>{var le;return[t(e(z),P(h.$attrs,{id:e(v).contentId,ref:e(l),"as-child":o.asChild,as:h.as,hidden:L?void 0:e(v).unmountOnHide.value?"":"until-found","data-state":O.value?void 0:e(v).open.value?"open":"closed","data-disabled":(le=e(v).disabled)!=null&&le.value?"":void 0,style:{"--reka-collapsible-content-height":`${g.value}px`,"--reka-collapsible-content-width":`${m.value}px`}}),{default:a(()=>[!e(v).unmountOnHide.value||L?w(h.$slots,"default",{key:0}):T("v-if",!0)]),_:2},1040,["id","as-child","as","hidden","data-state","data-disabled","style"])]}),_:3},8,["present"]))}}),je=Ne,ze=V({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const d=n;D();const o=me();return(r,v)=>{var p,l;return f(),y(e(z),{type:r.as==="button"?"button":void 0,as:r.as,"as-child":d.asChild,"aria-controls":e(o).contentId,"aria-expanded":e(o).open.value,"data-state":e(o).open.value?"open":"closed","data-disabled":(p=e(o).disabled)!=null&&p.value?"":void 0,disabled:(l=e(o).disabled)==null?void 0:l.value,onClick:e(o).onOpenToggle},{default:a(()=>[w(r.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"])}}}),Pe=ze;function Le({type:n,defaultValue:d,modelValue:o}){const r=o||d;return o!==void 0||d!==void 0?Array.isArray(r)?"multiple":"single":n??"single"}function Ke({type:n,defaultValue:d,modelValue:o}){return n||Le({type:n,defaultValue:d,modelValue:o})}function Ge({type:n,defaultValue:d}){return d!==void 0?d:n==="single"?void 0:[]}function Qe(n,d){const o=x(()=>Ke(n)),r=fe(n,"modelValue",d,{defaultValue:Ge(n),passive:n.modelValue===void 0,deep:!0});function v(l){if(o.value==="single")r.value=G(l,r.value)?void 0:l;else{const u=Array.isArray(r.value)?[...r.value||[]]:[r.value].filter(Boolean);if(Se(u,l)){const m=u.findIndex(g=>G(g,l));u.splice(m,1)}else u.push(l);r.value=u}}const p=x(()=>o.value==="single");return{modelValue:r,changeModelValue:v,isSingle:p}}const[W,We]=ae("AccordionRoot");var Xe=V({__name:"AccordionRoot",props:{collapsible:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1,default:"vertical"},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:d}){const o=n,r=d,{dir:v,disabled:p,unmountOnHide:l}=pe(o),u=Ee(v),{modelValue:m,changeModelValue:g,isSingle:s}=Qe(o,r),{forwardRef:i,currentElement:q}=D();return We({disabled:p,direction:u,orientation:o.orientation,parentElement:q,isSingle:s,collapsible:o.collapsible,modelValue:m,changeModelValue:g,unmountOnHide:l}),(O,h)=>(f(),y(e(z),{ref:e(i),"as-child":O.asChild,as:O.as},{default:a(()=>[w(O.$slots,"default",{modelValue:e(m)})]),_:3},8,["as-child","as"]))}}),Je=Xe,ee=(function(n){return n.Open="open",n.Closed="closed",n})(ee||{});const[te,Ye]=ae("AccordionItem");var Ze=V({__name:"AccordionItem",props:{disabled:{type:Boolean,required:!1},value:{type:String,required:!0},unmountOnHide:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n,{expose:d}){const o=n,r=W(),v=x(()=>r.isSingle.value?o.value===r.modelValue.value:Array.isArray(r.modelValue.value)&&r.modelValue.value.includes(o.value)),p=x(()=>r.disabled.value||o.disabled),l=x(()=>p.value?"":void 0),u=x(()=>v.value?ee.Open:ee.Closed);d({open:v,dataDisabled:l});const{currentRef:m,currentElement:g}=D();Ye({open:v,dataState:u,disabled:p,dataDisabled:l,triggerId:"",currentRef:m,currentElement:g,value:x(()=>o.value)});function s(i){var M;const q=i.target;if(Array.from(((M=r.parentElement.value)==null?void 0:M.querySelectorAll("[data-reka-collection-item]"))??[]).findIndex(L=>L===q)===-1)return null;Te(i,q,r.parentElement.value,{arrowKeyOptions:r.orientation,dir:r.direction.value,focus:!0})}return(i,q)=>(f(),y(e(He),{"data-orientation":e(r).orientation,"data-disabled":l.value,"data-state":u.value,disabled:p.value,open:v.value,as:o.as,"as-child":o.asChild,"unmount-on-hide":e(r).unmountOnHide.value,onKeydown:ke(s,["up","down","left","right","home","end"])},{default:a(()=>[w(i.$slots,"default",{open:v.value})]),_:3},8,["data-orientation","data-disabled","data-state","disabled","open","as","as-child","unmount-on-hide"]))}}),ea=Ze,aa=V({__name:"AccordionContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const d=n,o=W(),r=te();return D(),(v,p)=>(f(),y(e(je),{role:"region","as-child":d.asChild,as:v.as,"force-mount":d.forceMount,"aria-labelledby":e(r).triggerId,"data-state":e(r).dataState.value,"data-disabled":e(r).dataDisabled.value,"data-orientation":e(o).orientation,style:{"--reka-accordion-content-width":"var(--reka-collapsible-content-width)","--reka-accordion-content-height":"var(--reka-collapsible-content-height)"},onContentFound:p[0]||(p[0]=l=>e(o).changeModelValue(e(r).value.value))},{default:a(()=>[w(v.$slots,"default")]),_:3},8,["as-child","as","force-mount","aria-labelledby","data-state","data-disabled","data-orientation"]))}}),ta=aa,la=V({__name:"AccordionHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h3"}},setup(n){const d=n,o=W(),r=te();return D(),(v,p)=>(f(),y(e(z),{as:d.as,"as-child":d.asChild,"data-orientation":e(o).orientation,"data-state":e(r).dataState.value,"data-disabled":e(r).dataDisabled.value},{default:a(()=>[w(v.$slots,"default")]),_:3},8,["as","as-child","data-orientation","data-state","data-disabled"]))}}),sa=la,oa=V({__name:"AccordionTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const d=n,o=W(),r=te();r.triggerId||(r.triggerId=ce(void 0,"reka-accordion-trigger"));function v(){const p=o.isSingle.value&&r.open.value&&!o.collapsible;r.disabled.value||p||o.changeModelValue(r.value.value)}return(p,l)=>(f(),y(e(Pe),{id:e(r).triggerId,ref:e(r).currentRef,"data-reka-collection-item":"",as:d.as,"as-child":d.asChild,"aria-disabled":e(r).disabled.value||void 0,"aria-expanded":e(r).open.value||!1,"data-disabled":e(r).dataDisabled.value,"data-orientation":e(o).orientation,"data-state":e(r).dataState.value,disabled:e(r).disabled.value,onClick:v},{default:a(()=>[w(p.$slots,"default")]),_:3},8,["id","as","as-child","aria-disabled","aria-expanded","data-disabled","data-orientation","data-state","disabled"]))}}),na=oa;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=ve("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ra={class:"space-y-4"},da={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4"},ia={class:"space-y-2"},ua={class:"space-y-2"},ca={class:"space-y-2"},fa={class:"space-y-2"},pa={class:"space-y-2"},ma={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},va={class:"space-y-2 md:col-span-2"},_a={key:0,class:"space-y-2 md:col-span-2"},dt=V({__name:"EvidenciaFilters",props:we({contratos:{},evidencias:{},entregables:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const d=n,o=qe(n,"modelValue"),r=x(()=>{const g=new Set(d.evidencias.map(s=>s.tipo_evidencia).filter(Boolean));return Array.from(g).map(s=>({value:s,label:s}))}),v=x(()=>{const g=new Set(d.evidencias.map(s=>s.estado).filter(Boolean));return Array.from(g).map(s=>({value:s,label:s.charAt(0).toUpperCase()+s.slice(1)}))}),p=x(()=>{const g=new Map;return d.evidencias.forEach(s=>{var i;(i=s.usuario)!=null&&i.id&&g.set(s.usuario.id,s.usuario)}),Array.from(g.values()).map(s=>({value:s.id,label:s.name}))}),l=x(()=>{if(!d.entregables||d.entregables.length===0){const g=new Map;return d.evidencias.forEach(s=>{s.entregables&&s.entregables.length>0&&s.entregables.forEach(i=>{i!=null&&i.id&&g.set(i.id,i)})}),Array.from(g.values()).map(s=>({value:s.id,label:s.nombre}))}return d.entregables.map(g=>({value:g.id,label:g.nombre}))}),u=()=>{o.value={contrato_id:null,fecha_inicio:null,fecha_fin:null,tipo:null,estado:null,usuario_id:null,entregable_id:null}},m=x(()=>Object.values(o.value).some(g=>g!==null&&g!==""));return(g,s)=>(f(),y(e(J),null,{default:a(()=>[t(e(Y),{class:"p-4"},{default:a(()=>[_("div",ra,[_("div",da,[_("div",ia,[t(e(E),{for:"filter-contrato",class:"text-xs"},{default:a(()=>[...s[7]||(s[7]=[c("Contrato",-1)])]),_:1}),t(e(S),{modelValue:o.value.contrato_id,"onUpdate:modelValue":s[0]||(s[0]=i=>o.value.contrato_id=i),id:"filter-contrato"},{default:a(()=>[t(e(F),null,{default:a(()=>[t(e(U),{placeholder:"Todos los contratos"})]),_:1}),t(e(H),null,{default:a(()=>[t(e(k),{value:null},{default:a(()=>[...s[8]||(s[8]=[c("Todos los contratos",-1)])]),_:1}),(f(!0),$(B,null,I(n.contratos,i=>(f(),y(e(k),{key:i.id,value:i.id},{default:a(()=>[c(b(i.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_("div",ua,[t(e(E),{for:"filter-fecha-inicio",class:"text-xs"},{default:a(()=>[...s[9]||(s[9]=[c("Fecha Desde",-1)])]),_:1}),t(e(se),{modelValue:o.value.fecha_inicio,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value.fecha_inicio=i),type:"date",id:"filter-fecha-inicio",class:"text-sm"},null,8,["modelValue"])]),_("div",ca,[t(e(E),{for:"filter-fecha-fin",class:"text-xs"},{default:a(()=>[...s[10]||(s[10]=[c("Fecha Hasta",-1)])]),_:1}),t(e(se),{modelValue:o.value.fecha_fin,"onUpdate:modelValue":s[2]||(s[2]=i=>o.value.fecha_fin=i),type:"date",id:"filter-fecha-fin",class:"text-sm"},null,8,["modelValue"])]),_("div",fa,[t(e(E),{for:"filter-tipo",class:"text-xs"},{default:a(()=>[...s[11]||(s[11]=[c("Tipo",-1)])]),_:1}),t(e(S),{modelValue:o.value.tipo,"onUpdate:modelValue":s[3]||(s[3]=i=>o.value.tipo=i),id:"filter-tipo"},{default:a(()=>[t(e(F),null,{default:a(()=>[t(e(U),{placeholder:"Todos los tipos"})]),_:1}),t(e(H),null,{default:a(()=>[t(e(k),{value:null},{default:a(()=>[...s[12]||(s[12]=[c("Todos los tipos",-1)])]),_:1}),(f(!0),$(B,null,I(r.value,i=>(f(),y(e(k),{key:i.value,value:i.value},{default:a(()=>[c(b(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_("div",pa,[t(e(E),{for:"filter-estado",class:"text-xs"},{default:a(()=>[...s[13]||(s[13]=[c("Estado",-1)])]),_:1}),t(e(S),{modelValue:o.value.estado,"onUpdate:modelValue":s[4]||(s[4]=i=>o.value.estado=i),id:"filter-estado"},{default:a(()=>[t(e(F),null,{default:a(()=>[t(e(U),{placeholder:"Todos los estados"})]),_:1}),t(e(H),null,{default:a(()=>[t(e(k),{value:null},{default:a(()=>[...s[14]||(s[14]=[c("Todos los estados",-1)])]),_:1}),(f(!0),$(B,null,I(v.value,i=>(f(),y(e(k),{key:i.value,value:i.value},{default:a(()=>[c(b(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),_("div",ma,[_("div",va,[t(e(E),{for:"filter-usuario",class:"text-xs"},{default:a(()=>[...s[15]||(s[15]=[c("Usuario",-1)])]),_:1}),t(e(S),{modelValue:o.value.usuario_id,"onUpdate:modelValue":s[5]||(s[5]=i=>o.value.usuario_id=i),id:"filter-usuario"},{default:a(()=>[t(e(F),null,{default:a(()=>[t(e(U),{placeholder:"Todos los usuarios"})]),_:1}),t(e(H),null,{default:a(()=>[t(e(k),{value:null},{default:a(()=>[...s[16]||(s[16]=[c("Todos los usuarios",-1)])]),_:1}),(f(!0),$(B,null,I(p.value,i=>(f(),y(e(k),{key:i.value,value:i.value},{default:a(()=>[c(b(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l.value.length>0?(f(),$("div",_a,[t(e(E),{for:"filter-entregable",class:"text-xs"},{default:a(()=>[...s[17]||(s[17]=[c("Entregable",-1)])]),_:1}),t(e(S),{modelValue:o.value.entregable_id,"onUpdate:modelValue":s[6]||(s[6]=i=>o.value.entregable_id=i),id:"filter-entregable"},{default:a(()=>[t(e(F),null,{default:a(()=>[t(e(U),{placeholder:"Todos los entregables"})]),_:1}),t(e(H),null,{default:a(()=>[t(e(k),{value:null},{default:a(()=>[...s[18]||(s[18]=[c("Todos los entregables",-1)])]),_:1}),(f(!0),$(B,null,I(l.value,i=>(f(),y(e(k),{key:i.value,value:i.value},{default:a(()=>[c(b(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])):T("",!0),_("div",{class:Z(["flex items-end",l.value.length>0?"md:col-span-1":"md:col-span-3"])},[m.value?(f(),y(e(j),{key:0,variant:"outline",size:"sm",onClick:u,class:"w-full md:w-auto"},{default:a(()=>[t(e(Ce),{class:"h-4 w-4 mr-2"}),s[19]||(s[19]=c(" Limpiar Filtros ",-1))]),_:1})):T("",!0)],2)])])]),_:1})]),_:1}))}}),ga=V({__name:"Accordion",props:{collapsible:{type:Boolean},disabled:{type:Boolean},dir:{},orientation:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{},class:{}},setup(n){const d=n;return(o,r)=>(f(),y(e(Je),P(d,{class:e(Q)("w-full",d.class)}),{default:a(()=>[w(o.$slots,"default")]),_:3},16,["class"]))}}),ya=V({__name:"AccordionItem",props:{disabled:{type:Boolean},value:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const d=n;return(o,r)=>(f(),y(e(ea),P(d,{class:e(Q)("border-b",d.class)}),{default:a(()=>[w(o.$slots,"default")]),_:3},16,["class"]))}}),ba=V({__name:"AccordionTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const d=n;return(o,r)=>(f(),y(e(sa),{class:"flex"},{default:a(()=>[t(e(na),P(d,{class:e(Q)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",d.class)}),{default:a(()=>[w(o.$slots,"default"),t(e(he),{class:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]),_:3},16,["class"])]),_:3}))}}),ha={class:"pb-4 pt-0"},xa=V({__name:"AccordionContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const d=n;return(o,r)=>(f(),y(e(ta),P(d,{class:e(Q)("overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",d.class)}),{default:a(()=>[_("div",ha,[w(o.$slots,"default")])]),_:3},16,["class"]))}}),Ca={key:0},Aa={class:"flex items-center justify-between w-full pr-4"},$a={class:"flex items-center gap-3"},Va={class:"text-left"},ka={class:"font-semibold"},wa={class:"text-sm text-gray-500"},qa={class:"flex items-center gap-3"},Ba={class:"text-sm text-gray-600"},Ia={class:"text-sm"},Ea={class:"flex items-center justify-end gap-2"},Ta=["href"],Da={key:1},Oa={class:"text-sm text-gray-600"},Ma={key:0,class:"flex flex-wrap gap-1"},Ra={key:1,class:"text-sm text-gray-500"},Sa={class:"text-sm"},Fa={class:"flex items-center justify-end gap-2"},Ua=["href"],Ha={class:"text-center"},Na={class:"mt-2 text-sm text-gray-600"},ja={class:"text-xs text-gray-500 mt-1"},it=V({__name:"EvidenciasTable",props:{mode:{},evidencias:{},evidenciasAgrupadas:{},contrato:{},formatDate:{},cardTitle:{default:"Evidencias Asociadas"},cardDescription:{default:"Evidencias cargadas para esta obligación"},modo:{default:"admin"},puedeGestionarEstado:{type:Boolean,default:!1},proyectoId:{}},setup(n){const d=n,o=p=>({"bg-yellow-100 text-yellow-800":p==="pendiente","bg-green-100 text-green-800":p==="aprobada","bg-red-100 text-red-800":p==="rechazada"}),r=x(()=>d.mode==="grouped"?d.evidenciasAgrupadas&&d.evidenciasAgrupadas.length>0:d.evidencias&&d.evidencias.length>0),v=(p,l)=>{if(l===p.estado||!d.proyectoId)return;const u=d.modo==="admin"?`/admin/proyectos/${d.proyectoId}/evidencias/${p.id}/cambiar-estado`:`/miembro/mis-proyectos/${d.proyectoId}/evidencias/${p.id}/cambiar-estado`;oe.post(u,{estado:l,observaciones:null},{preserveScroll:!0,onSuccess:()=>{oe.reload()},onError:m=>{De.error("Error al cambiar el estado"),console.error(m)}})};return(p,l)=>n.mode==="grouped"&&r.value?(f(),$("div",Ca,[t(e(ga),{type:"multiple",class:"space-y-4",collapsible:""},{default:a(()=>[(f(!0),$(B,null,I(n.evidenciasAgrupadas,u=>(f(),y(e(ya),{key:u.contrato.id,value:`contrato-${u.contrato.id}`,class:"border rounded-lg bg-card"},{default:a(()=>[t(e(ba),{class:"px-4 py-3 hover:no-underline hover:bg-gray-50 dark:hover:bg-gray-800 rounded-t-lg"},{default:a(()=>[_("div",Aa,[_("div",$a,[t(e(Me),{class:"h-5 w-5 text-gray-500"}),_("div",Va,[_("div",ka,b(u.contrato.nombre),1),_("div",wa," Contrato #"+b(u.contrato.id),1)])]),_("div",qa,[t(e(R),{variant:"secondary"},{default:a(()=>[c(b(u.evidencias.length)+" evidencia(s) ",1)]),_:2},1024),t(e(X),{href:`/admin/contratos/${u.contrato.id}`,onClick:l[0]||(l[0]=Be(()=>{},["stop"])),class:"text-blue-600 hover:text-blue-800 flex items-center gap-1"},{default:a(()=>[l[1]||(l[1]=c(" Ver contrato ",-1)),t(e(Re),{class:"h-3 w-3"})]),_:1},8,["href"])])])]),_:2},1024),t(e(xa),{class:"px-4 pb-4"},{default:a(()=>[t(e(ne),null,{default:a(()=>[t(e(re),null,{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(C),null,{default:a(()=>[...l[2]||(l[2]=[c("Tipo",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[3]||(l[3]=[c("Obligación",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[4]||(l[4]=[c("Descripción",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[5]||(l[5]=[c("Usuario",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[6]||(l[6]=[c("Estado",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[7]||(l[7]=[c("Fecha",-1)])]),_:1}),t(e(C),{class:"text-right"},{default:a(()=>[...l[8]||(l[8]=[c("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(de),null,{default:a(()=>[(f(!0),$(B,null,I(u.evidencias,m=>(f(),y(e(K),{key:m.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[t(e(A),null,{default:a(()=>[t(e(R),{variant:"outline"},{default:a(()=>[c(b(m.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),t(e(A),null,{default:a(()=>[c(b(m.obligacion_titulo),1)]),_:2},1024),t(e(A),null,{default:a(()=>[_("span",Ba,b(m.descripcion||"-"),1)]),_:2},1024),t(e(A),null,{default:a(()=>{var g;return[_("span",Ia,b(((g=m.usuario)==null?void 0:g.name)||"-"),1)]}),_:2},1024),t(e(A),null,{default:a(()=>[t(e(R),{class:Z(o(m.estado))},{default:a(()=>[c(b(m.estado),1)]),_:2},1032,["class"])]),_:2},1024),t(e(A),null,{default:a(()=>[c(b(n.formatDate(m.created_at)),1)]),_:2},1024),t(e(A),{class:"text-right"},{default:a(()=>[_("div",Ea,[t(e(j),{variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>[t(e(X),{href:`/admin/contratos/${u.contrato.id}/evidencias/${m.id}`},{default:a(()=>[t(e(ie),{class:"h-4 w-4"}),l[9]||(l[9]=_("span",{class:"ml-1"},"Ver",-1))]),_:1},8,["href"])]),_:2},1024),m.archivo_url?(f(),y(e(j),{key:0,variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>[_("a",{href:m.archivo_url,target:"_blank"},[t(e(ue),{class:"h-4 w-4"}),l[10]||(l[10]=_("span",{class:"ml-1"},"Descargar",-1))],8,Ta)]),_:2},1024)):T("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])):n.mode==="simple"&&r.value?(f(),$("div",Da,[t(e(J),null,{default:a(()=>[t(e(_e),null,{default:a(()=>[t(e(ge),null,{default:a(()=>[c(b(n.cardTitle),1)]),_:1}),t(e(Ie),null,{default:a(()=>[c(b(n.cardDescription),1)]),_:1})]),_:1}),t(e(Y),null,{default:a(()=>[t(e(ne),null,{default:a(()=>[t(e(re),null,{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(C),null,{default:a(()=>[...l[11]||(l[11]=[c("Tipo",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[12]||(l[12]=[c("Descripción",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[13]||(l[13]=[c("Entregable",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[14]||(l[14]=[c("Usuario",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[15]||(l[15]=[c("Estado",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...l[16]||(l[16]=[c("Fecha",-1)])]),_:1}),t(e(C),{class:"text-right"},{default:a(()=>[...l[17]||(l[17]=[c("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(de),null,{default:a(()=>[(f(!0),$(B,null,I(n.evidencias,u=>(f(),y(e(K),{key:u.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},{default:a(()=>[t(e(A),null,{default:a(()=>[t(e(R),{variant:"outline"},{default:a(()=>[c(b(u.tipo_evidencia),1)]),_:2},1024)]),_:2},1024),t(e(A),null,{default:a(()=>[_("span",Oa,b(u.descripcion||"-"),1)]),_:2},1024),t(e(A),null,{default:a(()=>[u.entregables&&u.entregables.length>0?(f(),$("div",Ma,[(f(!0),$(B,null,I(u.entregables,m=>(f(),y(e(R),{key:m.id,variant:"secondary",class:"text-xs"},{default:a(()=>[c(b(m.nombre),1)]),_:2},1024))),128))])):(f(),$("span",Ra,"-"))]),_:2},1024),t(e(A),null,{default:a(()=>{var m;return[_("span",Sa,b(((m=u.usuario)==null?void 0:m.name)||"-"),1)]}),_:2},1024),t(e(A),null,{default:a(()=>[t(e(R),{class:Z(o(u.estado))},{default:a(()=>[c(b(u.estado),1)]),_:2},1032,["class"])]),_:2},1024),t(e(A),null,{default:a(()=>[c(b(n.formatDate(u.created_at)),1)]),_:2},1024),t(e(A),{class:"text-right"},{default:a(()=>[_("div",Fa,[t(e(j),{variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>{var m;return[t(e(X),{href:`/admin/contratos/${(m=n.contrato)==null?void 0:m.id}/evidencias/${u.id}`},{default:a(()=>[t(e(ie),{class:"h-4 w-4"}),l[18]||(l[18]=_("span",{class:"ml-1"},"Ver",-1))]),_:1},8,["href"])]}),_:2},1024),u.archivo_url?(f(),y(e(j),{key:0,variant:"ghost",size:"sm","as-child":"",class:"h-8 px-2"},{default:a(()=>[_("a",{href:u.archivo_url,target:"_blank"},[t(e(ue),{class:"h-4 w-4"}),l[19]||(l[19]=_("span",{class:"ml-1"},"Descargar",-1))],8,Ua)]),_:2},1024)):T("",!0),n.modo==="admin"&&n.proyectoId||n.modo==="user"&&n.puedeGestionarEstado&&n.proyectoId?(f(),y(e(S),{key:1,"model-value":u.estado,"onUpdate:modelValue":m=>v(u,m)},{default:a(()=>[t(e(F),{class:"h-8 w-32"},{default:a(()=>[t(e(U))]),_:1}),t(e(H),null,{default:a(()=>[t(e(k),{value:"pendiente"},{default:a(()=>[...l[20]||(l[20]=[_("span",{class:"text-yellow-600"},"Pendiente",-1)])]),_:1}),t(e(k),{value:"aprobada"},{default:a(()=>[...l[21]||(l[21]=[_("span",{class:"text-green-600"},"Aprobada",-1)])]),_:1}),t(e(k),{value:"rechazada"},{default:a(()=>[...l[22]||(l[22]=[_("span",{class:"text-red-600"},"Rechazada",-1)])]),_:1})]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])):T("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])):r.value?T("",!0):(f(),y(e(J),{key:2},{default:a(()=>[t(e(Y),{class:"py-8"},{default:a(()=>[_("div",Ha,[t(e(Oe),{class:"mx-auto h-12 w-12 text-gray-400"}),_("p",Na,b(n.mode==="grouped"?"No hay evidencias que coincidan con los filtros":"No hay evidencias asociadas"),1),_("p",ja,b(n.mode==="grouped"?"Intenta ajustar los criterios de búsqueda":"Las evidencias se cargan desde los contratos"),1)])]),_:1})]),_:1}))}});export{rt as A,dt as _,it as a,ga as b,ya as c,ba as d,xa as e};
