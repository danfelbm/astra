import{d as J,c as C,G as K,b as v,e as r,w as a,g as i,j as c,f as o,u as t,P as D,h as l,q as $,t as n,i as d,F as T,k as z,W as Q}from"./app-D8b1iyhG.js";import{_ as Y}from"./UserLayout.vue_vue_type_script_setup_true_lang-D3FQmwdK.js";import{_ as h,a as g,b,c as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-CpubZFQk.js";import{_ as Z}from"./CardDescription.vue_vue_type_script_setup_true_lang-kW7TGVkd.js";import{_ as p}from"./createLucideIcon-BzCZ4Ux9.js";import{_ as A}from"./index-BFz4Rjr1.js";import{_ as M,a as j}from"./index-DPm6YMhX.js";import{F as E}from"./file--2ctvJMu.js";import{M as S}from"./music-CBCpczSo.js";import{V as ee}from"./video-BjZnlbgB.js";import{I as se}from"./image-DeuZQABN.js";import{C as q}from"./circle-x-DsYKV8ih.js";import{C as I}from"./circle-check-big-JRbHwfFc.js";import{C as O}from"./clock-DfPMpIv_.js";import{A as te}from"./arrow-left-DAvFF-xx.js";import{D as w}from"./download-oSgoMRdn.js";import{S as ie}from"./square-pen-BlhzgUDR.js";import{T as oe}from"./trash-2-DvIOqUt1.js";import{T as ae}from"./triangle-alert-IfWxoaA0.js";import{E as re}from"./eye-B4Cq1sO3.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-DfKxWH3N.js";import"./index-9EknitmW.js";import"./floating-ui.vue-D_44iLrk.js";import"./x-Di3hRZd2.js";import"./Input.vue_vue_type_script_setup_true_lang-DEoN5cyd.js";import"./index-_HrGOJG6.js";import"./index-yOcDiT7U.js";import"./shield-CrMFR-sA.js";import"./user-DoEsQuJB.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Clw7uZZX.js";import"./chevron-right-C1p0_YAD.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D5C9pVNC.js";import"./VisuallyHidden-D42UHKy9.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BW9QKckn.js";import"./check-DAlbwhOo.js";import"./nullish-CHIgUVhi.js";import"./Label.vue_vue_type_script_setup_true_lang-DXnOW2ZY.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CPkoHE-3.js";import"./index-DFpoRNc9.js";import"./circle-alert-BAiY2yAu.js";import"./map-pin-DH233x2C.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cl6UTNVG.js";import"./square-check-big-DrHt1pO1.js";import"./file-text-D-NxJb2x.js";import"./users-bMGn_vPW.js";import"./folder-open-DzYKMiH4.js";import"./index-BPeLIox3.js";const ne={class:"space-y-6"},de={class:"flex justify-between items-start"},le={class:"flex items-center gap-4 mt-2"},ce={class:"text-muted-foreground"},me={class:"flex gap-2"},ue={key:0},ve={class:"grid gap-6 lg:grid-cols-3"},fe={class:"lg:col-span-2 space-y-6"},pe={key:0,class:"ml-2"},_e={class:"space-y-4"},he={key:0,class:"space-y-4"},ge={key:0,class:"text-center"},be=["src","alt"],ye={class:"text-sm text-muted-foreground mt-2"},we={key:1,class:"text-center"},ke=["src"],xe={class:"text-sm text-muted-foreground mt-2"},Ce={key:2,class:"flex flex-col items-center gap-4"},Ee={class:"flex items-center gap-3"},De={class:"text-left"},$e={class:"font-medium"},Te=["src"],ze={key:3,class:"flex items-center gap-4 py-4"},Ae={class:"flex-1"},Se={class:"font-medium"},Ve={class:"text-sm text-muted-foreground"},Fe={key:1,class:"bg-muted/30 rounded-lg p-4"},Be={key:0,class:"text-center"},Ne=["src","alt"],Le={key:1,class:"text-center"},Me=["src"],je={key:2,class:"flex flex-col items-center gap-4"},qe=["src"],Ie={key:3,class:"flex flex-col items-center gap-4 py-8"},Oe={class:"text-center"},Pe={class:"font-medium"},Re={class:"text-sm text-muted-foreground"},We={key:0},Ge={key:2,class:"text-center py-8 text-muted-foreground"},Ue={class:"whitespace-pre-wrap"},Xe={class:"space-y-6"},He={class:"font-medium"},Je={key:0,class:"text-sm text-muted-foreground mt-1"},Ke={class:"space-y-2"},Qe={class:"font-medium text-sm"},Ye={class:"text-xs text-muted-foreground"},Ze={class:"text-sm"},es={class:"text-sm"},ss={key:0},ts={class:"space-y-2 max-h-32 overflow-y-auto"},is={class:"truncate flex-1 mr-2"},os={key:1},as={class:"text-sm"},rs={key:2},ns={class:"text-sm"},ds={class:"text-sm"},ls={class:"text-sm"},cs={key:3},ms={class:"text-sm"},us={key:0,class:"text-xs text-muted-foreground"},vs={class:"text-sm whitespace-pre-wrap"},nt=J({__name:"Show",props:{contrato:{},evidencia:{}},setup(P){const m=P,R=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"},{title:m.contrato.nombre,href:`/miembro/mis-contratos/${m.contrato.id}`},{title:"Evidencias",href:`/miembro/mis-contratos/${m.contrato.id}/evidencias`},{title:"Ver Evidencia",href:"#"}],V=C(()=>({imagen:se,video:ee,audio:S,documento:E})[m.evidencia.tipo_evidencia]||E),F=C(()=>({pendiente:{color:"secondary",icon:O,bgClass:"bg-yellow-50",textClass:"text-yellow-800"},aprobada:{color:"success",icon:I,bgClass:"bg-green-50",textClass:"text-green-800"},rechazada:{color:"destructive",icon:q,bgClass:"bg-red-50",textClass:"text-red-800"}})[m.evidencia.estado]||{color:"default",icon:O,bgClass:"bg-gray-50",textClass:"text-gray-800"}),B=K(),W=C(()=>{var e,s;return m.evidencia.estado==="pendiente"&&m.evidencia.user_id===((s=(e=B.props.auth)==null?void 0:e.user)==null?void 0:s.id)}),G=C(()=>{var e,s;return m.evidencia.estado==="pendiente"&&m.evidencia.user_id===((s=(e=B.props.auth)==null?void 0:e.user)==null?void 0:s.id)}),N=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",U=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",X=()=>{confirm("¿Estás seguro de que deseas eliminar esta evidencia? Esta acción no se puede deshacer.")&&Q.delete(route("user.mis-contratos.evidencias.destroy",[m.contrato.id,m.evidencia.id]))},_=e=>{const s=e||m.evidencia.archivo_url;s&&window.open(s,"_blank")},H=()=>{var e;((e=m.evidencia.archivos_urls)==null?void 0:e.length)>0?m.evidencia.archivos_urls.forEach((s,k)=>{setTimeout(()=>{window.open(s,"_blank")},k*500)}):m.evidencia.archivo_url&&_()};return(e,s)=>(r(),v(Y,{breadcrumbs:R},{default:a(()=>{var k;return[i("div",ne,[i("div",de,[i("div",null,[o(t(D),{href:e.route("user.mis-contratos.evidencias.index",e.contrato.id),class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:a(()=>[o(t(te),{class:"w-4 h-4 mr-2"}),s[0]||(s[0]=l(" Volver a Evidencias ",-1))]),_:1},8,["href"]),s[1]||(s[1]=i("h2",{class:"text-3xl font-bold tracking-tight"},"Ver Evidencia",-1)),i("div",le,[o(t(A),{variant:F.value.color},{default:a(()=>[(r(),v($(F.value.icon),{class:"w-3 h-3 mr-1"})),l(" "+n(e.evidencia.estado_label),1)]),_:1},8,["variant"]),o(t(A),{variant:"outline"},{default:a(()=>[(r(),v($(V.value),{class:"w-3 h-3 mr-1"})),l(" "+n(e.evidencia.tipo_evidencia_label),1)]),_:1}),o(t(A),{variant:"secondary"},{default:a(()=>[l(n(e.evidencia.tiene_multiples_archivos?`${e.evidencia.total_archivos} archivos`:"1 archivo"),1)]),_:1}),i("span",ce," Subida "+n(U(e.evidencia.created_at)),1)])]),i("div",me,[e.evidencia.tiene_multiples_archivos?(r(),v(t(p),{key:0,onClick:H,variant:"outline"},{default:a(()=>[o(t(w),{class:"w-4 h-4 mr-2"}),l(" Descargar Todos ("+n(e.evidencia.total_archivos)+") ",1)]),_:1})):e.evidencia.archivo_url?(r(),v(t(p),{key:1,onClick:_,variant:"outline"},{default:a(()=>[o(t(w),{class:"w-4 h-4 mr-2"}),s[2]||(s[2]=l(" Descargar ",-1))]),_:1})):c("",!0),W.value?(r(),v(t(p),{key:2,href:e.route("user.mis-contratos.evidencias.edit",[e.contrato.id,e.evidencia.id]),as:t(D),variant:"outline"},{default:a(()=>[o(t(ie),{class:"w-4 h-4 mr-2"}),s[3]||(s[3]=l(" Editar ",-1))]),_:1},8,["href","as"])):c("",!0),G.value?(r(),v(t(p),{key:3,onClick:X,variant:"destructive"},{default:a(()=>[o(t(oe),{class:"w-4 h-4 mr-2"}),s[4]||(s[4]=l(" Eliminar ",-1))]),_:1})):c("",!0)])]),e.evidencia.estado==="rechazada"?(r(),v(t(M),{key:0,class:"border-red-200 bg-red-50"},{default:a(()=>[o(t(q),{class:"h-4 w-4 text-red-600"}),o(t(j),{class:"text-red-800"},{default:a(()=>[s[5]||(s[5]=l(" Esta evidencia ha sido rechazada. ",-1)),e.evidencia.observaciones_admin?(r(),d("span",ue," Motivo: "+n(e.evidencia.observaciones_admin),1)):c("",!0)]),_:1})]),_:1})):c("",!0),e.evidencia.estado==="aprobada"?(r(),v(t(M),{key:1,class:"border-green-200 bg-green-50"},{default:a(()=>[o(t(I),{class:"h-4 w-4 text-green-600"}),o(t(j),{class:"text-green-800"},{default:a(()=>[...s[6]||(s[6]=[l(" Esta evidencia ha sido aprobada exitosamente. ",-1)])]),_:1})]),_:1})):c("",!0),i("div",ve,[i("div",fe,[o(t(h),null,{default:a(()=>[o(t(g),null,{default:a(()=>[o(t(b),{class:"flex items-center gap-2"},{default:a(()=>[(r(),v($(V.value),{class:"w-5 h-5"})),s[7]||(s[7]=l(" Archivo de Evidencia ",-1))]),_:1}),o(t(Z),null,{default:a(()=>[l(n(e.evidencia.archivo_nombre||"Archivo subido")+" ",1),e.evidencia.archivo_size_formatted?(r(),d("span",pe," ("+n(e.evidencia.archivo_size_formatted)+") ",1)):c("",!0)]),_:1})]),_:1}),o(t(y),null,{default:a(()=>{var f;return[i("div",_e,[((f=e.evidencia.archivos_info)==null?void 0:f.length)>0?(r(),d("div",he,[(r(!0),d(T,null,z(e.evidencia.archivos_info,(u,x)=>(r(),d("div",{key:u.indice,class:"bg-muted/30 rounded-lg p-4 relative group"},[o(t(p),{onClick:L=>_(u.url),variant:"outline",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},{default:a(()=>[o(t(w),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),e.evidencia.es_imagen?(r(),d("div",ge,[i("img",{src:u.url,alt:u.nombre,class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"},null,8,be),i("p",ye,n(u.nombre),1)])):e.evidencia.es_video?(r(),d("div",we,[i("video",{src:u.url,controls:"",class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,ke),i("p",xe,n(u.nombre),1)])):e.evidencia.es_audio?(r(),d("div",Ce,[i("div",Ee,[o(t(S),{class:"w-12 h-12 text-muted-foreground"}),i("div",De,[i("p",$e,n(u.nombre),1),s[8]||(s[8]=i("p",{class:"text-sm text-muted-foreground"},"Archivo de audio",-1))])]),i("audio",{src:u.url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Te)])):(r(),d("div",ze,[o(t(E),{class:"w-12 h-12 text-muted-foreground flex-shrink-0"}),i("div",Ae,[i("p",Se,n(u.nombre),1),i("p",Ve,n(e.evidencia.tipo_evidencia_label),1)]),o(t(p),{onClick:L=>_(u.url),variant:"outline",size:"sm"},{default:a(()=>[o(t(w),{class:"w-4 h-4 mr-2"}),s[9]||(s[9]=l(" Descargar ",-1))]),_:2},1032,["onClick"])]))]))),128))])):e.evidencia.archivo_url?(r(),d("div",Fe,[e.evidencia.es_imagen?(r(),d("div",Be,[i("img",{src:e.evidencia.archivo_url,alt:e.evidencia.descripcion||"Evidencia",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"},null,8,Ne)])):e.evidencia.es_video?(r(),d("div",Le,[i("video",{src:e.evidencia.archivo_url,controls:"",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,Me)])):e.evidencia.es_audio?(r(),d("div",je,[o(t(S),{class:"w-16 h-16 text-muted-foreground"}),i("audio",{src:e.evidencia.archivo_url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,qe)])):(r(),d("div",Ie,[o(t(E),{class:"w-16 h-16 text-muted-foreground"}),i("div",Oe,[i("p",Pe,n(e.evidencia.archivo_nombre),1),i("p",Re,[l(n(e.evidencia.tipo_evidencia_label)+" ",1),e.evidencia.archivo_size_formatted?(r(),d("span",We," • "+n(e.evidencia.archivo_size_formatted),1)):c("",!0)])]),o(t(p),{onClick:_,variant:"outline"},{default:a(()=>[o(t(w),{class:"w-4 h-4 mr-2"}),s[10]||(s[10]=l(" Descargar para ver ",-1))]),_:1})]))])):(r(),d("div",Ge,[o(t(ae),{class:"w-12 h-12 mx-auto mb-3"}),s[11]||(s[11]=i("p",null,"No se pudo cargar el archivo",-1))]))])]}),_:1})]),_:1}),e.evidencia.descripcion?(r(),v(t(h),{key:0},{default:a(()=>[o(t(g),null,{default:a(()=>[o(t(b),null,{default:a(()=>[...s[12]||(s[12]=[l("Descripción",-1)])]),_:1})]),_:1}),o(t(y),null,{default:a(()=>[i("p",Ue,n(e.evidencia.descripcion),1)]),_:1})]),_:1})):c("",!0)]),i("div",Xe,[o(t(h),null,{default:a(()=>[o(t(g),null,{default:a(()=>[o(t(b),null,{default:a(()=>[...s[13]||(s[13]=[l("Obligación Contractual",-1)])]),_:1})]),_:1}),o(t(y),{class:"space-y-4"},{default:a(()=>[i("div",null,[i("p",He,n(e.evidencia.obligacion.nombre),1),e.evidencia.obligacion.descripcion?(r(),d("p",Je,n(e.evidencia.obligacion.descripcion),1)):c("",!0)]),o(t(p),{href:e.route("user.mis-obligaciones.show",e.evidencia.obligacion.id),as:t(D),variant:"outline",size:"sm"},{default:a(()=>[o(t(re),{class:"w-4 h-4 mr-2"}),s[14]||(s[14]=l(" Ver Obligación ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),((k=e.evidencia.entregables)==null?void 0:k.length)>0?(r(),v(t(h),{key:0},{default:a(()=>[o(t(g),null,{default:a(()=>[o(t(b),null,{default:a(()=>[...s[15]||(s[15]=[l("Entregables Asociados",-1)])]),_:1})]),_:1}),o(t(y),null,{default:a(()=>[i("div",Ke,[(r(!0),d(T,null,z(e.evidencia.entregables,f=>(r(),d("div",{key:f.id,class:"p-3 bg-muted/30 rounded-lg"},[i("p",Qe,n(f.nombre),1),i("p",Ye,n(f.hito),1)]))),128))])]),_:1})]),_:1})):c("",!0),o(t(h),null,{default:a(()=>[o(t(g),null,{default:a(()=>[o(t(b),null,{default:a(()=>[l(n(e.evidencia.tiene_multiples_archivos?"Detalles de los Archivos":"Detalles del Archivo"),1)]),_:1})]),_:1}),o(t(y),{class:"space-y-3"},{default:a(()=>{var f,u;return[i("div",null,[s[16]||(s[16]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Tipo",-1)),i("p",Ze,n(e.evidencia.tipo_evidencia_label),1)]),i("div",null,[s[17]||(s[17]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Cantidad",-1)),i("p",es,n(e.evidencia.total_archivos||1)+" archivo(s)",1)]),((f=e.evidencia.archivos_info)==null?void 0:f.length)>0?(r(),d("div",ss,[s[18]||(s[18]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Archivos",-1)),i("div",ts,[(r(!0),d(T,null,z(e.evidencia.archivos_info,x=>(r(),d("div",{key:x.indice,class:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded"},[i("span",is,n(x.nombre),1),o(t(p),{onClick:L=>_(x.url),size:"sm",variant:"ghost",class:"h-6 w-6 p-0"},{default:a(()=>[o(t(w),{class:"w-3 h-3"})]),_:2},1032,["onClick"])]))),128))])])):e.evidencia.archivo_size_formatted?(r(),d("div",os,[s[19]||(s[19]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Tamaño",-1)),i("p",as,n(e.evidencia.archivo_size_formatted),1)])):c("",!0),(u=e.evidencia.metadata)!=null&&u.mime_type?(r(),d("div",rs,[s[20]||(s[20]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Formato",-1)),i("p",ns,n(e.evidencia.metadata.mime_type),1)])):c("",!0),i("div",null,[s[21]||(s[21]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Subido por",-1)),i("p",ds,n(e.evidencia.usuario.name),1)]),i("div",null,[s[22]||(s[22]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Fecha de subida",-1)),i("p",ls,n(N(e.evidencia.created_at)),1)]),e.evidencia.revisado_at?(r(),d("div",cs,[s[23]||(s[23]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Revisado",-1)),i("p",ms,n(N(e.evidencia.revisado_at)),1),e.evidencia.revisor?(r(),d("p",us," por "+n(e.evidencia.revisor.name),1)):c("",!0)])):c("",!0)]}),_:1})]),_:1}),e.evidencia.observaciones_admin?(r(),v(t(h),{key:1},{default:a(()=>[o(t(g),null,{default:a(()=>[o(t(b),null,{default:a(()=>[...s[24]||(s[24]=[l("Observaciones de Revisión",-1)])]),_:1})]),_:1}),o(t(y),null,{default:a(()=>[i("p",vs,n(e.evidencia.observaciones_admin),1)]),_:1})]),_:1})):c("",!0)])])])]}),_:1}))}});export{nt as default};
