import{a as z,b as S,c as B,_ as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-DhGz-PEe.js";import{_ as v}from"./index-CBsS3L2Y.js";import{_ as g}from"./createLucideIcon-CDD88oTc.js";import{d as F,c as h,b,w as i,e as o,f as a,g as e,i as c,j as l,h as u,t as n,v as M,n as f,y as V,F as _,m as r}from"./app-DB52i0Vi.js";import{C as w}from"./calendar-BG7OdIRp.js";import{D as E}from"./dollar-sign-DPEYK27T.js";import{U as k}from"./user-CkpVpm_2.js";import{C as N}from"./circle-alert-Fzh2I4oh.js";import{F as P}from"./file-text-P5qiexdG.js";import{E as $}from"./eye-DCSEm6gP.js";import{S as A}from"./square-pen-B5xRwGN3.js";const T={class:"flex items-start justify-between"},U={class:"flex-1"},q={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},I={key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},L={key:1,class:"grid grid-cols-2 gap-3 text-sm"},R={class:"flex items-center gap-2"},G={class:"ml-1 font-medium"},H={class:"flex items-center gap-2"},J={class:"ml-1 font-medium"},K={key:0,class:"flex items-center gap-2"},O={class:"font-medium"},Q={key:1,class:"flex items-center gap-2"},W={class:"truncate"},X={key:2,class:"text-sm"},Y={class:"flex items-center gap-2"},Z={class:"truncate font-medium"},p={key:3,class:"flex items-center gap-2"},tt={key:4},et={class:"flex justify-between text-xs text-gray-600 mb-1"},at={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},ot={class:"flex items-center justify-between"},st={key:0,class:"flex gap-2"},xt=F({__name:"ContratoCard",props:{contrato:{},showProyecto:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},viewMode:{default:"admin"}},setup(t){const m=t,C=h(()=>({borrador:"bg-gray-100 text-gray-800",activo:"bg-green-100 text-green-800",finalizado:"bg-blue-100 text-blue-800",cancelado:"bg-red-100 text-red-800"})[m.contrato.estado]||"bg-gray-100 text-gray-800"),j=h(()=>m.contrato.estado==="cancelado"?"bg-red-500":m.contrato.estado==="finalizado"?"bg-blue-500":m.contrato.esta_vencido?"bg-red-500":m.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),y=d=>d?new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-";return(d,s)=>(r(),b(a(D),{class:"hover:shadow-lg transition-shadow duration-300 cursor-pointer"},{default:i(()=>[o(a(z),null,{default:i(()=>[e("div",T,[e("div",U,[o(a(S),{class:"text-lg font-semibold mb-1"},{default:i(()=>[u(n(t.contrato.nombre),1)]),_:1}),t.showProyecto&&t.contrato.proyecto?(r(),c("div",q,[o(a(M),{href:t.viewMode==="user"?`/miembro/mis-proyectos/${t.contrato.proyecto.id}`:`/admin/proyectos/${t.contrato.proyecto.id}`,class:"hover:text-primary transition-colors"},{default:i(()=>[u(n(t.contrato.proyecto.nombre),1)]),_:1},8,["href"])])):l("",!0)]),o(a(v),{class:f(C.value)},{default:i(()=>[u(n(t.contrato.estado),1)]),_:1},8,["class"])])]),_:1}),o(a(B),{class:"space-y-4"},{default:i(()=>[t.contrato.descripcion?(r(),c("p",I,n(t.contrato.descripcion),1)):l("",!0),t.viewMode==="admin"?(r(),c("div",L,[e("div",R,[o(a(w),{class:"h-4 w-4 text-gray-400"}),e("div",null,[s[3]||(s[3]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Inicio:",-1)),e("span",G,n(y(t.contrato.fecha_inicio)),1)])]),e("div",H,[o(a(w),{class:"h-4 w-4 text-gray-400"}),e("div",null,[s[4]||(s[4]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Fin:",-1)),e("span",J,n(y(t.contrato.fecha_fin)),1)])]),t.contrato.monto_formateado?(r(),c("div",K,[o(a(E),{class:"h-4 w-4 text-gray-400"}),e("span",O,n(t.contrato.monto_formateado),1)])):l("",!0),t.contrato.responsable?(r(),c("div",Q,[o(a(k),{class:"h-4 w-4 text-gray-400"}),e("span",W,n(t.contrato.responsable.name),1)])):l("",!0)])):t.viewMode==="user"&&t.contrato.responsable?(r(),c("div",X,[e("div",Y,[o(a(k),{class:"h-4 w-4 text-gray-400"}),s[5]||(s[5]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Responsable:",-1)),e("span",Z,n(t.contrato.responsable.name),1)])])):l("",!0),t.contrato.esta_vencido||t.contrato.esta_proximo_vencer?(r(),c("div",p,[o(a(N),{class:f(["h-4 w-4",t.contrato.esta_vencido?"text-red-500":"text-yellow-500"])},null,8,["class"]),e("span",{class:f(["text-sm font-medium",t.contrato.esta_vencido?"text-red-600":"text-yellow-600"])},n(t.contrato.esta_vencido?"Contrato vencido":`Vence en ${t.contrato.dias_restantes} dÃ­as`),3)])):l("",!0),t.contrato.estado==="activo"&&t.contrato.porcentaje_transcurrido!==void 0?(r(),c("div",tt,[e("div",et,[s[6]||(s[6]=e("span",null,"Progreso",-1)),e("span",null,n(t.contrato.porcentaje_transcurrido)+"%",1)]),e("div",at,[e("div",{class:f([j.value,"h-2 rounded-full transition-all duration-300"]),style:V({width:`${t.contrato.porcentaje_transcurrido}%`})},null,6)])])):l("",!0),e("div",ot,[o(a(v),{variant:"outline",class:"text-xs"},{default:i(()=>[o(a(P),{class:"h-3 w-3 mr-1"}),u(" "+n(t.contrato.tipo),1)]),_:1}),t.showActions?(r(),c("div",st,[t.viewMode==="user"?(r(),b(a(g),{key:0,size:"sm",variant:"ghost",onClick:s[0]||(s[0]=x=>d.$inertia.get(`/miembro/mis-contratos/${t.contrato.id}`))},{default:i(()=>[o(a($),{class:"h-4 w-4"})]),_:1})):(r(),c(_,{key:1},[o(a(g),{size:"sm",variant:"ghost",onClick:s[1]||(s[1]=x=>d.$inertia.get(`/admin/contratos/${t.contrato.id}`))},{default:i(()=>[o(a($),{class:"h-4 w-4"})]),_:1}),o(a(g),{size:"sm",variant:"ghost",onClick:s[2]||(s[2]=x=>d.$inertia.get(`/admin/contratos/${t.contrato.id}/edit`))},{default:i(()=>[o(a(A),{class:"h-4 w-4"})]),_:1})],64))])):l("",!0)])]),_:1})]),_:1}))}});export{xt as _};
