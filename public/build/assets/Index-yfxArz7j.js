import{_ as je}from"./AdminLayout.vue_vue_type_script_setup_true_lang-_n2LO1UI.js";import{d as se,r as N,c as le,I as Ve,i as p,g as i,j as k,e as t,y as De,l as ge,f as e,n as H,b as E,h as o,t as b,w as l,F as M,k as R,m as r,o as Se,a as xe,p as Ae,u as ye,q as Le,s as ie}from"./app-Bm0zddHy.js";import{_ as Y,a as Z,b as ae,c as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-C7IOa7Ms.js";import{c as Me,_ as I}from"./createLucideIcon-DxtpjfGn.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-DvCw7eEi.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-DVWxdLT3.js";import{_ as G}from"./index-BfnsDWvv.js";import{_ as qe}from"./Checkbox.vue_vue_type_script_setup_true_lang-ELX5yiEU.js";import{_ as He,a as Pe,b as te,c as W,d as Re,e as j}from"./TableHeader.vue_vue_type_script_setup_true_lang-DbCXP5Gb.js";import{C as Ie,_ as de,a as ue,b as ce,c as me,d as fe}from"./SelectValue.vue_vue_type_script_setup_true_lang-BEteQu3B.js";import{t as A}from"./index-CGlGA4Sh.js";import{_ as Oe,a as Be,b as Fe,c as Ge,d as Xe,e as we}from"./index-D4XRsMvt.js";import{_ as Je,a as Ke,b as Qe}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-B2AqyfVE.js";import{C as oe}from"./chevron-right-21GWq4il.js";import{C as Te}from"./check-Bgy2BvBz.js";import{C as We}from"./chevrons-up-down-Bq7v30Y5.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as be}from"./trash-2-Ufoj0wl0.js";import{S as Ye}from"./search-Cen4orNT.js";import{L as Ze}from"./loader-circle-DxZGZDWC.js";import{_ as et,a as tt,b as $e,c as ke}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BMz5iRnk.js";import{P as pe}from"./plus-Bq3GpmTl.js";import{S as re}from"./save-DtgqMVme.js";import{X as ne}from"./x-CG4kNj6H.js";import{L as at}from"./list-2iX7WlEu.js";import{T as lt}from"./tree-pine-BF-KqTei.js";import{T as ve}from"./tag-nVcGCD5C.js";import{S as Ce}from"./square-pen-D3mB6Bne.js";import"./useFlashMessages-D8h4LnKR.js";import"./index-QZMnO351.js";import"./floating-ui.vue-DGr7A5yr.js";import"./index-owJja9AZ.js";import"./shield-kj79LTBi.js";import"./user-CdyH_Ihh.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BzlUZel9.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DhXAbrNZ.js";import"./VisuallyHidden-SpKqNdm8.js";import"./index-CjeZtQaE.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BjSiNVQs.js";import"./circle-alert-XMbe1svA.js";import"./map-pin-BstPhaLn.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-0IVPPTKP.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CW7Js4wW.js";import"./users-ZLIj--Dr.js";import"./target-XP67quly.js";import"./vote-Dnp20OG0.js";import"./folder-open-CSy_ZVNl.js";import"./send-BwlBoeFi.js";import"./file-text-DWBwUy-u.js";import"./briefcase-3TG4x5-C.js";import"./calendar-B9ei12_H.js";import"./megaphone-DNDdvONg.js";import"./user-check-CDxIvvGo.js";import"./clipboard-list-D5LXPQE8.js";import"./mail-PWyxIr74.js";import"./message-square-DSFmlFZ8.js";import"./external-link-x9aPFz1b.js";import"./panel-left-DIiuBb4I.js";import"./index-DsyuWqHK.js";import"./useKbd-kRIii9yh.js";import"./utils-JIf_zoP-.js";import"./VisuallyHiddenInput-C8NTLDQZ.js";import"./RovingFocusItem-DUqYOvFB.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Me("PenIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),rt={class:"flex items-center w-full"},nt={key:1,class:"w-5"},ot={class:"flex-1 min-w-0"},it={class:"truncate"},dt={key:0,class:"text-xs text-muted-foreground ml-1"},ut={key:0,class:"text-xs text-muted-foreground ml-1"},ct=se({__name:"EtiquetaTreeItem",props:{etiqueta:{},nivel:{default:0},selectedId:{},excludedId:{},showCategoria:{type:Boolean,default:!1}},emits:["select"],setup(s,{emit:O}){const y=s,L=O,q=N(y.nivel<2),V=le(()=>y.excludedId?y.etiqueta.id===y.excludedId:!1),D=()=>{q.value=!q.value},z=T=>{V.value||L("select",T)};return(T,d)=>{const f=Ve("EtiquetaTreeItem",!0);return r(),p("div",null,[i("div",{class:H(["relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",{"opacity-50":V.value}]),onClick:d[0]||(d[0]=()=>!V.value&&z(s.etiqueta))},[i("div",rt,[i("span",{class:"flex-shrink-0",style:De({width:`${s.nivel*20}px`})},null,4),s.etiqueta.children&&s.etiqueta.children.length>0?(r(),p("button",{key:0,onClick:ge(D,["stop"]),class:"mr-1 p-0.5 hover:bg-accent rounded",type:"button"},[t(e(oe),{class:H(["h-3 w-3 transition-transform",q.value?"rotate-90":""])},null,8,["class"])])):(r(),p("span",nt)),t(e(Te),{class:H(["mr-2 h-4 w-4 flex-shrink-0",s.selectedId===s.etiqueta.id?"opacity-100":"opacity-0"])},null,8,["class"]),i("div",ot,[i("span",it,[o(b(s.etiqueta.nombre)+" ",1),s.showCategoria&&s.etiqueta.categoria?(r(),p("span",dt," ("+b(s.etiqueta.categoria.nombre)+") ",1)):k("",!0)]),s.etiqueta.children&&s.etiqueta.children.length>0?(r(),p("span",ut," ("+b(s.etiqueta.children.length)+") ",1)):k("",!0),s.etiqueta.usos_count>0?(r(),E(e(G),{key:1,variant:"secondary",class:"ml-2 text-xs"},{default:l(()=>[o(b(s.etiqueta.usos_count)+" usos ",1)]),_:1})):k("",!0)])])],2),q.value&&s.etiqueta.children?(r(!0),p(M,{key:0},R(s.etiqueta.children,h=>(r(),E(f,{key:h.id,etiqueta:h,nivel:s.nivel+1,"selected-id":s.selectedId,"excluded-id":s.excludedId,"show-categoria":s.showCategoria,onSelect:z},null,8,["etiqueta","nivel","selected-id","excluded-id","show-categoria"]))),128)):k("",!0)])}}}),mt={class:"etiqueta-hierarchy-selector"},ft={key:0,class:"truncate"},pt={key:0,class:"text-muted-foreground text-xs mr-1"},vt={key:1,class:"text-muted-foreground"},gt={key:0,class:"text-xs text-muted-foreground mt-1"},xt=se({__name:"EtiquetaHierarchySelector",props:{modelValue:{},label:{default:"Etiqueta Padre"},placeholder:{default:"Seleccionar etiqueta padre..."},allowNull:{type:Boolean,default:!0},excludedId:{},categorias:{},id:{default:"etiqueta-padre"}},emits:["update:modelValue"],setup(s,{emit:O}){const y=s,L=O,q=N(!1),V=N(""),D=N([]),z=N(!1),T=le(()=>y.modelValue&&D.value.find(_=>_.id===y.modelValue)||null),d=le(()=>y.categorias?V.value?y.categorias.filter(_=>h(_.id).some(n=>n.nombre.toLowerCase().includes(V.value.toLowerCase())||n.descripcion&&n.descripcion.toLowerCase().includes(V.value.toLowerCase()))):y.categorias:[]),f=_=>D.value.filter(n=>n.categoria_etiqueta_id===_&&!n.parent_id&&n.id!==y.excludedId),h=_=>D.value.filter(n=>n.categoria_etiqueta_id===_&&n.id!==y.excludedId),J=_=>{const n=[_.nombre];let m=_;for(;m.parent_id;){const x=D.value.find(g=>g.id===m.parent_id);if(!x)break;n.unshift(x.nombre),m=x}return n.join(" / ")},B=async()=>{z.value=!0;try{const _=await xe.get("/admin/etiquetas/para-selector",{params:{excluir_id:y.excludedId}});_.data.success&&(D.value=_.data.etiquetas)}catch(_){console.error("Error cargando etiquetas:",_)}finally{z.value=!1}},U=_=>{L("update:modelValue",(_==null?void 0:_.id)||null),q.value=!1};return Se(()=>{B()}),(_,n)=>(r(),p("div",mt,[t(e(F),{for:s.id},{default:l(()=>[o(b(s.label),1)]),_:1},8,["for"]),t(e(Je),{open:q.value,"onUpdate:open":n[2]||(n[2]=m=>q.value=m)},{default:l(()=>[t(e(Ke),{asChild:""},{default:l(()=>[t(e(I),{id:s.id,variant:"outline",role:"combobox","aria-expanded":q.value,"aria-label":s.label,class:"w-full justify-between"},{default:l(()=>[T.value?(r(),p("span",ft,[T.value.parent?(r(),p("span",pt,b(T.value.parent.nombre)+" / ",1)):k("",!0),o(" "+b(T.value.nombre),1)])):(r(),p("span",vt,b(s.placeholder),1)),t(e(We),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["id","aria-expanded","aria-label"])]),_:1}),t(e(Qe),{class:"w-[400px] p-0"},{default:l(()=>[t(e(Oe),null,{default:l(()=>[t(e(Be),{placeholder:"Buscar etiqueta...",modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=m=>V.value=m)},null,8,["modelValue"]),t(e(Fe),null,{default:l(()=>[t(e(Ge),null,{default:l(()=>[...n[3]||(n[3]=[o("No se encontraron etiquetas.",-1)])]),_:1}),s.allowNull?(r(),E(e(we),{key:0},{default:l(()=>[t(e(Xe),{value:"",onSelect:n[1]||(n[1]=m=>U(null))},{default:l(()=>[t(e(Te),{class:H(["mr-2 h-4 w-4",s.modelValue?"opacity-0":"opacity-100"])},null,8,["class"]),n[4]||(n[4]=i("span",{class:"text-muted-foreground"},"Sin etiqueta padre (raíz)",-1))]),_:1})]),_:1})):k("",!0),(r(!0),p(M,null,R(d.value,m=>(r(),E(e(we),{key:m.id,heading:m.nombre},{default:l(()=>[(r(!0),p(M,null,R(f(m.id),x=>(r(),E(ct,{key:x.id,etiqueta:x,nivel:0,"selected-id":s.modelValue,"excluded-id":s.excludedId,onSelect:U},null,8,["etiqueta","selected-id","excluded-id"]))),128))]),_:2},1032,["heading"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),T.value?(r(),p("p",gt," Ruta: "+b(J(T.value)),1)):k("",!0)]))}}),Ee=he(xt,[["__scopeId","data-v-bcdf1be4"]]),bt={class:"tree-node"},ht={key:1,class:"w-5"},_t={class:"flex-1 font-medium"},yt={key:0,class:"text-xs text-muted-foreground ml-1"},qt={class:"flex gap-1"},wt={class:"flex gap-1"},$t={key:0},kt=se({__name:"EtiquetaTreeNode",props:{etiqueta:{},nivel:{default:0},expandidos:{},dragDropHelpers:{}},emits:["toggle","edit","delete","drop"],setup(s,{emit:O}){const y=s,L=O,q=N(!1),V=f=>{f.dataTransfer.effectAllowed="move",y.dragDropHelpers.handleDragStart(y.etiqueta)},D=f=>{f.preventDefault(),f.dataTransfer.dropEffect="move",q.value=!0,y.dragDropHelpers.handleDragOver(f,y.etiqueta)},z=()=>{q.value=!1},T=f=>{f.preventDefault(),f.stopPropagation(),q.value=!1;const h=y.dragDropHelpers.handleDrop(f,y.etiqueta);h&&h.valido&&L("drop",h)},d=()=>{q.value=!1,y.dragDropHelpers.handleDragEnd()};return(f,h)=>{var B;const J=Ve("EtiquetaTreeNode",!0);return r(),p("div",bt,[i("div",{class:H(["flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700","transition-colors cursor-move",q.value?"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300":""]),style:De({paddingLeft:s.nivel*24+"px"}),draggable:"true",onDragstart:V,onDragover:D,onDrop:T,onDragend:d,onDragleave:z},[s.etiqueta.children&&s.etiqueta.children.length>0?(r(),p("button",{key:0,onClick:h[0]||(h[0]=U=>f.$emit("toggle",s.etiqueta.id)),class:"p-0.5 hover:bg-accent rounded",type:"button"},[t(e(oe),{class:H(["h-4 w-4 transition-transform",s.expandidos.has(s.etiqueta.id)?"rotate-90":""])},null,8,["class"])])):(r(),p("span",ht)),(B=s.etiqueta.categoria)!=null&&B.color?(r(),p("div",{key:2,class:H(["w-3 h-3 rounded-full",s.etiqueta.categoria.color])},null,2)):k("",!0),i("span",_t,[o(b(s.etiqueta.nombre)+" ",1),s.etiqueta.categoria?(r(),p("span",yt," ("+b(s.etiqueta.categoria.nombre)+") ",1)):k("",!0)]),i("div",qt,[s.etiqueta.usos_count>0?(r(),E(e(G),{key:0,variant:"secondary",class:"text-xs"},{default:l(()=>[o(b(s.etiqueta.usos_count)+" usos ",1)]),_:1})):k("",!0),s.etiqueta.children&&s.etiqueta.children.length>0?(r(),E(e(G),{key:1,variant:"outline",class:"text-xs"},{default:l(()=>[o(b(s.etiqueta.children.length),1)]),_:1})):k("",!0)]),i("div",wt,[t(e(I),{variant:"ghost",size:"icon",class:"h-7 w-7",onClick:h[1]||(h[1]=ge(U=>f.$emit("edit",s.etiqueta),["stop"]))},{default:l(()=>[t(e(st),{class:"h-3 w-3"})]),_:1}),t(e(I),{variant:"ghost",size:"icon",class:"h-7 w-7 text-red-500 hover:text-red-600",onClick:h[2]||(h[2]=ge(U=>f.$emit("delete",s.etiqueta),["stop"]))},{default:l(()=>[t(e(be),{class:"h-3 w-3"})]),_:1})])],38),s.expandidos.has(s.etiqueta.id)&&s.etiqueta.children?(r(),p("div",$t,[(r(!0),p(M,null,R(s.etiqueta.children,U=>(r(),E(J,{key:U.id,etiqueta:U,nivel:s.nivel+1,expandidos:s.expandidos,"drag-drop-helpers":s.dragDropHelpers,onToggle:h[3]||(h[3]=_=>f.$emit("toggle",_)),onEdit:h[4]||(h[4]=_=>f.$emit("edit",_)),onDelete:h[5]||(h[5]=_=>f.$emit("delete",_)),onDrop:h[6]||(h[6]=_=>f.$emit("drop",_))},null,8,["etiqueta","nivel","expandidos","drag-drop-helpers"]))),128))])):k("",!0)])}}}),Ct=he(kt,[["__scopeId","data-v-b5f23538"]]);function Et(s=N([])){const O=n=>{const m=new Map,x=[];return n.forEach(g=>{m.set(g.id,{...g,children:[]})}),n.forEach(g=>{const $=m.get(g.id);if($)if(g.parent_id){const C=m.get(g.parent_id);C&&(C.children||(C.children=[]),C.children.push($))}else x.push($)}),x},y=n=>{const m=[],x=g=>{m.push(g),g.children&&g.children.length>0&&g.children.forEach($=>x($))};return n.forEach(g=>x(g)),m},L=(n,m=s.value)=>{for(const x of m){if(x.id===n)return x;if(x.children&&x.children.length>0){const g=L(n,x.children);if(g)return g}}return null},q=n=>{const m=[],x=y(s.value);let g=x.find($=>$.id===n);for(;g;)m.unshift(g),g=g.parent_id?x.find($=>$.id===g.parent_id):null;return m},V=(n,m)=>q(n).some(g=>g.id===m),D=(n,m)=>n===m?!1:!V(m,n),z=(n=s.value)=>{let m=0;const x=g=>{m++,g.children&&g.children.forEach($=>x($))};return n.forEach(g=>x(g)),m},T=(n=s.value)=>{if(!n||n.length===0)return 0;const m=(x,g=0)=>!x.children||x.children.length===0?g:Math.max(...x.children.map($=>m($,g+1)));return Math.max(...n.map(x=>m(x,0)))},d=(n,m=s.value)=>{if(!n)return m;const x=n.toLowerCase(),g=$=>{const C=$.nombre.toLowerCase().includes(x)||$.descripcion&&$.descripcion.toLowerCase().includes(x);let w=[];return $.children&&(w=$.children.map(P=>g(P)).filter(P=>P!==null)),C||w.length>0?{...$,children:w}:null};return m.map($=>g($)).filter($=>$!==null)},f={draggedItem:N(null),dragOverItem:N(null),handleDragStart(n){this.draggedItem.value=n},handleDragOver(n,m){n.preventDefault(),this.dragOverItem.value=m},handleDrop(n,m){if(n.preventDefault(),!this.draggedItem.value)return;const x=this.draggedItem.value.id,g=(m==null?void 0:m.id)||null;return g&&!D(x,g)?(console.error("No se puede crear un ciclo en la jerarquía"),!1):{hijoId:x,padreId:g,valido:!0}},handleDragEnd(){this.draggedItem.value=null,this.dragOverItem.value=null}},h=N(new Set),J=n=>{h.value.has(n)?h.value.delete(n):h.value.add(n)},B=()=>{y(s.value).forEach(m=>{m.children&&m.children.length>0&&h.value.add(m.id)})},U=()=>{h.value.clear()},_=le(()=>({totalNodos:z(),profundidadMaxima:T(),totalRaices:s.value.filter(n=>!n.parent_id).length,totalConHijos:y(s.value).filter(n=>n.children&&n.children.length>0).length}));return{etiquetas:s,expandidos:h,estadisticas:_,construirArbol:O,aplanarArbol:y,buscarEnArbol:L,obtenerCamino:q,filtrarArbol:d,esDescendienteDe:V,validarRelacionPadreHijo:D,contarNodos:z,obtenerProfundidadMaxima:T,toggleExpansion:J,expandirTodos:B,colapsarTodos:U,dragDropHelpers:f}}const Vt={class:"etiqueta-tree-view"},Dt={class:"mb-4 flex gap-2 items-center"},St={class:"ml-auto flex items-center gap-2"},It={class:"border rounded-lg p-4 bg-white dark:bg-gray-800"},Tt={key:0,class:"flex justify-center py-8"},Nt={key:1,class:"text-center py-8 text-muted-foreground"},zt={key:2,class:"space-y-1"},Ut={key:0,class:"mt-4 grid grid-cols-4 gap-4"},jt={class:"text-2xl font-bold"},At={class:"text-2xl font-bold"},Lt={class:"text-2xl font-bold"},Mt={class:"text-2xl font-bold"},Ht=se({__name:"EtiquetaTreeView",props:{etiquetas:{},categoriaId:{},showStats:{type:Boolean,default:!1}},emits:["edit","delete","moved"],setup(s,{emit:O}){const y=s,L=O,q=N(!1),V=N(""),D=N([]),{etiquetas:z,expandidos:T,estadisticas:d,construirArbol:f,filtrarArbol:h,toggleExpansion:J,expandirTodos:B,colapsarTodos:U,dragDropHelpers:_}=Et(D),n=async()=>{if(y.etiquetas){D.value=f(y.etiquetas);return}q.value=!0;try{const C=await xe.get("/admin/etiquetas/arbol",{params:{categoria_id:y.categoriaId}});C.data.success&&(D.value=C.data.arbol)}catch(C){console.error("Error cargando árbol de etiquetas:",C),A.error("Error al cargar las etiquetas")}finally{q.value=!1}},m=le(()=>V.value?h(V.value,z.value):z.value);let x;const g=()=>{clearTimeout(x),x=setTimeout(()=>{},300)},$=async C=>{var w,P;if(C.valido){q.value=!0;try{(await xe.post(`/admin/etiquetas/${C.hijoId}/establecer-padre`,{parent_id:C.padreId})).data.success&&(A.success("Etiqueta movida exitosamente"),L("moved",{etiquetaId:C.hijoId,nuevoPadreId:C.padreId}),await n())}catch(K){A.error(((P=(w=K.response)==null?void 0:w.data)==null?void 0:P.message)||"Error al mover la etiqueta")}finally{q.value=!1}}};return Ae(()=>y.etiquetas,C=>{C&&(D.value=f(C))}),Se(()=>{n()}),(C,w)=>(r(),p("div",Vt,[i("div",Dt,[t(e(X),{modelValue:V.value,"onUpdate:modelValue":w[0]||(w[0]=P=>V.value=P),placeholder:"Buscar etiquetas...",class:"max-w-sm",onInput:g},{prefix:l(()=>[t(e(Ye),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["modelValue"]),t(e(I),{variant:"outline",size:"sm",onClick:e(B)},{default:l(()=>[t(e(Ie),{class:"h-4 w-4 mr-1"}),w[3]||(w[3]=o(" Expandir todo ",-1))]),_:1},8,["onClick"]),t(e(I),{variant:"outline",size:"sm",onClick:e(U)},{default:l(()=>[t(e(oe),{class:"h-4 w-4 mr-1"}),w[4]||(w[4]=o(" Colapsar todo ",-1))]),_:1},8,["onClick"]),i("div",St,[t(e(G),{variant:"secondary"},{default:l(()=>[o(b(e(d).totalNodos)+" etiquetas",1)]),_:1}),t(e(G),{variant:"outline"},{default:l(()=>[o(b(e(d).profundidadMaxima)+" niveles",1)]),_:1})])]),i("div",It,[q.value?(r(),p("div",Tt,[t(e(Ze),{class:"h-8 w-8 animate-spin text-muted-foreground"})])):m.value.length===0?(r(),p("div",Nt," No se encontraron etiquetas ")):(r(),p("div",zt,[(r(!0),p(M,null,R(m.value,P=>(r(),E(Ct,{key:P.id,etiqueta:P,nivel:0,expandidos:e(T),"drag-drop-helpers":e(_),onToggle:e(J),onEdit:w[1]||(w[1]=K=>C.$emit("edit",K)),onDelete:w[2]||(w[2]=K=>C.$emit("delete",K)),onDrop:$},null,8,["etiqueta","expandidos","drag-drop-helpers","onToggle"]))),128))]))]),s.showStats?(r(),p("div",Ut,[t(e(Y),null,{default:l(()=>[t(e(Z),{class:"pb-2"},{default:l(()=>[t(e(ae),{class:"text-sm font-medium"},{default:l(()=>[...w[5]||(w[5]=[o("Total",-1)])]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[i("div",jt,b(e(d).totalNodos),1)]),_:1})]),_:1}),t(e(Y),null,{default:l(()=>[t(e(Z),{class:"pb-2"},{default:l(()=>[t(e(ae),{class:"text-sm font-medium"},{default:l(()=>[...w[6]||(w[6]=[o("Raíces",-1)])]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[i("div",At,b(e(d).totalRaices),1)]),_:1})]),_:1}),t(e(Y),null,{default:l(()=>[t(e(Z),{class:"pb-2"},{default:l(()=>[t(e(ae),{class:"text-sm font-medium"},{default:l(()=>[...w[7]||(w[7]=[o("Con hijos",-1)])]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[i("div",Lt,b(e(d).totalConHijos),1)]),_:1})]),_:1}),t(e(Y),null,{default:l(()=>[t(e(Z),{class:"pb-2"},{default:l(()=>[t(e(ae),{class:"text-sm font-medium"},{default:l(()=>[...w[8]||(w[8]=[o("Profundidad",-1)])]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[i("div",Mt,b(e(d).profundidadMaxima),1)]),_:1})]),_:1})])):k("",!0)]))}}),Pt=he(Ht,[["__scopeId","data-v-e813d647"]]),Rt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ot={class:"flex justify-between items-center"},Bt={class:"space-y-4"},Ft={key:0,class:"text-xs text-red-500 mt-1"},Gt={class:"flex items-center gap-2"},Xt={class:"flex items-center gap-2"},Jt={key:0},Kt={class:"flex flex-wrap gap-4"},Qt={class:"flex gap-2 mt-4"},Wt={class:"flex items-center"},Yt={class:"flex items-center gap-2"},Zt={class:"flex items-center gap-2"},ea={key:0,class:"flex flex-col gap-1"},ta={class:"flex justify-end gap-2"},aa={class:"flex items-center gap-2"},la={class:"flex items-center gap-2"},sa={class:"flex flex-wrap gap-1"},ra={class:"flex justify-end gap-2"},na={class:"p-4 space-y-4"},oa={class:"flex items-center justify-between"},ia={class:"font-medium flex items-center gap-2"},da={class:"space-y-4"},ua={class:"flex gap-2 mt-4"},ca={key:1,class:"space-y-2"},ma={key:0,class:"flex-1"},fa={class:"space-y-4"},pa={class:"flex gap-2"},va={key:1,class:"flex-1 flex items-center justify-between"},ga={class:"flex items-center gap-2"},xa={class:"font-medium"},ba={key:0,class:"text-sm text-gray-500"},ha={key:1,class:"text-xs text-muted-foreground mt-1"},_a={class:"flex gap-2"},ya={key:2,class:"text-center py-8 text-gray-500"},Tl=se({__name:"Index",props:{categorias:{},estadisticas:{},colores:{},iconos:{},entidadesDisponibles:{}},setup(s){const O=s,y=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Categorías de Etiquetas",href:"/admin/categorias-etiquetas"}],L=N(null),q=N(!1),V=N(new Set),D=N(null),z=N(null),T=N("table"),d=ye({nombre:"",color:"gray",icono:"Tag",descripcion:"",orden:0,aplicar_para:["proyectos","hitos","entregables"]}),f=ye({nombre:"",descripcion:"",categoria_etiqueta_id:0,parent_id:null}),h=()=>{q.value=!0,L.value=null,d.reset()},J=v=>{L.value=v.id,q.value=!1,d.nombre=v.nombre,d.color=v.color,d.icono=v.icono||"Tag",d.descripcion=v.descripcion||"",d.orden=v.orden,d.aplicar_para=v.aplicar_para||["proyectos","hitos","entregables"]},B=v=>{const a=d.aplicar_para.indexOf(v);a===-1?d.aplicar_para.push(v):d.aplicar_para.splice(a,1),d.aplicar_para.length===0&&(d.aplicar_para=["proyectos"],A.warning("Debe seleccionar al menos una entidad"))},U=()=>{L.value=null,q.value=!1,d.reset()},_=()=>{d.post("/admin/categorias-etiquetas",{preserveScroll:!0,onSuccess:()=>{A.success("Categoría creada exitosamente"),U()},onError:()=>{A.error("Error al crear la categoría")}})},n=v=>{d.put(`/admin/categorias-etiquetas/${v}`,{preserveScroll:!0,onSuccess:()=>{A.success("Categoría actualizada"),U()},onError:()=>{A.error("Error al actualizar")}})},m=v=>{confirm(`¿Eliminar la categoría "${v.nombre}"? Las etiquetas se reasignarán.`)&&ie.delete(`/admin/categorias-etiquetas/${v.id}`,{preserveScroll:!0,onSuccess:()=>{A.success("Categoría eliminada")}})},x=v=>{ie.patch(`/admin/categorias-etiquetas/${v.id}/toggle-active`,{},{preserveScroll:!0,onSuccess:()=>{A.success(v.activo?"Categoría desactivada":"Categoría activada")}})},g=v=>{const a=V.value;a.has(v)?a.delete(v):a.add(v)},$=v=>{D.value=v,z.value=null,f.reset(),f.categoria_etiqueta_id=v},C=v=>{z.value=v.id,D.value=null,f.nombre=v.nombre,f.descripcion=v.descripcion||"",f.categoria_etiqueta_id=v.categoria_etiqueta_id,f.parent_id=v.parent_id||null},w=()=>{D.value=null,z.value=null,f.reset()},P=()=>{f.post("/admin/etiquetas",{preserveScroll:!0,onSuccess:()=>{A.success("Etiqueta creada exitosamente"),w()},onError:()=>{A.error("Error al crear la etiqueta")}})},K=v=>{f.put(`/admin/etiquetas/${v}`,{preserveScroll:!0,onSuccess:()=>{A.success("Etiqueta actualizada exitosamente"),w()},onError:()=>{A.error("Error al actualizar la etiqueta")}})},_e=v=>{confirm("¿Estás seguro de eliminar esta etiqueta?")&&ie.delete(`/admin/etiquetas/${v}`,{preserveScroll:!0,onSuccess:()=>{A.success("Etiqueta eliminada exitosamente")},onError:()=>{A.error("Error al eliminar la etiqueta")}})},ee=v=>({gray:"bg-gray-500",red:"bg-red-500",orange:"bg-orange-500",amber:"bg-amber-500",yellow:"bg-yellow-500",lime:"bg-lime-500",green:"bg-green-500",emerald:"bg-emerald-500",teal:"bg-teal-500",cyan:"bg-cyan-500",sky:"bg-sky-500",blue:"bg-blue-500",indigo:"bg-indigo-500",violet:"bg-violet-500",purple:"bg-purple-500",fuchsia:"bg-fuchsia-500",pink:"bg-pink-500",rose:"bg-rose-500"})[v]||"bg-gray-500",Ne=()=>{const v=[];return O.categorias.data.forEach(a=>{a.etiquetas&&a.etiquetas.forEach(u=>{v.push({...u,categoria:{id:a.id,nombre:a.nombre,color:a.color,icono:a.icono,descripcion:a.descripcion,orden:a.orden,activo:a.activo}})})}),v},ze=v=>{const a=O.categorias.data.find(u=>u.id===v.categoria_etiqueta_id);a&&(V.value.add(a.id),T.value="table",C(v))},Ue=v=>{_e(v.id)};return(v,a)=>(r(),p(M,null,[t(e(Le),{title:"Categorías de Etiquetas"}),t(je,{breadcrumbs:y},{default:l(()=>[i("div",Rt,[i("div",Ot,[a[16]||(a[16]=i("div",null,[i("h1",{class:"text-2xl font-bold"},"Categorías de Etiquetas"),i("p",{class:"text-sm text-muted-foreground mt-1"}," Administra las categorías para organizar las etiquetas de proyectos ")],-1)),q.value?k("",!0):(r(),E(e(I),{key:0,onClick:h},{default:l(()=>[t(e(pe),{class:"mr-2 h-4 w-4"}),a[15]||(a[15]=o(" Nueva Categoría ",-1))]),_:1}))]),q.value?(r(),E(e(Y),{key:0},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(ae),null,{default:l(()=>[...a[17]||(a[17]=[o("Nueva Categoría",-1)])]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[i("div",Bt,[i("div",null,[t(e(F),null,{default:l(()=>[...a[18]||(a[18]=[o("Nombre *",-1)])]),_:1}),t(e(X),{modelValue:e(d).nombre,"onUpdate:modelValue":a[0]||(a[0]=u=>e(d).nombre=u),placeholder:"Nombre de la categoría",class:H({"border-red-500":e(d).errors.nombre})},null,8,["modelValue","class"]),e(d).errors.nombre?(r(),p("p",Ft,b(e(d).errors.nombre),1)):k("",!0)]),i("div",null,[t(e(F),null,{default:l(()=>[...a[19]||(a[19]=[o("Color",-1)])]),_:1}),t(e(de),{modelValue:e(d).color,"onUpdate:modelValue":a[1]||(a[1]=u=>e(d).color=u)},{default:l(()=>[t(e(ue),null,{default:l(()=>[i("div",Gt,[i("div",{class:H([ee(e(d).color),"w-4 h-4 rounded"])},null,2),t(e(ce),{placeholder:e(d).color},null,8,["placeholder"])])]),_:1}),t(e(me),null,{default:l(()=>[(r(!0),p(M,null,R(s.colores,(u,c)=>(r(),E(e(fe),{key:c,value:c},{default:l(()=>[i("div",Xt,[i("div",{class:H([ee(c),"w-4 h-4 rounded"])},null,2),o(" "+b(u),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[t(e(F),null,{default:l(()=>[...a[20]||(a[20]=[o("Icono",-1)])]),_:1}),t(e(de),{modelValue:e(d).icono,"onUpdate:modelValue":a[2]||(a[2]=u=>e(d).icono=u)},{default:l(()=>[t(e(ue),null,{default:l(()=>[t(e(ce),{placeholder:e(d).icono},null,8,["placeholder"])]),_:1}),t(e(me),null,{default:l(()=>[(r(!0),p(M,null,R(s.iconos,(u,c)=>(r(),E(e(fe),{key:c,value:c},{default:l(()=>[o(b(u),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[t(e(F),null,{default:l(()=>[...a[21]||(a[21]=[o("Orden",-1)])]),_:1}),t(e(X),{modelValue:e(d).orden,"onUpdate:modelValue":a[3]||(a[3]=u=>e(d).orden=u),modelModifiers:{number:!0},type:"number",placeholder:"0"},null,8,["modelValue"])]),i("div",null,[t(e(F),null,{default:l(()=>[...a[22]||(a[22]=[o("Descripción",-1)])]),_:1}),t(e(X),{modelValue:e(d).descripcion,"onUpdate:modelValue":a[4]||(a[4]=u=>e(d).descripcion=u),placeholder:"Descripción opcional"},null,8,["modelValue"])]),s.entidadesDisponibles?(r(),p("div",Jt,[t(e(F),null,{default:l(()=>[...a[23]||(a[23]=[o("Aplicar a:",-1)])]),_:1}),a[24]||(a[24]=i("p",{class:"text-xs text-muted-foreground mb-2"}," Selecciona en qué entidades estará disponible esta categoría ",-1)),i("div",Kt,[(r(!0),p(M,null,R(s.entidadesDisponibles,(u,c)=>(r(),p("div",{key:c,class:"flex items-center space-x-2"},[t(e(qe),{id:`crear_aplicar_${c}`,checked:e(d).aplicar_para.includes(c),"onUpdate:checked":S=>B(c)},null,8,["id","checked","onUpdate:checked"]),t(e(F),{for:`crear_aplicar_${c}`,class:"cursor-pointer text-sm"},{default:l(()=>[o(b(u),1)]),_:2},1032,["for"])]))),128))])])):k("",!0)]),i("div",Qt,[t(e(I),{onClick:_,disabled:e(d).processing},{default:l(()=>[t(e(re),{class:"mr-2 h-4 w-4"}),a[25]||(a[25]=o(" Guardar ",-1))]),_:1},8,["disabled"]),t(e(I),{variant:"outline",onClick:U},{default:l(()=>[t(e(ne),{class:"mr-2 h-4 w-4"}),a[26]||(a[26]=o(" Cancelar ",-1))]),_:1})])]),_:1})]),_:1})):k("",!0),t(e(et),{modelValue:T.value,"onUpdate:modelValue":a[14]||(a[14]=u=>T.value=u)},{default:l(()=>[t(e(Y),null,{default:l(()=>[t(e(Z),null,{default:l(()=>[i("div",Wt,[t(e(tt),null,{default:l(()=>[t(e($e),{value:"table"},{default:l(()=>[t(e(at),{class:"h-4 w-4 mr-2"}),a[27]||(a[27]=o(" Vista de Tabla ",-1))]),_:1}),t(e($e),{value:"tree"},{default:l(()=>[t(e(lt),{class:"h-4 w-4 mr-2"}),a[28]||(a[28]=o(" Vista de Árbol ",-1))]),_:1})]),_:1})])]),_:1}),t(e(ke),{value:"table",class:"mt-0"},{default:l(()=>[t(e(Q),{class:"p-0"},{default:l(()=>[t(e(He),null,{default:l(()=>[t(e(Pe),null,{default:l(()=>[t(e(te),null,{default:l(()=>[t(e(W),null,{default:l(()=>[...a[29]||(a[29]=[o("Nombre",-1)])]),_:1}),t(e(W),null,{default:l(()=>[...a[30]||(a[30]=[o("Color",-1)])]),_:1}),t(e(W),null,{default:l(()=>[...a[31]||(a[31]=[o("Etiquetas",-1)])]),_:1}),t(e(W),null,{default:l(()=>[...a[32]||(a[32]=[o("Aplicar a",-1)])]),_:1}),t(e(W),null,{default:l(()=>[...a[33]||(a[33]=[o("Orden",-1)])]),_:1}),t(e(W),null,{default:l(()=>[...a[34]||(a[34]=[o("Estado",-1)])]),_:1}),t(e(W),{class:"text-right"},{default:l(()=>[...a[35]||(a[35]=[o("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(Re),null,{default:l(()=>[(r(!0),p(M,null,R(s.categorias.data,u=>(r(),p(M,{key:u.id},[L.value===u.id?(r(),E(e(te),{key:0},{default:l(()=>[t(e(j),null,{default:l(()=>[t(e(X),{modelValue:e(d).nombre,"onUpdate:modelValue":a[5]||(a[5]=c=>e(d).nombre=c),class:"w-full"},null,8,["modelValue"])]),_:1}),t(e(j),null,{default:l(()=>[t(e(de),{modelValue:e(d).color,"onUpdate:modelValue":a[6]||(a[6]=c=>e(d).color=c)},{default:l(()=>[t(e(ue),{class:"w-32"},{default:l(()=>[i("div",Yt,[i("div",{class:H([ee(e(d).color),"w-4 h-4 rounded"])},null,2),t(e(ce))])]),_:1}),t(e(me),null,{default:l(()=>[(r(!0),p(M,null,R(s.colores,(c,S)=>(r(),E(e(fe),{key:S,value:S},{default:l(()=>[i("div",Zt,[i("div",{class:H([ee(S),"w-4 h-4 rounded"])},null,2),o(" "+b(c),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(e(j),null,{default:l(()=>[o(b(u.etiquetas_count||0),1)]),_:2},1024),t(e(j),null,{default:l(()=>[s.entidadesDisponibles?(r(),p("div",ea,[(r(!0),p(M,null,R(s.entidadesDisponibles,(c,S)=>(r(),p("div",{key:S,class:"flex items-center gap-1"},[t(e(qe),{id:`edit_aplicar_${u.id}_${S}`,checked:e(d).aplicar_para.includes(S),"onUpdate:checked":qa=>B(S),class:"h-3 w-3"},null,8,["id","checked","onUpdate:checked"]),t(e(F),{for:`edit_aplicar_${u.id}_${S}`,class:"text-xs cursor-pointer"},{default:l(()=>[o(b(c),1)]),_:2},1032,["for"])]))),128))])):k("",!0)]),_:2},1024),t(e(j),null,{default:l(()=>[t(e(X),{modelValue:e(d).orden,"onUpdate:modelValue":a[7]||(a[7]=c=>e(d).orden=c),modelModifiers:{number:!0},type:"number",class:"w-20"},null,8,["modelValue"])]),_:1}),t(e(j),null,{default:l(()=>[t(e(G),{variant:u.activo?"default":"secondary"},{default:l(()=>[o(b(u.activo?"Activa":"Inactiva"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(j),{class:"text-right"},{default:l(()=>[i("div",ta,[t(e(I),{size:"sm",onClick:c=>n(u.id),disabled:e(d).processing},{default:l(()=>[t(e(re),{class:"h-4 w-4 mr-2"}),a[36]||(a[36]=o(" Guardar ",-1))]),_:1},8,["onClick","disabled"]),t(e(I),{size:"sm",variant:"outline",onClick:U},{default:l(()=>[t(e(ne),{class:"h-4 w-4 mr-2"}),a[37]||(a[37]=o(" Cancelar ",-1))]),_:1})])]),_:2},1024)]),_:2},1024)):(r(),E(e(te),{key:1},{default:l(()=>[t(e(j),{class:"font-medium"},{default:l(()=>[i("div",aa,[t(e(ve),{class:"h-4 w-4 text-muted-foreground"}),o(" "+b(u.nombre),1)])]),_:2},1024),t(e(j),null,{default:l(()=>[i("div",la,[i("div",{class:H([ee(u.color),"w-4 h-4 rounded"])},null,2),o(" "+b(u.color),1)])]),_:2},1024),t(e(j),null,{default:l(()=>[t(e(G),{variant:"outline"},{default:l(()=>[o(b(u.etiquetas_count||0)+" etiquetas ",1)]),_:2},1024)]),_:2},1024),t(e(j),null,{default:l(()=>[i("div",sa,[(r(!0),p(M,null,R(u.aplicar_para||["proyectos","hitos","entregables"],c=>(r(),E(e(G),{key:c,variant:"outline",class:"text-xs"},{default:l(()=>{var S;return[o(b(((S=s.entidadesDisponibles)==null?void 0:S[c])||c),1)]}),_:2},1024))),128))])]),_:2},1024),t(e(j),null,{default:l(()=>[o(b(u.orden),1)]),_:2},1024),t(e(j),null,{default:l(()=>[t(e(G),{variant:u.activo?"default":"secondary",class:"cursor-pointer",onClick:c=>x(u)},{default:l(()=>[o(b(u.activo?"Activa":"Inactiva"),1)]),_:2},1032,["variant","onClick"])]),_:2},1024),t(e(j),{class:"text-right"},{default:l(()=>[i("div",ra,[t(e(I),{size:"sm",variant:"outline",onClick:c=>g(u.id)},{default:l(()=>[V.value.has(u.id)?(r(),E(e(Ie),{key:1,class:"h-4 w-4 mr-2"})):(r(),E(e(oe),{key:0,class:"h-4 w-4 mr-2"})),a[38]||(a[38]=o(" Ver y añadir etiquetas ",-1))]),_:2},1032,["onClick"]),t(e(I),{size:"sm",variant:"ghost",onClick:c=>J(u)},{default:l(()=>[t(e(Ce),{class:"h-4 w-4 mr-2"}),a[39]||(a[39]=o(" Editar ",-1))]),_:1},8,["onClick"]),t(e(I),{size:"sm",variant:"ghost",onClick:c=>m(u),class:"text-destructive hover:text-destructive"},{default:l(()=>[t(e(be),{class:"h-4 w-4 mr-2"}),a[40]||(a[40]=o(" Eliminar ",-1))]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024)),V.value.has(u.id)?(r(),E(e(te),{key:2,class:"bg-gray-50 dark:bg-gray-900/50"},{default:l(()=>[t(e(j),{colspan:"7",class:"p-0"},{default:l(()=>[i("div",na,[i("div",oa,[i("h4",ia,[t(e(ve),{class:"h-4 w-4"}),o(" Etiquetas de "+b(u.nombre),1)]),D.value!==u.id?(r(),E(e(I),{key:0,size:"sm",onClick:c=>$(u.id)},{default:l(()=>[t(e(pe),{class:"mr-2 h-4 w-4"}),a[41]||(a[41]=o(" Nueva Etiqueta ",-1))]),_:1},8,["onClick"])):k("",!0)]),D.value===u.id?(r(),E(e(Y),{key:0,class:"border-dashed"},{default:l(()=>[t(e(Q),{class:"pt-4"},{default:l(()=>[i("div",da,[i("div",null,[t(e(F),null,{default:l(()=>[...a[42]||(a[42]=[o("Nombre *",-1)])]),_:1}),t(e(X),{modelValue:e(f).nombre,"onUpdate:modelValue":a[8]||(a[8]=c=>e(f).nombre=c),placeholder:"Nombre de la etiqueta",class:H({"border-red-500":e(f).errors.nombre})},null,8,["modelValue","class"])]),i("div",null,[t(e(F),null,{default:l(()=>[...a[43]||(a[43]=[o("Descripción",-1)])]),_:1}),t(e(X),{modelValue:e(f).descripcion,"onUpdate:modelValue":a[9]||(a[9]=c=>e(f).descripcion=c),placeholder:"Descripción opcional"},null,8,["modelValue"])]),i("div",null,[t(Ee,{modelValue:e(f).parent_id,"onUpdate:modelValue":a[10]||(a[10]=c=>e(f).parent_id=c),categorias:[u],label:"Etiqueta Padre (Opcional)",placeholder:"Seleccionar etiqueta padre..."},null,8,["modelValue","categorias"])])]),i("div",ua,[t(e(I),{onClick:P,disabled:e(f).processing},{default:l(()=>[t(e(re),{class:"mr-2 h-4 w-4"}),a[44]||(a[44]=o(" Guardar ",-1))]),_:1},8,["disabled"]),t(e(I),{variant:"outline",onClick:w},{default:l(()=>[t(e(ne),{class:"mr-2 h-4 w-4"}),a[45]||(a[45]=o(" Cancelar ",-1))]),_:1})])]),_:2},1024)]),_:2},1024)):k("",!0),u.etiquetas&&u.etiquetas.length>0?(r(),p("div",ca,[(r(!0),p(M,null,R(u.etiquetas,c=>(r(),p("div",{key:c.id,class:"flex items-center justify-between p-3 border rounded-lg bg-white dark:bg-gray-800"},[z.value===c.id?(r(),p("div",ma,[i("div",fa,[t(e(X),{modelValue:e(f).nombre,"onUpdate:modelValue":a[11]||(a[11]=S=>e(f).nombre=S),placeholder:"Nombre"},null,8,["modelValue"]),t(e(X),{modelValue:e(f).descripcion,"onUpdate:modelValue":a[12]||(a[12]=S=>e(f).descripcion=S),placeholder:"Descripción"},null,8,["modelValue"]),t(Ee,{modelValue:e(f).parent_id,"onUpdate:modelValue":a[13]||(a[13]=S=>e(f).parent_id=S),categorias:[u],"excluded-id":c.id,label:"",placeholder:"Etiqueta padre..."},null,8,["modelValue","categorias","excluded-id"]),i("div",pa,[t(e(I),{size:"sm",onClick:S=>K(c.id),disabled:e(f).processing},{default:l(()=>[t(e(re),{class:"h-4 w-4 mr-2"}),a[46]||(a[46]=o(" Guardar ",-1))]),_:1},8,["onClick","disabled"]),t(e(I),{size:"sm",variant:"outline",onClick:w},{default:l(()=>[t(e(ne),{class:"h-4 w-4 mr-2"}),a[47]||(a[47]=o(" Cancelar ",-1))]),_:1})])])])):(r(),p("div",va,[i("div",null,[i("div",ga,[i("span",xa,b(c.nombre),1),c.parent?(r(),E(e(G),{key:0,variant:"outline",class:"text-xs"},{default:l(()=>[o(b(c.parent.nombre),1)]),_:2},1024)):k("",!0),c.tiene_hijos?(r(),E(e(G),{key:1,variant:"secondary",class:"text-xs"},{default:l(()=>[...a[48]||(a[48]=[o(" Tiene hijos ",-1)])]),_:1})):k("",!0)]),c.descripcion?(r(),p("p",ba,b(c.descripcion),1)):k("",!0),c.ruta_completa&&c.parent?(r(),p("p",ha," Ruta: "+b(c.ruta_completa),1)):k("",!0)]),i("div",_a,[t(e(I),{size:"sm",variant:"outline",onClick:S=>C(c)},{default:l(()=>[t(e(Ce),{class:"h-4 w-4 mr-2"}),a[49]||(a[49]=o(" Editar ",-1))]),_:1},8,["onClick"]),t(e(I),{size:"sm",variant:"outline",onClick:S=>_e(c.id)},{default:l(()=>[t(e(be),{class:"h-4 w-4 mr-2"}),a[50]||(a[50]=o(" Eliminar ",-1))]),_:1},8,["onClick"])])]))]))),128))])):D.value!==u.id?(r(),p("div",ya,[t(e(ve),{class:"h-8 w-8 mx-auto mb-2 opacity-50"}),a[52]||(a[52]=i("p",null,"No hay etiquetas en esta categoría",-1)),t(e(I),{variant:"outline",size:"sm",class:"mt-2",onClick:c=>$(u.id)},{default:l(()=>[t(e(pe),{class:"mr-2 h-4 w-4"}),a[51]||(a[51]=o(" Crear primera etiqueta ",-1))]),_:1},8,["onClick"])])):k("",!0)])]),_:2},1024)]),_:2},1024)):k("",!0)],64))),128)),s.categorias.data.length===0?(r(),E(e(te),{key:0},{default:l(()=>[t(e(j),{colspan:"7",class:"text-center text-muted-foreground py-8"},{default:l(()=>[...a[53]||(a[53]=[o(" No hay categorías creadas. Crea una nueva para empezar. ",-1)])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(e(ke),{value:"tree",class:"mt-0"},{default:l(()=>[t(e(Q),null,{default:l(()=>[t(Pt,{etiquetas:Ne(),"show-stats":!0,onEdit:ze,onDelete:Ue},null,8,["etiquetas"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{Tl as default};
