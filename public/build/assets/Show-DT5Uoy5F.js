import{d as K,c as E,M as Q,b as f,w as o,g as s,j as m,e as a,f as i,v as $,h as c,m as n,x as T,t as d,i as r,F as z,k as A,s as W}from"./app-D295TwpG.js";import{_ as Y}from"./UserLayout.vue_vue_type_script_setup_true_lang-DlM8HxXB.js";import{_,a as p,b,c as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-BxiJGsdC.js";import{_ as Z}from"./CardDescription.vue_vue_type_script_setup_true_lang-C5ihZYBK.js";import{_ as g}from"./createLucideIcon-D-eVYV0X.js";import{_ as S}from"./index-pTKOFCV9.js";import{_ as j,a as I}from"./index-B2czc9Ak.js";import{_ as ee}from"./ComentariosPanel.vue_vue_type_script_setup_true_lang-DO4P9MVw.js";import{F as D}from"./file-j83VA2YX.js";import{M as V}from"./music-DiHjgQJ8.js";import{V as te}from"./video-B9RK3ZCy.js";import{I as ie}from"./image-DBKM0J8d.js";import{C as O}from"./circle-x-CE_9h50a.js";import{C as q}from"./circle-check-big-GKWDCEY_.js";import{C as P}from"./clock-DN-ZQrgB.js";import{A as se}from"./arrow-left-CdTBYWcV.js";import{D as w}from"./download-JKiuERMu.js";import{S as ae}from"./square-pen-CYUVx_fI.js";import{T as oe}from"./trash-2-Dhclb-Fp.js";import{T as ne}from"./triangle-alert-Dh6RDVW6.js";import{E as de}from"./eye-BCeC5IXc.js";import"./useFlashMessages-BiQJq8LA.js";import"./index-B8JzT2zu.js";import"./floating-ui.vue-BqlKYY4i.js";import"./x-CxtBDhwy.js";import"./Input.vue_vue_type_script_setup_true_lang-BrdPP5Ww.js";import"./index-BVdoNKrK.js";import"./index-D-3TFOik.js";import"./shield-xTc-7YYA.js";import"./user-BAGTpZS5.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Cp4hDV3s.js";import"./chevron-right-G87vJ0iu.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BvOGWYox.js";import"./VisuallyHidden-Ecf8f582.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BgxQu3ec.js";import"./check-Clo04847.js";import"./Label.vue_vue_type_script_setup_true_lang-BJwJYrXW.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-7SHiCfms.js";import"./index-DDbup-j2.js";import"./circle-alert-d8VqH1J6.js";import"./map-pin-B8mKGvxS.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B8HzPPP2.js";import"./ellipsis-pH1Ybgv7.js";import"./usePermissions-BUxUggtf.js";import"./square-check-big-BZvGns2f.js";import"./file-text-C-TiYlL7.js";import"./users-Vb3jmSQ5.js";import"./folder-open-RpPo5MZo.js";import"./milestone-SDr_BTbm.js";import"./index-IU7q-1dg.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-DKx1h7W0.js";import"./RichTextEditor-Db_houeP.js";import"./italic-DcPtMLj7.js";import"./list-Bx2T3jMD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FileUploadField.vue_vue_type_script_setup_true_lang-BbovtZaI.js";import"./useFileUpload-CQ3qWbTU.js";import"./upload-BixeVlql.js";import"./paperclip-SA2TitUL.js";import"./loader-circle-CD26v6tX.js";import"./send-LbcVvLTn.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BaR3-pJY.js";import"./external-link-C9WOeEFB.js";import"./arrow-right-CMbRvqg_.js";import"./message-square-Cfm67azv.js";import"./chevron-left-B9X0uCqv.js";const re={class:"space-y-6"},le={class:"flex justify-between items-start"},ce={class:"flex items-center gap-4 mt-2"},me={class:"text-muted-foreground"},ue={class:"flex gap-2"},ve={key:0},fe={class:"grid gap-6 lg:grid-cols-3"},he={class:"lg:col-span-2 space-y-6"},ge={key:0,class:"ml-2"},xe={class:"space-y-4"},_e={key:0,class:"space-y-4"},pe={key:0,class:"text-center"},be=["src","alt"],ye={class:"text-sm text-muted-foreground mt-2"},we={key:1,class:"text-center"},ke=["src"],Ce={class:"text-sm text-muted-foreground mt-2"},Ee={key:2,class:"flex flex-col items-center gap-4"},De={class:"flex items-center gap-3"},$e={class:"text-left"},Te={class:"font-medium"},ze=["src"],Ae={key:3,class:"flex items-center gap-4 py-4"},Se={class:"flex-1"},Ve={class:"font-medium"},Fe={class:"text-sm text-muted-foreground"},Be={key:1,class:"bg-muted/30 rounded-lg p-4"},Me={key:0,class:"text-center"},Ne=["src","alt"],Le={key:1,class:"text-center"},je=["src"],Ie={key:2,class:"flex flex-col items-center gap-4"},Oe=["src"],qe={key:3,class:"flex flex-col items-center gap-4 py-8"},Pe={class:"text-center"},Re={class:"font-medium"},Ue={class:"text-sm text-muted-foreground"},Xe={key:0},Ge={key:2,class:"text-center py-8 text-muted-foreground"},He={class:"whitespace-pre-wrap"},Je={class:"space-y-6"},Ke={class:"font-medium"},Qe={key:0,class:"text-sm text-muted-foreground mt-1"},We={class:"space-y-2"},Ye={class:"font-medium text-sm"},Ze={class:"text-xs text-muted-foreground"},et={class:"text-sm"},tt={class:"text-sm"},it={key:0},st={class:"space-y-2 max-h-32 overflow-y-auto"},at={class:"truncate flex-1 mr-2"},ot={key:1},nt={class:"text-sm"},dt={key:2},rt={class:"text-sm"},lt={class:"text-sm"},ct={class:"text-sm"},mt={key:3},ut={class:"text-sm"},vt={key:0,class:"text-xs text-muted-foreground"},ft={class:"text-sm whitespace-pre-wrap"},$i=K({__name:"Show",props:{contrato:{},evidencia:{}},setup(e){const u=e,R=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mis Contratos",href:"/miembro/mis-contratos"},{title:u.contrato.nombre,href:`/miembro/mis-contratos/${u.contrato.id}`},{title:"Evidencias",href:`/miembro/mis-contratos/${u.contrato.id}/evidencias`},{title:"Ver Evidencia",href:"#"}],F=E(()=>({imagen:ie,video:te,audio:V,documento:D})[u.evidencia.tipo_evidencia]||D),B=E(()=>({pendiente:{color:"secondary",icon:P,bgClass:"bg-yellow-50",textClass:"text-yellow-800"},aprobada:{color:"success",icon:q,bgClass:"bg-green-50",textClass:"text-green-800"},rechazada:{color:"destructive",icon:O,bgClass:"bg-red-50",textClass:"text-red-800"}})[u.evidencia.estado]||{color:"default",icon:P,bgClass:"bg-gray-50",textClass:"text-gray-800"}),M=Q(),U=E(()=>{var l,t;return u.evidencia.estado==="pendiente"&&u.evidencia.user_id===((t=(l=M.props.auth)==null?void 0:l.user)==null?void 0:t.id)}),X=E(()=>{var l,t;return u.evidencia.estado==="pendiente"&&u.evidencia.user_id===((t=(l=M.props.auth)==null?void 0:l.user)==null?void 0:t.id)}),N=l=>l?new Date(l).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",G=l=>l?new Date(l).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",H=()=>{confirm("¿Estás seguro de que deseas eliminar esta evidencia? Esta acción no se puede deshacer.")&&W.delete(route("user.mis-contratos.evidencias.destroy",[u.contrato.id,u.evidencia.id]))},x=l=>{const t=l||u.evidencia.archivo_url;t&&window.open(t,"_blank")},J=()=>{var l;((l=u.evidencia.archivos_urls)==null?void 0:l.length)>0?u.evidencia.archivos_urls.forEach((t,k)=>{setTimeout(()=>{window.open(t,"_blank")},k*500)}):u.evidencia.archivo_url&&x()};return(l,t)=>(n(),f(Y,{breadcrumbs:R},{default:o(()=>{var k;return[s("div",re,[s("div",le,[s("div",null,[a(i($),{href:l.route("user.mis-contratos.evidencias.index",e.contrato.id),class:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-2"},{default:o(()=>[a(i(se),{class:"w-4 h-4 mr-2"}),t[0]||(t[0]=c(" Volver a Evidencias ",-1))]),_:1},8,["href"]),t[1]||(t[1]=s("h2",{class:"text-3xl font-bold tracking-tight"},"Ver Evidencia",-1)),s("div",ce,[a(i(S),{variant:B.value.color},{default:o(()=>[(n(),f(T(B.value.icon),{class:"w-3 h-3 mr-1"})),c(" "+d(e.evidencia.estado_label),1)]),_:1},8,["variant"]),a(i(S),{variant:"outline"},{default:o(()=>[(n(),f(T(F.value),{class:"w-3 h-3 mr-1"})),c(" "+d(e.evidencia.tipo_evidencia_label),1)]),_:1}),a(i(S),{variant:"secondary"},{default:o(()=>[c(d(e.evidencia.tiene_multiples_archivos?`${e.evidencia.total_archivos} archivos`:"1 archivo"),1)]),_:1}),s("span",me," Subida "+d(G(e.evidencia.created_at)),1)])]),s("div",ue,[e.evidencia.tiene_multiples_archivos?(n(),f(i(g),{key:0,onClick:J,variant:"outline"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),c(" Descargar Todos ("+d(e.evidencia.total_archivos)+") ",1)]),_:1})):e.evidencia.archivo_url?(n(),f(i(g),{key:1,onClick:x,variant:"outline"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),t[2]||(t[2]=c(" Descargar ",-1))]),_:1})):m("",!0),U.value?(n(),f(i(g),{key:2,href:l.route("user.mis-contratos.evidencias.edit",[e.contrato.id,e.evidencia.id]),as:i($),variant:"outline"},{default:o(()=>[a(i(ae),{class:"w-4 h-4 mr-2"}),t[3]||(t[3]=c(" Editar ",-1))]),_:1},8,["href","as"])):m("",!0),X.value?(n(),f(i(g),{key:3,onClick:H,variant:"destructive"},{default:o(()=>[a(i(oe),{class:"w-4 h-4 mr-2"}),t[4]||(t[4]=c(" Eliminar ",-1))]),_:1})):m("",!0)])]),e.evidencia.estado==="rechazada"?(n(),f(i(j),{key:0,class:"border-red-200 bg-red-50"},{default:o(()=>[a(i(O),{class:"h-4 w-4 text-red-600"}),a(i(I),{class:"text-red-800"},{default:o(()=>[t[5]||(t[5]=c(" Esta evidencia ha sido rechazada. ",-1)),e.evidencia.observaciones_admin?(n(),r("span",ve," Motivo: "+d(e.evidencia.observaciones_admin),1)):m("",!0)]),_:1})]),_:1})):m("",!0),e.evidencia.estado==="aprobada"?(n(),f(i(j),{key:1,class:"border-green-200 bg-green-50"},{default:o(()=>[a(i(q),{class:"h-4 w-4 text-green-600"}),a(i(I),{class:"text-green-800"},{default:o(()=>[...t[6]||(t[6]=[c(" Esta evidencia ha sido aprobada exitosamente. ",-1)])]),_:1})]),_:1})):m("",!0),s("div",fe,[s("div",he,[a(i(_),null,{default:o(()=>[a(i(p),null,{default:o(()=>[a(i(b),{class:"flex items-center gap-2"},{default:o(()=>[(n(),f(T(F.value),{class:"w-5 h-5"})),t[7]||(t[7]=c(" Archivo de Evidencia ",-1))]),_:1}),a(i(Z),null,{default:o(()=>[c(d(e.evidencia.archivo_nombre||"Archivo subido")+" ",1),e.evidencia.archivo_size_formatted?(n(),r("span",ge," ("+d(e.evidencia.archivo_size_formatted)+") ",1)):m("",!0)]),_:1})]),_:1}),a(i(y),null,{default:o(()=>{var h;return[s("div",xe,[((h=e.evidencia.archivos_info)==null?void 0:h.length)>0?(n(),r("div",_e,[(n(!0),r(z,null,A(e.evidencia.archivos_info,(v,C)=>(n(),r("div",{key:v.indice,class:"bg-muted/30 rounded-lg p-4 relative group"},[a(i(g),{onClick:L=>x(v.url),variant:"outline",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},{default:o(()=>[a(i(w),{class:"w-4 h-4"})]),_:1},8,["onClick"]),e.evidencia.es_imagen?(n(),r("div",pe,[s("img",{src:v.url,alt:v.nombre,class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"},null,8,be),s("p",ye,d(v.nombre),1)])):e.evidencia.es_video?(n(),r("div",we,[s("video",{src:v.url,controls:"",class:"max-w-full max-h-64 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,ke),s("p",Ce,d(v.nombre),1)])):e.evidencia.es_audio?(n(),r("div",Ee,[s("div",De,[a(i(V),{class:"w-12 h-12 text-muted-foreground"}),s("div",$e,[s("p",Te,d(v.nombre),1),t[8]||(t[8]=s("p",{class:"text-sm text-muted-foreground"},"Archivo de audio",-1))])]),s("audio",{src:v.url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,ze)])):(n(),r("div",Ae,[a(i(D),{class:"w-12 h-12 text-muted-foreground flex-shrink-0"}),s("div",Se,[s("p",Ve,d(v.nombre),1),s("p",Fe,d(e.evidencia.tipo_evidencia_label),1)]),a(i(g),{onClick:L=>x(v.url),variant:"outline",size:"sm"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),t[9]||(t[9]=c(" Descargar ",-1))]),_:1},8,["onClick"])]))]))),128))])):e.evidencia.archivo_url?(n(),r("div",Be,[e.evidencia.es_imagen?(n(),r("div",Me,[s("img",{src:e.evidencia.archivo_url,alt:e.evidencia.descripcion||"Evidencia",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"},null,8,Ne)])):e.evidencia.es_video?(n(),r("div",Le,[s("video",{src:e.evidencia.archivo_url,controls:"",class:"max-w-full max-h-96 mx-auto rounded-lg shadow-sm"}," Tu navegador no soporta la reproducción de video. ",8,je)])):e.evidencia.es_audio?(n(),r("div",Ie,[a(i(V),{class:"w-16 h-16 text-muted-foreground"}),s("audio",{src:e.evidencia.archivo_url,controls:"",class:"w-full max-w-md"}," Tu navegador no soporta la reproducción de audio. ",8,Oe)])):(n(),r("div",qe,[a(i(D),{class:"w-16 h-16 text-muted-foreground"}),s("div",Pe,[s("p",Re,d(e.evidencia.archivo_nombre),1),s("p",Ue,[c(d(e.evidencia.tipo_evidencia_label)+" ",1),e.evidencia.archivo_size_formatted?(n(),r("span",Xe," • "+d(e.evidencia.archivo_size_formatted),1)):m("",!0)])]),a(i(g),{onClick:x,variant:"outline"},{default:o(()=>[a(i(w),{class:"w-4 h-4 mr-2"}),t[10]||(t[10]=c(" Descargar para ver ",-1))]),_:1})]))])):(n(),r("div",Ge,[a(i(ne),{class:"w-12 h-12 mx-auto mb-3"}),t[11]||(t[11]=s("p",null,"No se pudo cargar el archivo",-1))]))])]}),_:1})]),_:1}),e.evidencia.descripcion?(n(),f(i(_),{key:0},{default:o(()=>[a(i(p),null,{default:o(()=>[a(i(b),null,{default:o(()=>[...t[12]||(t[12]=[c("Descripción",-1)])]),_:1})]),_:1}),a(i(y),null,{default:o(()=>[s("p",He,d(e.evidencia.descripcion),1)]),_:1})]),_:1})):m("",!0),a(ee,{"commentable-type":"evidencias","commentable-id":e.evidencia.id,"can-create":!0},null,8,["commentable-id"])]),s("div",Je,[a(i(_),null,{default:o(()=>[a(i(p),null,{default:o(()=>[a(i(b),null,{default:o(()=>[...t[13]||(t[13]=[c("Obligación Contractual",-1)])]),_:1})]),_:1}),a(i(y),{class:"space-y-4"},{default:o(()=>[s("div",null,[s("p",Ke,d(e.evidencia.obligacion.nombre),1),e.evidencia.obligacion.descripcion?(n(),r("p",Qe,d(e.evidencia.obligacion.descripcion),1)):m("",!0)]),a(i(g),{href:l.route("user.mis-obligaciones.show",e.evidencia.obligacion.id),as:i($),variant:"outline",size:"sm"},{default:o(()=>[a(i(de),{class:"w-4 h-4 mr-2"}),t[14]||(t[14]=c(" Ver Obligación ",-1))]),_:1},8,["href","as"])]),_:1})]),_:1}),((k=e.evidencia.entregables)==null?void 0:k.length)>0?(n(),f(i(_),{key:0},{default:o(()=>[a(i(p),null,{default:o(()=>[a(i(b),null,{default:o(()=>[...t[15]||(t[15]=[c("Entregables Asociados",-1)])]),_:1})]),_:1}),a(i(y),null,{default:o(()=>[s("div",We,[(n(!0),r(z,null,A(e.evidencia.entregables,h=>(n(),r("div",{key:h.id,class:"p-3 bg-muted/30 rounded-lg"},[s("p",Ye,d(h.nombre),1),s("p",Ze,d(h.hito),1)]))),128))])]),_:1})]),_:1})):m("",!0),a(i(_),null,{default:o(()=>[a(i(p),null,{default:o(()=>[a(i(b),null,{default:o(()=>[c(d(e.evidencia.tiene_multiples_archivos?"Detalles de los Archivos":"Detalles del Archivo"),1)]),_:1})]),_:1}),a(i(y),{class:"space-y-3"},{default:o(()=>{var h,v;return[s("div",null,[t[16]||(t[16]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Tipo",-1)),s("p",et,d(e.evidencia.tipo_evidencia_label),1)]),s("div",null,[t[17]||(t[17]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Cantidad",-1)),s("p",tt,d(e.evidencia.total_archivos||1)+" archivo(s)",1)]),((h=e.evidencia.archivos_info)==null?void 0:h.length)>0?(n(),r("div",it,[t[18]||(t[18]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Archivos",-1)),s("div",st,[(n(!0),r(z,null,A(e.evidencia.archivos_info,C=>(n(),r("div",{key:C.indice,class:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded"},[s("span",at,d(C.nombre),1),a(i(g),{onClick:L=>x(C.url),size:"sm",variant:"ghost",class:"h-6 w-6 p-0"},{default:o(()=>[a(i(w),{class:"w-3 h-3"})]),_:1},8,["onClick"])]))),128))])])):e.evidencia.archivo_size_formatted?(n(),r("div",ot,[t[19]||(t[19]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Tamaño",-1)),s("p",nt,d(e.evidencia.archivo_size_formatted),1)])):m("",!0),(v=e.evidencia.metadata)!=null&&v.mime_type?(n(),r("div",dt,[t[20]||(t[20]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Formato",-1)),s("p",rt,d(e.evidencia.metadata.mime_type),1)])):m("",!0),s("div",null,[t[21]||(t[21]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Subido por",-1)),s("p",lt,d(e.evidencia.usuario.name),1)]),s("div",null,[t[22]||(t[22]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Fecha de subida",-1)),s("p",ct,d(N(e.evidencia.created_at)),1)]),e.evidencia.revisado_at?(n(),r("div",mt,[t[23]||(t[23]=s("p",{class:"text-sm font-medium text-muted-foreground"},"Revisado",-1)),s("p",ut,d(N(e.evidencia.revisado_at)),1),e.evidencia.revisor?(n(),r("p",vt," por "+d(e.evidencia.revisor.name),1)):m("",!0)])):m("",!0)]}),_:1})]),_:1}),e.evidencia.observaciones_admin?(n(),f(i(_),{key:1},{default:o(()=>[a(i(p),null,{default:o(()=>[a(i(b),null,{default:o(()=>[...t[24]||(t[24]=[c("Observaciones de Revisión",-1)])]),_:1})]),_:1}),a(i(y),null,{default:o(()=>[s("p",ft,d(e.evidencia.observaciones_admin),1)]),_:1})]),_:1})):m("",!0)])])])]}),_:1}))}});export{$i as default};
