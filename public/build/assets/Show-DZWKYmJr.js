import{d as mt,r as ut,p as ft,s as T,c as A,b as f,w as r,g as e,j as d,e as s,f as a,v as b,h as l,t as i,n as R,m as n,x as gt,i as c,y as vt,F as I,k as j,M as xt}from"./app-C_gfZV1-.js";import{B as bt,_ as yt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-xsUNqOtS.js";import{_ as D,a as P,b as S,c as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-DJGHSV9E.js";import{_ as M}from"./CardDescription.vue_vue_type_script_setup_true_lang-snRPFac0.js";import{_ as v}from"./createLucideIcon-LCCin2D0.js";import{_ as y}from"./index-BEm2U-W2.js";import{_ as ht,a as pt,b as w,c as _}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-Ceo5-DkZ.js";import{_ as G,a as H}from"./index-DnAcItF_.js";import{u as kt}from"./useToast-BTMsMf51.js";import{u as wt}from"./useFileUpload-TDHJppr6.js";import{_ as _t}from"./CamposPersonalizadosDisplay.vue_vue_type_script_setup_true_lang-CxuV-2f4.js";import{C as Ct}from"./circle-x-Doa452Tr.js";import{C as q}from"./circle-check-big-B2aTTCvQ.js";import{F as L}from"./file-text-C1k3zoJT.js";import{A as $t}from"./arrow-left-D-oe4XDp.js";import{D as X}from"./download-BnhH7jYy.js";import{C as Dt}from"./copy-DyjZV7Rl.js";import{S as Pt}from"./square-pen-AE4sBiFb.js";import{T as St}from"./trash-2-CurzGGDH.js";import{C as J}from"./circle-alert-tGPsKrGX.js";import{E as zt}from"./external-link-IFKhxjHc.js";import{D as Vt}from"./dollar-sign-IwseDH-z.js";import{C as K}from"./calendar-DmhhJ7lO.js";import{U as O}from"./user-BAvGAMJ6.js";import{M as Q}from"./mail-DyDM1W6C.js";import{P as W}from"./useFlashMessages-B6jZS7Rs.js";import{H as Y}from"./hash-BQJf7O8i.js";import{E as Ft}from"./eye-CknGWA2W.js";import{P as Z}from"./plus-Dz2uDOJl.js";import{L as Et}from"./list-DX09VRxl.js";import{T as Tt}from"./tree-pine-B2xTEhiO.js";import{C as At}from"./clock-BkApPiCn.js";import{C as It}from"./chevron-right-BvME8AG8.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-oA0L8KJf.js";import"./index-K6MveLEE.js";import"./floating-ui.vue-DnmkEKBW.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DU8wuQJI.js";import"./chevrons-up-down-BEHVMB6i.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B44PLq6Y.js";import"./target-Bg0MFnT-.js";import"./users-DN6ncwuy.js";import"./shield-DX6Okc01.js";import"./vote-CNKyCWNb.js";import"./folder-open-COOgyORL.js";import"./send-C-W1urrX.js";import"./briefcase-DVx28f_Z.js";import"./megaphone-BDO6ruUm.js";import"./user-check-CuEsssqc.js";import"./clipboard-list-9G7Lxp_9.js";import"./message-square-DZGHN4nb.js";import"./panel-left-Ct_Nf-3R.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-B06pPlTQ.js";import"./VisuallyHidden-CBr7fGPU.js";import"./Input.vue_vue_type_script_setup_true_lang-zbeD4SIO.js";import"./index-D-cJwBhy.js";import"./check-Cjp661W1.js";import"./index-BxHOhP--.js";import"./index-uVxstrj-.js";import"./RovingFocusItem-3ZqmeKrb.js";import"./utils-CXuFeNy8.js";import"./parseISO-D9CBQlQ_.js";import"./es-SykclP7y.js";import"./x-CJ_HHczB.js";import"./index-CWrHDAM0.js";import"./house-ByErwb8W.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BdJ-M5gr.js";import"./Label.vue_vue_type_script_setup_true_lang-D52F8Xuc.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BM9w-b1r.js";import"./map-pin-CFmCsfgg.js";const jt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Lt={class:"flex items-center justify-between"},Ot={class:"flex items-center gap-4"},Nt={class:"text-3xl font-bold"},Bt={class:"flex items-center gap-4 mt-2"},Ut={class:"flex gap-2"},Rt={class:"space-y-6"},Mt={class:"pb-6 border-b"},Gt={class:"flex items-center gap-2"},Ht={class:"pb-6 border-b"},qt={key:0},Xt={class:"text-2xl font-bold flex items-center gap-2"},Jt={class:"text-sm text-gray-600"},Kt={key:1},Qt={class:"pb-6 border-b"},Wt={class:"space-y-4"},Yt={key:0},Zt={class:"mt-1"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ee={class:"mt-1 flex items-center gap-2"},oe={class:"mt-1 flex items-center gap-2"},ae={key:1},se={class:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2"},re={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"},ne={key:2},ie={class:"mt-1 text-gray-700"},le={class:"space-y-3 text-sm"},de={class:"ml-2 font-mono"},ce={class:"ml-2"},me={key:0,class:"block text-xs text-gray-500 ml-2 mt-1"},ue={class:"ml-2"},fe={key:0,class:"block text-xs text-gray-500 ml-2 mt-1"},ge={key:0,class:"pb-6 border-b"},ve={class:"flex items-center gap-3 p-4 rounded-lg border bg-blue-50 dark:bg-blue-950/20"},xe={class:"font-medium"},be=["href"],ye={class:"pb-6 border-b"},he={key:0},pe={class:"rounded-lg border p-4 bg-green-50 dark:bg-green-950/20"},ke={class:"flex items-start gap-4"},we={class:"flex-1"},_e={class:"flex items-center gap-2 mb-2"},Ce={class:"font-semibold"},$e={class:"space-y-2 text-sm"},De={class:"flex items-center gap-2"},Pe=["href"],Se={key:0,class:"flex items-center gap-2"},ze=["href"],Ve={class:"flex items-center gap-2"},Fe={class:"text-gray-600"},Ee={key:1},Te={class:"space-y-3 p-4 rounded-lg border bg-gray-50 dark:bg-gray-900/20"},Ae={key:0,class:"flex items-start gap-3"},Ie={class:"font-medium"},je={key:1,class:"flex items-start gap-3"},Le={key:2,class:"flex items-start gap-3"},Oe=["href"],Ne={key:3,class:"flex items-start gap-3"},Be=["href"],Ue={key:2},Re={key:1},Me={class:"text-sm font-medium text-gray-600 mb-3"},Ge={class:"space-y-2"},He={class:"flex items-center gap-3"},qe={class:"font-medium"},Xe={class:"text-sm text-gray-500"},Je={key:0,class:"text-sm text-gray-600 mt-1"},Ke={key:2},Qe={class:"space-y-2"},We={class:"flex items-center justify-between"},Ye={class:"flex items-center space-x-3 flex-1"},Ze={class:"min-w-0 flex-1"},to={class:"text-sm font-medium truncate"},eo={key:0,class:"text-xs text-muted-foreground"},oo={class:"flex items-center space-x-2"},ao={class:"flex justify-between items-center"},so={class:"flex gap-2"},ro={key:0},no={class:"grid grid-cols-4 gap-4 mb-6"},io={class:"text-center"},lo={class:"text-2xl font-bold"},co={class:"text-center"},mo={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},uo={class:"text-center"},fo={class:"text-2xl font-bold text-green-600 dark:text-green-400"},go={class:"text-center"},vo={class:"text-2xl font-bold"},xo={key:0,class:"mt-6 space-y-2"},bo={class:"flex items-center justify-between"},yo={class:"flex-1"},ho={class:"font-medium"},po={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ko={class:"flex items-center gap-4 mt-2"},wo={key:0,class:"text-xs text-gray-500"},_o={key:1,class:"text-xs text-gray-500"},Co={class:"flex gap-2"},$o={class:"text-center mt-4"},Do={key:1,class:"text-center py-6 text-gray-500"},Ma=mt({__name:"Show",props:{contrato:{},can:{}},setup(o){const x=o,N=kt(),{downloadFile:tt}=wt(),et=["general","participantes","archivos","campos","obligaciones"],V=ut((()=>{const t=new URLSearchParams(window.location.search).get("tab");return t&&et.includes(t)?t:"general"})());ft(V,m=>{const t=`/admin/contratos/${x.contrato.id}?tab=${m}`;T.get(t,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const ot=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:x.contrato.nombre,href:`/admin/contratos/${x.contrato.id}`}],F=A(()=>{const m={borrador:{color:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",icon:L,label:"Borrador"},activo:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:q,label:"Activo"},finalizado:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:q,label:"Finalizado"},cancelado:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:Ct,label:"Cancelado"}};return m[x.contrato.estado]||m.borrador}),at=A(()=>({servicio:"Servicio",obra:"Obra",suministro:"Suministro",consultoria:"Consultoría",otro:"Otro"})[x.contrato.tipo]||"Otro"),st=A(()=>x.contrato.estado==="cancelado"?"bg-red-500":x.contrato.estado==="finalizado"?"bg-blue-500":x.contrato.esta_vencido?"bg-red-500":x.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),C=m=>m?new Date(m).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",B=m=>m?new Date(m).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",rt=()=>{confirm("¿Está seguro de eliminar este contrato? Esta acción no se puede deshacer.")&&T.delete(route("admin.contratos.destroy",x.contrato.id),{onSuccess:()=>{N.success("Contrato eliminado exitosamente")}})},nt=()=>{confirm("¿Desea duplicar este contrato?")&&T.post(route("admin.contratos.duplicar",x.contrato.id),{},{onSuccess:()=>{N.success("Contrato duplicado exitosamente")}})},it=m=>{window.open(m,"_blank")},lt=()=>{x.contrato.archivo_pdf&&window.open(x.contrato.archivo_pdf,"_blank")},h=m=>{var u,g,k;const t=xt(),p=((u=t.props.auth)==null?void 0:u.permissions)||[];return((k=(g=t.props.auth)==null?void 0:g.roles)==null?void 0:k.some($=>$.name==="super_admin"))?!0:p.includes(m)},dt=m=>({pendiente:"secondary",en_progreso:"warning",cumplida:"success",vencida:"destructive",cancelada:"outline"})[m]||"secondary";return(m,t)=>(n(),f(yt,{breadcrumbs:ot},{default:r(()=>[e("div",jt,[e("div",Lt,[e("div",Ot,[s(a(b),{href:m.route("admin.contratos.index")},{default:r(()=>[s(a(v),{variant:"ghost",size:"sm"},{default:r(()=>[s(a($t),{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=l(" Volver ",-1))]),_:1})]),_:1},8,["href"]),e("div",null,[e("h1",Nt,i(o.contrato.nombre),1),e("div",Bt,[s(a(y),{class:R(F.value.color)},{default:r(()=>[(n(),f(gt(F.value.icon),{class:"h-4 w-4 mr-1"})),l(" "+i(F.value.label),1)]),_:1},8,["class"]),s(a(y),{variant:"outline"},{default:r(()=>[l(i(at.value),1)]),_:1}),o.contrato.esta_vencido?(n(),f(a(y),{key:0,variant:"destructive"},{default:r(()=>[...t[2]||(t[2]=[l(" Vencido ",-1)])]),_:1})):o.contrato.esta_proximo_vencer?(n(),f(a(y),{key:1,class:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 border border-yellow-300 dark:border-yellow-700"},{default:r(()=>[l(" Vence en "+i(o.contrato.dias_restantes)+" días ",1)]),_:1})):d("",!0)])])]),e("div",Ut,[o.contrato.archivo_pdf?(n(),f(a(v),{key:0,variant:"outline",onClick:lt},{default:r(()=>[s(a(X),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=l(" Descargar PDF ",-1))]),_:1})):d("",!0),o.can.edit?(n(),f(a(v),{key:1,variant:"outline",onClick:nt},{default:r(()=>[s(a(Dt),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=l(" Duplicar ",-1))]),_:1})):d("",!0),o.can.edit?(n(),f(a(b),{key:2,href:m.route("admin.contratos.edit",o.contrato.id)},{default:r(()=>[s(a(v),null,{default:r(()=>[s(a(Pt),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=l(" Editar ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),o.can.delete?(n(),f(a(v),{key:3,variant:"destructive",onClick:rt},{default:r(()=>[s(a(St),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=l(" Eliminar ",-1))]),_:1})):d("",!0)])]),o.contrato.esta_vencido?(n(),f(a(G),{key:0,class:"bg-red-100 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200"},{default:r(()=>[s(a(J),{class:"h-4 w-4"}),s(a(H),null,{default:r(()=>[l(" Este contrato venció el "+i(C(o.contrato.fecha_fin))+". ",1)]),_:1})]),_:1})):o.contrato.esta_proximo_vencer?(n(),f(a(G),{key:1,variant:"warning"},{default:r(()=>[s(a(J),{class:"h-4 w-4"}),s(a(H),null,{default:r(()=>[l(" Este contrato vencerá en "+i(o.contrato.dias_restantes)+" días ("+i(C(o.contrato.fecha_fin))+"). ",1)]),_:1})]),_:1})):d("",!0),e("div",Rt,[s(a(ht),{modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=p=>V.value=p)},{default:r(()=>{var p,E;return[s(a(pt),null,{default:r(()=>{var u,g;return[s(a(w),{value:"general"},{default:r(()=>[...t[7]||(t[7]=[l("Información General",-1)])]),_:1}),s(a(w),{value:"participantes"},{default:r(()=>[...t[8]||(t[8]=[l(" Partes Involucradas ",-1)])]),_:1}),(u=o.contrato.archivos_paths)!=null&&u.length?(n(),f(a(w),{key:0,value:"archivos"},{default:r(()=>[t[9]||(t[9]=l(" Archivos ",-1)),s(a(y),{variant:"outline",class:"ml-1"},{default:r(()=>[l(i(o.contrato.archivos_paths.length),1)]),_:1})]),_:1})):d("",!0),(g=o.contrato.campos_personalizados)!=null&&g.length?(n(),f(a(w),{key:1,value:"campos"},{default:r(()=>[...t[10]||(t[10]=[l(" Campos Adicionales ",-1)])]),_:1})):d("",!0),s(a(w),{value:"obligaciones"},{default:r(()=>[t[11]||(t[11]=l(" Obligaciones ",-1)),o.contrato.total_obligaciones>0?(n(),f(a(y),{key:0,variant:"outline",class:"ml-1"},{default:r(()=>[l(i(o.contrato.total_obligaciones),1)]),_:1})):d("",!0)]),_:1})]}),_:1}),s(a(_),{value:"general"},{default:r(()=>[s(a(D),null,{default:r(()=>[s(a(P),null,{default:r(()=>[s(a(S),null,{default:r(()=>[...t[12]||(t[12]=[l("Información General",-1)])]),_:1})]),_:1}),s(a(z),{class:"space-y-6"},{default:r(()=>[e("div",Mt,[t[13]||(t[13]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Proyecto",-1)),e("div",Gt,[s(a(b),{href:m.route("admin.proyectos.show",o.contrato.proyecto.id),class:"text-blue-600 hover:underline flex items-center gap-2 font-medium"},{default:r(()=>[l(i(o.contrato.proyecto.nombre)+" ",1),s(a(zt),{class:"h-4 w-4"})]),_:1},8,["href"]),s(a(y),{variant:"outline"},{default:r(()=>[l(i(o.contrato.proyecto.estado),1)]),_:1})])]),e("div",Ht,[t[15]||(t[15]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Información Financiera",-1)),o.contrato.monto_total?(n(),c("div",qt,[e("p",Xt,[s(a(Vt),{class:"h-6 w-6"}),l(" "+i(o.contrato.monto_formateado||o.contrato.monto_total)+" ",1),e("span",Jt,i(o.contrato.moneda),1)])])):(n(),c("div",Kt,[...t[14]||(t[14]=[e("p",{class:"text-gray-500 text-sm"},"No se ha especificado información financiera",-1)])]))]),e("div",Qt,[t[21]||(t[21]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Detalles del Contrato",-1)),e("div",Wt,[o.contrato.descripcion?(n(),c("div",Yt,[t[16]||(t[16]=e("h5",{class:"text-sm font-medium text-gray-600"},"Descripción",-1)),e("p",Zt,i(o.contrato.descripcion),1)])):d("",!0),e("div",te,[e("div",null,[t[17]||(t[17]=e("h5",{class:"text-sm font-medium text-gray-600"},"Fecha de Inicio",-1)),e("p",ee,[s(a(K),{class:"h-4 w-4"}),l(" "+i(C(o.contrato.fecha_inicio)),1)])]),e("div",null,[t[18]||(t[18]=e("h5",{class:"text-sm font-medium text-gray-600"},"Fecha de Fin",-1)),e("p",oe,[s(a(K),{class:"h-4 w-4"}),l(" "+i(C(o.contrato.fecha_fin)),1)])])]),o.contrato.porcentaje_transcurrido!==void 0&&o.contrato.estado==="activo"?(n(),c("div",ae,[e("div",se,[t[19]||(t[19]=e("span",null,"Progreso del contrato",-1)),e("span",null,i(o.contrato.porcentaje_transcurrido)+"%",1)]),e("div",re,[e("div",{class:R([st.value,"h-3 rounded-full transition-all duration-300"]),style:vt({width:`${o.contrato.porcentaje_transcurrido}%`})},null,6)])])):d("",!0),o.contrato.observaciones?(n(),c("div",ne,[t[20]||(t[20]=e("h5",{class:"text-sm font-medium text-gray-600"},"Observaciones",-1)),e("p",ie,i(o.contrato.observaciones),1)])):d("",!0)])]),e("div",null,[t[25]||(t[25]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Información del Sistema",-1)),e("div",le,[e("div",null,[t[22]||(t[22]=e("span",{class:"text-gray-600"},"ID:",-1)),e("span",de,"#"+i(o.contrato.id),1)]),e("div",null,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Creado:",-1)),e("span",ce,i(B(o.contrato.created_at)),1),o.contrato.creador?(n(),c("span",me," por "+i(o.contrato.creador.name),1)):d("",!0)]),e("div",null,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Última actualización:",-1)),e("span",ue,i(B(o.contrato.updated_at)),1),o.contrato.actualizador?(n(),c("span",fe," por "+i(o.contrato.actualizador.name),1)):d("",!0)])])])]),_:1})]),_:1})]),_:1}),s(a(_),{value:"participantes"},{default:r(()=>[s(a(D),null,{default:r(()=>[s(a(P),null,{default:r(()=>[s(a(S),null,{default:r(()=>[...t[26]||(t[26]=[l("Partes Involucradas",-1)])]),_:1}),s(a(M),null,{default:r(()=>[...t[27]||(t[27]=[l(" Responsable, contraparte y participantes del contrato ",-1)])]),_:1})]),_:1}),s(a(z),{class:"space-y-6"},{default:r(()=>{var u;return[o.contrato.responsable?(n(),c("div",ge,[t[28]||(t[28]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Responsable del Contrato",-1)),e("div",ve,[s(a(O),{class:"h-8 w-8 text-blue-600"}),e("div",null,[e("p",xe,i(o.contrato.responsable.name),1),e("a",{href:`mailto:${o.contrato.responsable.email}`,class:"text-sm text-blue-600 hover:underline"},i(o.contrato.responsable.email),9,be)])])])):d("",!0),e("div",ye,[t[35]||(t[35]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Contraparte",-1)),o.contrato.contraparte_user?(n(),c("div",he,[e("div",pe,[e("div",ke,[s(a(O),{class:"h-8 w-8 text-green-600 mt-1"}),e("div",we,[e("div",_e,[e("h5",Ce,i(o.contrato.contraparte_user.name),1),s(a(y),{class:"bg-green-100 text-green-800"},{default:r(()=>[...t[29]||(t[29]=[l(" Usuario del Sistema ",-1)])]),_:1})]),e("div",$e,[e("div",De,[s(a(Q),{class:"h-4 w-4 text-gray-400"}),e("a",{href:`mailto:${o.contrato.contraparte_user.email}`,class:"text-blue-600 hover:underline"},i(o.contrato.contraparte_user.email),9,Pe)]),o.contrato.contraparte_user.phone||o.contrato.contraparte_user.telefono?(n(),c("div",Se,[s(a(W),{class:"h-4 w-4 text-gray-400"}),e("a",{href:`tel:${o.contrato.contraparte_user.phone||o.contrato.contraparte_user.telefono}`,class:"text-blue-600 hover:underline"},i(o.contrato.contraparte_user.phone||o.contrato.contraparte_user.telefono),9,ze)])):d("",!0),e("div",Ve,[s(a(Y),{class:"h-4 w-4 text-gray-400"}),e("span",Fe,"ID: #"+i(o.contrato.contraparte_user.id),1)])])])])])])):o.contrato.contraparte_nombre||o.contrato.contraparte_identificacion||o.contrato.contraparte_email||o.contrato.contraparte_telefono?(n(),c("div",Ee,[e("div",Te,[o.contrato.contraparte_nombre?(n(),c("div",Ae,[s(a(bt),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[30]||(t[30]=e("h5",{class:"text-sm font-medium text-gray-600"},"Nombre",-1)),e("p",Ie,i(o.contrato.contraparte_nombre),1)])])):d("",!0),o.contrato.contraparte_identificacion?(n(),c("div",je,[s(a(Y),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[31]||(t[31]=e("h5",{class:"text-sm font-medium text-gray-600"},"Identificación",-1)),e("p",null,i(o.contrato.contraparte_identificacion),1)])])):d("",!0),o.contrato.contraparte_email?(n(),c("div",Le,[s(a(Q),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[32]||(t[32]=e("h5",{class:"text-sm font-medium text-gray-600"},"Email",-1)),e("a",{href:`mailto:${o.contrato.contraparte_email}`,class:"text-blue-600 hover:underline"},i(o.contrato.contraparte_email),9,Oe)])])):d("",!0),o.contrato.contraparte_telefono?(n(),c("div",Ne,[s(a(W),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[33]||(t[33]=e("h5",{class:"text-sm font-medium text-gray-600"},"Teléfono",-1)),e("a",{href:`tel:${o.contrato.contraparte_telefono}`,class:"text-blue-600 hover:underline"},i(o.contrato.contraparte_telefono),9,Be)])])):d("",!0)])])):(n(),c("div",Ue,[...t[34]||(t[34]=[e("p",{class:"text-gray-500 text-sm"},"No se ha especificado información de la contraparte",-1)])]))]),(u=o.contrato.participantes)!=null&&u.length?(n(),c("div",Re,[e("h4",Me,"Participantes del Contrato ("+i(o.contrato.participantes.length)+")",1),e("div",Ge,[(n(!0),c(I,null,j(o.contrato.participantes,g=>(n(),c("div",{key:g.id,class:"flex items-center justify-between p-4 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},[e("div",He,[s(a(O),{class:"h-8 w-8 text-gray-400"}),e("div",null,[e("p",qe,i(g.name),1),e("p",Xe,i(g.email),1),g.pivot.notas?(n(),c("p",Je,i(g.pivot.notas),1)):d("",!0)])]),s(a(y),{variant:g.pivot.rol==="aprobador"?"default":g.pivot.rol==="observador"?"secondary":"outline"},{default:r(()=>[l(i(g.pivot.rol==="aprobador"?"Aprobador":g.pivot.rol==="observador"?"Observador":"Participante"),1)]),_:2},1032,["variant"])]))),128))])])):(n(),c("div",Ke,[...t[36]||(t[36]=[e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Participantes del Contrato",-1),e("p",{class:"text-gray-500 text-sm"},"No hay participantes adicionales registrados para este contrato",-1)])]))]}),_:1})]),_:1})]),_:1}),(p=o.contrato.archivos_paths)!=null&&p.length?(n(),f(a(_),{key:0,value:"archivos"},{default:r(()=>[s(a(D),null,{default:r(()=>[s(a(P),null,{default:r(()=>[s(a(S),null,{default:r(()=>[...t[37]||(t[37]=[l("Archivos del Contrato",-1)])]),_:1}),s(a(M),null,{default:r(()=>[...t[38]||(t[38]=[l("Archivos adjuntos relacionados con el contrato",-1)])]),_:1})]),_:1}),s(a(z),null,{default:r(()=>[e("div",Qe,[(n(!0),c(I,null,j(o.contrato.archivos_paths,(u,g)=>{var k,$;return n(),c("div",{key:g,class:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("div",We,[e("div",Ye,[s(a(L),{class:"h-5 w-5 text-muted-foreground flex-shrink-0"}),e("div",Ze,[e("p",to,i(((k=o.contrato.archivos_nombres)==null?void 0:k[g])||u.split("/").pop()||"archivo"),1),($=o.contrato.tipos_archivos)!=null&&$[u]?(n(),c("p",eo,i(o.contrato.tipos_archivos[u]),1)):d("",!0)])]),e("div",oo,[s(a(v),{type:"button",variant:"ghost",size:"sm",onClick:ct=>it(`/storage/${u}`),"aria-label":"Ver archivo"},{default:r(()=>[s(a(Ft),{class:"h-4 w-4 mr-1"}),t[39]||(t[39]=l(" Ver ",-1))]),_:1},8,["onClick"]),s(a(v),{type:"button",variant:"ghost",size:"sm",onClick:ct=>{var U;return a(tt)(u,((U=o.contrato.archivos_nombres)==null?void 0:U[g])||"archivo")},"aria-label":"Descargar archivo"},{default:r(()=>[s(a(X),{class:"h-4 w-4 mr-1"}),t[40]||(t[40]=l(" Descargar ",-1))]),_:1},8,["onClick"])])])])}),128))])]),_:1})]),_:1})]),_:1})):d("",!0),(E=o.contrato.campos_personalizados)!=null&&E.length?(n(),f(a(_),{key:1,value:"campos"},{default:r(()=>[s(_t,{valores:o.contrato.campos_personalizados,titulo:"Campos Adicionales"},null,8,["valores"])]),_:1})):d("",!0),s(a(_),{value:"obligaciones",class:"space-y-6 mt-6"},{default:r(()=>[s(a(D),null,{default:r(()=>[s(a(P),null,{default:r(()=>[e("div",ao,[s(a(S),null,{default:r(()=>[...t[41]||(t[41]=[l("Obligaciones del Contrato",-1)])]),_:1}),e("div",so,[h("obligaciones.create")?(n(),f(a(b),{key:0,href:m.route("admin.obligaciones.create",{contrato_id:o.contrato.id})},{default:r(()=>[s(a(v),{size:"sm",variant:"default"},{default:r(()=>[s(a(Z),{class:"h-4 w-4 mr-1"}),t[42]||(t[42]=l(" Nueva Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(a(b),{key:1,href:m.route("admin.obligaciones.index",{contrato_id:o.contrato.id})},{default:r(()=>[s(a(v),{size:"sm",variant:"outline"},{default:r(()=>[s(a(Et),{class:"h-4 w-4 mr-1"}),t[43]||(t[43]=l(" Ver Lista ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(a(b),{key:2,href:m.route("admin.obligaciones.index",{contrato_id:o.contrato.id,vista:"arbol"})},{default:r(()=>[s(a(v),{size:"sm",variant:"outline"},{default:r(()=>[s(a(Tt),{class:"h-4 w-4 mr-1"}),t[44]||(t[44]=l(" Vista Árbol ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(a(b),{key:3,href:m.route("admin.contratos.obligaciones.timeline",o.contrato.id)},{default:r(()=>[s(a(v),{size:"sm",variant:"outline"},{default:r(()=>[s(a(At),{class:"h-4 w-4 mr-1"}),t[45]||(t[45]=l(" Timeline ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)])])]),_:1}),s(a(z),null,{default:r(()=>[o.contrato.total_obligaciones&&o.contrato.total_obligaciones>0?(n(),c("div",ro,[e("div",no,[e("div",io,[e("div",lo,i(o.contrato.total_obligaciones),1),t[46]||(t[46]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Total",-1))]),e("div",co,[e("div",mo,i(o.contrato.obligaciones_pendientes),1),t[47]||(t[47]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Pendientes",-1))]),e("div",uo,[e("div",fo,i(o.contrato.obligaciones_cumplidas),1),t[48]||(t[48]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Cumplidas",-1))]),e("div",go,[e("div",vo,i(o.contrato.total_obligaciones>0?Math.round(o.contrato.obligaciones_cumplidas/o.contrato.total_obligaciones*100):0)+"% ",1),t[49]||(t[49]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Progreso",-1))])]),o.contrato.obligaciones&&o.contrato.obligaciones.length>0?(n(),c("div",xo,[t[52]||(t[52]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Obligaciones principales:",-1)),(n(!0),c(I,null,j(o.contrato.obligaciones,u=>(n(),c("div",{key:u.id,class:"border rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("div",bo,[e("div",yo,[e("h5",ho,i(u.titulo),1),u.descripcion?(n(),c("p",po,i(u.descripcion),1)):d("",!0),e("div",ko,[s(a(y),{variant:dt(u.estado),size:"sm"},{default:r(()=>[l(i(u.estado),1)]),_:2},1032,["variant"]),u.fecha_vencimiento?(n(),c("span",wo," Vence: "+i(new Date(u.fecha_vencimiento).toLocaleDateString()),1)):d("",!0),u.responsable?(n(),c("span",_o," Responsable: "+i(u.responsable.name),1)):d("",!0)])]),e("div",Co,[s(a(b),{href:m.route("admin.obligaciones.show",u.id)},{default:r(()=>[s(a(v),{size:"sm",variant:"ghost"},{default:r(()=>[...t[50]||(t[50]=[l("Ver",-1)])]),_:1})]),_:1},8,["href"]),h("obligaciones.edit")?(n(),f(a(b),{key:0,href:m.route("admin.obligaciones.edit",u.id)},{default:r(()=>[s(a(v),{size:"sm",variant:"ghost"},{default:r(()=>[...t[51]||(t[51]=[l("Editar",-1)])]),_:1})]),_:1},8,["href"])):d("",!0)])])]))),128))])):d("",!0),e("div",$o,[s(a(b),{href:m.route("admin.obligaciones.index",{contrato_id:o.contrato.id,vista:"arbol"}),class:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800"},{default:r(()=>[t[53]||(t[53]=l(" Ver árbol completo de obligaciones ",-1)),s(a(It),{class:"h-4 w-4 ml-1"})]),_:1},8,["href"])])])):(n(),c("div",Do,[s(a(L),{class:"h-12 w-12 mx-auto mb-3 text-gray-300"}),t[55]||(t[55]=e("p",null,"No hay obligaciones registradas para este contrato",-1)),t[56]||(t[56]=e("p",{class:"text-sm text-gray-400 mt-1"},"Las obligaciones te ayudan a hacer seguimiento de tareas y compromisos del contrato",-1)),h("obligaciones.create")?(n(),f(a(b),{key:0,href:m.route("admin.obligaciones.create",{contrato_id:o.contrato.id}),class:"mt-3 inline-block"},{default:r(()=>[s(a(v),{size:"sm",variant:"default"},{default:r(()=>[s(a(Z),{class:"h-4 w-4 mr-1"}),t[54]||(t[54]=l(" Crear Primera Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)]))]),_:1})]),_:1})]),_:1})]}),_:1},8,["modelValue"])])])]),_:1}))}});export{Ma as default};
