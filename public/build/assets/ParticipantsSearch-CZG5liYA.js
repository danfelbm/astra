import{_ as C}from"./createLucideIcon-BfVy0SFr.js";import{a as P,b as $,c as q,_ as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-CfXCxct6.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-R8khDAHy.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-DloUOX4w.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-B6qLE2NP.js";import{a as v,_}from"./index-BaCJCCFv.js";import{_ as b}from"./AlertTitle.vue_vue_type_script_setup_true_lang-D9JrfKQx.js";import{d as K,k as g,a as y,o as i,b as s,f as t,u as a,m as T,t as c,i as x,e as l,g as o,j as f,q as U}from"./app-DDSU5uN7.js";import{C as j}from"./calendar-BerL1z25.js";import{M as F}from"./map-pin-4Kefx8iA.js";import{I as E}from"./info-mlX-dq0y.js";import{S as V}from"./search-D6-CBIl5.js";import{L as O}from"./loader-circle-DsF-i-yL.js";import{C as R}from"./circle-x-CjVX7zYh.js";import{C as X}from"./circle-check-big-Yv2DJF0V.js";import{f as A,e as G}from"./es-DfN3vIXC.js";const H={class:"min-h-screen bg-gray-50"},J={class:"bg-white shadow-sm border-b"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},W={class:"flex flex-col gap-4"},Y={class:"text-2xl font-bold text-gray-900"},Z={class:"flex flex-wrap gap-4 text-sm text-gray-600"},aa={class:"flex items-center gap-1"},ea={key:0,class:"flex items-center gap-1"},sa={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},la={class:"space-y-4"},ta={class:"space-y-2"},ra={class:"flex gap-2"},oa={key:1,class:"mt-6"},ka=K({__name:"ParticipantsSearch",props:{asamblea:{}},setup(S){const I=S,u=g(""),p=g(!1),n=g(null),d=g(""),h=r=>r?A(new Date(r),"PPP",{locale:G}):"",w=async()=>{var r,e;if(!u.value||u.value.length<3){d.value="Por favor ingrese al menos 3 caracteres para buscar.",n.value=null;return}d.value="",n.value=null,p.value=!0;try{const m=await U.post(`/api/asambleas/${I.asamblea.id}/buscar-participante`,{search:u.value});n.value=m.data}catch(m){if(console.error("Error buscando participante:",m),((r=m.response)==null?void 0:r.status)===422){const k=m.response.data.errors;d.value=k.search?k.search[0]:"Error en la búsqueda."}else((e=m.response)==null?void 0:e.status)===404?d.value="La búsqueda no está disponible en este momento.":d.value="Ocurrió un error al realizar la búsqueda. Por favor intente nuevamente."}finally{p.value=!1}},L=()=>{u.value="",n.value=null,d.value=""},N=r=>{r.key==="Enter"&&w()};return(r,e)=>(i(),y("div",null,[s(a(T),{title:`Buscar Participantes - ${r.asamblea.nombre}`},null,8,["title"]),t("div",H,[t("div",J,[t("div",Q,[t("div",W,[t("h1",Y,c(r.asamblea.nombre),1),t("div",Z,[t("div",aa,[s(a(j),{class:"h-4 w-4"}),t("span",null,c(h(r.asamblea.fecha_inicio))+" - "+c(h(r.asamblea.fecha_fin)),1)]),r.asamblea.lugar?(i(),y("div",ea,[s(a(F),{class:"h-4 w-4"}),t("span",null,c(r.asamblea.ubicacion_completa),1)])):x("",!0)])])])]),t("div",sa,[s(a(_),{class:"mb-6"},{default:l(()=>[s(a(E),{class:"h-4 w-4"}),s(a(b),null,{default:l(()=>e[1]||(e[1]=[o("Verificación de Participantes")])),_:1}),s(a(v),null,{default:l(()=>e[2]||(e[2]=[o(" Utilice este buscador para verificar si una persona está registrada como participante de la asamblea. Puede buscar por nombre completo o número de documento de identidad (cédula). ")])),_:1})]),_:1}),s(a(B),null,{default:l(()=>[s(a(P),null,{default:l(()=>[s(a($),null,{default:l(()=>[s(a(V),{class:"inline-block mr-2 h-5 w-5"}),e[3]||(e[3]=o(" Buscar Participante "))]),_:1}),s(a(z),null,{default:l(()=>e[4]||(e[4]=[o(" Ingrese los datos de la persona que desea verificar ")])),_:1})]),_:1}),s(a(q),null,{default:l(()=>[t("div",la,[t("div",ta,[s(a(D),{for:"search"},{default:l(()=>e[5]||(e[5]=[o("Búsqueda")])),_:1}),t("div",ra,[s(a(M),{id:"search",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),type:"text",placeholder:"Ingrese nombre completo o número de cédula...",class:"flex-1",onKeydown:N,disabled:p.value},null,8,["modelValue","disabled"]),s(a(C),{onClick:w,disabled:p.value||!u.value},{default:l(()=>[p.value?(i(),f(a(O),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(i(),f(a(V),{key:1,class:"mr-2 h-4 w-4"})),e[6]||(e[6]=o(" Buscar "))]),_:1},8,["disabled"]),u.value||n.value?(i(),f(a(C),{key:0,variant:"outline",onClick:L},{default:l(()=>e[7]||(e[7]=[o(" Limpiar ")])),_:1})):x("",!0)]),e[8]||(e[8]=t("p",{class:"text-xs text-muted-foreground"}," Mínimo 3 caracteres. La búsqueda es sensible a mayúsculas y minúsculas. ",-1))]),d.value?(i(),f(a(_),{key:0,variant:"destructive"},{default:l(()=>[s(a(R),{class:"h-4 w-4"}),s(a(b),null,{default:l(()=>e[9]||(e[9]=[o("Error")])),_:1}),s(a(v),null,{default:l(()=>[o(c(d.value),1)]),_:1})]),_:1})):x("",!0),n.value?(i(),y("div",oa,[n.value.found?(i(),f(a(_),{key:0,class:"border-green-200 bg-green-50"},{default:l(()=>[s(a(X),{class:"h-4 w-4 text-green-600"}),s(a(b),{class:"text-green-800"},{default:l(()=>e[10]||(e[10]=[o("Participante Confirmado")])),_:1}),s(a(v),{class:"text-green-700"},{default:l(()=>[o(c(n.value.message),1)]),_:1})]),_:1})):(i(),f(a(_),{key:1,class:"border-orange-200 bg-orange-50"},{default:l(()=>[s(a(E),{class:"h-4 w-4 text-orange-600"}),s(a(b),{class:"text-orange-800"},{default:l(()=>e[11]||(e[11]=[o("No Encontrado")])),_:1}),s(a(v),{class:"text-orange-700"},{default:l(()=>[o(c(n.value.message),1)]),_:1})]),_:1}))])):x("",!0)])]),_:1})]),_:1}),s(a(B),{class:"mt-6"},{default:l(()=>[s(a(P),null,{default:l(()=>[s(a($),{class:"text-base"},{default:l(()=>e[12]||(e[12]=[o("Información Importante")])),_:1})]),_:1}),s(a(q),null,{default:l(()=>e[13]||(e[13]=[t("ul",{class:"list-disc list-inside space-y-2 text-sm text-gray-600"},[t("li",null,"La búsqueda solo confirmará si una persona es participante o no."),t("li",null,"No se mostrará información personal adicional de los participantes."),t("li",null,"Para búsquedas exactas, use el documento de identidad completo."),t("li",null,"Si tiene dudas sobre su participación, contacte a la organización.")],-1)])),_:1})]),_:1}),e[14]||(e[14]=t("div",{class:"mt-6 text-center text-sm text-gray-500"},[t("p",null,"Esta herramienta de verificación respeta la privacidad de los participantes."),t("p",{class:"mt-1"}," Para más información sobre la asamblea, contacte a la organización. ")],-1))])])]))}});export{ka as default};
