import{_ as me}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D6SB2cu7.js";import{r as j,s as E,d as ee,c as U,b as y,w as r,j as g,e as o,f as a,g as s,i as b,h as m,t as d,v as B,n as _,F as L,k as K,m as l,p as fe,q as ye,x as ge}from"./app-Dh3nIFdW.js";import{a as D,b as T,c as S,_ as H}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bq80RZJS.js";import{_ as te}from"./CardDescription.vue_vue_type_script_setup_true_lang-DdBhBtVk.js";import{_ as C}from"./createLucideIcon-DQCWrJyc.js";import{_ as A}from"./index-BKmJBxhI.js";import{_ as ae}from"./Progress.vue_vue_type_script_setup_true_lang-BOmayhyu.js";import{_ as pe,a as ve,b as I,c as M}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BNm9FwC_.js";import{t as P}from"./index-BAfe0THa.js";import{E as xe}from"./EtiquetaDisplay-D6MjNS8T.js";import{E as he}from"./EtiquetaSelector-rEyn0kFW.js";import{_ as be}from"./ContratosList.vue_vue_type_script_setup_true_lang-DQFUClB3.js";import{M as we,_ as Ee,B as $e,C as ke}from"./EvidenciasDisplay.vue_vue_type_script_setup_true_lang-65BRbEtF.js";import{_ as qe,a as Ce}from"./ActivityLog.vue_vue_type_script_setup_true_lang-C9ebFJlk.js";import{L as Se,H as He}from"./HitoCard-D0U089je.js";import{T as X}from"./target-0RMYPkXY.js";import{P as R}from"./plus-T3vB_If6.js";import{S as Q}from"./square-pen-Y5T8IEbU.js";import{T as Pe}from"./trash-2-DemhTqty.js";import{I as De}from"./info-Dez7_o2a.js";import{F as W}from"./file-text-C-YuBndB.js";import{I as Te}from"./image-D_k7ju68.js";import{A as Ve}from"./activity-DvjNiVb8.js";import{F as Be}from"./flag-DBfvVmQy.js";import{C as Y}from"./calendar-BpsUzAhU.js";import{C as Ae}from"./clock-AHYyNYmT.js";import{U as Z}from"./user-DeIkTTlE.js";import{C as je}from"./circle-check-big-Dl3CPUEP.js";import{C as ze}from"./circle-play-gHt8kLZo.js";import{C as Ie}from"./circle-alert-B4CYStkJ.js";import"./useFlashMessages-CraGKbiN.js";import"./index-BlvY_owt.js";import"./floating-ui.vue-DZXls6t8.js";import"./x-BHPvN6Kg.js";import"./Input.vue_vue_type_script_setup_true_lang-BFHrSlVO.js";import"./index-NxC0VgQd.js";import"./index-ejReOMRs.js";import"./shield-BnNhU1iz.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DcV35leK.js";import"./chevron-right-djUHIvyC.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CJ0dwwtD.js";import"./VisuallyHidden-rujXZyfU.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DCMKMl1Q.js";import"./check-C4VQSuao.js";import"./Label.vue_vue_type_script_setup_true_lang-Bl5S1g8y.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-BE_YfkrJ.js";import"./map-pin-CevPDaEP.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DFAPJwJ0.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BO0fpMfv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-DQ7z2Xxc.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CzknpEn5.js";import"./tag-LwhazRsU.js";import"./users-DrxOMlye.js";import"./vote-ZYKjrp_9.js";import"./folder-open-W3sCX0tD.js";import"./send-B47sbYv_.js";import"./briefcase-DqiAoAwW.js";import"./megaphone-CSKscB9X.js";import"./user-check-aLnahkWn.js";import"./clipboard-list-9yceRouq.js";import"./mail-nz6sJeow.js";import"./message-square-B5NaUg-a.js";import"./external-link-cKH-h1AK.js";import"./panel-left-47l3Q_0z.js";import"./index-BzzxxYV7.js";import"./RovingFocusItem-0r4VoeZS.js";import"./utils-B4hwSsb6.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CQ-EPblz.js";import"./layers-DDn6mSyA.js";import"./zap-DqVL2s92.js";import"./trending-up-ZbcJ8qUv.js";import"./award-DpkvLaB9.js";import"./hash-BqEQ2-3j.js";import"./index-BCYyHygk.js";import"./search-BrtpfVkq.js";import"./useKbd-kRIii9yh.js";import"./VisuallyHiddenInput-Dd5dXEL7.js";import"./useEtiquetaHierarchy-BeGj72RJ.js";import"./list-2twaWFVy.js";import"./tree-pine-BZas5-WA.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BvzpgGdW.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-D4sFKRZc.js";import"./useToast-gPk9c6NY.js";import"./dollar-sign-DpTnElO1.js";import"./ellipsis-s3FJZFj1.js";import"./eye-CtXurWMS.js";import"./download-DcmmPV1P.js";import"./copy-DNb6fTI6.js";import"./AccordionContent.vue_vue_type_script_setup_true_lang-2p-t6h0Z.js";import"./useArrowNavigation-B5rxJs06.js";import"./Textarea.vue_vue_type_script_setup_true_lang-CmCPjGZ2.js";import"./filter-Etfi2VyU.js";import"./es-BDPlFIsO.js";import"./parseISO-DFjB8F03.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-DZMJdREe.js";import"./pen-DGKNjads.js";import"./calendar-days-CY55n1sD.js";function Me(){const e=j(!1),n=j(null);async function z(p,u){return e.value=!0,n.value=null,new Promise((x,w)=>{E.post(`/admin/proyectos/${p}/etiquetas`,{etiqueta_id:u},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,n.value=Object.values(h).join(", "),w(h)}})})}async function N(p,u){return e.value=!0,n.value=null,new Promise((x,w)=>{E.delete(`/admin/proyectos/${p}/etiquetas/${u}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,n.value="Error al quitar la etiqueta",w(h)}})})}async function k(p,u){return e.value=!0,n.value=null,new Promise((x,w)=>{E.put(`/admin/proyectos/${p}/etiquetas/sync`,{etiquetas:u},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,n.value="Error al sincronizar etiquetas",w(h)}})})}async function v(p){e.value=!0,n.value=null;try{const u=await fetch(`/admin/proyectos/${p}/etiquetas/suggest`);if(!u.ok)throw new Error("Error al obtener sugerencias");const x=await u.json();return e.value=!1,x.etiquetas||[]}catch(u){return e.value=!1,n.value="Error al obtener sugerencias de etiquetas",console.error(u),[]}}async function f(p){var u;e.value=!0,n.value=null;try{const x=await fetch("/admin/etiquetas",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((u=document.querySelector('meta[name="csrf-token"]'))==null?void 0:u.getAttribute("content"))||""},body:JSON.stringify(p)});if(!x.ok){const h=await x.json();throw new Error(h.message||"Error al crear etiqueta")}const w=await x.json();return e.value=!1,w.data}catch(x){return e.value=!1,n.value=x.message||"Error al crear etiqueta",console.error(x),null}}async function $(p){if(p.length<2)return[];try{const u=await fetch(`/admin/etiquetas/search?q=${encodeURIComponent(p)}`);if(!u.ok)throw new Error("Error al buscar etiquetas");return(await u.json()).data||[]}catch(u){return console.error("Error buscando etiquetas:",u),[]}}function V(p){const u=new Map;return p.forEach(x=>{var h;const w=((h=x.categoria)==null?void 0:h.nombre)||"Sin categoría";u.has(w)||u.set(w,[]),u.get(w).push(x)}),u}function G(p){var u;return p.color||((u=p.categoria)==null?void 0:u.color)||"gray"}function F(p,u=10){return p<u}async function O(p,u){return e.value=!0,n.value=null,new Promise((x,w)=>{E.post(`/admin/proyectos/${p}/etiquetas/reorder`,{etiquetas:u},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{e.value=!1,x(!0)},onError:h=>{e.value=!1,n.value="Error al reordenar etiquetas",w(h)}})})}return{isLoading:e,error:n,addEtiquetaToProyecto:z,removeEtiquetaFromProyecto:N,syncEtiquetasProyecto:k,getSugerenciasEtiquetas:v,reorderEtiquetas:O,createEtiqueta:f,searchEtiquetas:$,groupEtiquetasByCategoria:V,getEtiquetaColor:G,canAddMoreEtiquetas:F}}const Ne={key:0,class:"flex items-center gap-2"},Fe={key:0,class:"mb-6"},_e={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},Le={class:"text-center"},Ue={class:"text-2xl font-bold"},Re={class:"text-center"},Ge={class:"text-2xl font-bold text-blue-500"},Oe={class:"text-center"},Je={class:"text-2xl font-bold text-green-500"},Ke={class:"text-center"},Xe={class:"space-y-2"},Qe={class:"flex justify-between items-center text-sm"},We={class:"font-medium"},Ye={key:1,class:"space-y-4"},Ze={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},et={key:2,class:"text-center py-6"},tt={class:"text-muted-foreground mb-3"},at=ee({__name:"HitosGrid",props:{hitos:{},proyectoId:{},proyectoNombre:{},estadisticas:{},showStats:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},showViewAll:{type:Boolean,default:!0},maxHitos:{default:void 0},canCreate:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canManageDeliverables:{type:Boolean,default:!1},emptyMessage:{default:"No hay hitos definidos para este proyecto"}},emits:["view","edit","delete","duplicate","add-entregable","view-entregables"],setup(e){const n=e,z=U(()=>n.maxHitos&&n.maxHitos>0?n.hitos.slice(0,n.maxHitos):n.hitos),N=U(()=>n.maxHitos&&n.hitos.length>n.maxHitos);return(k,v)=>(l(),y(a(H),null,{default:r(()=>[e.showHeader?(l(),y(a(D),{key:0,class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s("div",null,[o(a(T),{class:"flex items-center gap-2"},{default:r(()=>[o(a(X),{class:"h-5 w-5"}),v[0]||(v[0]=m(" Hitos y Entregables ",-1))]),_:1}),e.proyectoNombre?(l(),y(a(te),{key:0},{default:r(()=>[m(d(e.proyectoNombre),1)]),_:1})):g("",!0)]),e.showActions?(l(),b("div",Ne,[e.showViewAll&&e.hitos.length>0?(l(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos`},{default:r(()=>[o(a(C),{variant:"outline",size:"sm"},{default:r(()=>[o(a(Se),{class:"h-4 w-4 mr-2"}),v[1]||(v[1]=m(" Ver Todos ",-1))]),_:1})]),_:1},8,["href"])):g("",!0),e.canCreate?(l(),y(a(B),{key:1,href:`/admin/proyectos/${e.proyectoId}/hitos/create`},{default:r(()=>[o(a(C),{size:"sm"},{default:r(()=>[o(a(R),{class:"h-4 w-4 mr-2"}),v[2]||(v[2]=m(" Nuevo Hito ",-1))]),_:1})]),_:1},8,["href"])):g("",!0)])):g("",!0)]),_:1})):g("",!0),o(a(S),null,{default:r(()=>[e.showStats&&e.estadisticas&&e.estadisticas.total>0?(l(),b("div",Fe,[s("div",_e,[s("div",Le,[s("p",Ue,d(e.estadisticas.total),1),v[3]||(v[3]=s("p",{class:"text-xs text-muted-foreground"},"Total Hitos",-1))]),s("div",Re,[s("p",Ge,d(e.estadisticas.en_progreso),1),v[4]||(v[4]=s("p",{class:"text-xs text-muted-foreground"},"En Progreso",-1))]),s("div",Oe,[s("p",Je,d(e.estadisticas.completados),1),v[5]||(v[5]=s("p",{class:"text-xs text-muted-foreground"},"Completados",-1))]),s("div",Ke,[s("p",{class:_(["text-2xl font-bold",{"text-red-500":e.estadisticas.vencidos>0}])},d(e.estadisticas.vencidos),3),v[6]||(v[6]=s("p",{class:"text-xs text-muted-foreground"},"Vencidos",-1))])]),s("div",Xe,[s("div",Qe,[v[7]||(v[7]=s("span",{class:"text-muted-foreground"},"Progreso General",-1)),s("span",We,d(e.estadisticas.progreso_general)+"%",1)]),o(a(ae),{value:e.estadisticas.progreso_general,class:"h-2"},null,8,["value"])])])):g("",!0),e.hitos.length>0?(l(),b("div",Ye,[s("div",Ze,[(l(!0),b(L,null,K(z.value,f=>(l(),y(He,{key:f.id,hito:f,canEdit:e.canEdit,canDelete:e.canDelete,canManageDeliverables:e.canManageDeliverables,showActions:!0,onView:$=>k.$emit("view",f),onEdit:$=>k.$emit("edit",f),onDelete:$=>k.$emit("delete",f),onDuplicate:$=>k.$emit("duplicate",f),onAddEntregable:$=>k.$emit("add-entregable",f),onViewEntregables:$=>k.$emit("view-entregables",f)},null,8,["hito","canEdit","canDelete","canManageDeliverables","onView","onEdit","onDelete","onDuplicate","onAddEntregable","onViewEntregables"]))),128))]),N.value?(l(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos`,class:"block text-center mt-4 text-sm text-primary hover:underline"},{default:r(()=>[m(" Ver todos los hitos ("+d(e.hitos.length)+") ",1)]),_:1},8,["href"])):g("",!0)])):(l(),b("div",et,[o(a(X),{class:"h-10 w-10 mx-auto text-muted-foreground mb-3"}),s("p",tt,d(e.emptyMessage),1),e.canCreate?(l(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyectoId}/hitos/create`},{default:r(()=>[o(a(C),{variant:"outline",size:"sm"},{default:r(()=>[o(a(R),{class:"h-4 w-4 mr-2"}),v[8]||(v[8]=m(" Crear Primer Hito ",-1))]),_:1})]),_:1},8,["href"])):g("",!0)]))]),_:1})]),_:1}))}}),ot={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},st={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},rt={class:"text-2xl font-bold text-gray-900 dark:text-white"},it={key:0,class:"mt-2 text-gray-600 dark:text-gray-400"},lt={class:"flex gap-2"},nt={class:"flex items-center justify-between"},ct={class:"flex items-center gap-3"},dt={class:"flex items-center gap-3"},ut={class:"space-y-2"},mt={class:"flex justify-between text-sm"},ft={class:"font-medium"},yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2"},gt={class:"flex items-start gap-3"},pt={class:"font-medium"},vt={class:"text-xs text-gray-500"},xt={key:0,class:"flex items-start gap-3"},ht={class:"font-medium"},bt={class:"text-xs text-gray-500"},wt={key:0,class:"flex items-center gap-3 pt-2"},Et={class:"font-medium ml-2"},$t={key:0},kt={key:1,class:"text-sm text-muted-foreground"},qt={key:1,class:"space-y-4"},Ct={class:"flex gap-2"},St={class:"space-y-4"},Ht={class:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1"},Pt={class:"text-gray-900 dark:text-gray-100"},Dt={key:0,class:"flex items-center gap-3"},Tt={class:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},Vt={class:"font-medium"},Bt={class:"text-sm text-gray-500"},At={key:1,class:"text-gray-500"},jt={class:"font-mono"},zt={class:"font-medium"},It={class:"text-sm"},Mt={class:"text-sm"},Nt={class:"space-y-3"},Ft={class:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},_t={class:"flex-1"},Lt={class:"text-sm"},Ut={class:"font-medium"},Rt={class:"text-xs text-gray-500 mt-1"},Gt={key:0,class:"flex justify-end"},Ot={class:"space-y-4"},Jt={class:"text-center"},No=ee({__name:"Show",props:{proyecto:{},categorias:{},activities:{},usuariosActividades:{},authPermissions:{},totales:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageTags:{type:Boolean},canViewContracts:{type:Boolean},canCreateContracts:{type:Boolean},canViewHitos:{type:Boolean},canCreateHitos:{type:Boolean},canEditHitos:{type:Boolean},canDeleteHitos:{type:Boolean},canManageEntregables:{type:Boolean},estadisticasHitos:{}},setup(e){const n=e,z=["general","contratos","hitos","evidencias","actividad"],k=j((()=>{const t=new URLSearchParams(window.location.search).get("tab");return t&&z.includes(t)?t:"general"})());fe(k,i=>{const t=`/admin/proyectos/${n.proyecto.id}?tab=${i}`;E.get(t,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const v=U(()=>{var i,t;return((i=n.authPermissions)==null?void 0:i.includes("evidencias.aprobar"))||((t=n.authPermissions)==null?void 0:t.includes("evidencias.rechazar"))||!1}),f=j({usuario_id:null,tipo_entidad:null,tipo_accion:null,fecha_inicio:null,fecha_fin:null}),$=j(!1),V=j([]),{syncEtiquetasProyecto:G,isLoading:F}=Me();n.proyecto.etiquetas&&(V.value=n.proyecto.etiquetas.map(i=>i.id));const O=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:n.proyecto.nombre,href:`/admin/proyectos/${n.proyecto.id}`}],p=()=>{confirm(`¿Estás seguro de eliminar el proyecto "${n.proyecto.nombre}"?`)&&E.delete(`/admin/proyectos/${n.proyecto.id}`,{onSuccess:()=>{P.success("Proyecto eliminado exitosamente")},onError:()=>{P.error("Error al eliminar el proyecto")}})},u=i=>({planificacion:X,en_progreso:ze,pausado:ke,completado:je,cancelado:$e})[i]||Ie,x=i=>({planificacion:"bg-blue-100 text-blue-800",en_progreso:"bg-yellow-100 text-yellow-800",pausado:"bg-orange-100 text-orange-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",w=i=>({baja:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",critica:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",h=i=>new Date(i).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),J=i=>{const t=Math.floor((new Date(i).getTime()-new Date().getTime())/864e5);return t===0?"Hoy":t===1?"Mañana":t===-1?"Ayer":t>0?`En ${t} días`:`Hace ${Math.abs(t)} días`},oe=async()=>{try{await G(n.proyecto.id,V.value),$.value=!1,P.success("Etiquetas actualizadas exitosamente"),E.reload({only:["proyecto"]})}catch{P.error("Error al actualizar las etiquetas")}},se=()=>{var i;V.value=((i=n.proyecto.etiquetas)==null?void 0:i.map(t=>t.id))||[],$.value=!1},re=i=>{E.visit(`/admin/proyectos/${n.proyecto.id}/hitos/${i.id}`)},ie=i=>{E.visit(`/admin/proyectos/${n.proyecto.id}/hitos/${i.id}/edit`)},le=i=>{confirm(`¿Estás seguro de eliminar el hito "${i.nombre}"? Se eliminarán también todos sus entregables.`)&&E.delete(`/admin/proyectos/${n.proyecto.id}/hitos/${i.id}`,{onSuccess:()=>{P.success("Hito eliminado exitosamente"),E.reload({only:["proyecto"]})},onError:()=>{P.error("Error al eliminar el hito")}})},ne=i=>{E.post(`/admin/proyectos/${n.proyecto.id}/hitos/${i.id}/duplicar`,{},{onSuccess:()=>{P.success("Hito duplicado exitosamente"),E.reload({only:["proyecto"]})},onError:()=>{P.error("Error al duplicar el hito")}})},ce=i=>{E.visit(`/admin/proyectos/${n.proyecto.id}/hitos/${i.id}/entregables/create`)},de=i=>{E.visit(`/admin/proyectos/${n.proyecto.id}/hitos/${i.id}/entregables`)},ue=U(()=>{let i=n.activities||[];return f.value.usuario_id&&(i=i.filter(t=>{var c;return((c=t.causer)==null?void 0:c.id)===f.value.usuario_id})),f.value.tipo_entidad&&(i=i.filter(t=>t.subject_type===f.value.tipo_entidad)),f.value.tipo_accion&&(i=i.filter(t=>t.event===f.value.tipo_accion)),(f.value.fecha_inicio||f.value.fecha_fin)&&(i=i.filter(t=>{const c=new Date(t.created_at);if(f.value.fecha_inicio){const q=new Date(f.value.fecha_inicio);if(c<q)return!1}if(f.value.fecha_fin){const q=new Date(f.value.fecha_fin);if(q.setHours(23,59,59,999),c>q)return!1}return!0})),i});return(i,t)=>(l(),b(L,null,[o(a(ye),{title:`Proyecto: ${e.proyecto.nombre}`},null,8,["title"]),o(me,{breadcrumbs:O},{default:r(()=>[s("div",ot,[s("div",st,[s("div",null,[s("h1",rt,d(e.proyecto.nombre),1),e.proyecto.descripcion?(l(),b("p",it,d(e.proyecto.descripcion),1)):g("",!0)]),s("div",lt,[e.canEdit?(l(),y(a(B),{key:0,href:`/admin/proyectos/${e.proyecto.id}/edit`},{default:r(()=>[o(a(C),null,{default:r(()=>[o(a(Q),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=m(" Editar ",-1))]),_:1})]),_:1},8,["href"])):g("",!0),e.canDelete?(l(),y(a(C),{key:1,variant:"destructive",onClick:p},{default:r(()=>[o(a(Pe),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=m(" Eliminar ",-1))]),_:1})):g("",!0)])]),o(a(pe),{modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=c=>k.value=c),class:"w-full"},{default:r(()=>[o(a(ve),{class:"grid w-full grid-cols-5"},{default:r(()=>[o(a(I),{value:"general"},{default:r(()=>[o(a(De),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=m(" General ",-1))]),_:1}),o(a(I),{value:"contratos"},{default:r(()=>{var c;return[o(a(W),{class:"mr-2 h-4 w-4"}),t[7]||(t[7]=m(" Contratos ",-1)),(c=e.totales)!=null&&c.contratos?(l(),y(a(A),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:r(()=>[m(d(e.totales.contratos),1)]),_:1})):g("",!0)]}),_:1}),o(a(I),{value:"hitos"},{default:r(()=>{var c;return[o(a(we),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=m(" Hitos y Entregables ",-1)),(c=e.totales)!=null&&c.hitos?(l(),y(a(A),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:r(()=>[m(d(e.totales.hitos),1)]),_:1})):g("",!0)]}),_:1}),o(a(I),{value:"evidencias"},{default:r(()=>{var c;return[o(a(Te),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=m(" Evidencias ",-1)),(c=e.totales)!=null&&c.evidencias?(l(),y(a(A),{key:0,class:"ml-2 h-5 px-1.5",variant:"secondary"},{default:r(()=>[m(d(e.totales.evidencias),1)]),_:1})):g("",!0)]}),_:1}),o(a(I),{value:"actividad"},{default:r(()=>[o(a(Ve),{class:"mr-2 h-4 w-4"}),t[10]||(t[10]=m(" Actividad ",-1))]),_:1})]),_:1}),o(a(M),{value:"general",class:"space-y-4 mt-6"},{default:r(()=>[o(a(H),null,{default:r(()=>[o(a(D),null,{default:r(()=>[o(a(T),null,{default:r(()=>[...t[11]||(t[11]=[m("Estado del Proyecto",-1)])]),_:1})]),_:1}),o(a(S),{class:"space-y-4"},{default:r(()=>[s("div",nt,[s("div",ct,[(l(),y(ge(u(e.proyecto.estado)),{class:"h-5 w-5 text-gray-500"})),t[12]||(t[12]=s("span",{class:"font-medium"},"Estado:",-1)),o(a(A),{class:_(x(e.proyecto.estado))},{default:r(()=>[m(d(e.proyecto.estado_label),1)]),_:1},8,["class"])]),s("div",dt,[o(a(Be),{class:"h-5 w-5 text-gray-500"}),t[13]||(t[13]=s("span",{class:"font-medium"},"Prioridad:",-1)),o(a(A),{class:_(w(e.proyecto.prioridad))},{default:r(()=>[m(d(e.proyecto.prioridad_label),1)]),_:1},8,["class"])])]),s("div",ut,[s("div",mt,[t[14]||(t[14]=s("span",{class:"text-gray-600 dark:text-gray-400"},"Progreso",-1)),s("span",ft,d(e.proyecto.porcentaje_completado)+"%",1)]),o(a(ae),{"model-value":e.proyecto.porcentaje_completado,class:"h-2"},null,8,["model-value"])]),s("div",yt,[s("div",gt,[o(a(Y),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[t[15]||(t[15]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Fecha de inicio",-1)),s("p",pt,d(h(e.proyecto.fecha_inicio)),1),s("p",vt,d(J(e.proyecto.fecha_inicio)),1)])]),e.proyecto.fecha_fin?(l(),b("div",xt,[o(a(Y),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[t[16]||(t[16]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Fecha de fin",-1)),s("p",ht,d(h(e.proyecto.fecha_fin)),1),s("p",bt,d(J(e.proyecto.fecha_fin)),1)])])):g("",!0)]),e.proyecto.duracion_dias?(l(),b("div",wt,[o(a(Ae),{class:"h-5 w-5 text-gray-500"}),s("div",null,[t[17]||(t[17]=s("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Duración total:",-1)),s("span",Et,d(e.proyecto.duracion_dias)+" días",1)])])):g("",!0)]),_:1})]),_:1}),o(a(H),null,{default:r(()=>[o(a(D),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[o(a(T),null,{default:r(()=>[...t[18]||(t[18]=[m(" Etiquetas ",-1)])]),_:1}),e.canManageTags&&!$.value?(l(),y(a(C),{key:0,variant:"ghost",size:"sm",onClick:t[0]||(t[0]=c=>$.value=!0)},{default:r(()=>[o(a(Q),{class:"h-4 w-4"})]),_:1})):g("",!0)]),_:1}),o(a(S),null,{default:r(()=>[$.value?(l(),b("div",qt,[e.categorias?(l(),y(he,{key:0,modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=c=>V.value=c),categorias:e.categorias,"max-etiquetas":10,placeholder:"Seleccionar etiquetas...",description:"Selecciona hasta 10 etiquetas para este proyecto"},null,8,["modelValue","categorias"])):g("",!0),s("div",Ct,[o(a(C),{size:"sm",onClick:oe,disabled:a(F)},{default:r(()=>[...t[19]||(t[19]=[m(" Guardar ",-1)])]),_:1},8,["disabled"]),o(a(C),{size:"sm",variant:"outline",onClick:se,disabled:a(F)},{default:r(()=>[...t[20]||(t[20]=[m(" Cancelar ",-1)])]),_:1},8,["disabled"])])])):(l(),b("div",$t,[e.proyecto.etiquetas&&e.proyecto.etiquetas.length>0?(l(),y(xe,{key:0,etiquetas:e.proyecto.etiquetas,"show-categoria":!0,interactive:!0,size:"md"},null,8,["etiquetas"])):(l(),b("p",kt," No hay etiquetas asignadas "))]))]),_:1})]),_:1}),e.proyecto.campos_personalizados&&e.proyecto.campos_personalizados.length>0?(l(),y(a(H),{key:0},{default:r(()=>[o(a(D),null,{default:r(()=>[o(a(T),null,{default:r(()=>[...t[21]||(t[21]=[m("Campos Personalizados",-1)])]),_:1})]),_:1}),o(a(S),null,{default:r(()=>[s("div",St,[(l(!0),b(L,null,K(e.proyecto.campos_personalizados,c=>{var q;return l(),b("div",{key:c.id,class:"py-2 border-b last:border-b-0"},[s("p",Ht,d((q=c.campo_personalizado)==null?void 0:q.nombre),1),s("p",Pt,d(c.valor_formateado||c.valor||"-"),1)])}),128))])]),_:1})]),_:1})):g("",!0),o(a(H),null,{default:r(()=>[o(a(D),null,{default:r(()=>[o(a(T),null,{default:r(()=>[...t[22]||(t[22]=[m("Responsable",-1)])]),_:1})]),_:1}),o(a(S),null,{default:r(()=>[e.proyecto.responsable?(l(),b("div",Dt,[s("div",Tt,[o(a(Z),{class:"h-5 w-5 text-gray-500"})]),s("div",null,[s("p",Vt,d(e.proyecto.responsable.name),1),s("p",Bt,d(e.proyecto.responsable.email),1)])])):(l(),b("p",At,"Sin asignar"))]),_:1})]),_:1}),o(a(H),null,{default:r(()=>[o(a(D),null,{default:r(()=>[o(a(T),null,{default:r(()=>[...t[23]||(t[23]=[m("Información del Sistema",-1)])]),_:1})]),_:1}),o(a(S),{class:"space-y-3"},{default:r(()=>{var c;return[s("div",null,[t[24]||(t[24]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"ID del Proyecto",-1)),s("p",jt,"#"+d(e.proyecto.id),1)]),s("div",null,[t[25]||(t[25]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Estado",-1)),o(a(A),{class:_(e.proyecto.activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")},{default:r(()=>[m(d(e.proyecto.activo?"Activo":"Inactivo"),1)]),_:1},8,["class"])]),s("div",null,[t[26]||(t[26]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Creado por",-1)),s("p",zt,d(((c=e.proyecto.creador)==null?void 0:c.name)||"Sistema"),1)]),s("div",null,[t[27]||(t[27]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Fecha de creación",-1)),s("p",It,d(h(e.proyecto.created_at)),1)]),s("div",null,[t[28]||(t[28]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Última actualización",-1)),s("p",Mt,d(h(e.proyecto.updated_at)),1)])]}),_:1})]),_:1}),e.proyecto.activities&&e.proyecto.activities.length>0?(l(),y(a(H),{key:1},{default:r(()=>[o(a(D),null,{default:r(()=>[o(a(T),null,{default:r(()=>[...t[29]||(t[29]=[m("Actividad Reciente",-1)])]),_:1})]),_:1}),o(a(S),null,{default:r(()=>[s("div",Nt,[(l(!0),b(L,null,K(e.proyecto.activities,c=>{var q;return l(),b("div",{key:c.id,class:"flex items-start gap-3 pb-3 border-b last:border-b-0"},[s("div",Ft,[o(a(Z),{class:"h-4 w-4 text-gray-500"})]),s("div",_t,[s("p",Lt,[s("span",Ut,d(((q=c.causer)==null?void 0:q.name)||"Sistema"),1),m(" "+d(c.description),1)]),s("p",Rt,d(J(c.created_at)),1)])])}),128))])]),_:1})]),_:1})):g("",!0)]),_:1}),o(a(M),{value:"contratos",class:"space-y-4 mt-6"},{default:r(()=>[e.canCreateContracts?(l(),b("div",Gt,[o(a(B),{href:`/admin/contratos/create?proyecto_id=${e.proyecto.id}`},{default:r(()=>[o(a(C),null,{default:r(()=>[o(a(R),{class:"mr-2 h-4 w-4"}),t[30]||(t[30]=m(" Nuevo Contrato ",-1))]),_:1})]),_:1},8,["href"])])):g("",!0),e.proyecto.contratos&&e.proyecto.contratos.length>0?(l(),y(a(H),{key:1},{default:r(()=>[o(a(D),null,{default:r(()=>[o(a(T),null,{default:r(()=>[...t[31]||(t[31]=[m("Contratos del Proyecto",-1)])]),_:1}),o(a(te),null,{default:r(()=>[...t[32]||(t[32]=[m(" Lista de contratos asociados a este proyecto ",-1)])]),_:1})]),_:1}),o(a(S),null,{default:r(()=>[s("div",Ot,[o(be,{contratos:e.proyecto.contratos,"show-proyecto":!1,"show-actions":!0,"actions-style":"buttons"},null,8,["contratos"])])]),_:1})]),_:1})):(l(),y(a(H),{key:2},{default:r(()=>[o(a(S),{class:"py-8"},{default:r(()=>[s("div",Jt,[o(a(W),{class:"mx-auto h-12 w-12 text-gray-400"}),t[34]||(t[34]=s("p",{class:"mt-2 text-sm text-gray-600"},"No hay contratos asociados",-1)),e.canCreateContracts?(l(),y(a(B),{key:0,href:`/admin/contratos/create?proyecto_id=${e.proyecto.id}`,class:"mt-4 inline-block"},{default:r(()=>[o(a(C),{variant:"outline"},{default:r(()=>[o(a(R),{class:"mr-2 h-4 w-4"}),t[33]||(t[33]=m(" Crear primer contrato ",-1))]),_:1})]),_:1},8,["href"])):g("",!0)])]),_:1})]),_:1}))]),_:1}),o(a(M),{value:"hitos",class:"space-y-4 mt-6"},{default:r(()=>[e.canViewHitos?(l(),y(at,{key:0,hitos:e.proyecto.hitos||[],"proyecto-id":e.proyecto.id,estadisticas:e.estadisticasHitos,"show-stats":!0,"show-header":!0,"show-actions":!0,"show-view-all":!0,"can-create":e.canCreateHitos,"can-edit":e.canEditHitos,"can-delete":e.canDeleteHitos,"can-manage-deliverables":e.canManageEntregables,"empty-message":"No hay hitos definidos para este proyecto",onView:re,onEdit:ie,onDelete:le,onDuplicate:ne,onAddEntregable:ce,onViewEntregables:de},null,8,["hitos","proyecto-id","estadisticas","can-create","can-edit","can-delete","can-manage-deliverables"])):g("",!0)]),_:1}),o(a(M),{value:"evidencias",class:"space-y-4 mt-6"},{default:r(()=>[o(Ee,{contratos:e.proyecto.contratos||[],"proyecto-id":e.proyecto.id,modo:"admin","puede-gestionar-estado":v.value,"format-date":h},null,8,["contratos","proyecto-id","puede-gestionar-estado"])]),_:1}),o(a(M),{value:"actividad",class:"space-y-4 mt-6"},{default:r(()=>[e.activities&&e.activities.length>0?(l(),y(qe,{key:0,modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=c=>f.value=c),usuarios:e.usuariosActividades,"context-level":"proyecto"},null,8,["modelValue","usuarios"])):g("",!0),o(Ce,{activities:ue.value,title:"Historial de Actividad",description:"Registro completo de cambios y eventos del proyecto, hitos y entregables","empty-message":"No hay actividad registrada"},null,8,["activities"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{No as default};
