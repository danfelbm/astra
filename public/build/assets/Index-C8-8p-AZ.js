import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Ds5Yb68h.js";import{d as Z,c as ee,r as L,p as j,i as y,e as t,f as e,q as te,w as s,g as i,j as b,v as M,h as l,m as r,F as h,k as E,b as m,t as p,n as B,x as ae,s as V}from"./app-B8jLIquf.js";import{_ as U,c as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-CwvDUtJA.js";import{c as se,_}from"./createLucideIcon-CoRxGeMz.js";import{_ as oe}from"./Input.vue_vue_type_script_setup_true_lang-D1BhiD8f.js";import{_ as k}from"./index-CI4aGeLr.js";import{_ as le}from"./Switch.vue_vue_type_script_setup_true_lang-DN9dNLrN.js";import{_ as re,a as ie,b as N,c as x,d as ne,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-B1DjGWZB.js";import{_ as D,a as R,b as O,c as G,d as w,e as de,C as ue}from"./SelectValue.vue_vue_type_script_setup_true_lang-D9pbqtVi.js";import{t as z}from"./index-BIFztAr4.js";import{P as me}from"./plus-VHk6R-DX.js";import{S as pe}from"./search-Bql3zAAR.js";import{S as fe}from"./square-pen-BQ7Rr2bB.js";import{T as ce}from"./trash-2-DvXkYhPp.js";import{F as ve}from"./file-DKIX_7Ab.js";import{S as _e}from"./square-check-big-nmAzFPZF.js";import{L as xe}from"./list-C5Xutk-r.js";import{F as ge}from"./file-text-BxT36rHH.js";import{C as ye}from"./calendar-DjVB9cun.js";import{H as be}from"./hash-BAjPPCdS.js";import{T as Ce}from"./type-Cf0SuSjt.js";import{S as ke}from"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-BQoIb-iH.js";import"./index-DsoRH3_1.js";import"./floating-ui.vue-CDqra15C.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-CcYYl75a.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-DUIj5-nr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-40KxJyU6.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-yEqYuGKr.js";import"./chevrons-up-down-DATvKK5h.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CtpK6IOL.js";import"./tag-BF3vhfWv.js";import"./users-S8AX2-Wm.js";import"./target-DMpZWzHm.js";import"./shield-BleVYcej.js";import"./vote-BsZDzqyH.js";import"./folder-open-C9XMhm5o.js";import"./send-DArdzb31.js";import"./briefcase-HN0MUFbh.js";import"./megaphone-C3_U7m_D.js";import"./user-check-Z5NneTb1.js";import"./clipboard-list-B5Tcs7Qu.js";import"./mail-B0-advyj.js";import"./message-square-BCI0N4Q4.js";import"./external-link-B9xWD9Tf.js";import"./panel-left-D_Nud89_.js";import"./check-D6Hm08tN.js";import"./index-BnsEjg8Z.js";import"./index-gUIEoC_C.js";import"./VisuallyHidden-c5G_Y1-F.js";import"./VisuallyHiddenInput-9I-8Ol0L.js";import"./x-Db305Yr4.js";import"./index-xH6fuIAq.js";import"./user-DXGm6IYr.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DoqjFrKn.js";import"./Label.vue_vue_type_script_setup_true_lang-nBWFi7Vu.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cuu9V0m-.js";import"./circle-alert-BEl5DoMm.js";import"./map-pin-VuOGBv30.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=se("RadioIcon",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),Se={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},he={class:"flex items-center justify-between"},we={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ze={class:"relative"},Te={class:"flex items-center gap-1"},Ve={class:"text-sm text-gray-500"},Fe={class:"font-medium"},Le={key:0,class:"text-xs text-gray-500"},Me={class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},Ee={class:"flex flex-wrap gap-1"},Ne={class:"flex justify-end gap-2"},Pe={key:0,class:"flex justify-center gap-2"},qe={class:"text-center text-sm text-gray-500"},At=Z({__name:"Index",props:{campos:{},filters:{},tiposCampo:{},tipos:{},entidadesDisponibles:{}},setup(c){const g=c,P=ee(()=>g.tiposCampo||g.tipos||{}),q=P,J=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:"Campos Personalizados",href:"/admin/campos-personalizados"}],$=L(g.filters.search||""),S=L(g.filters.tipo||""),C=L(g.filters.activo!==void 0?String(g.filters.activo):""),F=()=>{const d={search:$.value,tipo:S.value};C.value!==""&&(d.activo=C.value==="1"),V.get("/admin/campos-personalizados",d,{preserveState:!0,preserveScroll:!0})};let H;j($,()=>{clearTimeout(H),H=setTimeout(()=>{F()},500)}),j([S,C],()=>{F()});const K=d=>{confirm(`¿Estás seguro de eliminar el campo "${d.nombre}"?

Esto eliminará también todos los valores asociados en los proyectos.`)&&V.delete(`/admin/campos-personalizados/${d.id}`,{preserveScroll:!0,onSuccess:()=>{z.success("Campo personalizado eliminado exitosamente")},onError:()=>{z.error("No se puede eliminar el campo porque tiene valores asociados")}})},Q=(d,a)=>{V.patch(`/admin/campos-personalizados/${d.id}/toggle-activo`,{activo:a},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{z.success(`Campo ${a?"activado":"desactivado"} exitosamente`)},onError:()=>{z.error("Error al cambiar el estado del campo")}})},I=(d,a)=>{const o=g.campos.data,u=o.findIndex(n=>n.id===d.id);if(a==="up"&&u>0||a==="down"&&u<o.length-1){const n=a==="up"?u-1:u+1,v=o.map(T=>T.id);[v[u],v[n]]=[v[n],v[u]],V.post("/admin/campos-personalizados/reordenar",{orden:v},{preserveScroll:!0,onSuccess:()=>{z.success("Orden actualizado")}})}},W=d=>({text:Ce,number:be,date:ye,textarea:ge,select:xe,checkbox:_e,radio:$e,file:ve})[d]||ke,X=d=>({text:"bg-blue-100 text-blue-800",number:"bg-purple-100 text-purple-800",date:"bg-green-100 text-green-800",textarea:"bg-yellow-100 text-yellow-800",select:"bg-orange-100 text-orange-800",checkbox:"bg-pink-100 text-pink-800",radio:"bg-indigo-100 text-indigo-800",file:"bg-gray-100 text-gray-800"})[d]||"bg-gray-100 text-gray-800";return(d,a)=>(r(),y(h,null,[t(e(te),{title:"Campos Personalizados"}),t(Y,{breadcrumbs:J},{default:s(()=>[i("div",Se,[i("div",he,[a[5]||(a[5]=i("div",null,[i("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Campos Personalizados "),i("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Define campos adicionales para los proyectos ")],-1)),t(e(M),{href:"/admin/campos-personalizados/create"},{default:s(()=>[t(e(_),null,{default:s(()=>[t(e(me),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=l(" Nuevo Campo ",-1))]),_:1})]),_:1})]),t(e(U),null,{default:s(()=>[t(e(A),{class:"p-4"},{default:s(()=>[i("div",we,[i("div",ze,[t(e(pe),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t(e(oe),{modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]=o=>$.value=o),type:"text",placeholder:"Buscar campos...",class:"pl-10"},null,8,["modelValue"])]),t(e(D),{modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=o=>S.value=o)},{default:s(()=>[t(e(R),null,{default:s(()=>[t(e(O),{placeholder:"Todos los tipos"})]),_:1}),t(e(G),null,{default:s(()=>[t(e(w),{value:"all"},{default:s(()=>[...a[6]||(a[6]=[l("Todos los tipos",-1)])]),_:1}),(r(!0),y(h,null,E(e(q),(o,u)=>(r(),m(e(w),{key:u,value:u},{default:s(()=>[l(p(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(D),{modelValue:C.value,"onUpdate:modelValue":a[2]||(a[2]=o=>C.value=o)},{default:s(()=>[t(e(R),null,{default:s(()=>[t(e(O),{placeholder:"Todos los estados"})]),_:1}),t(e(G),null,{default:s(()=>[t(e(w),{value:"all"},{default:s(()=>[...a[7]||(a[7]=[l("Todos los estados",-1)])]),_:1}),t(e(w),{value:"1"},{default:s(()=>[...a[8]||(a[8]=[l("Activos",-1)])]),_:1}),t(e(w),{value:"0"},{default:s(()=>[...a[9]||(a[9]=[l("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(_),{variant:"outline",onClick:a[3]||(a[3]=o=>{$.value="",S.value="",C.value="",F()})},{default:s(()=>[...a[10]||(a[10]=[l(" Limpiar Filtros ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(U),null,{default:s(()=>[t(e(A),{class:"p-0"},{default:s(()=>[t(e(re),null,{default:s(()=>[t(e(ie),null,{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(x),{class:"w-12"},{default:s(()=>[...a[11]||(a[11]=[l("Orden",-1)])]),_:1}),t(e(x),null,{default:s(()=>[...a[12]||(a[12]=[l("Campo",-1)])]),_:1}),t(e(x),null,{default:s(()=>[...a[13]||(a[13]=[l("Slug",-1)])]),_:1}),t(e(x),null,{default:s(()=>[...a[14]||(a[14]=[l("Tipo",-1)])]),_:1}),t(e(x),null,{default:s(()=>[...a[15]||(a[15]=[l("Aplicar a",-1)])]),_:1}),t(e(x),{class:"text-center"},{default:s(()=>[...a[16]||(a[16]=[l("Requerido",-1)])]),_:1}),t(e(x),{class:"text-center"},{default:s(()=>[...a[17]||(a[17]=[l("Estado",-1)])]),_:1}),t(e(x),{class:"text-right"},{default:s(()=>[...a[18]||(a[18]=[l("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(ne),null,{default:s(()=>[(r(!0),y(h,null,E(c.campos.data,(o,u)=>(r(),m(e(N),{key:o.id},{default:s(()=>[t(e(f),null,{default:s(()=>[i("div",Te,[t(e(_),{variant:"ghost",size:"sm",disabled:u===0,onClick:n=>I(o,"up")},{default:s(()=>[t(e(de),{class:"h-3 w-3"})]),_:1},8,["disabled","onClick"]),i("span",Ve,p(o.orden),1),t(e(_),{variant:"ghost",size:"sm",disabled:u===c.campos.data.length-1,onClick:n=>I(o,"down")},{default:s(()=>[t(e(ue),{class:"h-3 w-3"})]),_:1},8,["disabled","onClick"])])]),_:2},1024),t(e(f),null,{default:s(()=>[i("div",null,[i("p",Fe,p(o.nombre),1),o.descripcion?(r(),y("p",Le,p(o.descripcion),1)):b("",!0)])]),_:2},1024),t(e(f),null,{default:s(()=>[i("code",Me,p(o.slug),1)]),_:2},1024),t(e(f),null,{default:s(()=>[t(e(k),{class:B([X(o.tipo),"flex items-center gap-1 w-fit"])},{default:s(()=>{var n;return[(r(),m(ae(W(o.tipo)),{class:"h-3 w-3"})),l(" "+p(((n=P.value||e(q))==null?void 0:n[o.tipo])||o.tipo),1)]}),_:2},1032,["class"])]),_:2},1024),t(e(f),null,{default:s(()=>{var n,v,T;return[i("div",Ee,[!o.aplicar_para||o.aplicar_para.length===0||o.aplicar_para.includes("proyectos")?(r(),m(e(k),{key:0,variant:"secondary",class:"text-xs"},{default:s(()=>[...a[19]||(a[19]=[l(" Proyectos ",-1)])]),_:1})):b("",!0),(n=o.aplicar_para)!=null&&n.includes("contratos")?(r(),m(e(k),{key:1,variant:"secondary",class:"text-xs"},{default:s(()=>[...a[20]||(a[20]=[l(" Contratos ",-1)])]),_:1})):b("",!0),(v=o.aplicar_para)!=null&&v.includes("hitos")?(r(),m(e(k),{key:2,variant:"secondary",class:"text-xs"},{default:s(()=>[...a[21]||(a[21]=[l(" Hitos ",-1)])]),_:1})):b("",!0),(T=o.aplicar_para)!=null&&T.includes("entregables")?(r(),m(e(k),{key:3,variant:"secondary",class:"text-xs"},{default:s(()=>[...a[22]||(a[22]=[l(" Entregables ",-1)])]),_:1})):b("",!0)])]}),_:2},1024),t(e(f),{class:"text-center"},{default:s(()=>[t(e(k),{class:B(o.es_requerido?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")},{default:s(()=>[l(p(o.es_requerido?"Sí":"No"),1)]),_:2},1032,["class"])]),_:2},1024),t(e(f),{class:"text-center"},{default:s(()=>[t(e(le),{"model-value":o.activo,"onUpdate:modelValue":n=>Q(o,n)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),t(e(f),{class:"text-right"},{default:s(()=>[i("div",Ne,[t(e(M),{href:`/admin/campos-personalizados/${o.id}/edit`},{default:s(()=>[t(e(_),{variant:"outline",size:"sm"},{default:s(()=>[t(e(fe),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),t(e(_),{variant:"destructive",size:"sm",onClick:n=>K(o)},{default:s(()=>[t(e(ce),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),c.campos.data.length===0?(r(),m(e(N),{key:0},{default:s(()=>[t(e(f),{colspan:"7",class:"text-center py-8"},{default:s(()=>[...a[23]||(a[23]=[i("p",{class:"text-gray-500"},"No se encontraron campos personalizados",-1)])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),c.campos.last_page>1?(r(),y("div",Pe,[(r(!0),y(h,null,E(c.campos.links,o=>(r(),y(h,{key:o.label},[o.url?(r(),m(e(M),{key:0,href:o.url,"preserve-state":"","preserve-scroll":""},{default:s(()=>[t(e(_),{variant:o.active?"default":"outline",size:"sm",innerHTML:o.label},null,8,["variant","innerHTML"])]),_:2},1032,["href"])):(r(),m(e(_),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:o.label},null,8,["innerHTML"]))],64))),128))])):b("",!0),i("div",qe," Mostrando "+p(c.campos.data.length)+" de "+p(c.campos.total)+" campos ",1)])]),_:1})],64))}});export{At as default};
