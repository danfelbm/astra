import{d as ke,C as Ce,r as $,c as k,b as v,e as u,w as l,g as i,f as o,j as f,t as m,u as e,h as d,l as Ve,i as p,n as q,F as w,k as U,W as we}from"./app-Dt2sukkq.js";import{_ as Ue}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BAX2dDyG.js";import{_ as E,a as z,b as A,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3D16Ztn.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-CpG721w4.js";import{_ as x}from"./createLucideIcon-ADYiFz1p.js";import{_ as H}from"./Input.vue_vue_type_script_setup_true_lang-B3JXaiF3.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-DCZhrf2e.js";import{_ as le}from"./Textarea.vue_vue_type_script_setup_true_lang-CU9dUjfW.js";import{_ as I,a as M,b as L,c as T,d as W}from"./SelectValue.vue_vue_type_script_setup_true_lang-XTf0O-lR.js";import{_ as Se,a as re}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-BTeYrLXJ.js";import{_ as X}from"./index-DZUQ23bj.js";import{_ as G,a as J,b as K}from"./index-C_zthh-d.js";import{_ as te,a as ie}from"./index-Dgfn2Mhg.js";import{_ as ne}from"./AddUsersModal.vue_vue_type_script_setup_true_lang-BDUwohjA.js";import{_ as Ee}from"./CamposPersonalizadosForm.vue_vue_type_script_setup_true_lang-C9-k9UL2.js";import{u as ze}from"./useToast-hhFFdGxp.js";import{C as Ae}from"./circle-check-big-BTA6O6qg.js";import{F as De}from"./flag-DF2NzOSS.js";import{X as de}from"./x-BpcUsJXn.js";import{U as ue}from"./user-plus-Cvkmfd0W.js";import{C as je}from"./circle-alert-Bny28mZr.js";import{A as Pe}from"./arrow-left-CcnTTf_x.js";import{S as Re}from"./save-CPLxPeAL.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-Dk5ovgNn.js";import"./index-DYtBqwXi.js";import"./floating-ui.vue-DhUnkJfc.js";import"./shield-Cyievtug.js";import"./user-Ca0ja34E.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Ch_KWbnG.js";import"./chevron-right-CkT1ue1I.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-V01rVzxA.js";import"./VisuallyHidden-H3fpmsLx.js";import"./index-YHYyGAco.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-CwNj20AO.js";import"./index-CTkeagVR.js";import"./map-pin-D1rtVCPc.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-TmplCPgM.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-BlnKZeFr.js";import"./chevrons-up-down-CLsbi7q1.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BcP5joWp.js";import"./tag-euMStffd.js";import"./users-ARKz5o5z.js";import"./target-BlHWusLl.js";import"./vote-D-ho2Upj.js";import"./folder-open-BwpEZUDw.js";import"./send-D6GePUDU.js";import"./file-text-CrhgvIVS.js";import"./briefcase-CdnBkwVO.js";import"./calendar-CJYt0g6k.js";import"./megaphone-BWKT3hAA.js";import"./user-check-Cjdi1Rn1.js";import"./clipboard-list-DeVxPgd5.js";import"./mail-Cjqn3QRK.js";import"./message-square-CtTij58U.js";import"./external-link-GRGCmSzE.js";import"./panel-left-CvMlf3oX.js";import"./check-DzU-qwfx.js";import"./index-C5GM-A1h.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-BUHtT0jY.js";import"./utils-CveDOlSQ.js";import"./VisuallyHiddenInput-CTh2PJwg.js";import"./circle-C6O6G82s.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-C9CiF85Y.js";import"./search-BkHaPo1l.js";import"./loader-circle-A6_XgNGB.js";import"./chevron-left-DryFAzkJ.js";import"./CampoPersonalizadoInput.vue_vue_type_script_setup_true_lang-BiPVkN8R.js";const Fe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ne={class:"text-muted-foreground mt-2"},qe={class:"grid gap-4 md:grid-cols-3"},He={class:"font-medium"},Ie={class:"font-medium"},Me={key:0,class:"text-sm text-red-600 mt-1"},Le={key:0,class:"text-sm text-red-600 mt-1"},Te={class:"grid gap-4 md:grid-cols-2"},We={class:"flex items-center gap-2"},Xe={class:"grid gap-4 md:grid-cols-2"},Ge={key:0,class:"text-sm text-red-600 mt-1"},Je={key:0,class:"text-sm text-red-600 mt-1"},Ke={class:"space-y-2"},Oe={key:0,class:"p-3 bg-muted rounded-lg flex items-center justify-between"},Qe={class:"flex items-center gap-2"},Ye={class:"font-medium"},Ze={class:"text-sm text-muted-foreground"},es={key:0,class:"text-sm text-red-600 mt-1"},ss={class:"flex items-center justify-between mb-2"},os={key:0,class:"space-y-2 mt-3"},as={class:"flex items-center gap-2"},ls={class:"font-medium"},rs={class:"text-sm text-muted-foreground"},ts={key:1,class:"text-sm text-muted-foreground mt-3"},is={key:2,class:"space-y-4 p-4 border rounded-lg"},ns={class:"grid gap-4 md:grid-cols-3"},ds={class:"flex items-center space-x-2"},us={class:"flex items-center space-x-2"},ms={key:0,class:"space-y-2"},ps={class:"flex items-center gap-2"},cs={class:"text-sm font-medium"},fs={class:"list-disc pl-4"},_s={class:"flex justify-end gap-2"},bs=ke({__name:"Edit",props:{proyecto:{},hito:{},entregable:{},usuarios:{},usuariosAsignados:{},camposPersonalizados:{},valoresCamposPersonalizados:{},estados:{},prioridades:{},roles:{}},setup(me){var Z,ee;const n=me,{toast:R}=ze(),r=Ce({nombre:n.entregable.nombre||"",descripcion:n.entregable.descripcion||"",fecha_inicio:n.entregable.fecha_inicio||"",fecha_fin:n.entregable.fecha_fin||"",estado:n.entregable.estado||"pendiente",prioridad:n.entregable.prioridad||"media",responsable_id:n.entregable.responsable_id,usuarios_asignados:n.usuariosAsignados||[],campos_personalizados:n.valoresCamposPersonalizados||{},orden:n.entregable.orden||1,notas:""}),pe=$(!1),h=$(null),j=$("colaborador"),B=$(!1),F=$(!1),{route:O}=window,c=$(null),_=$(new Map);if(n.usuarios.forEach(t=>_.value.set(t.id,t)),n.entregable.responsable_id){const t=n.usuarios.find(s=>s.id===n.entregable.responsable_id);if(t)c.value=t;else{const s=n.entregable;c.value={id:n.entregable.responsable_id,name:((Z=s.responsable)==null?void 0:Z.name)||`Usuario #${n.entregable.responsable_id}`,email:((ee=s.responsable)==null?void 0:ee.email)||""},_.value.set(n.entregable.responsable_id,c.value)}}n.usuariosAsignados.forEach(t=>{var s,a,b;_.value.has(t.user_id)||_.value.set(t.user_id,{id:((s=t.user)==null?void 0:s.id)||t.user_id,name:((a=t.user)==null?void 0:a.name)||`Usuario #${t.user_id}`,email:((b=t.user)==null?void 0:b.email)||""})});const ce=k(()=>[{name:"rol",label:"Rol",type:"select",options:[{value:"colaborador",label:"Colaborador"},{value:"revisor",label:"Revisor"}],value:"colaborador",required:!0}]),fe=k(()=>{const t=r.usuarios_asignados.map(s=>s.user_id);return r.responsable_id&&t.push(r.responsable_id),t}),_e=t=>{if(t.userIds.length>0){const s=t.userIds[0];r.responsable_id=s,_.value.has(s)?c.value=_.value.get(s)||null:(c.value={id:s,name:`Usuario seleccionado (ID: ${s})`,email:"Se actualizará al guardar"},_.value.set(s,c.value))}},be=t=>{t.userIds.forEach(s=>{r.usuarios_asignados.some(b=>b.user_id===s)||(r.usuarios_asignados.push({user_id:s,rol:t.extraData.rol||"colaborador"}),_.value.has(s)||_.value.set(s,{id:s,name:`Usuario #${s}`,email:"Pendiente de actualizar"}))})},ve=k(()=>[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:n.proyecto.nombre,href:`/admin/proyectos/${n.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${n.proyecto.id}/hitos`},{title:n.hito.nombre,href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}`},{title:"Entregables",href:`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`},{title:"Editar Entregable"}]),ge=()=>{const t={...r.data(),usuarios:r.usuarios_asignados};delete t.usuarios_asignados,r.transform(()=>t).put(`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables/${n.entregable.id}`,{onSuccess:()=>{R.success("Entregable actualizado correctamente")},onError:()=>{R.error("Error al actualizar el entregable")}})},ye=()=>{we.get(`/admin/proyectos/${n.proyecto.id}/hitos/${n.hito.id}/entregables`)},xe=()=>{if(!h.value)return;if(r.usuarios_asignados.some(s=>s.user_id===h.value)){R.warning("Este usuario ya está asignado");return}r.usuarios_asignados.push({user_id:h.value,rol:j.value}),h.value=null,j.value="colaborador"},Q=t=>{const s=r.usuarios_asignados.findIndex(a=>a.user_id===t);s>-1&&r.usuarios_asignados.splice(s,1)},y=t=>_.value.has(t)?_.value.get(t):n.usuarios.find(s=>s.id===t),he=k(()=>{const t=r.usuarios_asignados.map(s=>s.user_id);return r.responsable_id&&t.push(r.responsable_id),n.usuarios.filter(s=>!t.includes(s.id))}),N=k(()=>{const t=[];return r.nombre||t.push("El nombre es requerido"),r.nombre.length>255&&t.push("El nombre no puede exceder 255 caracteres"),r.fecha_inicio&&r.fecha_fin&&new Date(r.fecha_inicio)>new Date(r.fecha_fin)&&t.push("La fecha de inicio no puede ser posterior a la fecha de fin"),r.responsable_id||t.push("Debe asignar un responsable"),t}),$e=k(()=>N.value.length===0&&!r.processing),Y=k(()=>{var t;if(n.entregable.estado==="completado"&&n.entregable.completado_at){const s=new Date(n.entregable.completado_at).toLocaleDateString("es-ES"),a=((t=n.entregable.completado_por)==null?void 0:t.name)||"Usuario desconocido";return`Completado el ${s} por ${a}`}return null});return(t,s)=>(u(),v(Ue,{breadcrumbs:ve.value},{default:l(()=>[i("div",Fe,[i("div",null,[s[15]||(s[15]=i("h2",{class:"text-3xl font-bold tracking-tight"},"Editar Entregable",-1)),i("p",Ne,' Modificar el entregable "'+m(t.entregable.nombre)+'" ',1)]),Y.value?(u(),v(e(te),{key:0,class:"bg-green-50 dark:bg-green-900/20 border-green-200"},{default:l(()=>[o(e(Ae),{class:"h-4 w-4 text-green-600"}),o(e(ie),{class:"text-green-800 dark:text-green-200"},{default:l(()=>[d(m(Y.value),1)]),_:1})]),_:1})):f("",!0),o(e(E),null,{default:l(()=>[o(e(z),null,{default:l(()=>[o(e(A),{class:"text-base"},{default:l(()=>[...s[16]||(s[16]=[d("Información del Hito",-1)])]),_:1})]),_:1}),o(e(D),null,{default:l(()=>[i("div",qe,[i("div",null,[s[17]||(s[17]=i("p",{class:"text-sm text-muted-foreground"},"Hito",-1)),i("p",He,m(t.hito.nombre),1)]),i("div",null,[s[18]||(s[18]=i("p",{class:"text-sm text-muted-foreground"},"Estado del Hito",-1)),o(e(X),null,{default:l(()=>[d(m(t.hito.estado_label||t.hito.estado),1)]),_:1})]),i("div",null,[s[19]||(s[19]=i("p",{class:"text-sm text-muted-foreground"},"Progreso del Hito",-1)),i("p",Ie,m(t.hito.porcentaje_completado||0)+"%",1)])])]),_:1})]),_:1}),i("form",{onSubmit:Ve(ge,["prevent"]),class:"space-y-4"},[o(e(E),null,{default:l(()=>[o(e(z),null,{default:l(()=>[o(e(A),null,{default:l(()=>[...s[20]||(s[20]=[d("Información Básica",-1)])]),_:1}),o(e(P),null,{default:l(()=>[...s[21]||(s[21]=[d(" Datos principales del entregable ",-1)])]),_:1})]),_:1}),o(e(D),{class:"space-y-4"},{default:l(()=>[i("div",null,[o(e(g),{for:"nombre",class:"required"},{default:l(()=>[...s[22]||(s[22]=[d(" Nombre del entregable ",-1)])]),_:1}),o(e(H),{id:"nombre",modelValue:e(r).nombre,"onUpdate:modelValue":s[0]||(s[0]=a=>e(r).nombre=a),placeholder:"Ej: Documento de diseño técnico",class:q({"border-red-500":e(r).errors.nombre})},null,8,["modelValue","class"]),e(r).errors.nombre?(u(),p("p",Me,m(e(r).errors.nombre),1)):f("",!0)]),i("div",null,[o(e(g),{for:"descripcion"},{default:l(()=>[...s[23]||(s[23]=[d(" Descripción ",-1)])]),_:1}),o(e(le),{id:"descripcion",modelValue:e(r).descripcion,"onUpdate:modelValue":s[1]||(s[1]=a=>e(r).descripcion=a),placeholder:"Describe el entregable y sus objetivos...",rows:"4",class:q({"border-red-500":e(r).errors.descripcion})},null,8,["modelValue","class"]),e(r).errors.descripcion?(u(),p("p",Le,m(e(r).errors.descripcion),1)):f("",!0)]),i("div",Te,[i("div",null,[o(e(g),{for:"estado"},{default:l(()=>[...s[24]||(s[24]=[d(" Estado ",-1)])]),_:1}),o(e(I),{modelValue:e(r).estado,"onUpdate:modelValue":s[2]||(s[2]=a=>e(r).estado=a)},{default:l(()=>[o(e(M),null,{default:l(()=>[o(e(L),{placeholder:"Seleccionar estado"})]),_:1}),o(e(T),null,{default:l(()=>[(u(!0),p(w,null,U(t.estados,a=>(u(),v(e(W),{key:a.value,value:a.value},{default:l(()=>[d(m(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[o(e(g),{for:"prioridad"},{default:l(()=>[...s[25]||(s[25]=[d(" Prioridad ",-1)])]),_:1}),o(e(I),{modelValue:e(r).prioridad,"onUpdate:modelValue":s[3]||(s[3]=a=>e(r).prioridad=a)},{default:l(()=>[o(e(M),null,{default:l(()=>[o(e(L),{placeholder:"Seleccionar prioridad"})]),_:1}),o(e(T),null,{default:l(()=>[(u(!0),p(w,null,U(t.prioridades,a=>(u(),v(e(W),{key:a.value,value:a.value},{default:l(()=>[i("div",We,[o(e(De),{class:q(["h-4 w-4",{"text-blue-500":a.value==="baja","text-yellow-500":a.value==="media","text-red-500":a.value==="alta"}])},null,8,["class"]),d(" "+m(a.label),1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1}),o(e(E),null,{default:l(()=>[o(e(z),null,{default:l(()=>[o(e(A),null,{default:l(()=>[...s[26]||(s[26]=[d("Fechas",-1)])]),_:1}),o(e(P),null,{default:l(()=>[...s[27]||(s[27]=[d(" Define el período de ejecución del entregable ",-1)])]),_:1})]),_:1}),o(e(D),{class:"space-y-4"},{default:l(()=>[i("div",Xe,[i("div",null,[o(e(g),{for:"fecha_inicio"},{default:l(()=>[...s[28]||(s[28]=[d(" Fecha de inicio ",-1)])]),_:1}),o(e(H),{id:"fecha_inicio",modelValue:e(r).fecha_inicio,"onUpdate:modelValue":s[4]||(s[4]=a=>e(r).fecha_inicio=a),type:"date",disabled:e(r).processing},null,8,["modelValue","disabled"]),e(r).errors.fecha_inicio?(u(),p("p",Ge,m(e(r).errors.fecha_inicio),1)):f("",!0)]),i("div",null,[o(e(g),{for:"fecha_fin"},{default:l(()=>[...s[29]||(s[29]=[d(" Fecha de fin ",-1)])]),_:1}),o(e(H),{id:"fecha_fin",modelValue:e(r).fecha_fin,"onUpdate:modelValue":s[5]||(s[5]=a=>e(r).fecha_fin=a),type:"date",disabled:e(r).processing},null,8,["modelValue","disabled"]),e(r).errors.fecha_fin?(u(),p("p",Je,m(e(r).errors.fecha_fin),1)):f("",!0)])])]),_:1})]),_:1}),o(e(E),null,{default:l(()=>[o(e(z),null,{default:l(()=>[o(e(A),null,{default:l(()=>[...s[30]||(s[30]=[d("Asignación",-1)])]),_:1}),o(e(P),null,{default:l(()=>[...s[31]||(s[31]=[d(" Asigna un responsable y colaboradores al entregable ",-1)])]),_:1})]),_:1}),o(e(D),{class:"space-y-4"},{default:l(()=>[i("div",null,[o(e(g),{for:"responsable",class:"required"},{default:l(()=>[...s[32]||(s[32]=[d(" Responsable principal ",-1)])]),_:1}),i("div",Ke,[c.value?(u(),p("div",Oe,[i("div",Qe,[o(e(G),{class:"h-8 w-8"},{default:l(()=>[c.value.avatar?(u(),v(e(J),{key:0,src:c.value.avatar},null,8,["src"])):f("",!0),o(e(K),null,{default:l(()=>[d(m(c.value.name.substring(0,2).toUpperCase()),1)]),_:1})]),_:1}),i("div",null,[i("p",Ye,m(c.value.name),1),i("p",Ze,m(c.value.email),1)])]),o(e(x),{type:"button",variant:"ghost",size:"sm",onClick:s[6]||(s[6]=a=>{e(r).responsable_id=null,c.value=null})},{default:l(()=>[o(e(de),{class:"h-4 w-4"})]),_:1})])):f("",!0),o(e(x),{type:"button",variant:"outline",onClick:s[7]||(s[7]=a=>B.value=!0),class:"w-full"},{default:l(()=>[o(e(ue),{class:"h-4 w-4 mr-2"}),d(" "+m(c.value?"Cambiar Responsable":"Seleccionar Responsable"),1)]),_:1})]),e(r).errors.responsable_id?(u(),p("p",es,m(e(r).errors.responsable_id),1)):f("",!0)]),i("div",null,[i("div",ss,[o(e(g),null,{default:l(()=>[...s[33]||(s[33]=[d(" Colaboradores adicionales ",-1)])]),_:1}),o(e(x),{type:"button",variant:"outline",size:"sm",onClick:s[8]||(s[8]=a=>F.value=!0)},{default:l(()=>[o(e(ue),{class:"mr-2 h-4 w-4"}),s[34]||(s[34]=d(" Agregar colaboradores ",-1))]),_:1})]),e(r).usuarios_asignados.length>0?(u(),p("div",os,[(u(!0),p(w,null,U(e(r).usuarios_asignados,a=>{var b,C;return u(),p("div",{key:a.user_id,class:"p-3 bg-muted rounded-lg flex items-center justify-between"},[i("div",as,[o(e(G),{class:"h-8 w-8"},{default:l(()=>{var V,S;return[(V=y(a.user_id))!=null&&V.avatar?(u(),v(e(J),{key:0,src:(S=y(a.user_id))==null?void 0:S.avatar},null,8,["src"])):f("",!0),o(e(K),null,{default:l(()=>{var se,oe,ae;return[d(m(((ae=(oe=(se=y(a.user_id))==null?void 0:se.name)==null?void 0:oe.substring(0,2))==null?void 0:ae.toUpperCase())||"US"),1)]}),_:2},1024)]}),_:2},1024),i("div",null,[i("p",ls,m(((b=y(a.user_id))==null?void 0:b.name)||`Usuario #${a.user_id}`),1),i("p",rs,m(((C=y(a.user_id))==null?void 0:C.email)||""),1)]),o(e(X),{variant:"outline"},{default:l(()=>[d(m(a.rol),1)]),_:2},1024)]),o(e(x),{type:"button",variant:"ghost",size:"sm",onClick:V=>Q(a.user_id)},{default:l(()=>[o(e(de),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])}),128))])):(u(),p("div",ts," No hay colaboradores asignados ")),pe.value?(u(),p("div",is,[i("div",ns,[o(e(I),{modelValue:h.value,"onUpdate:modelValue":s[9]||(s[9]=a=>h.value=a)},{default:l(()=>[o(e(M),null,{default:l(()=>[o(e(L),{placeholder:"Seleccionar usuario"})]),_:1}),o(e(T),null,{default:l(()=>[(u(!0),p(w,null,U(he.value,a=>(u(),v(e(W),{key:a.id,value:a.id},{default:l(()=>[d(m(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o(e(Se),{modelValue:j.value,"onUpdate:modelValue":s[10]||(s[10]=a=>j.value=a),class:"flex gap-4"},{default:l(()=>[i("div",ds,[o(e(re),{value:"colaborador",id:"colaborador"}),o(e(g),{for:"colaborador"},{default:l(()=>[...s[35]||(s[35]=[d("Colaborador",-1)])]),_:1})]),i("div",us,[o(e(re),{value:"revisor",id:"revisor"}),o(e(g),{for:"revisor"},{default:l(()=>[...s[36]||(s[36]=[d("Revisor",-1)])]),_:1})])]),_:1},8,["modelValue"]),o(e(x),{type:"button",onClick:xe,disabled:!h.value},{default:l(()=>[...s[37]||(s[37]=[d(" Agregar ",-1)])]),_:1},8,["disabled"])]),e(r).usuarios_asignados.length>0?(u(),p("div",ms,[s[39]||(s[39]=i("p",{class:"text-sm font-medium text-muted-foreground"},"Usuarios asignados:",-1)),(u(!0),p(w,null,U(e(r).usuarios_asignados,a=>{var b;return u(),p("div",{key:a.user_id,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded"},[i("div",ps,[o(e(G),{class:"h-6 w-6"},{default:l(()=>{var C,V;return[(C=y(a.user_id))!=null&&C.avatar?(u(),v(e(J),{key:0,src:(V=y(a.user_id))==null?void 0:V.avatar},null,8,["src"])):f("",!0),o(e(K),null,{default:l(()=>{var S;return[d(m((S=y(a.user_id))==null?void 0:S.name.substring(0,2).toUpperCase()),1)]}),_:2},1024)]}),_:2},1024),i("span",cs,m((b=y(a.user_id))==null?void 0:b.name),1),o(e(X),{variant:"outline"},{default:l(()=>[d(m(a.rol),1)]),_:2},1024)]),o(e(x),{type:"button",variant:"ghost",size:"sm",onClick:C=>Q(a.user_id)},{default:l(()=>[...s[38]||(s[38]=[d(" Remover ",-1)])]),_:2},1032,["onClick"])])}),128))])):f("",!0)])):f("",!0)])]),_:1})]),_:1}),o(e(E),null,{default:l(()=>[o(e(z),null,{default:l(()=>[o(e(A),null,{default:l(()=>[...s[40]||(s[40]=[d("Notas de actualización",-1)])]),_:1}),o(e(P),null,{default:l(()=>[...s[41]||(s[41]=[d(" Describe los cambios realizados (opcional) ",-1)])]),_:1})]),_:1}),o(e(D),null,{default:l(()=>[o(e(le),{modelValue:e(r).notas,"onUpdate:modelValue":s[11]||(s[11]=a=>e(r).notas=a),placeholder:"Notas sobre los cambios realizados...",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1}),t.camposPersonalizados&&t.camposPersonalizados.length>0?(u(),v(Ee,{key:0,campos:t.camposPersonalizados,valores:e(r).campos_personalizados,errors:e(r).errors,onUpdate:s[12]||(s[12]=a=>e(r).campos_personalizados=a)},null,8,["campos","valores","errors"])):f("",!0),N.value.length>0?(u(),v(e(te),{key:1,variant:"destructive"},{default:l(()=>[o(e(je),{class:"h-4 w-4"}),o(e(ie),null,{default:l(()=>[i("ul",fs,[(u(!0),p(w,null,U(N.value,a=>(u(),p("li",{key:a},m(a),1))),128))])]),_:1})]),_:1})):f("",!0),i("div",_s,[o(e(x),{type:"button",variant:"outline",onClick:ye},{default:l(()=>[o(e(Pe),{class:"mr-2 h-4 w-4"}),s[42]||(s[42]=d(" Cancelar ",-1))]),_:1}),o(e(x),{type:"submit",disabled:!$e.value},{default:l(()=>[o(e(Re),{class:"mr-2 h-4 w-4"}),d(" "+m(e(r).processing?"Actualizando...":"Actualizar Entregable"),1)]),_:1},8,["disabled"])])],32)]),o(ne,{modelValue:B.value,"onUpdate:modelValue":s[13]||(s[13]=a=>B.value=a),title:"Seleccionar Responsable Principal",description:"Selecciona el usuario que ser\\u00e1 el responsable principal del entregable","search-endpoint":e(O)("admin.proyectos.search-users"),"excluded-ids":e(r).responsable_id?[e(r).responsable_id]:[],"max-selection":1,"submit-button-text":"Seleccionar Responsable","search-placeholder":"Buscar por nombre, email, documento o tel\\u00e9fono...",onSubmit:_e},null,8,["modelValue","search-endpoint","excluded-ids"]),o(ne,{modelValue:F.value,"onUpdate:modelValue":s[14]||(s[14]=a=>F.value=a),title:"Agregar Colaboradores",description:"Selecciona los usuarios que colaborar\\u00e1n en este entregable","search-endpoint":e(O)("admin.proyectos.search-users"),"excluded-ids":fe.value,"extra-fields":ce.value,"submit-button-text":"Agregar Colaboradores","search-placeholder":"Buscar por nombre, email, documento o tel\\u00e9fono...",onSubmit:be},null,8,["modelValue","search-endpoint","excluded-ids","extra-fields"])]),_:1},8,["breadcrumbs"]))}}),jo=Be(bs,[["__scopeId","data-v-1ad7d694"]]);export{jo as default};
