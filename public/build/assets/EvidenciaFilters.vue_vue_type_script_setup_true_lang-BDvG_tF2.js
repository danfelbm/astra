import{c as B,_ as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-xUjjE8IK.js";import{_,a as c,b as g,c as b,d as r}from"./SelectValue.vue_vue_type_script_setup_true_lang-lnv0J55m.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-B6w5yMA0.js";import{_ as S}from"./createLucideIcon-fGeWyvG_.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-fFAFaom6.js";import{d as j,ar as z,as as D,c as V,b as v,e as i,w as o,f as s,u as l,g as n,h as t,i as p,F as y,k as x,j as w,n as L,t as U}from"./app-B7JHmzZ3.js";import{X as q}from"./x-FK84Jhx-.js";const H={class:"space-y-4"},O={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4"},X={class:"space-y-2"},h={class:"space-y-2"},G={class:"space-y-2"},I={class:"space-y-2"},J={class:"space-y-2"},K={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},P={class:"space-y-2 md:col-span-2"},Q={key:0,class:"space-y-2 md:col-span-2"},se=j({__name:"EvidenciaFilters",props:z({contratos:{},evidencias:{},entregables:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(T){const f=T,d=D(T,"modelValue"),F=V(()=>{const u=new Set(f.evidencias.map(e=>e.tipo_evidencia).filter(Boolean));return Array.from(u).map(e=>({value:e,label:e}))}),C=V(()=>{const u=new Set(f.evidencias.map(e=>e.estado).filter(Boolean));return Array.from(u).map(e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)}))}),E=V(()=>{const u=new Map;return f.evidencias.forEach(e=>{var a;(a=e.usuario)!=null&&a.id&&u.set(e.usuario.id,e.usuario)}),Array.from(u.values()).map(e=>({value:e.id,label:e.name}))}),k=V(()=>{if(!f.entregables||f.entregables.length===0){const u=new Map;return f.evidencias.forEach(e=>{e.entregables&&e.entregables.length>0&&e.entregables.forEach(a=>{a!=null&&a.id&&u.set(a.id,a)})}),Array.from(u.values()).map(e=>({value:e.id,label:e.nombre}))}return f.entregables.map(u=>({value:u.id,label:u.nombre}))}),M=()=>{d.value={contrato_id:null,fecha_inicio:null,fecha_fin:null,tipo:null,estado:null,usuario_id:null,entregable_id:null}},A=V(()=>Object.values(d.value).some(u=>u!==null&&u!==""));return(u,e)=>(i(),v(l(N),null,{default:o(()=>[s(l(B),{class:"p-4"},{default:o(()=>[n("div",H,[n("div",O,[n("div",X,[s(l(m),{for:"filter-contrato",class:"text-xs"},{default:o(()=>[...e[7]||(e[7]=[t("Contrato",-1)])]),_:1}),s(l(_),{modelValue:d.value.contrato_id,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.contrato_id=a),id:"filter-contrato"},{default:o(()=>[s(l(c),null,{default:o(()=>[s(l(g),{placeholder:"Todos los contratos"})]),_:1}),s(l(b),null,{default:o(()=>[s(l(r),{value:null},{default:o(()=>[...e[8]||(e[8]=[t("Todos los contratos",-1)])]),_:1}),(i(!0),p(y,null,x(u.contratos,a=>(i(),v(l(r),{key:a.id,value:a.id},{default:o(()=>[t(U(a.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",h,[s(l(m),{for:"filter-fecha-inicio",class:"text-xs"},{default:o(()=>[...e[9]||(e[9]=[t("Fecha Desde",-1)])]),_:1}),s(l($),{modelValue:d.value.fecha_inicio,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.fecha_inicio=a),type:"date",id:"filter-fecha-inicio",class:"text-sm"},null,8,["modelValue"])]),n("div",G,[s(l(m),{for:"filter-fecha-fin",class:"text-xs"},{default:o(()=>[...e[10]||(e[10]=[t("Fecha Hasta",-1)])]),_:1}),s(l($),{modelValue:d.value.fecha_fin,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.fecha_fin=a),type:"date",id:"filter-fecha-fin",class:"text-sm"},null,8,["modelValue"])]),n("div",I,[s(l(m),{for:"filter-tipo",class:"text-xs"},{default:o(()=>[...e[11]||(e[11]=[t("Tipo",-1)])]),_:1}),s(l(_),{modelValue:d.value.tipo,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value.tipo=a),id:"filter-tipo"},{default:o(()=>[s(l(c),null,{default:o(()=>[s(l(g),{placeholder:"Todos los tipos"})]),_:1}),s(l(b),null,{default:o(()=>[s(l(r),{value:null},{default:o(()=>[...e[12]||(e[12]=[t("Todos los tipos",-1)])]),_:1}),(i(!0),p(y,null,x(F.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:o(()=>[t(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",J,[s(l(m),{for:"filter-estado",class:"text-xs"},{default:o(()=>[...e[13]||(e[13]=[t("Estado",-1)])]),_:1}),s(l(_),{modelValue:d.value.estado,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value.estado=a),id:"filter-estado"},{default:o(()=>[s(l(c),null,{default:o(()=>[s(l(g),{placeholder:"Todos los estados"})]),_:1}),s(l(b),null,{default:o(()=>[s(l(r),{value:null},{default:o(()=>[...e[14]||(e[14]=[t("Todos los estados",-1)])]),_:1}),(i(!0),p(y,null,x(C.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:o(()=>[t(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),n("div",K,[n("div",P,[s(l(m),{for:"filter-usuario",class:"text-xs"},{default:o(()=>[...e[15]||(e[15]=[t("Usuario",-1)])]),_:1}),s(l(_),{modelValue:d.value.usuario_id,"onUpdate:modelValue":e[5]||(e[5]=a=>d.value.usuario_id=a),id:"filter-usuario"},{default:o(()=>[s(l(c),null,{default:o(()=>[s(l(g),{placeholder:"Todos los usuarios"})]),_:1}),s(l(b),null,{default:o(()=>[s(l(r),{value:null},{default:o(()=>[...e[16]||(e[16]=[t("Todos los usuarios",-1)])]),_:1}),(i(!0),p(y,null,x(E.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:o(()=>[t(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),k.value.length>0?(i(),p("div",Q,[s(l(m),{for:"filter-entregable",class:"text-xs"},{default:o(()=>[...e[17]||(e[17]=[t("Entregable",-1)])]),_:1}),s(l(_),{modelValue:d.value.entregable_id,"onUpdate:modelValue":e[6]||(e[6]=a=>d.value.entregable_id=a),id:"filter-entregable"},{default:o(()=>[s(l(c),null,{default:o(()=>[s(l(g),{placeholder:"Todos los entregables"})]),_:1}),s(l(b),null,{default:o(()=>[s(l(r),{value:null},{default:o(()=>[...e[18]||(e[18]=[t("Todos los entregables",-1)])]),_:1}),(i(!0),p(y,null,x(k.value,a=>(i(),v(l(r),{key:a.value,value:a.value},{default:o(()=>[t(U(a.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])):w("",!0),n("div",{class:L(["flex items-end",k.value.length>0?"md:col-span-1":"md:col-span-3"])},[A.value?(i(),v(l(S),{key:0,variant:"outline",size:"sm",onClick:M,class:"w-full md:w-auto"},{default:o(()=>[s(l(q),{class:"h-4 w-4 mr-2"}),e[19]||(e[19]=t(" Limpiar Filtros ",-1))]),_:1})):w("",!0)],2)])])]),_:1})]),_:1}))}});export{se as _};
