import{_ as W,C as qe}from"./index-BIYbvm3e.js";import{c as Ne,_ as F}from"./createLucideIcon-DDkPG2Rx.js";import{a as te,b as se,c as Q,_ as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-CTQSEJni.js";import{_ as z}from"./Checkbox.vue_vue_type_script_setup_true_lang-CwgdAwdw.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-CS7-wUGb.js";import{_ as C}from"./Label.vue_vue_type_script_setup_true_lang-D2xSgxzA.js";import{_ as q,a as N,b as j,c as P,d as h,l as je,C as Pe}from"./SelectValue.vue_vue_type_script_setup_true_lang-CXBvmCjL.js";import{_ as ie}from"./Textarea.vue_vue_type_script_setup_true_lang-BEMBAQOP.js";import{k as M,J as Oe,d as oe,p as Se,j as A,o as m,e as a,b as l,u as e,f as s,g as u,t as _,a as p,i as k,F as $,r as U,H as le,w as H,c as J,l as ze}from"./app-B77ccTjn.js";import{P as K}from"./plus-D4-iqU9D.js";import{G as Ie}from"./grip-vertical-85MgVdSl.js";import{T as ee}from"./trash-2-OIr5D4rG.js";import{_ as Le}from"./CardDescription.vue_vue_type_script_setup_true_lang-B1b37HX6.js";import{E as Me}from"./eye-kpkchdd9.js";import{X as Ge}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BS2hC7Dl.js";import{G as Ye}from"./git-branch-_8S0zk2B.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=Ne("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function We(Y=[]){const E=M([...Y]),f=M(!1),S=M(null),d=Oe({id:"",type:"text",title:"",description:"",required:!1,options:[],editable:!1,perfilCandidaturaConfig:void 0,convocatoriaConfig:{convocatoria_id:void 0,multiple:!1,mostrarVotoBlanco:!0},fileConfig:{multiple:!1,maxFiles:5,maxFileSize:10,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"},datepickerConfig:{minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0},disclaimerConfig:{disclaimerText:"",modalTitle:"Términos y Condiciones",acceptButtonText:"Acepto",declineButtonText:"No acepto"},repeaterConfig:{minItems:0,maxItems:10,itemName:"Elemento",addButtonText:"Agregar elemento",removeButtonText:"Eliminar",fields:[]},numberConfig:{min:void 0,max:void 0,step:1,decimals:0},conditionalConfig:{enabled:!1,showWhen:"all",conditions:[]}}),i=()=>{d.id="",d.type="text",d.title="",d.description="",d.required=!1,d.options=[],d.editable=!1,d.perfilCandidaturaConfig=void 0,d.convocatoriaConfig={convocatoria_id:void 0,multiple:!1,mostrarVotoBlanco:!0},d.fileConfig={multiple:!1,maxFiles:5,maxFileSize:10,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"},d.datepickerConfig={minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0},d.disclaimerConfig={disclaimerText:"",modalTitle:"Términos y Condiciones",acceptButtonText:"Acepto",declineButtonText:"No acepto"},d.repeaterConfig={minItems:0,maxItems:10,itemName:"Elemento",addButtonText:"Agregar elemento",removeButtonText:"Eliminar",fields:[]},d.numberConfig={min:void 0,max:void 0,step:1,decimals:0},d.conditionalConfig={enabled:!1,showWhen:"all",conditions:[]},f.value=!1,S.value=null};return{fields:E,newField:d,showFieldForm:f,editingFieldIndex:S,addField:()=>{var r;const V={id:d.id||`field_${Date.now()}`,type:d.type,title:d.title,description:d.description,required:d.required,editable:d.editable,options:((r=d.options)==null?void 0:r.filter(x=>x.trim()!==""))||[]};d.type==="perfil_candidatura"&&d.perfilCandidaturaConfig&&(V.perfilCandidaturaConfig={...d.perfilCandidaturaConfig,cargo_id:d.perfilCandidaturaConfig.cargo_id&&d.perfilCandidaturaConfig.cargo_id!=="all"?Number(d.perfilCandidaturaConfig.cargo_id):void 0,periodo_electoral_id:d.perfilCandidaturaConfig.periodo_electoral_id&&d.perfilCandidaturaConfig.periodo_electoral_id!=="all"?Number(d.perfilCandidaturaConfig.periodo_electoral_id):void 0,territorios_ids:d.perfilCandidaturaConfig.territorios_ids||[],departamentos_ids:d.perfilCandidaturaConfig.departamentos_ids||[],municipios_ids:d.perfilCandidaturaConfig.municipios_ids||[],localidades_ids:d.perfilCandidaturaConfig.localidades_ids||[]}),d.type==="convocatoria"&&d.convocatoriaConfig&&(V.convocatoriaConfig={...d.convocatoriaConfig,convocatoria_id:d.convocatoriaConfig.convocatoria_id?Number(d.convocatoriaConfig.convocatoria_id):void 0}),d.type==="file"&&d.fileConfig&&(V.fileConfig={...d.fileConfig}),d.type==="datepicker"&&d.datepickerConfig&&(V.datepickerConfig={...d.datepickerConfig}),d.type==="disclaimer"&&d.disclaimerConfig&&(V.disclaimerConfig={...d.disclaimerConfig}),d.type==="repeater"&&d.repeaterConfig&&(V.repeaterConfig={...d.repeaterConfig,fields:[...d.repeaterConfig.fields]}),d.type==="number"&&d.numberConfig&&(V.numberConfig={...d.numberConfig}),d.conditionalConfig&&d.conditionalConfig.enabled&&(V.conditionalConfig={enabled:d.conditionalConfig.enabled,showWhen:d.conditionalConfig.showWhen,conditions:[...d.conditionalConfig.conditions]}),console.log("Adding field:",{required:d.required,editable:d.editable,fieldToAdd:V}),S.value!==null?(E.value[S.value]=V,S.value=null):E.value.push(V),i()},editField:V=>{var x,T,c,t,o,n,v,y,g,R,Z,de,ne,re,ue,me,pe,ce,fe,ve,ge,Ce,xe,be,_e,ye,ke,Ve,we,Te,Ae,Fe,$e,De,Be,Ue,he,Ee;const r=E.value[V];console.log("Editing field:",{originalField:r,required:r.required,editable:r.editable}),d.id=r.id,d.type=r.type,d.title=r.title,d.description=r.description||"",d.required=r.required??!1,d.options=[...r.options||[]],d.editable=r.editable??!1,r.type==="perfil_candidatura"&&(d.perfilCandidaturaConfig={cargo_id:((x=r.perfilCandidaturaConfig)==null?void 0:x.cargo_id)||void 0,periodo_electoral_id:((T=r.perfilCandidaturaConfig)==null?void 0:T.periodo_electoral_id)||void 0,territorio_id:((c=r.perfilCandidaturaConfig)==null?void 0:c.territorio_id)||void 0,departamento_id:((t=r.perfilCandidaturaConfig)==null?void 0:t.departamento_id)||void 0,municipio_id:((o=r.perfilCandidaturaConfig)==null?void 0:o.municipio_id)||void 0,localidad_id:((n=r.perfilCandidaturaConfig)==null?void 0:n.localidad_id)||void 0,territorios_ids:((v=r.perfilCandidaturaConfig)==null?void 0:v.territorios_ids)||[],departamentos_ids:((y=r.perfilCandidaturaConfig)==null?void 0:y.departamentos_ids)||[],municipios_ids:((g=r.perfilCandidaturaConfig)==null?void 0:g.municipios_ids)||[],localidades_ids:((R=r.perfilCandidaturaConfig)==null?void 0:R.localidades_ids)||[],multiple:((Z=r.perfilCandidaturaConfig)==null?void 0:Z.multiple)||!1,mostrarVotoBlanco:((de=r.perfilCandidaturaConfig)==null?void 0:de.mostrarVotoBlanco)??!0}),r.type==="convocatoria"&&(d.convocatoriaConfig={convocatoria_id:((ne=r.convocatoriaConfig)==null?void 0:ne.convocatoria_id)||void 0,multiple:((re=r.convocatoriaConfig)==null?void 0:re.multiple)||!1,mostrarVotoBlanco:((ue=r.convocatoriaConfig)==null?void 0:ue.mostrarVotoBlanco)??!0}),r.type==="file"&&(d.fileConfig={multiple:((me=r.fileConfig)==null?void 0:me.multiple)||!1,maxFiles:((pe=r.fileConfig)==null?void 0:pe.maxFiles)||5,maxFileSize:((ce=r.fileConfig)==null?void 0:ce.maxFileSize)||10,accept:((fe=r.fileConfig)==null?void 0:fe.accept)||".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"}),r.type==="datepicker"&&(d.datepickerConfig={minDate:((ve=r.datepickerConfig)==null?void 0:ve.minDate)||void 0,maxDate:((ge=r.datepickerConfig)==null?void 0:ge.maxDate)||void 0,format:((Ce=r.datepickerConfig)==null?void 0:Ce.format)||"DD/MM/YYYY",allowPastDates:((xe=r.datepickerConfig)==null?void 0:xe.allowPastDates)??!0,allowFutureDates:((be=r.datepickerConfig)==null?void 0:be.allowFutureDates)??!0}),r.type==="disclaimer"&&(d.disclaimerConfig={disclaimerText:((_e=r.disclaimerConfig)==null?void 0:_e.disclaimerText)||"",modalTitle:((ye=r.disclaimerConfig)==null?void 0:ye.modalTitle)||"Términos y Condiciones",acceptButtonText:((ke=r.disclaimerConfig)==null?void 0:ke.acceptButtonText)||"Acepto",declineButtonText:((Ve=r.disclaimerConfig)==null?void 0:Ve.declineButtonText)||"No acepto"}),r.type==="repeater"&&(d.repeaterConfig={minItems:((we=r.repeaterConfig)==null?void 0:we.minItems)||0,maxItems:((Te=r.repeaterConfig)==null?void 0:Te.maxItems)||10,itemName:((Ae=r.repeaterConfig)==null?void 0:Ae.itemName)||"Elemento",addButtonText:((Fe=r.repeaterConfig)==null?void 0:Fe.addButtonText)||"Agregar elemento",removeButtonText:(($e=r.repeaterConfig)==null?void 0:$e.removeButtonText)||"Eliminar",fields:(De=r.repeaterConfig)!=null&&De.fields?[...r.repeaterConfig.fields]:[]}),r.type==="number"&&(d.numberConfig={min:((Be=r.numberConfig)==null?void 0:Be.min)||void 0,max:((Ue=r.numberConfig)==null?void 0:Ue.max)||void 0,step:((he=r.numberConfig)==null?void 0:he.step)||1,decimals:((Ee=r.numberConfig)==null?void 0:Ee.decimals)||0}),r.conditionalConfig&&(d.conditionalConfig={enabled:r.conditionalConfig.enabled||!1,showWhen:r.conditionalConfig.showWhen||"all",conditions:r.conditionalConfig.conditions?[...r.conditionalConfig.conditions]:[]}),console.log("After assignment:",{newFieldRequired:d.required,newFieldEditable:d.editable}),S.value=V,f.value=!0},removeField:V=>{E.value.splice(V,1)},resetFieldForm:i,addOption:()=>{d.options||(d.options=[]),d.options.push("")},removeOption:V=>{var r;(r=d.options)==null||r.splice(V,1)},setFields:V=>{E.value=[...V]},canSave:()=>E.value.length>0}}const He={class:"text-sm text-muted-foreground"},Je={class:"text-xs text-muted-foreground mt-1"},Qe={key:0},Xe={class:"text-xs text-muted-foreground mt-1"},Ze={key:1},Ke={class:"text-xs text-muted-foreground mt-1"},et={key:2},tt={class:"text-xs text-muted-foreground mt-1"},ot=oe({__name:"GeographicRestrictions",props:{modelValue:{default:()=>({territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[]})},disabled:{type:Boolean,default:!1},title:{default:"Restricciones Geográficas (Opcional)"},description:{default:"Selecciona las regiones donde estará disponible. Si no seleccionas nada, estará disponible para todos."}},emits:["update:modelValue"],setup(Y,{emit:E}){const f=Y,S=E,d=M([]),i=M([]),b=M([]),D=M([]),w=M(!1),I=async()=>{try{w.value=!0;const r=await fetch("/admin/geographic/territorios");d.value=await r.json()}catch(r){console.error("Error loading territorios:",r)}finally{w.value=!1}},L=async r=>{if(!r.length){i.value=[];return}try{w.value=!0;const x=await fetch(`/admin/geographic/departamentos?territorio_ids=${r.join(",")}`);i.value=await x.json()}catch(x){console.error("Error loading departamentos:",x)}finally{w.value=!1}},G=async r=>{if(!r.length){b.value=[];return}try{w.value=!0;const x=await fetch(`/admin/geographic/municipios?departamento_ids=${r.join(",")}`);b.value=await x.json()}catch(x){console.error("Error loading municipios:",x)}finally{w.value=!1}},O=async r=>{if(!r.length){D.value=[];return}try{w.value=!0;const x=await fetch(`/admin/geographic/localidades?municipio_ids=${r.join(",")}`);D.value=await x.json()}catch(x){console.error("Error loading localidades:",x)}finally{w.value=!1}},V=(r,x)=>{var t,o,n,v;const T=Array.isArray(r)?r.map(Number).filter(Boolean):r?[Number(r)].filter(Boolean):[],c={territorios_ids:((t=f.modelValue)==null?void 0:t.territorios_ids)||[],departamentos_ids:((o=f.modelValue)==null?void 0:o.departamentos_ids)||[],municipios_ids:((n=f.modelValue)==null?void 0:n.municipios_ids)||[],localidades_ids:((v=f.modelValue)==null?void 0:v.localidades_ids)||[],...f.modelValue};c[x]=T,x==="territorios_ids"?(c.departamentos_ids=[],c.municipios_ids=[],c.localidades_ids=[],le(()=>L(T))):x==="departamentos_ids"?(c.municipios_ids=[],c.localidades_ids=[],le(()=>G(T))):x==="municipios_ids"&&(c.localidades_ids=[],le(()=>O(T))),S("update:modelValue",c)};return Se(async()=>{var r,x,T,c,t,o;await I(),(x=(r=f.modelValue)==null?void 0:r.territorios_ids)!=null&&x.length&&await L(f.modelValue.territorios_ids),(c=(T=f.modelValue)==null?void 0:T.departamentos_ids)!=null&&c.length&&await G(f.modelValue.departamentos_ids),(o=(t=f.modelValue)==null?void 0:t.municipios_ids)!=null&&o.length&&await O(f.modelValue.municipios_ids)}),(r,x)=>(m(),A(e(X),{class:"border-dashed"},{default:a(()=>[l(e(te),null,{default:a(()=>[l(e(se),{class:"text-base"},{default:a(()=>[u(_(r.title),1)]),_:1}),s("p",He,_(r.description),1)]),_:1}),l(e(Q),{class:"space-y-4"},{default:a(()=>{var T,c,t,o,n,v,y;return[s("div",null,[l(e(C),null,{default:a(()=>x[4]||(x[4]=[u("Territorios")])),_:1}),l(e(q),{"model-value":(((T=f.modelValue)==null?void 0:T.territorios_ids)||[]).map(g=>g.toString()),"onUpdate:modelValue":x[0]||(x[0]=g=>V(g,"territorios_ids")),multiple:"",disabled:r.disabled||w.value},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Seleccionar territorios..."})]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(d.value,g=>(m(),A(e(h),{key:g.id,value:g.id.toString()},{default:a(()=>[u(_(g.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),s("p",Je,_(f.modelValue.territorios_ids.length)+" territorio(s) seleccionado(s) ",1)]),i.value.length>0?(m(),p("div",Qe,[l(e(C),null,{default:a(()=>x[5]||(x[5]=[u("Departamentos")])),_:1}),l(e(q),{"model-value":(((c=f.modelValue)==null?void 0:c.departamentos_ids)||[]).map(g=>g.toString()),"onUpdate:modelValue":x[1]||(x[1]=g=>V(g,"departamentos_ids")),multiple:"",disabled:r.disabled||w.value},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Seleccionar departamentos..."})]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(i.value,g=>(m(),A(e(h),{key:g.id,value:g.id.toString()},{default:a(()=>[u(_(g.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),s("p",Xe,_((((t=f.modelValue)==null?void 0:t.departamentos_ids)||[]).length)+" departamento(s) seleccionado(s) ",1)])):k("",!0),b.value.length>0?(m(),p("div",Ze,[l(e(C),null,{default:a(()=>x[6]||(x[6]=[u("Municipios")])),_:1}),l(e(q),{"model-value":(((o=f.modelValue)==null?void 0:o.municipios_ids)||[]).map(g=>g.toString()),"onUpdate:modelValue":x[2]||(x[2]=g=>V(g,"municipios_ids")),multiple:"",disabled:r.disabled||w.value},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Seleccionar municipios..."})]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(b.value,g=>(m(),A(e(h),{key:g.id,value:g.id.toString()},{default:a(()=>[u(_(g.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),s("p",Ke,_((((n=f.modelValue)==null?void 0:n.municipios_ids)||[]).length)+" municipio(s) seleccionado(s) ",1)])):k("",!0),D.value.length>0?(m(),p("div",et,[l(e(C),null,{default:a(()=>x[7]||(x[7]=[u("Localidades")])),_:1}),l(e(q),{"model-value":(((v=f.modelValue)==null?void 0:v.localidades_ids)||[]).map(g=>g.toString()),"onUpdate:modelValue":x[3]||(x[3]=g=>V(g,"localidades_ids")),multiple:"",disabled:r.disabled||w.value},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Seleccionar localidades..."})]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(D.value,g=>(m(),A(e(h),{key:g.id,value:g.id.toString()},{default:a(()=>[u(_(g.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),s("p",tt,_((((y=f.modelValue)==null?void 0:y.localidades_ids)||[]).length)+" localidad(es) seleccionada(s) ",1)])):k("",!0)]}),_:1})]),_:1}))}}),lt={class:"space-y-4"},at={key:0,class:"space-y-2"},it={class:"space-y-2"},st={class:"flex items-center justify-between"},dt={class:"flex items-center gap-2 flex-1"},nt={class:"flex-1"},rt={class:"flex items-center gap-2"},ut={class:"font-medium text-sm"},mt={class:"text-xs text-muted-foreground"},pt={key:0,class:"text-xs text-red-500"},ct={key:0,class:"text-xs text-muted-foreground mt-1"},ft={class:"flex items-center gap-1"},vt={key:1,class:"text-center py-4 text-sm text-muted-foreground"},gt={class:"flex items-center justify-between"},Ct={class:"text-sm font-semibold"},xt={key:0},bt={key:1},_t={class:"flex items-center space-x-2"},yt={class:"flex justify-end gap-2"},kt=oe({__name:"RepeaterBuilder",props:{modelValue:{}},emits:["update:modelValue"],setup(Y,{emit:E}){const f=Y,S=E,d=[{value:"text",label:"Texto corto"},{value:"number",label:"Campo numérico"},{value:"email",label:"Correo electrónico"},{value:"date",label:"Fecha"},{value:"textarea",label:"Texto largo"},{value:"select",label:"Lista desplegable"},{value:"datepicker",label:"Selector de fecha avanzado"}],i=M(f.modelValue||[]),b=M({id:"",type:"text",title:"",description:"",required:!1,options:[],placeholder:""}),D=M(!1),w=M(null);H(()=>f.modelValue,o=>{i.value=o||[]}),H(i,o=>{S("update:modelValue",o)},{deep:!0});const I=()=>{b.value={id:"",type:"text",title:"",description:"",required:!1,options:[],placeholder:""},D.value=!1,w.value=null},L=()=>`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,G=()=>{if(!b.value.title){alert("Por favor ingresa un título para el campo");return}b.value.id||(b.value.id=L());const o={id:b.value.id,type:b.value.type,title:b.value.title,description:b.value.description||void 0,required:b.value.required,placeholder:b.value.placeholder||void 0};b.value.type==="select"&&b.value.options&&b.value.options.length>0&&(o.options=b.value.options),b.value.type==="number"&&(o.numberConfig={min:void 0,max:void 0,step:1,decimals:0}),b.value.type==="datepicker"&&(o.datepickerConfig={minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0}),w.value!==null?i.value[w.value]=o:i.value.push(o),I()},O=o=>{const n=i.value[o];b.value={...n,options:n.options||[]},w.value=o,D.value=!0},V=o=>{confirm("¿Estás seguro de eliminar este campo?")&&i.value.splice(o,1)},r=o=>{if(o>0){const n=i.value[o];i.value[o]=i.value[o-1],i.value[o-1]=n}},x=o=>{if(o<i.value.length-1){const n=i.value[o];i.value[o]=i.value[o+1],i.value[o+1]=n}},T=M("");H(T,o=>{b.value.type==="select"&&(b.value.options=o.split(`
`).map(n=>n.trim()).filter(n=>n!==""))}),H(()=>w.value,o=>{var n;o!==null&&((n=i.value[o])!=null&&n.options)?T.value=i.value[o].options.join(`
`):T.value=""});const c=J(()=>b.value.type==="select"),t=o=>{const n=d.find(v=>v.value===o);return n?n.label:o};return(o,n)=>(m(),p("div",lt,[i.value.length>0?(m(),p("div",at,[l(e(C),{class:"text-sm font-medium"},{default:a(()=>n[7]||(n[7]=[u("Subcampos configurados:")])),_:1}),s("div",it,[(m(!0),p($,null,U(i.value,(v,y)=>(m(),A(e(X),{key:v.id,class:"relative"},{default:a(()=>[l(e(Q),{class:"p-3"},{default:a(()=>[s("div",st,[s("div",dt,[l(e(Ie),{class:"h-4 w-4 text-muted-foreground"}),s("div",nt,[s("div",rt,[s("span",ut,_(v.title),1),s("span",mt,"("+_(t(v.type))+")",1),v.required?(m(),p("span",pt,"*Requerido")):k("",!0)]),v.description?(m(),p("p",ct,_(v.description),1)):k("",!0)])]),s("div",ft,[l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:g=>r(y),disabled:y===0,class:"h-8 w-8 p-0"},{default:a(()=>[l(e(je),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:g=>x(y),disabled:y===i.value.length-1,class:"h-8 w-8 p-0"},{default:a(()=>[l(e(Pe),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:g=>O(y),class:"h-8 px-2"},{default:a(()=>n[8]||(n[8]=[u(" Editar ")])),_:2},1032,["onClick"]),l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:g=>V(y),class:"h-8 w-8 p-0"},{default:a(()=>[l(e(ee),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))])])):(m(),p("div",vt," No hay subcampos configurados. Agrega al menos un campo. ")),D.value?(m(),A(e(X),{key:2,class:"border-primary"},{default:a(()=>[l(e(te),{class:"pb-3"},{default:a(()=>[s("div",gt,[s("h4",Ct,_(w.value!==null?"Editar":"Agregar")+" Subcampo ",1),l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:I,class:"h-8 w-8 p-0"},{default:a(()=>n[9]||(n[9]=[u(" × ")])),_:1})])]),_:1}),l(e(Q),{class:"space-y-4"},{default:a(()=>[s("div",null,[l(e(C),{for:"field-type"},{default:a(()=>n[10]||(n[10]=[u("Tipo de campo *")])),_:1}),l(e(q),{modelValue:b.value.type,"onUpdate:modelValue":n[0]||(n[0]=v=>b.value.type=v)},{default:a(()=>[l(e(N),{id:"field-type"},{default:a(()=>[l(e(j))]),_:1}),l(e(P),null,{default:a(()=>[(m(),p($,null,U(d,v=>l(e(h),{key:v.value,value:v.value},{default:a(()=>[u(_(v.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[l(e(C),{for:"field-title"},{default:a(()=>n[11]||(n[11]=[u("Título del campo *")])),_:1}),l(e(B),{id:"field-title",modelValue:b.value.title,"onUpdate:modelValue":n[1]||(n[1]=v=>b.value.title=v),placeholder:"Ej: Nombre completo"},null,8,["modelValue"])]),s("div",null,[l(e(C),{for:"field-description"},{default:a(()=>n[12]||(n[12]=[u("Descripción (opcional)")])),_:1}),l(e(B),{id:"field-description",modelValue:b.value.description,"onUpdate:modelValue":n[2]||(n[2]=v=>b.value.description=v),placeholder:"Texto de ayuda para el usuario"},null,8,["modelValue"])]),["text","number","email","textarea"].includes(b.value.type)?(m(),p("div",xt,[l(e(C),{for:"field-placeholder"},{default:a(()=>n[13]||(n[13]=[u("Placeholder (opcional)")])),_:1}),l(e(B),{id:"field-placeholder",modelValue:b.value.placeholder,"onUpdate:modelValue":n[3]||(n[3]=v=>b.value.placeholder=v),placeholder:"Texto que aparece cuando el campo está vacío"},null,8,["modelValue"])])):k("",!0),c.value?(m(),p("div",bt,[l(e(C),{for:"field-options"},{default:a(()=>n[14]||(n[14]=[u("Opciones (una por línea) *")])),_:1}),l(e(ie),{id:"field-options",modelValue:T.value,"onUpdate:modelValue":n[4]||(n[4]=v=>T.value=v),placeholder:`Opción 1
Opción 2
Opción 3`,rows:"4"},null,8,["modelValue"])])):k("",!0),s("div",_t,[l(e(z),{id:"field-required",checked:b.value.required,"onUpdate:checked":n[5]||(n[5]=v=>b.value.required=v)},null,8,["checked"]),l(e(C),{for:"field-required",class:"text-sm font-normal"},{default:a(()=>n[15]||(n[15]=[u(" Campo requerido ")])),_:1})]),s("div",yt,[l(e(F),{type:"button",variant:"outline",size:"sm",onClick:I},{default:a(()=>n[16]||(n[16]=[u(" Cancelar ")])),_:1}),l(e(F),{type:"button",size:"sm",onClick:G},{default:a(()=>[u(_(w.value!==null?"Actualizar":"Agregar")+" Campo ",1)]),_:1})])]),_:1})]),_:1})):k("",!0),D.value?k("",!0):(m(),A(e(F),{key:3,type:"button",variant:"outline",size:"sm",onClick:n[6]||(n[6]=v=>D.value=!0),class:"w-full"},{default:a(()=>[l(e(K),{class:"h-4 w-4 mr-2"}),n[17]||(n[17]=u(" Agregar Subcampo "))]),_:1}))]))}}),Vt={class:"flex items-center space-x-2"},wt={key:0,class:"space-y-4"},Tt={key:0,class:"p-4 bg-amber-100 border border-amber-300 rounded-lg"},At={class:"flex items-start gap-2"},Ft={class:"space-y-3"},$t={key:0},Dt={key:1,class:"text-xs text-muted-foreground mt-1"},Bt={class:"flex justify-end"},Ut={key:0,class:"mt-4"},ht={class:"flex items-center justify-between mb-2"},Et={key:0,class:"p-3 bg-gray-100 rounded-lg"},St={class:"text-sm font-medium text-gray-900 mt-1"},Mt=oe({__name:"ConditionalFieldConfig",props:{modelValue:{default:()=>({enabled:!1,showWhen:"all",conditions:[]})},fields:{},currentFieldId:{}},emits:["update:modelValue"],setup(Y,{emit:E}){const f=Y,S=E,d=J({get(){var t,o,n;return{enabled:((t=f.modelValue)==null?void 0:t.enabled)||!1,showWhen:((o=f.modelValue)==null?void 0:o.showWhen)||"all",conditions:((n=f.modelValue)==null?void 0:n.conditions)||[]}},set(t){S("update:modelValue",t)}}),i=t=>{d.value={...d.value,...t}},b=J(()=>f.fields.filter(t=>t.id===f.currentFieldId?!1:["select","radio","checkbox"].includes(t.type))),D=[{value:"equals",label:"Es igual a"},{value:"not_equals",label:"No es igual a"},{value:"contains",label:"Contiene"},{value:"not_contains",label:"No contiene"},{value:"is_empty",label:"Está vacío"},{value:"is_not_empty",label:"No está vacío"}],w=()=>{const t={fieldId:"",operator:"equals",value:""},o=[...d.value.conditions,t];i({conditions:o})},I=t=>{const o=d.value.conditions.filter((n,v)=>v!==t);i({conditions:o})},L=t=>{const o=f.fields.find(n=>n.id===t);return o?o.options||[]:[]},G=t=>{const o=f.fields.find(n=>n.id===t);return(o==null?void 0:o.title)||t},O=t=>!["is_empty","is_not_empty"].includes(t),V=(t,o)=>{const n=[...d.value.conditions];n[t]={...n[t],value:o},i({conditions:n})},r=(t,o)=>{const n=[...d.value.conditions];n[t]={...n[t],fieldId:o,value:""},i({conditions:n})},x=(t,o)=>{const n=[...d.value.conditions];n[t]={...n[t],operator:o,value:O(o)?n[t].value:void 0},i({conditions:n})},T=J(()=>{if(!d.value.enabled||d.value.conditions.length===0)return"Sin condiciones configuradas";const t=d.value.showWhen==="all"?" Y ":" O ";return d.value.conditions.map(n=>{var R;const v=G(n.fieldId),y=((R=D.find(Z=>Z.value===n.operator))==null?void 0:R.label)||n.operator;if(!O(n.operator))return`"${v}" ${y}`;const g=Array.isArray(n.value)?n.value.join(", "):n.value||"[valor]";return`"${v}" ${y} "${g}"`}).join(t)}),c=M(!1);return(t,o)=>(m(),A(e(X),{class:"border-orange-200 bg-orange-50"},{default:a(()=>[l(e(te),null,{default:a(()=>[l(e(se),{class:"text-orange-900 flex items-center justify-between"},{default:a(()=>[o[3]||(o[3]=s("span",null,"Configuración Condicional",-1)),d.value.enabled?(m(),A(e(W),{key:0,variant:"secondary",class:"bg-orange-100"},{default:a(()=>[u(_(d.value.conditions.length)+" condicion"+_(d.value.conditions.length!==1?"es":""),1)]),_:1})):k("",!0)]),_:1}),l(e(Le),{class:"text-orange-700"},{default:a(()=>o[4]||(o[4]=[u(" Define cuándo debe mostrarse este campo basándose en valores de otros campos ")])),_:1})]),_:1}),l(e(Q),{class:"space-y-4"},{default:a(()=>[s("div",Vt,[l(e(z),{id:"enable_conditions",checked:d.value.enabled,"onUpdate:checked":o[0]||(o[0]=n=>i({enabled:n}))},null,8,["checked"]),l(e(C),{for:"enable_conditions",class:"text-sm font-medium"},{default:a(()=>o[5]||(o[5]=[u(" Hacer este campo condicional "),s("span",{class:"text-muted-foreground block text-xs"}," El campo solo se mostrará cuando se cumplan las condiciones definidas ",-1)])),_:1})]),d.value.enabled?(m(),p("div",wt,[b.value.length===0?(m(),p("div",Tt,[s("div",At,[l(e(qe),{class:"h-5 w-5 text-amber-600 mt-0.5"}),o[6]||(o[6]=s("div",{class:"text-sm text-amber-800"},[s("p",{class:"font-medium"},"No hay campos disponibles para condiciones"),s("p",{class:"mt-1"},'Agrega campos de tipo "Lista desplegable", "Opción múltiple" o "Casillas de verificación" antes de configurar condiciones.')],-1))])])):(m(),p($,{key:1},[s("div",null,[l(e(C),null,{default:a(()=>o[7]||(o[7]=[u("Mostrar este campo cuando:")])),_:1}),l(e(q),{"model-value":d.value.showWhen,"onUpdate:modelValue":o[1]||(o[1]=n=>i({showWhen:n}))},{default:a(()=>[l(e(N),{class:"w-full"},{default:a(()=>[l(e(j))]),_:1}),l(e(P),null,{default:a(()=>[l(e(h),{value:"all"},{default:a(()=>o[8]||(o[8]=[u(" Se cumplan TODAS las condiciones (AND) ")])),_:1}),l(e(h),{value:"any"},{default:a(()=>o[9]||(o[9]=[u(" Se cumpla ALGUNA condición (OR) ")])),_:1})]),_:1})]),_:1},8,["model-value"])]),s("div",Ft,[(m(!0),p($,null,U(d.value.conditions,(n,v)=>(m(),p("div",{key:v,class:"p-3 bg-white border rounded-lg space-y-3"},[s("div",null,[l(e(C),{class:"text-xs"},{default:a(()=>o[10]||(o[10]=[u("Campo a evaluar")])),_:1}),l(e(q),{"model-value":n.fieldId,"onUpdate:modelValue":y=>r(v,y)},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Selecciona un campo"})]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(b.value,y=>(m(),A(e(h),{key:y.id,value:y.id},{default:a(()=>[u(_(y.title)+" ",1),l(e(W),{variant:"outline",class:"ml-2 text-xs"},{default:a(()=>[u(_(y.type),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"])]),s("div",null,[l(e(C),{class:"text-xs"},{default:a(()=>o[11]||(o[11]=[u("Operador")])),_:1}),l(e(q),{"model-value":n.operator,"onUpdate:modelValue":y=>x(v,y)},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j))]),_:1}),l(e(P),null,{default:a(()=>[(m(),p($,null,U(D,y=>l(e(h),{key:y.value,value:y.value},{default:a(()=>[u(_(y.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"])]),O(n.operator)&&n.fieldId?(m(),p("div",$t,[l(e(C),{class:"text-xs"},{default:a(()=>o[12]||(o[12]=[u("Valor")])),_:1}),L(n.fieldId).length>0?(m(),A(e(q),{key:0,"model-value":n.value,"onUpdate:modelValue":y=>V(v,y)},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Selecciona un valor"})]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(L(n.fieldId),y=>(m(),A(e(h),{key:y,value:y},{default:a(()=>[u(_(y),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue"])):(m(),p("p",Dt," El campo seleccionado no tiene opciones definidas "))])):k("",!0),s("div",Bt,[l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:y=>I(v),class:"text-destructive"},{default:a(()=>[l(e(ee),{class:"h-4 w-4 mr-1"}),o[13]||(o[13]=u(" Eliminar condición "))]),_:2},1032,["onClick"])])]))),128)),l(e(F),{type:"button",variant:"outline",size:"sm",onClick:w,class:"w-full"},{default:a(()=>[l(e(K),{class:"h-4 w-4 mr-2"}),o[14]||(o[14]=u(" Agregar condición "))]),_:1})]),d.value.conditions.length>0?(m(),p("div",Ut,[s("div",ht,[l(e(C),{class:"text-xs"},{default:a(()=>o[15]||(o[15]=[u("Vista previa de la regla:")])),_:1}),l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:o[2]||(o[2]=n=>c.value=!c.value)},{default:a(()=>[(m(),A(ze(c.value?e(Re):e(Me)),{class:"h-4 w-4 mr-1"})),u(" "+_(c.value?"Ocultar":"Mostrar"),1)]),_:1})]),c.value?(m(),p("div",Et,[o[16]||(o[16]=s("p",{class:"text-sm text-gray-700"}," Este campo se mostrará cuando: ",-1)),s("p",St,_(T.value),1)])):k("",!0)])):k("",!0)],64))])):k("",!0)]),_:1})]),_:1}))}}),ae=[{value:"text",label:"Texto corto"},{value:"textarea",label:"Texto largo"},{value:"number",label:"Campo numérico"},{value:"email",label:"Correo electrónico"},{value:"date",label:"Fecha (HTML5)"},{value:"select",label:"Lista desplegable"},{value:"radio",label:"Opción múltiple"},{value:"checkbox",label:"Casillas de verificación"},{value:"file",label:"Archivo"},{value:"datepicker",label:"Selector de fecha"},{value:"disclaimer",label:"Aceptar disclaimer"},{value:"repeater",label:"Repetidor"},{value:"perfil_candidatura",label:"Perfil de Candidatura"},{value:"convocatoria",label:"Elegir Convocatoria"}],el=[{value:"America/Bogota",label:"Colombia (GMT-5) - America/Bogota"},{value:"America/Mexico_City",label:"México (GMT-6) - America/Mexico_City"},{value:"America/Buenos_Aires",label:"Argentina (GMT-3) - America/Buenos_Aires"},{value:"America/Sao_Paulo",label:"Brasil (GMT-3) - America/Sao_Paulo"},{value:"America/Santiago",label:"Chile (GMT-3) - America/Santiago"},{value:"America/Lima",label:"Perú (GMT-5) - America/Lima"},{value:"America/Caracas",label:"Venezuela (GMT-4) - America/Caracas"},{value:"America/La_Paz",label:"Bolivia (GMT-4) - America/La_Paz"},{value:"America/Quito",label:"Ecuador (GMT-5) - America/Quito"},{value:"America/Panama",label:"Panamá (GMT-5) - America/Panama"},{value:"America/Costa_Rica",label:"Costa Rica (GMT-6) - America/Costa_Rica"},{value:"America/Guatemala",label:"Guatemala (GMT-6) - America/Guatemala"},{value:"America/Montevideo",label:"Uruguay (GMT-3) - America/Montevideo"},{value:"America/Asuncion",label:"Paraguay (GMT-3) - America/Asuncion"}],qt={class:"space-y-6"},Nt={class:"flex items-center justify-between"},jt={class:"text-lg font-semibold"},Pt={class:"text-sm text-muted-foreground"},Ot={key:0,class:"space-y-4"},zt={class:"flex-1"},It={class:"flex items-center gap-2"},Lt={key:0,class:"text-red-500"},Gt={class:"font-medium"},Yt={key:0,class:"text-sm text-muted-foreground"},Rt={key:1,class:"mt-2"},Wt={class:"flex flex-wrap gap-1 mt-1"},Ht={class:"flex gap-2"},Jt={key:1,class:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg"},Qt={class:"grid gap-4 md:grid-cols-2"},Xt={class:"space-y-3 mt-6"},Zt={class:"flex items-center space-x-2"},Kt={key:0,class:"flex items-center space-x-2"},eo={key:0},to={class:"flex items-center justify-between"},oo={class:"space-y-2 mt-2"},lo={key:1,class:"space-y-4"},ao={class:"p-4 bg-blue-50 rounded-lg border border-blue-200"},io={key:0,class:"mb-4"},so={key:1,class:"mb-4"},no={class:"mb-4"},ro={class:"flex items-center space-x-2 mb-3"},uo={class:"flex items-center space-x-2"},mo={key:2,class:"space-y-4"},po={class:"p-4 bg-purple-50 rounded-lg border border-purple-200"},co={class:"space-y-4"},fo={class:"flex items-center space-x-2"},vo={key:0},go={key:3,class:"space-y-4"},Co={class:"p-4 bg-indigo-50 rounded-lg border border-indigo-200"},xo={class:"space-y-4"},bo={class:"flex items-center space-x-2"},_o={class:"flex items-center space-x-2"},yo={key:4,class:"space-y-4"},ko={class:"p-4 bg-amber-50 rounded-lg border border-amber-200"},Vo={class:"space-y-4"},wo={key:5,class:"space-y-4"},To={class:"p-4 bg-cyan-50 rounded-lg border border-cyan-200"},Ao={class:"space-y-4"},Fo={key:6,class:"space-y-4"},$o={class:"p-4 bg-green-50 rounded-lg border border-green-200"},Do={key:0,class:"mb-4"},Bo={class:"flex flex-col"},Uo={key:0,class:"text-xs text-muted-foreground"},ho={key:0},Eo={key:1,class:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-md"},So={class:"flex items-center space-x-2 mb-3"},Mo={class:"flex items-center space-x-2"},qo={key:7},No={class:"flex justify-end gap-2"},tl=oe({__name:"DynamicFormBuilder",props:{modelValue:{},disabled:{type:Boolean,default:!1},title:{default:"Constructor de Formulario"},description:{default:"Agrega los campos que aparecerán en el formulario"},showEditableOption:{type:Boolean,default:!1},showPerfilCandidaturaConfig:{type:Boolean,default:!1},cargos:{default:()=>[]},periodosElectorales:{default:()=>[]},showConvocatoriaConfig:{type:Boolean,default:!1},convocatorias:{default:()=>[]},context:{default:"convocatoria"}},emits:["update:modelValue"],setup(Y,{emit:E}){const f=Y,S=E,{fields:d,newField:i,showFieldForm:b,editingFieldIndex:D,addField:w,editField:I,removeField:L,resetFieldForm:G,addOption:O,removeOption:V,setFields:r}=We(f.modelValue);H(()=>i.type,c=>{i.conditionalConfig||(i.conditionalConfig={enabled:!1,showWhen:"all",conditions:[]}),c==="perfil_candidatura"&&!i.perfilCandidaturaConfig&&(i.perfilCandidaturaConfig={cargo_id:void 0,periodo_electoral_id:void 0,territorio_id:void 0,departamento_id:void 0,municipio_id:void 0,localidad_id:void 0,territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[],multiple:!1,mostrarVotoBlanco:!0}),c==="convocatoria"&&!i.convocatoriaConfig&&(i.convocatoriaConfig={convocatoria_id:void 0,multiple:!1,mostrarVotoBlanco:f.context==="votacion",filtrarPorUbicacion:f.context==="candidatura"}),c==="file"&&!i.fileConfig&&(i.fileConfig={multiple:!1,maxFiles:5,maxFileSize:10,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"}),c==="datepicker"&&!i.datepickerConfig&&(i.datepickerConfig={minDate:void 0,maxDate:void 0,format:"DD/MM/YYYY",allowPastDates:!0,allowFutureDates:!0}),c==="disclaimer"&&!i.disclaimerConfig&&(i.disclaimerConfig={disclaimerText:"",modalTitle:"Términos y Condiciones",acceptButtonText:"Acepto",declineButtonText:"No acepto"}),c==="repeater"&&!i.repeaterConfig&&(i.repeaterConfig={minItems:0,maxItems:10,itemName:"Elemento",addButtonText:"Agregar elemento",removeButtonText:"Eliminar",fields:[]})}),H(()=>f.modelValue,c=>{JSON.stringify(c)!==JSON.stringify(d.value)&&r(c)},{deep:!0}),H(d,c=>{S("update:modelValue",c)},{deep:!0});const x=()=>{i.title.trim()&&w()},T=J(()=>f.context==="votacion"?ae.filter(c=>c.value!=="perfil_candidatura"):f.context==="candidatura"?ae.filter(c=>c.value!=="perfil_candidatura"):ae.filter(c=>c.value!=="convocatoria"));return Se(()=>{r(f.modelValue),i.conditionalConfig||(i.conditionalConfig={enabled:!1,showWhen:"all",conditions:[]})}),(c,t)=>(m(),p("div",qt,[s("div",Nt,[s("div",null,[s("h3",jt,_(c.title),1),s("p",Pt,_(c.description),1)]),l(e(F),{type:"button",onClick:t[0]||(t[0]=o=>b.value=!0),disabled:c.disabled},{default:a(()=>[l(e(K),{class:"mr-2 h-4 w-4"}),t[32]||(t[32]=u(" Agregar Campo "))]),_:1},8,["disabled"])]),e(d).length>0?(m(),p("div",Ot,[(m(!0),p($,null,U(e(d),(o,n)=>{var v,y;return m(),p("div",{key:o.id,class:"border rounded-lg p-4 flex items-center justify-between"},[s("div",zt,[s("div",It,[l(e(W),{variant:"outline"},{default:a(()=>{var g;return[u(_(((g=T.value.find(R=>R.value===o.type))==null?void 0:g.label)||o.type),1)]}),_:2},1024),o.required?(m(),p("span",Lt,"*")):k("",!0),c.showEditableOption&&o.editable?(m(),A(e(W),{key:1,variant:"secondary",class:"text-xs bg-green-100 text-green-800"},{default:a(()=>t[33]||(t[33]=[u(" Editable ")])),_:1})):k("",!0),(v=o.conditionalConfig)!=null&&v.enabled?(m(),A(e(W),{key:2,variant:"secondary",class:"text-xs bg-orange-100 text-orange-800"},{default:a(()=>[l(e(Ye),{class:"h-3 w-3 mr-1"}),t[34]||(t[34]=u(" Condicional "))]),_:1})):k("",!0),o.type==="convocatoria"&&((y=o.convocatoriaConfig)!=null&&y.convocatoria_id)?(m(),A(e(W),{key:3,variant:"secondary",class:"text-xs"},{default:a(()=>[u(" Conv. ID: "+_(o.convocatoriaConfig.convocatoria_id),1)]),_:2},1024)):k("",!0)]),s("h4",Gt,_(o.title),1),o.description?(m(),p("p",Yt,_(o.description),1)):k("",!0),o.options&&o.options.length>0?(m(),p("div",Rt,[t[35]||(t[35]=s("p",{class:"text-xs text-muted-foreground"},"Opciones:",-1)),s("div",Wt,[(m(!0),p($,null,U(o.options,g=>(m(),A(e(W),{key:g,variant:"secondary",class:"text-xs"},{default:a(()=>[u(_(g),1)]),_:2},1024))),128))])])):k("",!0)]),s("div",Ht,[l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:g=>e(I)(n),disabled:c.disabled},{default:a(()=>[l(e(Me),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:g=>e(L)(n),disabled:c.disabled},{default:a(()=>[l(e(ee),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick","disabled"])])])}),128))])):(m(),p("div",Jt,t[36]||(t[36]=[s("p",null,"No hay campos configurados",-1),s("p",{class:"text-sm"},"Agrega al menos un campo para continuar",-1)]))),e(b)?(m(),A(e(X),{key:2},{default:a(()=>[l(e(te),null,{default:a(()=>[l(e(se),{class:"flex items-center justify-between"},{default:a(()=>[u(_(e(D)!==null?"Editar Campo":"Nuevo Campo")+" ",1),l(e(F),{type:"button",variant:"ghost",size:"sm",onClick:e(G)},{default:a(()=>[l(e(Ge),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),_:1})]),_:1}),l(e(Q),{class:"space-y-4"},{default:a(()=>[s("div",Qt,[s("div",null,[l(e(C),null,{default:a(()=>t[37]||(t[37]=[u("Tipo de Campo")])),_:1}),l(e(q),{modelValue:e(i).type,"onUpdate:modelValue":t[1]||(t[1]=o=>e(i).type=o)},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j))]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(T.value,o=>(m(),A(e(h),{key:o.value,value:o.value},{default:a(()=>[u(_(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",Xt,[s("div",Zt,[l(e(z),{id:"field_required",checked:e(i).required,"onUpdate:checked":t[2]||(t[2]=o=>e(i).required=o)},null,8,["checked"]),l(e(C),null,{default:a(()=>t[38]||(t[38]=[u("Campo obligatorio")])),_:1})]),c.showEditableOption?(m(),p("div",Kt,[l(e(z),{id:"field_editable",checked:e(i).editable,"onUpdate:checked":t[3]||(t[3]=o=>e(i).editable=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[39]||(t[39]=[u(" Campo editable en candidaturas aprobadas "),s("span",{class:"text-muted-foreground block text-xs"}," Los usuarios podrán editar este campo incluso con candidatura aprobada ",-1)])),_:1})])):k("",!0)])]),s("div",null,[l(e(C),null,{default:a(()=>t[40]||(t[40]=[u("Título del Campo *")])),_:1}),l(e(B),{id:"field_title",modelValue:e(i).title,"onUpdate:modelValue":t[4]||(t[4]=o=>e(i).title=o),placeholder:"Ej: ¿Cuál es tu candidato preferido?"},null,8,["modelValue"])]),s("div",null,[l(e(C),null,{default:a(()=>t[41]||(t[41]=[u("Descripción (opcional)")])),_:1}),l(e(ie),{id:"field_description",modelValue:e(i).description,"onUpdate:modelValue":t[5]||(t[5]=o=>e(i).description=o),placeholder:"Descripción adicional del campo",rows:"2"},null,8,["modelValue"])]),["select","radio","checkbox"].includes(e(i).type)?(m(),p("div",eo,[s("div",to,[l(e(C),null,{default:a(()=>t[42]||(t[42]=[u("Opciones")])),_:1}),l(e(F),{type:"button",variant:"outline",size:"sm",onClick:e(O)},{default:a(()=>[l(e(K),{class:"mr-2 h-3 w-3"}),t[43]||(t[43]=u(" Agregar Opción "))]),_:1},8,["onClick"])]),s("div",oo,[(m(!0),p($,null,U(e(i).options,(o,n)=>(m(),p("div",{key:n,class:"flex gap-2"},[l(e(B),{modelValue:e(i).options[n],"onUpdate:modelValue":v=>e(i).options[n]=v,placeholder:"Texto de la opción"},null,8,["modelValue","onUpdate:modelValue"]),l(e(F),{type:"button",variant:"outline",size:"sm",onClick:v=>e(V)(n)},{default:a(()=>[l(e(ee),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]))),128))])])):k("",!0),e(i).type==="perfil_candidatura"&&c.context!=="votacion"&&c.showPerfilCandidaturaConfig&&e(i).perfilCandidaturaConfig?(m(),p("div",lo,[s("div",ao,[t[54]||(t[54]=s("h4",{class:"font-medium text-blue-900 mb-3"},"Configuración de Filtros para Candidatos",-1)),t[55]||(t[55]=s("p",{class:"text-sm text-blue-700 mb-4"}," Define los criterios para filtrar qué usuarios con postulaciones aprobadas aparecerán como opciones de voto. ",-1)),f.cargos&&f.cargos.length>0?(m(),p("div",io,[l(e(C),null,{default:a(()=>t[44]||(t[44]=[u("Cargo (opcional)")])),_:1}),l(e(q),{modelValue:e(i).perfilCandidaturaConfig.cargo_id,"onUpdate:modelValue":t[6]||(t[6]=o=>e(i).perfilCandidaturaConfig.cargo_id=o)},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Todos los cargos"})]),_:1}),l(e(P),null,{default:a(()=>[l(e(h),{value:"all"},{default:a(()=>t[45]||(t[45]=[u("Todos los cargos")])),_:1}),(m(!0),p($,null,U(f.cargos,o=>(m(),A(e(h),{key:o.id,value:o.id.toString()},{default:a(()=>[u(_(o.ruta_jerarquica||o.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t[46]||(t[46]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Filtrar candidatos postulados a este cargo específico ",-1))])):k("",!0),f.periodosElectorales&&f.periodosElectorales.length>0?(m(),p("div",so,[l(e(C),null,{default:a(()=>t[47]||(t[47]=[u("Período Electoral (opcional)")])),_:1}),l(e(q),{modelValue:e(i).perfilCandidaturaConfig.periodo_electoral_id,"onUpdate:modelValue":t[7]||(t[7]=o=>e(i).perfilCandidaturaConfig.periodo_electoral_id=o)},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Todos los períodos"})]),_:1}),l(e(P),null,{default:a(()=>[l(e(h),{value:"all"},{default:a(()=>t[48]||(t[48]=[u("Todos los períodos")])),_:1}),(m(!0),p($,null,U(f.periodosElectorales,o=>(m(),A(e(h),{key:o.id,value:o.id.toString()},{default:a(()=>[u(_(o.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t[49]||(t[49]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Filtrar candidatos del período electoral seleccionado ",-1))])):k("",!0),s("div",no,[l(e(C),{class:"mb-2"},{default:a(()=>t[50]||(t[50]=[u("Restricciones Geográficas (opcional)")])),_:1}),l(ot,{modelValue:e(i).perfilCandidaturaConfig,"onUpdate:modelValue":t[8]||(t[8]=o=>e(i).perfilCandidaturaConfig=o)},null,8,["modelValue"]),t[51]||(t[51]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Filtrar candidatos por ubicación geográfica ",-1))]),s("div",ro,[l(e(z),{id:"perfil_multiple",checked:e(i).perfilCandidaturaConfig.multiple,"onUpdate:checked":t[9]||(t[9]=o=>e(i).perfilCandidaturaConfig.multiple=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[52]||(t[52]=[u(" Permitir selección múltiple "),s("span",{class:"text-muted-foreground block text-xs"}," Los votantes podrán seleccionar varios candidatos ",-1)])),_:1})]),s("div",uo,[l(e(z),{id:"perfil_voto_blanco",checked:e(i).perfilCandidaturaConfig.mostrarVotoBlanco,"onUpdate:checked":t[10]||(t[10]=o=>e(i).perfilCandidaturaConfig.mostrarVotoBlanco=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[53]||(t[53]=[u(" ¿Deseas mostrar Voto en Blanco? "),s("span",{class:"text-muted-foreground block text-xs"},' Agrega la opción "Voto en blanco" para los votantes ',-1)])),_:1})])])])):k("",!0),e(i).type==="file"&&e(i).fileConfig?(m(),p("div",mo,[s("div",po,[t[63]||(t[63]=s("h4",{class:"font-medium text-purple-900 mb-3"},"Configuración de Carga de Archivos",-1)),t[64]||(t[64]=s("p",{class:"text-sm text-purple-700 mb-4"}," Define las opciones para la carga de archivos. ",-1)),s("div",co,[s("div",fo,[l(e(z),{id:"file_multiple",checked:e(i).fileConfig.multiple,"onUpdate:checked":t[11]||(t[11]=o=>e(i).fileConfig.multiple=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[56]||(t[56]=[u(" Permitir múltiples archivos "),s("span",{class:"text-muted-foreground block text-xs"}," Los usuarios podrán subir más de un archivo ",-1)])),_:1})]),e(i).fileConfig.multiple?(m(),p("div",vo,[l(e(C),null,{default:a(()=>t[57]||(t[57]=[u("Número máximo de archivos")])),_:1}),l(e(B),{modelValue:e(i).fileConfig.maxFiles,"onUpdate:modelValue":t[12]||(t[12]=o=>e(i).fileConfig.maxFiles=o),modelModifiers:{number:!0},type:"number",min:"1",max:"20",placeholder:"5"},null,8,["modelValue"]),t[58]||(t[58]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Cantidad máxima de archivos que se pueden subir (1-20) ",-1))])):k("",!0),s("div",null,[l(e(C),null,{default:a(()=>t[59]||(t[59]=[u("Tamaño máximo por archivo (MB)")])),_:1}),l(e(B),{modelValue:e(i).fileConfig.maxFileSize,"onUpdate:modelValue":t[13]||(t[13]=o=>e(i).fileConfig.maxFileSize=o),modelModifiers:{number:!0},type:"number",min:"1",max:"100",placeholder:"10"},null,8,["modelValue"]),t[60]||(t[60]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Tamaño máximo en megabytes (1-100 MB) ",-1))]),s("div",null,[l(e(C),null,{default:a(()=>t[61]||(t[61]=[u("Tipos de archivo permitidos")])),_:1}),l(e(B),{modelValue:e(i).fileConfig.accept,"onUpdate:modelValue":t[14]||(t[14]=o=>e(i).fileConfig.accept=o),placeholder:".pdf,.doc,.docx,.jpg,.png"},null,8,["modelValue"]),t[62]||(t[62]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Extensiones separadas por comas (ej: .pdf,.doc,.jpg) ",-1))])])])])):k("",!0),e(i).type==="datepicker"&&e(i).datepickerConfig?(m(),p("div",go,[s("div",Co,[t[71]||(t[71]=s("h4",{class:"font-medium text-indigo-900 mb-3"},"Configuración de Selector de Fecha",-1)),t[72]||(t[72]=s("p",{class:"text-sm text-indigo-700 mb-4"}," Define las opciones y restricciones para el selector de fecha. ",-1)),s("div",xo,[s("div",null,[l(e(C),null,{default:a(()=>t[65]||(t[65]=[u("Fecha mínima (opcional)")])),_:1}),l(e(B),{type:"date",modelValue:e(i).datepickerConfig.minDate,"onUpdate:modelValue":t[15]||(t[15]=o=>e(i).datepickerConfig.minDate=o)},null,8,["modelValue"]),t[66]||(t[66]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Fecha más antigua que se puede seleccionar ",-1))]),s("div",null,[l(e(C),null,{default:a(()=>t[67]||(t[67]=[u("Fecha máxima (opcional)")])),_:1}),l(e(B),{type:"date",modelValue:e(i).datepickerConfig.maxDate,"onUpdate:modelValue":t[16]||(t[16]=o=>e(i).datepickerConfig.maxDate=o)},null,8,["modelValue"]),t[68]||(t[68]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Fecha más reciente que se puede seleccionar ",-1))]),s("div",bo,[l(e(z),{id:"datepicker_past",checked:e(i).datepickerConfig.allowPastDates,"onUpdate:checked":t[17]||(t[17]=o=>e(i).datepickerConfig.allowPastDates=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[69]||(t[69]=[u(" Permitir fechas pasadas "),s("span",{class:"text-muted-foreground block text-xs"}," Los usuarios podrán seleccionar fechas anteriores a hoy ",-1)])),_:1})]),s("div",_o,[l(e(z),{id:"datepicker_future",checked:e(i).datepickerConfig.allowFutureDates,"onUpdate:checked":t[18]||(t[18]=o=>e(i).datepickerConfig.allowFutureDates=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[70]||(t[70]=[u(" Permitir fechas futuras "),s("span",{class:"text-muted-foreground block text-xs"}," Los usuarios podrán seleccionar fechas posteriores a hoy ",-1)])),_:1})])])])])):k("",!0),e(i).type==="disclaimer"&&e(i).disclaimerConfig?(m(),p("div",yo,[s("div",ko,[t[78]||(t[78]=s("h4",{class:"font-medium text-amber-900 mb-3"},"Configuración del Disclaimer",-1)),t[79]||(t[79]=s("p",{class:"text-sm text-amber-700 mb-4"}," Define el texto legal que el usuario debe aceptar. ",-1)),s("div",Vo,[s("div",null,[l(e(C),null,{default:a(()=>t[73]||(t[73]=[u("Texto del disclaimer *")])),_:1}),l(e(ie),{modelValue:e(i).disclaimerConfig.disclaimerText,"onUpdate:modelValue":t[19]||(t[19]=o=>e(i).disclaimerConfig.disclaimerText=o),placeholder:"Ingrese aquí el texto de términos y condiciones que el usuario debe aceptar...",rows:"6"},null,8,["modelValue"]),t[74]||(t[74]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Este texto se mostrará en un modal cuando el usuario intente aceptar ",-1))]),s("div",null,[l(e(C),null,{default:a(()=>t[75]||(t[75]=[u("Título del modal")])),_:1}),l(e(B),{modelValue:e(i).disclaimerConfig.modalTitle,"onUpdate:modelValue":t[20]||(t[20]=o=>e(i).disclaimerConfig.modalTitle=o),placeholder:"Términos y Condiciones"},null,8,["modelValue"])]),s("div",null,[l(e(C),null,{default:a(()=>t[76]||(t[76]=[u("Texto del botón aceptar")])),_:1}),l(e(B),{modelValue:e(i).disclaimerConfig.acceptButtonText,"onUpdate:modelValue":t[21]||(t[21]=o=>e(i).disclaimerConfig.acceptButtonText=o),placeholder:"Acepto"},null,8,["modelValue"])]),s("div",null,[l(e(C),null,{default:a(()=>t[77]||(t[77]=[u("Texto del botón rechazar")])),_:1}),l(e(B),{modelValue:e(i).disclaimerConfig.declineButtonText,"onUpdate:modelValue":t[22]||(t[22]=o=>e(i).disclaimerConfig.declineButtonText=o),placeholder:"No acepto"},null,8,["modelValue"])])])])])):k("",!0),e(i).type==="repeater"&&e(i).repeaterConfig?(m(),p("div",wo,[s("div",To,[t[89]||(t[89]=s("h4",{class:"font-medium text-cyan-900 mb-3"},"Configuración del Repetidor",-1)),t[90]||(t[90]=s("p",{class:"text-sm text-cyan-700 mb-4"}," Define los subcampos y límites del repetidor. Los usuarios podrán agregar múltiples instancias de estos campos. ",-1)),s("div",Ao,[s("div",null,[l(e(C),null,{default:a(()=>t[80]||(t[80]=[u("Número mínimo de elementos")])),_:1}),l(e(B),{type:"number",modelValue:e(i).repeaterConfig.minItems,"onUpdate:modelValue":t[23]||(t[23]=o=>e(i).repeaterConfig.minItems=o),modelModifiers:{number:!0},min:"0",max:"50"},null,8,["modelValue"]),t[81]||(t[81]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Cantidad mínima de elementos que debe tener el usuario ",-1))]),s("div",null,[l(e(C),null,{default:a(()=>t[82]||(t[82]=[u("Número máximo de elementos")])),_:1}),l(e(B),{type:"number",modelValue:e(i).repeaterConfig.maxItems,"onUpdate:modelValue":t[24]||(t[24]=o=>e(i).repeaterConfig.maxItems=o),modelModifiers:{number:!0},min:"1",max:"50"},null,8,["modelValue"]),t[83]||(t[83]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Cantidad máxima de elementos que puede agregar el usuario ",-1))]),s("div",null,[l(e(C),null,{default:a(()=>t[84]||(t[84]=[u("Nombre del elemento")])),_:1}),l(e(B),{modelValue:e(i).repeaterConfig.itemName,"onUpdate:modelValue":t[25]||(t[25]=o=>e(i).repeaterConfig.itemName=o),placeholder:"Elemento"},null,8,["modelValue"]),t[85]||(t[85]=s("p",{class:"text-xs text-muted-foreground mt-1"},' Cómo se llamará cada instancia (ej: "Referencia", "Experiencia", "Documento") ',-1))]),s("div",null,[l(e(C),null,{default:a(()=>t[86]||(t[86]=[u("Texto del botón agregar")])),_:1}),l(e(B),{modelValue:e(i).repeaterConfig.addButtonText,"onUpdate:modelValue":t[26]||(t[26]=o=>e(i).repeaterConfig.addButtonText=o),placeholder:"Agregar elemento"},null,8,["modelValue"])]),s("div",null,[l(e(C),{class:"text-sm font-medium mb-2"},{default:a(()=>t[87]||(t[87]=[u("Configuración de subcampos")])),_:1}),t[88]||(t[88]=s("p",{class:"text-xs text-muted-foreground mb-3"}," Define los campos que se repetirán dentro del repetidor. ",-1)),l(kt,{modelValue:e(i).repeaterConfig.fields,"onUpdate:modelValue":t[27]||(t[27]=o=>e(i).repeaterConfig.fields=o)},null,8,["modelValue"])])])])])):k("",!0),e(i).type==="convocatoria"&&c.showConvocatoriaConfig&&e(i).convocatoriaConfig?(m(),p("div",Fo,[s("div",$o,[t[96]||(t[96]=s("h4",{class:"font-medium text-green-900 mb-3"},"Selección de Convocatoria para Votación",-1)),t[97]||(t[97]=s("p",{class:"text-sm text-green-700 mb-4"}," Selecciona UNA convocatoria específica. Los usuarios con postulaciones APROBADAS a esta convocatoria aparecerán como opciones de voto. ",-1)),f.convocatorias&&f.convocatorias.length>0?(m(),p("div",Do,[l(e(C),null,{default:a(()=>t[91]||(t[91]=[u("Convocatoria *")])),_:1}),l(e(q),{modelValue:e(i).convocatoriaConfig.convocatoria_id,"onUpdate:modelValue":t[28]||(t[28]=o=>e(i).convocatoriaConfig.convocatoria_id=o)},{default:a(()=>[l(e(N),null,{default:a(()=>[l(e(j),{placeholder:"Selecciona una convocatoria"})]),_:1}),l(e(P),null,{default:a(()=>[(m(!0),p($,null,U(f.convocatorias,o=>(m(),A(e(h),{key:o.id,value:o.id.toString()},{default:a(()=>[s("div",Bo,[s("span",null,_(o.nombre),1),o.cargo?(m(),p("span",Uo,[u(_(o.cargo.ruta_jerarquica||o.cargo.nombre)+" ",1),o.periodo_electoral?(m(),p("span",ho," - "+_(o.periodo_electoral.nombre),1)):k("",!0)])):k("",!0)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t[92]||(t[92]=s("p",{class:"text-xs text-muted-foreground mt-1"}," Se mostrarán los candidatos con postulaciones aprobadas a esta convocatoria ",-1))])):(m(),p("div",Eo,t[93]||(t[93]=[s("p",{class:"text-sm text-amber-800"}," No hay convocatorias con postulaciones aprobadas disponibles. Asegúrate de que existan convocatorias con al menos una postulación aprobada. ",-1)]))),s("div",So,[l(e(z),{id:"conv_multiple",checked:e(i).convocatoriaConfig.multiple,"onUpdate:checked":t[29]||(t[29]=o=>e(i).convocatoriaConfig.multiple=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[94]||(t[94]=[u(" Permitir selección múltiple "),s("span",{class:"text-muted-foreground block text-xs"}," Los votantes podrán seleccionar varios candidatos ",-1)])),_:1})]),s("div",Mo,[l(e(z),{id:"conv_voto_blanco",checked:e(i).convocatoriaConfig.mostrarVotoBlanco,"onUpdate:checked":t[30]||(t[30]=o=>e(i).convocatoriaConfig.mostrarVotoBlanco=o)},null,8,["checked"]),l(e(C),{class:"text-sm"},{default:a(()=>t[95]||(t[95]=[u(" ¿Deseas mostrar Voto en Blanco? "),s("span",{class:"text-muted-foreground block text-xs"},' Agrega la opción "Voto en blanco" para los votantes ',-1)])),_:1})])])])):k("",!0),["repeater","perfil_candidatura","convocatoria"].includes(e(i).type)?k("",!0):(m(),p("div",qo,[l(Mt,{modelValue:e(i).conditionalConfig,"onUpdate:modelValue":t[31]||(t[31]=o=>e(i).conditionalConfig=o),fields:e(d),"current-field-id":e(i).id||"new_field"},null,8,["modelValue","fields","current-field-id"])])),s("div",No,[l(e(F),{type:"button",variant:"outline",onClick:e(G)},{default:a(()=>t[98]||(t[98]=[u(" Cancelar ")])),_:1},8,["onClick"]),l(e(F),{type:"button",onClick:x,disabled:!e(i).title.trim()},{default:a(()=>[u(_(e(D)!==null?"Actualizar":"Agregar")+" Campo ",1)]),_:1},8,["disabled"])])]),_:1})]),_:1})):k("",!0)]))}});export{el as L,tl as _,ot as a};
