import{d as j,k as H,c as C,a as n,o as i,b as e,u as t,m as z,e as d,f as s,j as h,i as c,M as B,W as N,g as l,P as y,n as S,t as o,F as D,r as P,Q as q,l as F}from"./app-adm4E9By.js";import{_ as $}from"./index-RIp_-Vk5.js";import{_}from"./createLucideIcon-BZexDsQJ.js";import{_ as m,c as f,a as b,b as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-ouwQQD5O.js";import{_ as O}from"./Label.vue_vue_type_script_setup_true_lang-U1PsHnlq.js";import{_ as T}from"./UserLayout.vue_vue_type_script_setup_true_lang-D7T3QEK9.js";import{_ as U}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-DSAMFrte.js";import{A as W}from"./arrow-left-4cCMom4f.js";import{S as k}from"./square-pen-CM0Ceg7g.js";import{M as I}from"./message-square-DXWodK41.js";import{U as Q}from"./user-9gw01jjs.js";import{C as R}from"./clock-DS0a750w.js";import{H as G}from"./history-hGl6O7xl.js";import{l as J,C as K}from"./SelectValue.vue_vue_type_script_setup_true_lang-COAsKRo-.js";import"./index-BljgFSoA.js";import"./Input.vue_vue_type_script_setup_true_lang-DPeax23E.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-CwctApMP.js";import"./index-D_FvUGWk.js";import"./floating-ui.vue-CHVdCOHU.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CUlOaAYK.js";import"./VisuallyHidden-CHziw9t0.js";import"./shield-BA_mSgwr.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Dt3CXXnZ.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Dk5CULeb.js";import"./index-C3hFIBGF.js";import"./circle-alert-DH-tXgXk.js";import"./map-pin-BDFPWgVN.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B2K2P9ZP.js";import"./square-check-big-B4I5LHMX.js";import"./file-text-8gYHGT8o.js";import"./users-DZL9w0oY.js";import"./index-DB-wCrKJ.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-DJj5orOZ.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CUrUy-W4.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-B7Md0hqC.js";import"./eye-DpvTalqH.js";import"./check-7dEyZjxo.js";const X={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Y={class:"flex items-center justify-between"},Z={class:"flex gap-2"},aa={class:"flex items-center justify-between"},ta={class:"flex items-center gap-4"},ea={class:"flex items-center gap-2"},sa={class:"text-sm text-muted-foreground"},ra={class:"text-right text-sm text-muted-foreground"},da={key:0},ia=["innerHTML"],oa={key:0,class:"text-center py-8"},na={key:1,class:"space-y-6"},la={class:"grid gap-2 md:grid-cols-3"},ua={class:"md:col-span-1"},ca={key:0,class:"text-red-500"},ma={key:0,class:"text-xs text-muted-foreground mt-1"},fa={class:"md:col-span-2"},pa={class:"min-h-[2rem] flex items-center"},_a={class:"text-muted-foreground"},ba={class:"mb-4"},ga={class:"grid gap-4 md:grid-cols-3"},ha={class:"flex items-center gap-2"},xa={class:"text-xs text-muted-foreground"},va={key:0,class:"text-xs text-green-600 dark:text-green-400"},ya={key:1,class:"text-xs text-orange-600 dark:text-orange-400"},ka={key:2,class:"text-xs text-blue-600 dark:text-blue-400"},wa={key:0},Ca={key:1,class:"text-center"},Sa={key:2,class:"text-center"},Da={class:"text-xs space-y-1"},$a={class:"font-medium"},Aa={class:"font-medium"},Ea={key:0},La={class:"font-medium"},pt=j({__name:"Show",props:{candidatura:{},configuracion_campos:{},canEditOwn:{type:Boolean},canViewPublic:{type:Boolean}},setup(A){const x=A,E=[{title:"Dashboard",href:"/miembro/dashboard"},{title:"Mi Candidatura",href:"/miembro/candidaturas"},{title:"Ver Candidatura",href:"#"}],p=H(!1),v=C(()=>x.candidatura.estado==="borrador"||x.candidatura.estado==="rechazado"),L=C(()=>!!x.candidatura.comentarios_admin),V=()=>{p.value=!p.value},M=(r,a)=>{if(!a)return"No especificado";if(r.type==="checkbox")return Array.isArray(a)?a.join(", "):a;if(typeof a=="string"&&/^\d{4}-\d{2}-\d{2}/.test(a))try{return new Date(a).toLocaleDateString("es-ES")}catch{return a}return Array.isArray(a)?a.join(", "):typeof a=="number"?a.toString():String(a)},w=r=>new Date(r).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(r,a)=>(i(),n(D,null,[e(t(z),{title:"Mi Candidatura"}),e(T,{breadcrumbs:E},{default:d(()=>[s("div",X,[s("div",Y,[a[3]||(a[3]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Vista detallada de tu perfil de candidatura ")],-1)),s("div",Z,[e(t(_),{variant:"outline",onClick:a[0]||(a[0]=u=>t(N).visit("/miembro/candidaturas"))},{default:d(()=>[e(t(W),{class:"mr-2 h-4 w-4"}),a[1]||(a[1]=l(" Volver "))]),_:1}),v.value?(i(),h(t(y),{key:0,href:`/miembro/candidaturas/${r.candidatura.id}/edit`},{default:d(()=>[e(t(_),null,{default:d(()=>[e(t(k),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=l(" Editar "))]),_:1})]),_:1},8,["href"])):c("",!0)])]),e(t(m),null,{default:d(()=>[e(t(f),{class:"p-6"},{default:d(()=>[s("div",aa,[s("div",ta,[s("div",ea,[e(t($),{class:S([r.candidatura.estado_color,"text-sm"])},{default:d(()=>[l(o(r.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",sa," Versión "+o(r.candidatura.version),1)])]),s("div",ra,[s("p",null,"Creada: "+o(w(r.candidatura.created_at)),1),s("p",null,"Actualizada: "+o(w(r.candidatura.updated_at)),1),r.candidatura.fecha_aprobacion?(i(),n("p",da," Aprobada: "+o(r.candidatura.fecha_aprobacion),1)):c("",!0)])])]),_:1})]),_:1}),L.value?(i(),h(t(m),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:d(()=>[e(t(b),null,{default:d(()=>[e(t(g),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:d(()=>[e(t(I),{class:"h-5 w-5"}),a[4]||(a[4]=l(" Comentarios de la comisión "))]),_:1})]),_:1}),e(t(f),null,{default:d(()=>[s("div",{class:"text-blue-700 dark:text-blue-300 prose prose-sm max-w-none",innerHTML:r.candidatura.comentarios_admin},null,8,ia)]),_:1})]),_:1})):c("",!0),e(t(m),null,{default:d(()=>[e(t(b),null,{default:d(()=>[e(t(g),{class:"flex items-center gap-2"},{default:d(()=>[e(t(Q),{class:"h-5 w-5"}),a[5]||(a[5]=l(" Información de Candidatura "))]),_:1})]),_:1}),e(t(f),null,{default:d(()=>[!r.candidatura.formulario_data||Object.keys(r.candidatura.formulario_data).length===0?(i(),n("div",oa,[e(t(R),{class:"mx-auto h-12 w-12 text-yellow-500"}),a[7]||(a[7]=s("h3",{class:"mt-4 text-lg font-medium"},"Candidatura vacía",-1)),a[8]||(a[8]=s("p",{class:"text-muted-foreground mb-4"},"Aún no has completado tu perfil de candidatura.",-1)),v.value?(i(),h(t(y),{key:0,href:`/miembro/candidaturas/${r.candidatura.id}/edit`},{default:d(()=>[e(t(_),null,{default:d(()=>[e(t(k),{class:"mr-2 h-4 w-4"}),a[6]||(a[6]=l(" Completar Candidatura "))]),_:1})]),_:1},8,["href"])):c("",!0)])):(i(),n("div",na,[(i(!0),n(D,null,P(r.configuracion_campos,u=>(i(),n("div",{key:u.id,class:"border-b pb-4 last:border-b-0"},[s("div",la,[s("div",ua,[e(t(O),{class:"text-sm font-medium flex items-center gap-1"},{default:d(()=>[l(o(u.title)+" ",1),u.required?(i(),n("span",ca,"*")):c("",!0)]),_:2},1024),u.description?(i(),n("p",ma,o(u.description),1)):c("",!0)]),s("div",fa,[s("div",pa,[s("p",_a,o(M(u,r.candidatura.formulario_data[u.id])),1)])])])]))),128))]))]),_:1})]),_:1}),B(s("div",ba,[e(U,{"candidatura-id":r.candidatura.id,"version-actual":r.candidatura.version,"is-admin":!1},null,8,["candidatura-id","version-actual"])],512),[[q,p.value]]),s("div",ga,[e(t(m),{class:"h-fit"},{default:d(()=>[e(t(b),{class:"pb-3"},{default:d(()=>[e(t(g),{class:"text-base"},{default:d(()=>a[9]||(a[9]=[l("Estado")])),_:1})]),_:1}),e(t(f),{class:"space-y-2"},{default:d(()=>[s("div",ha,[e(t($),{class:S([r.candidatura.estado_color,"text-xs"])},{default:d(()=>[l(o(r.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",xa,"v"+o(r.candidatura.version),1)]),r.candidatura.estado==="aprobado"?(i(),n("div",va," ✓ Lista para convocatorias ")):r.candidatura.estado==="rechazado"?(i(),n("div",ya," Requiere corrección ")):(i(),n("div",ka,o(r.candidatura.formulario_data&&Object.keys(r.candidatura.formulario_data).length>0?"En revisión":"Pendiente de completar"),1))]),_:1})]),_:1}),e(t(m),{class:"h-fit"},{default:d(()=>[e(t(b),{class:"pb-3"},{default:d(()=>[e(t(g),{class:"text-base"},{default:d(()=>a[10]||(a[10]=[l("Acciones")])),_:1})]),_:1}),e(t(f),{class:"space-y-2"},{default:d(()=>[e(t(_),{onClick:V,variant:"outline",class:"w-full"},{default:d(()=>[e(t(G),{class:"mr-2 h-4 w-4"}),l(" "+o(p.value?"Ocultar":"Mostrar")+" Historial de Cambios ",1),(i(),h(F(p.value?t(J):t(K)),{class:"ml-auto h-4 w-4"}))]),_:1}),v.value?(i(),n("div",wa,[e(t(y),{href:`/miembro/candidaturas/${r.candidatura.id}/edit`},{default:d(()=>[e(t(_),{class:"w-full"},{default:d(()=>[e(t(k),{class:"mr-2 h-4 w-4"}),l(" "+o(r.candidatura.estado==="rechazado"?"Corregir":"Editar"),1)]),_:1})]),_:1},8,["href"])])):r.candidatura.estado==="aprobado"?(i(),n("div",Ca,a[11]||(a[11]=[s("p",{class:"text-xs text-green-600 dark:text-green-400 font-medium"}," ✓ Lista para usar ",-1)]))):(i(),n("div",Sa,a[12]||(a[12]=[s("p",{class:"text-xs text-blue-600 dark:text-blue-400 font-medium"}," ⏳ En revisión ",-1)])))]),_:1})]),_:1}),e(t(m),{class:"h-fit"},{default:d(()=>[e(t(b),{class:"pb-3"},{default:d(()=>[e(t(g),{class:"text-base"},{default:d(()=>a[13]||(a[13]=[l("Configuración actual")])),_:1})]),_:1}),e(t(f),{class:"space-y-2"},{default:d(()=>[s("div",Da,[s("div",null,[a[14]||(a[14]=s("span",{class:"text-muted-foreground"},"Creada:",-1)),s("p",$a,o(new Date(r.candidatura.created_at).toLocaleDateString("es-ES")),1)]),s("div",null,[a[15]||(a[15]=s("span",{class:"text-muted-foreground"},"Actualizada:",-1)),s("p",Aa,o(new Date(r.candidatura.updated_at).toLocaleDateString("es-ES")),1)]),r.candidatura.fecha_aprobacion?(i(),n("div",Ea,[a[16]||(a[16]=s("span",{class:"text-muted-foreground"},"Aprobada:",-1)),s("p",La,o(r.candidatura.fecha_aprobacion),1)])):c("",!0)])]),_:1})]),_:1})])])]),_:1})],64))}});export{pt as default};
