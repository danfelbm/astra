import{d as mt,r as ut,p as ft,s as I,c as j,b as f,w as r,g as e,j as d,e as s,f as o,v as b,h as l,t as i,n as R,m as n,x as gt,i as c,y as vt,F as V,k as F,M as xt}from"./app-B9TOPmlt.js";import{B as bt,_ as yt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DBuYjDAl.js";import{_ as w,a as _,b as C,c as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-8JbMmZ0-.js";import{_ as M}from"./CardDescription.vue_vue_type_script_setup_true_lang-S9Day0Vc.js";import{_ as v}from"./createLucideIcon-DpBiCm_n.js";import{_ as y}from"./index-BX3b2fLA.js";import{_ as ht,a as pt,b as D,c as P}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-JlMm7mrA.js";import{_ as G,a as H}from"./index-C3rdOr2P.js";import{u as kt}from"./useToast-I3BUm4S6.js";import{u as wt}from"./useFileUpload-x8TMVJZu.js";import{C as _t}from"./circle-x-BiIsKjEr.js";import{C as q}from"./circle-check-big-BiHvKdw5.js";import{F as L}from"./file-text-Crx8E7OL.js";import{A as Ct}from"./arrow-left-kjMhejoF.js";import{D as X}from"./download-CyuA8ekH.js";import{C as $t}from"./copy-C19WyhQm.js";import{S as Dt}from"./square-pen-DWYcAYyB.js";import{T as Pt}from"./trash-2-CoPlWJbq.js";import{C as J}from"./circle-alert-DS5qv-mP.js";import{E as St}from"./external-link-BD2lnkio.js";import{D as zt}from"./dollar-sign-D5QXxQil.js";import{C as K}from"./calendar-DorXl5Ec.js";import{U as O}from"./user-Da-HkZ5M.js";import{M as Q}from"./mail-BSXGefXW.js";import{P as W}from"./useFlashMessages-w2rvDQtt.js";import{H as Y}from"./hash-Dxl_7jnl.js";import{E as Vt}from"./eye-Cd-dDIQG.js";import{P as Z}from"./plus-Bg_YIXDk.js";import{L as Ft}from"./list-BovtmYMx.js";import{T as Et}from"./tree-pine-BqAydKGK.js";import{C as Tt}from"./clock-CZ3tr_0q.js";import{C as At}from"./chevron-right-_4nRJ_uY.js";import"./index-DkWnUc8Q.js";import"./floating-ui.vue-BEixnLxp.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-VJiJrCsO.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-lQ-C-vnU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-sawyMmTN.js";import"./chevrons-up-down-B0ZmeXV3.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ucYiIJj7.js";import"./tag-CF53NfGo.js";import"./users-B0NsgXmm.js";import"./target-Co51nDF2.js";import"./shield-Dn7CuH8Q.js";import"./vote-C77vNdCE.js";import"./folder-open-CTk950sb.js";import"./send-CU6BPHgu.js";import"./briefcase-BE5QRmL6.js";import"./megaphone-B6hd4taf.js";import"./user-check-DbK6PlHx.js";import"./clipboard-list-B6e5Biye.js";import"./message-square-DPwDV_-Y.js";import"./panel-left-DBOf36Cl.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-D3EwhHq3.js";import"./VisuallyHidden-Bi-0hazS.js";import"./Input.vue_vue_type_script_setup_true_lang-CvNMbvGN.js";import"./index-FFvcsDEl.js";import"./check-CcWYkizm.js";import"./index-DHeDABhg.js";import"./index-BTjg3Nao.js";import"./RovingFocusItem-UMGvH3Ea.js";import"./utils-C5vilUL6.js";import"./x-Cei9FK_W.js";import"./index-pQLg4C2_.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-ByW9z0kj.js";import"./Label.vue_vue_type_script_setup_true_lang-B_9lqbQW.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Ca09oUOe.js";import"./map-pin-DmiZTikP.js";const It={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},jt={class:"flex items-center justify-between"},Lt={class:"flex items-center gap-4"},Ot={class:"text-3xl font-bold"},Nt={class:"flex items-center gap-4 mt-2"},Bt={class:"flex gap-2"},Ut={class:"space-y-6"},Rt={class:"pb-6 border-b"},Mt={class:"flex items-center gap-2"},Gt={class:"pb-6 border-b"},Ht={key:0},qt={class:"text-2xl font-bold flex items-center gap-2"},Xt={class:"text-sm text-gray-600"},Jt={key:1},Kt={class:"pb-6 border-b"},Qt={class:"space-y-4"},Wt={key:0},Yt={class:"mt-1"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"mt-1 flex items-center gap-2"},ee={class:"mt-1 flex items-center gap-2"},oe={key:1},ae={class:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2"},se={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"},re={key:2},ne={class:"mt-1 text-gray-700"},ie={class:"space-y-3 text-sm"},le={class:"ml-2 font-mono"},de={class:"ml-2"},ce={key:0,class:"block text-xs text-gray-500 ml-2 mt-1"},me={class:"ml-2"},ue={key:0,class:"block text-xs text-gray-500 ml-2 mt-1"},fe={key:0,class:"pb-6 border-b"},ge={class:"flex items-center gap-3 p-4 rounded-lg border bg-blue-50 dark:bg-blue-950/20"},ve={class:"font-medium"},xe=["href"],be={class:"pb-6 border-b"},ye={key:0},he={class:"rounded-lg border p-4 bg-green-50 dark:bg-green-950/20"},pe={class:"flex items-start gap-4"},ke={class:"flex-1"},we={class:"flex items-center gap-2 mb-2"},_e={class:"font-semibold"},Ce={class:"space-y-2 text-sm"},$e={class:"flex items-center gap-2"},De=["href"],Pe={key:0,class:"flex items-center gap-2"},Se=["href"],ze={class:"flex items-center gap-2"},Ve={class:"text-gray-600"},Fe={key:1},Ee={class:"space-y-3 p-4 rounded-lg border bg-gray-50 dark:bg-gray-900/20"},Te={key:0,class:"flex items-start gap-3"},Ae={class:"font-medium"},Ie={key:1,class:"flex items-start gap-3"},je={key:2,class:"flex items-start gap-3"},Le=["href"],Oe={key:3,class:"flex items-start gap-3"},Ne=["href"],Be={key:2},Ue={key:1},Re={class:"text-sm font-medium text-gray-600 mb-3"},Me={class:"space-y-2"},Ge={class:"flex items-center gap-3"},He={class:"font-medium"},qe={class:"text-sm text-gray-500"},Xe={key:0,class:"text-sm text-gray-600 mt-1"},Je={key:2},Ke={class:"space-y-2"},Qe={class:"flex items-center justify-between"},We={class:"flex items-center space-x-3 flex-1"},Ye={class:"min-w-0 flex-1"},Ze={class:"text-sm font-medium truncate"},to={key:0,class:"text-xs text-muted-foreground"},eo={class:"flex items-center space-x-2"},oo={class:"space-y-4"},ao={class:"text-sm font-medium text-gray-600"},so={class:"mt-1"},ro={class:"flex justify-between items-center"},no={class:"flex gap-2"},io={key:0},lo={class:"grid grid-cols-4 gap-4 mb-6"},co={class:"text-center"},mo={class:"text-2xl font-bold"},uo={class:"text-center"},fo={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},go={class:"text-center"},vo={class:"text-2xl font-bold text-green-600 dark:text-green-400"},xo={class:"text-center"},bo={class:"text-2xl font-bold"},yo={key:0,class:"mt-6 space-y-2"},ho={class:"flex items-center justify-between"},po={class:"flex-1"},ko={class:"font-medium"},wo={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},_o={class:"flex items-center gap-4 mt-2"},Co={key:0,class:"text-xs text-gray-500"},$o={key:1,class:"text-xs text-gray-500"},Do={class:"flex gap-2"},Po={class:"text-center mt-4"},So={key:1,class:"text-center py-6 text-gray-500"},Ga=mt({__name:"Show",props:{contrato:{},can:{}},setup(a){const x=a,N=kt(),{downloadFile:tt}=wt(),et=["general","participantes","archivos","campos","obligaciones"],E=ut((()=>{const t=new URLSearchParams(window.location.search).get("tab");return t&&et.includes(t)?t:"general"})());ft(E,u=>{const t=`/admin/contratos/${x.contrato.id}?tab=${u}`;I.get(t,{},{preserveState:!0,preserveScroll:!0,replace:!0,only:[]})});const ot=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:x.contrato.nombre,href:`/admin/contratos/${x.contrato.id}`}],T=j(()=>{const u={borrador:{color:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",icon:L,label:"Borrador"},activo:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:q,label:"Activo"},finalizado:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:q,label:"Finalizado"},cancelado:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:_t,label:"Cancelado"}};return u[x.contrato.estado]||u.borrador}),at=j(()=>({servicio:"Servicio",obra:"Obra",suministro:"Suministro",consultoria:"Consultoría",otro:"Otro"})[x.contrato.tipo]||"Otro"),st=j(()=>x.contrato.estado==="cancelado"?"bg-red-500":x.contrato.estado==="finalizado"?"bg-blue-500":x.contrato.esta_vencido?"bg-red-500":x.contrato.esta_proximo_vencer?"bg-yellow-500":"bg-green-500"),S=u=>u?new Date(u).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",B=u=>u?new Date(u).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",rt=()=>{confirm("¿Está seguro de eliminar este contrato? Esta acción no se puede deshacer.")&&I.delete(route("admin.contratos.destroy",x.contrato.id),{onSuccess:()=>{N.success("Contrato eliminado exitosamente")}})},nt=()=>{confirm("¿Desea duplicar este contrato?")&&I.post(route("admin.contratos.duplicar",x.contrato.id),{},{onSuccess:()=>{N.success("Contrato duplicado exitosamente")}})},it=u=>{window.open(u,"_blank")},lt=()=>{x.contrato.archivo_pdf&&window.open(x.contrato.archivo_pdf,"_blank")},h=u=>{var m,g,k;const t=xt(),p=((m=t.props.auth)==null?void 0:m.permissions)||[];return((k=(g=t.props.auth)==null?void 0:g.roles)==null?void 0:k.some(z=>z.name==="super_admin"))?!0:p.includes(u)},dt=u=>({pendiente:"secondary",en_progreso:"warning",cumplida:"success",vencida:"destructive",cancelada:"outline"})[u]||"secondary";return(u,t)=>(n(),f(yt,{breadcrumbs:ot},{default:r(()=>[e("div",It,[e("div",jt,[e("div",Lt,[s(o(b),{href:u.route("admin.contratos.index")},{default:r(()=>[s(o(v),{variant:"ghost",size:"sm"},{default:r(()=>[s(o(Ct),{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=l(" Volver ",-1))]),_:1})]),_:1},8,["href"]),e("div",null,[e("h1",Ot,i(a.contrato.nombre),1),e("div",Nt,[s(o(y),{class:R(T.value.color)},{default:r(()=>[(n(),f(gt(T.value.icon),{class:"h-4 w-4 mr-1"})),l(" "+i(T.value.label),1)]),_:1},8,["class"]),s(o(y),{variant:"outline"},{default:r(()=>[l(i(at.value),1)]),_:1}),a.contrato.esta_vencido?(n(),f(o(y),{key:0,variant:"destructive"},{default:r(()=>[...t[2]||(t[2]=[l(" Vencido ",-1)])]),_:1})):a.contrato.esta_proximo_vencer?(n(),f(o(y),{key:1,class:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 border border-yellow-300 dark:border-yellow-700"},{default:r(()=>[l(" Vence en "+i(a.contrato.dias_restantes)+" días ",1)]),_:1})):d("",!0)])])]),e("div",Bt,[a.contrato.archivo_pdf?(n(),f(o(v),{key:0,variant:"outline",onClick:lt},{default:r(()=>[s(o(X),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=l(" Descargar PDF ",-1))]),_:1})):d("",!0),a.can.edit?(n(),f(o(v),{key:1,variant:"outline",onClick:nt},{default:r(()=>[s(o($t),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=l(" Duplicar ",-1))]),_:1})):d("",!0),a.can.edit?(n(),f(o(b),{key:2,href:u.route("admin.contratos.edit",a.contrato.id)},{default:r(()=>[s(o(v),null,{default:r(()=>[s(o(Dt),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=l(" Editar ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),a.can.delete?(n(),f(o(v),{key:3,variant:"destructive",onClick:rt},{default:r(()=>[s(o(Pt),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=l(" Eliminar ",-1))]),_:1})):d("",!0)])]),a.contrato.esta_vencido?(n(),f(o(G),{key:0,class:"bg-red-100 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200"},{default:r(()=>[s(o(J),{class:"h-4 w-4"}),s(o(H),null,{default:r(()=>[l(" Este contrato venció el "+i(S(a.contrato.fecha_fin))+". ",1)]),_:1})]),_:1})):a.contrato.esta_proximo_vencer?(n(),f(o(G),{key:1,variant:"warning"},{default:r(()=>[s(o(J),{class:"h-4 w-4"}),s(o(H),null,{default:r(()=>[l(" Este contrato vencerá en "+i(a.contrato.dias_restantes)+" días ("+i(S(a.contrato.fecha_fin))+"). ",1)]),_:1})]),_:1})):d("",!0),e("div",Ut,[s(o(ht),{modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=p=>E.value=p)},{default:r(()=>{var p,A;return[s(o(pt),null,{default:r(()=>{var m,g;return[s(o(D),{value:"general"},{default:r(()=>[...t[7]||(t[7]=[l("Información General",-1)])]),_:1}),s(o(D),{value:"participantes"},{default:r(()=>[...t[8]||(t[8]=[l(" Partes Involucradas ",-1)])]),_:1}),(m=a.contrato.archivos_paths)!=null&&m.length?(n(),f(o(D),{key:0,value:"archivos"},{default:r(()=>[t[9]||(t[9]=l(" Archivos ",-1)),s(o(y),{variant:"outline",class:"ml-1"},{default:r(()=>[l(i(a.contrato.archivos_paths.length),1)]),_:1})]),_:1})):d("",!0),(g=a.contrato.campos_personalizados)!=null&&g.length?(n(),f(o(D),{key:1,value:"campos"},{default:r(()=>[...t[10]||(t[10]=[l(" Campos Adicionales ",-1)])]),_:1})):d("",!0),s(o(D),{value:"obligaciones"},{default:r(()=>[t[11]||(t[11]=l(" Obligaciones ",-1)),a.contrato.total_obligaciones>0?(n(),f(o(y),{key:0,variant:"outline",class:"ml-1"},{default:r(()=>[l(i(a.contrato.total_obligaciones),1)]),_:1})):d("",!0)]),_:1})]}),_:1}),s(o(P),{value:"general"},{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[12]||(t[12]=[l("Información General",-1)])]),_:1})]),_:1}),s(o($),{class:"space-y-6"},{default:r(()=>[e("div",Rt,[t[13]||(t[13]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Proyecto",-1)),e("div",Mt,[s(o(b),{href:u.route("admin.proyectos.show",a.contrato.proyecto.id),class:"text-blue-600 hover:underline flex items-center gap-2 font-medium"},{default:r(()=>[l(i(a.contrato.proyecto.nombre)+" ",1),s(o(St),{class:"h-4 w-4"})]),_:1},8,["href"]),s(o(y),{variant:"outline"},{default:r(()=>[l(i(a.contrato.proyecto.estado),1)]),_:1})])]),e("div",Gt,[t[15]||(t[15]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Información Financiera",-1)),a.contrato.monto_total?(n(),c("div",Ht,[e("p",qt,[s(o(zt),{class:"h-6 w-6"}),l(" "+i(a.contrato.monto_formateado||a.contrato.monto_total)+" ",1),e("span",Xt,i(a.contrato.moneda),1)])])):(n(),c("div",Jt,[...t[14]||(t[14]=[e("p",{class:"text-gray-500 text-sm"},"No se ha especificado información financiera",-1)])]))]),e("div",Kt,[t[21]||(t[21]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Detalles del Contrato",-1)),e("div",Qt,[a.contrato.descripcion?(n(),c("div",Wt,[t[16]||(t[16]=e("h5",{class:"text-sm font-medium text-gray-600"},"Descripción",-1)),e("p",Yt,i(a.contrato.descripcion),1)])):d("",!0),e("div",Zt,[e("div",null,[t[17]||(t[17]=e("h5",{class:"text-sm font-medium text-gray-600"},"Fecha de Inicio",-1)),e("p",te,[s(o(K),{class:"h-4 w-4"}),l(" "+i(S(a.contrato.fecha_inicio)),1)])]),e("div",null,[t[18]||(t[18]=e("h5",{class:"text-sm font-medium text-gray-600"},"Fecha de Fin",-1)),e("p",ee,[s(o(K),{class:"h-4 w-4"}),l(" "+i(S(a.contrato.fecha_fin)),1)])])]),a.contrato.porcentaje_transcurrido!==void 0&&a.contrato.estado==="activo"?(n(),c("div",oe,[e("div",ae,[t[19]||(t[19]=e("span",null,"Progreso del contrato",-1)),e("span",null,i(a.contrato.porcentaje_transcurrido)+"%",1)]),e("div",se,[e("div",{class:R([st.value,"h-3 rounded-full transition-all duration-300"]),style:vt({width:`${a.contrato.porcentaje_transcurrido}%`})},null,6)])])):d("",!0),a.contrato.observaciones?(n(),c("div",re,[t[20]||(t[20]=e("h5",{class:"text-sm font-medium text-gray-600"},"Observaciones",-1)),e("p",ne,i(a.contrato.observaciones),1)])):d("",!0)])]),e("div",null,[t[25]||(t[25]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Información del Sistema",-1)),e("div",ie,[e("div",null,[t[22]||(t[22]=e("span",{class:"text-gray-600"},"ID:",-1)),e("span",le,"#"+i(a.contrato.id),1)]),e("div",null,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Creado:",-1)),e("span",de,i(B(a.contrato.created_at)),1),a.contrato.creador?(n(),c("span",ce," por "+i(a.contrato.creador.name),1)):d("",!0)]),e("div",null,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Última actualización:",-1)),e("span",me,i(B(a.contrato.updated_at)),1),a.contrato.actualizador?(n(),c("span",ue," por "+i(a.contrato.actualizador.name),1)):d("",!0)])])])]),_:1})]),_:1})]),_:1}),s(o(P),{value:"participantes"},{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[26]||(t[26]=[l("Partes Involucradas",-1)])]),_:1}),s(o(M),null,{default:r(()=>[...t[27]||(t[27]=[l(" Responsable, contraparte y participantes del contrato ",-1)])]),_:1})]),_:1}),s(o($),{class:"space-y-6"},{default:r(()=>{var m;return[a.contrato.responsable?(n(),c("div",fe,[t[28]||(t[28]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Responsable del Contrato",-1)),e("div",ge,[s(o(O),{class:"h-8 w-8 text-blue-600"}),e("div",null,[e("p",ve,i(a.contrato.responsable.name),1),e("a",{href:`mailto:${a.contrato.responsable.email}`,class:"text-sm text-blue-600 hover:underline"},i(a.contrato.responsable.email),9,xe)])])])):d("",!0),e("div",be,[t[35]||(t[35]=e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Contraparte",-1)),a.contrato.contraparte_user?(n(),c("div",ye,[e("div",he,[e("div",pe,[s(o(O),{class:"h-8 w-8 text-green-600 mt-1"}),e("div",ke,[e("div",we,[e("h5",_e,i(a.contrato.contraparte_user.name),1),s(o(y),{class:"bg-green-100 text-green-800"},{default:r(()=>[...t[29]||(t[29]=[l(" Usuario del Sistema ",-1)])]),_:1})]),e("div",Ce,[e("div",$e,[s(o(Q),{class:"h-4 w-4 text-gray-400"}),e("a",{href:`mailto:${a.contrato.contraparte_user.email}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_user.email),9,De)]),a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono?(n(),c("div",Pe,[s(o(W),{class:"h-4 w-4 text-gray-400"}),e("a",{href:`tel:${a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_user.phone||a.contrato.contraparte_user.telefono),9,Se)])):d("",!0),e("div",ze,[s(o(Y),{class:"h-4 w-4 text-gray-400"}),e("span",Ve,"ID: #"+i(a.contrato.contraparte_user.id),1)])])])])])])):a.contrato.contraparte_nombre||a.contrato.contraparte_identificacion||a.contrato.contraparte_email||a.contrato.contraparte_telefono?(n(),c("div",Fe,[e("div",Ee,[a.contrato.contraparte_nombre?(n(),c("div",Te,[s(o(bt),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[30]||(t[30]=e("h5",{class:"text-sm font-medium text-gray-600"},"Nombre",-1)),e("p",Ae,i(a.contrato.contraparte_nombre),1)])])):d("",!0),a.contrato.contraparte_identificacion?(n(),c("div",Ie,[s(o(Y),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[31]||(t[31]=e("h5",{class:"text-sm font-medium text-gray-600"},"Identificación",-1)),e("p",null,i(a.contrato.contraparte_identificacion),1)])])):d("",!0),a.contrato.contraparte_email?(n(),c("div",je,[s(o(Q),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[32]||(t[32]=e("h5",{class:"text-sm font-medium text-gray-600"},"Email",-1)),e("a",{href:`mailto:${a.contrato.contraparte_email}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_email),9,Le)])])):d("",!0),a.contrato.contraparte_telefono?(n(),c("div",Oe,[s(o(W),{class:"h-5 w-5 text-gray-400 mt-0.5"}),e("div",null,[t[33]||(t[33]=e("h5",{class:"text-sm font-medium text-gray-600"},"Teléfono",-1)),e("a",{href:`tel:${a.contrato.contraparte_telefono}`,class:"text-blue-600 hover:underline"},i(a.contrato.contraparte_telefono),9,Ne)])])):d("",!0)])])):(n(),c("div",Be,[...t[34]||(t[34]=[e("p",{class:"text-gray-500 text-sm"},"No se ha especificado información de la contraparte",-1)])]))]),(m=a.contrato.participantes)!=null&&m.length?(n(),c("div",Ue,[e("h4",Re,"Participantes del Contrato ("+i(a.contrato.participantes.length)+")",1),e("div",Me,[(n(!0),c(V,null,F(a.contrato.participantes,g=>(n(),c("div",{key:g.id,class:"flex items-center justify-between p-4 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},[e("div",Ge,[s(o(O),{class:"h-8 w-8 text-gray-400"}),e("div",null,[e("p",He,i(g.name),1),e("p",qe,i(g.email),1),g.pivot.notas?(n(),c("p",Xe,i(g.pivot.notas),1)):d("",!0)])]),s(o(y),{variant:g.pivot.rol==="aprobador"?"default":g.pivot.rol==="observador"?"secondary":"outline"},{default:r(()=>[l(i(g.pivot.rol==="aprobador"?"Aprobador":g.pivot.rol==="observador"?"Observador":"Participante"),1)]),_:2},1032,["variant"])]))),128))])])):(n(),c("div",Je,[...t[36]||(t[36]=[e("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Participantes del Contrato",-1),e("p",{class:"text-gray-500 text-sm"},"No hay participantes adicionales registrados para este contrato",-1)])]))]}),_:1})]),_:1})]),_:1}),(p=a.contrato.archivos_paths)!=null&&p.length?(n(),f(o(P),{key:0,value:"archivos"},{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[37]||(t[37]=[l("Archivos del Contrato",-1)])]),_:1}),s(o(M),null,{default:r(()=>[...t[38]||(t[38]=[l("Archivos adjuntos relacionados con el contrato",-1)])]),_:1})]),_:1}),s(o($),null,{default:r(()=>[e("div",Ke,[(n(!0),c(V,null,F(a.contrato.archivos_paths,(m,g)=>{var k,z;return n(),c("div",{key:g,class:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("div",Qe,[e("div",We,[s(o(L),{class:"h-5 w-5 text-muted-foreground flex-shrink-0"}),e("div",Ye,[e("p",Ze,i(((k=a.contrato.archivos_nombres)==null?void 0:k[g])||m.split("/").pop()||"archivo"),1),(z=a.contrato.tipos_archivos)!=null&&z[m]?(n(),c("p",to,i(a.contrato.tipos_archivos[m]),1)):d("",!0)])]),e("div",eo,[s(o(v),{type:"button",variant:"ghost",size:"sm",onClick:ct=>it(`/storage/${m}`),"aria-label":"Ver archivo"},{default:r(()=>[s(o(Vt),{class:"h-4 w-4 mr-1"}),t[39]||(t[39]=l(" Ver ",-1))]),_:1},8,["onClick"]),s(o(v),{type:"button",variant:"ghost",size:"sm",onClick:ct=>{var U;return o(tt)(m,((U=a.contrato.archivos_nombres)==null?void 0:U[g])||"archivo")},"aria-label":"Descargar archivo"},{default:r(()=>[s(o(X),{class:"h-4 w-4 mr-1"}),t[40]||(t[40]=l(" Descargar ",-1))]),_:1},8,["onClick"])])])])}),128))])]),_:1})]),_:1})]),_:1})):d("",!0),(A=a.contrato.campos_personalizados)!=null&&A.length?(n(),f(o(P),{key:1,value:"campos"},{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(_),null,{default:r(()=>[s(o(C),null,{default:r(()=>[...t[41]||(t[41]=[l("Campos Adicionales",-1)])]),_:1})]),_:1}),s(o($),null,{default:r(()=>[e("div",oo,[(n(!0),c(V,null,F(a.contrato.campos_personalizados,m=>(n(),c("div",{key:m.campo.id},[e("h4",ao,i(m.campo.nombre),1),e("p",so,i(m.valor_formateado||m.valor||"-"),1)]))),128))])]),_:1})]),_:1})]),_:1})):d("",!0),s(o(P),{value:"obligaciones",class:"space-y-6 mt-6"},{default:r(()=>[s(o(w),null,{default:r(()=>[s(o(_),null,{default:r(()=>[e("div",ro,[s(o(C),null,{default:r(()=>[...t[42]||(t[42]=[l("Obligaciones del Contrato",-1)])]),_:1}),e("div",no,[h("obligaciones.create")?(n(),f(o(b),{key:0,href:u.route("admin.obligaciones.create",{contrato_id:a.contrato.id})},{default:r(()=>[s(o(v),{size:"sm",variant:"default"},{default:r(()=>[s(o(Z),{class:"h-4 w-4 mr-1"}),t[43]||(t[43]=l(" Nueva Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(o(b),{key:1,href:u.route("admin.obligaciones.index",{contrato_id:a.contrato.id})},{default:r(()=>[s(o(v),{size:"sm",variant:"outline"},{default:r(()=>[s(o(Ft),{class:"h-4 w-4 mr-1"}),t[44]||(t[44]=l(" Ver Lista ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(o(b),{key:2,href:u.route("admin.contratos.obligaciones.arbol",a.contrato.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"outline"},{default:r(()=>[s(o(Et),{class:"h-4 w-4 mr-1"}),t[45]||(t[45]=l(" Vista Árbol ",-1))]),_:1})]),_:1},8,["href"])):d("",!0),h("obligaciones.view")?(n(),f(o(b),{key:3,href:u.route("admin.contratos.obligaciones.timeline",a.contrato.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"outline"},{default:r(()=>[s(o(Tt),{class:"h-4 w-4 mr-1"}),t[46]||(t[46]=l(" Timeline ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)])])]),_:1}),s(o($),null,{default:r(()=>[a.contrato.total_obligaciones&&a.contrato.total_obligaciones>0?(n(),c("div",io,[e("div",lo,[e("div",co,[e("div",mo,i(a.contrato.total_obligaciones),1),t[47]||(t[47]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Total",-1))]),e("div",uo,[e("div",fo,i(a.contrato.obligaciones_pendientes),1),t[48]||(t[48]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Pendientes",-1))]),e("div",go,[e("div",vo,i(a.contrato.obligaciones_cumplidas),1),t[49]||(t[49]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Cumplidas",-1))]),e("div",xo,[e("div",bo,i(a.contrato.total_obligaciones>0?Math.round(a.contrato.obligaciones_cumplidas/a.contrato.total_obligaciones*100):0)+"% ",1),t[50]||(t[50]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Progreso",-1))])]),a.contrato.obligaciones&&a.contrato.obligaciones.length>0?(n(),c("div",yo,[t[53]||(t[53]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Obligaciones principales:",-1)),(n(!0),c(V,null,F(a.contrato.obligaciones,m=>(n(),c("div",{key:m.id,class:"border rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("div",ho,[e("div",po,[e("h5",ko,i(m.titulo),1),m.descripcion?(n(),c("p",wo,i(m.descripcion),1)):d("",!0),e("div",_o,[s(o(y),{variant:dt(m.estado),size:"sm"},{default:r(()=>[l(i(m.estado),1)]),_:2},1032,["variant"]),m.fecha_vencimiento?(n(),c("span",Co," Vence: "+i(new Date(m.fecha_vencimiento).toLocaleDateString()),1)):d("",!0),m.responsable?(n(),c("span",$o," Responsable: "+i(m.responsable.name),1)):d("",!0)])]),e("div",Do,[s(o(b),{href:u.route("admin.obligaciones.show",m.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"ghost"},{default:r(()=>[...t[51]||(t[51]=[l("Ver",-1)])]),_:1})]),_:1},8,["href"]),h("obligaciones.edit")?(n(),f(o(b),{key:0,href:u.route("admin.obligaciones.edit",m.id)},{default:r(()=>[s(o(v),{size:"sm",variant:"ghost"},{default:r(()=>[...t[52]||(t[52]=[l("Editar",-1)])]),_:1})]),_:1},8,["href"])):d("",!0)])])]))),128))])):d("",!0),e("div",Po,[s(o(b),{href:u.route("admin.contratos.obligaciones.arbol",a.contrato.id),class:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800"},{default:r(()=>[t[54]||(t[54]=l(" Ver árbol completo de obligaciones ",-1)),s(o(At),{class:"h-4 w-4 ml-1"})]),_:1},8,["href"])])])):(n(),c("div",So,[s(o(L),{class:"h-12 w-12 mx-auto mb-3 text-gray-300"}),t[56]||(t[56]=e("p",null,"No hay obligaciones registradas para este contrato",-1)),t[57]||(t[57]=e("p",{class:"text-sm text-gray-400 mt-1"},"Las obligaciones te ayudan a hacer seguimiento de tareas y compromisos del contrato",-1)),h("obligaciones.create")?(n(),f(o(b),{key:0,href:u.route("admin.obligaciones.create",{contrato_id:a.contrato.id}),class:"mt-3 inline-block"},{default:r(()=>[s(o(v),{size:"sm",variant:"default"},{default:r(()=>[s(o(Z),{class:"h-4 w-4 mr-1"}),t[55]||(t[55]=l(" Crear Primera Obligación ",-1))]),_:1})]),_:1},8,["href"])):d("",!0)]))]),_:1})]),_:1})]),_:1})]}),_:1},8,["modelValue"])])])]),_:1}))}});export{Ga as default};
