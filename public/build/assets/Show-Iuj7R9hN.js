import{_ as Ce}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DjfisSTq.js";import{d as _e,r as R,c as Ee,i as p,e as d,j as f,f as t,g as a,h as r,u as e,t as m,F as U,k as I,w as s,b as c,n as E,p as De,P as Me,W as T}from"./app-CbA_dzrH.js";import{c as y,_ as v,a as w,b as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dpl1EP6e.js";import{_ as je}from"./CardDescription.vue_vue_type_script_setup_true_lang-FdnBhRW4.js";import{_ as x}from"./createLucideIcon-0y3HvBb2.js";import{_ as h}from"./index-MuREUf8q.js";import{_ as Pe}from"./Progress.vue_vue_type_script_setup_true_lang-D8y6e2Bc.js";import{_ as Se,a as Ve,b as Y,c as Z}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-nmj-UEmO.js";import{_ as ge,a as ye,b as ve,c as he,d as be,e as xe,f as $e,g as ke}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-C68e5fWy.js";import{_ as ze}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-KHcmX8D6.js";import{t as A}from"./index-CXCj42Z3.js";import{_ as ee,a as te,b as se,d as oe,e as B,c as k}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-H44qAxpr.js";import{C as ue}from"./circle-alert-CfNQ3Vlu.js";import{C as F}from"./clock-Bx6DQ-_s.js";import{C as O}from"./circle-check-big-CTzKScww.js";import{F as le}from"./file-text-DINmkRZl.js";import{C as me}from"./chevron-right-pq_ChJ0s.js";import{C as fe}from"./SelectValue.vue_vue_type_script_setup_true_lang-C7VbuHoF.js";import{C as ie}from"./calendar-BOFnEXb6.js";import{U as q}from"./user-BnDczykq.js";import{U as He}from"./users-DLZP89St.js";import{E as ae}from"./ellipsis-rM5DWtK1.js";import{S as ne}from"./square-pen-CVrov98_.js";import{T as W}from"./trash-2-di4yGiJv.js";import{f as G,e as J}from"./es-BDPlFIsO.js";import{A as Te}from"./arrow-left-DWk22nOp.js";import{C as Ae}from"./copy-CisGHgxy.js";import{T as Be}from"./target-B8OPFMH2.js";import{P as ce}from"./plus-D-GKCu6A.js";import{p as pe}from"./parseISO-DFjB8F03.js";import"./UpdateLocationModal.vue_vue_type_script_setup_true_lang-C4x6rJ8B.js";import"./index-D-PGeZ3t.js";import"./floating-ui.vue-D3EH1Xba.js";import"./x-CxSWfWOJ.js";import"./Input.vue_vue_type_script_setup_true_lang-Dw2oMjuZ.js";import"./index-DzUkqZxm.js";import"./index-BGfSt6nP.js";import"./shield-yBic2gp-.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-H8FdC1v8.js";import"./VisuallyHidden-BOU54Fpc.js";import"./Label.vue_vue_type_script_setup_true_lang-BHOcaT7W.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-fWHHAQt9.js";import"./map-pin-B0r5dLQM.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-nF_8TJte.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-CPMNIlI6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevrons-up-down-B4CsJOKK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BZUuILpY.js";import"./tag-DBRua3DS.js";import"./vote-5ymqB6Fb.js";import"./folder-open-B03CPFE8.js";import"./send-BUC0oswk.js";import"./briefcase-BEGziJue.js";import"./megaphone-CDZIxwTF.js";import"./user-check-B3Jm4jmh.js";import"./clipboard-list-wMp9Eq1A.js";import"./mail-I3hCy8Tx.js";import"./message-square-RBI0Tfwc.js";import"./external-link-CKKN5QSr.js";import"./panel-left-ivBXt___.js";import"./check-8t2yOxAa.js";import"./index-DPtKDKxs.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-CIXcS1m3.js";import"./utils-D2aazO7p.js";import"./DialogTrigger-D-8S0g0q.js";const Fe={class:"space-y-6"},Ne={key:0,class:"space-y-6"},Re={key:0},Ue={class:"font-semibold mb-3 flex items-center gap-2"},Le={class:"space-y-2"},Ie={class:"flex items-start justify-between"},Oe={class:"flex-1"},qe={class:"flex items-center gap-2 mb-2"},We={class:"font-medium"},Ge={key:0,class:"ml-8 space-y-3"},Je={key:0,class:"text-sm text-muted-foreground"},Ke={class:"flex flex-wrap gap-4 text-sm"},Qe={class:"flex items-center gap-1 text-muted-foreground"},Xe={key:0,class:"flex items-center gap-1 text-muted-foreground"},Ye={key:1,class:"flex items-center gap-2"},Ze={class:"flex gap-1"},et={key:1},tt={class:"font-semibold mb-3 flex items-center gap-2"},st={class:"space-y-2"},ot={class:"flex items-start justify-between"},at={class:"flex-1"},lt={class:"flex items-center gap-2 mb-2"},it={class:"font-medium"},nt={key:0,class:"ml-8 space-y-3"},dt={key:0,class:"text-sm text-muted-foreground"},rt={class:"flex flex-wrap gap-4 text-sm"},ut={class:"flex items-center gap-1 text-muted-foreground"},mt={key:0,class:"flex items-center gap-1 text-muted-foreground"},ft={key:2},ct={class:"font-semibold mb-3 flex items-center gap-2"},pt={class:"space-y-2"},_t={class:"flex items-start justify-between"},gt={class:"flex-1"},yt={class:"flex items-center gap-2 mb-2"},vt={class:"font-medium line-through text-muted-foreground"},ht={class:"ml-7 space-y-1 text-sm text-muted-foreground"},bt={key:0,class:"flex items-center gap-1"},xt={key:1,class:"flex items-center gap-1"},$t={key:2,class:"italic mt-2"},kt={key:3,class:"text-center py-8"},wt=_e({__name:"EntregablesList",props:{entregables:{},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canComplete:{type:Boolean,default:!1},viewMode:{default:"list"}},emits:["edit","delete","complete","update-status"],setup(K,{emit:_}){const S=K,D=_;R([]);const V=R([]),z=R(!1),M=R(null),g=Ee(()=>({pendientes:S.entregables.filter(n=>n.estado==="pendiente"),en_progreso:S.entregables.filter(n=>n.estado==="en_progreso"),completados:S.entregables.filter(n=>n.estado==="completado"),cancelados:S.entregables.filter(n=>n.estado==="cancelado")})),Q=n=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[n]||"bg-gray-100 text-gray-800",L=n=>({baja:"bg-gray-100 text-gray-600",media:"bg-yellow-100 text-yellow-800",alta:"bg-red-100 text-red-800"})[n]||"bg-gray-100 text-gray-600",H=n=>n?G(new Date(n),"dd MMM yyyy",{locale:J}):"Sin fecha",N=n=>n?G(new Date(n),"dd MMM yyyy 'a las' HH:mm",{locale:J}):"-",$=n=>{if(!n)return null;const u=Math.ceil((new Date(n).getTime()-new Date().getTime())/(1e3*60*60*24));return u<0?`Vencido hace ${Math.abs(u)} días`:u===0?"Vence hoy":u===1?"Vence mañana":`${u} días`},l=n=>{const u=V.value.indexOf(n);u===-1?V.value.push(n):V.value.splice(u,1)},o=n=>V.value.includes(n),j=n=>{D("edit",n)},X=n=>{M.value=n,z.value=!0},we=()=>{M.value&&D("delete",M.value),z.value=!1,M.value=null},de=n=>{D("complete",n)},re=(n,u)=>{D("update-status",n,u)};return(n,u)=>(d(),p("div",Fe,[n.viewMode==="list"?(d(),p("div",Ne,[g.value.pendientes.length>0?(d(),p("div",Re,[a("h3",Ue,[t(e(ue),{class:"h-5 w-5 text-yellow-600"}),r(" Pendientes ("+m(g.value.pendientes.length)+") ",1)]),a("div",Le,[(d(!0),p(U,null,I(g.value.pendientes,i=>(d(),c(e(v),{key:i.id},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>{var P;return[a("div",Ie,[a("div",Oe,[a("div",qe,[t(e(x),{onClick:b=>l(i.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[o(i.id)?(d(),c(e(fe),{key:1,class:"h-4 w-4"})):(d(),c(e(me),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),a("h4",We,m(i.nombre),1),t(e(h),{class:E(L(i.prioridad)),variant:"outline"},{default:s(()=>[r(m(i.prioridad),1)]),_:2},1032,["class"]),t(e(h),{class:E(Q(i.estado))},{default:s(()=>[r(m(i.estado),1)]),_:2},1032,["class"])]),o(i.id)?(d(),p("div",Ge,[i.descripcion?(d(),p("p",Je,m(i.descripcion),1)):f("",!0),a("div",Ke,[a("div",Qe,[t(e(ie),{class:"h-4 w-4"}),a("span",null,m(H(i.fecha_inicio))+" - "+m(H(i.fecha_fin)),1)]),i.responsable?(d(),p("div",Xe,[t(e(q),{class:"h-4 w-4"}),a("span",null,m(i.responsable.name),1)])):f("",!0),$(i.fecha_fin)?(d(),p("div",{key:1,class:E(["flex items-center gap-1",{"text-red-600":(P=$(i.fecha_fin))==null?void 0:P.includes("Vencido")}])},[t(e(F),{class:"h-4 w-4"}),a("span",null,m($(i.fecha_fin)),1)],2)):f("",!0)]),i.usuarios&&i.usuarios.length>0?(d(),p("div",Ye,[t(e(He),{class:"h-4 w-4 text-muted-foreground"}),a("div",Ze,[(d(!0),p(U,null,I(i.usuarios,b=>(d(),c(e(h),{key:b.id,variant:"secondary"},{default:s(()=>[r(m(b.name),1)]),_:2},1024))),128))])])):f("",!0)])):f("",!0)]),n.canEdit||n.canDelete||n.canComplete?(d(),c(e(ee),{key:0},{default:s(()=>[t(e(te),{asChild:""},{default:s(()=>[t(e(x),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(se),{align:"end"},{default:s(()=>[t(e(oe),null,{default:s(()=>[...u[1]||(u[1]=[r("Acciones",-1)])]),_:1}),t(e(B)),n.canComplete?(d(),c(e(k),{key:0,onClick:b=>de(i)},{default:s(()=>[t(e(O),{class:"h-4 w-4 mr-2"}),u[2]||(u[2]=r(" Marcar como completado ",-1))]),_:2},1032,["onClick"])):f("",!0),n.canEdit?(d(),c(e(k),{key:1,onClick:b=>re(i,"en_progreso")},{default:s(()=>[t(e(F),{class:"h-4 w-4 mr-2"}),u[3]||(u[3]=r(" Marcar en progreso ",-1))]),_:2},1032,["onClick"])):f("",!0),n.canEdit?(d(),c(e(k),{key:2,onClick:b=>j(i)},{default:s(()=>[t(e(ne),{class:"h-4 w-4 mr-2"}),u[4]||(u[4]=r(" Editar ",-1))]),_:2},1032,["onClick"])):f("",!0),n.canDelete?(d(),c(e(B),{key:3})):f("",!0),n.canDelete?(d(),c(e(k),{key:4,onClick:b=>X(i),class:"text-red-600"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),u[5]||(u[5]=r(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):f("",!0),g.value.en_progreso.length>0?(d(),p("div",et,[a("h3",tt,[t(e(F),{class:"h-5 w-5 text-blue-600"}),r(" En Progreso ("+m(g.value.en_progreso.length)+") ",1)]),a("div",st,[(d(!0),p(U,null,I(g.value.en_progreso,i=>(d(),c(e(v),{key:i.id,class:"border-l-4 border-l-blue-500"},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>{var P;return[a("div",ot,[a("div",at,[a("div",lt,[t(e(x),{onClick:b=>l(i.id),variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>[o(i.id)?(d(),c(e(fe),{key:1,class:"h-4 w-4"})):(d(),c(e(me),{key:0,class:"h-4 w-4"}))]),_:2},1032,["onClick"]),a("h4",it,m(i.nombre),1),t(e(h),{class:E(L(i.prioridad)),variant:"outline"},{default:s(()=>[r(m(i.prioridad),1)]),_:2},1032,["class"]),t(e(h),{class:"bg-blue-100 text-blue-800"},{default:s(()=>[...u[6]||(u[6]=[r(" En Progreso ",-1)])]),_:1})]),o(i.id)?(d(),p("div",nt,[i.descripcion?(d(),p("p",dt,m(i.descripcion),1)):f("",!0),a("div",rt,[a("div",ut,[t(e(ie),{class:"h-4 w-4"}),a("span",null,"Fecha límite: "+m(H(i.fecha_fin)),1)]),i.responsable?(d(),p("div",mt,[t(e(q),{class:"h-4 w-4"}),a("span",null,m(i.responsable.name),1)])):f("",!0),$(i.fecha_fin)?(d(),p("div",{key:1,class:E(["flex items-center gap-1",{"text-red-600":(P=$(i.fecha_fin))==null?void 0:P.includes("Vencido")}])},[t(e(F),{class:"h-4 w-4"}),a("span",null,m($(i.fecha_fin)),1)],2)):f("",!0)])])):f("",!0)]),n.canEdit||n.canDelete||n.canComplete?(d(),c(e(ee),{key:0},{default:s(()=>[t(e(te),{asChild:""},{default:s(()=>[t(e(x),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(se),{align:"end"},{default:s(()=>[t(e(oe),null,{default:s(()=>[...u[7]||(u[7]=[r("Acciones",-1)])]),_:1}),t(e(B)),n.canComplete?(d(),c(e(k),{key:0,onClick:b=>de(i)},{default:s(()=>[t(e(O),{class:"h-4 w-4 mr-2"}),u[8]||(u[8]=r(" Marcar como completado ",-1))]),_:2},1032,["onClick"])):f("",!0),n.canEdit?(d(),c(e(k),{key:1,onClick:b=>j(i)},{default:s(()=>[t(e(ne),{class:"h-4 w-4 mr-2"}),u[9]||(u[9]=r(" Editar ",-1))]),_:2},1032,["onClick"])):f("",!0),n.canDelete?(d(),c(e(B),{key:2})):f("",!0),n.canDelete?(d(),c(e(k),{key:3,onClick:b=>X(i),class:"text-red-600"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),u[10]||(u[10]=r(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):f("",!0),g.value.completados.length>0?(d(),p("div",ft,[a("h3",ct,[t(e(O),{class:"h-5 w-5 text-green-600"}),r(" Completados ("+m(g.value.completados.length)+") ",1)]),a("div",pt,[(d(!0),p(U,null,I(g.value.completados,i=>(d(),c(e(v),{key:i.id,class:"border-l-4 border-l-green-500 bg-green-50/30"},{default:s(()=>[t(e(y),{class:"p-4"},{default:s(()=>[a("div",_t,[a("div",gt,[a("div",yt,[t(e(O),{class:"h-5 w-5 text-green-600"}),a("h4",vt,m(i.nombre),1),t(e(h),{class:"bg-green-100 text-green-800"},{default:s(()=>[...u[11]||(u[11]=[r(" Completado ",-1)])]),_:1})]),a("div",ht,[i.completado_at?(d(),p("div",bt,[t(e(F),{class:"h-3 w-3"}),a("span",null,"Completado: "+m(N(i.completado_at)),1)])):f("",!0),i.completado_por_usuario?(d(),p("div",xt,[t(e(q),{class:"h-3 w-3"}),a("span",null,"Por: "+m(i.completado_por_usuario.name),1)])):f("",!0),i.notas_completado?(d(),p("p",$t,' "'+m(i.notas_completado)+'" ',1)):f("",!0)])]),n.canEdit||n.canDelete?(d(),c(e(ee),{key:0},{default:s(()=>[t(e(te),{asChild:""},{default:s(()=>[t(e(x),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:s(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(se),{align:"end"},{default:s(()=>[t(e(oe),null,{default:s(()=>[...u[12]||(u[12]=[r("Acciones",-1)])]),_:1}),t(e(B)),n.canEdit?(d(),c(e(k),{key:0,onClick:P=>re(i,"pendiente")},{default:s(()=>[t(e(ue),{class:"h-4 w-4 mr-2"}),u[13]||(u[13]=r(" Reabrir ",-1))]),_:2},1032,["onClick"])):f("",!0),n.canDelete?(d(),c(e(B),{key:1})):f("",!0),n.canDelete?(d(),c(e(k),{key:2,onClick:P=>X(i),class:"text-red-600"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),u[14]||(u[14]=r(" Eliminar ",-1))]),_:2},1032,["onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)):f("",!0)])]),_:2},1024)]),_:2},1024))),128))])])):f("",!0),n.entregables.length===0?(d(),p("div",kt,[t(e(le),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),u[15]||(u[15]=a("p",{class:"text-muted-foreground"},"No hay entregables asignados",-1))])):f("",!0)])):f("",!0),t(e(ge),{open:z.value,"onUpdate:open":u[0]||(u[0]=i=>z.value=i)},{default:s(()=>[t(e(ye),null,{default:s(()=>[t(e(ve),null,{default:s(()=>[t(e(he),null,{default:s(()=>[...u[16]||(u[16]=[r("¿Estás seguro?",-1)])]),_:1}),t(e(be),null,{default:s(()=>{var i;return[r(' Esta acción no se puede deshacer. Se eliminará permanentemente el entregable "'+m((i=M.value)==null?void 0:i.nombre)+'". ',1)]}),_:1})]),_:1}),t(e(xe),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...u[17]||(u[17]=[r("Cancelar",-1)])]),_:1}),t(e(ke),{onClick:we},{default:s(()=>[...u[18]||(u[18]=[r(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Ct={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Et={class:"flex items-center justify-between"},Dt={class:"text-2xl font-bold"},Mt={class:"text-muted-foreground"},jt={class:"flex items-center gap-2"},Pt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},St={class:"text-2xl font-bold"},Vt={class:"text-2xl font-bold"},zt={class:"text-xs text-muted-foreground"},Ht={class:"text-sm font-medium"},Tt={class:"text-sm font-medium"},At={key:0,class:"text-xs text-muted-foreground"},Bt={key:0},Ft={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Nt={class:"grid gap-4 md:grid-cols-2"},Rt={class:"text-sm text-muted-foreground"},Ut={class:"text-sm text-muted-foreground"},Lt={class:"text-sm text-muted-foreground"},It={class:"space-y-2"},Ot={class:"flex items-center justify-between text-sm"},qt={class:"flex items-center justify-between text-sm"},Wt={class:"flex items-center justify-between text-sm"},Gt={class:"grid gap-4 md:grid-cols-2 text-sm"},Jt={class:"font-medium"},Kt={class:"font-medium"},Qt={key:0},Xt={class:"font-medium"},Yt={key:1},Zt={class:"font-medium"},es={class:"flex justify-between items-center"},po=_e({__name:"Show",props:{hito:{},proyecto:{},canEdit:{type:Boolean},canDelete:{type:Boolean},canManageEntregables:{type:Boolean},estadisticas:{}},setup(K){const _=K,S=[{title:"Admin",href:"/admin/dashboard"},{title:"Proyectos",href:"/admin/proyectos"},{title:_.proyecto.nombre,href:`/admin/proyectos/${_.proyecto.id}`},{title:"Hitos",href:`/admin/proyectos/${_.proyecto.id}/hitos`},{title:_.hito.nombre,href:"#"}],D=R("detalles"),V=()=>{T.visit(`/admin/proyectos/${_.proyecto.id}/hitos/${_.hito.id}/edit`)},z=()=>{T.delete(`/admin/proyectos/${_.proyecto.id}/hitos/${_.hito.id}`,{onSuccess:()=>{A.success("Hito eliminado exitosamente")},onError:()=>{A.error("Error al eliminar el hito")}})},M=()=>{T.post(`/admin/proyectos/${_.proyecto.id}/hitos/${_.hito.id}/duplicar`,{},{onSuccess:()=>{A.success("Hito duplicado exitosamente")},onError:()=>{A.error("Error al duplicar el hito")}})},g=()=>{T.visit(`/admin/proyectos/${_.proyecto.id}/hitos/${_.hito.id}/entregables/create`)},Q=l=>{T.visit(`/admin/proyectos/${_.proyecto.id}/hitos/${_.hito.id}/entregables/${l.id}/edit`)},L=l=>{T.delete(`/admin/proyectos/${_.proyecto.id}/hitos/${_.hito.id}/entregables/${l.id}`,{onSuccess:()=>{A.success("Entregable eliminado exitosamente")},onError:()=>{A.error("Error al eliminar el entregable")}})},H=l=>({pendiente:"bg-gray-100 text-gray-800",en_progreso:"bg-blue-100 text-blue-800",completado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",N=l=>l?G(pe(l),"dd MMM yyyy",{locale:J}):"No definida",$=l=>l?G(pe(l),"dd MMM yyyy 'a las' HH:mm",{locale:J}):"No definida";return(l,o)=>(d(),p(U,null,[t(e(De),{title:`Hito: ${l.hito.nombre}`},null,8,["title"]),t(Ce,{breadcrumbs:S},{default:s(()=>[a("div",Ct,[a("div",Et,[a("div",null,[a("h1",Dt,m(l.hito.nombre),1),a("p",Mt,"Proyecto: "+m(l.proyecto.nombre),1)]),a("div",jt,[t(e(Me),{href:`/admin/proyectos/${l.proyecto.id}/hitos`},{default:s(()=>[t(e(x),{variant:"outline",size:"sm"},{default:s(()=>[t(e(Te),{class:"h-4 w-4 mr-2"}),o[1]||(o[1]=r(" Volver ",-1))]),_:1})]),_:1},8,["href"]),l.canEdit?(d(),c(e(x),{key:0,onClick:V,size:"sm",variant:"outline"},{default:s(()=>[t(e(ne),{class:"h-4 w-4 mr-2"}),o[2]||(o[2]=r(" Editar ",-1))]),_:1})):f("",!0),t(e(x),{onClick:M,size:"sm",variant:"outline"},{default:s(()=>[t(e(Ae),{class:"h-4 w-4 mr-2"}),o[3]||(o[3]=r(" Duplicar ",-1))]),_:1}),l.canDelete?(d(),c(e(ge),{key:1},{default:s(()=>[t(e(ze),{asChild:""},{default:s(()=>[t(e(x),{variant:"destructive",size:"sm"},{default:s(()=>[t(e(W),{class:"h-4 w-4 mr-2"}),o[4]||(o[4]=r(" Eliminar ",-1))]),_:1})]),_:1}),t(e(ye),null,{default:s(()=>[t(e(ve),null,{default:s(()=>[t(e(he),null,{default:s(()=>[...o[5]||(o[5]=[r("¿Estás seguro?",-1)])]),_:1}),t(e(be),null,{default:s(()=>[...o[6]||(o[6]=[r(" Esta acción no se puede deshacer. Se eliminará permanentemente el hito y todos sus entregables asociados. ",-1)])]),_:1})]),_:1}),t(e(xe),null,{default:s(()=>[t(e($e),null,{default:s(()=>[...o[7]||(o[7]=[r("Cancelar",-1)])]),_:1}),t(e(ke),{onClick:z},{default:s(()=>[...o[8]||(o[8]=[r(" Eliminar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0)])]),a("div",Pt,[t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...o[9]||(o[9]=[r("Estado",-1)])]),_:1}),t(e(Be),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[t(e(h),{class:E([H(l.hito.estado),"mt-1"])},{default:s(()=>[r(m(l.hito.estado),1)]),_:1},8,["class"])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...o[10]||(o[10]=[r("Progreso",-1)])]),_:1}),t(e(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",St,m(l.hito.porcentaje_completado)+"%",1),t(e(Pe),{value:l.hito.porcentaje_completado,class:"mt-2 h-1"},null,8,["value"])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...o[11]||(o[11]=[r("Entregables",-1)])]),_:1}),t(e(le),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Vt,m(l.estadisticas.total_entregables),1),a("p",zt,m(l.estadisticas.entregables_completados)+" completados ",1)]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...o[12]||(o[12]=[r("Fecha Fin",-1)])]),_:1}),t(e(ie),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Ht,m(N(l.hito.fecha_fin)),1),l.estadisticas.dias_restantes!==null?(d(),p("p",{key:0,class:E(["text-xs",l.estadisticas.esta_vencido?"text-red-600":"text-muted-foreground"])},m(l.estadisticas.esta_vencido?`Vencido hace ${Math.abs(l.estadisticas.dias_restantes)} días`:`${l.estadisticas.dias_restantes} días restantes`),3)):f("",!0)]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium"},{default:s(()=>[...o[13]||(o[13]=[r("Responsable",-1)])]),_:1}),t(e(q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(y),null,{default:s(()=>{var j;return[a("div",Tt,m(((j=l.hito.responsable)==null?void 0:j.name)||"Sin asignar"),1),l.hito.responsable?(d(),p("p",At,m(l.hito.responsable.email),1)):f("",!0)]}),_:1})]),_:1})]),t(e(Se),{modelValue:D.value,"onUpdate:modelValue":o[0]||(o[0]=j=>D.value=j),class:"flex-1"},{default:s(()=>[t(e(Ve),null,{default:s(()=>[t(e(Y),{value:"detalles"},{default:s(()=>[...o[14]||(o[14]=[r("Detalles",-1)])]),_:1}),t(e(Y),{value:"entregables"},{default:s(()=>[o[15]||(o[15]=r(" Entregables ",-1)),t(e(h),{variant:"secondary",class:"ml-2"},{default:s(()=>[r(m(l.estadisticas.total_entregables),1)]),_:1})]),_:1}),t(e(Y),{value:"actividad"},{default:s(()=>[...o[16]||(o[16]=[r("Actividad",-1)])]),_:1})]),_:1}),t(e(Z),{value:"detalles",class:"space-y-4"},{default:s(()=>[t(e(v),null,{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...o[17]||(o[17]=[r("Información General",-1)])]),_:1})]),_:1}),t(e(y),{class:"space-y-4"},{default:s(()=>[l.hito.descripcion?(d(),p("div",Bt,[o[18]||(o[18]=a("h3",{class:"font-semibold mb-2"},"Descripción",-1)),a("p",Ft,m(l.hito.descripcion),1)])):f("",!0),a("div",Nt,[a("div",null,[o[19]||(o[19]=a("h3",{class:"font-semibold mb-2"},"Fecha de Inicio",-1)),a("p",Rt,m(N(l.hito.fecha_inicio)),1)]),a("div",null,[o[20]||(o[20]=a("h3",{class:"font-semibold mb-2"},"Fecha de Fin",-1)),a("p",Ut,m(N(l.hito.fecha_fin)),1)]),a("div",null,[o[21]||(o[21]=a("h3",{class:"font-semibold mb-2"},"Orden",-1)),a("p",Lt,m(l.hito.orden),1)]),a("div",null,[o[22]||(o[22]=a("h3",{class:"font-semibold mb-2"},"Estado",-1)),t(e(h),{class:E(H(l.hito.estado))},{default:s(()=>[r(m(l.hito.estado),1)]),_:1},8,["class"])])]),a("div",null,[o[26]||(o[26]=a("h3",{class:"font-semibold mb-2"},"Resumen de Entregables",-1)),a("div",It,[a("div",Ot,[o[23]||(o[23]=a("span",{class:"text-muted-foreground"},"Pendientes",-1)),t(e(h),{variant:"outline"},{default:s(()=>[r(m(l.estadisticas.entregables_pendientes),1)]),_:1})]),a("div",qt,[o[24]||(o[24]=a("span",{class:"text-muted-foreground"},"En Progreso",-1)),t(e(h),{variant:"outline",class:"bg-blue-50"},{default:s(()=>[r(m(l.estadisticas.entregables_en_progreso),1)]),_:1})]),a("div",Wt,[o[25]||(o[25]=a("span",{class:"text-muted-foreground"},"Completados",-1)),t(e(h),{variant:"outline",class:"bg-green-50"},{default:s(()=>[r(m(l.estadisticas.entregables_completados),1)]),_:1})])])])]),_:1})]),_:1}),t(e(v),null,{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...o[27]||(o[27]=[r("Información del Sistema",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[a("div",Gt,[a("div",null,[o[28]||(o[28]=a("span",{class:"text-muted-foreground"},"Creado el:",-1)),a("p",Jt,m($(l.hito.created_at)),1)]),a("div",null,[o[29]||(o[29]=a("span",{class:"text-muted-foreground"},"Última actualización:",-1)),a("p",Kt,m($(l.hito.updated_at)),1)]),l.hito.created_by_usuario?(d(),p("div",Qt,[o[30]||(o[30]=a("span",{class:"text-muted-foreground"},"Creado por:",-1)),a("p",Xt,m(l.hito.created_by_usuario.name),1)])):f("",!0),l.hito.updated_by_usuario?(d(),p("div",Yt,[o[31]||(o[31]=a("span",{class:"text-muted-foreground"},"Actualizado por:",-1)),a("p",Zt,m(l.hito.updated_by_usuario.name),1)])):f("",!0)])]),_:1})]),_:1})]),_:1}),t(e(Z),{value:"entregables",class:"space-y-4"},{default:s(()=>[a("div",es,[o[33]||(o[33]=a("h2",{class:"text-lg font-semibold"},"Lista de Entregables",-1)),l.canManageEntregables?(d(),c(e(x),{key:0,onClick:g,size:"sm"},{default:s(()=>[t(e(ce),{class:"h-4 w-4 mr-2"}),o[32]||(o[32]=r(" Nuevo Entregable ",-1))]),_:1})):f("",!0)]),t(wt,{entregables:l.hito.entregables||[],"can-edit":l.canManageEntregables,"can-delete":l.canManageEntregables,onEdit:Q,onDelete:L},null,8,["entregables","can-edit","can-delete"]),!l.hito.entregables||l.hito.entregables.length===0?(d(),c(e(v),{key:0},{default:s(()=>[t(e(y),{class:"text-center py-8"},{default:s(()=>[t(e(le),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o[35]||(o[35]=a("p",{class:"text-muted-foreground mb-4"},"No hay entregables asignados a este hito",-1)),l.canManageEntregables?(d(),c(e(x),{key:0,onClick:g,variant:"outline"},{default:s(()=>[t(e(ce),{class:"h-4 w-4 mr-2"}),o[34]||(o[34]=r(" Crear Primer Entregable ",-1))]),_:1})):f("",!0)]),_:1})]),_:1})):f("",!0)]),_:1}),t(e(Z),{value:"actividad",class:"space-y-4"},{default:s(()=>[t(e(v),null,{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...o[36]||(o[36]=[r("Historial de Actividad",-1)])]),_:1}),t(e(je),null,{default:s(()=>[...o[37]||(o[37]=[r(" Registro de cambios y actividades relacionadas con este hito ",-1)])]),_:1})]),_:1}),t(e(y),null,{default:s(()=>[...o[38]||(o[38]=[a("p",{class:"text-sm text-muted-foreground text-center py-8"}," El historial de actividad estará disponible próximamente ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})],64))}});export{po as default};
