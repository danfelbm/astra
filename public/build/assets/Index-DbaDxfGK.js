import{d as U,r as j,c as M,b as n,w as e,g as d,e as a,j as u,m as i,f as t,v as N,h as o,t as p,i as g,F as H,k as J,n as K,s as w}from"./app-BBucnhff.js";import{_ as q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-LFsSTlN3.js";import{_ as b,a as y,b as $,c as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-BFcD0G-E.js";import{_ as S}from"./CardDescription.vue_vue_type_script_setup_true_lang-CyeeliJP.js";import{_ as m}from"./createLucideIcon-RqvW1jC1.js";import{_ as E}from"./index-Kh9gHpa8.js";import{_ as W}from"./Switch.vue_vue_type_script_setup_true_lang-DUtsM8cX.js";import{_ as X,a as Y,b as O,c as k,d as Z,e as C}from"./TableHeader.vue_vue_type_script_setup_true_lang-DPisZxpz.js";import{_ as tt,a as et}from"./index-Viimo6xt.js";import{t as z}from"./index-m8d3giUm.js";import{P as V}from"./plus-BCg1Bpqm.js";import{G as at}from"./grip-vertical-D8ss7Iy2.js";import{S as st}from"./useFlashMessages-BcaieXdH.js";import{C as ot}from"./circle-check-CclX_auJ.js";import{S as lt}from"./square-pen-Bg-bcvbf.js";import{C as rt}from"./copy-DfN5uSdm.js";import{T as it}from"./trash-2-D6IhZeEG.js";import{C as nt}from"./circle-alert-CCsAdFM-.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BcZ4Ea8k.js";import"./index-DCytFFHh.js";import"./floating-ui.vue-BdeO9psJ.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-B4Pg9pfT.js";import"./chevron-right-B-Ufra6g.js";import"./chevrons-up-down-KDhb9sV_.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-4OVE-ROw.js";import"./target-DP0HwWCN.js";import"./users-Bbou9FAK.js";import"./shield-Cx13HbPZ.js";import"./vote-B_GWQXtE.js";import"./folder-open-nsbBxez3.js";import"./send-Bexg2QWO.js";import"./file-text-e_N7fVra.js";import"./briefcase-DRu7NeIF.js";import"./calendar-BtVGX0eX.js";import"./megaphone-DiOSPsGI.js";import"./user-check-ByEi7VqV.js";import"./clipboard-list-DwxwvO7Z.js";import"./mail-mADl0gms.js";import"./message-square-DG1QLRRd.js";import"./external-link-CwxQ-aku.js";import"./panel-left-5PPVcxI5.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DUFi2qUa.js";import"./VisuallyHidden-BiOwSSA8.js";import"./Input.vue_vue_type_script_setup_true_lang-CfxWO4LG.js";import"./index-BG0UqNkx.js";import"./check-CYYyeZOb.js";import"./index-Isbhwbbu.js";import"./VisuallyHiddenInput-CaAQ24Wo.js";import"./x-DSPhGwKy.js";import"./index-CpJDRHmX.js";import"./user-BB-KuuhX.js";import"./house-Dye1IbYF.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BDoVdPZA.js";import"./Label.vue_vue_type_script_setup_true_lang-Bp4qrxc-.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-Cf0xRwLB.js";import"./map-pin-agC9HO4D.js";const dt={class:"space-y-6"},ut={class:"flex justify-between items-center"},mt={class:"flex gap-2"},ct={class:"grid gap-4 md:grid-cols-4"},ft={class:"flex justify-between items-center"},pt={key:0,class:"flex gap-2"},_t={key:0,class:"text-center py-12"},vt={key:1,class:"overflow-x-auto"},gt={class:"flex flex-col gap-1"},kt={key:0,class:"text-xs text-muted-foreground mt-1"},Ct={class:"text-xs bg-muted px-1 py-0.5 rounded"},xt={key:1,class:"text-muted-foreground"},bt={key:0,class:"flex justify-end gap-1"},ze=U({layout:q,__name:"Index",props:{campos:{},estadisticas:{},authPermissions:{}},setup(_){const P=_,A=[{title:"Admin",href:"/admin/dashboard"},{title:"Contratos",href:"/admin/contratos"},{title:"Campos Personalizados",href:"/admin/contratos/campos-personalizados"}],c=j(P.campos.data),f=j(!1),v=M(()=>P.authPermissions.includes("contratos.manage_fields")),B=r=>{w.post(route("admin.campos-personalizados-contrato.toggle-activo",r.id),{},{preserveScroll:!0,onSuccess:()=>{z.success(`Campo ${r.activo?"desactivado":"activado"} correctamente`)}})},R=r=>{confirm(`¿Estás seguro de eliminar el campo "${r.nombre}"? Esta acción no se puede deshacer.`)&&w.delete(route("admin.campos-personalizados-contrato.destroy",r.id),{preserveScroll:!0,onSuccess:()=>{z.success("Campo eliminado correctamente")},onError:s=>{z.error("Error al eliminar el campo")}})},G=r=>{w.post(route("admin.campos-personalizados-contrato.duplicar",r.id),{},{preserveScroll:!0,onSuccess:()=>{z.success("Campo duplicado correctamente")}})},D=()=>{f.value=!0},F=()=>{const r=c.value.map((s,l)=>({id:s.id,orden:l+1}));w.post(route("admin.campos-personalizados-contrato.reordenar"),{campos:r},{preserveScroll:!0,onSuccess:()=>{f.value=!1,z.success("Orden guardado correctamente")}})},L=()=>{c.value=[...P.campos.data],f.value=!1},T=(r,s)=>{const l=s==="arriba"?r-1:r+1;if(l>=0&&l<c.value.length){const x=c.value[r];c.value[r]=c.value[l],c.value[l]=x}},I=r=>({text:"default",number:"secondary",date:"outline",textarea:"default",select:"secondary",checkbox:"outline",radio:"outline",file:"destructive"})[r]||"default";return(r,s)=>(i(),n(q,{breadcrumbs:A},{default:e(()=>[d("div",dt,[d("div",ut,[s[1]||(s[1]=d("div",null,[d("h2",{class:"text-3xl font-bold tracking-tight"}," Campos Personalizados de Contratos "),d("p",{class:"text-muted-foreground mt-2"}," Gestiona los campos adicionales para los contratos ")],-1)),d("div",mt,[v.value?(i(),n(t(N),{key:0,href:r.route("admin.campos-personalizados-contrato.create"),as:"button"},{default:e(()=>[a(t(m),null,{default:e(()=>[a(t(V),{class:"w-4 h-4 mr-2"}),s[0]||(s[0]=o(" Nuevo Campo ",-1))]),_:1})]),_:1},8,["href"])):u("",!0)])]),d("div",ct,[a(t(b),null,{default:e(()=>[a(t(y),{class:"pb-3"},{default:e(()=>[a(t(S),null,{default:e(()=>[...s[2]||(s[2]=[o("Total Campos",-1)])]),_:1}),a(t($),{class:"text-2xl"},{default:e(()=>[o(p(_.estadisticas.total),1)]),_:1})]),_:1})]),_:1}),a(t(b),null,{default:e(()=>[a(t(y),{class:"pb-3"},{default:e(()=>[a(t(S),null,{default:e(()=>[...s[3]||(s[3]=[o("Campos Activos",-1)])]),_:1}),a(t($),{class:"text-2xl text-green-600"},{default:e(()=>[o(p(_.estadisticas.activos),1)]),_:1})]),_:1})]),_:1}),a(t(b),null,{default:e(()=>[a(t(y),{class:"pb-3"},{default:e(()=>[a(t(S),null,{default:e(()=>[...s[4]||(s[4]=[o("Campos Requeridos",-1)])]),_:1}),a(t($),{class:"text-2xl text-blue-600"},{default:e(()=>[o(p(_.estadisticas.requeridos),1)]),_:1})]),_:1})]),_:1}),a(t(b),null,{default:e(()=>[a(t(y),{class:"pb-3"},{default:e(()=>[a(t(S),null,{default:e(()=>[...s[5]||(s[5]=[o("Tipos Distintos",-1)])]),_:1}),a(t($),{class:"text-2xl"},{default:e(()=>[o(p(Object.keys(_.estadisticas.tipos).length),1)]),_:1})]),_:1})]),_:1})]),a(t(b),null,{default:e(()=>[a(t(y),null,{default:e(()=>[d("div",ft,[a(t($),null,{default:e(()=>[...s[6]||(s[6]=[o("Campos Configurados",-1)])]),_:1}),f.value?(i(),g("div",pt,[a(t(m),{onClick:F,size:"sm",variant:"default"},{default:e(()=>[...s[7]||(s[7]=[o(" Guardar Orden ",-1)])]),_:1}),a(t(m),{onClick:L,size:"sm",variant:"outline"},{default:e(()=>[...s[8]||(s[8]=[o(" Cancelar ",-1)])]),_:1})])):v.value&&_.campos.data.length>1?(i(),n(t(m),{key:1,onClick:D,size:"sm",variant:"outline"},{default:e(()=>[a(t(at),{class:"w-4 h-4 mr-2"}),s[9]||(s[9]=o(" Reordenar ",-1))]),_:1})):u("",!0)])]),_:1}),a(t(Q),null,{default:e(()=>[_.campos.data.length===0?(i(),g("div",_t,[a(t(st),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s[11]||(s[11]=d("p",{class:"text-muted-foreground"}," No hay campos personalizados configurados ",-1)),v.value?(i(),n(t(N),{key:0,href:r.route("admin.campos-personalizados-contrato.create"),class:"mt-4 inline-block"},{default:e(()=>[a(t(m),null,{default:e(()=>[a(t(V),{class:"w-4 h-4 mr-2"}),s[10]||(s[10]=o(" Crear Primer Campo ",-1))]),_:1})]),_:1},8,["href"])):u("",!0)])):(i(),g("div",vt,[a(t(X),null,{default:e(()=>[a(t(Y),null,{default:e(()=>[a(t(O),null,{default:e(()=>[f.value?(i(),n(t(k),{key:0,class:"w-12"},{default:e(()=>[...s[12]||(s[12]=[o("Orden",-1)])]),_:1})):u("",!0),a(t(k),null,{default:e(()=>[...s[13]||(s[13]=[o("Nombre",-1)])]),_:1}),a(t(k),null,{default:e(()=>[...s[14]||(s[14]=[o("Slug",-1)])]),_:1}),a(t(k),null,{default:e(()=>[...s[15]||(s[15]=[o("Tipo",-1)])]),_:1}),a(t(k),{class:"text-center"},{default:e(()=>[...s[16]||(s[16]=[o("Requerido",-1)])]),_:1}),a(t(k),{class:"text-center"},{default:e(()=>[...s[17]||(s[17]=[o("Estado",-1)])]),_:1}),a(t(k),{class:"text-right"},{default:e(()=>[...s[18]||(s[18]=[o("Acciones",-1)])]),_:1})]),_:1})]),_:1}),a(t(Z),null,{default:e(()=>[(i(!0),g(H,null,J(c.value,(l,x)=>(i(),n(t(O),{key:l.id,class:K({"opacity-50":!l.activo})},{default:e(()=>[f.value?(i(),n(t(C),{key:0,class:"w-12"},{default:e(()=>[d("div",gt,[a(t(m),{onClick:h=>T(x,"arriba"),size:"sm",variant:"ghost",disabled:x===0,class:"h-6 w-6 p-0"},{default:e(()=>[...s[19]||(s[19]=[o(" ↑ ",-1)])]),_:1},8,["onClick","disabled"]),a(t(m),{onClick:h=>T(x,"abajo"),size:"sm",variant:"ghost",disabled:x===c.value.length-1,class:"h-6 w-6 p-0"},{default:e(()=>[...s[20]||(s[20]=[o(" ↓ ",-1)])]),_:1},8,["onClick","disabled"])])]),_:2},1024)):u("",!0),a(t(C),{class:"font-medium"},{default:e(()=>[o(p(l.nombre)+" ",1),l.descripcion?(i(),g("div",kt,p(l.descripcion),1)):u("",!0)]),_:2},1024),a(t(C),null,{default:e(()=>[d("code",Ct,p(l.slug),1)]),_:2},1024),a(t(C),null,{default:e(()=>[a(t(E),{variant:I(l.tipo)},{default:e(()=>[o(p(l.tipo),1)]),_:2},1032,["variant"])]),_:2},1024),a(t(C),{class:"text-center"},{default:e(()=>[l.es_requerido?(i(),n(t(E),{key:0,variant:"default"},{default:e(()=>[a(t(ot),{class:"w-3 h-3"})]),_:1})):(i(),g("span",xt,"-"))]),_:2},1024),a(t(C),{class:"text-center"},{default:e(()=>[a(t(W),{checked:l.activo,"onUpdate:checked":h=>B(l),disabled:!v.value||f.value},null,8,["checked","onUpdate:checked","disabled"])]),_:2},1024),a(t(C),{class:"text-right"},{default:e(()=>[f.value?u("",!0):(i(),g("div",bt,[v.value?(i(),n(t(N),{key:0,href:r.route("admin.campos-personalizados-contrato.edit",l.id),as:"button"},{default:e(()=>[a(t(m),{size:"sm",variant:"ghost"},{default:e(()=>[a(t(lt),{class:"w-4 h-4"})]),_:1})]),_:1},8,["href"])):u("",!0),v.value?(i(),n(t(m),{key:1,onClick:h=>G(l),size:"sm",variant:"ghost",title:"Duplicar campo"},{default:e(()=>[a(t(rt),{class:"w-4 h-4"})]),_:1},8,["onClick"])):u("",!0),v.value?(i(),n(t(m),{key:2,onClick:h=>R(l),size:"sm",variant:"ghost",class:"text-destructive"},{default:e(()=>[a(t(it),{class:"w-4 h-4"})]),_:1},8,["onClick"])):u("",!0)]))]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]))]),_:1})]),_:1}),a(t(tt),null,{default:e(()=>[a(t(nt),{class:"h-4 w-4"}),a(t(et),null,{default:e(()=>[...s[21]||(s[21]=[o(" Los campos personalizados permiten agregar información adicional a los contratos. Los cambios en los campos no afectan a los contratos existentes hasta que se actualicen. ",-1)])]),_:1})]),_:1})])]),_:1}))}});export{ze as default};
