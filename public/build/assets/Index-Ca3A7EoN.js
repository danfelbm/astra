import{_ as W}from"./index-CtzE2ZsW.js";import{c as ge,_ as x}from"./createLucideIcon-Cgfvt99-.js";import{_ as O,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-BPO4jmee.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-zswzwbwY.js";import{_ as be,a as he,b as H,c as g,d as ye,e as b}from"./TableHeader.vue_vue_type_script_setup_true_lang-D3gS5PNs.js";import{a as z,b as J,c as K,_ as ke}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BWNm87yv.js";import{d as ne,b as y,w as a,M as we,N as Ce,O as $e,f as t,m as u,P as Ee,r as _,p as Se,s as Ae,c as je,i as m,e as o,q as Ne,g as s,j as h,h as r,v as Fe,t as l,F as B,k as X,n as Me}from"./app-_uW1dugG.js";import{_ as Re}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-CHruiF0P.js";import{_ as Te}from"./Pagination.vue_vue_type_script_setup_true_lang-CqEwQyYZ.js";import{e as G,_ as Q,a as Y,b as Z,c as ee,d as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DiEgIWBx.js";import{_ as P}from"./Checkbox.vue_vue_type_script_setup_true_lang-DNBijmsa.js";import{H as Pe}from"./index-DPc4-Tss.js";import{M}from"./mail-B5J8anNk.js";import{S as U}from"./send-CkAwMtac.js";import{S as qe}from"./useFlashMessages-Dbtkta13.js";import{I as Ie}from"./info-CDeksPag.js";import{U as We}from"./user-check-DHsa_k4_.js";import{E as Be}from"./eye-DfAIwpp-.js";import{E as Ue}from"./external-link-CQ6F3Axs.js";import{C as te}from"./circle-alert-BmkZpFMv.js";import{M as oe}from"./message-square-Da-j-dRg.js";import"./index-BsOg3dwq.js";import"./Input.vue_vue_type_script_setup_true_lang-DN97Gps1.js";import"./CollapsibleContent.vue_vue_type_script_setup_true_lang-h9YJSUP8.js";import"./CollapsibleTrigger.vue_vue_type_script_setup_true_lang-NfsqoLAM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-BjVfK8SN.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BCedbIeu.js";import"./chevrons-up-down-uZXkDWN2.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CtVi1mb6.js";import"./tag-ChJj5ULy.js";import"./users-CsAqsYeA.js";import"./target-CIl-5ynT.js";import"./shield-BM5G7lvr.js";import"./vote-CuY124ch.js";import"./folder-open-COoV-miV.js";import"./file-text-f2gSpD92.js";import"./briefcase-T2valhVV.js";import"./calendar-BSitMM8j.js";import"./megaphone-B2FaGee7.js";import"./clipboard-list-CZFMoFbv.js";import"./panel-left-B8lxiciw.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-Bh_XafA_.js";import"./VisuallyHidden-91YFdEdI.js";import"./check-CYARxbiD.js";import"./floating-ui.vue-jllM84JI.js";import"./index-CkTCL-Qw.js";import"./index-B6xDyQoH.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-gjk5Pd1p.js";import"./DialogTrigger-ByyEZHhF.js";import"./useKbd-kRIii9yh.js";import"./chevron-left-hAZ1nYIw.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-CpD7rWSa.js";import"./es-BDPlFIsO.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-CrgX2sdi.js";import"./loader-circle-OMcLwsNn.js";import"./x-DpMkz8bM.js";import"./trash-2-C6cnWiBY.js";import"./plus-BBTOvcwp.js";import"./search-CmzxfDoq.js";import"./filter-Nx8TsC5b.js";import"./history-Cmz6Cpom.js";import"./save-Isl7F08c.js";import"./index-B6vPRSi6.js";import"./user-DewN_dzu.js";import"./GeographicSelector.vue_vue_type_script_setup_true_lang-DtbxKS-K.js";import"./map-pin-DnYK02Zt.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=ge("UsersRoundIcon",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),ae=ne({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(v){const c=v;return(R,q)=>(u(),y(t(Pe),Ce($e(c)),{default:a(()=>[we(R.$slots,"default")]),_:3},16))}});function Le(v){if(!v)return"";const c=document.createElement("DIV");return c.innerHTML=v,(c.textContent||c.innerText||"").trim()}const Oe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Ve={class:"flex items-center justify-between"},He={class:"flex gap-3 items-center"},ze={key:0,class:"mb-4"},Je={class:"flex items-start gap-3"},Ke={class:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30"},Xe={class:"flex-1"},Ge={class:"flex items-center gap-2"},Qe={class:"text-sm text-blue-700 dark:text-blue-300 mt-1"},Ye={key:0,class:"mt-2 flex flex-wrap gap-2"},Ze={class:"font-medium"},es={class:"ml-1 opacity-75"},ss={key:0,class:"text-center py-8"},ts={key:1,class:"rounded-md border"},os={class:"font-medium"},as={class:"text-sm text-muted-foreground"},ns={class:"text-xs text-muted-foreground"},ls={key:0},rs={class:"font-medium text-sm"},is={key:1,class:"text-sm text-muted-foreground"},ds={key:0},us={class:"text-sm"},cs={class:"text-xs text-muted-foreground"},ms={key:1,class:"text-sm text-muted-foreground"},fs={class:"text-sm"},ps={key:0,class:"max-w-xs space-y-1"},_s={class:"text-sm text-blue-800 dark:text-blue-200 truncate"},vs={class:"flex items-center gap-2"},xs={key:0,class:"text-xs text-muted-foreground"},gs={key:1,class:"text-sm text-muted-foreground"},bs=["href"],hs={class:"space-y-6"},ys={class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},ks={class:"flex items-center gap-2 mb-3"},ws={class:"grid grid-cols-2 gap-3 text-sm"},Cs={class:"flex justify-between"},$s={class:"font-medium text-orange-900"},Es={class:"flex justify-between"},Ss={class:"font-medium text-orange-900"},As={class:"flex justify-between"},js={class:"font-medium text-orange-900"},Ns={class:"flex justify-between"},Fs={class:"font-medium text-red-700"},Ms={class:"space-y-4"},Rs={class:"space-y-3"},Ts={class:"flex items-center space-x-3"},Ps={class:"flex items-center gap-2"},qs={class:"text-sm text-muted-foreground ml-1"},Is={class:"flex items-center space-x-3"},Ws={class:"flex items-center gap-2"},Bs={class:"text-sm text-muted-foreground ml-1"},Us={class:"space-y-6"},Ds={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ls={class:"flex items-center gap-2 mb-3"},Os={class:"grid grid-cols-2 gap-3 text-sm"},Vs={class:"flex justify-between"},Hs={class:"font-medium text-blue-900"},zs={class:"flex justify-between"},Js={class:"font-medium text-blue-900"},Ks={class:"flex justify-between"},Xs={class:"font-medium text-blue-900"},Gs={class:"flex justify-between"},Qs={class:"font-medium text-red-700"},Ys={class:"space-y-4"},Zs={class:"space-y-3"},et={class:"flex items-center space-x-3"},st={class:"flex items-center gap-2"},tt={class:"text-sm text-muted-foreground ml-1"},ot={class:"flex items-center space-x-3"},at={class:"flex items-center gap-2"},nt={class:"text-sm text-muted-foreground ml-1"},ho=ne({__name:"Index",props:{candidaturas:{},filters:{},filterFieldsConfig:{},segmentInfo:{}},setup(v){var D,L;const c=v,R=Ee(),q=((D=R.props.auth)==null?void 0:D.permissions)||[],le=((L=R.props.auth)==null?void 0:L.isSuperAdmin)||!1,I=d=>le?!0:q.includes(d)||q.includes("*"),re=[{title:"Admin",href:"/admin/dashboard"},{title:"Candidaturas",href:"#"}],ie=_({estado:c.filters.estado||"null",search:c.filters.search||""});Se(ie,d=>{const e=Object.entries(d).reduce((i,[n,F])=>(i[n]=F==="null"?"":F,i),{});Ae.get("/admin/candidaturas",e,{preserveState:!0,replace:!0})},{deep:!0});const de={fields:c.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["user.name","user.email","user.documento_identidad"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},{route:E}=window,ue=je(()=>({quickSearch:c.filters.search||"",rootGroup:c.filters.advanced_filters?JSON.parse(c.filters.advanced_filters):void 0})),ce=_("todos"),me=()=>{var d;if(c.filters.advanced_filters)try{const i=(d=JSON.parse(c.filters.advanced_filters).conditions)==null?void 0:d.find(n=>n.field==="candidaturas.estado"&&n.operator==="equals");if(i)return i.value}catch{}return"todos"};ce.value=me();const S=_(!1),A=_(!1),k=_(!1),w=_(!1),f=_({total_borradores:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),j=_(!1),N=_(!1),C=_(!1),$=_(!1),p=_({total_pendientes:0,con_email:0,con_telefono:0,sin_email:0,sin_telefono:0}),fe=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),pe=async()=>{try{const e=await(await fetch(E("admin.candidaturas.estadisticas-borradores"))).json();f.value=e,k.value=!1,w.value=!1,S.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas en borrador")}},_e=async()=>{try{C.value=!1,$.value=!1;const e=await(await fetch(E("admin.candidaturas.estadisticas-pendientes"))).json();p.value=e,j.value=!0}catch(d){console.error("Error cargando estadísticas:",d),alert("Error cargando estadísticas de candidaturas pendientes")}},ve=async()=>{var d;if(!C.value&&!$.value){alert("Debes seleccionar al menos un tipo de notificación (email o WhatsApp)");return}N.value=!0;try{const i=await(await fetch(E("admin.candidaturas.enviar-notificaciones"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:C.value,incluir_whatsapp:$.value})})).json();i.success?(j.value=!1,alert(`Notificaciones enviadas exitosamente!

• Candidaturas procesadas: ${i.contadores.total_candidaturas}
• Correos programados: ${i.contadores.emails_enviados}
• WhatsApps programados: ${i.contadores.whatsapps_enviados}
• Errores: ${i.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${i.message}`)}catch(e){console.error("Error enviando notificaciones:",e),alert("Error enviando notificaciones. Por favor intenta de nuevo.")}finally{N.value=!1}},xe=async()=>{var d;if(!k.value&&!w.value){alert("Debes seleccionar al menos un tipo de recordatorio (email o WhatsApp)");return}A.value=!0;try{const i=await(await fetch(E("admin.candidaturas.enviar-recordatorios"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({incluir_email:k.value,incluir_whatsapp:w.value})})).json();i.success?(S.value=!1,alert(`Recordatorios enviados exitosamente!

• Candidaturas procesadas: ${i.contadores.total_candidaturas}
• Correos programados: ${i.contadores.emails_enviados}
• WhatsApps programados: ${i.contadores.whatsapps_enviados}
• Errores: ${i.contadores.errores}

Los mensajes se están enviando en segundo plano respetando los límites de velocidad configurados.`)):alert(`Error: ${i.message}`)}catch(e){console.error("Error enviando recordatorios:",e),alert("Error enviando recordatorios. Por favor intenta de nuevo.")}finally{A.value=!1}};return(d,e)=>(u(),m(B,null,[o(t(Ne),{title:"Candidaturas"}),o(ke,{breadcrumbs:re},{default:a(()=>{var i;return[s("div",Oe,[s("div",Ve,[e[12]||(e[12]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Candidaturas"),s("p",{class:"text-muted-foreground"}," Revisa y gestiona los perfiles de candidatura de los usuarios ")],-1)),s("div",He,[e[11]||(e[11]=s("div",{class:"h-8 w-px bg-border"},null,-1)),I("candidaturas.notificaciones")?(u(),y(t(x),{key:0,onClick:_e,variant:"outline",class:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 hover:border-blue-300"},{default:a(()=>[o(t(M),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=r(" Notificaciones ",-1))]),_:1})):h("",!0),I("candidaturas.recordatorios")?(u(),y(t(x),{key:1,onClick:pe,variant:"outline",class:"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 hover:border-orange-300"},{default:a(()=>[o(t(U),{class:"mr-2 h-4 w-4"}),e[9]||(e[9]=r(" Recordatorios ",-1))]),_:1})):h("",!0),I("candidaturas.configuracion")?(u(),y(t(Fe),{key:2,href:"/admin/candidaturas/configuracion"},{default:a(()=>[o(t(x),null,{default:a(()=>[o(t(qe),{class:"mr-2 h-4 w-4"}),e[10]||(e[10]=r(" Configuración ",-1))]),_:1})]),_:1})):h("",!0)])]),(i=c.segmentInfo)!=null&&i.applied?(u(),m("div",ze,[o(t(O),{class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:a(()=>[o(t(V),{class:"p-4"},{default:a(()=>[s("div",Je,[s("div",Ke,[o(t(De),{class:"h-5 w-5 text-blue-600 dark:text-blue-400"})]),s("div",Xe,[s("div",Ge,[e[14]||(e[14]=s("h3",{class:"font-semibold text-sm text-blue-900 dark:text-blue-100"}," Filtro de Segmento Activo ",-1)),o(t(ae),null,{default:a(()=>[o(t(z),null,{default:a(()=>[o(t(J),null,{default:a(()=>[o(t(Ie),{class:"h-4 w-4 text-blue-600 dark:text-blue-400"})]),_:1}),o(t(K),null,{default:a(()=>[...e[13]||(e[13]=[s("p",{class:"max-w-xs"}," Tu rol tiene un segmento asignado que filtra automáticamente los datos que puedes ver. Los filtros adicionales se aplicarán sobre este conjunto de datos. ",-1)])]),_:1})]),_:1})]),_:1})]),s("p",Qe,l(c.segmentInfo.message),1),c.segmentInfo.segments.length>0?(u(),m("div",Ye,[(u(!0),m(B,null,X(c.segmentInfo.segments,n=>(u(),y(t(W),{key:n.id,variant:"secondary",class:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},{default:a(()=>[s("span",Ze,l(n.name),1),s("span",es,"("+l(n.user_count)+" usuarios)",1)]),_:2},1024))),128))])):h("",!0)])])]),_:1})]),_:1})])):h("",!0),o(Re,{config:de,route:t(E)("admin.candidaturas.index"),"initial-filters":ue.value},null,8,["route","initial-filters"]),o(t(O),null,{default:a(()=>[o(t(V),{class:"pt-6"},{default:a(()=>[v.candidaturas.data.length===0?(u(),m("div",ss,[o(t(We),{class:"mx-auto h-12 w-12 text-muted-foreground"}),e[15]||(e[15]=s("h3",{class:"mt-4 text-lg font-medium"},"No hay candidaturas",-1)),e[16]||(e[16]=s("p",{class:"text-muted-foreground"},"No se encontraron candidaturas con los filtros aplicados.",-1))])):(u(),m("div",ts,[o(t(be),null,{default:a(()=>[o(t(he),null,{default:a(()=>[o(t(H),null,{default:a(()=>[o(t(g),null,{default:a(()=>[...e[17]||(e[17]=[r("Usuario",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[18]||(e[18]=[r("Convocatoria",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[19]||(e[19]=[r("Estado",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[20]||(e[20]=[r("Datos Completados",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[21]||(e[21]=[r("Actualizado",-1)])]),_:1}),o(t(g),null,{default:a(()=>[...e[22]||(e[22]=[r("Comentarios",-1)])]),_:1}),o(t(g),{class:"text-right"},{default:a(()=>[...e[23]||(e[23]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),o(t(ye),null,{default:a(()=>[(u(!0),m(B,null,X(v.candidaturas.data,n=>(u(),y(t(H),{key:n.id},{default:a(()=>[o(t(b),null,{default:a(()=>[s("div",null,[s("p",os,l(n.usuario.name),1),s("p",as,l(n.usuario.email),1),s("p",ns,l(n.usuario.documento_identidad||"Sin documento"),1)])]),_:2},1024),o(t(b),null,{default:a(()=>[n.convocatoria?(u(),m("div",ls,[s("p",rs,l(n.convocatoria.nombre),1)])):(u(),m("span",is,"Sin convocatoria"))]),_:2},1024),o(t(b),null,{default:a(()=>[o(t(W),{class:Me(n.estado_color)},{default:a(()=>[r(l(n.estado_label),1)]),_:2},1032,["class"])]),_:2},1024),o(t(b),null,{default:a(()=>[n.total_campos>0?(u(),m("div",ds,[s("p",us,l(n.campos_llenados)+" / "+l(n.total_campos),1),s("p",cs," ("+l(n.porcentaje_completado)+"%) ",1)])):(u(),m("span",ms,"Sin configuración"))]),_:2},1024),o(t(b),null,{default:a(()=>[s("p",fs,l(fe(n.updated_at)),1)]),_:2},1024),o(t(b),null,{default:a(()=>{var F;return[n.comentario_actual||n.comentarios_admin?(u(),m("div",ps,[s("p",_s,l(t(Le)(((F=n.comentario_actual)==null?void 0:F.comentario)||n.comentarios_admin||"")),1),s("div",vs,[n.comentario_actual?(u(),m("span",xs,l(n.comentario_actual.fecha_relativa),1)):h("",!0),n.total_comentarios&&n.total_comentarios>1?(u(),y(t(W),{key:1,variant:"secondary",class:"text-xs"},{default:a(()=>[r(" +"+l(n.total_comentarios-1)+" más ",1)]),_:2},1024)):h("",!0)])])):(u(),m("span",gs,"-"))]}),_:2},1024),o(t(b),{class:"text-right"},{default:a(()=>[o(t(ae),null,{default:a(()=>[o(t(z),null,{default:a(()=>[o(t(J),{asChild:""},{default:a(()=>[s("a",{href:`/admin/candidaturas/${n.id}`,target:"_blank",rel:"noopener noreferrer"},[o(t(x),{variant:"outline",size:"sm"},{default:a(()=>[o(t(Be),{class:"mr-2 h-4 w-4"}),e[24]||(e[24]=r(" Ver candidatura ",-1)),o(t(Ue),{class:"ml-1 h-3 w-3"})]),_:1})],8,bs)]),_:2},1024),o(t(K),null,{default:a(()=>[...e[25]||(e[25]=[s("p",null,"Abrir en nueva ventana",-1)])]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),o(Te,{links:v.candidaturas.links},null,8,["links"])]),_:1})]),_:1}),o(t(G),{open:S.value,"onUpdate:open":e[3]||(e[3]=n=>S.value=n)},{default:a(()=>[o(t(Q),{class:"sm:max-w-md"},{default:a(()=>[o(t(Y),null,{default:a(()=>[o(t(Z),{class:"flex items-center gap-2"},{default:a(()=>[o(t(U),{class:"h-5 w-5 text-orange-600"}),e[26]||(e[26]=r(" Enviar Recordatorios Masivos ",-1))]),_:1}),o(t(ee),null,{default:a(()=>[...e[27]||(e[27]=[r(" Envía recordatorios por correo y/o WhatsApp a todas las candidaturas en estado borrador. ",-1)])]),_:1})]),_:1}),s("div",hs,[s("div",ys,[s("div",ks,[o(t(te),{class:"h-5 w-5 text-orange-600"}),e[28]||(e[28]=s("h3",{class:"font-medium text-orange-900"},"Candidaturas en Borrador",-1))]),s("div",ws,[s("div",Cs,[e[29]||(e[29]=s("span",{class:"text-orange-700"},"Total en borrador:",-1)),s("span",$s,l(f.value.total_borradores),1)]),s("div",Es,[e[30]||(e[30]=s("span",{class:"text-orange-700"},"Con email:",-1)),s("span",Ss,l(f.value.con_email),1)]),s("div",As,[e[31]||(e[31]=s("span",{class:"text-orange-700"},"Con teléfono:",-1)),s("span",js,l(f.value.con_telefono),1)]),s("div",Ns,[e[32]||(e[32]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",Fs,l(Math.max(0,f.value.total_borradores-Math.max(f.value.con_email,f.value.con_telefono))),1)])])]),s("div",Ms,[e[35]||(e[35]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de recordatorio:",-1)),s("div",Rs,[s("div",Ts,[o(t(P),{id:"include-email",checked:k.value,"onUpdate:checked":e[0]||(e[0]=n=>k.value=n),disabled:f.value.con_email===0},null,8,["checked","disabled"]),s("div",Ps,[o(t(M),{class:"h-4 w-4 text-blue-600"}),o(t(T),{for:"include-email",class:"flex-1"},{default:a(()=>[e[33]||(e[33]=r(" Correo electrónico ",-1)),s("span",qs," ("+l(f.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",Is,[o(t(P),{id:"include-whatsapp",checked:w.value,"onUpdate:checked":e[1]||(e[1]=n=>w.value=n),disabled:f.value.con_telefono===0},null,8,["checked","disabled"]),s("div",Ws,[o(t(oe),{class:"h-4 w-4 text-green-600"}),o(t(T),{for:"include-whatsapp",class:"flex-1"},{default:a(()=>[e[34]||(e[34]=r(" WhatsApp ",-1)),s("span",Bs," ("+l(f.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[36]||(e[36]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Los mensajes se envían respetando los límites de velocidad configurados"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),o(t(se),null,{default:a(()=>[o(t(x),{variant:"outline",onClick:e[2]||(e[2]=n=>S.value=!1),disabled:A.value},{default:a(()=>[...e[37]||(e[37]=[r(" Cancelar ",-1)])]),_:1},8,["disabled"]),o(t(x),{onClick:xe,disabled:A.value||f.value.total_borradores===0||!k.value&&!w.value,class:"bg-orange-600 hover:bg-orange-700"},{default:a(()=>[o(t(U),{class:"mr-2 h-4 w-4"}),r(" "+l(A.value?"Enviando...":`Enviar Recordatorios (${f.value.total_borradores})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),o(t(G),{open:j.value,"onUpdate:open":e[7]||(e[7]=n=>j.value=n)},{default:a(()=>[o(t(Q),{class:"sm:max-w-md"},{default:a(()=>[o(t(Y),null,{default:a(()=>[o(t(Z),{class:"flex items-center gap-2"},{default:a(()=>[o(t(M),{class:"h-5 w-5 text-blue-600"}),e[38]||(e[38]=r(" Enviar Notificaciones de Estado ",-1))]),_:1}),o(t(ee),null,{default:a(()=>[...e[39]||(e[39]=[r(" Envía notificaciones por correo y/o WhatsApp a todas las candidaturas en estado pendiente de revisión. ",-1)])]),_:1})]),_:1}),s("div",Us,[s("div",Ds,[s("div",Ls,[o(t(te),{class:"h-5 w-5 text-blue-600"}),e[40]||(e[40]=s("h3",{class:"font-medium text-blue-900"},"Candidaturas Pendientes de Revisión",-1))]),s("div",Os,[s("div",Vs,[e[41]||(e[41]=s("span",{class:"text-blue-700"},"Total pendientes:",-1)),s("span",Hs,l(p.value.total_pendientes),1)]),s("div",zs,[e[42]||(e[42]=s("span",{class:"text-blue-700"},"Con email:",-1)),s("span",Js,l(p.value.con_email),1)]),s("div",Ks,[e[43]||(e[43]=s("span",{class:"text-blue-700"},"Con teléfono:",-1)),s("span",Xs,l(p.value.con_telefono),1)]),s("div",Gs,[e[44]||(e[44]=s("span",{class:"text-red-600"},"Sin contacto:",-1)),s("span",Qs,l(Math.max(0,p.value.total_pendientes-Math.max(p.value.con_email,p.value.con_telefono))),1)])])]),s("div",Ys,[e[47]||(e[47]=s("h4",{class:"font-medium text-gray-900"},"Selecciona los tipos de notificación:",-1)),s("div",Zs,[s("div",et,[o(t(P),{id:"include-email-notif",checked:C.value,"onUpdate:checked":e[4]||(e[4]=n=>C.value=n),disabled:p.value.con_email===0},null,8,["checked","disabled"]),s("div",st,[o(t(M),{class:"h-4 w-4 text-blue-600"}),o(t(T),{for:"include-email-notif",class:"flex-1"},{default:a(()=>[e[45]||(e[45]=r(" Correo electrónico ",-1)),s("span",tt," ("+l(p.value.con_email)+" candidaturas) ",1)]),_:1})])]),s("div",ot,[o(t(P),{id:"include-whatsapp-notif",checked:$.value,"onUpdate:checked":e[5]||(e[5]=n=>$.value=n),disabled:p.value.con_telefono===0},null,8,["checked","disabled"]),s("div",at,[o(t(oe),{class:"h-4 w-4 text-green-600"}),o(t(T),{for:"include-whatsapp-notif",class:"flex-1"},{default:a(()=>[e[46]||(e[46]=r(" WhatsApp ",-1)),s("span",nt," ("+l(p.value.con_telefono)+" candidaturas) ",1)]),_:1})])])])]),e[48]||(e[48]=s("div",{class:"text-xs text-muted-foreground bg-gray-50 border border-gray-200 rounded p-3"},[s("p",{class:"mb-1"},"• Se notificará que la candidatura fue recibida exitosamente"),s("p",{class:"mb-1"},"• Emails: 2 por segundo | WhatsApp: 5 por segundo"),s("p",null,"• El proceso se ejecuta en segundo plano")],-1))]),o(t(se),null,{default:a(()=>[o(t(x),{variant:"outline",onClick:e[6]||(e[6]=n=>j.value=!1),disabled:N.value},{default:a(()=>[...e[49]||(e[49]=[r(" Cancelar ",-1)])]),_:1},8,["disabled"]),o(t(x),{onClick:ve,disabled:N.value||p.value.total_pendientes===0||!C.value&&!$.value,class:"bg-blue-600 hover:bg-blue-700"},{default:a(()=>[o(t(M),{class:"mr-2 h-4 w-4"}),r(" "+l(N.value?"Enviando...":`Enviar Notificaciones (${p.value.total_pendientes})`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1})],64))}});export{ho as default};
